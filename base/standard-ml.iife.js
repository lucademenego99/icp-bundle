(function(){"use strict";
globalThis.process = globalThis.process;
function Tt(){}function ru(t){return t()}function lm(){return Object.create(null)}function No(t){t.forEach(ru)}function cm(t){return typeof t=="function"}function Wi(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function _Z(t){return Object.keys(t).length===0}function DZ(t,...e){if(t==null)return Tt;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Vs(t,e,n){t.$$.on_destroy.push(DZ(e,n))}function nu(t,e,n){return t.set(n),e}function ft(t,e){t.appendChild(e)}function Ut(t,e,n){t.insertBefore(e,n||null)}function ur(t){t.parentNode.removeChild(t)}function Wt(t){return document.createElement(t)}function xr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ha(t){return document.createTextNode(t)}function Yr(){return Ha(" ")}function En(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Te(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Pe(t,e,n){e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:Te(t,e,n)}function QZ(t){return Array.from(t.childNodes)}function iu(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function tt(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Ni(t){const e={};for(const n of t)e[n.name]=n.value;return e}let Cs;function Xs(t){Cs=t}function qZ(){if(!Cs)throw new Error("Function called outside component initialization");return Cs}function Ls(t){qZ().$$.on_mount.push(t)}const xs=[],Sr=[],Ka=[],um=[],$Z=Promise.resolve();let ou=!1;function e2(){ou||(ou=!0,$Z.then(mt))}function su(t){Ka.push(t)}const au=new Set;let Ja=0;function mt(){const t=Cs;do{for(;Ja<xs.length;){const e=xs[Ja];Ja++,Xs(e),t2(e.$$)}for(Xs(null),xs.length=0,Ja=0;Sr.length;)Sr.pop()();for(let e=0;e<Ka.length;e+=1){const n=Ka[e];au.has(n)||(au.add(n),n())}Ka.length=0}while(xs.length);for(;um.length;)um.pop()();ou=!1,au.clear(),Xs(t)}function t2(t){if(t.fragment!==null){t.update(),No(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(su)}}const r2=new Set;function n2(t,e){t&&t.i&&(r2.delete(t),t.i(e))}function i2(t,e,n,r){const{fragment:i,on_mount:s,on_destroy:o,after_update:a}=t.$$;i&&i.m(e,n),r||su(()=>{const l=s.map(ru).filter(cm);o?o.push(...l):No(l),t.$$.on_mount=[]}),a.forEach(su)}function o2(t,e){const n=t.$$;n.fragment!==null&&(No(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function s2(t,e){t.$$.dirty[0]===-1&&(xs.push(t),e2(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Mi(t,e,n,r,i,s,o,a=[-1]){const l=Cs;Xs(t);const c=t.$$={fragment:null,ctx:null,props:s,update:Tt,not_equal:i,bound:lm(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:lm(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let m=!1;if(c.ctx=n?n(t,e.props||{},(p,u,...d)=>{const h=d.length?d[0]:u;return c.ctx&&i(c.ctx[p],c.ctx[p]=h)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](h),m&&s2(t,p)),u}):[],c.update(),m=!0,No(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const p=QZ(e.target);c.fragment&&c.fragment.l(p),p.forEach(ur)}else c.fragment&&c.fragment.c();e.intro&&n2(t.$$.fragment),i2(t,e.target,e.anchor,e.customElement),mt()}Xs(l)}let Vi;typeof HTMLElement=="function"&&(Vi=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(ru).filter(cm);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){No(this.$$.on_disconnect)}$destroy(){o2(this,1),this.$destroy=Tt}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const r=n.indexOf(e);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!_Z(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const Mo=[];function lu(t,e=Tt){let n;const r=new Set;function i(a){if(Wi(t,a)&&(t=a,n)){const l=!Mo.length;for(const c of r)c[1](),Mo.push(c,t);if(l){for(let c=0;c<Mo.length;c+=2)Mo[c][0](Mo[c+1]);Mo.length=0}}}function s(a){i(a(t))}function o(a,l=Tt){const c=[a,l];return r.add(c),r.size===1&&(n=e(i)||Tt),a(t),()=>{r.delete(c),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}const ja=lu(!1),cu=lu(null),dm=lu(localStorage.getItem("icpDefaultTheme")||null);var Ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function l2(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function Pa(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hm={exports:{}};/*! p5.js v1.5.0 October 18, 2022 */(function(t,e){(function(n){t.exports=n()})(function(){var n;return function r(i,s,o){function a(m,p){if(!s[m]){if(!i[m]){var u=typeof Pa=="function"&&Pa;if(!p&&u)return u(m,!0);if(l)return l(m,!0);throw(p=new Error("Cannot find module '"+m+"'")).code="MODULE_NOT_FOUND",p}u=s[m]={exports:{}},i[m][0].call(u.exports,function(d){return a(i[m][1][d]||d)},u,u.exports,r,i,s,o)}return s[m].exports}for(var l=typeof Pa=="function"&&Pa,c=0;c<o.length;c++)a(o[c]);return a}({1:[function(r,i,s){s.byteLength=function(f){var f=u(f),h=f[0],f=f[1];return 3*(h+f)/4-f},s.toByteArray=function(d){var h,f,y=u(d),g=y[0],y=y[1],Z=new l(function(R,C){return 3*(R+C)/4-C}(g,y)),I=0,G=0<y?g-4:g;for(f=0;f<G;f+=4)h=a[d.charCodeAt(f)]<<18|a[d.charCodeAt(f+1)]<<12|a[d.charCodeAt(f+2)]<<6|a[d.charCodeAt(f+3)],Z[I++]=h>>16&255,Z[I++]=h>>8&255,Z[I++]=255&h;return y===2&&(h=a[d.charCodeAt(f)]<<2|a[d.charCodeAt(f+1)]>>4,Z[I++]=255&h),y===1&&(h=a[d.charCodeAt(f)]<<10|a[d.charCodeAt(f+1)]<<4|a[d.charCodeAt(f+2)]>>2,Z[I++]=h>>8&255,Z[I++]=255&h),Z},s.fromByteArray=function(d){for(var h,f=d.length,g=f%3,y=[],Z=0,I=f-g;Z<I;Z+=16383)y.push(function(G,R,C){for(var V,x=[],w=R;w<C;w+=3)V=(G[w]<<16&16711680)+(G[w+1]<<8&65280)+(255&G[w+2]),x.push(function(k){return o[k>>18&63]+o[k>>12&63]+o[k>>6&63]+o[63&k]}(V));return x.join("")}(d,Z,I<Z+16383?I:Z+16383));return g==1?(h=d[f-1],y.push(o[h>>2]+o[h<<4&63]+"==")):g==2&&(h=(d[f-2]<<8)+d[f-1],y.push(o[h>>10]+o[h>>4&63]+o[h<<2&63]+"=")),y.join("")};for(var o=[],a=[],l=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,p=c.length;m<p;++m)o[m]=c[m],a[c.charCodeAt(m)]=m;function u(d){var h=d.length;if(0<h%4)throw new Error("Invalid string. Length must be a multiple of 4");return d=d.indexOf("="),h=(d=d===-1?h:d)===h?0:4-d%4,[d,h]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],2:[function(r,i,s){},{}],3:[function(r,i,s){arguments[4][2][0].apply(s,arguments)},{dup:2}],4:[function(r,i,s){(function(u){var a=r("base64-js"),l=r("ieee754"),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,m=(s.Buffer=u,s.SlowBuffer=function(X){return+X!=X&&(X=0),u.alloc(+X)},s.INSPECT_MAX_BYTES=50,2147483647);function p(X){if(m<X)throw new RangeError('The value "'+X+'" is invalid for option "size"');return X=new Uint8Array(X),Object.setPrototypeOf(X,u.prototype),X}function u(X,T,N){if(typeof X!="number")return d(X,T,N);if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(X)}function d(X,T,N){if(typeof X=="string"){var z=X,te=T;if(u.isEncoding(te=typeof te=="string"&&te!==""?te:"utf8"))return ne=0|Z(z,te),ee=p(ne),ee=(z=ee.write(z,te))!==ne?ee.slice(0,z):ee;throw new TypeError("Unknown encoding: "+te)}if(ArrayBuffer.isView(X))return g(X);if(X!=null){if(O(X,ArrayBuffer)||X&&O(X.buffer,ArrayBuffer)){var ne=X,z=T,ee=N;if(z<0||ne.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(ne.byteLength<z+(ee||0))throw new RangeError('"length" is outside of buffer bounds');return ne=z===void 0&&ee===void 0?new Uint8Array(ne):ee===void 0?new Uint8Array(ne,z):new Uint8Array(ne,z,ee),Object.setPrototypeOf(ne,u.prototype),ne}if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(te=X.valueOf&&X.valueOf(),te!=null&&te!==X)return u.from(te,T,N);var oe=function(ie){{var ce,he;if(u.isBuffer(ie))return ce=0|y(ie.length),(he=p(ce)).length!==0&&ie.copy(he,0,0,ce),he}if(ie.length!==void 0)return typeof ie.length!="number"||D(ie.length)?p(0):g(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return g(ie.data)}(X);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return u.from(X[Symbol.toPrimitive]("string"),T,N)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}function h(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function f(X){return h(X),p(X<0?0:0|y(X))}function g(X){for(var T=X.length<0?0:0|y(X.length),N=p(T),z=0;z<T;z+=1)N[z]=255&X[z];return N}function y(X){if(m<=X)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m.toString(16)+" bytes");return 0|X}function Z(X,T){if(u.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||O(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);var N=X.length,z=2<arguments.length&&arguments[2]===!0;if(!z&&N===0)return 0;for(var te=!1;;)switch(T){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return P(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*N;case"hex":return N>>>1;case"base64":return J(X).length;default:if(te)return z?-1:P(X).length;T=(""+T).toLowerCase(),te=!0}}function I(X,T,N){var z,te=!1;if((T=T===void 0||T<0?0:T)>this.length||(N=N===void 0||N>this.length?this.length:N)<=0||(N>>>=0)<=(T>>>=0))return"";for(X=X||"utf8";;)switch(X){case"hex":var ne=this,pe=T,ee=N,he=ne.length;(!ee||ee<0||he<ee)&&(ee=he);for(var oe="",ie=pe=!pe||pe<0?0:pe;ie<ee;++ie)oe+=le[ne[ie]];return oe;case"utf8":case"utf-8":return w(this,T,N);case"ascii":var ce=this,he=T,q=N,me="";q=Math.min(ce.length,q);for(var ge=he;ge<q;++ge)me+=String.fromCharCode(127&ce[ge]);return me;case"latin1":case"binary":var be=this,pe=T,xe=N,Se="";xe=Math.min(be.length,xe);for(var ke=pe;ke<xe;++ke)Se+=String.fromCharCode(be[ke]);return Se;case"base64":return We=this,z=N,(Ke=T)===0&&z===We.length?a.fromByteArray(We):a.fromByteArray(We.slice(Ke,z));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var We=T,Ke=N,$e=this.slice(We,Ke),ze="",it=0;it<$e.length;it+=2)ze+=String.fromCharCode($e[it]+256*$e[it+1]);return ze;default:if(te)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),te=!0}}function G(X,T,N){var z=X[T];X[T]=X[N],X[N]=z}function R(X,T,N,z,te){if(X.length===0)return-1;if(typeof N=="string"?(z=N,N=0):2147483647<N?N=2147483647:N<-2147483648&&(N=-2147483648),(N=(N=D(N=+N)?te?0:X.length-1:N)<0?X.length+N:N)>=X.length){if(te)return-1;N=X.length-1}else if(N<0){if(!te)return-1;N=0}if(typeof T=="string"&&(T=u.from(T,z)),u.isBuffer(T))return T.length===0?-1:C(X,T,N,z,te);if(typeof T=="number")return T&=255,typeof Uint8Array.prototype.indexOf=="function"?(te?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(X,T,N):C(X,[T],N,z,te);throw new TypeError("val must be string, number or Buffer")}function C(X,T,N,z,te){var ne=1,ee=X.length,oe=T.length;if(z!==void 0&&((z=String(z).toLowerCase())==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(X.length<2||T.length<2)return-1;ee/=ne=2,oe/=2,N/=2}function ie(ge,be){return ne===1?ge[be]:ge.readUInt16BE(be*ne)}if(te)for(var ce=-1,he=N;he<ee;he++)if(ie(X,he)===ie(T,ce===-1?0:he-ce)){if(he-(ce=ce===-1?he:ce)+1===oe)return ce*ne}else ce!==-1&&(he-=he-ce),ce=-1;else for(he=N=ee<N+oe?ee-oe:N;0<=he;he--){for(var q=!0,me=0;me<oe;me++)if(ie(X,he+me)!==ie(T,me)){q=!1;break}if(q)return he}return-1}function V(X,T,N,z){return E(function(te){for(var ne=[],ee=0;ee<te.length;++ee)ne.push(255&te.charCodeAt(ee));return ne}(T),X,N,z)}function x(X,T,N,z){return E(function(te,ne){for(var ee,oe,ie=[],ce=0;ce<te.length&&!((ne-=2)<0);++ce)oe=te.charCodeAt(ce),ee=oe>>8,oe=oe%256,ie.push(oe),ie.push(ee);return ie}(T,X.length-N),X,N,z)}function w(X,T,N){N=Math.min(X.length,N);for(var z=[],te=T;te<N;){var ne,ee,oe,ie,ce=X[te],he=null,q=239<ce?4:223<ce?3:191<ce?2:1;if(te+q<=N)switch(q){case 1:ce<128&&(he=ce);break;case 2:(192&(ne=X[te+1]))==128&&127<(ie=(31&ce)<<6|63&ne)&&(he=ie);break;case 3:ne=X[te+1],ee=X[te+2],(192&ne)==128&&(192&ee)==128&&2047<(ie=(15&ce)<<12|(63&ne)<<6|63&ee)&&(ie<55296||57343<ie)&&(he=ie);break;case 4:ne=X[te+1],ee=X[te+2],oe=X[te+3],(192&ne)==128&&(192&ee)==128&&(192&oe)==128&&65535<(ie=(15&ce)<<18|(63&ne)<<12|(63&ee)<<6|63&oe)&&ie<1114112&&(he=ie)}he===null?(he=65533,q=1):65535<he&&(he-=65536,z.push(he>>>10&1023|55296),he=56320|1023&he),z.push(he),te+=q}var me=z,ge=me.length;if(ge<=k)return String.fromCharCode.apply(String,me);for(var be="",pe=0;pe<ge;)be+=String.fromCharCode.apply(String,me.slice(pe,pe+=k));return be}s.kMaxLength=m,(u.TYPED_ARRAY_SUPPORT=function(){try{var X=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(X,T),X.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=d,Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(X,T,N){return T=T,N=N,h(X=X),!(X<=0)&&T!==void 0?typeof N=="string"?p(X).fill(T,N):p(X).fill(T):p(X)},u.allocUnsafe=f,u.allocUnsafeSlow=f,u.isBuffer=function(X){return X!=null&&X._isBuffer===!0&&X!==u.prototype},u.compare=function(X,T){if(O(X,Uint8Array)&&(X=u.from(X,X.offset,X.byteLength)),O(T,Uint8Array)&&(T=u.from(T,T.offset,T.byteLength)),!u.isBuffer(X)||!u.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===T)return 0;for(var N=X.length,z=T.length,te=0,ne=Math.min(N,z);te<ne;++te)if(X[te]!==T[te]){N=X[te],z=T[te];break}return N<z?-1:z<N?1:0},u.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(X,T){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(X.length===0)return u.alloc(0);if(T===void 0)for(te=T=0;te<X.length;++te)T+=X[te].length;for(var N=u.allocUnsafe(T),z=0,te=0;te<X.length;++te){var ne=X[te];if(O(ne,Uint8Array)&&(ne=u.from(ne)),!u.isBuffer(ne))throw new TypeError('"list" argument must be an Array of Buffers');ne.copy(N,z),z+=ne.length}return N},u.byteLength=Z,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var X=this.length;if(X%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var T=0;T<X;T+=2)G(this,T,T+1);return this},u.prototype.swap32=function(){var X=this.length;if(X%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var T=0;T<X;T+=4)G(this,T,T+3),G(this,T+1,T+2);return this},u.prototype.swap64=function(){var X=this.length;if(X%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var T=0;T<X;T+=8)G(this,T,T+7),G(this,T+1,T+6),G(this,T+2,T+5),G(this,T+3,T+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var X=this.length;return X===0?"":arguments.length===0?w(this,0,X):I.apply(this,arguments)},u.prototype.equals=function(X){if(u.isBuffer(X))return this===X||u.compare(this,X)===0;throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var T="",X=s.INSPECT_MAX_BYTES,T=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim();return this.length>X&&(T+=" ... "),"<Buffer "+T+">"},c&&(u.prototype[c]=u.prototype.inspect),u.prototype.compare=function(X,T,N,z,te){if(O(X,Uint8Array)&&(X=u.from(X,X.offset,X.byteLength)),!u.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(N===void 0&&(N=X?X.length:0),z===void 0&&(z=0),te===void 0&&(te=this.length),(T=T===void 0?0:T)<0||N>X.length||z<0||te>this.length)throw new RangeError("out of range index");if(te<=z&&N<=T)return 0;if(te<=z)return-1;if(N<=T)return 1;if(this===X)return 0;for(var ne=(te>>>=0)-(z>>>=0),ee=(N>>>=0)-(T>>>=0),oe=Math.min(ne,ee),ie=this.slice(z,te),ce=X.slice(T,N),he=0;he<oe;++he)if(ie[he]!==ce[he]){ne=ie[he],ee=ce[he];break}return ne<ee?-1:ee<ne?1:0},u.prototype.includes=function(X,T,N){return this.indexOf(X,T,N)!==-1},u.prototype.indexOf=function(X,T,N){return R(this,X,T,N,!0)},u.prototype.lastIndexOf=function(X,T,N){return R(this,X,T,N,!1)},u.prototype.write=function(X,T,N,z){if(T===void 0)z="utf8",N=this.length,T=0;else if(N===void 0&&typeof T=="string")z=T,N=this.length,T=0;else{if(!isFinite(T))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");T>>>=0,isFinite(N)?(N>>>=0,z===void 0&&(z="utf8")):(z=N,N=void 0)}var te=this.length-T;if((N===void 0||te<N)&&(N=te),0<X.length&&(N<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");z=z||"utf8";for(var ne,ee,oe,ie=!1;;)switch(z){case"hex":var ce=this,he=X,q=T,me=N,ge=(q=Number(q)||0,ce.length-q);(!me||ge<(me=Number(me)))&&(me=ge),(ge=he.length)/2<me&&(me=ge/2);for(var be=0;be<me;++be){var pe=parseInt(he.substr(2*be,2),16);if(D(pe))return be;ce[q+be]=pe}return be;case"utf8":case"utf-8":return ge=T,oe=N,E(P(X,(ee=this).length-ge),ee,ge,oe);case"ascii":return V(this,X,T,N);case"latin1":case"binary":return V(this,X,T,N);case"base64":return ee=this,oe=T,ne=N,E(J(X),ee,oe,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,X,T,N);default:if(ie)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),ie=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function A(X,T,N){if(X%1!=0||X<0)throw new RangeError("offset is not uint");if(N<X+T)throw new RangeError("Trying to access beyond buffer length")}function Y(X,T,N,z,te,ne){if(!u.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(te<T||T<ne)throw new RangeError('"value" argument is out of bounds');if(N+z>X.length)throw new RangeError("Index out of range")}function U(X,T,N,z){if(N+z>X.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function M(X,T,N,z,te){return T=+T,N>>>=0,te||U(X,0,N,4),l.write(X,T,N,z,23,4),N+4}function j(X,T,N,z,te){return T=+T,N>>>=0,te||U(X,0,N,8),l.write(X,T,N,z,52,8),N+8}u.prototype.slice=function(X,T){var N=this.length,N=((X=~~X)<0?(X+=N)<0&&(X=0):N<X&&(X=N),(T=T===void 0?N:~~T)<0?(T+=N)<0&&(T=0):N<T&&(T=N),T<X&&(T=X),this.subarray(X,T));return Object.setPrototypeOf(N,u.prototype),N},u.prototype.readUIntLE=function(X,T,N){X>>>=0,T>>>=0,N||A(X,T,this.length);for(var z=this[X],te=1,ne=0;++ne<T&&(te*=256);)z+=this[X+ne]*te;return z},u.prototype.readUIntBE=function(X,T,N){X>>>=0,T>>>=0,N||A(X,T,this.length);for(var z=this[X+--T],te=1;0<T&&(te*=256);)z+=this[X+--T]*te;return z},u.prototype.readUInt8=function(X,T){return X>>>=0,T||A(X,1,this.length),this[X]},u.prototype.readUInt16LE=function(X,T){return X>>>=0,T||A(X,2,this.length),this[X]|this[X+1]<<8},u.prototype.readUInt16BE=function(X,T){return X>>>=0,T||A(X,2,this.length),this[X]<<8|this[X+1]},u.prototype.readUInt32LE=function(X,T){return X>>>=0,T||A(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+16777216*this[X+3]},u.prototype.readUInt32BE=function(X,T){return X>>>=0,T||A(X,4,this.length),16777216*this[X]+(this[X+1]<<16|this[X+2]<<8|this[X+3])},u.prototype.readIntLE=function(X,T,N){X>>>=0,T>>>=0,N||A(X,T,this.length);for(var z=this[X],te=1,ne=0;++ne<T&&(te*=256);)z+=this[X+ne]*te;return(te*=128)<=z&&(z-=Math.pow(2,8*T)),z},u.prototype.readIntBE=function(X,T,N){X>>>=0,T>>>=0,N||A(X,T,this.length);for(var z=T,te=1,ne=this[X+--z];0<z&&(te*=256);)ne+=this[X+--z]*te;return(te*=128)<=ne&&(ne-=Math.pow(2,8*T)),ne},u.prototype.readInt8=function(X,T){return X>>>=0,T||A(X,1,this.length),128&this[X]?-1*(255-this[X]+1):this[X]},u.prototype.readInt16LE=function(X,T){return X>>>=0,T||A(X,2,this.length),T=this[X]|this[X+1]<<8,32768&T?4294901760|T:T},u.prototype.readInt16BE=function(X,T){return X>>>=0,T||A(X,2,this.length),T=this[X+1]|this[X]<<8,32768&T?4294901760|T:T},u.prototype.readInt32LE=function(X,T){return X>>>=0,T||A(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},u.prototype.readInt32BE=function(X,T){return X>>>=0,T||A(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},u.prototype.readFloatLE=function(X,T){return X>>>=0,T||A(X,4,this.length),l.read(this,X,!0,23,4)},u.prototype.readFloatBE=function(X,T){return X>>>=0,T||A(X,4,this.length),l.read(this,X,!1,23,4)},u.prototype.readDoubleLE=function(X,T){return X>>>=0,T||A(X,8,this.length),l.read(this,X,!0,52,8)},u.prototype.readDoubleBE=function(X,T){return X>>>=0,T||A(X,8,this.length),l.read(this,X,!1,52,8)},u.prototype.writeUIntLE=function(X,T,N,z){X=+X,T>>>=0,N>>>=0,z||Y(this,X,T,N,Math.pow(2,8*N)-1,0);var te=1,ne=0;for(this[T]=255&X;++ne<N&&(te*=256);)this[T+ne]=X/te&255;return T+N},u.prototype.writeUIntBE=function(X,T,N,z){X=+X,T>>>=0,N>>>=0,z||Y(this,X,T,N,Math.pow(2,8*N)-1,0);var te=N-1,ne=1;for(this[T+te]=255&X;0<=--te&&(ne*=256);)this[T+te]=X/ne&255;return T+N},u.prototype.writeUInt8=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,1,255,0),this[T]=255&X,T+1},u.prototype.writeUInt16LE=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,2,65535,0),this[T]=255&X,this[T+1]=X>>>8,T+2},u.prototype.writeUInt16BE=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,2,65535,0),this[T]=X>>>8,this[T+1]=255&X,T+2},u.prototype.writeUInt32LE=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,4,4294967295,0),this[T+3]=X>>>24,this[T+2]=X>>>16,this[T+1]=X>>>8,this[T]=255&X,T+4},u.prototype.writeUInt32BE=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,4,4294967295,0),this[T]=X>>>24,this[T+1]=X>>>16,this[T+2]=X>>>8,this[T+3]=255&X,T+4},u.prototype.writeIntLE=function(X,T,N,z){X=+X,T>>>=0,z||Y(this,X,T,N,(z=Math.pow(2,8*N-1))-1,-z);var te=0,ne=1,ee=0;for(this[T]=255&X;++te<N&&(ne*=256);)X<0&&ee===0&&this[T+te-1]!==0&&(ee=1),this[T+te]=(X/ne>>0)-ee&255;return T+N},u.prototype.writeIntBE=function(X,T,N,z){X=+X,T>>>=0,z||Y(this,X,T,N,(z=Math.pow(2,8*N-1))-1,-z);var te=N-1,ne=1,ee=0;for(this[T+te]=255&X;0<=--te&&(ne*=256);)X<0&&ee===0&&this[T+te+1]!==0&&(ee=1),this[T+te]=(X/ne>>0)-ee&255;return T+N},u.prototype.writeInt8=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,1,127,-128),this[T]=255&(X=X<0?255+X+1:X),T+1},u.prototype.writeInt16LE=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,2,32767,-32768),this[T]=255&X,this[T+1]=X>>>8,T+2},u.prototype.writeInt16BE=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,2,32767,-32768),this[T]=X>>>8,this[T+1]=255&X,T+2},u.prototype.writeInt32LE=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,4,2147483647,-2147483648),this[T]=255&X,this[T+1]=X>>>8,this[T+2]=X>>>16,this[T+3]=X>>>24,T+4},u.prototype.writeInt32BE=function(X,T,N){return X=+X,T>>>=0,N||Y(this,X,T,4,2147483647,-2147483648),this[T]=(X=X<0?4294967295+X+1:X)>>>24,this[T+1]=X>>>16,this[T+2]=X>>>8,this[T+3]=255&X,T+4},u.prototype.writeFloatLE=function(X,T,N){return M(this,X,T,!0,N)},u.prototype.writeFloatBE=function(X,T,N){return M(this,X,T,!1,N)},u.prototype.writeDoubleLE=function(X,T,N){return j(this,X,T,!0,N)},u.prototype.writeDoubleBE=function(X,T,N){return j(this,X,T,!1,N)},u.prototype.copy=function(X,T,N,z){if(!u.isBuffer(X))throw new TypeError("argument should be a Buffer");if(N=N||0,z||z===0||(z=this.length),T>=X.length&&(T=X.length),(z=0<z&&z<N?N:z)===N||X.length===0||this.length===0)return 0;if((T=T||0)<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length);var te=(z=X.length-T<z-N?X.length-T+N:z)-N;if(this===X&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(T,N,z);else if(this===X&&N<T&&T<z)for(var ne=te-1;0<=ne;--ne)X[ne+T]=this[ne+N];else Uint8Array.prototype.set.call(X,this.subarray(N,z),T);return te},u.prototype.fill=function(X,T,N,z){if(typeof X=="string"){if(typeof T=="string"?(z=T,T=0,N=this.length):typeof N=="string"&&(z=N,N=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!u.isEncoding(z))throw new TypeError("Unknown encoding: "+z);var te;X.length===1&&(te=X.charCodeAt(0),(z==="utf8"&&te<128||z==="latin1")&&(X=te))}else typeof X=="number"?X&=255:typeof X=="boolean"&&(X=Number(X));if(T<0||this.length<T||this.length<N)throw new RangeError("Out of range index");var ne;if(!(N<=T))if(T>>>=0,N=N===void 0?this.length:N>>>0,typeof(X=X||0)=="number")for(ne=T;ne<N;++ne)this[ne]=X;else{var ee=u.isBuffer(X)?X:u.from(X,z),oe=ee.length;if(oe===0)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for(ne=0;ne<N-T;++ne)this[ne+T]=ee[ne%oe]}return this};var K=/[^+/0-9A-Za-z-_]/g;function P(X,T){T=T||1/0;for(var N,z=X.length,te=null,ne=[],ee=0;ee<z;++ee){if(55295<(N=X.charCodeAt(ee))&&N<57344){if(!te){if(56319<N){-1<(T-=3)&&ne.push(239,191,189);continue}if(ee+1===z){-1<(T-=3)&&ne.push(239,191,189);continue}te=N;continue}if(N<56320){-1<(T-=3)&&ne.push(239,191,189),te=N;continue}N=65536+(te-55296<<10|N-56320)}else te&&-1<(T-=3)&&ne.push(239,191,189);if(te=null,N<128){if(--T<0)break;ne.push(N)}else if(N<2048){if((T-=2)<0)break;ne.push(N>>6|192,63&N|128)}else if(N<65536){if((T-=3)<0)break;ne.push(N>>12|224,N>>6&63|128,63&N|128)}else{if(!(N<1114112))throw new Error("Invalid code point");if((T-=4)<0)break;ne.push(N>>18|240,N>>12&63|128,N>>6&63|128,63&N|128)}}return ne}function J(X){return a.toByteArray(function(T){if((T=(T=T.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;T.length%4!=0;)T+="=";return T}(X))}function E(X,T,N,z){for(var te=0;te<z&&!(te+N>=T.length||te>=X.length);++te)T[te+N]=X[te];return te}function O(X,T){return X instanceof T||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===T.name}function D(X){return X!=X}var le=function(){for(var X="0123456789abcdef",T=new Array(256),N=0;N<16;++N)for(var z=16*N,te=0;te<16;++te)T[z+te]=X[N]+X[te];return T}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:238}],5:[function(r,i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},{}],6:[function(r,i,s){var o=r("../internals/is-object");i.exports=function(a){if(o(a)||a===null)return a;throw TypeError("Can't set "+String(a)+" as a prototype")}},{"../internals/is-object":74}],7:[function(l,i,s){var o=l("../internals/well-known-symbol"),a=l("../internals/object-create"),l=l("../internals/object-define-property"),c=o("unscopables"),m=Array.prototype;m[c]==null&&l.f(m,c,{configurable:!0,value:a(null)}),i.exports=function(p){m[c][p]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(r,i,s){var o=r("../internals/string-multibyte").charAt;i.exports=function(a,l,c){return l+(c?o(a,l).length:1)}},{"../internals/string-multibyte":123}],9:[function(r,i,s){i.exports=function(o,a,l){if(o instanceof a)return o;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},{}],10:[function(r,i,s){var o=r("../internals/is-object");i.exports=function(a){if(o(a))return a;throw TypeError(String(a)+" is not an object")}},{"../internals/is-object":74}],11:[function(r,i,s){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(U,i,s){function o(j){return p(j)&&u(M,d(j))}var a,l=U("../internals/array-buffer-native"),c=U("../internals/descriptors"),m=U("../internals/global"),p=U("../internals/is-object"),u=U("../internals/has"),d=U("../internals/classof"),h=U("../internals/create-non-enumerable-property"),f=U("../internals/redefine"),g=U("../internals/object-define-property").f,y=U("../internals/object-get-prototype-of"),Z=U("../internals/object-set-prototype-of"),k=U("../internals/well-known-symbol"),U=U("../internals/uid"),I=m.Int8Array,G=I&&I.prototype,R=m.Uint8ClampedArray,R=R&&R.prototype,C=I&&y(I),V=G&&y(G),x=Object.prototype,w=x.isPrototypeOf,k=k("toStringTag"),A=U("TYPED_ARRAY_TAG"),Y=l&&!!Z&&d(m.opera)!=="Opera",U=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(a in M)m[a]||(Y=!1);if((!Y||typeof C!="function"||C===Function.prototype)&&(C=function(){throw TypeError("Incorrect invocation")},Y))for(a in M)m[a]&&Z(m[a],C);if((!Y||!V||V===x)&&(V=C.prototype,Y))for(a in M)m[a]&&Z(m[a].prototype,V);if(Y&&y(R)!==V&&Z(R,V),c&&!u(V,k))for(a in U=!0,g(V,k,{get:function(){return p(this)?this[A]:void 0}}),M)m[a]&&h(m[a],A,a);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:Y,TYPED_ARRAY_TAG:U&&A,aTypedArray:function(j){if(o(j))return j;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(j){if(Z){if(w.call(C,j))return j}else for(var K in M)if(u(M,a)&&(K=m[K],K&&(j===K||w.call(K,j))))return j;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(j,K,P){if(c){if(P)for(var J in M)J=m[J],J&&u(J.prototype,j)&&delete J.prototype[j];V[j]&&!P||f(V,j,!P&&Y&&G[j]||K)}},exportTypedArrayStaticMethod:function(j,K,P){var J,E;if(c){if(Z){if(P)for(J in M)(E=m[J])&&u(E,j)&&delete E[j];if(C[j]&&!P)return;try{return f(C,j,!P&&Y&&I[j]||K)}catch{}}for(J in M)!(E=m[J])||E[j]&&!P||f(E,j,K)}},isView:function(j){return j=d(j),j==="DataView"||u(M,j)},isTypedArray:o,TypedArray:C,TypedArrayPrototype:V}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(N,i,s){function o(q){return[255&q]}function a(q){return[255&q,q>>8&255]}function l(q){return[255&q,q>>8&255,q>>16&255,q>>24&255]}function c(q){return q[3]<<24|q[2]<<16|q[1]<<8|q[0]}function m(q){return ne(q,23,4)}function p(q){return ne(q,52,8)}function u(q,me){U(q[O],me,{get:function(){return K(this)[me]}})}function d(Se,me,xe,be){if(xe=x(xe),Se=K(Se),xe+me>Se.byteLength)throw te(D);var pe=K(Se.buffer).bytes,xe=xe+Se.byteOffset,Se=pe.slice(xe,xe+me);return be?Se:Se.reverse()}function h(q,me,ge,be,pe,xe){if(ge=x(ge),q=K(q),ge+me>q.byteLength)throw te(D);for(var Se=K(q.buffer).bytes,ke=ge+q.byteOffset,We=be(+pe),Ke=0;Ke<me;Ke++)Se[ke+Ke]=We[xe?Ke:me-Ke-1]}var f=N("../internals/global"),g=N("../internals/descriptors"),y=N("../internals/array-buffer-native"),Z=N("../internals/create-non-enumerable-property"),I=N("../internals/redefine-all"),G=N("../internals/fails"),R=N("../internals/an-instance"),C=N("../internals/to-integer"),V=N("../internals/to-length"),x=N("../internals/to-index"),w=N("../internals/ieee754"),k=N("../internals/object-get-prototype-of"),A=N("../internals/object-set-prototype-of"),Y=N("../internals/object-get-own-property-names").f,U=N("../internals/object-define-property").f,M=N("../internals/array-fill"),j=N("../internals/set-to-string-tag"),N=N("../internals/internal-state"),K=N.get,P=N.set,J="ArrayBuffer",E="DataView",O="prototype",D="Wrong index",le=f[J],X=le,T=f[E],N=T&&T[O],z=Object.prototype,te=f.RangeError,ne=w.pack,ee=w.unpack;if(y){if(!G(function(){le(1)})||!G(function(){new le(-1)})||G(function(){return new le,new le(1.5),new le(NaN),le.name!=J})){for(var oe,f=(X=function(ge){return R(this,X),new le(x(ge))})[O]=le[O],ie=Y(le),ce=0;ie.length>ce;)(oe=ie[ce++])in X||Z(X,oe,le[oe]);f.constructor=X}A&&k(N)!==z&&A(N,z);var w=new T(new X(2)),he=N.setInt8;w.setInt8(0,2147483648),w.setInt8(1,2147483649),!w.getInt8(0)&&w.getInt8(1)||I(N,{setInt8:function(me,ge){he.call(this,me,ge<<24>>24)},setUint8:function(me,ge){he.call(this,me,ge<<24>>24)}},{unsafe:!0})}else X=function(q){R(this,X,J),q=x(q),P(this,{bytes:M.call(new Array(q),0),byteLength:q}),g||(this.byteLength=q)},T=function(q,pe,ge){R(this,T,E),R(q,X,E);var be=K(q).byteLength,pe=C(pe);if(pe<0||be<pe)throw te("Wrong offset");if(be<pe+(ge=ge===void 0?be-pe:V(ge)))throw te("Wrong length");P(this,{buffer:q,byteLength:ge,byteOffset:pe}),g||(this.buffer=q,this.byteLength=ge,this.byteOffset=pe)},g&&(u(X,"byteLength"),u(T,"buffer"),u(T,"byteLength"),u(T,"byteOffset")),I(T[O],{getInt8:function(q){return d(this,1,q)[0]<<24>>24},getUint8:function(q){return d(this,1,q)[0]},getInt16:function(q){return q=d(this,2,q,1<arguments.length?arguments[1]:void 0),(q[1]<<8|q[0])<<16>>16},getUint16:function(q){return q=d(this,2,q,1<arguments.length?arguments[1]:void 0),q[1]<<8|q[0]},getInt32:function(q){return c(d(this,4,q,1<arguments.length?arguments[1]:void 0))},getUint32:function(q){return c(d(this,4,q,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(q){return ee(d(this,4,q,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(q){return ee(d(this,8,q,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(q,me){h(this,1,q,o,me)},setUint8:function(q,me){h(this,1,q,o,me)},setInt16:function(q,me){h(this,2,q,a,me,2<arguments.length?arguments[2]:void 0)},setUint16:function(q,me){h(this,2,q,a,me,2<arguments.length?arguments[2]:void 0)},setInt32:function(q,me){h(this,4,q,l,me,2<arguments.length?arguments[2]:void 0)},setUint32:function(q,me){h(this,4,q,l,me,2<arguments.length?arguments[2]:void 0)},setFloat32:function(q,me){h(this,4,q,m,me,2<arguments.length?arguments[2]:void 0)},setFloat64:function(q,me){h(this,8,q,p,me,2<arguments.length?arguments[2]:void 0)}});j(X,J),j(T,E),i.exports={ArrayBuffer:X,DataView:T}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(r,i,s){var o=r("../internals/to-object"),a=r("../internals/to-absolute-index"),l=r("../internals/to-length"),c=Math.min;i.exports=[].copyWithin||function(g,p){var u=o(this),d=l(u.length),h=a(g,d),f=a(p,d),g=2<arguments.length?arguments[2]:void 0,y=c((g===void 0?d:a(g,d))-f,d-h),Z=1;for(f<h&&h<f+y&&(Z=-1,f+=y-1,h+=y-1);0<y--;)f in u?u[h]=u[f]:delete u[h],h+=Z,f+=Z;return u}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(r,i,s){var o=r("../internals/to-object"),a=r("../internals/to-absolute-index"),l=r("../internals/to-length");i.exports=function(c){for(var m=o(this),p=l(m.length),d=arguments.length,u=a(1<d?arguments[1]:void 0,p),d=2<d?arguments[2]:void 0,h=d===void 0?p:a(d,p);u<h;)m[u++]=c;return m}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(l,i,s){var o=l("../internals/array-iteration").forEach,a=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),a=a("forEach"),l=l("forEach");i.exports=a&&l?[].forEach:function(c){return o(this,c,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,i,s){var o=r("../internals/function-bind-context"),a=r("../internals/to-object"),l=r("../internals/call-with-safe-iteration-closing"),c=r("../internals/is-array-iterator-method"),m=r("../internals/to-length"),p=r("../internals/create-property"),u=r("../internals/get-iterator-method");i.exports=function(R){var h,f,g,y,Z,I,G=a(R),R=typeof this=="function"?this:Array,C=arguments.length,V=1<C?arguments[1]:void 0,x=V!==void 0,w=u(G),k=0;if(x&&(V=o(V,2<C?arguments[2]:void 0,2)),w==null||R==Array&&c(w))for(f=new R(h=m(G.length));k<h;k++)I=x?V(G[k],k):G[k],p(f,k,I);else for(Z=(y=w.call(G)).next,f=new R;!(g=Z.call(y)).done;k++)I=x?l(y,V,[g.value,k],!0):g.value,p(f,k,I);return f.length=k,f}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(r,i,s){function o(m){return function(p,u,d){var h,f=a(p),g=l(f.length),y=c(d,g);if(m&&u!=u){for(;y<g;)if((h=f[y++])!=h)return!0}else for(;y<g;y++)if((m||y in f)&&f[y]===u)return m||y||0;return!m&&-1}}var a=r("../internals/to-indexed-object"),l=r("../internals/to-length"),c=r("../internals/to-absolute-index");i.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(r,i,s){function o(d){var h=d==1,f=d==2,g=d==3,y=d==4,Z=d==6,I=d==5||Z;return function(G,R,C,V){for(var x,w,k=c(G),A=l(k),Y=a(R,C,3),U=m(A.length),M=0,R=V||p,j=h?R(G,U):f?R(G,0):void 0;M<U;M++)if((I||M in A)&&(w=Y(x=A[M],M,k),d)){if(h)j[M]=w;else if(w)switch(d){case 3:return!0;case 5:return x;case 6:return M;case 2:u.call(j,x)}else if(y)return!1}return Z?-1:g||y?y:j}}var a=r("../internals/function-bind-context"),l=r("../internals/indexed-object"),c=r("../internals/to-object"),m=r("../internals/to-length"),p=r("../internals/array-species-create"),u=[].push;i.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(d,i,s){var o=d("../internals/to-indexed-object"),a=d("../internals/to-integer"),l=d("../internals/to-length"),u=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),c=Math.min,m=[].lastIndexOf,p=!!m&&1/[1].lastIndexOf(1,-0)<0,u=u("lastIndexOf"),d=d("indexOf",{ACCESSORS:!0,1:0});i.exports=p||!u||!d?function(h){if(p)return m.apply(this,arguments)||0;var f=o(this),g=l(f.length),y=g-1;for((y=1<arguments.length?c(y,a(arguments[1])):y)<0&&(y=g+y);0<=y;y--)if(y in f&&f[y]===h)return y||0;return-1}:m},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(r,i,s){var o=r("../internals/fails"),a=r("../internals/well-known-symbol"),l=r("../internals/engine-v8-version"),c=a("species");i.exports=function(m){return 51<=l||!o(function(){var p=[];return(p.constructor={})[c]=function(){return{foo:1}},p[m](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":146}],22:[function(r,i,s){var o=r("../internals/fails");i.exports=function(a,l){var c=[][a];return!!c&&o(function(){c.call(null,l||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,i,s){function o(u){throw u}var a=r("../internals/descriptors"),l=r("../internals/fails"),c=r("../internals/has"),m=Object.defineProperty,p={};i.exports=function(u,d){var h,f,g,y;return c(p,u)?p[u]:(h=[][u],f=!!c(d=d||{},"ACCESSORS")&&d.ACCESSORS,g=c(d,0)?d[0]:o,y=c(d,1)?d[1]:void 0,p[u]=!!h&&!l(function(){if(f&&!a)return!0;var Z={length:-1};f?m(Z,1,{enumerable:!0,get:o}):Z[1]=1,h.call(Z,g,y)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(r,i,s){function o(p){return function(u,d,h,f){a(d);var g=l(u),y=c(g),Z=m(g.length),I=p?Z-1:0,G=p?-1:1;if(h<2)for(;;){if(I in y){f=y[I],I+=G;break}if(I+=G,p?I<0:Z<=I)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=I:I<Z;I+=G)I in y&&(f=d(f,y[I],I,g));return f}}var a=r("../internals/a-function"),l=r("../internals/to-object"),c=r("../internals/indexed-object"),m=r("../internals/to-length");i.exports={left:o(!1),right:o(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(r,i,s){var o=r("../internals/is-object"),a=r("../internals/is-array"),l=r("../internals/well-known-symbol")("species");i.exports=function(c,m){var p;return new((p=a(c)&&(typeof(p=c.constructor)=="function"&&(p===Array||a(p.prototype))||o(p)&&(p=p[l])===null)?void 0:p)===void 0?Array:p)(m===0?0:m)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(r,i,s){var o=r("../internals/an-object");i.exports=function(a,l,c,m){try{return m?l(o(c)[0],c[1]):l(c)}catch(p){throw m=a.return,m!==void 0&&o(m.call(a)),p}}},{"../internals/an-object":10}],27:[function(r,i,s){var o=r("../internals/well-known-symbol")("iterator"),a=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){a=!0}};c[o]=function(){return this},Array.from(c,function(){throw 2})}catch{}i.exports=function(m,p){if(!p&&!a)return!1;var u=!1;try{var d={};d[o]=function(){return{next:function(){return{done:u=!0}}}},m(d)}catch{}return u}},{"../internals/well-known-symbol":146}],28:[function(r,i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},{}],29:[function(r,i,s){var o=r("../internals/to-string-tag-support"),a=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("toStringTag"),c=a(function(){return arguments}())=="Arguments";i.exports=o?a:function(m){var p;return m===void 0?"Undefined":m===null?"Null":typeof(p=function(u,d){try{return u[d]}catch{}}(m=Object(m),l))=="string"?p:c?a(m):(p=a(m))=="Object"&&typeof m.callee=="function"?"Arguments":p}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(g,i,s){var o=g("../internals/object-define-property").f,a=g("../internals/object-create"),l=g("../internals/redefine-all"),c=g("../internals/function-bind-context"),m=g("../internals/an-instance"),p=g("../internals/iterate"),u=g("../internals/define-iterator"),d=g("../internals/set-species"),h=g("../internals/descriptors"),f=g("../internals/internal-metadata").fastKey,g=g("../internals/internal-state"),y=g.set,Z=g.getterFor;i.exports={getConstructor:function(I,G,R,C){function V(A,Y,U){var M,j=k(A),K=x(A,Y);return K?K.value=U:(j.last=K={index:M=f(Y,!0),key:Y,value:U,previous:Y=j.last,next:void 0,removed:!1},j.first||(j.first=K),Y&&(Y.next=K),h?j.size++:A.size++,M!=="F"&&(j.index[M]=K)),A}function x(M,Y){var U,M=k(M),j=f(Y);if(j!=="F")return M.index[j];for(U=M.first;U;U=U.next)if(U.key==Y)return U}var w=I(function(A,Y){m(A,w,G),y(A,{type:G,index:a(null),first:void 0,last:void 0,size:0}),h||(A.size=0),Y!=null&&p(Y,A[C],A,R)}),k=Z(G);return l(w.prototype,{clear:function(){for(var A=k(this),Y=A.index,U=A.first;U;)U.removed=!0,U.previous&&(U.previous=U.previous.next=void 0),delete Y[U.index],U=U.next;A.first=A.last=void 0,h?A.size=0:this.size=0},delete:function(j){var Y,U,M=k(this),j=x(this,j);return j&&(Y=j.next,U=j.previous,delete M.index[j.index],j.removed=!0,U&&(U.next=Y),Y&&(Y.previous=U),M.first==j&&(M.first=Y),M.last==j&&(M.last=U),h?M.size--:this.size--),!!j},forEach:function(A){for(var Y,U=k(this),M=c(A,1<arguments.length?arguments[1]:void 0,3);Y=Y?Y.next:U.first;)for(M(Y.value,Y.key,this);Y&&Y.removed;)Y=Y.previous},has:function(A){return!!x(this,A)}}),l(w.prototype,R?{get:function(A){return A=x(this,A),A&&A.value},set:function(A,Y){return V(this,A===0?0:A,Y)}}:{add:function(A){return V(this,A=A===0?0:A,A)}}),h&&o(w.prototype,"size",{get:function(){return k(this).size}}),w},setStrong:function(I,G,R){var C=G+" Iterator",V=Z(G),x=Z(C);u(I,G,function(w,k){y(this,{type:C,target:w,state:V(w),kind:k,last:void 0})},function(){for(var w=x(this),k=w.kind,A=w.last;A&&A.removed;)A=A.previous;return w.target&&(w.last=A=A?A.next:w.state.first)?k=="keys"?{value:A.key,done:!1}:k=="values"?{value:A.value,done:!1}:{value:[A.key,A.value],done:!1}:{value:w.target=void 0,done:!0}},R?"entries":"values",!R,!0),d(G)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(y,i,s){function o(V){return V.frozen||(V.frozen=new a)}function a(){this.entries=[]}function l(V,x){return G(V.entries,function(w){return w[0]===x})}var c=y("../internals/redefine-all"),m=y("../internals/internal-metadata").getWeakData,p=y("../internals/an-object"),u=y("../internals/is-object"),d=y("../internals/an-instance"),h=y("../internals/iterate"),f=y("../internals/array-iteration"),g=y("../internals/has"),y=y("../internals/internal-state"),Z=y.set,I=y.getterFor,G=f.find,R=f.findIndex,C=0;a.prototype={get:function(V){if(V=l(this,V),V)return V[1]},has:function(V){return!!l(this,V)},set:function(V,x){var w=l(this,V);w?w[1]=x:this.entries.push([V,x])},delete:function(V){var x=R(this.entries,function(w){return w[0]===V});return~x&&this.entries.splice(x,1),!!~x}},i.exports={getConstructor:function(V,x,w,k){function A(M,j,K){var P=U(M),J=m(p(j),!0);return J===!0?o(P).set(j,K):J[P.id]=K,M}var Y=V(function(M,j){d(M,Y,x),Z(M,{type:x,id:C++,frozen:void 0}),j!=null&&h(j,M[k],M,w)}),U=I(x);return c(Y.prototype,{delete:function(M){var j,K=U(this);return!!u(M)&&((j=m(M))===!0?o(K).delete(M):j&&g(j,K.id)&&delete j[K.id])},has:function(M){var j,K=U(this);return!!u(M)&&((j=m(M))===!0?o(K).has(M):j&&g(j,K.id))}}),c(Y.prototype,w?{get:function(M){var j,K=U(this);if(u(M))return(j=m(M))===!0?o(K).get(M):j?j[K.id]:void 0},set:function(M,j){return A(this,M,j)}}:{add:function(M){return A(this,M,!0)}}),Y}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(r,i,s){var o=r("../internals/export"),a=r("../internals/global"),l=r("../internals/is-forced"),c=r("../internals/redefine"),m=r("../internals/internal-metadata"),p=r("../internals/iterate"),u=r("../internals/an-instance"),d=r("../internals/is-object"),h=r("../internals/fails"),f=r("../internals/check-correctness-of-iteration"),g=r("../internals/set-to-string-tag"),y=r("../internals/inherit-if-required");i.exports=function(Z,I,G){function R(J){var E=j[J];c(j,J,J=="add"?function(O){return E.call(this,O===0?0:O),this}:J=="delete"?function(O){return!(Y&&!d(O))&&E.call(this,O===0?0:O)}:J=="get"?function(O){return Y&&!d(O)?void 0:E.call(this,O===0?0:O)}:J=="has"?function(O){return!(Y&&!d(O))&&E.call(this,O===0?0:O)}:function(O,D){return E.call(this,O===0?0:O,D),this})}var C,V,x,w,k,A=Z.indexOf("Map")!==-1,Y=Z.indexOf("Weak")!==-1,U=A?"set":"add",M=a[Z],j=M&&M.prototype,K=M,P={};return l(Z,typeof M!="function"||!(Y||j.forEach&&!h(function(){new M().entries().next()})))?(K=G.getConstructor(I,Z,A,U),m.REQUIRED=!0):l(Z,!0)&&(V=(C=new K)[U](Y?{}:-0,1)!=C,x=h(function(){C.has(1)}),w=f(function(J){new M(J)}),k=!Y&&h(function(){for(var J=new M,E=5;E--;)J[U](E,E);return!J.has(-0)}),w||(((K=I(function(J,E){return u(J,K,Z),J=y(new M,J,K),E!=null&&p(E,J[U],J,A),J})).prototype=j).constructor=K),(x||k)&&(R("delete"),R("has"),A&&R("get")),(k||V)&&R(U),Y&&j.clear&&delete j.clear),P[Z]=K,o({global:!0,forced:K!=M},P),g(K,Z),Y||G.setStrong(K,Z,A),K}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(r,i,s){var o=r("../internals/has"),a=r("../internals/own-keys"),l=r("../internals/object-get-own-property-descriptor"),c=r("../internals/object-define-property");i.exports=function(m,p){for(var u=a(p),d=c.f,h=l.f,f=0;f<u.length;f++){var g=u[f];o(m,g)||d(m,g,h(p,g))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(r,i,s){var o=r("../internals/well-known-symbol")("match");i.exports=function(a){var l=/./;try{"/./"[a](l)}catch{try{return l[o]=!1,"/./"[a](l)}catch{}}return!1}},{"../internals/well-known-symbol":146}],35:[function(r,i,s){r=r("../internals/fails"),i.exports=!r(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":51}],36:[function(r,i,s){var o=r("../internals/require-object-coercible"),a=/"/g;i.exports=function(u,c,m,p){var u=String(o(u)),d="<"+c;return m!==""&&(d+=" "+m+'="'+String(p).replace(a,"&quot;")+'"'),d+">"+u+"</"+c+">"}},{"../internals/require-object-coercible":113}],37:[function(r,i,s){function o(){return this}var a=r("../internals/iterators-core").IteratorPrototype,l=r("../internals/object-create"),c=r("../internals/create-property-descriptor"),m=r("../internals/set-to-string-tag"),p=r("../internals/iterators");i.exports=function(u,d,h){return d+=" Iterator",u.prototype=l(a,{next:c(1,h)}),m(u,d,!1,!0),p[d]=o,u}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(r,i,s){var o=r("../internals/descriptors"),a=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");i.exports=o?function(c,m,p){return a.f(c,m,l(1,p))}:function(c,m,p){return c[m]=p,c}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(r,i,s){i.exports=function(o,a){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:a}}},{}],40:[function(r,i,s){var o=r("../internals/to-primitive"),a=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");i.exports=function(c,m,p){m=o(m),m in c?a.f(c,m,l(0,p)):c[m]=p}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":138}],41:[function(y,i,s){function o(){return this}var a=y("../internals/export"),l=y("../internals/create-iterator-constructor"),c=y("../internals/object-get-prototype-of"),m=y("../internals/object-set-prototype-of"),p=y("../internals/set-to-string-tag"),u=y("../internals/create-non-enumerable-property"),d=y("../internals/redefine"),h=y("../internals/well-known-symbol"),f=y("../internals/is-pure"),g=y("../internals/iterators"),y=y("../internals/iterators-core"),Z=y.IteratorPrototype,I=y.BUGGY_SAFARI_ITERATORS,G=h("iterator"),R="values",C="entries";i.exports=function(V,x,w,P,A,Y,U){l(w,x,P);function M(X){if(X===A&&D)return D;if(!I&&X in E)return E[X];switch(X){case"keys":case R:case C:return function(){return new w(this,X)}}return function(){return new w(this)}}var j,K,P=x+" Iterator",J=!1,E=V.prototype,O=E[G]||E["@@iterator"]||A&&E[A],D=!I&&O||M(A),le=x=="Array"&&E.entries||O;if(le&&(le=c(le.call(new V)),Z!==Object.prototype&&le.next&&(f||c(le)===Z||(m?m(le,Z):typeof le[G]!="function"&&u(le,G,o)),p(le,P,!0,!0),f&&(g[P]=o))),A==R&&O&&O.name!==R&&(J=!0,D=function(){return O.call(this)}),f&&!U||E[G]===D||u(E,G,D),g[x]=D,A)if(j={values:M(R),keys:Y?D:M("keys"),entries:M(C)},U)for(K in j)!I&&!J&&K in E||d(E,K,j[K]);else a({target:x,proto:!0,forced:I||J},j);return j}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],42:[function(r,i,s){var o=r("../internals/path"),a=r("../internals/has"),l=r("../internals/well-known-symbol-wrapped"),c=r("../internals/object-define-property").f;i.exports=function(m){var p=o.Symbol||(o.Symbol={});a(p,m)||c(p,m,{value:l.f(m)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],43:[function(r,i,s){r=r("../internals/fails"),i.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(a,i,s){var o=a("../internals/global"),a=a("../internals/is-object"),l=o.document,c=a(l)&&a(l.createElement);i.exports=function(m){return c?l.createElement(m):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(r,i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,i,s){r=r("../internals/engine-user-agent"),i.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,i,s){r=r("../internals/get-built-in"),i.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(l,i,s){var o,a,c=l("../internals/global"),l=l("../internals/engine-user-agent"),c=c.process,c=c&&c.versions,c=c&&c.v8;c?a=(o=c.split("."))[0]+o[1]:l&&(!(o=l.match(/Edge\/(\d+)/))||74<=o[1])&&(o=l.match(/Chrome\/(\d+)/))&&(a=o[1]),i.exports=a&&+a},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(r,i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,i,s){var o=r("../internals/global"),a=r("../internals/object-get-own-property-descriptor").f,l=r("../internals/create-non-enumerable-property"),c=r("../internals/redefine"),m=r("../internals/set-global"),p=r("../internals/copy-constructor-properties"),u=r("../internals/is-forced");i.exports=function(d,h){var f,g,y,Z=d.target,I=d.global,G=d.stat,R=I?o:G?o[Z]||m(Z,{}):(o[Z]||{}).prototype;if(R)for(f in h){if(g=h[f],y=d.noTargetGet?(y=a(R,f))&&y.value:R[f],!u(I?f:Z+(G?".":"#")+f,d.forced)&&y!==void 0){if(typeof g==typeof y)continue;p(g,y)}(d.sham||y&&y.sham)&&l(g,"sham",!0),c(R,f,g,d)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(r,i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},{}],52:[function(h,i,s){h("../modules/es.regexp.exec");var o=h("../internals/redefine"),a=h("../internals/fails"),l=h("../internals/well-known-symbol"),c=h("../internals/regexp-exec"),m=h("../internals/create-non-enumerable-property"),p=l("species"),u=!a(function(){var y=/./;return y.exec=function(){var Z=[];return Z.groups={a:"7"},Z},"".replace(y,"$<a>")!=="7"}),d="a".replace(/./,"$0")==="$0",h=l("replace"),f=!!/./[h]&&/./[h]("a","$0")==="",g=!a(function(){var Z=/(?:)/,y=Z.exec,Z=(Z.exec=function(){return y.apply(this,arguments)},"ab".split(Z));return Z.length!==2||Z[0]!=="a"||Z[1]!=="b"});i.exports=function(y,Z,I,G){var R,C,V=l(y),x=!a(function(){var k={};return k[V]=function(){return 7},""[y](k)!=7}),w=x&&!a(function(){var k=!1,A=/a/;return y==="split"&&((A={constructor:{}}).constructor[p]=function(){return A},A.flags="",A[V]=/./[V]),A.exec=function(){return k=!0,null},A[V](""),!k});x&&w&&(y!=="replace"||u&&d&&!f)&&(y!=="split"||g)||(R=/./[V],I=(w=I(V,""[y],function(k,A,Y,U,M){return A.exec===c?x&&!M?{done:!0,value:R.call(A,Y,U)}:{done:!0,value:k.call(Y,A,U)}:{done:!1}},{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}))[0],C=w[1],o(String.prototype,y,I),o(RegExp.prototype,V,Z==2?function(k,A){return C.call(k,this,A)}:function(k){return C.call(k,this)})),G&&m(RegExp.prototype[V],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],53:[function(r,i,s){r=r("../internals/fails"),i.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(r,i,s){var o=r("../internals/a-function");i.exports=function(a,l,c){if(o(a),l===void 0)return a;switch(c){case 0:return function(){return a.call(l)};case 1:return function(m){return a.call(l,m)};case 2:return function(m,p){return a.call(l,m,p)};case 3:return function(m,p,u){return a.call(l,m,p,u)}}return function(){return a.apply(l,arguments)}}},{"../internals/a-function":5}],55:[function(r,i,s){var o=r("../internals/a-function"),a=r("../internals/is-object"),l=[].slice,c={};i.exports=Function.bind||function(m){var p=o(this),u=l.call(arguments,1),d=function(){var h=u.concat(l.call(arguments));if(this instanceof d){var f=p,g=h.length,y=h;if(!(g in c)){for(var Z=[],I=0;I<g;I++)Z[I]="a["+I+"]";c[g]=Function("C,a","return new C("+Z.join(",")+")")}return c[g](f,y)}return p.apply(m,h)};return a(p.prototype)&&(d.prototype=p.prototype),d}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(r,i,s){function o(c){return typeof c=="function"?c:void 0}var a=r("../internals/path"),l=r("../internals/global");i.exports=function(c,m){return arguments.length<2?o(a[c])||o(l[c]):a[c]&&a[c][m]||l[c]&&l[c][m]}},{"../internals/global":59,"../internals/path":104}],57:[function(r,i,s){var o=r("../internals/classof"),a=r("../internals/iterators"),l=r("../internals/well-known-symbol")("iterator");i.exports=function(c){if(c!=null)return c[l]||c["@@iterator"]||a[o(c)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(r,i,s){var o=r("../internals/an-object"),a=r("../internals/get-iterator-method");i.exports=function(l){var c=a(l);if(typeof c!="function")throw TypeError(String(l)+" is not iterable");return o(c.call(l))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(r,i,s){(function(o){function a(l){return l&&l.Math==Math&&l}i.exports=a(typeof globalThis=="object"&&globalThis)||a(typeof window=="object"&&window)||a(typeof self=="object"&&self)||a(typeof o=="object"&&o)||Function("return this")()}).call(this,typeof Ci<"u"?Ci:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(r,i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},{}],61:[function(r,i,s){i.exports={}},{}],62:[function(r,i,s){var o=r("../internals/global");i.exports=function(a,l){var c=o.console;c&&c.error&&(arguments.length===1?c.error(a):c.error(a,l))}},{"../internals/global":59}],63:[function(r,i,s){r=r("../internals/get-built-in"),i.exports=r("document","documentElement")},{"../internals/get-built-in":56}],64:[function(r,i,s){var o=r("../internals/descriptors"),a=r("../internals/fails"),l=r("../internals/document-create-element");i.exports=!o&&!a(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(r,i,s){var o=Math.abs,a=Math.pow,l=Math.floor,c=Math.log,m=Math.LN2;i.exports={pack:function(p,u,I){var h,f,g,y=new Array(I),Z=8*I-u-1,I=(1<<Z)-1,G=I>>1,R=u===23?a(2,-24)-a(2,-77):0,C=p<0||p===0&&1/p<0?1:0,V=0;for((p=o(p))!=p||p===1/0?(f=p!=p?1:0,h=I):(h=l(c(p)/m),p*(g=a(2,-h))<1&&(h--,g*=2),2<=(p+=1<=h+G?R/g:R*a(2,1-G))*g&&(h++,g/=2),I<=h+G?(f=0,h=I):1<=h+G?(f=(p*g-1)*a(2,u),h+=G):(f=p*a(2,G-1)*a(2,u),h=0));8<=u;y[V++]=255&f,f/=256,u-=8);for(h=h<<u|f,Z+=u;0<Z;y[V++]=255&h,h/=256,Z-=8);return y[--V]|=128*C,y},unpack:function(p,u){var d,h=p.length,I=8*h-u-1,f=(1<<I)-1,g=f>>1,y=I-7,Z=h-1,I=p[Z--],G=127&I;for(I>>=7;0<y;G=256*G+p[Z],Z--,y-=8);for(d=G&(1<<-y)-1,G>>=-y,y+=u;0<y;d=256*d+p[Z],Z--,y-=8);if(G===0)G=1-g;else{if(G===f)return d?NaN:I?-1/0:1/0;d+=a(2,u),G-=g}return(I?-1:1)*d*a(2,G-u)}}},{}],66:[function(r,i,s){var o=r("../internals/fails"),a=r("../internals/classof-raw"),l="".split;i.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return a(c)=="String"?l.call(c,""):Object(c)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(r,i,s){var o=r("../internals/is-object"),a=r("../internals/object-set-prototype-of");i.exports=function(l,c,m){return a&&typeof(c=c.constructor)=="function"&&c!==m&&o(c=c.prototype)&&c!==m.prototype&&a(l,c),l}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(o,i,s){var o=o("../internals/shared-store"),a=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(l){return a.call(l)}),i.exports=o.inspectSource},{"../internals/shared-store":119}],69:[function(r,i,s){function o(y){m(y,d,{value:{objectID:"O"+ ++h,weakData:{}}})}var a=r("../internals/hidden-keys"),l=r("../internals/is-object"),c=r("../internals/has"),m=r("../internals/object-define-property").f,p=r("../internals/uid"),u=r("../internals/freezing"),d=p("meta"),h=0,f=Object.isExtensible||function(){return!0},g=i.exports={REQUIRED:!1,fastKey:function(y,Z){if(!l(y))return typeof y=="symbol"?y:(typeof y=="string"?"S":"P")+y;if(!c(y,d)){if(!f(y))return"F";if(!Z)return"E";o(y)}return y[d].objectID},getWeakData:function(y,Z){if(!c(y,d)){if(!f(y))return!0;if(!Z)return!1;o(y)}return y[d].weakData},onFreeze:function(y){return u&&g.REQUIRED&&f(y)&&!c(y,d)&&o(y),y}};a[d]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(I,i,s){var o,a,l,c,m,p,u,d,h=I("../internals/native-weak-map"),G=I("../internals/global"),f=I("../internals/is-object"),g=I("../internals/create-non-enumerable-property"),y=I("../internals/has"),Z=I("../internals/shared-key"),I=I("../internals/hidden-keys"),G=G.WeakMap;u=h?(o=new G,a=o.get,l=o.has,c=o.set,m=function(R,C){return c.call(o,R,C),C},p=function(R){return a.call(o,R)||{}},function(R){return l.call(o,R)}):(I[d=Z("state")]=!0,m=function(R,C){return g(R,d,C),C},p=function(R){return y(R,d)?R[d]:{}},function(R){return y(R,d)}),i.exports={set:m,get:p,has:u,enforce:function(R){return u(R)?p(R):m(R,{})},getterFor:function(R){return function(C){if(f(C)&&(C=p(C)).type===R)return C;throw TypeError("Incompatible receiver, "+R+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(r,i,s){var o=r("../internals/well-known-symbol"),a=r("../internals/iterators"),l=o("iterator"),c=Array.prototype;i.exports=function(m){return m!==void 0&&(a.Array===m||c[l]===m)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(r,i,s){var o=r("../internals/classof-raw");i.exports=Array.isArray||function(a){return o(a)=="Array"}},{"../internals/classof-raw":28}],73:[function(r,i,s){function o(d,h){return(d=m[c(d)])==u||d!=p&&(typeof h=="function"?a(h):!!h)}var a=r("../internals/fails"),l=/#|\.prototype\./,c=o.normalize=function(d){return String(d).replace(l,".").toLowerCase()},m=o.data={},p=o.NATIVE="N",u=o.POLYFILL="P";i.exports=o},{"../internals/fails":51}],74:[function(r,i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},{}],75:[function(r,i,s){i.exports=!1},{}],76:[function(r,i,s){var o=r("../internals/is-object"),a=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("match");i.exports=function(c){var m;return o(c)&&((m=c[l])!==void 0?!!m:a(c)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(r,i,s){function o(d,h){this.stopped=d,this.result=h}var a=r("../internals/an-object"),l=r("../internals/is-array-iterator-method"),c=r("../internals/to-length"),m=r("../internals/function-bind-context"),p=r("../internals/get-iterator-method"),u=r("../internals/call-with-safe-iteration-closing");(i.exports=function(d,h,f,g,y){var Z,I,G,R,C,V,x=m(h,f,g?2:1);if(y)Z=d;else{if(typeof(h=p(d))!="function")throw TypeError("Target is not iterable");if(l(h)){for(I=0,G=c(d.length);I<G;I++)if((R=g?x(a(V=d[I])[0],V[1]):x(d[I]))&&R instanceof o)return R;return new o(!1)}Z=h.call(d)}for(C=Z.next;!(V=C.call(Z)).done;)if(typeof(R=u(Z,x,V.value,g))=="object"&&R&&R instanceof o)return R;return new o(!1)}).stop=function(d){return new o(!0,d)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(p,i,s){var o,a,l=p("../internals/object-get-prototype-of"),c=p("../internals/create-non-enumerable-property"),m=p("../internals/has"),u=p("../internals/well-known-symbol"),p=p("../internals/is-pure"),u=u("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(l=l(l(a)))!==Object.prototype&&(o=l):d=!0),o==null&&(o={}),p||m(o,u)||c(o,u,function(){return this}),i.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(r,i,s){i.exports={}},{}],80:[function(r,i,s){i.exports=Math.sign||function(o){return(o=+o)==0||o!=o?o:o<0?-1:1}},{}],81:[function(g,i,s){var o,a,l,c,m,p,u,d,h=g("../internals/global"),C=g("../internals/object-get-own-property-descriptor").f,R=g("../internals/classof-raw"),f=g("../internals/task").set,g=g("../internals/engine-is-ios"),y=h.MutationObserver||h.WebKitMutationObserver,Z=h.process,I=h.Promise,G=R(Z)=="process",R=C(h,"queueMicrotask"),C=R&&R.value;C||(o=function(){var V,x;for(G&&(V=Z.domain)&&V.exit();a;){x=a.fn,a=a.next;try{x()}catch(w){throw a?c():l=void 0,w}}l=void 0,V&&V.enter()},c=G?function(){Z.nextTick(o)}:y&&!g?(m=!0,p=document.createTextNode(""),new y(o).observe(p,{characterData:!0}),function(){p.data=m=!m}):I&&I.resolve?(u=I.resolve(void 0),d=u.then,function(){d.call(u,o)}):function(){f.call(h,o)}),i.exports=C||function(V){V={fn:V,next:void 0},l&&(l.next=V),a||(a=V,c()),l=V}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(r,i,s){r=r("../internals/global"),i.exports=r.Promise},{"../internals/global":59}],83:[function(r,i,s){r=r("../internals/fails"),i.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(r,i,s){var o=r("../internals/fails"),a=r("../internals/well-known-symbol"),l=r("../internals/is-pure"),c=a("iterator");i.exports=!o(function(){var m=new URL("b?a=1&b=2&c=3","http://a"),p=m.searchParams,u="";return m.pathname="c%20d",p.forEach(function(d,h){p.delete("b"),u+=h+d}),l&&!m.toJSON||!p.sort||m.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[c]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(o,i,s){var a=o("../internals/global"),o=o("../internals/inspect-source"),a=a.WeakMap;i.exports=typeof a=="function"&&/native code/.test(o(a))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(r,i,s){function o(l){var c,m;this.promise=new l(function(p,u){if(c!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");c=p,m=u}),this.resolve=a(c),this.reject=a(m)}var a=r("../internals/a-function");i.exports.f=function(l){return new o(l)}},{"../internals/a-function":5}],87:[function(r,i,s){var o=r("../internals/is-regexp");i.exports=function(a){if(o(a))throw TypeError("The method doesn't accept regular expressions");return a}},{"../internals/is-regexp":76}],88:[function(r,i,s){var o=r("../internals/global").isFinite;i.exports=Number.isFinite||function(a){return typeof a=="number"&&o(a)}},{"../internals/global":59}],89:[function(r,i,s){var o=r("../internals/descriptors"),a=r("../internals/fails"),l=r("../internals/object-keys"),c=r("../internals/object-get-own-property-symbols"),m=r("../internals/object-property-is-enumerable"),p=r("../internals/to-object"),u=r("../internals/indexed-object"),d=Object.assign,h=Object.defineProperty;i.exports=!d||a(function(){var f,g,y,Z;return!(!o||d({b:1},d(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(g={},Z="abcdefghijklmnopqrst",(f={})[y=Symbol()]=7,Z.split("").forEach(function(I){g[I]=I}),d({},f)[y]!=7||l(d({},g)).join("")!=Z)})?function(f,g){for(var y=p(f),Z=arguments.length,I=1,G=c.f,R=m.f;I<Z;)for(var C,V=u(arguments[I++]),x=G?l(V).concat(G(V)):l(V),w=x.length,k=0;k<w;)C=x[k++],o&&!R.call(V,C)||(y[C]=V[C]);return y}:d},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(h,i,s){function o(){}var a,l=h("../internals/an-object"),c=h("../internals/object-define-properties"),m=h("../internals/enum-bug-keys"),p=h("../internals/hidden-keys"),u=h("../internals/html"),d=h("../internals/document-create-element"),h=h("../internals/shared-key"),f="prototype",g="script",y=h("IE_PROTO"),Z=function(G){return"<"+g+">"+G+"</"+g+">"},I=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch{}I=a?((G=a).write(Z("")),G.close(),R=G.parentWindow.Object,G=null,R):(G=d("iframe"),R="java"+g+":",G.style.display="none",u.appendChild(G),G.src=String(R),(R=G.contentWindow.document).open(),R.write(Z("document.F=Object")),R.close(),R.F);for(var G,R,C=m.length;C--;)delete I[f][m[C]];return I()};p[y]=!0,i.exports=Object.create||function(G,R){var C;return G!==null?(o[f]=l(G),C=new o,o[f]=null,C[y]=G):C=I(),R===void 0?C:c(C,R)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(r,i,s){var o=r("../internals/descriptors"),a=r("../internals/object-define-property"),l=r("../internals/an-object"),c=r("../internals/object-keys");i.exports=o?Object.defineProperties:function(m,p){l(m);for(var u,d=c(p),h=d.length,f=0;f<h;)a.f(m,u=d[f++],p[u]);return m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(r,i,s){var o=r("../internals/descriptors"),a=r("../internals/ie8-dom-define"),l=r("../internals/an-object"),c=r("../internals/to-primitive"),m=Object.defineProperty;s.f=o?m:function(p,u,d){if(l(p),u=c(u,!0),l(d),a)try{return m(p,u,d)}catch{}if("get"in d||"set"in d)throw TypeError("Accessors not supported");return"value"in d&&(p[u]=d.value),p}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(r,i,s){var o=r("../internals/descriptors"),a=r("../internals/object-property-is-enumerable"),l=r("../internals/create-property-descriptor"),c=r("../internals/to-indexed-object"),m=r("../internals/to-primitive"),p=r("../internals/has"),u=r("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;s.f=o?d:function(h,f){if(h=c(h),f=m(f,!0),u)try{return d(h,f)}catch{}if(p(h,f))return l(!a.f.call(h,f),h[f])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(r,i,s){var o=r("../internals/to-indexed-object"),a=r("../internals/object-get-own-property-names").f,l={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(m){if(!c||l.call(m)!="[object Window]")return a(o(m));try{return a(m)}catch{return c.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(r,i,s){var o=r("../internals/object-keys-internal"),a=r("../internals/enum-bug-keys").concat("length","prototype");s.f=Object.getOwnPropertyNames||function(l){return o(l,a)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(r,i,s){s.f=Object.getOwnPropertySymbols},{}],97:[function(c,i,s){var o=c("../internals/has"),a=c("../internals/to-object"),l=c("../internals/shared-key"),c=c("../internals/correct-prototype-getter"),m=l("IE_PROTO"),p=Object.prototype;i.exports=c?Object.getPrototypeOf:function(u){return u=a(u),o(u,m)?u[m]:typeof u.constructor=="function"&&u instanceof u.constructor?u.constructor.prototype:u instanceof Object?p:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(r,i,s){var o=r("../internals/has"),a=r("../internals/to-indexed-object"),l=r("../internals/array-includes").indexOf,c=r("../internals/hidden-keys");i.exports=function(m,p){var u,d=a(m),h=0,f=[];for(u in d)!o(c,u)&&o(d,u)&&f.push(u);for(;p.length>h;)!o(d,u=p[h++])||~l(f,u)||f.push(u);return f}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(r,i,s){var o=r("../internals/object-keys-internal"),a=r("../internals/enum-bug-keys");i.exports=Object.keys||function(l){return o(l,a)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(r,i,s){var o={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,l=a&&!o.call({1:2},1);s.f=l?function(c){return c=a(this,c),!!c&&c.enumerable}:o},{}],101:[function(r,i,s){var o=r("../internals/an-object"),a=r("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,c=!1,m={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(m,[]),c=m instanceof Array}catch{}return function(p,u){return o(p),a(u),c?l.call(p,u):p.__proto__=u,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(r,i,s){var o=r("../internals/to-string-tag-support"),a=r("../internals/classof");i.exports=o?{}.toString:function(){return"[object "+a(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(r,i,s){var o=r("../internals/get-built-in"),a=r("../internals/object-get-own-property-names"),l=r("../internals/object-get-own-property-symbols"),c=r("../internals/an-object");i.exports=o("Reflect","ownKeys")||function(m){var p=a.f(c(m)),u=l.f;return u?p.concat(u(m)):p}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(r,i,s){r=r("../internals/global"),i.exports=r},{"../internals/global":59}],105:[function(r,i,s){i.exports=function(o){try{return{error:!1,value:o()}}catch(a){return{error:!0,value:a}}}},{}],106:[function(r,i,s){var o=r("../internals/an-object"),a=r("../internals/is-object"),l=r("../internals/new-promise-capability");i.exports=function(c,m){return o(c),a(m)&&m.constructor===c?m:((0,(c=l.f(c)).resolve)(m),c.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(r,i,s){var o=r("../internals/redefine");i.exports=function(a,l,c){for(var m in l)o(a,m,l[m],c);return a}},{"../internals/redefine":108}],108:[function(p,i,s){var o=p("../internals/global"),a=p("../internals/create-non-enumerable-property"),l=p("../internals/has"),c=p("../internals/set-global"),m=p("../internals/inspect-source"),p=p("../internals/internal-state"),u=p.get,d=p.enforce,h=String(String).split("String");(i.exports=function(f,g,y,R){var I=!!R&&!!R.unsafe,G=!!R&&!!R.enumerable,R=!!R&&!!R.noTargetGet;typeof y=="function"&&(typeof g!="string"||l(y,"name")||a(y,"name",g),d(y).source=h.join(typeof g=="string"?g:"")),f===o?G?f[g]=y:c(g,y):(I?!R&&f[g]&&(G=!0):delete f[g],G?f[g]=y:a(f,g,y))})(Function.prototype,"toString",function(){return typeof this=="function"&&u(this).source||m(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(r,i,s){var o=r("./classof-raw"),a=r("./regexp-exec");i.exports=function(l,c){var m=l.exec;if(typeof m=="function"){if(m=m.call(l,c),typeof m!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return m}if(o(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return a.call(l,c)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(c,i,s){var o,a,l=c("./regexp-flags"),c=c("./regexp-sticky-helpers"),m=RegExp.prototype.exec,p=String.prototype.replace,u=m,d=(o=/a/,a=/b*/g,m.call(o,"a"),m.call(a,"a"),o.lastIndex!==0||a.lastIndex!==0),h=c.UNSUPPORTED_Y||c.BROKEN_CARET,f=/()??/.exec("")[1]!==void 0;i.exports=u=d||f||h?function(g){var y,Z,I,G,R=this,C=h&&R.sticky,V=l.call(R),x=R.source,w=0,k=g;return C&&((V=V.replace("y","")).indexOf("g")===-1&&(V+="g"),k=String(g).slice(R.lastIndex),0<R.lastIndex&&(!R.multiline||R.multiline&&g[R.lastIndex-1]!==`
`)&&(x="(?: "+x+")",k=" "+k,w++),Z=new RegExp("^(?:"+x+")",V)),f&&(Z=new RegExp("^"+x+"$(?!\\s)",V)),d&&(y=R.lastIndex),I=m.call(C?Z:R,k),C?I?(I.input=I.input.slice(w),I[0]=I[0].slice(w),I.index=R.lastIndex,R.lastIndex+=I[0].length):R.lastIndex=0:d&&I&&(R.lastIndex=R.global?I.index+I[0].length:y),f&&I&&1<I.length&&p.call(I[0],Z,function(){for(G=1;G<arguments.length-2;G++)arguments[G]===void 0&&(I[G]=void 0)}),I}:u},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(r,i,s){var o=r("../internals/an-object");i.exports=function(){var a=o(this),l="";return a.global&&(l+="g"),a.ignoreCase&&(l+="i"),a.multiline&&(l+="m"),a.dotAll&&(l+="s"),a.unicode&&(l+="u"),a.sticky&&(l+="y"),l}},{"../internals/an-object":10}],112:[function(r,i,s){r=r("./fails");function o(a,l){return RegExp(a,l)}s.UNSUPPORTED_Y=r(function(){var a=o("a","y");return a.lastIndex=2,a.exec("abcd")!=null}),s.BROKEN_CARET=r(function(){var a=o("^r","gy");return a.lastIndex=2,a.exec("str")!=null})},{"./fails":51}],113:[function(r,i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},{}],114:[function(r,i,s){i.exports=Object.is||function(o,a){return o===a?o!==0||1/o==1/a:o!=o&&a!=a}},{}],115:[function(r,i,s){var o=r("../internals/global"),a=r("../internals/create-non-enumerable-property");i.exports=function(l,c){try{a(o,l,c)}catch{o[l]=c}return c}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(r,i,s){var o=r("../internals/get-built-in"),a=r("../internals/object-define-property"),l=r("../internals/well-known-symbol"),c=r("../internals/descriptors"),m=l("species");i.exports=function(u){var u=o(u),d=a.f;c&&u&&!u[m]&&d(u,m,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(r,i,s){var o=r("../internals/object-define-property").f,a=r("../internals/has"),l=r("../internals/well-known-symbol")("toStringTag");i.exports=function(c,m,p){c&&!a(c=p?c:c.prototype,l)&&o(c,l,{configurable:!0,value:m})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(r,i,s){var o=r("../internals/shared"),a=r("../internals/uid"),l=o("keys");i.exports=function(c){return l[c]||(l[c]=a(c))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(o,i,s){var l=o("../internals/global"),o=o("../internals/set-global"),a="__core-js_shared__",l=l[a]||o(a,{});i.exports=l},{"../internals/global":59,"../internals/set-global":115}],120:[function(r,i,s){var o=r("../internals/is-pure"),a=r("../internals/shared-store");(i.exports=function(l,c){return a[l]||(a[l]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(r,i,s){var o=r("../internals/an-object"),a=r("../internals/a-function"),l=r("../internals/well-known-symbol")("species");i.exports=function(p,m){var p=o(p).constructor;return p===void 0||(p=o(p)[l])==null?m:a(p)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(r,i,s){var o=r("../internals/fails");i.exports=function(a){return o(function(){var l=""[a]('"');return l!==l.toLowerCase()||3<l.split('"').length})}},{"../internals/fails":51}],123:[function(r,i,s){function o(c){return function(d,h){var u,d=String(l(d)),h=a(h),f=d.length;return h<0||f<=h?c?"":void 0:(u=d.charCodeAt(h))<55296||56319<u||h+1===f||(f=d.charCodeAt(h+1))<56320||57343<f?c?d.charAt(h):u:c?d.slice(h,h+2):f-56320+(u-55296<<10)+65536}}var a=r("../internals/to-integer"),l=r("../internals/require-object-coercible");i.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(r,i,s){function o(I){return I+22+75*(I<26)}function a(I){var G,R=[],C=(I=function(O){for(var D=[],le=0,X=O.length;le<X;){var T,N=O.charCodeAt(le++);55296<=N&&N<=56319&&le<X?(64512&(T=O.charCodeAt(le++)))==56320?D.push(((1023&N)<<10)+(1023&T)+65536):(D.push(N),le--):D.push(N)}return D}(I)).length,V=128,x=0,w=72;for(U=0;U<I.length;U++)(G=I[U])<128&&R.push(Z(G));var k=R.length,A=k;for(k&&R.push("-");A<C;){for(var Y=l,U=0;U<I.length;U++)V<=(G=I[U])&&G<Y&&(Y=G);var M=A+1;if(Y-V>y((l-x)/M))throw RangeError(f);for(x+=(Y-V)*M,V=Y,U=0;U<I.length;U++){if((G=I[U])<V&&++x>l)throw RangeError(f);if(G==V){for(var j=x,K=c;;K+=c){var P=K<=w?1:w+m<=K?m:K-w;if(j<P)break;var J=j-P,E=c-P;R.push(Z(o(P+J%E))),j=y(J/E)}R.push(Z(o(j))),w=function(O,D,le){var X=0;for(O=le?y(O/u):O>>1,O+=y(O/D);g*m>>1<O;X+=c)O=y(O/g);return y(X+(g+1)*O/(O+p))}(x,M,A==k),x=0,++A}}++x,++V}return R.join("")}var l=2147483647,c=36,m=26,p=38,u=700,d=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,f="Overflow: input needs wider integers to process",g=c-1,y=Math.floor,Z=String.fromCharCode;i.exports=function(I){for(var G,R=[],C=I.toLowerCase().replace(h,".").split("."),V=0;V<C.length;V++)G=C[V],R.push(d.test(G)?"xn--"+a(G):G);return R.join(".")}},{}],125:[function(r,i,s){var o=r("../internals/to-integer"),a=r("../internals/require-object-coercible");i.exports="".repeat||function(l){var c=String(a(this)),m="",p=o(l);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(c+=c))1&p&&(m+=c);return m}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(r,i,s){var o=r("../internals/fails"),a=r("../internals/whitespaces");i.exports=function(l){return o(function(){return!!a[l]()||"\u200B\x85\u180E"[l]()!="\u200B\x85\u180E"||a[l].name!==l})}},{"../internals/fails":51,"../internals/whitespaces":147}],127:[function(l,i,s){function o(p){return function(u){return u=String(a(u)),1&p&&(u=u.replace(c,"")),u=2&p?u.replace(m,""):u}}var a=l("../internals/require-object-coercible"),l="["+l("../internals/whitespaces")+"]",c=RegExp("^"+l+l+"*"),m=RegExp(l+l+"*$");i.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(g,i,s){function o(A){return function(){k(A)}}function a(A){k(A.data)}function l(A){m.postMessage(A+"",y.protocol+"//"+y.host)}var c,m=g("../internals/global"),p=g("../internals/fails"),u=g("../internals/classof-raw"),d=g("../internals/function-bind-context"),h=g("../internals/html"),f=g("../internals/document-create-element"),g=g("../internals/engine-is-ios"),y=m.location,Z=m.setImmediate,I=m.clearImmediate,G=m.process,R=m.MessageChannel,C=m.Dispatch,V=0,x={},w="onreadystatechange",k=function(A){var Y;x.hasOwnProperty(A)&&(Y=x[A],delete x[A],Y())};Z&&I||(Z=function(A){for(var Y=[],U=1;U<arguments.length;)Y.push(arguments[U++]);return x[++V]=function(){(typeof A=="function"?A:Function(A)).apply(void 0,Y)},c(V),V},I=function(A){delete x[A]},u(G)=="process"?c=function(A){G.nextTick(o(A))}:C&&C.now?c=function(A){C.now(o(A))}:R&&!g?(g=(u=new R).port2,u.port1.onmessage=a,c=d(g.postMessage,g,1)):!m.addEventListener||typeof postMessage!="function"||m.importScripts||p(l)||y.protocol==="file:"?c=w in f("script")?function(A){h.appendChild(f("script"))[w]=function(){h.removeChild(this),k(A)}}:function(A){setTimeout(o(A),0)}:(c=l,m.addEventListener("message",a,!1))),i.exports={set:Z,clear:I}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(r,i,s){var o=r("../internals/classof-raw");i.exports=function(a){if(typeof a!="number"&&o(a)!="Number")throw TypeError("Incorrect invocation");return+a}},{"../internals/classof-raw":28}],130:[function(r,i,s){var o=r("../internals/to-integer"),a=Math.max,l=Math.min;i.exports=function(c,m){return c=o(c),c<0?a(c+m,0):l(c,m)}},{"../internals/to-integer":133}],131:[function(r,i,s){var o=r("../internals/to-integer"),a=r("../internals/to-length");i.exports=function(c){if(c===void 0)return 0;var c=o(c),m=a(c);if(c!==m)throw RangeError("Wrong length or index");return m}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(r,i,s){var o=r("../internals/indexed-object"),a=r("../internals/require-object-coercible");i.exports=function(l){return o(a(l))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(r,i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(0<l?a:o)(l)}},{}],134:[function(r,i,s){var o=r("../internals/to-integer"),a=Math.min;i.exports=function(l){return 0<l?a(o(l),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(r,i,s){var o=r("../internals/require-object-coercible");i.exports=function(a){return Object(o(a))}},{"../internals/require-object-coercible":113}],136:[function(r,i,s){var o=r("../internals/to-positive-integer");i.exports=function(a,l){if(a=o(a),a%l)throw RangeError("Wrong offset");return a}},{"../internals/to-positive-integer":137}],137:[function(r,i,s){var o=r("../internals/to-integer");i.exports=function(a){if(a=o(a),a<0)throw RangeError("The argument can't be less than 0");return a}},{"../internals/to-integer":133}],138:[function(r,i,s){var o=r("../internals/is-object");i.exports=function(a,l){if(!o(a))return a;var c,m;if(l&&typeof(c=a.toString)=="function"&&!o(m=c.call(a))||typeof(c=a.valueOf)=="function"&&!o(m=c.call(a))||!l&&typeof(c=a.toString)=="function"&&!o(m=c.call(a)))return m;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(r,i,s){var o={};o[r("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(r,i,s){function o(pe,xe){for(var Se=0,ke=xe.length,We=new(q(pe))(ke);Se<ke;)We[Se]=xe[Se++];return We}function a(pe,xe){T(pe,xe,{get:function(){return le(this)[xe]}})}function l(pe){return pe instanceof ne||(pe=k(pe))=="ArrayBuffer"||pe=="SharedArrayBuffer"}function c(pe,xe){return me(pe)&&typeof xe!="symbol"&&xe in pe&&String(+xe)==String(xe)}function m(pe,xe){return c(pe,xe=x(xe,!0))?I(2,pe[xe]):N(pe,xe)}function p(pe,xe,Se){return!(c(pe,xe=x(xe,!0))&&A(Se)&&w(Se,"value"))||w(Se,"get")||w(Se,"set")||Se.configurable||w(Se,"writable")&&!Se.writable||w(Se,"enumerable")&&!Se.enumerable?T(pe,xe,Se):(pe[xe]=Se.value,pe)}var u=r("../internals/export"),d=r("../internals/global"),h=r("../internals/descriptors"),f=r("../internals/typed-array-constructors-require-wrappers"),g=r("../internals/array-buffer-view-core"),y=r("../internals/array-buffer"),Z=r("../internals/an-instance"),I=r("../internals/create-property-descriptor"),G=r("../internals/create-non-enumerable-property"),R=r("../internals/to-length"),C=r("../internals/to-index"),V=r("../internals/to-offset"),x=r("../internals/to-primitive"),w=r("../internals/has"),k=r("../internals/classof"),A=r("../internals/is-object"),Y=r("../internals/object-create"),U=r("../internals/object-set-prototype-of"),M=r("../internals/object-get-own-property-names").f,j=r("../internals/typed-array-from"),K=r("../internals/array-iteration").forEach,P=r("../internals/set-species"),J=r("../internals/object-define-property"),E=r("../internals/object-get-own-property-descriptor"),O=r("../internals/internal-state"),D=r("../internals/inherit-if-required"),le=O.get,X=O.set,T=J.f,N=E.f,z=Math.round,te=d.RangeError,ne=y.ArrayBuffer,ee=y.DataView,oe=g.NATIVE_ARRAY_BUFFER_VIEWS,ie=g.TYPED_ARRAY_TAG,ce=g.TypedArray,he=g.TypedArrayPrototype,q=g.aTypedArrayConstructor,me=g.isTypedArray,ge="BYTES_PER_ELEMENT",be="Wrong length";h?(oe||(E.f=m,J.f=p,a(he,"buffer"),a(he,"byteOffset"),a(he,"byteLength"),a(he,"length")),u({target:"Object",stat:!0,forced:!oe},{getOwnPropertyDescriptor:m,defineProperty:p}),i.exports=function(Ze,xe,Se){function ke(ve,_){T(ve,_,{get:function(){var $=this,H=_;return($=le($)).view[$e](H*We+$.byteOffset,!0)},set:function($){var H=this,re=_;H=le(H),Se&&($=($=z($))<0?0:255<$?255:255&$),H.view[ze](re*We+H.byteOffset,$,!0)},enumerable:!0})}var We=Ze.match(/\d+$/)[0]/8,Ke=Ze+(Se?"Clamped":"")+"Array",$e="get"+Ze,ze="set"+Ze,it=d[Ke],qe=it,Ze=qe&&qe.prototype,Ae={};oe?f&&(qe=xe(function(ve,_,$,H){return Z(ve,qe,Ke),D(A(_)?l(_)?H!==void 0?new it(_,V($,We),H):$!==void 0?new it(_,V($,We)):new it(_):me(_)?o(qe,_):j.call(qe,_):new it(C(_)),ve,qe)}),U&&U(qe,ce),K(M(it),function(ve){ve in qe||G(qe,ve,it[ve])}),qe.prototype=Ze):(qe=xe(function(ve,_,$,H){Z(ve,qe,Ke);var re,ye,Ge=0,Le=0;if(A(_)){if(!l(_))return me(_)?o(qe,_):j.call(qe,_);var Me=_,Le=V($,We),$=_.byteLength;if(H===void 0){if($%We||(re=$-Le)<0)throw te(be)}else if($<(re=R(H)*We)+Le)throw te(be);ye=re/We}else ye=C(_),Me=new ne(re=ye*We);for(X(ve,{buffer:Me,byteOffset:Le,byteLength:re,length:ye,view:new ee(Me)});Ge<ye;)ke(ve,Ge++)}),U&&U(qe,ce),Ze=qe.prototype=Y(he)),Ze.constructor!==qe&&G(Ze,"constructor",qe),ie&&G(Ze,ie,Ke),Ae[Ke]=qe,u({global:!0,forced:qe!=it,sham:!oe},Ae),ge in qe||G(qe,ge,We),ge in Ze||G(Ze,ge,We),P(Ke)}):i.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(c,i,s){var o=c("../internals/global"),a=c("../internals/fails"),l=c("../internals/check-correctness-of-iteration"),c=c("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,m=o.ArrayBuffer,p=o.Int8Array;i.exports=!c||!a(function(){p(1)})||!a(function(){new p(-1)})||!l(function(u){new p,new p(null),new p(1.5),new p(u)},!0)||a(function(){return new p(new m(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],142:[function(r,i,s){var o=r("../internals/to-object"),a=r("../internals/to-length"),l=r("../internals/get-iterator-method"),c=r("../internals/is-array-iterator-method"),m=r("../internals/function-bind-context"),p=r("../internals/array-buffer-view-core").aTypedArrayConstructor;i.exports=function(u){var d,h,f,g,y,Z,I=o(u),G=arguments.length,R=1<G?arguments[1]:void 0,C=R!==void 0,V=l(I);if(V!=null&&!c(V))for(Z=(y=V.call(I)).next,I=[];!(g=Z.call(y)).done;)I.push(g.value);for(C&&2<G&&(R=m(R,arguments[2],2)),h=a(I.length),f=new(p(this))(h),d=0;d<h;d++)f[d]=C?R(I[d],d):I[d];return f}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(r,i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},{}],144:[function(r,i,s){r=r("../internals/native-symbol"),i.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(r,i,s){r=r("../internals/well-known-symbol"),s.f=r},{"../internals/well-known-symbol":146}],146:[function(p,i,s){var o=p("../internals/global"),a=p("../internals/shared"),l=p("../internals/has"),c=p("../internals/uid"),m=p("../internals/native-symbol"),p=p("../internals/use-symbol-as-uid"),u=a("wks"),d=o.Symbol,h=p?d:d&&d.withoutSetter||c;i.exports=function(f){return l(u,f)||(m&&l(d,f)?u[f]=d[f]:u[f]=h("Symbol."+f)),u[f]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(r,i,s){i.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],148:[function(l,i,s){var o=l("../internals/export"),a=l("../internals/global"),m=l("../internals/array-buffer"),l=l("../internals/set-species"),c="ArrayBuffer",m=m[c];o({global:!0,forced:a[c]!==m},{ArrayBuffer:m}),l(c)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],149:[function(I,i,s){var o=I("../internals/export"),a=I("../internals/fails"),l=I("../internals/is-array"),c=I("../internals/is-object"),m=I("../internals/to-object"),p=I("../internals/to-length"),u=I("../internals/create-property"),d=I("../internals/array-species-create"),h=I("../internals/array-method-has-species-support"),Z=I("../internals/well-known-symbol"),I=I("../internals/engine-v8-version"),f=Z("isConcatSpreadable"),g=9007199254740991,y="Maximum allowed index exceeded",Z=51<=I||!a(function(){var G=[];return G[f]=!1,G.concat()[0]!==G}),I=h("concat");o({target:"Array",proto:!0,forced:!Z||!I},{concat:function(G){for(var R,C,V,x,w,k=m(this),A=d(k,0),Y=0,U=-1,M=arguments.length;U<M;U++)if(w=void 0,!c(x=V=U===-1?k:arguments[U])||((w=x[f])!==void 0?!w:!l(x))){if(g<=Y)throw TypeError(y);u(A,Y++,V)}else{if(C=p(V.length),g<Y+C)throw TypeError(y);for(R=0;R<C;R++,Y++)R in V&&u(A,Y,V[R])}return A.length=Y,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(l,i,s){var o=l("../internals/export"),a=l("../internals/array-copy-within"),l=l("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:a}),l("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],151:[function(c,i,s){var o=c("../internals/export"),a=c("../internals/array-iteration").every,l=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),l=l("every"),c=c("every");o({target:"Array",proto:!0,forced:!l||!c},{every:function(m){return a(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],152:[function(l,i,s){var o=l("../internals/export"),a=l("../internals/array-fill"),l=l("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:a}),l("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],153:[function(c,i,s){var o=c("../internals/export"),a=c("../internals/array-iteration").filter,l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("filter"),c=c("filter");o({target:"Array",proto:!0,forced:!l||!c},{filter:function(m){return a(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(a,i,s){var o=a("../internals/export"),a=a("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},{"../internals/array-for-each":16,"../internals/export":50}],155:[function(r,i,s){var o=r("../internals/export"),a=r("../internals/array-from");o({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(l){Array.from(l)})},{from:a})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],156:[function(r,i,s){var o=r("../internals/export"),a=r("../internals/array-includes").includes,l=r("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(c){return a(this,c,1<arguments.length?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(p,i,s){var o=p("../internals/export"),a=p("../internals/array-includes").indexOf,m=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),l=[].indexOf,c=!!l&&1/[1].indexOf(1,-0)<0,m=m("indexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:c||!m||!p},{indexOf:function(u){return c?l.apply(this,arguments)||0:a(this,u,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(m,i,s){var o=m("../internals/to-indexed-object"),a=m("../internals/add-to-unscopables"),l=m("../internals/iterators"),c=m("../internals/internal-state"),m=m("../internals/define-iterator"),p="Array Iterator",u=c.set,d=c.getterFor(p);i.exports=m(Array,"Array",function(h,f){u(this,{type:p,target:o(h),index:0,kind:f})},function(){var h=d(this),f=h.target,g=h.kind,y=h.index++;return!f||y>=f.length?{value:h.target=void 0,done:!0}:g=="keys"?{value:y,done:!1}:g=="values"?{value:f[y],done:!1}:{value:[y,f[y]],done:!1}},"values"),l.Arguments=l.Array,a("keys"),a("values"),a("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(m,i,s){var o=m("../internals/export"),c=m("../internals/indexed-object"),a=m("../internals/to-indexed-object"),m=m("../internals/array-method-is-strict"),l=[].join,c=c!=Object,m=m("join",",");o({target:"Array",proto:!0,forced:c||!m},{join:function(p){return l.call(a(this),p===void 0?",":p)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(a,i,s){var o=a("../internals/export"),a=a("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},{"../internals/array-last-index-of":20,"../internals/export":50}],161:[function(c,i,s){var o=c("../internals/export"),a=c("../internals/array-iteration").map,l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("map"),c=c("map");o({target:"Array",proto:!0,forced:!l||!c},{map:function(m){return a(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],162:[function(f,i,s){var o=f("../internals/export"),a=f("../internals/is-object"),l=f("../internals/is-array"),c=f("../internals/to-absolute-index"),m=f("../internals/to-length"),p=f("../internals/to-indexed-object"),u=f("../internals/create-property"),d=f("../internals/well-known-symbol"),h=f("../internals/array-method-has-species-support"),f=f("../internals/array-method-uses-to-length"),h=h("slice"),f=f("slice",{ACCESSORS:!0,0:0,1:2}),g=d("species"),y=[].slice,Z=Math.max;o({target:"Array",proto:!0,forced:!h||!f},{slice:function(I,G){var R,C,V,x=p(this),w=m(x.length),k=c(I,w),A=c(G===void 0?w:G,w);if(l(x)&&((R=typeof(R=x.constructor)=="function"&&(R===Array||l(R.prototype))||a(R)&&(R=R[g])===null?void 0:R)===Array||R===void 0))return y.call(x,k,A);for(C=new(R===void 0?Array:R)(Z(A-k,0)),V=0;k<A;k++,V++)k in x&&u(C,V,x[k]);return C.length=V,C}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(c,i,s){var o=c("../internals/export"),a=c("../internals/array-iteration").some,l=c("../internals/array-method-is-strict"),c=c("../internals/array-method-uses-to-length"),l=l("some"),c=c("some");o({target:"Array",proto:!0,forced:!l||!c},{some:function(m){return a(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(h,i,s){var o=h("../internals/export"),a=h("../internals/to-absolute-index"),l=h("../internals/to-integer"),c=h("../internals/to-length"),m=h("../internals/to-object"),p=h("../internals/array-species-create"),u=h("../internals/create-property"),d=h("../internals/array-method-has-species-support"),h=h("../internals/array-method-uses-to-length"),d=d("splice"),h=h("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min;o({target:"Array",proto:!0,forced:!d||!h},{splice:function(Y,Z){var I,G,R,C,V,x,w=m(this),k=c(w.length),A=a(Y,k),Y=arguments.length;if(Y===0?I=G=0:G=Y===1?(I=0,k-A):(I=Y-2,g(f(l(Z),0),k-A)),9007199254740991<k+I-G)throw TypeError("Maximum allowed length exceeded");for(R=p(w,G),C=0;C<G;C++)(V=A+C)in w&&u(R,C,w[V]);if(I<(R.length=G)){for(C=A;C<k-G;C++)x=C+I,(V=C+G)in w?w[x]=w[V]:delete w[x];for(C=k;k-G+I<C;C--)delete w[C-1]}else if(G<I)for(C=k-G;A<C;C--)x=C+I-1,(V=C+G-1)in w?w[x]=w[V]:delete w[x];for(C=0;C<I;C++)w[C+A]=arguments[C+2];return w.length=k-G+I,R}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(a,i,s){var o=a("../internals/descriptors"),a=a("../internals/object-define-property").f,l=Function.prototype,c=l.toString,m=/^\s*function ([^ (]*)/;!o||"name"in l||a(l,"name",{configurable:!0,get:function(){try{return c.call(this).match(m)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],166:[function(a,i,s){var o=a("../internals/collection"),a=a("../internals/collection-strong");i.exports=o("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},a)},{"../internals/collection":32,"../internals/collection-strong":30}],167:[function(o,i,s){var o=o("../internals/export"),a=Math.hypot,l=Math.abs,c=Math.sqrt;o({target:"Math",stat:!0,forced:!!a&&a(1/0,NaN)!==1/0},{hypot:function(m,p){for(var u,d,h=0,f=0,g=arguments.length,y=0;f<g;)y<(u=l(arguments[f++]))?(h=h*(d=y/u)*d+1,y=u):h+=0<u?(d=u/y)*d:u;return y===1/0?1/0:y*c(h)}})},{"../internals/export":50}],168:[function(r,i,s){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],169:[function(r,i,s){function o(U){var M,j,K,P,J,E,O,D=h(U,!1);if(typeof D=="string"&&2<D.length){if((U=(D=G(D)).charCodeAt(0))===43||U===45){if((M=D.charCodeAt(2))===88||M===120)return NaN}else if(U===48){switch(D.charCodeAt(1)){case 66:case 98:j=2,K=49;break;case 79:case 111:j=8,K=55;break;default:return+D}for(J=(P=D.slice(2)).length,E=0;E<J;E++)if((O=P.charCodeAt(E))<48||K<O)return NaN;return parseInt(P,j)}}return+D}var a=r("../internals/descriptors"),l=r("../internals/global"),c=r("../internals/is-forced"),m=r("../internals/redefine"),p=r("../internals/has"),u=r("../internals/classof-raw"),d=r("../internals/inherit-if-required"),h=r("../internals/to-primitive"),f=r("../internals/fails"),g=r("../internals/object-create"),y=r("../internals/object-get-own-property-names").f,Z=r("../internals/object-get-own-property-descriptor").f,I=r("../internals/object-define-property").f,G=r("../internals/string-trim").trim,R="Number",C=l[R],V=C.prototype,x=u(g(V))==R;if(c(R,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var w,k=function(M){var M=arguments.length<1?0:M,j=this;return j instanceof k&&(x?f(function(){V.valueOf.call(j)}):u(j)!=R)?d(new C(o(M)),j,k):o(M)},A=a?y(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Y=0;A.length>Y;Y++)p(C,w=A[Y])&&!p(k,w)&&I(k,w,Z(C,w));(k.prototype=V).constructor=k,m(l,R,k)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],170:[function(r,i,s){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],171:[function(p,i,s){function o(h,f,g){return f===0?g:f%2==1?o(h,f-1,g*h):o(h*h,f/2,g)}var a=p("../internals/export"),l=p("../internals/to-integer"),c=p("../internals/this-number-value"),m=p("../internals/string-repeat"),p=p("../internals/fails"),u=1 .toFixed,d=Math.floor;a({target:"Number",proto:!0,forced:u&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!p(function(){u.call({})})},{toFixed:function(R){function f(w,k){for(var A=-1,Y=k;++A<6;)Y+=w*C[A],C[A]=Y%1e7,Y=d(Y/1e7)}function g(w){for(var k=6,A=0;0<=--k;)A+=C[k],C[k]=d(A/w),A=A%w*1e7}function y(){for(var w,k=6,A="";0<=--k;)A===""&&k!==0&&C[k]===0||(w=String(C[k]),A=A===""?w:A+m.call("0",7-w.length)+w);return A}var Z,I,G=c(this),R=l(R),C=[0,0,0,0,0,0],V="",x="0";if(R<0||20<R)throw RangeError("Incorrect fraction digits");if(G!=G)return"NaN";if(G<=-1e21||1e21<=G)return String(G);if(G<0&&(V="-",G=-G),1e-21<G)if(G=(Z=function(w){for(var k=0,A=w;4096<=A;)k+=12,A/=4096;for(;2<=A;)k+=1,A/=2;return k}(G*o(2,69,1))-69)<0?G*o(2,-Z,1):G/o(2,Z,1),G*=4503599627370496,0<(Z=52-Z)){for(f(0,G),I=R;7<=I;)f(1e7,0),I-=7;for(f(o(10,I,1),0),I=Z-1;23<=I;)g(1<<23),I-=23;g(1<<I),f(1,1),g(2),x=y()}else f(0,G),f(1<<-Z,0),x=y()+m.call("0",R);return x=0<R?V+((G=x.length)<=R?"0."+m.call("0",R-G)+x:x.slice(0,G-R)+"."+x.slice(G-R)):V+x}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],172:[function(a,i,s){var o=a("../internals/export"),a=a("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},{"../internals/export":50,"../internals/object-assign":89}],173:[function(c,i,s){var o=c("../internals/export"),m=c("../internals/fails"),a=c("../internals/to-indexed-object"),l=c("../internals/object-get-own-property-descriptor").f,c=c("../internals/descriptors"),m=m(function(){l(1)});o({target:"Object",stat:!0,forced:!c||m,sham:!c},{getOwnPropertyDescriptor:function(p,u){return l(a(p),u)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":132}],174:[function(l,i,s){var o=l("../internals/export"),a=l("../internals/fails"),l=l("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:a(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:l})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],175:[function(m,i,s){var o=m("../internals/export"),a=m("../internals/fails"),l=m("../internals/to-object"),c=m("../internals/object-get-prototype-of"),m=m("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:a(function(){c(1)}),sham:!m},{getPrototypeOf:function(p){return c(l(p))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(r,i,s){var o=r("../internals/export"),a=r("../internals/to-object"),l=r("../internals/object-keys");o({target:"Object",stat:!0,forced:r("../internals/fails")(function(){l(1)})},{keys:function(c){return l(a(c))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(l,i,s){var o=l("../internals/to-string-tag-support"),a=l("../internals/redefine"),l=l("../internals/object-to-string");o||a(Object.prototype,"toString",l,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(Se,i,s){var o,a,l,c,m=Se("../internals/export"),p=Se("../internals/is-pure"),u=Se("../internals/global"),d=Se("../internals/get-built-in"),h=Se("../internals/native-promise-constructor"),f=Se("../internals/redefine"),g=Se("../internals/redefine-all"),y=Se("../internals/set-to-string-tag"),Z=Se("../internals/set-species"),I=Se("../internals/is-object"),G=Se("../internals/a-function"),R=Se("../internals/an-instance"),C=Se("../internals/classof-raw"),V=Se("../internals/inspect-source"),x=Se("../internals/iterate"),w=Se("../internals/check-correctness-of-iteration"),k=Se("../internals/species-constructor"),A=Se("../internals/task").set,Y=Se("../internals/microtask"),U=Se("../internals/promise-resolve"),M=Se("../internals/host-report-errors"),j=Se("../internals/new-promise-capability"),K=Se("../internals/perform"),P=Se("../internals/internal-state"),J=Se("../internals/is-forced"),ke=Se("../internals/well-known-symbol"),E=Se("../internals/engine-v8-version"),O=ke("species"),D="Promise",le=P.get,X=P.set,T=P.getterFor(D),N=h,z=u.TypeError,te=u.document,ne=u.process,ee=d("fetch"),oe=j.f,ie=oe,ce=C(ne)=="process",he=!!(te&&te.createEvent&&u.dispatchEvent),q="unhandledrejection",me="rejectionhandled",ge=1,be=2,pe=1,xe=2,Se=J(D,function(){var Ae,ve;return V(N)===String(N)&&(E===66||!ce&&typeof PromiseRejectionEvent!="function")?!0:!(!p||N.prototype.finally)||!(51<=E&&/native code/.test(N))&&(ve=function(_){_(function(){},function(){})},((Ae=N.resolve(1)).constructor={})[O]=ve,!(Ae.then(function(){})instanceof ve))}),ke=Se||!w(function(Ae){N.all(Ae).catch(function(){})}),We=function(Ae){var ve;return!(!I(Ae)||typeof(ve=Ae.then)!="function")&&ve},Ke=function(Ae,ve,_){var $;ve.notified||(ve.notified=!0,$=ve.reactions,Y(function(){for(var H,re,ye=ve.value,Ge=ve.state==ge,Le=0;$.length>Le;){var Me,He,Je,De=$[Le++],Rt=Ge?De.ok:De.fail,bt=De.resolve,st=De.reject,It=De.domain;try{Rt?(Ge||(ve.rejection===xe&&function(yt,Ot){A.call(u,function(){ce?ne.emit("rejectionHandled",yt):$e(me,yt,Ot.value)})}(Ae,ve),ve.rejection=pe),Rt===!0?Me=ye:(It&&It.enter(),Me=Rt(ye),It&&(It.exit(),Je=!0)),Me===De.promise?st(z("Promise-chain cycle")):(He=We(Me))?He.call(Me,bt,st):bt(Me)):st(ye)}catch(yt){It&&!Je&&It.exit(),st(yt)}}ve.reactions=[],ve.notified=!1,_&&!ve.rejection&&(H=Ae,re=ve,A.call(u,function(){var yt=re.value,Ot=ze(re);if(Ot&&(Ot=K(function(){ce?ne.emit("unhandledRejection",yt,H):$e(q,H,yt)}),re.rejection=ce||ze(re)?xe:pe,Ot.error))throw Ot.value}))}))},$e=function(Ae,ve,_){var $;he?(($=te.createEvent("Event")).promise=ve,$.reason=_,$.initEvent(Ae,!1,!0),u.dispatchEvent($)):$={promise:ve,reason:_},(ve=u["on"+Ae])?ve($):Ae===q&&M("Unhandled promise rejection",_)},ze=function(Ae){return Ae.rejection!==pe&&!Ae.parent},it=function(Ae,ve,_,$){return function(H){Ae(ve,_,H,$)}},qe=function(Ae,ve,_,$){ve.done||(ve.done=!0,(ve=$||ve).value=_,ve.state=be,Ke(Ae,ve,!0))},Ze=function(Ae,ve,_,$){if(!ve.done){ve.done=!0,$&&(ve=$);try{if(Ae===_)throw z("Promise can't be resolved itself");var H=We(_);H?Y(function(){var re={done:!1};try{H.call(_,it(Ze,Ae,re,ve),it(qe,Ae,re,ve))}catch(ye){qe(Ae,re,ye,ve)}}):(ve.value=_,ve.state=ge,Ke(Ae,ve,!1))}catch(re){qe(Ae,{done:!1},re,ve)}}};Se&&(N=function(Ae){R(this,N,D),G(Ae),o.call(this);var ve=le(this);try{Ae(it(Ze,this,ve),it(qe,this,ve))}catch(_){qe(this,ve,_)}},(o=function(Ae){X(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g(N.prototype,{then:function(Ae,ve){var _=T(this),$=oe(k(this,N));return $.ok=typeof Ae!="function"||Ae,$.fail=typeof ve=="function"&&ve,$.domain=ce?ne.domain:void 0,_.parent=!0,_.reactions.push($),_.state!=0&&Ke(this,_,!1),$.promise},catch:function(Ae){return this.then(void 0,Ae)}}),a=function(){var Ae=new o,ve=le(Ae);this.promise=Ae,this.resolve=it(Ze,Ae,ve),this.reject=it(qe,Ae,ve)},j.f=oe=function(Ae){return Ae===N||Ae===l?new a:ie(Ae)},p||typeof h!="function"||(c=h.prototype.then,f(h.prototype,"then",function(Ae,ve){var _=this;return new N(function($,H){c.call(_,$,H)}).then(Ae,ve)},{unsafe:!0}),typeof ee=="function"&&m({global:!0,enumerable:!0,forced:!0},{fetch:function(Ae){return U(N,ee.apply(u,arguments))}}))),m({global:!0,wrap:!0,forced:Se},{Promise:N}),y(N,D,!1,!0),Z(D),l=d(D),m({target:D,stat:!0,forced:Se},{reject:function(Ae){var ve=oe(this);return ve.reject.call(void 0,Ae),ve.promise}}),m({target:D,stat:!0,forced:p||Se},{resolve:function(Ae){return U(p&&this===l?N:this,Ae)}}),m({target:D,stat:!0,forced:ke},{all:function(Ae){var ve=this,_=oe(ve),$=_.resolve,H=_.reject,re=K(function(){var ye=G(ve.resolve),Ge=[],Le=0,Me=1;x(Ae,function(He){var Je=Le++,De=!1;Ge.push(void 0),Me++,ye.call(ve,He).then(function(Rt){De||(De=!0,Ge[Je]=Rt,--Me||$(Ge))},H)}),--Me||$(Ge)});return re.error&&H(re.value),_.promise},race:function(Ae){var ve=this,_=oe(ve),$=_.reject,H=K(function(){var re=G(ve.resolve);x(Ae,function(ye){re.call(ve,ye).then(_.resolve,$)})});return H.error&&$(H.value),_.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(u,i,s){var o=u("../internals/export"),g=u("../internals/get-built-in"),a=u("../internals/a-function"),l=u("../internals/an-object"),c=u("../internals/is-object"),m=u("../internals/object-create"),p=u("../internals/function-bind"),u=u("../internals/fails"),d=g("Reflect","construct"),h=u(function(){function y(){}return!(d(function(){},[],y)instanceof y)}),f=!u(function(){d(function(){})}),g=h||f;o({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(y,Z){a(y),l(Z);var I=arguments.length<3?y:a(arguments[2]);if(f&&!h)return d(y,Z,I);if(y==I){switch(Z.length){case 0:return new y;case 1:return new y(Z[0]);case 2:return new y(Z[0],Z[1]);case 3:return new y(Z[0],Z[1],Z[2]);case 4:return new y(Z[0],Z[1],Z[2],Z[3])}var G=[null];return G.push.apply(G,Z),new(p.apply(y,G))}return G=I.prototype,I=m(c(G)?G:Object.prototype),G=Function.apply.call(y,I,Z),c(G)?G:I}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(r,i,s){var o=r("../internals/descriptors"),a=r("../internals/global"),l=r("../internals/is-forced"),c=r("../internals/inherit-if-required"),m=r("../internals/object-define-property").f,p=r("../internals/object-get-own-property-names").f,u=r("../internals/is-regexp"),d=r("../internals/regexp-flags"),h=r("../internals/regexp-sticky-helpers"),f=r("../internals/redefine"),g=r("../internals/fails"),y=r("../internals/internal-state").set,Z=r("../internals/set-species"),I=r("../internals/well-known-symbol")("match"),G=a.RegExp,R=G.prototype,C=/a/g,V=/a/g,x=new G(C)!==C,w=h.UNSUPPORTED_Y;if(o&&l("RegExp",!x||w||g(function(){return V[I]=!1,G(C)!=C||G(V)==V||G(C,"i")!="/a/i"}))){for(var k=function(U,M){var j,K=this instanceof k,P=u(U),J=M===void 0;return!K&&P&&U.constructor===k&&J?U:(x?P&&!J&&(U=U.source):U instanceof k&&(J&&(M=d.call(U)),U=U.source),w&&(j=!!M&&-1<M.indexOf("y"))&&(M=M.replace(/y/g,"")),P=c(x?new G(U,M):G(U,M),K?this:R,k),w&&j&&y(P,{sticky:j}),P)},A=p(G),Y=0;A.length>Y;)(function(U){U in k||m(k,U,{configurable:!0,get:function(){return G[U]},set:function(M){G[U]=M}})})(A[Y++]);(R.constructor=k).prototype=R,f(a,"RegExp",k)}Z("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(a,i,s){var o=a("../internals/export"),a=a("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},{"../internals/export":50,"../internals/regexp-exec":110}],182:[function(c,i,s){var o=c("../internals/redefine"),a=c("../internals/an-object"),u=c("../internals/fails"),l=c("../internals/regexp-flags"),c="toString",m=RegExp.prototype,p=m[c],u=u(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),d=p.name!=c;(u||d)&&o(RegExp.prototype,c,function(){var h=a(this),f=String(h.source),g=h.flags;return"/"+f+"/"+String(g===void 0&&h instanceof RegExp&&!("flags"in m)?l.call(h):g)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(a,i,s){var o=a("../internals/collection"),a=a("../internals/collection-strong");i.exports=o("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},a)},{"../internals/collection":32,"../internals/collection-strong":30}],184:[function(p,i,s){var o=p("../internals/export"),a=p("../internals/object-get-own-property-descriptor").f,l=p("../internals/to-length"),c=p("../internals/not-a-regexp"),m=p("../internals/require-object-coercible"),h=p("../internals/correct-is-regexp-logic"),p=p("../internals/is-pure"),u="".endsWith,d=Math.min,h=h("endsWith");o({target:"String",proto:!0,forced:!!(p||h||!(o=a(String.prototype,"endsWith"))||o.writable)&&!h},{endsWith:function(f){var g=String(m(this)),y=(c(f),1<arguments.length?arguments[1]:void 0),Z=l(g.length),y=y===void 0?Z:d(l(y),Z),Z=String(f);return u?u.call(g,Z,y):g.slice(y-Z.length,y)===Z}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(r,i,s){var o=r("../internals/export"),a=r("../internals/not-a-regexp"),l=r("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(c){return!!~String(l(this)).indexOf(a(c),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(l,i,s){var o=l("../internals/string-multibyte").charAt,a=l("../internals/internal-state"),l=l("../internals/define-iterator"),c="String Iterator",m=a.set,p=a.getterFor(c);l(String,"String",function(u){m(this,{type:c,string:String(u),index:0})},function(){var u=p(this),d=u.string,h=u.index;return h>=d.length?{value:void 0,done:!0}:(d=o(d,h),u.index+=d.length,{value:d,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(r,i,s){var o=r("../internals/fix-regexp-well-known-symbol-logic"),a=r("../internals/an-object"),l=r("../internals/to-length"),c=r("../internals/require-object-coercible"),m=r("../internals/advance-string-index"),p=r("../internals/regexp-exec-abstract");o("match",1,function(u,d,h){return[function(f){var g=c(this),y=f==null?void 0:f[u];return y!==void 0?y.call(f,g):new RegExp(f)[u](String(g))},function(f){var g=h(d,f,this);if(g.done)return g.value;var y=a(f),Z=String(this);if(!y.global)return p(y,Z);for(var I=y.unicode,G=[],R=y.lastIndex=0;(C=p(y,Z))!==null;){var C=String(C[0]);(G[R]=C)===""&&(y.lastIndex=m(Z,l(y.lastIndex),I)),R++}return R===0?null:G}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(r,i,s){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":125}],189:[function(r,i,s){var o=r("../internals/fix-regexp-well-known-symbol-logic"),a=r("../internals/an-object"),l=r("../internals/to-object"),c=r("../internals/to-length"),m=r("../internals/to-integer"),p=r("../internals/require-object-coercible"),u=r("../internals/advance-string-index"),d=r("../internals/regexp-exec-abstract"),h=Math.max,f=Math.min,g=Math.floor,y=/\$([$&'`]|\d\d?|<[^>]*>)/g,Z=/\$([$&'`]|\d\d?)/g;o("replace",2,function(I,G,R,C){var V=C.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=C.REPLACE_KEEPS_$0,w=V?"$":"$0";return[function(k,A){var Y=p(this),U=k==null?void 0:k[I];return U!==void 0?U.call(k,Y,A):G.call(String(Y),k,A)},function(k,A){if(!V&&x||typeof A=="string"&&A.indexOf(w)===-1){var Y=R(G,k,this,A);if(Y.done)return Y.value}for(var U,M=a(k),j=String(this),K=typeof A=="function",P=(K||(A=String(A)),M.global),J=(P&&(U=M.unicode,M.lastIndex=0),[]);(X=d(M,j))!==null&&(J.push(X),P);)String(X[0])===""&&(M.lastIndex=u(j,c(M.lastIndex),U));for(var E,O="",D=0,le=0;le<J.length;le++){for(var X=J[le],T=String(X[0]),N=h(f(m(X.index),j.length),0),z=[],te=1;te<X.length;te++)z.push((E=X[te])===void 0?E:String(E));var ne=X.groups,ee=K?(ee=[T].concat(z,N,j),ne!==void 0&&ee.push(ne),String(A.apply(void 0,ee))):function(oe,ie,ce,he,q,me){var ge=ce+oe.length,be=he.length,pe=Z;return q!==void 0&&(q=l(q),pe=y),G.call(me,pe,function(xe,Se){var ke;switch(Se.charAt(0)){case"$":return"$";case"&":return oe;case"`":return ie.slice(0,ce);case"'":return ie.slice(ge);case"<":ke=q[Se.slice(1,-1)];break;default:var We,Ke=+Se;if(Ke==0)return xe;if(be<Ke)return(We=g(Ke/10))!==0&&We<=be?he[We-1]===void 0?Se.charAt(1):he[We-1]+Se.charAt(1):xe;ke=he[Ke-1]}return ke===void 0?"":ke})}(T,j,N,z,ne,A);D<=N&&(O+=j.slice(D,N)+ee,D=N+T.length)}return O+j.slice(D)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(r,i,s){var o=r("../internals/fix-regexp-well-known-symbol-logic"),a=r("../internals/an-object"),l=r("../internals/require-object-coercible"),c=r("../internals/same-value"),m=r("../internals/regexp-exec-abstract");o("search",1,function(p,u,d){return[function(h){var f=l(this),g=h==null?void 0:h[p];return g!==void 0?g.call(h,f):new RegExp(h)[p](String(f))},function(h){var f,g=d(u,h,this);return g.done?g.value:(g=a(h),h=String(this),f=g.lastIndex,c(f,0)||(g.lastIndex=0),h=m(g,h),c(g.lastIndex,f)||(g.lastIndex=f),h===null?-1:h.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(f,i,s){var o=f("../internals/fix-regexp-well-known-symbol-logic"),a=f("../internals/is-regexp"),l=f("../internals/an-object"),c=f("../internals/require-object-coercible"),m=f("../internals/species-constructor"),p=f("../internals/advance-string-index"),u=f("../internals/to-length"),d=f("../internals/regexp-exec-abstract"),h=f("../internals/regexp-exec"),f=f("../internals/fails"),g=[].push,y=Math.min,Z=4294967295,I=!f(function(){return!RegExp(Z,"y")});o("split",2,function(G,R,C){var V="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(x,w){var k=String(c(this)),A=w===void 0?Z:w>>>0;if(A==0)return[];if(x===void 0)return[k];if(!a(x))return R.call(k,x,A);for(var Y,U,M,j=[],w=(x.ignoreCase?"i":"")+(x.multiline?"m":"")+(x.unicode?"u":"")+(x.sticky?"y":""),K=0,P=new RegExp(x.source,w+"g");(Y=h.call(P,k))&&!(K<(U=P.lastIndex)&&(j.push(k.slice(K,Y.index)),1<Y.length&&Y.index<k.length&&g.apply(j,Y.slice(1)),M=Y[0].length,K=U,j.length>=A));)P.lastIndex===Y.index&&P.lastIndex++;return K===k.length?!M&&P.test("")||j.push(""):j.push(k.slice(K)),j.length>A?j.slice(0,A):j}:"0".split(void 0,0).length?function(x,w){return x===void 0&&w===0?[]:R.call(this,x,w)}:R;return[function(x,w){var k=c(this),A=x==null?void 0:x[G];return A!==void 0?A.call(x,k,w):V.call(String(k),x,w)},function(Y,w){var k=C(V,Y,this,w,V!==R);if(k.done)return k.value;var k=l(Y),A=String(this),Y=m(k,RegExp),U=k.unicode,M=(k.ignoreCase?"i":"")+(k.multiline?"m":"")+(k.unicode?"u":"")+(I?"y":"g"),j=new Y(I?k:"^(?:"+k.source+")",M),K=w===void 0?Z:w>>>0;if(K==0)return[];if(A.length===0)return d(j,A)===null?[A]:[];for(var P=0,J=0,E=[];J<A.length;){j.lastIndex=I?J:0;var O,D=d(j,I?A:A.slice(J));if(D===null||(O=y(u(j.lastIndex+(I?0:J)),A.length))===P)J=p(A,J,U);else{if(E.push(A.slice(P,J)),E.length===K)return E;for(var le=1;le<=D.length-1;le++)if(E.push(D[le]),E.length===K)return E;J=P=O}}return E.push(A.slice(P)),E}]},!I)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(r,i,s){var o=r("../internals/export"),a=r("../internals/create-html");o({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return a(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],193:[function(r,i,s){var o=r("../internals/export"),a=r("../internals/string-trim").trim;o({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return a(this)}})},{"../internals/export":50,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(y,i,s){var o,a,l,c,m,p=y("../internals/export"),u=y("../internals/descriptors"),d=y("../internals/global"),h=y("../internals/has"),f=y("../internals/is-object"),g=y("../internals/object-define-property").f,y=y("../internals/copy-constructor-properties"),Z=d.Symbol;!u||typeof Z!="function"||"description"in Z.prototype&&Z().description===void 0||(o={},y(a=function(){var I=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),G=this instanceof a?new Z(I):I===void 0?Z():Z(I);return I===""&&(o[G]=!0),G},Z),(d=a.prototype=Z.prototype).constructor=a,l=d.toString,c=String(Z("test"))=="Symbol(test)",m=/^Symbol\((.*)\)[^)]+$/,g(d,"description",{configurable:!0,get:function(){var I=f(this)?this.valueOf():this,G=l.call(I);return h(o,I)?"":(I=c?G.slice(7,-1):G.replace(m,"$1"))===""?void 0:I}}),p({global:!0,forced:!0},{Symbol:a}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(r,i,s){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],196:[function(ie,i,s){function o(H,re){var ye=ke[H]=k(me[oe]);return ce(ye,{type:ee,tag:H,description:re}),h||(ye.description=re),ye}function a(H,Ge){R(H);var ye=V(Ge),Ge=A(ye).concat($(ye));return te(Ge,function(Le){h&&!_.call(ye,Le)||ve(H,Le,ye[Le])}),H}function l(Ge,Le){var ye,Ge=V(Ge),Le=x(Le,!0);if(Ge!==q||!Z(ke,Le)||Z(We,Le))return!(ye=be(Ge,Le))||!Z(ke,Le)||Z(Ge,ne)&&Ge[ne][Le]||(ye.enumerable=!0),ye}function c(re){var re=xe(V(re)),ye=[];return te(re,function(Ge){Z(ke,Ge)||Z(D,Ge)||ye.push(Ge)}),ye}var m=ie("../internals/export"),p=ie("../internals/global"),u=ie("../internals/get-built-in"),d=ie("../internals/is-pure"),h=ie("../internals/descriptors"),f=ie("../internals/native-symbol"),g=ie("../internals/use-symbol-as-uid"),y=ie("../internals/fails"),Z=ie("../internals/has"),I=ie("../internals/is-array"),G=ie("../internals/is-object"),R=ie("../internals/an-object"),C=ie("../internals/to-object"),V=ie("../internals/to-indexed-object"),x=ie("../internals/to-primitive"),w=ie("../internals/create-property-descriptor"),k=ie("../internals/object-create"),A=ie("../internals/object-keys"),Y=ie("../internals/object-get-own-property-names"),U=ie("../internals/object-get-own-property-names-external"),M=ie("../internals/object-get-own-property-symbols"),j=ie("../internals/object-get-own-property-descriptor"),K=ie("../internals/object-define-property"),P=ie("../internals/object-property-is-enumerable"),J=ie("../internals/create-non-enumerable-property"),E=ie("../internals/redefine"),O=ie("../internals/shared"),ze=ie("../internals/shared-key"),D=ie("../internals/hidden-keys"),le=ie("../internals/uid"),X=ie("../internals/well-known-symbol"),T=ie("../internals/well-known-symbol-wrapped"),N=ie("../internals/define-well-known-symbol"),z=ie("../internals/set-to-string-tag"),it=ie("../internals/internal-state"),te=ie("../internals/array-iteration").forEach,ne=ze("hidden"),ee="Symbol",oe="prototype",ie=X("toPrimitive"),ce=it.set,he=it.getterFor(ee),q=Object[oe],me=p.Symbol,ge=u("JSON","stringify"),be=j.f,pe=K.f,xe=U.f,Se=P.f,ke=O("symbols"),We=O("op-symbols"),Ke=O("string-to-symbol-registry"),$e=O("symbol-to-string-registry"),ze=O("wks"),it=p.QObject,qe=!it||!it[oe]||!it[oe].findChild,Ze=h&&y(function(){return k(pe({},"a",{get:function(){return pe(this,"a",{value:7}).a}})).a!=7})?function(H,re,ye){var Ge=be(q,re);Ge&&delete q[re],pe(H,re,ye),Ge&&H!==q&&pe(q,re,Ge)}:pe,Ae=g?function(H){return typeof H=="symbol"}:function(H){return Object(H)instanceof me},ve=function(H,re,ye){return H===q&&ve(We,re,ye),R(H),re=x(re,!0),R(ye),(Z(ke,re)?(ye.enumerable?(Z(H,ne)&&H[ne][re]&&(H[ne][re]=!1),ye=k(ye,{enumerable:w(0,!1)})):(Z(H,ne)||pe(H,ne,w(1,{})),H[ne][re]=!0),Ze):pe)(H,re,ye)},_=function(re){var re=x(re,!0),ye=Se.call(this,re);return!(this===q&&Z(ke,re)&&!Z(We,re))&&(!(ye||!Z(this,re)||!Z(ke,re)||Z(this,ne)&&this[ne][re])||ye)},$=function(ye){var re=ye===q,ye=xe(re?We:V(ye)),Ge=[];return te(ye,function(Le){!Z(ke,Le)||re&&!Z(q,Le)||Ge.push(ke[Le])}),Ge};f||(E((me=function(){if(this instanceof me)throw TypeError("Symbol is not a constructor");var H=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,re=le(H),ye=function(Ge){this===q&&ye.call(We,Ge),Z(this,ne)&&Z(this[ne],re)&&(this[ne][re]=!1),Ze(this,re,w(1,Ge))};return h&&qe&&Ze(q,re,{configurable:!0,set:ye}),o(re,H)})[oe],"toString",function(){return he(this).tag}),E(me,"withoutSetter",function(H){return o(le(H),H)}),P.f=_,K.f=ve,j.f=l,Y.f=U.f=c,M.f=$,T.f=function(H){return o(X(H),H)},h&&(pe(me[oe],"description",{configurable:!0,get:function(){return he(this).description}}),d||E(q,"propertyIsEnumerable",_,{unsafe:!0}))),m({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:me}),te(A(ze),function(H){N(H)}),m({target:ee,stat:!0,forced:!f},{for:function(ye){var re,ye=String(ye);return Z(Ke,ye)?Ke[ye]:(re=me(ye),Ke[ye]=re,$e[re]=ye,re)},keyFor:function(H){if(!Ae(H))throw TypeError(H+" is not a symbol");if(Z($e,H))return $e[H]},useSetter:function(){qe=!0},useSimple:function(){qe=!1}}),m({target:"Object",stat:!0,forced:!f,sham:!h},{create:function(H,re){return re===void 0?k(H):a(k(H),re)},defineProperty:ve,defineProperties:a,getOwnPropertyDescriptor:l}),m({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:c,getOwnPropertySymbols:$}),m({target:"Object",stat:!0,forced:y(function(){M.f(1)})},{getOwnPropertySymbols:function(H){return M.f(C(H))}}),ge&&m({target:"JSON",stat:!0,forced:!f||y(function(){var H=me();return ge([H])!="[null]"||ge({a:H})!="{}"||ge(Object(H))!="{}"})},{stringify:function(H,re,ye){for(var Ge,Le=[H],Me=1;Me<arguments.length;)Le.push(arguments[Me++]);if((G(Ge=re)||H!==void 0)&&!Ae(H))return I(re)||(re=function(He,Je){if(typeof Ge=="function"&&(Je=Ge.call(this,He,Je)),!Ae(Je))return Je}),Le[1]=re,ge.apply(null,Le)}}),me[oe][ie]||J(me[oe],ie,me[oe].valueOf),z(me,ee),D[ne]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-copy-within"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",function(c,m){return a.call(l(this),c,m,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").every,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",function(c){return a(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-fill"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",function(c){return a.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").filter,l=r("../internals/species-constructor"),c=o.aTypedArray,m=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("filter",function(p){for(var u=a(c(this),p,1<arguments.length?arguments[1]:void 0),p=l(this,this.constructor),d=0,h=u.length,f=new(m(p))(h);d<h;)f[d]=u[d++];return f})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").findIndex,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",function(c){return a(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").find,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",function(c){return a(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(r,i,s){r("../internals/typed-array-constructor")("Float32",function(o){return function(a,l,c){return o(this,a,l,c)}})},{"../internals/typed-array-constructor":140}],204:[function(r,i,s){r("../internals/typed-array-constructor")("Float64",function(o){return function(a,l,c){return o(this,a,l,c)}})},{"../internals/typed-array-constructor":140}],205:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").forEach,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",function(c){a(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-includes").includes,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",function(c){return a(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-includes").indexOf,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",function(c){return a(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(r,i,s){r("../internals/typed-array-constructor")("Int16",function(o){return function(a,l,c){return o(this,a,l,c)}})},{"../internals/typed-array-constructor":140}],209:[function(r,i,s){r("../internals/typed-array-constructor")("Int32",function(o){return function(a,l,c){return o(this,a,l,c)}})},{"../internals/typed-array-constructor":140}],210:[function(a,i,s){function o(){return l.call(p(this))}var h=a("../internals/global"),d=a("../internals/array-buffer-view-core"),u=a("../modules/es.array.iterator"),a=a("../internals/well-known-symbol")("iterator"),h=h.Uint8Array,l=u.values,c=u.keys,m=u.entries,p=d.aTypedArray,u=d.exportTypedArrayMethod,d=h&&h.prototype[a],h=!!d&&(d.name=="values"||d.name==null);u("entries",function(){return m.call(p(this))}),u("keys",function(){return c.call(p(this))}),u("values",o,!h),u(a,o,!h)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(a,i,s){var a=a("../internals/array-buffer-view-core"),o=a.aTypedArray,a=a.exportTypedArrayMethod,l=[].join;a("join",function(c){return l.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-last-index-of"),l=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",function(c){return a.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").map,l=r("../internals/species-constructor"),c=o.aTypedArray,m=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("map",function(p){return a(c(this),p,1<arguments.length?arguments[1]:void 0,function(u,d){return new(m(l(u,u.constructor)))(d)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-reduce").right,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",function(c){return a(l(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-reduce").left,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",function(c){return a(l(this),c,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(a,i,s){var a=a("../internals/array-buffer-view-core"),o=a.aTypedArray,a=a.exportTypedArrayMethod,l=Math.floor;a("reverse",function(){for(var c,m=o(this).length,p=l(m/2),u=0;u<p;)c=this[u],this[u++]=this[--m],this[m]=c;return this})},{"../internals/array-buffer-view-core":12}],217:[function(m,i,s){var o=m("../internals/array-buffer-view-core"),a=m("../internals/to-length"),l=m("../internals/to-offset"),c=m("../internals/to-object"),m=m("../internals/fails"),p=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",function(u){p(this);var d=l(1<arguments.length?arguments[1]:void 0,1),h=this.length,f=c(u),g=a(f.length),y=0;if(h<g+d)throw RangeError("Wrong length");for(;y<g;)this[d+y]=f[y++]},m(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(a,i,s){var m=a("../internals/array-buffer-view-core"),o=a("../internals/species-constructor"),a=a("../internals/fails"),l=m.aTypedArray,c=m.aTypedArrayConstructor,m=m.exportTypedArrayMethod,p=[].slice;m("slice",function(u,d){for(var h=p.call(l(this),u,d),u=o(this,this.constructor),f=0,g=h.length,y=new(c(u))(g);f<g;)y[f]=h[f++];return y},a(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],219:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").some,l=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",function(c){return a(l(this),c,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(a,i,s){var a=a("../internals/array-buffer-view-core"),o=a.aTypedArray,a=a.exportTypedArrayMethod,l=[].sort;a("sort",function(c){return l.call(o(this),c)})},{"../internals/array-buffer-view-core":12}],221:[function(r,i,s){var o=r("../internals/array-buffer-view-core"),a=r("../internals/to-length"),l=r("../internals/to-absolute-index"),c=r("../internals/species-constructor"),m=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",function(f,u){var d=m(this),h=d.length,f=l(f,h);return new(c(d,d.constructor))(d.buffer,d.byteOffset+f*d.BYTES_PER_ELEMENT,a((u===void 0?h:l(u,h))-f))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(a,i,s){var m=a("../internals/global"),o=a("../internals/array-buffer-view-core"),a=a("../internals/fails"),l=m.Int8Array,c=o.aTypedArray,m=o.exportTypedArrayMethod,p=[].toLocaleString,u=[].slice,d=!!l&&a(function(){p.call(new l(1))});m("toLocaleString",function(){return p.apply(d?u.call(c(this)):c(this),arguments)},a(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!a(function(){l.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],223:[function(a,i,s){var o=a("../internals/array-buffer-view-core").exportTypedArrayMethod,m=a("../internals/fails"),a=a("../internals/global").Uint8Array,a=a&&a.prototype||{},l=[].toString,c=[].join,m=(m(function(){l.call({})})&&(l=function(){return c.call(this)}),a.toString!=l);o("toString",l,m)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],224:[function(r,i,s){r("../internals/typed-array-constructor")("Uint16",function(o){return function(a,l,c){return o(this,a,l,c)}})},{"../internals/typed-array-constructor":140}],225:[function(r,i,s){r("../internals/typed-array-constructor")("Uint32",function(o){return function(a,l,c){return o(this,a,l,c)}})},{"../internals/typed-array-constructor":140}],226:[function(r,i,s){r("../internals/typed-array-constructor")("Uint8",function(o){return function(a,l,c){return o(this,a,l,c)}})},{"../internals/typed-array-constructor":140}],227:[function(r,i,s){r("../internals/typed-array-constructor")("Uint8",function(o){return function(a,l,c){return o(this,a,l,c)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(Z,R,s){function o(C){return function(){return C(this,arguments.length?arguments[0]:void 0)}}var a,l,c,m,p,I=Z("../internals/global"),u=Z("../internals/redefine-all"),d=Z("../internals/internal-metadata"),h=Z("../internals/collection"),f=Z("../internals/collection-weak"),g=Z("../internals/is-object"),y=Z("../internals/internal-state").enforce,Z=Z("../internals/native-weak-map"),I=!I.ActiveXObject&&"ActiveXObject"in I,G=Object.isExtensible,R=R.exports=h("WeakMap",o,f);Z&&I&&(a=f.getConstructor(o,"WeakMap",!0),d.REQUIRED=!0,h=R.prototype,l=h.delete,c=h.has,m=h.get,p=h.set,u(h,{delete:function(C){var V;return g(C)&&!G(C)?((V=y(this)).frozen||(V.frozen=new a),l.call(this,C)||V.frozen.delete(C)):l.call(this,C)},has:function(C){var V;return g(C)&&!G(C)?((V=y(this)).frozen||(V.frozen=new a),c.call(this,C)||V.frozen.has(C)):c.call(this,C)},get:function(C){var V;return!g(C)||G(C)||((V=y(this)).frozen||(V.frozen=new a),c.call(this,C))?m.call(this,C):V.frozen.get(C)},set:function(C,V){var x;return!g(C)||G(C)||((x=y(this)).frozen||(x.frozen=new a),c.call(this,C))?p.call(this,C,V):x.frozen.set(C,V),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],229:[function(r,i,s){var o,a=r("../internals/global"),l=r("../internals/dom-iterables"),c=r("../internals/array-for-each"),m=r("../internals/create-non-enumerable-property");for(o in l){var p=a[o],p=p&&p.prototype;if(p&&p.forEach!==c)try{m(p,"forEach",c)}catch{p.forEach=c}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],230:[function(p,i,s){var o,a=p("../internals/global"),l=p("../internals/dom-iterables"),c=p("../modules/es.array.iterator"),m=p("../internals/create-non-enumerable-property"),p=p("../internals/well-known-symbol"),u=p("iterator"),d=p("toStringTag"),h=c.values;for(o in l){var f=a[o],g=f&&f.prototype;if(g){if(g[u]!==h)try{m(g,u,h)}catch{g[u]=h}if(g[d]||m(g,d,o),l[o]){for(var y in c)if(g[y]!==c[y])try{m(g,y,c[y])}catch{g[y]=c[y]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(ne,i,s){ne("../modules/es.array.iterator");function o(ee){try{return decodeURIComponent(ee)}catch{return ee}}function a(ee){return N[ee]}function l(ee){return encodeURIComponent(ee).replace(T,a)}function c(ee){this.entries.length=0,z(this.entries,ee)}function m(ee,oe){if(ee<oe)throw TypeError("Not enough arguments")}function p(){I(this,p,K);var ee,oe,ie,ce,he,q,me,ge,be=0<arguments.length?arguments[0]:void 0,pe=[];if(J(this,{type:K,entries:pe,updateURL:function(){},updateSearchParams:c}),be!==void 0)if(x(be))if(typeof(ee=Y(be))=="function")for(ie=(oe=ee.call(be)).next;!(ce=ie.call(oe)).done;){if((q=(he=(ce=A(V(ce.value))).next).call(ce)).done||(me=he.call(ce)).done||!he.call(ce).done)throw TypeError("Expected sequence with length 2");pe.push({key:q.value+"",value:me.value+""})}else for(ge in be)G(be,ge)&&pe.push({key:ge,value:be[ge]+""});else z(pe,typeof be=="string"?be.charAt(0)==="?"?be.slice(1):be:be+"")}var u=ne("../internals/export"),j=ne("../internals/get-built-in"),d=ne("../internals/native-url"),h=ne("../internals/redefine"),f=ne("../internals/redefine-all"),g=ne("../internals/set-to-string-tag"),y=ne("../internals/create-iterator-constructor"),Z=ne("../internals/internal-state"),I=ne("../internals/an-instance"),G=ne("../internals/has"),R=ne("../internals/function-bind-context"),C=ne("../internals/classof"),V=ne("../internals/an-object"),x=ne("../internals/is-object"),w=ne("../internals/object-create"),k=ne("../internals/create-property-descriptor"),A=ne("../internals/get-iterator"),Y=ne("../internals/get-iterator-method"),ne=ne("../internals/well-known-symbol"),U=j("fetch"),M=j("Headers"),j=ne("iterator"),K="URLSearchParams",P=K+"Iterator",J=Z.set,E=Z.getterFor(K),O=Z.getterFor(P),D=/\+/g,le=Array(4),X=function(ee){var oe,ie=ee.replace(D," "),ce=4;try{return decodeURIComponent(ie)}catch{for(;ce;)ie=ie.replace((oe=ce--,le[oe-1]||(le[oe-1]=RegExp("((?:%[\\da-f]{2}){"+oe+"})","gi"))),o);return ie}},T=/[!'()~]|%20/g,N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},z=function(ee,oe){if(oe)for(var ie,ce=oe.split("&"),he=0;he<ce.length;)(ie=ce[he++]).length&&(ie=ie.split("="),ee.push({key:X(ie.shift()),value:X(ie.join("="))}))},te=y(function(ee,oe){J(this,{type:P,iterator:A(E(ee).entries),kind:oe})},"Iterator",function(){var oe=O(this),ee=oe.kind,oe=oe.iterator.next(),ie=oe.value;return oe.done||(oe.value=ee==="keys"?ie.key:ee==="values"?ie.value:[ie.key,ie.value]),oe}),ne=p.prototype;f(ne,{append:function(ee,oe){m(arguments.length,2);var ie=E(this);ie.entries.push({key:ee+"",value:oe+""}),ie.updateURL()},delete:function(ee){m(arguments.length,1);for(var oe=E(this),ie=oe.entries,ce=ee+"",he=0;he<ie.length;)ie[he].key===ce?ie.splice(he,1):he++;oe.updateURL()},get:function(ee){m(arguments.length,1);for(var oe=E(this).entries,ie=ee+"",ce=0;ce<oe.length;ce++)if(oe[ce].key===ie)return oe[ce].value;return null},getAll:function(ee){m(arguments.length,1);for(var oe=E(this).entries,ie=ee+"",ce=[],he=0;he<oe.length;he++)oe[he].key===ie&&ce.push(oe[he].value);return ce},has:function(ee){m(arguments.length,1);for(var oe=E(this).entries,ie=ee+"",ce=0;ce<oe.length;)if(oe[ce++].key===ie)return!0;return!1},set:function(ee,oe){m(arguments.length,1);for(var ie,ce=E(this),he=ce.entries,q=!1,me=ee+"",ge=oe+"",be=0;be<he.length;be++)(ie=he[be]).key===me&&(q?he.splice(be--,1):(q=!0,ie.value=ge));q||he.push({key:me,value:ge}),ce.updateURL()},sort:function(){for(var ee,oe,ie=E(this),ce=ie.entries,he=ce.slice(),q=ce.length=0;q<he.length;q++){for(ee=he[q],oe=0;oe<q;oe++)if(ce[oe].key>ee.key){ce.splice(oe,0,ee);break}oe===q&&ce.push(ee)}ie.updateURL()},forEach:function(ee){for(var oe,ie=E(this).entries,ce=R(ee,1<arguments.length?arguments[1]:void 0,3),he=0;he<ie.length;)ce((oe=ie[he++]).value,oe.key,this)},keys:function(){return new te(this,"keys")},values:function(){return new te(this,"values")},entries:function(){return new te(this,"entries")}},{enumerable:!0}),h(ne,j,ne.entries),h(ne,"toString",function(){for(var ee,oe=E(this).entries,ie=[],ce=0;ce<oe.length;)ee=oe[ce++],ie.push(l(ee.key)+"="+l(ee.value));return ie.join("&")},{enumerable:!0}),g(p,K),u({global:!0,forced:!d},{URLSearchParams:p}),d||typeof U!="function"||typeof M!="function"||u({global:!0,enumerable:!0,forced:!0},{fetch:function(he){var oe,ie,ce,he=[he];return 1<arguments.length&&(x(oe=arguments[1])&&(ie=oe.body,C(ie)===K&&((ce=oe.headers?new M(oe.headers):new M).has("content-type")||ce.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),oe=w(oe,{body:k(0,String(ie)),headers:k(0,ce)}))),he.push(oe)),U.apply(this,he)}}),i.exports={URLSearchParams:p,getState:E}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],232:[function(A,i,s){A("../modules/es.string.iterator");function o(de){var Ee,Qe,Ne,Vt;if(typeof de=="number"){for(Ee=[],Qe=0;Qe<4;Qe++)Ee.unshift(de%256),de=P(de/256);return Ee.join(".")}if(typeof de!="object")return de;for(Ee="",Ne=me(de),Qe=0;Qe<8;Qe++)Vt&&de[Qe]===0||(Vt=Vt&&!1,Ne===Qe?(Ee+=Qe?":":"::",Vt=!0):(Ee+=de[Qe].toString(16),Qe<7&&(Ee+=":")));return"["+Ee+"]"}function a(de){return!de.host||de.cannotBeABaseURL||de.scheme=="file"}function l(de,Ee,Qe,Ne){var Vt,Fe,kt,je=Qe||Ae,Xt=0,_e="",gr=!1,Lr=!1,mr=!1;for(Qe||(de.scheme="",de.username="",de.password="",de.host=null,de.port=null,de.path=[],de.query=null,de.fragment=null,de.cannotBeABaseURL=!1,Ee=Ee.replace(ce,"")),Ee=Ee.replace(he,""),Vt=C(Ee);Xt<=Vt.length;){switch(Fe=Vt[Xt],je){case Ae:if(!Fe||!X.test(Fe)){if(Qe)return O;je=_;continue}_e+=Fe.toLowerCase(),je=ve;break;case ve:if(Fe&&(T.test(Fe)||Fe=="+"||Fe=="-"||Fe=="."))_e+=Fe.toLowerCase();else{if(Fe!=":"){if(Qe)return O;_e="",je=_,Xt=0;continue}if(Qe&&(We(de)!=G(ke,_e)||_e=="file"&&(Ke(de)||de.port!==null)||de.scheme=="file"&&!de.host))return;if(de.scheme=_e,Qe)return void(We(de)&&ke[de.scheme]==de.port&&(de.port=null));_e="",de.scheme=="file"?je=Rt:We(de)&&Ne&&Ne.scheme==de.scheme?je=$:We(de)?je=Ge:Vt[Xt+1]=="/"?(je=H,Xt++):(de.cannotBeABaseURL=!0,de.path.push(""),je=Ot)}break;case _:if(!Ne||Ne.cannotBeABaseURL&&Fe!="#")return O;if(Ne.cannotBeABaseURL&&Fe=="#"){de.scheme=Ne.scheme,de.path=Ne.path.slice(),de.query=Ne.query,de.fragment="",de.cannotBeABaseURL=!0,je=vr;break}je=Ne.scheme=="file"?Rt:re;continue;case $:if(Fe!="/"||Vt[Xt+1]!="/"){je=re;continue}je=Le,Xt++;break;case H:if(Fe=="/"){je=Me;break}je=yt;continue;case re:if(de.scheme=Ne.scheme,Fe==p)de.username=Ne.username,de.password=Ne.password,de.host=Ne.host,de.port=Ne.port,de.path=Ne.path.slice(),de.query=Ne.query;else if(Fe=="/"||Fe=="\\"&&We(de))je=ye;else if(Fe=="?")de.username=Ne.username,de.password=Ne.password,de.host=Ne.host,de.port=Ne.port,de.path=Ne.path.slice(),de.query="",je=rn;else{if(Fe!="#"){de.username=Ne.username,de.password=Ne.password,de.host=Ne.host,de.port=Ne.port,de.path=Ne.path.slice(),de.path.pop(),je=yt;continue}de.username=Ne.username,de.password=Ne.password,de.host=Ne.host,de.port=Ne.port,de.path=Ne.path.slice(),de.query=Ne.query,de.fragment="",je=vr}break;case ye:if(!We(de)||Fe!="/"&&Fe!="\\"){if(Fe!="/"){de.username=Ne.username,de.password=Ne.password,de.host=Ne.host,de.port=Ne.port,je=yt;continue}je=Me}else je=Le;break;case Ge:if(je=Le,Fe!="/"||_e.charAt(Xt+1)!="/")continue;Xt++;break;case Le:if(Fe=="/"||Fe=="\\")break;je=Me;continue;case Me:if(Fe=="@"){gr&&(_e="%40"+_e);for(var gr=!0,Br=C(_e),vi=0;vi<Br.length;vi++){var Ln=Br[vi];Ln!=":"||mr?(Ln=Se(Ln,xe),mr?de.password+=Ln:de.username+=Ln):mr=!0}_e=""}else if(Fe==p||Fe=="/"||Fe=="?"||Fe=="#"||Fe=="\\"&&We(de)){if(gr&&_e=="")return E;Xt-=C(_e).length+1,_e="",je=He}else _e+=Fe;break;case He:case Je:if(Qe&&de.scheme=="file"){je=st;continue}if(Fe!=":"||Lr){if(Fe==p||Fe=="/"||Fe=="?"||Fe=="#"||Fe=="\\"&&We(de)){if(We(de)&&_e=="")return D;if(Qe&&_e==""&&(Ke(de)||de.port!==null))return;if(kt=q(de,_e))return kt;if(_e="",je=It,Qe)return;continue}Fe=="["?Lr=!0:Fe=="]"&&(Lr=!1),_e+=Fe}else{if(_e=="")return D;if(kt=q(de,_e))return kt;if(_e="",je=De,Qe==Je)return}break;case De:if(!N.test(Fe)){if(Fe==p||Fe=="/"||Fe=="?"||Fe=="#"||Fe=="\\"&&We(de)||Qe){if(_e!=""){var Gi=parseInt(_e,10);if(65535<Gi)return le;de.port=We(de)&&Gi===ke[de.scheme]?null:Gi,_e=""}if(Qe)return;je=It;continue}return le}_e+=Fe;break;case Rt:if(de.scheme="file",Fe=="/"||Fe=="\\")je=bt;else{if(!Ne||Ne.scheme!="file"){je=yt;continue}if(Fe==p)de.host=Ne.host,de.path=Ne.path.slice(),de.query=Ne.query;else if(Fe=="?")de.host=Ne.host,de.path=Ne.path.slice(),de.query="",je=rn;else{if(Fe!="#"){ze(Vt.slice(Xt).join(""))||(de.host=Ne.host,de.path=Ne.path.slice(),it(de)),je=yt;continue}de.host=Ne.host,de.path=Ne.path.slice(),de.query=Ne.query,de.fragment="",je=vr}}break;case bt:if(Fe=="/"||Fe=="\\"){je=st;break}Ne&&Ne.scheme=="file"&&!ze(Vt.slice(Xt).join(""))&&($e(Ne.path[0],!0)?de.path.push(Ne.path[0]):de.host=Ne.host),je=yt;continue;case st:if(Fe==p||Fe=="/"||Fe=="\\"||Fe=="?"||Fe=="#"){if(!Qe&&$e(_e))je=yt;else{if(_e==""){if(de.host="",Qe)return}else{if(kt=q(de,_e))return kt;if(de.host=="localhost"&&(de.host=""),Qe)return;_e=""}je=It}continue}_e+=Fe;break;case It:if(We(de)){if(je=yt,Fe!="/"&&Fe!="\\")continue}else if(Qe||Fe!="?")if(Qe||Fe!="#"){if(Fe!=p&&(je=yt,Fe!="/"))continue}else de.fragment="",je=vr;else de.query="",je=rn;break;case yt:if(Fe==p||Fe=="/"||Fe=="\\"&&We(de)||!Qe&&(Fe=="?"||Fe=="#")){if(Ze(_e)?(it(de),Fe=="/"||Fe=="\\"&&We(de)||de.path.push("")):qe(_e)?Fe=="/"||Fe=="\\"&&We(de)||de.path.push(""):(de.scheme=="file"&&!de.path.length&&$e(_e)&&(de.host&&(de.host=""),_e=_e.charAt(0)+":"),de.path.push(_e)),_e="",de.scheme=="file"&&(Fe==p||Fe=="?"||Fe=="#"))for(;1<de.path.length&&de.path[0]==="";)de.path.shift();Fe=="?"?(de.query="",je=rn):Fe=="#"&&(de.fragment="",je=vr)}else _e+=Se(Fe,pe);break;case Ot:Fe=="?"?(de.query="",je=rn):Fe=="#"?(de.fragment="",je=vr):Fe!=p&&(de.path[0]+=Se(Fe,ge));break;case rn:Qe||Fe!="#"?Fe!=p&&(Fe=="'"&&We(de)?de.query+="%27":de.query+=Fe=="#"?"%23":Se(Fe,ge)):(de.fragment="",je=vr);break;case vr:Fe!=p&&(de.fragment+=Se(Fe,be))}Xt++}}function c(Fe){var Ee,Qe,Ne=I(this,c,"URL"),Vt=1<arguments.length?arguments[1]:void 0,Fe=String(Fe),kt=j(Ne,{type:"URL"});if(Vt!==void 0){if(Vt instanceof c)Ee=K(Vt);else if(Qe=l(Ee={},String(Vt)))throw TypeError(Qe)}if(Qe=l(kt,Fe,null,Ee))throw TypeError(Qe);var je=kt.searchParams=new U;(Vt=M(je)).updateSearchParams(kt.query),Vt.updateURL=function(){kt.query=String(je)||null},f||(Ne.href=$t.call(Ne),Ne.origin=wt.call(Ne),Ne.protocol=Pr.call(Ne),Ne.username=Tr.call(Ne),Ne.password=Et.call(Ne),Ne.host=Or.call(Ne),Ne.hostname=Aa.call(Ne),Ne.port=Ta.call(Ne),Ne.pathname=Ba.call(Ne),Ne.search=Dc.call(Ne),Ne.searchParams=Ua.call(Ne),Ne.hash=Fa.call(Ne))}function m(de,Ee){return{get:de,set:Ee,configurable:!0,enumerable:!0}}var p,u,d,h=A("../internals/export"),f=A("../internals/descriptors"),g=A("../internals/native-url"),Bt=A("../internals/global"),y=A("../internals/object-define-properties"),Z=A("../internals/redefine"),I=A("../internals/an-instance"),G=A("../internals/has"),R=A("../internals/object-assign"),C=A("../internals/array-from"),V=A("../internals/string-multibyte").codeAt,x=A("../internals/string-punycode-to-ascii"),w=A("../internals/set-to-string-tag"),k=A("../modules/web.url-search-params"),A=A("../internals/internal-state"),Y=Bt.URL,U=k.URLSearchParams,M=k.getState,j=A.set,K=A.getterFor("URL"),P=Math.floor,J=Math.pow,E="Invalid authority",O="Invalid scheme",D="Invalid host",le="Invalid port",X=/[A-Za-z]/,T=/[\d+-.A-Za-z]/,N=/\d/,z=/^(0x|0X)/,te=/^[0-7]+$/,ne=/^\d+$/,ee=/^[\dA-Fa-f]+$/,oe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ie=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ce=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,he=/[\u0009\u000A\u000D]/g,q=function(de,Ee){var Qe,Ne,Vt;if(Ee.charAt(0)=="[")return Ee.charAt(Ee.length-1)=="]"&&(Qe=function(Fe){var kt=[0,0,0,0,0,0,0,0],je=0,Xt=null,_e=0,gr,Lr,mr,Br,vi,Ln,Gi,Ur=function(){return Fe.charAt(_e)};if(Ur()==":"){if(Fe.charAt(1)!=":")return;_e+=2,je++,Xt=je}for(;Ur();){if(je==8)return;if(Ur()==":"){if(Xt!==null)return;_e++,je++,Xt=je;continue}for(gr=Lr=0;Lr<4&&ee.test(Ur());)gr=gr*16+parseInt(Ur(),16),_e++,Lr++;if(Ur()=="."){if(Lr==0||(_e-=Lr,je>6))return;for(mr=0;Ur();){if(Br=null,mr>0)if(Ur()=="."&&mr<4)_e++;else return;if(!N.test(Ur()))return;for(;N.test(Ur());){if(vi=parseInt(Ur(),10),Br===null)Br=vi;else{if(Br==0)return;Br=Br*10+vi}if(Br>255)return;_e++}kt[je]=kt[je]*256+Br,mr++,(mr==2||mr==4)&&je++}if(mr!=4)return;break}else if(Ur()==":"){if(_e++,!Ur())return}else if(Ur())return;kt[je++]=gr}if(Xt!==null)for(Ln=je-Xt,je=7;je!=0&&Ln>0;)Gi=kt[je],kt[je--]=kt[Xt+Ln-1],kt[Xt+--Ln]=Gi;else if(je!=8)return;return kt}(Ee.slice(1,-1)))?void(de.host=Qe):D;if(We(de))return Ee=x(Ee),oe.test(Ee)||(Qe=function(Fe){var kt=Fe.split("."),je,Xt,_e,gr,Lr,mr,Br;if(kt.length&&kt[kt.length-1]==""&&kt.pop(),(je=kt.length)>4)return Fe;for(Xt=[],_e=0;_e<je;_e++){if(gr=kt[_e],gr=="")return Fe;if(Lr=10,gr.length>1&&gr.charAt(0)=="0"&&(Lr=z.test(gr)?16:8,gr=gr.slice(Lr==8?1:2)),gr==="")mr=0;else{if(!(Lr==10?ne:Lr==8?te:ee).test(gr))return Fe;mr=parseInt(gr,Lr)}Xt.push(mr)}for(_e=0;_e<je;_e++)if(mr=Xt[_e],_e==je-1){if(mr>=J(256,5-je))return null}else if(mr>255)return null;for(Br=Xt.pop(),_e=0;_e<Xt.length;_e++)Br+=Xt[_e]*J(256,3-_e);return Br}(Ee))===null?D:void(de.host=Qe);if(ie.test(Ee))return D;for(Qe="",Ne=C(Ee),Vt=0;Vt<Ne.length;Vt++)Qe+=Se(Ne[Vt],ge);de.host=Qe},me=function(de){for(var Ee=null,Qe=1,Ne=null,Vt=0,Fe=0;Fe<8;Fe++)de[Fe]!==0?(Qe<Vt&&(Ee=Ne,Qe=Vt),Ne=null,Vt=0):(Ne===null&&(Ne=Fe),++Vt);return Qe<Vt&&(Ee=Ne,Qe=Vt),Ee},ge={},be=R({},ge,{" ":1,'"':1,"<":1,">":1,"`":1}),pe=R({},be,{"#":1,"?":1,"{":1,"}":1}),xe=R({},pe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Se=function(de,Ee){var Qe=V(de,0);return 32<Qe&&Qe<127&&!G(Ee,de)?de:encodeURIComponent(de)},ke={ftp:21,file:null,http:80,https:443,ws:80,wss:443},We=function(de){return G(ke,de.scheme)},Ke=function(de){return de.username!=""||de.password!=""},$e=function(de,Ee){return de.length==2&&X.test(de.charAt(0))&&((de=de.charAt(1))==":"||!Ee&&de=="|")},ze=function(de){return 1<de.length&&$e(de.slice(0,2))&&(de.length==2||(de=de.charAt(2))==="/"||de==="\\"||de==="?"||de==="#")},it=function(de){var Ee=de.path,Qe=Ee.length;!Qe||de.scheme=="file"&&Qe==1&&$e(Ee[0],!0)||Ee.pop()},qe=function(de){return de==="."||de.toLowerCase()==="%2e"},Ze=function(de){return(de=de.toLowerCase())===".."||de==="%2e."||de===".%2e"||de==="%2e%2e"},Ae={},ve={},_={},$={},H={},re={},ye={},Ge={},Le={},Me={},He={},Je={},De={},Rt={},bt={},st={},It={},yt={},Ot={},rn={},vr={},Bt=c.prototype,$t=function(){var de=K(this),Ee=de.scheme,Qe=de.username,Ne=de.password,Vt=de.host,Fe=de.port,kt=de.path,je=de.query,Xt=de.fragment,_e=Ee+":";return Vt!==null?(_e+="//",Ke(de)&&(_e+=Qe+(Ne?":"+Ne:"")+"@"),_e+=o(Vt),Fe!==null&&(_e+=":"+Fe)):Ee=="file"&&(_e+="//"),_e+=de.cannotBeABaseURL?kt[0]:kt.length?"/"+kt.join("/"):"",je!==null&&(_e+="?"+je),Xt!==null&&(_e+="#"+Xt),_e},wt=function(){var de=K(this),Ee=de.scheme,Qe=de.port;if(Ee=="blob")try{return new URL(Ee.path[0]).origin}catch{return"null"}return Ee!="file"&&We(de)?Ee+"://"+o(de.host)+(Qe!==null?":"+Qe:""):"null"},Pr=function(){return K(this).scheme+":"},Tr=function(){return K(this).username},Et=function(){return K(this).password},Or=function(){var Ee=K(this),de=Ee.host,Ee=Ee.port;return de===null?"":Ee===null?o(de):o(de)+":"+Ee},Aa=function(){var de=K(this).host;return de===null?"":o(de)},Ta=function(){var de=K(this).port;return de===null?"":String(de)},Ba=function(){var de=K(this),Ee=de.path;return de.cannotBeABaseURL?Ee[0]:Ee.length?"/"+Ee.join("/"):""},Dc=function(){var de=K(this).query;return de?"?"+de:""},Ua=function(){return K(this).searchParams},Fa=function(){var de=K(this).fragment;return de?"#"+de:""};f&&y(Bt,{href:m($t,function(Qe){var Ee=K(this),Qe=String(Qe),Qe=l(Ee,Qe);if(Qe)throw TypeError(Qe);M(Ee.searchParams).updateSearchParams(Ee.query)}),origin:m(wt),protocol:m(Pr,function(de){var Ee=K(this);l(Ee,String(de)+":",Ae)}),username:m(Tr,function(de){var Ee=K(this),Qe=C(String(de));if(!a(Ee)){Ee.username="";for(var Ne=0;Ne<Qe.length;Ne++)Ee.username+=Se(Qe[Ne],xe)}}),password:m(Et,function(de){var Ee=K(this),Qe=C(String(de));if(!a(Ee)){Ee.password="";for(var Ne=0;Ne<Qe.length;Ne++)Ee.password+=Se(Qe[Ne],xe)}}),host:m(Or,function(de){var Ee=K(this);Ee.cannotBeABaseURL||l(Ee,String(de),He)}),hostname:m(Aa,function(de){var Ee=K(this);Ee.cannotBeABaseURL||l(Ee,String(de),Je)}),port:m(Ta,function(de){var Ee=K(this);a(Ee)||((de=String(de))==""?Ee.port=null:l(Ee,de,De))}),pathname:m(Ba,function(de){var Ee=K(this);Ee.cannotBeABaseURL||(Ee.path=[],l(Ee,de+"",It))}),search:m(Dc,function(de){var Ee=K(this);(de=String(de))==""?Ee.query=null:(de.charAt(0)=="?"&&(de=de.slice(1)),Ee.query="",l(Ee,de,rn)),M(Ee.searchParams).updateSearchParams(Ee.query)}),searchParams:m(Ua),hash:m(Fa,function(de){var Ee=K(this);(de=String(de))==""?Ee.fragment=null:(de.charAt(0)=="#"&&(de=de.slice(1)),Ee.fragment="",l(Ee,de,vr))})}),Z(Bt,"toJSON",function(){return $t.call(this)},{enumerable:!0}),Z(Bt,"toString",function(){return $t.call(this)},{enumerable:!0}),Y&&(u=Y.createObjectURL,d=Y.revokeObjectURL,u&&Z(c,"createObjectURL",function(de){return u.apply(Y,arguments)}),d&&Z(c,"revokeObjectURL",function(de){return d.apply(Y,arguments)})),w(c,"URL"),h({global:!0,forced:!g,sham:!f},{URL:c})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":231}],233:[function(r,i,s){i.exports=r("./").polyfill()},{"./":234}],234:[function(r,i,s){(function(o,a){var l,c;l=this,c=function(){function m(q){return typeof q=="function"}var p=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]"},u=0,d=void 0,h=void 0,f=function(q,me){R[u]=q,R[u+1]=me,(u+=2)===2&&(h?h(C):U())},g=typeof window<"u"?window:void 0,y=g||{},y=y.MutationObserver||y.WebKitMutationObserver,Z=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function G(){var q=setTimeout;return function(){return q(C,1)}}var R=new Array(1e3);function C(){for(var q=0;q<u;q+=2)(0,R[q])(R[q+1]),R[q]=void 0,R[q+1]=void 0;u=0}function V(){try{var q=Function("return this")().require("vertx");return(d=q.runOnLoop||q.runOnContext)!==void 0?function(){d(C)}:G()}catch{return G()}}var x,w,k,U=void 0;function A(q,me){var ge,be=this,pe=new this.constructor(j),xe=(pe[M]===void 0&&ee(pe),be._state);return xe?(ge=arguments[xe-1],f(function(){return te(xe,pe,ge,be._result)})):N(be,pe,q,me),pe}function Y(q){var me;return q&&typeof q=="object"&&q.constructor===this?q:(D(me=new this(j),q),me)}var U=Z?function(){return o.nextTick(C)}:y?(w=0,Z=new y(C),k=document.createTextNode(""),Z.observe(k,{characterData:!0}),function(){k.data=w=++w%2}):I?((x=new MessageChannel).port1.onmessage=C,function(){return x.port2.postMessage(0)}):(g===void 0&&typeof r=="function"?V:G)(),M=Math.random().toString(36).substring(2);function j(){}var K=void 0,P=1,J=2;function E(q,me,ge){f(function(be){var pe=!1,xe=function(Se,ke,We,Ke){try{Se.call(ke,We,Ke)}catch($e){return $e}}(ge,me,function(Se){pe||(pe=!0,(me!==Se?D:X)(be,Se))},function(Se){pe||(pe=!0,T(be,Se))},be._label);!pe&&xe&&(pe=!0,T(be,xe))},q)}function O(q,me,ge){var be,pe;me.constructor===q.constructor&&ge===A&&me.constructor.resolve===Y?(be=q,(pe=me)._state===P?X(be,pe._result):pe._state===J?T(be,pe._result):N(pe,void 0,function(xe){return D(be,xe)},function(xe){return T(be,xe)})):ge!==void 0&&m(ge)?E(q,me,ge):X(q,me)}function D(q,me){if(q===me)T(q,new TypeError("You cannot resolve a promise with itself"));else if(ge=typeof me,me===null||ge!="object"&&ge!="function")X(q,me);else{ge=void 0;try{ge=me.then}catch(be){return void T(q,be)}O(q,me,ge)}var ge}function le(q){q._onerror&&q._onerror(q._result),z(q)}function X(q,me){q._state===K&&(q._result=me,q._state=P,q._subscribers.length!==0&&f(z,q))}function T(q,me){q._state===K&&(q._state=J,q._result=me,f(le,q))}function N(q,me,ge,be){var pe=q._subscribers,xe=pe.length;q._onerror=null,pe[xe]=me,pe[xe+P]=ge,pe[xe+J]=be,xe===0&&q._state&&f(z,q)}function z(q){var me=q._subscribers,ge=q._state;if(me.length!==0){for(var be,pe=void 0,xe=q._result,Se=0;Se<me.length;Se+=3)be=me[Se],pe=me[Se+ge],be?te(ge,be,pe,xe):pe(xe);q._subscribers.length=0}}function te(q,me,ge,be){var pe=m(ge),xe=void 0,Se=void 0,ke=!0;if(pe){try{xe=ge(be)}catch(We){ke=!1,Se=We}if(me===xe)return void T(me,new TypeError("A promises callback cannot return that same promise."))}else xe=be;me._state===K&&(pe&&ke?D(me,xe):ke===!1?T(me,Se):q===P?X(me,xe):q===J&&T(me,xe))}var ne=0;function ee(q){q[M]=ne++,q._state=void 0,q._result=void 0,q._subscribers=[]}ie.prototype._enumerate=function(q){for(var me=0;this._state===K&&me<q.length;me++)this._eachEntry(q[me],me)},ie.prototype._eachEntry=function(q,me){var ge=this._instanceConstructor,be=ge.resolve;if(be===Y){var pe,xe=void 0,Se=void 0,ke=!1;try{xe=q.then}catch(We){ke=!0,Se=We}xe===A&&q._state!==K?this._settledAt(q._state,me,q._result):typeof xe!="function"?(this._remaining--,this._result[me]=q):ge===ce?(pe=new ge(j),ke?T(pe,Se):O(pe,q,xe),this._willSettleAt(pe,me)):this._willSettleAt(new ge(function(We){return We(q)}),me)}else this._willSettleAt(be(q),me)},ie.prototype._settledAt=function(q,me,ge){var be=this.promise;be._state===K&&(this._remaining--,q===J?T(be,ge):this._result[me]=ge),this._remaining===0&&X(be,this._result)},ie.prototype._willSettleAt=function(q,me){var ge=this;N(q,void 0,function(be){return ge._settledAt(P,me,be)},function(be){return ge._settledAt(J,me,be)})};var oe=ie;function ie(q,me){this._instanceConstructor=q,this.promise=new q(j),this.promise[M]||ee(this.promise),p(me)?(this.length=me.length,this._remaining=me.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(me),this._remaining!==0)||X(this.promise,this._result)):T(this.promise,new Error("Array Methods must be provided an Array"))}he.prototype.catch=function(q){return this.then(null,q)},he.prototype.finally=function(q){var me=this.constructor;return m(q)?this.then(function(ge){return me.resolve(q()).then(function(){return ge})},function(ge){return me.resolve(q()).then(function(){throw ge})}):this.then(q,q)};var ce=he;function he(q){if(this[M]=ne++,this._result=this._state=void 0,this._subscribers=[],j!==q){if(typeof q!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof he))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var me=this;try{q(function(ge){D(me,ge)},function(ge){T(me,ge)})}catch(ge){T(me,ge)}}}return ce.prototype.then=A,ce.all=function(q){return new oe(this,q).promise},ce.race=function(q){var me=this;return p(q)?new me(function(ge,be){for(var pe=q.length,xe=0;xe<pe;xe++)me.resolve(q[xe]).then(ge,be)}):new me(function(ge,be){return be(new TypeError("You must pass an array to race."))})},ce.resolve=Y,ce.reject=function(q){var me=new this(j);return T(me,q),me},ce._setScheduler=function(q){h=q},ce._setAsap=function(q){f=q},ce._asap=f,ce.polyfill=function(){var q=void 0;if(a!==void 0)q=a;else if(typeof self<"u")q=self;else try{q=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var me=q.Promise;if(me){var ge=null;try{ge=Object.prototype.toString.call(me.resolve())}catch{}if(ge==="[object Promise]"&&!me.cast)return}q.Promise=ce},ce.Promise=ce},typeof s=="object"&&i!==void 0?i.exports=c():l.ES6Promise=c()}).call(this,r("_process"),typeof Ci<"u"?Ci:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:243}],235:[function(r,i,s){var o,a;o=this,a=function(l,c){var m=5e3,p="callback";function u(h){try{delete window[h]}catch{window[h]=void 0}}function d(h){h=document.getElementById(h),h&&document.getElementsByTagName("head")[0].removeChild(h)}c.exports=function(h){var f=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],g=h,y=f.timeout||m,Z=f.jsonpCallback||p,I=void 0;return new Promise(function(G,R){var C=f.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),V=Z+"_"+C,x=(window[C]=function(w){G({ok:!0,json:function(){return Promise.resolve(w)}}),I&&clearTimeout(I),d(V),u(C)},g+=g.indexOf("?")===-1?"?":"&",document.createElement("script"));x.setAttribute("src",""+g+Z+"="+C),f.charset&&x.setAttribute("charset",f.charset),x.id=V,document.getElementsByTagName("head")[0].appendChild(x),I=setTimeout(function(){R(new Error("JSONP request to "+h+" timed out")),u(C),d(V),window[C]=function(){u(C)}},y),x.onerror=function(){R(new Error("JSONP request to "+h+" failed")),u(C),d(V),I&&clearTimeout(I)}})}},s!==void 0&&i!==void 0?a(0,i):(a(a={exports:{}},a),o.fetchJsonp=a.exports)},{}],236:[function(r,i,s){var o=function(a){var l,c,m,p,u,d,h,f,g,y,Z;if(!(a===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return Z=a.document,l=function(){return a.URL||a.webkitURL||a},c=Z.createElementNS("http://www.w3.org/1999/xhtml","a"),m="download"in c,p=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent),d=function(I){(a.setImmediate||a.setTimeout)(function(){throw I},0)},h=4e4,f=function(I){setTimeout(function(){typeof I=="string"?l().revokeObjectURL(I):I.remove()},h)},g=function(I){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(I.type)?new Blob([String.fromCharCode(65279),I],{type:I.type}):I},Z=(y=function(I,G,w){w||(I=g(I));var C,V,x=this,w=I.type==="application/octet-stream",k=function(){for(var A=x,Y="writestart progress write writeend".split(" "),U=void 0,M=(Y=[].concat(Y)).length;M--;){var j=A["on"+Y[M]];if(typeof j=="function")try{j.call(A,U||A)}catch(K){d(K)}}};x.readyState=x.INIT,m?(C=l().createObjectURL(I),setTimeout(function(){var A,Y;c.href=C,c.download=G,A=c,Y=new MouseEvent("click"),A.dispatchEvent(Y),k(),f(C),x.readyState=x.DONE})):(u||w&&p)&&a.FileReader?((V=new FileReader).onloadend=function(){var A=u?V.result:V.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(A,"_blank")||(a.location.href=A),A=void 0,x.readyState=x.DONE,k()},V.readAsDataURL(I),x.readyState=x.INIT):(C=C||l().createObjectURL(I),!w&&a.open(C,"_blank")||(a.location.href=C),x.readyState=x.DONE,k(),f(C))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(I,G,R){return G=G||I.name||"download",R||(I=g(I)),navigator.msSaveOrOpenBlob(I,G)}:(Z.abort=function(){},Z.readyState=Z.INIT=0,Z.WRITING=1,Z.DONE=2,Z.error=Z.onwritestart=Z.onprogress=Z.onwrite=Z.onabort=Z.onerror=Z.onwriteend=null,function(I,G,R){return new y(I,G||I.name||"download",R)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);i!==void 0&&i.exports?i.exports.saveAs=o:n!=null},{}],237:[function(r,i,s){var o,a=Object.defineProperty,l=(a(s,"__esModule",{value:!0}),s),c={GIFEncoder:()=>k,applyPalette:()=>function(K,P,J="rgb565"){if(!K||!K.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(K instanceof Uint8Array||K instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<P.length)throw new Error("applyPalette() only works with 256 colors or less");const E=new Uint32Array(K.buffer),O=E.length,D=J==="rgb444"?4096:65536,le=new Uint8Array(O),X=new Array(D);if(J==="rgba4444")for(let he=0;he<O;he++){var te=E[he],T=te>>24&255,N=te>>16&255,z=te>>8&255,te=255&te,ne=f(te,z,N,T),ne=ne in X?X[ne]:X[ne]=function(q,me,ge,be,pe){let xe=0,Se=1e100;for(let $e=0;$e<pe.length;$e++){var ke,We=pe[$e],Ke=V(We[3]-be);Ke>Se||(ke=We[0],(Ke+=V(ke-q))>Se||(ke=We[1],(Ke+=V(ke-me))>Se||(ke=We[2],(Ke+=V(ke-ge))>Se||(Se=Ke,xe=$e))))}return xe}(te,z,N,T,P);le[he]=ne}else{const he=J==="rgb444"?g:h;for(let q=0;q<O;q++){var ie=E[q],ee=ie>>16&255,oe=ie>>8&255,ie=255&ie,ce=he(ie,oe,ee),ce=ce in X?X[ce]:X[ce]=function(me,ge,be,pe){let xe=0,Se=1e100;for(let $e=0;$e<pe.length;$e++){var ke,We=pe[$e],Ke=V(We[0]-me);Ke>Se||(ke=We[1],(Ke+=V(ke-ge))>Se||(ke=We[2],(Ke+=V(ke-be))>Se||(Se=Ke,xe=$e)))}return xe}(ie,oe,ee,P);le[q]=ce}}return le},default:()=>j,nearestColor:()=>function(K,P,J=R){return K[x(K,P,J)]},nearestColorIndex:()=>x,nearestColorIndexWithDistance:()=>w,prequantize:()=>function(K,{roundRGB:P=5,roundAlpha:J=10,oneBitAlpha:E=null}={}){const O=new Uint32Array(K.buffer);for(let N=0;N<O.length;N++){var T=O[N];let z=T>>24&255;var D,le=T>>16&255,X=T>>8&255,T=255&T;z=C(z,J),E&&(D=typeof E=="number"?E:127,z=z<=D?0:255),T=C(T,P),X=C(X,P),le=C(le,P),O[N]=z<<24|le<<16|X<<8|T<<0}},quantize:()=>function(K,P,J={}){var{format:E="rgb565",clearAlpha:O=!0,clearAlphaColor:D=0,clearAlphaThreshold:le=0,oneBitAlpha:X=!1}=J;if(!K||!K.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(K instanceof Uint8Array||K instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");K=new Uint32Array(K.buffer);let T=J.useSqrt!==!1;const N=E==="rgba4444",z=function(ze,it){const qe=it==="rgb444"?4096:65536,Ze=new Array(qe),Ae=ze.length;if(it==="rgba4444")for(let bt=0;bt<Ae;++bt){var H=ze[bt],ve=H>>24&255,_=H>>16&255,$=H>>8&255,H=255&H,re=f(H,$,_,ve);let st=re in Ze?Ze[re]:Ze[re]=G();st.rc+=H,st.gc+=$,st.bc+=_,st.ac+=ve,st.cnt++}else if(it==="rgb444")for(let bt=0;bt<Ae;++bt){var Le=ze[bt],ye=Le>>16&255,Ge=Le>>8&255,Le=255&Le,Me=g(Le,Ge,ye);let st=Me in Ze?Ze[Me]:Ze[Me]=G();st.rc+=Le,st.gc+=Ge,st.bc+=ye,st.cnt++}else for(let bt=0;bt<Ae;++bt){var De=ze[bt],He=De>>16&255,Je=De>>8&255,De=255&De,Rt=h(De,Je,He);let st=Rt in Ze?Ze[Rt]:Ze[Rt]=G();st.rc+=De,st.gc+=Je,st.bc+=He,st.cnt++}return Ze}(K,E),te=z.length,ne=te-1,ee=new Uint32Array(te+1);for(var oe=0,ie=0;ie<te;++ie){const ze=z[ie];ze!=null&&(We=1/ze.cnt,N&&(ze.ac*=We),ze.rc*=We,ze.gc*=We,ze.bc*=We,z[oe++]=ze)}Z(P)/oe<.022&&(T=!1);for(var ce,he,q,ie=0;ie<oe-1;++ie)z[ie].fw=ie+1,z[ie+1].bk=ie,T&&(z[ie].cnt=Math.sqrt(z[ie].cnt));for(T&&(z[ie].cnt=Math.sqrt(z[ie].cnt)),ie=0;ie<oe;++ie){I(z,ie,!1);var me=z[ie].err;for(he=++ee[0];1<he&&(q=he>>1,!(z[ce=ee[q]].err<=me));he=q)ee[he]=ce;ee[he]=ie}var ge,be=oe-P;for(ie=0;ie<be;){for(;;){var pe=ee[1];if((ge=z[pe]).tm>=ge.mtm&&z[ge.nn].mtm<=ge.tm)break;for(ge.mtm==ne?pe=ee[1]=ee[ee[0]--]:(I(z,pe,!1),ge.tm=ie),me=z[pe].err,he=1;(q=he+he)<=ee[0]&&(q<ee[0]&&z[ee[q]].err>z[ee[q+1]].err&&q++,!(me<=z[ce=ee[q]].err));he=q)ee[he]=ce;ee[he]=pe}var xe=z[ge.nn],Se=ge.cnt,ke=xe.cnt,We=1/(Se+ke);N&&(ge.ac=We*(Se*ge.ac+ke*xe.ac)),ge.rc=We*(Se*ge.rc+ke*xe.rc),ge.gc=We*(Se*ge.gc+ke*xe.gc),ge.bc=We*(Se*ge.bc+ke*xe.bc),ge.cnt+=xe.cnt,ge.mtm=++ie,z[xe.bk].fw=xe.fw,z[xe.fw].bk=xe.bk,xe.mtm=ne}let Ke=[];for(ie=0;;0){let ze=y(Math.round(z[ie].rc),0,255),it=y(Math.round(z[ie].gc),0,255),qe=y(Math.round(z[ie].bc),0,255),Ze=255;N&&(Ze=y(Math.round(z[ie].ac),0,255),X&&($e=typeof X=="number"?X:127,Ze=Ze<=$e?0:255),O&&Ze<=le&&(ze=it=qe=D,Ze=0));var $e=N?[ze,it,qe,Ze]:[ze,it,qe];if(function(Ae,ve){for(let H=0;H<Ae.length;H++){var $=Ae[H],_=$[0]===ve[0]&&$[1]===ve[1]&&$[2]===ve[2],$=!(4<=$.length&&4<=ve.length)||$[3]===ve[3];if(_&&$)return!0}return!1}(Ke,$e)||Ke.push($e),(ie=z[ie].fw)==0)break}return Ke},snapColorsToPalette:()=>function(K,P,J=5){if(K.length&&P.length){var E=K.map(T=>T.slice(0,3)),O=J*J,D=K[0].length;for(let T=0;T<P.length;T++){let N=P[T];N=N.length<D?[N[0],N[1],N[2],255]:N.length>D?N.slice(0,3):N.slice();var X=w(E,N.slice(0,3),R),le=X[0],X=X[1];0<X&&X<=O&&(K[le]=N)}}}};for(o in c)a(l,o,{get:c[o],enumerable:!0});var m={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function p(K=256){let P=0,J=new Uint8Array(K);return{get buffer(){return J.buffer},reset(){P=0},bytesView(){return J.subarray(0,P)},bytes(){return J.slice(0,P)},writeByte(O){E(P+1),J[P]=O,P++},writeBytes(O,D=0,le=O.length){E(P+le);for(let X=0;X<le;X++)J[P++]=O[X+D]},writeBytesView(O,D=0,le=O.byteLength){E(P+le),J.set(O.subarray(D,D+le),P),P+=le}};function E(O){var D=J.length;if(!(O<=D)){O=Math.max(O,D*(D<1048576?2:1.125)>>>0),D!=0&&(O=Math.max(O,256));const le=J;J=new Uint8Array(O),0<P&&J.set(le.subarray(0,P),0)}}}var u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],d=function(K,P,J,N,O=p(512),D=new Uint8Array(256),le=new Int32Array(5003),X=new Int32Array(5003)){var T=le.length,N=Math.max(2,N);D.fill(0),X.fill(0),le.fill(-1);let z=0,te=0;var ne=N+1;const ee=ne;let oe=!1,ie=ee,ce=(1<<ie)-1;var he=1<<ne-1;const q=1+he;let me=2+he,ge=0,be=J[0],pe=0;for(let $e=T;$e<65536;$e*=2)++pe;pe=8-pe,O.writeByte(N),Ke(he);var xe=J.length;for(let $e=1;$e<xe;$e++)e:{var Se=J[$e],ke=(Se<<12)+be;let ze=Se<<pe^be;if(le[ze]===ke)be=X[ze];else{for(var We=ze===0?1:T-ze;0<=le[ze];)if((ze-=We)<0&&(ze+=T),le[ze]===ke){be=X[ze];break e}Ke(be),be=Se,me<4096?(X[ze]=me++,le[ze]=ke):(le.fill(-1),me=2+he,oe=!0,Ke(he))}}return Ke(be),Ke(q),O.writeByte(0),O.bytesView();function Ke($e){for(z&=u[te],0<te?z|=$e<<te:z=$e,te+=ie;8<=te;)D[ge++]=255&z,254<=ge&&(O.writeByte(ge),O.writeBytesView(D,0,ge),ge=0),z>>=8,te-=8;if((me>ce||oe)&&(oe?(ie=ee,ce=(1<<ie)-1,oe=!1):(++ie,ce=ie===12?1<<ie:(1<<ie)-1)),$e==q){for(;0<te;)D[ge++]=255&z,254<=ge&&(O.writeByte(ge),O.writeBytesView(D,0,ge),ge=0),z>>=8,te-=8;0<ge&&(O.writeByte(ge),O.writeBytesView(D,0,ge),ge=0)}}};function h(K,P,J){return K<<8&63488|P<<2&992|J>>3}function f(K,P,J,E){return K>>4|240&P|(240&J)<<4|(240&E)<<8}function g(K,P,J){return K>>4<<8|240&P|J>>4}function y(K,P,J){return K<P?P:J<K?J:K}function Z(K){return K*K}function I(K,P,J){var E=0,O=1e100;const D=K[P];for(var le=D.cnt,X=D.ac,T=D.rc,N=D.gc,z=D.bc,te=D.fw;te!=0;te=K[te].fw){var ne,ee=K[te],oe=ee.cnt,oe=le*oe/(le+oe);O<=oe||(ne=0,J&&O<=(ne+=oe*Z(ee.ac-X))||O<=(ne+=oe*Z(ee.rc-T))||O<=(ne+=oe*Z(ee.gc-N))||O<=(ne+=oe*Z(ee.bc-z))||(O=ne,E=te))}D.err=O,D.nn=E}function G(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function R(K,P){for(var J=0,E=0;E<K.length;E++){var O=K[E]-P[E];J+=O*O}return J}function C(K,P){return 1<P?Math.round(K/P)*P:K}function V(K){return K*K}function x(K,P,J=R){let E=1/0,O=-1;for(let le=0;le<K.length;le++){var D=J(P,K[le]);D<E&&(E=D,O=le)}return O}function w(K,P,J=R){let E=1/0,O=-1;for(let le=0;le<K.length;le++){var D=J(P,K[le]);D<E&&(E=D,O=le)}return[O,E]}function k(K={}){const{initialCapacity:P=4096,auto:J=!0}=K,E=p(P),O=new Uint8Array(256),D=new Int32Array(5003),le=new Int32Array(5003);let X=!1;return{reset(){E.reset(),X=!1},finish(){E.writeByte(m.trailer)},bytes(){return E.bytes()},bytesView(){return E.bytesView()},get buffer(){return E.buffer},get stream(){return E},writeHeader:T,writeFrame(N,z,te,be={}){var{transparent:ee=!1,transparentIndex:oe=0,delay:We=0,palette:ie=null,repeat:xe=0,colorDepth:ce=8,dispose:he=-1}=be;let q=!1;if(J?X||(q=!0,T(),X=!0):q=Boolean(be.first),z=Math.max(0,Math.floor(z)),te=Math.max(0,Math.floor(te)),q){if(!ie)throw new Error("First frame must include a { palette } option");var[be,Se,ge,ke,pe=8]=[E,z,te,ie,ce];ke=M(ke.length)-1,pe=128|pe-1<<4|ke,Y(be,Se),Y(be,ge),be.writeBytes([pe,0,0]),A(E,ie),0<=xe&&(ke=E,Se=xe,ke.writeByte(33),ke.writeByte(255),ke.writeByte(11),U(ke,"NETSCAPE2.0"),ke.writeByte(3),ke.writeByte(1),Y(ke,Se),ke.writeByte(0))}var me,ge=Math.round(We/10),be=E,pe=he,xe=ge,Se=ee,ke=oe,We=(be.writeByte(33),be.writeByte(249),be.writeByte(4),ke<0&&(ke=0,Se=!1),Se=Se?(me=1,2):me=0,0<=pe&&(Se=7&pe),Se<<=2,be.writeByte(0|Se|me),Y(be,xe),be.writeByte(ke||0),be.writeByte(0),Boolean(ie)&&!q);he=E,ee=z,oe=te,me=We?ie:null,he.writeByte(44),Y(he,0),Y(he,0),Y(he,ee),Y(he,oe),me?(ee=M(me.length)-1,he.writeByte(128|ee)):he.writeByte(0),We&&A(E,ie),[xe,be,oe,ee,he=8,We,ie,N]=[E,N,z,te,ce,O,D,le],d(oe,ee,be,he,xe,We,ie,N)}};function T(){U(E,"GIF89a")}}function A(K,P){var J=1<<M(P.length);for(let E=0;E<J;E++){let O=[0,0,0];E<P.length&&(O=P[E]),K.writeByte(O[0]),K.writeByte(O[1]),K.writeByte(O[2])}}function Y(K,P){K.writeByte(255&P),K.writeByte(P>>8&255)}function U(K,P){for(var J=0;J<P.length;J++)K.writeByte(P.charCodeAt(J))}function M(K){return Math.max(Math.ceil(Math.log2(K)),1)}var j=k},{}],238:[function(r,i,s){s.read=function(o,a,l,c,I){var p,u,d=8*I-c-1,h=(1<<d)-1,f=h>>1,g=-7,y=l?I-1:0,Z=l?-1:1,I=o[a+y];for(y+=Z,p=I&(1<<-g)-1,I>>=-g,g+=d;0<g;p=256*p+o[a+y],y+=Z,g-=8);for(u=p&(1<<-g)-1,p>>=-g,g+=c;0<g;u=256*u+o[a+y],y+=Z,g-=8);if(p===0)p=1-f;else{if(p===h)return u?NaN:1/0*(I?-1:1);u+=Math.pow(2,c),p-=f}return(I?-1:1)*u*Math.pow(2,p-c)},s.write=function(o,a,l,c,m,G){var u,d,h=8*G-m-1,f=(1<<h)-1,g=f>>1,y=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=c?0:G-1,I=c?1:-1,G=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(d=isNaN(a)?1:0,u=f):(u=Math.floor(Math.log(a)/Math.LN2),a*(c=Math.pow(2,-u))<1&&(u--,c*=2),2<=(a+=1<=u+g?y/c:y*Math.pow(2,1-g))*c&&(u++,c/=2),f<=u+g?(d=0,u=f):1<=u+g?(d=(a*c-1)*Math.pow(2,m),u+=g):(d=a*Math.pow(2,g-1)*Math.pow(2,m),u=0));8<=m;o[l+Z]=255&d,Z+=I,d/=256,m-=8);for(u=u<<m|d,h+=m;0<h;o[l+Z]=255&u,Z+=I,u/=256,h-=8);o[l+Z-I]|=128*G}},{}],239:[function(r,i,s){var o;function a(_,$){return _.b===$.b&&_.a===$.a}function l(_,$){return _.b<$.b||_.b===$.b&&_.a<=$.a}function c(_,$,H){var re=$.b-_.b,ye=H.b-$.b;return 0<re+ye?re<ye?$.a-_.a+re/(re+ye)*(_.a-H.a):$.a-H.a+ye/(re+ye)*(H.a-_.a):0}function m(_,$,H){var re=$.b-_.b,ye=H.b-$.b;return 0<re+ye?($.a-H.a)*re+($.a-_.a)*ye:0}function p(_,$){return _.a<$.a||_.a===$.a&&_.b<=$.b}function u(_,$,H){var re=$.a-_.a,ye=H.a-$.a;return 0<re+ye?re<ye?$.b-_.b+re/(re+ye)*(_.b-H.b):$.b-H.b+ye/(re+ye)*(H.b-_.b):0}function d(_,$,H){var re=$.a-_.a,ye=H.a-$.a;return 0<re+ye?($.b-H.b)*re+($.b-_.b)*ye:0}function h(_,$,H,re){return(_=_<0?0:_)<=(H=H<0?0:H)?H===0?($+re)/2:$+_/(_+H)*(re-$):re+H/(_+H)*($-re)}function f(_){var $=G(_.b);return C($,_.c),C($.b,_.c),V($,_.a),$}function g(_,$){var H=!1,re=!1;_!==$&&($.a!==_.a&&(re=!0,w($.a,_.a)),$.d!==_.d&&(H=!0,k($.d,_.d)),R($,_),re||(C($,_.a),_.a.c=_),H||(V($,_.d),_.d.a=_))}function y(_){var $=_.b,H=!1;_.d!==_.b.d&&(H=!0,k(_.d,_.b.d)),_.c===_?w(_.a,null):(_.b.d.a=_.b.e,_.a.c=_.c,R(_,_.b.e),H||V(_,_.d)),$.c===$?(w($.a,null),k($.d,null)):(_.d.a=$.b.e,$.a.c=$.c,R($,$.b.e)),x(_)}function Z(_){var $=G(_),H=$.b;return R($,_.e),$.a=_.b.a,C(H,$.a),$.d=H.d=_.d,$=$.b,R(_.b,_.b.b.e),R(_.b,$),_.b.a=$.a,$.b.a.c=$.b,$.b.d=_.b.d,$.f=_.f,$.b.f=_.b.f,$}function I(_,$){var H=!1,re=G(_),ye=re.b;return $.d!==_.d&&(H=!0,k($.d,_.d)),R(re,_.e),R(ye,$),re.a=_.b.a,ye.a=$.a,re.d=ye.d=_.d,_.d.a=ye,H||V(re,_.d),re}function G(_){var $=new ge,H=new ge,re=_.b.h;return(((H.h=re).b.h=$).h=_).b.h=H,$.b=H,(($.c=$).e=H).b=$,(H.c=H).e=$}function R(_,$){var H=_.c,re=$.c;H.b.e=$,(re.b.e=_).c=re,$.c=H}function C(_,$){var H=$.f,re=new pe($,H);for(H.e=re,H=($.f=re).c=_;H.a=re,(H=H.c)!==_;);}function V(_,$){var H=$.d,re=new me($,H);for(H.b=re,($.d=re).a=_,re.c=$.c,H=_;H.d=re,(H=H.e)!==_;);}function x(_){var $=_.h;_=_.b.h,($.b.h=_).b.h=$}function w(_,$){for(var H=_.c,re=H;re.a=$,(re=re.c)!==H;);H=_.f,((re=_.e).f=H).e=re}function k(_,$){for(var H=_.a,re=H;re.d=$,(re=re.e)!==H;);H=_.d,((re=_.b).d=H).b=re}function A(_){var $=0;return Math.abs(_[1])>Math.abs(_[0])&&($=1),$=Math.abs(_[2])>Math.abs(_[$])?2:$}function Y(_,$){_.f+=$.f,_.b.f+=$.b.f}function U(_,$,H){return _=_.a,$=$.a,H=H.a,$.b.a===_?H.b.a===_?l($.a,H.a)?m(H.b.a,$.a,H.a)<=0:0<=m($.b.a,H.a,$.a):m(H.b.a,_,H.a)<=0:H.b.a===_?0<=m($.b.a,_,$.a):($=c($.b.a,_,$.a),(_=c(H.b.a,_,H.a))<=$)}function M(_){_.a.i=null;var $=_.e;$.a.c=$.c,$.c.a=$.a,_.e=null}function j(_,$){y(_.a),_.c=!1,(_.a=$).i=_}function K(_){for(var $=_.a.a;(_=ve(_)).a.a===$;);return _.c&&(j(_,$=I(Ae(_).a.b,_.a.e)),_=ve(_)),_}function P(_,$,H){var re=new Ze;return re.a=H,re.e=oe(_.f,$.e,re),H.i=re}function J(_,$){switch(_.s){case 100130:return(1&$)!=0;case 100131:return $!==0;case 100132:return 0<$;case 100133:return $<0;case 100134:return 2<=$||$<=-2}return!1}function E(_){var $=_.a,H=$.d;H.c=_.d,H.a=$,M(_)}function O(_,$,H){for($=(_=$).a;_!==H;){_.c=!1;var re=Ae(_),ye=re.a;if(ye.a!==$.a){if(!re.c){E(_);break}j(re,ye=I($.c.b,ye.b))}$.c!==ye&&(g(ye.b.e,ye),g($,ye)),E(_),$=re.a,_=re}return $}function D(_,$,H,re,ye,Ge){for(var Le=!0;P(_,$,H.b),(H=H.c)!==re;);for(ye===null&&(ye=Ae($).a.b.c);(H=(re=Ae($)).a.b).a===ye.a;)H.c!==ye&&(g(H.b.e,H),g(ye.b.e,H)),re.f=$.f-H.f,re.d=J(_,re.f),$.b=!0,!Le&&N(_,$)&&(Y(H,ye),M($),y(ye)),Le=!1,$=re,ye=H;$.b=!0,Ge&&te(_,$)}function le(_,$,H,re,ye){var Ge=[$.g[0],$.g[1],$.g[2]];$.d=null,$.d=_.o&&_.o(Ge,H,re,_.c)||null,$.d===null&&(ye?_.n||(q(_,100156),_.n=!0):$.d=H[0])}function X(_,$,H){var re=[null,null,null,null];re[0]=$.a.d,re[1]=H.a.d,le(_,$.a,re,[.5,.5,0,0],!1),g($,H)}function T(_,$,H,re,ye){var Ge=Math.abs($.b-_.b)+Math.abs($.a-_.a),Le=Math.abs(H.b-_.b)+Math.abs(H.a-_.a),Me=ye+1;re[ye]=.5*Le/(Ge+Le),re[Me]=.5*Ge/(Ge+Le),_.g[0]+=re[ye]*$.g[0]+re[Me]*H.g[0],_.g[1]+=re[ye]*$.g[1]+re[Me]*H.g[1],_.g[2]+=re[ye]*$.g[2]+re[Me]*H.g[2]}function N(_,$){var H=Ae($),re=$.a,ye=H.a;if(l(re.a,ye.a)){if(0<m(ye.b.a,re.a,ye.a))return;if(a(re.a,ye.a)){if(re.a!==ye.a){var H=_.e,Ge=re.a.h;if(0<=Ge){var Le=(H=H.b).d,Me=H.e,He=H.c,Je=He[Ge];Le[Je]=Le[H.a],(He[Le[Je]]=Je)<=--H.a&&(Je<=1||l(Me[Le[Je>>1]],Me[Le[Je]])?it:qe)(H,Je),Me[Ge]=null,He[Ge]=H.b,H.b=Ge}else for(H.c[-(Ge+1)]=null;0<H.a&&H.c[H.d[H.a-1]]===null;)--H.a;X(_,ye.b.e,re)}}else Z(ye.b),g(re,ye.b.e),$.b=H.b=!0}else{if(m(re.b.a,ye.a,re.a)<0)return;ve($).b=$.b=!0,Z(re.b),g(ye.b.e,re)}return 1}function z(_,$){var H=Ae($),re=$.a,ye=H.a,Ge=re.a,Le=ye.a,Me=re.b.a,He=ye.b.a,Je=new pe;if(m(Me,_.a,Ge),m(He,_.a,Le),!(Ge===Le||Math.min(Ge.a,Me.a)>Math.max(Le.a,He.a))){if(l(Ge,Le)){if(0<m(He,Ge,Le))return}else if(m(Me,Le,Ge)<0)return;var De,Rt,bt=Me,st=Ge,It=He,yt=Le;if(l(bt,st)||(De=bt,bt=st,st=De),l(It,yt)||(De=It,It=yt,yt=De),l(bt,It)||(De=bt,bt=It,It=De,De=st,st=yt,yt=De),l(It,st)?l(st,yt)?((De=c(bt,It,st))+(Rt=c(It,st,yt))<0&&(De=-De,Rt=-Rt),Je.b=h(De,It.b,Rt,st.b)):((De=m(bt,It,st))+(Rt=-m(bt,yt,st))<0&&(De=-De,Rt=-Rt),Je.b=h(De,It.b,Rt,yt.b)):Je.b=(It.b+st.b)/2,p(bt,st)||(De=bt,bt=st,st=De),p(It,yt)||(De=It,It=yt,yt=De),p(bt,It)||(De=bt,bt=It,It=De,De=st,st=yt,yt=De),p(It,st)?p(st,yt)?((De=u(bt,It,st))+(Rt=u(It,st,yt))<0&&(De=-De,Rt=-Rt),Je.a=h(De,It.a,Rt,st.a)):((De=d(bt,It,st))+(Rt=-d(bt,yt,st))<0&&(De=-De,Rt=-Rt),Je.a=h(De,It.a,Rt,yt.a)):Je.a=(It.a+st.a)/2,l(Je,_.a)&&(Je.b=_.a.b,Je.a=_.a.a),bt=l(Ge,Le)?Ge:Le,l(bt,Je)&&(Je.b=bt.b,Je.a=bt.a),a(Je,Ge)||a(Je,Le))return N(_,$),0;if(!a(Me,_.a)&&0<=m(Me,_.a,Je)||!a(He,_.a)&&m(He,_.a,Je)<=0){if(He===_.a)Z(re.b),g(ye.b,re),re=Ae($=K($)).a,O(_,Ae($),H),D(_,$,re.b.e,re,re,!0);else{if(Me!==_.a)return 0<=m(Me,_.a,Je)&&(ve($).b=$.b=!0,Z(re.b),re.a.b=_.a.b,re.a.a=_.a.a),void(m(He,_.a,Je)<=0&&($.b=H.b=!0,Z(ye.b),ye.a.b=_.a.b,ye.a.a=_.a.a));for(Z(ye.b),g(re.e,ye.b.e),Le=(Ge=H=$).a.b.a;(Ge=ve(Ge)).a.b.a===Le;);Ge=Ae($=Ge).a.b.c,H.a=ye.b.e,D(_,$,(ye=O(_,H,null)).c,re.b.c,Ge,!0)}return 1}Z(re.b),Z(ye.b),g(ye.b.e,re),re.a.b=Je.b,re.a.a=Je.a,re.a.h=Se(_.e,re.a),re=re.a,ye=[0,0,0,0],Je=[Ge.d,Me.d,Le.d,He.d],re.g[0]=re.g[1]=re.g[2]=0,T(re,Ge,Me,ye,0),T(re,Le,He,ye,2),le(_,re,Je,ye,!0),ve($).b=$.b=H.b=!0}}function te(_,$){for(var H=Ae($);;){for(;H.b;)H=Ae($=H);if(!$.b&&(($=ve(H=$))===null||!$.b))break;$.b=!1;var re=$.a,ye=H.a;if(Ge=re.b.a!==ye.b.a)e:{var Ge,Le=Ae(Ge=$),Me=Ge.a,He=Le.a,Je=void 0;if(l(Me.b.a,He.b.a)){if(m(Me.b.a,He.b.a,Me.a)<0){Ge=!1;break e}ve(Ge).b=Ge.b=!0,Je=Z(Me),g(He.b,Je),Je.d.c=Ge.d}else{if(0<m(He.b.a,Me.b.a,He.a)){Ge=!1;break e}Ge.b=Le.b=!0,Je=Z(He),g(Me.e,He.b),Je.b.d.c=Ge.d}Ge=!0}if(Ge&&(H.c?(M(H),y(ye),ye=(H=Ae($)).a):$.c&&(M($),y(re),re=($=ve(H)).a)),re.a!==ye.a){if(re.b.a===ye.b.a||$.c||H.c||re.b.a!==_.a&&ye.b.a!==_.a)N(_,$);else if(z(_,$))break}re.a===ye.a&&re.b.a===ye.b.a&&(Y(ye,re),M($),y(re),$=ve(H))}}function ne(_,$){var H=new Ze,re=f(_.b);re.a.b=4e150,re.a.a=$,re.b.a.b=-4e150,re.b.a.a=$,_.a=re.b.a,H.a=re,H.f=0,H.d=!1,H.c=!1,H.h=!0,H.b=!1,re=oe(re=_.f,re.a,H),H.e=re}function ee(_){this.a=new ie,this.b=_,this.c=U}function oe(_,$,H){for(;($=$.c).b!==null&&!_.c(_.b,$.b,H););return _=new ie(H,$.a,$),$.a.c=_,$.a=_}function ie(_,$,H){this.b=_||null,this.a=$||this,this.c=H||this}function ce(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function he(_,$){if(_.d!==$)for(;_.d!==$;)if(_.d<$)switch(_.d){case 0:q(_,100151),_.u(null);break;case 1:q(_,100152),_.t()}else switch(_.d){case 2:q(_,100154),_.v();break;case 1:q(_,100153),_.w()}}function q(_,$){_.p&&_.p($,_.c)}function me(_,$){this.b=_||this,this.d=$||this,this.a=null,this.c=!1}function ge(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function be(){this.c=new pe,this.a=new me,this.b=new ge,this.d=new ge,this.b.b=this.d,this.d.b=this.b}function pe(_,$){this.e=_||this,this.f=$||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function xe(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new We}function Se(_,$){var H,re,ye;return _.e?(2*(re=++(H=_.b).a)>H.f&&(H.f*=2,H.c=Ke(H.c,H.f+1)),H.b===0?ye=re:(ye=H.b,H.b=H.c[H.b]),H.e[ye]=$,H.c[ye]=re,H.d[re]=ye,H.h&&qe(H,re),ye):(H=_.a++,_.c[H]=$,-(H+1))}function ke(_){if(_.a===0)return ze(_.b);var $=_.c[_.d[_.a-1]];if(_.b.a!==0&&l($e(_.b),$))return ze(_.b);for(;--_.a,0<_.a&&_.c[_.d[_.a-1]]===null;);return $}function We(){this.d=Ke([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Ke(_,$){for(var H=Array($),re=0;re<_.length;re++)H[re]=_[re];for(;re<$;re++)H[re]=0;return H}function $e(_){return _.e[_.d[1]]}function ze(_){var $=_.d,H=_.e,re=_.c,ye=$[1],Ge=H[ye];return 0<_.a&&($[1]=$[_.a],re[$[1]]=1,H[ye]=null,re[ye]=_.b,_.b=ye,0<--_.a&&it(_,1)),Ge}function it(_,$){for(var H=_.d,re=_.e,ye=_.c,Ge=$,Le=H[Ge];;){var Me=Ge<<1,He=(Me<_.a&&l(re[H[Me+1]],re[H[Me]])&&(Me+=1),H[Me]);if(Me>_.a||l(re[Le],re[He])){ye[H[Ge]=Le]=Ge;break}ye[H[Ge]=He]=Ge,Ge=Me}}function qe(_,$){for(var H=_.d,re=_.e,ye=_.c,Ge=$,Le=H[Ge];;){var Me=Ge>>1,He=H[Me];if(Me==0||l(re[He],re[Le])){ye[H[Ge]=Le]=Ge;break}ye[H[Ge]=He]=Ge,Ge=Me}}function Ze(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Ae(_){return _.e.c.b}function ve(_){return _.e.a.b}(o=ce.prototype).x=function(){he(this,0)},o.B=function(_,$){switch(_){case 100142:return;case 100140:switch($){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=$)}break;case 100141:return void(this.m=!!$);default:return void q(this,100900)}q(this,100901)},o.y=function(_){switch(_){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:q(this,100900)}return!1},o.A=function(_,$,H){this.j[0]=_,this.j[1]=$,this.j[2]=H},o.z=function(_,$){var H=$||null;switch(_){case 100100:case 100106:this.h=H;break;case 100104:case 100110:this.l=H;break;case 100101:case 100107:this.k=H;break;case 100102:case 100108:this.i=H;break;case 100103:case 100109:this.p=H;break;case 100105:case 100111:this.o=H;break;case 100112:this.r=H;break;default:q(this,100900)}},o.C=function(_,$){var H=!1,re=[0,0,0];he(this,2);for(var ye=0;ye<3;++ye){var Ge=_[ye];Ge<-1e150&&(Ge=-1e150,H=!0),1e150<Ge&&(Ge=1e150,H=!0),re[ye]=Ge}H&&q(this,100155),(H=this.q)===null?g(H=f(this.b),H.b):(Z(H),H=H.e),H.a.d=$,H.a.g[0]=re[0],H.a.g[1]=re[1],H.a.g[2]=re[2],H.f=1,H.b.f=-1,this.q=H},o.u=function(_){he(this,0),this.d=1,this.b=new be,this.c=_},o.t=function(){he(this,1),this.d=2,this.q=null},o.v=function(){he(this,2),this.d=1},o.w=function(){he(this,1),this.d=0;var _,$,H=this.j[0],re=this.j[1],ye=this.j[2],Ge=!1,Le=[H,re,ye];if(H===0&&re===0&&ye===0){for(var re=[-2e150,-2e150,-2e150],Me=[2e150,2e150,2e150],ye=[],He=[],H=(Ge=this.b.c).e;H!==Ge;H=H.e)for(var Je=0;Je<3;++Je){var De=H.g[Je];De<Me[Je]&&(Me[Je]=De,He[Je]=H),De>re[Je]&&(re[Je]=De,ye[Je]=H)}if(re[1]-Me[1]>re[H=0]-Me[0]&&(H=1),Me[H=re[2]-Me[2]>re[H]-Me[H]?2:H]>=re[H])Le[0]=0,Le[1]=0,Le[2]=1;else{for(Me=He[H],ye=ye[H],He=[re=0,0,0],Me=[Me.g[0]-ye.g[0],Me.g[1]-ye.g[1],Me.g[2]-ye.g[2]],Je=[0,0,0],H=Ge.e;H!==Ge;H=H.e)Je[0]=H.g[0]-ye.g[0],Je[1]=H.g[1]-ye.g[1],Je[2]=H.g[2]-ye.g[2],He[0]=Me[1]*Je[2]-Me[2]*Je[1],He[1]=Me[2]*Je[0]-Me[0]*Je[2],He[2]=Me[0]*Je[1]-Me[1]*Je[0],re<(De=He[0]*He[0]+He[1]*He[1]+He[2]*He[2])&&(re=De,Le[0]=He[0],Le[1]=He[1],Le[2]=He[2]);re<=0&&(Le[0]=Le[1]=Le[2]=0,Le[A(Me)]=1)}Ge=!0}for(He=A(Le),H=this.b.c,re=(He+1)%3,ye=(He+2)%3,He=0<Le[He]?1:-1,Le=H.e;Le!==H;Le=Le.e)Le.b=Le.g[re],Le.a=He*Le.g[ye];if(Ge){for(Le=0,H=(Ge=this.b.a).b;H!==Ge;H=H.b)if(!((re=H.a).f<=0))for(;Le+=(re.a.b-re.b.a.b)*(re.a.a+re.b.a.a),(re=re.e)!==H.a;);if(Le<0)for(Ge=(Le=this.b.c).e;Ge!==Le;Ge=Ge.e)Ge.a=-Ge.a}for(this.n=!1,Le=this.b.b,H=Le.h;H!==Le;H=Ge)Ge=H.h,re=H.e,a(H.a,H.b.a)&&H.e.e!==H&&(X(this,re,H),y(H),re=(H=re).e),re.e===H&&(re!==H&&(re!==Ge&&re!==Ge.b||(Ge=Ge.h),y(re)),H!==Ge&&H!==Ge.b||(Ge=Ge.h),y(H));for(this.e=Le=new xe,Ge=this.b.c,H=Ge.e;H!==Ge;H=H.e)H.h=Se(Le,H);var Rt=Le;Rt.d=[];for(var bt=0;bt<Rt.a;bt++)Rt.d[bt]=bt;Rt.d.sort(function(yt){return function(Ot,rn){return l(yt[Ot],yt[rn])?1:-1}}(Rt.c)),Rt.e=!0;for(var st=Rt.b,It=st.a;1<=It;--It)it(st,It);for(st.h=!0,this.f=new ee(this),ne(this,-4e150),ne(this,4e150);(Le=ke(this.e))!==null;){for(;;){e:if((H=this.e).a===0)Ge=$e(H.b);else if(Ge=H.c[H.d[H.a-1]],H.b.a!==0&&l(H=$e(H.b),Ge)){Ge=H;break e}if(Ge===null||!a(Ge,Le))break;Ge=ke(this.e),X(this,Le.c,Ge.c)}(function yt(Ot,rn){for(var vr,Bt=(Ot.a=rn).c;Bt.i===null;)if((Bt=Bt.c)===rn.c){var Bt=Ot,$t=rn;(Et=new Ze).a=$t.c.b;for(var Or=(wt=Bt.f).a;(Or=Or.a).b!==null&&!wt.c(wt.b,Et,Or.b););var wt,Pr,Tr=Ae(wt=Or.b),Et=wt.a,Or=Tr.a;return void(m(Et.b.a,$t,Et.a)===0?a((Et=wt.a).a,$t)||a(Et.b.a,$t)||(Z(Et.b),wt.c&&(y(Et.c),wt.c=!1),g($t.c,Et),yt(Bt,$t)):(Pr=l(Or.b.a,Et.b.a)?wt:Tr,Tr=void 0,wt.d||Pr.c?(Tr=Pr===wt?I($t.c.b,Et.e):I(Or.b.c.b,$t.c).b,Pr.c?j(Pr,Tr):((wt=P(Et=Bt,wt,Tr)).f=ve(wt).f+wt.a.f,wt.d=J(Et,wt.f)),yt(Bt,$t)):D(Bt,wt,$t.c,$t.c,null,!0)))}wt=(Et=Ae(Bt=K(Bt.i))).a,(Et=O(Ot,Et,null)).c===wt?(Et=(wt=Et).c,Or=Ae(Bt),Tr=Bt.a,Pr=Or.a,vr=!1,Tr.b.a!==Pr.b.a&&z(Ot,Bt),a(Tr.a,Ot.a)&&(g(Et.b.e,Tr),Et=Ae(Bt=K(Bt)).a,O(Ot,Ae(Bt),Or),vr=!0),a(Pr.a,Ot.a)&&(g(wt,Pr.b.e),wt=O(Ot,Or,null),vr=!0),vr?D(Ot,Bt,wt.c,Et,Et,!0):($t=l(Pr.a,Tr.a)?Pr.b.e:Tr,D(Ot,Bt,$t=I(wt.c.b,$t),$t.c,$t.c,!1),$t.b.i.c=!0,te(Ot,Bt))):D(Ot,Bt,Et.c,wt,wt,!0)})(this,Le)}for(this.a=this.f.a.a.b.a.a,Le=0;(Ge=this.f.a.a.b)!==null;)Ge.h||++Le,M(Ge);for(this.f=null,(Le=this.e).b=null,Le.d=null,this.e=Le.c=null,Le=this.b,H=Le.a.b;H!==Le.a;H=Ge)Ge=H.b,(H=H.a).e.e===H&&(Y(H.c,H),y(H));if(!this.n){if(Le=this.b,this.m)for(H=Le.b.h;H!==Le.b;H=Ge)Ge=H.h,H.b.d.c!==H.d.c?H.f=H.d.c?1:-1:y(H);else for(H=Le.a.b;H!==Le.a;H=Ge)if(Ge=H.b,H.c){for(H=H.a;l(H.b.a,H.a);H=H.c.b);for(;l(H.a,H.b.a);H=H.e);for(re=H.c.b,ye=void 0;H.e!==re;)if(l(H.b.a,re.a)){for(;re.e!==H&&(l(($=re.e).b.a,$.a)||m(re.a,re.b.a,re.e.b.a)<=0);)re=(ye=I(re.e,re)).b;re=re.c.b}else{for(;re.e!==H&&(l((_=H.c.b).a,_.b.a)||0<=m(H.b.a,H.a,H.c.b.a));)H=(ye=I(H,H.c.b)).b;H=H.e}for(;re.e.e!==H;)ye=I(re.e,re),re=ye.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ge=(Le=this.b).a.b;Ge!==Le.a;Ge=Ge.b)if(Ge.c){for(this.h&&this.h(2,this.c),H=Ge.a;this.k&&this.k(H.a.d,this.c),(H=H.e)!==Ge.a;);this.i&&this.i(this.c)}}else{for(Le=this.b,Ge=!!this.l,H=!1,re=-1,ye=Le.a.d;ye!==Le.a;ye=ye.d)if(ye.c)for(H||(this.h&&this.h(4,this.c),H=!0),He=ye.a;Ge&&(Me=He.b.d.c?0:1,re!==Me&&(re=Me,this.l&&this.l(!!re,this.c))),this.k&&this.k(He.a.d,this.c),(He=He.e)!==ye.a;);H&&this.i&&this.i(this.c)}if(this.r){for(Le=this.b,H=Le.a.b;H!==Le.a;H=Ge)if(Ge=H.b,!H.c){for(ye=(re=H.a).e,He=void 0;ye=(He=ye).e,(He.d=null)===He.b.d&&(He.c===He?w(He.a,null):(He.a.c=He.c,R(He,He.b.e)),(Me=He.b).c===Me?w(Me.a,null):(Me.a.c=Me.c,R(Me,Me.b.e)),x(He)),He!==re;);re=H.d,((H=H.b).d=re).b=H}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:ce,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},ce.prototype.gluDeleteTess=ce.prototype.x,ce.prototype.gluTessProperty=ce.prototype.B,ce.prototype.gluGetTessProperty=ce.prototype.y,ce.prototype.gluTessNormal=ce.prototype.A,ce.prototype.gluTessCallback=ce.prototype.z,ce.prototype.gluTessVertex=ce.prototype.C,ce.prototype.gluTessBeginPolygon=ce.prototype.u,ce.prototype.gluTessBeginContour=ce.prototype.t,ce.prototype.gluTessEndContour=ce.prototype.v,ce.prototype.gluTessEndPolygon=ce.prototype.w,i!==void 0&&(i.exports=this.libtess)},{}],240:[function(r,i,s){function o(l,c,m,p){var u=0,d=(p=p===void 0?{}:p).loop===void 0?null:p.loop,h=p.palette===void 0?null:p.palette;if(c<=0||m<=0||65535<c||65535<m)throw new Error("Width/Height invalid.");function f(V){if(V=V.length,V<2||256<V||V&V-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return V}l[u++]=71,l[u++]=73,l[u++]=70,l[u++]=56,l[u++]=57,l[u++]=97;var g=0,y=0;if(h!==null){for(var Z=f(h);Z>>=1;)++g;if(Z=1<<g,--g,p.background!==void 0){if(Z<=(y=p.background))throw new Error("Background index out of range.");if(y===0)throw new Error("Background index explicitly passed as 0.")}}if(l[u++]=255&c,l[u++]=c>>8&255,l[u++]=255&m,l[u++]=m>>8&255,l[u++]=(h!==null?128:0)|g,l[u++]=y,l[u++]=0,h!==null)for(var I=0,G=h.length;I<G;++I){var R=h[I];l[u++]=R>>16&255,l[u++]=R>>8&255,l[u++]=255&R}if(d!==null){if(d<0||65535<d)throw new Error("Loop count invalid.");l[u++]=33,l[u++]=255,l[u++]=11,l[u++]=78,l[u++]=69,l[u++]=84,l[u++]=83,l[u++]=67,l[u++]=65,l[u++]=80,l[u++]=69,l[u++]=50,l[u++]=46,l[u++]=48,l[u++]=3,l[u++]=1,l[u++]=255&d,l[u++]=d>>8&255,l[u++]=0}var C=!1;this.addFrame=function(V,x,w,k,A,Y){if(C===!0&&(--u,C=!1),Y=Y===void 0?{}:Y,V<0||x<0||65535<V||65535<x)throw new Error("x/y invalid.");if(w<=0||k<=0||65535<w||65535<k)throw new Error("Width/Height invalid.");if(A.length<w*k)throw new Error("Not enough pixels for the frame size.");var U=!0,M=Y.palette;if(M==null&&(U=!1,M=h),M==null)throw new Error("Must supply either a local or global palette.");for(var K=f(M),j=0;K>>=1;)++j;var K=1<<j,P=Y.delay===void 0?0:Y.delay,J=Y.disposal===void 0?0:Y.disposal;if(J<0||3<J)throw new Error("Disposal out of range.");var E=!1,O=0;if(Y.transparent!==void 0&&Y.transparent!==null&&(E=!0,(O=Y.transparent)<0||K<=O))throw new Error("Transparent color index.");if(J===0&&!E&&P===0||(l[u++]=33,l[u++]=249,l[u++]=4,l[u++]=J<<2|(E===!0?1:0),l[u++]=255&P,l[u++]=P>>8&255,l[u++]=O,l[u++]=0),l[u++]=44,l[u++]=255&V,l[u++]=V>>8&255,l[u++]=255&x,l[u++]=x>>8&255,l[u++]=255&w,l[u++]=w>>8&255,l[u++]=255&k,l[u++]=k>>8&255,l[u++]=U===!0?128|j-1:0,U===!0)for(var D=0,le=M.length;D<le;++D){var X=M[D];l[u++]=X>>16&255,l[u++]=X>>8&255,l[u++]=255&X}return u=function(T,N,z,te){T[N++]=z;var ne=N++,ee=1<<z,oe=ee-1,ie=1+ee,ce=1+ie,he=z+1,q=0,me=0;function ge(ze){for(;ze<=q;)T[N++]=255&me,me>>=8,q-=8,N===ne+256&&(T[ne]=255,ne=N++)}function be(ze){me|=ze<<q,q+=he,ge(8)}var pe=te[0]&oe,xe={};be(ee);for(var Se=1,ke=te.length;Se<ke;++Se){var We=te[Se]&oe,Ke=pe<<8|We,$e=xe[Ke];if($e===void 0){for(me|=pe<<q,q+=he;8<=q;)T[N++]=255&me,me>>=8,q-=8,N===ne+256&&(T[ne]=255,ne=N++);ce===4096?(be(ee),ce=1+ie,he=z+1,xe={}):(1<<he<=ce&&++he,xe[Ke]=ce++),pe=We}else pe=$e}return be(pe),be(ie),ge(1),ne+1===N?T[ne]=0:(T[ne]=N-ne-1,T[N++]=0),N}(l,u,j<2?2:j,A)},this.end=function(){return C===!1&&(l[u++]=59,C=!0),u},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(V){l=V},this.getOutputBufferPosition=function(){return u},this.setOutputBufferPosition=function(V){u=V}}function a(l,c,m,p){for(var u=l[c++],d=1<<u,h=1+d,f=1+h,g=u+1,y=(1<<g)-1,Z=0,I=0,G=0,R=l[c++],C=new Int32Array(4096),V=null;;){for(;Z<16&&R!==0;)I|=l[c++]<<Z,Z+=8,R===1?R=l[c++]:--R;if(Z<g)break;var x=I&y;if(I>>=g,Z-=g,x==d)f=1+h,y=(1<<(g=u+1))-1,V=null;else{if(x==h)break;for(var w=x<f?x:V,k=0,A=w;d<A;)A=C[A]>>8,++k;var Y=A;if(p<G+k+(w!==x?1:0))return void console.log("Warning, gif stream longer than expected.");m[G++]=Y;var U=G+=k;for(w!==x&&(m[G++]=Y),A=w;k--;)A=C[A],m[--U]=255&A,A>>=8;V!==null&&f<4096&&(C[f++]=V<<8|Y,y+1<=f&&g<12&&(++g,y=y<<1|1)),V=x}}G!==p&&console.log("Warning, gif stream shorter than expected.")}try{s.GifWriter=o,s.GifReader=function(l){var c=0;if(l[c++]!==71||l[c++]!==73||l[c++]!==70||l[c++]!==56||(l[c++]+1&253)!=56||l[c++]!==97)throw new Error("Invalid GIF 87a/89a header.");var m=l[c++]|l[c++]<<8,p=l[c++]|l[c++]<<8,u=l[c++],d=1<<1+(7&u),h=(l[c++],l[c++],null),f=null,g=(u>>7&&(h=c,c+=3*(f=d)),!0),y=[],Z=0,I=null,G=0,R=null;for(this.width=m,this.height=p;g&&c<l.length;)switch(l[c++]){case 33:switch(l[c++]){case 255:if(l[c]!==11||l[c+1]==78&&l[c+2]==69&&l[c+3]==84&&l[c+4]==83&&l[c+5]==67&&l[c+6]==65&&l[c+7]==80&&l[c+8]==69&&l[c+9]==50&&l[c+10]==46&&l[c+11]==48&&l[c+12]==3&&l[c+13]==1&&l[c+16]==0)c+=14,R=l[c++]|l[c++]<<8,c++;else for(c+=12;;){if(!(0<=(V=l[c++])))throw Error("Invalid block size");if(V===0)break;c+=V}break;case 249:if(l[c++]!==4||l[c+4]!==0)throw new Error("Invalid graphics extension block.");var C=l[c++],Z=l[c++]|l[c++]<<8,I=l[c++];(1&C)==0&&(I=null),G=C>>2&7,c++;break;case 254:for(;;){if(!(0<=(V=l[c++])))throw Error("Invalid block size");if(V===0)break;c+=V}break;default:throw new Error("Unknown graphic control label: 0x"+l[c-1].toString(16))}break;case 44:var V,x=l[c++]|l[c++]<<8,w=l[c++]|l[c++]<<8,k=l[c++]|l[c++]<<8,A=l[c++]|l[c++]<<8,P=l[c++],Y=P>>6&1,U=1<<1+(7&P),M=h,j=f,K=!1,P=(P>>7&&(K=!0,M=c,c+=3*(j=U)),c);for(c++;;){if(!(0<=(V=l[c++])))throw Error("Invalid block size");if(V===0)break;c+=V}y.push({x,y:w,width:k,height:A,has_local_palette:K,palette_offset:M,palette_size:j,data_offset:P,data_length:c-P,transparent_index:I,interlaced:!!Y,delay:Z,disposal:G});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+l[c-1].toString(16))}this.numFrames=function(){return y.length},this.loopCount=function(){return R},this.frameInfo=function(J){if(J<0||J>=y.length)throw new Error("Frame index out of range.");return y[J]},this.decodeAndBlitFrameBGRA=function(J,E){for(var J=this.frameInfo(J),O=J.width*J.height,D=new Uint8Array(O),le=(a(l,J.data_offset,D,O),J.palette_offset),X=J.transparent_index,T=(X===null&&(X=256),J.width),N=m-T,z=T,te=4*(J.y*m+J.x),ne=4*((J.y+J.height)*m+J.x),ee=te,oe=4*N,ie=(J.interlaced===!0&&(oe+=4*m*7),8),ce=0,he=D.length;ce<he;++ce){var q,me,ge=D[ce];z===0&&(z=T,ne<=(ee+=oe)&&(oe=4*N+4*m*(ie-1),ee=te+(T+N)*(ie<<1),ie>>=1)),ge===X?ee+=4:(q=l[le+3*ge],me=l[le+3*ge+1],ge=l[le+3*ge+2],E[ee++]=ge,E[ee++]=me,E[ee++]=q,E[ee++]=255),--z}},this.decodeAndBlitFrameRGBA=function(J,E){for(var J=this.frameInfo(J),O=J.width*J.height,D=new Uint8Array(O),le=(a(l,J.data_offset,D,O),J.palette_offset),X=J.transparent_index,T=(X===null&&(X=256),J.width),N=m-T,z=T,te=4*(J.y*m+J.x),ne=4*((J.y+J.height)*m+J.x),ee=te,oe=4*N,ie=(J.interlaced===!0&&(oe+=4*m*7),8),ce=0,he=D.length;ce<he;++ce){var q,me,ge=D[ce];z===0&&(z=T,ne<=(ee+=oe)&&(oe=4*N+4*m*(ie-1),ee=te+(T+N)*(ie<<1),ie>>=1)),ge===X?ee+=4:(q=l[le+3*ge],me=l[le+3*ge+1],ge=l[le+3*ge+2],E[ee++]=q,E[ee++]=me,E[ee++]=ge,E[ee++]=255),--z}}}}catch{}},{}],241:[function(r,i,s){(function(o){var a,l;a=this,l=function(c){function m(L){if(this==null)throw TypeError();var v,S=String(this),W=S.length,L=L?Number(L):0;if(!((L=L!=L?0:L)<0||W<=L))return 55296<=(v=S.charCodeAt(L))&&v<=56319&&L+1<W&&56320<=(W=S.charCodeAt(L+1))&&W<=57343?1024*(v-55296)+W-56320+65536:v}String.prototype.codePointAt||((p=function(){try{var b={},v=Object.defineProperty,S=v(b,b,b)&&v}catch{}return S}())?p(String.prototype,"codePointAt",{value:m,configurable:!0,writable:!0}):String.prototype.codePointAt=m);var p,u=0,d=-3;function h(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function f(b,v){this.source=b,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=v,this.destLen=0,this.ltree=new h,this.dtree=new h}var g=new h,y=new h,Z=new Uint8Array(30),I=new Uint16Array(30),G=new Uint8Array(30),R=new Uint16Array(30),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),V=new h,x=new Uint8Array(320);function w(b,v,S,W){for(var L,B=0;B<S;++B)b[B]=0;for(B=0;B<30-S;++B)b[B+S]=B/S|0;for(L=W,B=0;B<30;++B)v[B]=L,L+=1<<b[B]}var k=new Uint16Array(16);function A(b,v,S,W){for(var L,B=0;B<16;++B)b.table[B]=0;for(B=0;B<W;++B)b.table[v[S+B]]++;for(B=L=b.table[0]=0;B<16;++B)k[B]=L,L+=b.table[B];for(B=0;B<W;++B)v[S+B]&&(b.trans[k[v[S+B]]++]=B)}function Y(b,v,S){if(!v)return S;for(;b.bitcount<24;)b.tag|=b.source[b.sourceIndex++]<<b.bitcount,b.bitcount+=8;var W=b.tag&65535>>>16-v;return b.tag>>>=v,b.bitcount-=v,W+S}function U(b,v){for(;b.bitcount<24;)b.tag|=b.source[b.sourceIndex++]<<b.bitcount,b.bitcount+=8;for(var S=0,W=0,L=0,B=b.tag;W=2*W+(1&B),B>>>=1,S+=v.table[++L],0<=(W-=v.table[L]););return b.tag=B,b.bitcount-=L,v.trans[S+W]}function M(b,v,S){for(;;){var W=U(b,v);if(W===256)return u;if(W<256)b.dest[b.destLen++]=W;else for(var L,B=Y(b,Z[W-=257],I[W]),W=U(b,S),F=L=b.destLen-Y(b,G[W],R[W]);F<L+B;++F)b.dest[b.destLen++]=b.dest[F]}}for(var j=g,K=y,P=0;P<7;++P)j.table[P]=0;for(j.table[7]=24,j.table[8]=152,j.table[9]=112,P=0;P<24;++P)j.trans[P]=256+P;for(P=0;P<144;++P)j.trans[24+P]=P;for(P=0;P<8;++P)j.trans[168+P]=280+P;for(P=0;P<112;++P)j.trans[176+P]=144+P;for(P=0;P<5;++P)K.table[P]=0;for(K.table[5]=32,P=0;P<32;++P)K.trans[P]=P;w(Z,I,4,3),w(G,R,2,1),Z[28]=0,I[28]=258;var J=function(b,v){var S,W,L,B=new f(b,v);do{switch(L=void 0,(W=B).bitcount--||(W.tag=W.source[W.sourceIndex++],W.bitcount=7),L=1&W.tag,W.tag>>>=1,W=L,Y(B,2,0)){case 0:S=function(Ce){for(var at,vt;8<Ce.bitcount;)Ce.sourceIndex--,Ce.bitcount-=8;if((at=256*Ce.source[Ce.sourceIndex+1]+Ce.source[Ce.sourceIndex])!==(65535&~(256*Ce.source[Ce.sourceIndex+3]+Ce.source[Ce.sourceIndex+2])))return d;for(Ce.sourceIndex+=4,vt=at;vt;--vt)Ce.dest[Ce.destLen++]=Ce.source[Ce.sourceIndex++];return Ce.bitcount=0,u}(B);break;case 1:S=M(B,g,y);break;case 2:we=Xe=Ue=Ve=F=ue=Ie=Re=fe=se=ae=Q=void 0;for(var F,Q=B,ae=B.ltree,se=B.dtree,fe=Y(Q,5,257),Re=Y(Q,5,1),Ie=Y(Q,4,4),ue=0;ue<19;++ue)x[ue]=0;for(ue=0;ue<Ie;++ue){var Ue=Y(Q,3,0);x[C[ue]]=Ue}for(A(V,x,0,19),F=0;F<fe+Re;){var Xe=U(Q,V);switch(Xe){case 16:for(var we=x[F-1],Ve=Y(Q,2,3);Ve;--Ve)x[F++]=we;break;case 17:for(Ve=Y(Q,3,3);Ve;--Ve)x[F++]=0;break;case 18:for(Ve=Y(Q,7,11);Ve;--Ve)x[F++]=0;break;default:x[F++]=Xe}}A(ae,x,0,fe),A(se,x,fe,Re),S=M(B,B.ltree,B.dtree);break;default:S=d}if(S!==u)throw new Error("Data error")}while(!W);return B.destLen<B.dest.length?typeof B.dest.slice=="function"?B.dest.slice(0,B.destLen):B.dest.subarray(0,B.destLen):B.dest};function E(b,v,S,W,L){return Math.pow(1-L,3)*b+3*Math.pow(1-L,2)*L*v+3*(1-L)*Math.pow(L,2)*S+Math.pow(L,3)*W}function O(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function D(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function le(b){throw new Error(b)}function X(b,v){b||le(v)}O.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},O.prototype.addPoint=function(b,v){typeof b=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=b,this.x2=b),b<this.x1&&(this.x1=b),b>this.x2&&(this.x2=b)),typeof v=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=v,this.y2=v),v<this.y1&&(this.y1=v),v>this.y2&&(this.y2=v))},O.prototype.addX=function(b){this.addPoint(b,null)},O.prototype.addY=function(b){this.addPoint(null,b)},O.prototype.addBezier=function(b,v,S,W,L,B,F,Q){var ae=[b,v],se=[S,W],fe=[L,B],Re=[F,Q];this.addPoint(b,v),this.addPoint(F,Q);for(var Ie=0;Ie<=1;Ie++){var ue,Ue=6*ae[Ie]-12*se[Ie]+6*fe[Ie],Xe=-3*ae[Ie]+9*se[Ie]-9*fe[Ie]+3*Re[Ie],we=3*se[Ie]-3*ae[Ie];Xe==0?Ue==0||0<(ue=-we/Ue)&&ue<1&&(Ie===0&&this.addX(E(ae[Ie],se[Ie],fe[Ie],Re[Ie],ue)),Ie===1&&this.addY(E(ae[Ie],se[Ie],fe[Ie],Re[Ie],ue))):(ue=Math.pow(Ue,2)-4*we*Xe)<0||(0<(we=(-Ue+Math.sqrt(ue))/(2*Xe))&&we<1&&(Ie===0&&this.addX(E(ae[Ie],se[Ie],fe[Ie],Re[Ie],we)),Ie===1&&this.addY(E(ae[Ie],se[Ie],fe[Ie],Re[Ie],we))),0<(we=(-Ue-Math.sqrt(ue))/(2*Xe))&&we<1&&(Ie===0&&this.addX(E(ae[Ie],se[Ie],fe[Ie],Re[Ie],we)),Ie===1&&this.addY(E(ae[Ie],se[Ie],fe[Ie],Re[Ie],we))))}},O.prototype.addQuad=function(b,v,S,W,L,B){S=b+2/3*(S-b),W=v+2/3*(W-v),this.addBezier(b,v,S,W,S+1/3*(L-b),W+1/3*(B-v),L,B)},D.prototype.moveTo=function(b,v){this.commands.push({type:"M",x:b,y:v})},D.prototype.lineTo=function(b,v){this.commands.push({type:"L",x:b,y:v})},D.prototype.curveTo=D.prototype.bezierCurveTo=function(b,v,S,W,L,B){this.commands.push({type:"C",x1:b,y1:v,x2:S,y2:W,x:L,y:B})},D.prototype.quadTo=D.prototype.quadraticCurveTo=function(b,v,S,W){this.commands.push({type:"Q",x1:b,y1:v,x:S,y:W})},D.prototype.close=D.prototype.closePath=function(){this.commands.push({type:"Z"})},D.prototype.extend=function(b){var v;if(b.commands)b=b.commands;else if(b instanceof O)return v=b,this.moveTo(v.x1,v.y1),this.lineTo(v.x2,v.y1),this.lineTo(v.x2,v.y2),this.lineTo(v.x1,v.y2),void this.close();Array.prototype.push.apply(this.commands,b)},D.prototype.getBoundingBox=function(){for(var b=new O,v=0,S=0,W=0,L=0,B=0;B<this.commands.length;B++){var F=this.commands[B];switch(F.type){case"M":b.addPoint(F.x,F.y),v=W=F.x,S=L=F.y;break;case"L":b.addPoint(F.x,F.y),W=F.x,L=F.y;break;case"Q":b.addQuad(W,L,F.x1,F.y1,F.x,F.y),W=F.x,L=F.y;break;case"C":b.addBezier(W,L,F.x1,F.y1,F.x2,F.y2,F.x,F.y),W=F.x,L=F.y;break;case"Z":W=v,L=S;break;default:throw new Error("Unexpected path command "+F.type)}}return b.isEmpty()&&b.addPoint(0,0),b},D.prototype.draw=function(b){b.beginPath();for(var v=0;v<this.commands.length;v+=1){var S=this.commands[v];S.type==="M"?b.moveTo(S.x,S.y):S.type==="L"?b.lineTo(S.x,S.y):S.type==="C"?b.bezierCurveTo(S.x1,S.y1,S.x2,S.y2,S.x,S.y):S.type==="Q"?b.quadraticCurveTo(S.x1,S.y1,S.x,S.y):S.type==="Z"&&b.closePath()}this.fill&&(b.fillStyle=this.fill,b.fill()),this.stroke&&(b.strokeStyle=this.stroke,b.lineWidth=this.strokeWidth,b.stroke())},D.prototype.toPathData=function(b){function v(){for(var B=arguments,F="",Q=0;Q<arguments.length;Q+=1){var ae=B[Q];0<=ae&&0<Q&&(F+=" "),F+=(ae=ae,Math.round(ae)===ae?""+Math.round(ae):ae.toFixed(b))}return F}b=b!==void 0?b:2;for(var S="",W=0;W<this.commands.length;W+=1){var L=this.commands[W];L.type==="M"?S+="M"+v(L.x,L.y):L.type==="L"?S+="L"+v(L.x,L.y):L.type==="C"?S+="C"+v(L.x1,L.y1,L.x2,L.y2,L.x,L.y):L.type==="Q"?S+="Q"+v(L.x1,L.y1,L.x,L.y):L.type==="Z"&&(S+="Z")}return S},D.prototype.toSVG=function(b){var v=(v='<path d="')+this.toPathData(b)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?v+=' fill="none"':v+=' fill="'+this.fill+'"'),this.stroke&&(v+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),v+="/>"},D.prototype.toDOMElement=function(v){var v=this.toPathData(v),S=document.createElementNS("http://www.w3.org/2000/svg","path");return S.setAttribute("d",v),S};var T={fail:le,argument:X,assert:X},N={},z={},te={};function ne(b){return function(){return b}}z.BYTE=function(b){return T.argument(0<=b&&b<=255,"Byte value should be between 0 and 255."),[b]},te.BYTE=ne(1),z.CHAR=function(b){return[b.charCodeAt(0)]},te.CHAR=ne(1),z.CHARARRAY=function(b){for(var v=[],S=0;S<b.length;S+=1)v[S]=b.charCodeAt(S);return v},te.CHARARRAY=function(b){return b.length},z.USHORT=function(b){return[b>>8&255,255&b]},te.USHORT=ne(2),z.SHORT=function(b){return[(b=32768<=b?-(65536-b):b)>>8&255,255&b]},te.SHORT=ne(2),z.UINT24=function(b){return[b>>16&255,b>>8&255,255&b]},te.UINT24=ne(3),z.ULONG=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},te.ULONG=ne(4),z.LONG=function(b){return[(b=2147483648<=b?-(4294967296-b):b)>>24&255,b>>16&255,b>>8&255,255&b]},te.LONG=ne(4),z.FIXED=z.ULONG,te.FIXED=te.ULONG,z.FWORD=z.SHORT,te.FWORD=te.SHORT,z.UFWORD=z.USHORT,te.UFWORD=te.USHORT,z.LONGDATETIME=function(b){return[0,0,0,0,b>>24&255,b>>16&255,b>>8&255,255&b]},te.LONGDATETIME=ne(8),z.TAG=function(b){return T.argument(b.length===4,"Tag should be exactly 4 ASCII characters."),[b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2),b.charCodeAt(3)]},te.TAG=ne(4),z.Card8=z.BYTE,te.Card8=te.BYTE,z.Card16=z.USHORT,te.Card16=te.USHORT,z.OffSize=z.BYTE,te.OffSize=te.BYTE,z.SID=z.USHORT,te.SID=te.USHORT,z.NUMBER=function(b){return-107<=b&&b<=107?[b+139]:108<=b&&b<=1131?[247+((b-=108)>>8),255&b]:-1131<=b&&b<=-108?[251+((b=-b-108)>>8),255&b]:-32768<=b&&b<=32767?z.NUMBER16(b):z.NUMBER32(b)},te.NUMBER=function(b){return z.NUMBER(b).length},z.NUMBER16=function(b){return[28,b>>8&255,255&b]},te.NUMBER16=ne(3),z.NUMBER32=function(b){return[29,b>>24&255,b>>16&255,b>>8&255,255&b]},te.NUMBER32=ne(5),z.REAL=function(b){for(var v=b.toString(),S=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(v),W=(S&&(S=parseFloat("1e"+((S[2]?+S[2]:0)+S[1].length)),v=(Math.round(b*S)/S).toString()),""),L=0,B=v.length;L<B;L+=1){var F=v[L];W+=F==="e"?v[++L]==="-"?"c":"b":F==="."?"a":F==="-"?"e":F}for(var Q=[30],ae=0,se=(W+=1&W.length?"f":"ff").length;ae<se;ae+=2)Q.push(parseInt(W.substr(ae,2),16));return Q},te.REAL=function(b){return z.REAL(b).length},z.NAME=z.CHARARRAY,te.NAME=te.CHARARRAY,z.STRING=z.CHARARRAY,te.STRING=te.CHARARRAY,N.UTF8=function(b,v,S){for(var W=[],L=S,B=0;B<L;B++,v+=1)W[B]=b.getUint8(v);return String.fromCharCode.apply(null,W)},N.UTF16=function(b,v,S){for(var W=[],L=S/2,B=0;B<L;B++,v+=2)W[B]=b.getUint16(v);return String.fromCharCode.apply(null,W)},z.UTF16=function(b){for(var v=[],S=0;S<b.length;S+=1){var W=b.charCodeAt(S);v[v.length]=W>>8&255,v[v.length]=255&W}return v},te.UTF16=function(b){return 2*b.length};var ee,oe={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"},ie=(N.MACSTRING=function(b,v,S,W){var L=oe[W];if(L!==void 0){for(var B="",F=0;F<S;F++){var Q=b.getUint8(v+F);B+=Q<=127?String.fromCharCode(Q):L[127&Q]}return B}},typeof WeakMap=="function"&&new WeakMap);function ce(b){return-128<=b&&b<=127}z.MACSTRING=function(b,v){var S=function(F){if(!ee)for(var Q in ee={},oe)ee[Q]=new String(Q);var ae=ee[F];if(ae!==void 0){if(ie){var se=ie.get(ae);if(se!==void 0)return se}var fe=oe[F];if(fe!==void 0){for(var Re={},Ie=0;Ie<fe.length;Ie++)Re[fe.charCodeAt(Ie)]=Ie+128;return ie&&ie.set(ae,Re),Re}}}(v);if(S!==void 0){for(var W=[],L=0;L<b.length;L++){var B=b.charCodeAt(L);if(128<=B&&(B=S[B])===void 0)return;W[L]=B}return W}},te.MACSTRING=function(b,v){return b=z.MACSTRING(b,v),b!==void 0?b.length:0},z.VARDELTAS=function(b){for(var W=0,v=[];W<b.length;)var S=b[W],W=(S===0?function(L,B,F){for(var Q=0,ae=L.length;B<ae&&Q<64&&L[B]===0;)++B,++Q;return F.push(128|Q-1),B}:-128<=S&&S<=127?function(L,B,F){for(var Q=0,ae=L.length,se=B;se<ae&&Q<64;){var fe=L[se];if(!ce(fe)||fe===0&&se+1<ae&&L[se+1]===0)break;++se,++Q}F.push(Q-1);for(var Re=B;Re<se;++Re)F.push(L[Re]+256&255);return se}:function(L,B,F){for(var Q=0,ae=L.length,se=B;se<ae&&Q<64;){var fe=L[se];if(fe===0||ce(fe)&&se+1<ae&&ce(L[se+1]))break;++se,++Q}F.push(64|Q-1);for(var Re=B;Re<se;++Re){var Ie=L[Re];F.push(Ie+65536>>8&255,Ie+256&255)}return se})(b,W,v);return v},z.INDEX=function(b){for(var v=1,S=[v],W=[],L=0;L<b.length;L+=1){var B=z.OBJECT(b[L]);Array.prototype.push.apply(W,B),v+=B.length,S.push(v)}if(W.length===0)return[0,0];for(var F=[],Q=1+Math.floor(Math.log(v)/Math.log(2))/8|0,ae=[void 0,z.BYTE,z.USHORT,z.UINT24,z.ULONG][Q],se=0;se<S.length;se+=1){var fe=ae(S[se]);Array.prototype.push.apply(F,fe)}return Array.prototype.concat(z.Card16(b.length),z.OffSize(Q),F,W)},te.INDEX=function(b){return z.INDEX(b).length},z.DICT=function(b){for(var v=[],S=Object.keys(b),W=S.length,L=0;L<W;L+=1){var B=parseInt(S[L],0),F=b[B];v=(v=v.concat(z.OPERAND(F.value,F.type))).concat(z.OPERATOR(B))}return v},te.DICT=function(b){return z.DICT(b).length},z.OPERATOR=function(b){return b<1200?[b]:[12,b-1200]},z.OPERAND=function(b,v){var S=[];if(Array.isArray(v))for(var W=0;W<v.length;W+=1)T.argument(b.length===v.length,"Not enough arguments given for type"+v),S=S.concat(z.OPERAND(b[W],v[W]));else if(v==="SID")S=S.concat(z.NUMBER(b));else if(v==="offset")S=S.concat(z.NUMBER32(b));else if(v==="number")S=S.concat(z.NUMBER(b));else{if(v!=="real")throw new Error("Unknown operand type "+v);S=S.concat(z.REAL(b))}return S},z.OP=z.BYTE,te.OP=te.BYTE;var he=typeof WeakMap=="function"&&new WeakMap;function q(b,v,S){for(var W=0;W<v.length;W+=1){var L=v[W];this[L.name]=L.value}if(this.tableName=b,this.fields=v,S)for(var B=Object.keys(S),F=0;F<B.length;F+=1){var Q=B[F],ae=S[Q];this[Q]!==void 0&&(this[Q]=ae)}}function me(b,v,S){S===void 0&&(S=v.length);var W=new Array(v.length+1);W[0]={name:b+"Count",type:"USHORT",value:S};for(var L=0;L<v.length;L++)W[L+1]={name:b+L,type:"USHORT",value:v[L]};return W}function ge(b,v,S){var W=v.length,L=new Array(W+1);L[0]={name:b+"Count",type:"USHORT",value:W};for(var B=0;B<W;B++)L[B+1]={name:b+B,type:"TABLE",value:S(v[B],B)};return L}function be(b,v,S){var W=v.length,L=[];L[0]={name:b+"Count",type:"USHORT",value:W};for(var B=0;B<W;B++)L=L.concat(S(v[B],B));return L}function pe(b){b.format===1?q.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(me("glyph",b.glyphs))):T.assert(!1,"Can't create coverage table format 2 yet.")}function xe(b){q.call(this,"scriptListTable",be("scriptRecord",b,function(v,S){var W=v.script,L=W.defaultLangSys;return T.assert(!!L,"Unable to write GSUB: script "+v.tag+" has no default language system."),[{name:"scriptTag"+S,type:"TAG",value:v.tag},{name:"script"+S,type:"TABLE",value:new q("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new q("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:L.reqFeatureIndex}].concat(me("featureIndex",L.featureIndexes)))}].concat(be("langSys",W.langSysRecords,function(B,F){var Q=B.langSys;return[{name:"langSysTag"+F,type:"TAG",value:B.tag},{name:"langSys"+F,type:"TABLE",value:new q("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Q.reqFeatureIndex}].concat(me("featureIndex",Q.featureIndexes)))}]})))}]}))}function Se(b){q.call(this,"featureListTable",be("featureRecord",b,function(v,S){var W=v.feature;return[{name:"featureTag"+S,type:"TAG",value:v.tag},{name:"feature"+S,type:"TABLE",value:new q("featureTable",[{name:"featureParams",type:"USHORT",value:W.featureParams}].concat(me("lookupListIndex",W.lookupListIndexes)))}]}))}function ke(b,v){q.call(this,"lookupListTable",ge("lookup",b,function(S){var W=v[S.lookupType];return T.assert(!!W,"Unable to write GSUB lookup type "+S.lookupType+" tables."),new q("lookupTable",[{name:"lookupType",type:"USHORT",value:S.lookupType},{name:"lookupFlag",type:"USHORT",value:S.lookupFlag}].concat(ge("subtable",S.subtables,W)))}))}z.CHARSTRING=function(b){if(he){var v=he.get(b);if(v!==void 0)return v}for(var B=[],S=b.length,W=0;W<S;W+=1)var L=b[W],B=B.concat(z[L.type](L.value));return he&&he.set(b,B),B},te.CHARSTRING=function(b){return z.CHARSTRING(b).length},z.OBJECT=function(b){var v=z[b.type];return T.argument(v!==void 0,"No encoding function for type "+b.type),v(b.value)},te.OBJECT=function(b){var v=te[b.type];return T.argument(v!==void 0,"No sizeOf function for type "+b.type),v(b.value)},z.TABLE=function(b){for(var v=[],S=b.fields.length,W=[],L=[],B=0;B<S;B+=1){var F=b.fields[B],ae=z[F.type],Q=(T.argument(ae!==void 0,"No encoding function for field type "+F.type+" ("+F.name+")"),b[F.name]),ae=ae(Q=Q===void 0?F.value:Q);F.type==="TABLE"?(L.push(v.length),v=v.concat([0,0]),W.push(ae)):v=v.concat(ae)}for(var se=0;se<W.length;se+=1){var fe=L[se],Re=v.length;T.argument(Re<65536,"Table "+b.tableName+" too big."),v[fe]=Re>>8,v[fe+1]=255&Re,v=v.concat(W[se])}return v},te.TABLE=function(b){for(var v=0,S=b.fields.length,W=0;W<S;W+=1){var L=b.fields[W],B=te[L.type],F=(T.argument(B!==void 0,"No sizeOf function for field type "+L.type+" ("+L.name+")"),b[L.name]);v+=B(F=F===void 0?L.value:F),L.type==="TABLE"&&(v+=2)}return v},z.RECORD=z.TABLE,te.RECORD=te.TABLE,z.LITERAL=function(b){return b},te.LITERAL=function(b){return b.length},q.prototype.encode=function(){return z.TABLE(this)},q.prototype.sizeOf=function(){return te.TABLE(this)};var We={Table:q,Record:q,Coverage:(pe.prototype=Object.create(q.prototype)).constructor=pe,ScriptList:(xe.prototype=Object.create(q.prototype)).constructor=xe,FeatureList:(Se.prototype=Object.create(q.prototype)).constructor=Se,LookupList:(ke.prototype=Object.create(q.prototype)).constructor=ke,ushortList:me,tableList:ge,recordList:be};function Ke(b,v){return b.getUint8(v)}function $e(b,v){return b.getUint16(v,!1)}function ze(b,v){return b.getUint32(v,!1)}function it(b,v){return b.getInt16(v,!1)+b.getUint16(v+2,!1)/65535}var qe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Ze(b,v){this.data=b,this.offset=v,this.relativeOffset=0}Ze.prototype.parseByte=function(){var b=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,b},Ze.prototype.parseChar=function(){var b=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,b},Ze.prototype.parseCard8=Ze.prototype.parseByte,Ze.prototype.parseCard16=Ze.prototype.parseUShort=function(){var b=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,b},Ze.prototype.parseSID=Ze.prototype.parseUShort,Ze.prototype.parseOffset16=Ze.prototype.parseUShort,Ze.prototype.parseShort=function(){var b=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,b},Ze.prototype.parseF2Dot14=function(){var b=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,b},Ze.prototype.parseOffset32=Ze.prototype.parseULong=function(){var b=ze(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,b},Ze.prototype.parseFixed=function(){var b=it(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,b},Ze.prototype.parseString=function(b){var v=this.data,S=this.offset+this.relativeOffset,W="";this.relativeOffset+=b;for(var L=0;L<b;L++)W+=String.fromCharCode(v.getUint8(S+L));return W},Ze.prototype.parseTag=function(){return this.parseString(4)},Ze.prototype.parseLongDateTime=function(){var b=ze(this.data,this.offset+this.relativeOffset+4);return b-=2082844800,this.relativeOffset+=8,b},Ze.prototype.parseVersion=function(b){var v=$e(this.data,this.offset+this.relativeOffset),S=$e(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,v+S/(b=b===void 0?4096:b)/10},Ze.prototype.skip=function(b,v){this.relativeOffset+=qe[b]*(v=v===void 0?1:v)},Ze.prototype.parseULongList=function(b){b===void 0&&(b=this.parseULong());for(var v=new Array(b),S=this.data,W=this.offset+this.relativeOffset,L=0;L<b;L++)v[L]=S.getUint32(W),W+=4;return this.relativeOffset+=4*b,v},Ze.prototype.parseOffset16List=Ze.prototype.parseUShortList=function(b){b===void 0&&(b=this.parseUShort());for(var v=new Array(b),S=this.data,W=this.offset+this.relativeOffset,L=0;L<b;L++)v[L]=S.getUint16(W),W+=2;return this.relativeOffset+=2*b,v},Ze.prototype.parseShortList=function(b){for(var v=new Array(b),S=this.data,W=this.offset+this.relativeOffset,L=0;L<b;L++)v[L]=S.getInt16(W),W+=2;return this.relativeOffset+=2*b,v},Ze.prototype.parseByteList=function(b){for(var v=new Array(b),S=this.data,W=this.offset+this.relativeOffset,L=0;L<b;L++)v[L]=S.getUint8(W++);return this.relativeOffset+=b,v},Ze.prototype.parseList=function(b,v){v||(v=b,b=this.parseUShort());for(var S=new Array(b),W=0;W<b;W++)S[W]=v.call(this);return S},Ze.prototype.parseList32=function(b,v){v||(v=b,b=this.parseULong());for(var S=new Array(b),W=0;W<b;W++)S[W]=v.call(this);return S},Ze.prototype.parseRecordList=function(b,v){v||(v=b,b=this.parseUShort());for(var S=new Array(b),W=Object.keys(v),L=0;L<b;L++){for(var B={},F=0;F<W.length;F++){var Q=W[F],ae=v[Q];B[Q]=ae.call(this)}S[L]=B}return S},Ze.prototype.parseRecordList32=function(b,v){v||(v=b,b=this.parseULong());for(var S=new Array(b),W=Object.keys(v),L=0;L<b;L++){for(var B={},F=0;F<W.length;F++){var Q=W[F],ae=v[Q];B[Q]=ae.call(this)}S[L]=B}return S},Ze.prototype.parseStruct=function(b){if(typeof b=="function")return b.call(this);for(var v=Object.keys(b),S={},W=0;W<v.length;W++){var L=v[W],B=b[L];S[L]=B.call(this)}return S},Ze.prototype.parseValueRecord=function(b){var v;if((b=b===void 0?this.parseUShort():b)!==0)return v={},1&b&&(v.xPlacement=this.parseShort()),2&b&&(v.yPlacement=this.parseShort()),4&b&&(v.xAdvance=this.parseShort()),8&b&&(v.yAdvance=this.parseShort()),16&b&&(v.xPlaDevice=void 0,this.parseShort()),32&b&&(v.yPlaDevice=void 0,this.parseShort()),64&b&&(v.xAdvDevice=void 0,this.parseShort()),128&b&&(v.yAdvDevice=void 0,this.parseShort()),v},Ze.prototype.parseValueRecordList=function(){for(var b=this.parseUShort(),v=this.parseUShort(),S=new Array(v),W=0;W<v;W++)S[W]=this.parseValueRecord(b);return S},Ze.prototype.parsePointer=function(b){var v=this.parseOffset16();if(0<v)return new Ze(this.data,this.offset+v).parseStruct(b)},Ze.prototype.parsePointer32=function(b){var v=this.parseOffset32();if(0<v)return new Ze(this.data,this.offset+v).parseStruct(b)},Ze.prototype.parseListOfLists=function(b){for(var v=this.parseOffset16List(),S=v.length,W=this.relativeOffset,L=new Array(S),B=0;B<S;B++){var F=v[B];if(F===0)L[B]=void 0;else if(this.relativeOffset=F,b){for(var Q=this.parseOffset16List(),ae=new Array(Q.length),se=0;se<Q.length;se++)this.relativeOffset=F+Q[se],ae[se]=b.call(this);L[B]=ae}else L[B]=this.parseUShortList()}return this.relativeOffset=W,L},Ze.prototype.parseCoverage=function(){var b=this.offset+this.relativeOffset,v=this.parseUShort(),S=this.parseUShort();if(v===1)return{format:1,glyphs:this.parseUShortList(S)};if(v!==2)throw new Error("0x"+b.toString(16)+": Coverage format must be 1 or 2.");for(var W=new Array(S),L=0;L<S;L++)W[L]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:W}},Ze.prototype.parseClassDef=function(){var b=this.offset+this.relativeOffset,v=this.parseUShort();if(v===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(v===2)return{format:2,ranges:this.parseRecordList({start:Ze.uShort,end:Ze.uShort,classId:Ze.uShort})};throw new Error("0x"+b.toString(16)+": ClassDef format must be 1 or 2.")},Ze.list=function(b,v){return function(){return this.parseList(b,v)}},Ze.list32=function(b,v){return function(){return this.parseList32(b,v)}},Ze.recordList=function(b,v){return function(){return this.parseRecordList(b,v)}},Ze.recordList32=function(b,v){return function(){return this.parseRecordList32(b,v)}},Ze.pointer=function(b){return function(){return this.parsePointer(b)}},Ze.pointer32=function(b){return function(){return this.parsePointer32(b)}},Ze.tag=Ze.prototype.parseTag,Ze.byte=Ze.prototype.parseByte,Ze.uShort=Ze.offset16=Ze.prototype.parseUShort,Ze.uShortList=Ze.prototype.parseUShortList,Ze.uLong=Ze.offset32=Ze.prototype.parseULong,Ze.uLongList=Ze.prototype.parseULongList,Ze.struct=Ze.prototype.parseStruct,Ze.coverage=Ze.prototype.parseCoverage,Ze.classDef=Ze.prototype.parseClassDef;var Ae={reserved:Ze.uShort,reqFeatureIndex:Ze.uShort,featureIndexes:Ze.uShortList},ve=(Ze.prototype.parseScriptList=function(){return this.parsePointer(Ze.recordList({tag:Ze.tag,script:Ze.pointer({defaultLangSys:Ze.pointer(Ae),langSysRecords:Ze.recordList({tag:Ze.tag,langSys:Ze.pointer(Ae)})})}))||[]},Ze.prototype.parseFeatureList=function(){return this.parsePointer(Ze.recordList({tag:Ze.tag,feature:Ze.pointer({featureParams:Ze.offset16,lookupListIndexes:Ze.uShortList})}))||[]},Ze.prototype.parseLookupList=function(b){return this.parsePointer(Ze.list(Ze.pointer(function(){var v=this.parseUShort(),S=(T.argument(1<=v&&v<=9,"GPOS/GSUB lookup type "+v+" unknown."),this.parseUShort()),W=16&S;return{lookupType:v,lookupFlag:S,subtables:this.parseList(Ze.pointer(b[v])),markFilteringSet:W?this.parseUShort():void 0}})))||[]},Ze.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var b=this.parseUShort(),v=this.parseUShort();return T.argument(b===1&&v<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Ze.offset32,featureTableSubstitutionOffset:Ze.offset32})})||[]},{getByte:Ke,getCard8:Ke,getUShort:$e,getCard16:$e,getShort:function(b,v){return b.getInt16(v,!1)},getULong:ze,getFixed:it,getTag:function(b,v){for(var S="",W=v;W<v+4;W+=1)S+=String.fromCharCode(b.getInt8(W));return S},getOffset:function(b,v,S){for(var W=0,L=0;L<S;L+=1)W=(W<<=8)+b.getUint8(v+L);return W},getBytes:function(b,v,S){for(var W=[],L=v;L<S;L+=1)W.push(b.getUint8(L));return W},bytesToString:function(b){for(var v="",S=0;S<b.length;S+=1)v+=String.fromCharCode(b[S]);return v},Parser:Ze}),_={parse:function(b,v){for(var S={},W=(S.version=ve.getUShort(b,v),T.argument(S.version===0,"cmap table version should be 0."),S.numTables=ve.getUShort(b,v+2),-1),L=S.numTables-1;0<=L;--L){var B=ve.getUShort(b,v+4+8*L),F=ve.getUShort(b,v+4+8*L+2);if(B===3&&(F===0||F===1||F===10)||B===0&&(F===0||F===1||F===2||F===3||F===4)){W=ve.getULong(b,v+4+8*L+4);break}}if(W===-1)throw new Error("No valid cmap sub-tables found.");var Q=new ve.Parser(b,v+W);if(S.format=Q.parseUShort(),S.format===12){var ae,se=S,fe=Q;fe.parseUShort(),se.length=fe.parseULong(),se.language=fe.parseULong(),se.groupCount=ae=fe.parseULong(),se.glyphIndexMap={};for(var Re=0;Re<ae;Re+=1)for(var Ie=fe.parseULong(),ue=fe.parseULong(),Ue=fe.parseULong(),Xe=Ie;Xe<=ue;Xe+=1)se.glyphIndexMap[Xe]=Ue,Ue++}else{if(S.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+S.format+").");var we=S,Ve=b,Ce=v,at=W;we.length=Q.parseUShort(),we.language=Q.parseUShort(),we.segCount=vt=Q.parseUShort()>>1,Q.skip("uShort",3),we.glyphIndexMap={};for(var vt,dt=new ve.Parser(Ve,Ce+at+14),ht=new ve.Parser(Ve,Ce+at+16+2*vt),St=new ve.Parser(Ve,Ce+at+16+4*vt),zt=new ve.Parser(Ve,Ce+at+16+6*vt),pr=Ce+at+16+8*vt,Rr=0;Rr<vt-1;Rr+=1)for(var nn=void 0,on=dt.parseUShort(),ni=ht.parseUShort(),Jt=St.parseShort(),er=zt.parseUShort(),Nt=ni;Nt<=on;Nt+=1)er!==0?(pr=(pr=zt.offset+zt.relativeOffset-2)+er+2*(Nt-ni),(nn=ve.getUShort(Ve,pr))!==0&&(nn=nn+Jt&65535)):nn=Nt+Jt&65535,we.glyphIndexMap[Nt]=nn}return S},make:function(b){for(var v=!0,S=b.length-1;0<S;--S)if(65535<b.get(S).unicode){console.log("Adding CMAP format 12 (needed!)"),v=!1;break}var W,L,B=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:v?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:v?12:20}],F=(B=(B=v?B:B.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new We.Table("cmap",B));for(F.segments=[],S=0;S<b.length;S+=1){for(var Q=b.get(S),ae=0;ae<Q.unicodes.length;ae+=1)W=Q.unicodes[ae],L=S,F.segments.push({end:W,start:W,delta:-(W-L),offset:0,glyphIndex:L});F.segments=F.segments.sort(function(Ce,at){return Ce.start-at.start})}F.segments.push({end:65535,start:65535,delta:1,offset:0});var se=F.segments.length,fe=0,Re=[],Ie=[],ue=[],Ue=[],Xe=[],we=[];for(S=0;S<se;S+=1){var Ve=F.segments[S];Ve.end<=65535&&Ve.start<=65535?(Re=Re.concat({name:"end_"+S,type:"USHORT",value:Ve.end}),Ie=Ie.concat({name:"start_"+S,type:"USHORT",value:Ve.start}),ue=ue.concat({name:"idDelta_"+S,type:"SHORT",value:Ve.delta}),Ue=Ue.concat({name:"idRangeOffset_"+S,type:"USHORT",value:Ve.offset}),Ve.glyphId!==void 0&&(Xe=Xe.concat({name:"glyph_"+S,type:"USHORT",value:Ve.glyphId}))):fe+=1,v||Ve.glyphIndex===void 0||(we=(we=(we=we.concat({name:"cmap12Start_"+S,type:"ULONG",value:Ve.start})).concat({name:"cmap12End_"+S,type:"ULONG",value:Ve.end})).concat({name:"cmap12Glyph_"+S,type:"ULONG",value:Ve.glyphIndex}))}return F.segCountX2=2*(se-fe),F.searchRange=2*Math.pow(2,Math.floor(Math.log(se-fe)/Math.log(2))),F.entrySelector=Math.log(F.searchRange/2)/Math.log(2),F.rangeShift=F.segCountX2-F.searchRange,F.fields=F.fields.concat(Re),F.fields.push({name:"reservedPad",type:"USHORT",value:0}),F.fields=F.fields.concat(Ie),F.fields=F.fields.concat(ue),F.fields=F.fields.concat(Ue),F.fields=F.fields.concat(Xe),F.cmap4Length=14+2*Re.length+2+2*Ie.length+2*ue.length+2*Ue.length+2*Xe.length,v||(B=16+4*we.length,F.cmap12Offset=20+F.cmap4Length,F.fields=F.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:B},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:we.length/3}]),F.fields=F.fields.concat(we)),F}},$=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],H=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],re=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ye=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ge(b){this.font=b}function Le(b){this.cmap=b}function Me(b,v){this.encoding=b,this.charset=v}function He(b){switch(b.version){case 1:this.names=ye.slice();break;case 2:this.names=new Array(b.numberOfGlyphs);for(var v=0;v<b.numberOfGlyphs;v++)b.glyphNameIndex[v]<ye.length?this.names[v]=ye[b.glyphNameIndex[v]]:this.names[v]=b.names[b.glyphNameIndex[v]-ye.length];break;case 2.5:this.names=new Array(b.numberOfGlyphs);for(var S=0;S<b.numberOfGlyphs;S++)this.names[S]=ye[S+b.glyphNameIndex[S]];break;default:this.names=[]}}Ge.prototype.charToGlyphIndex=function(b){var v=b.codePointAt(0),S=this.font.glyphs;if(S){for(var W=0;W<S.length;W+=1)for(var L=S.get(W),B=0;B<L.unicodes.length;B+=1)if(L.unicodes[B]===v)return W}return null},Le.prototype.charToGlyphIndex=function(b){return this.cmap.glyphIndexMap[b.codePointAt(0)]||0},Me.prototype.charToGlyphIndex=function(b){return b=b.codePointAt(0),b=this.encoding[b],this.charset.indexOf(b)},He.prototype.nameToGlyphIndex=function(b){return this.names.indexOf(b)},He.prototype.glyphIndexToName=function(b){return this.names[b]};var Je={line:function(b,v,S,W,L){b.beginPath(),b.moveTo(v,S),b.lineTo(W,L),b.stroke()}};function De(b){this.bindConstructorValues(b)}function Rt(b,v,S){Object.defineProperty(b,v,{get:function(){return b.path,b[S]},set:function(W){b[S]=W},enumerable:!0,configurable:!0})}function bt(b,v){if(this.font=b,this.glyphs={},Array.isArray(v))for(var S=0;S<v.length;S++)this.glyphs[S]=v[S];this.length=v&&v.length||0}De.prototype.bindConstructorValues=function(b){var v;this.index=b.index||0,this.name=b.name||null,this.unicode=b.unicode||void 0,this.unicodes=b.unicodes||b.unicode!==void 0?[b.unicode]:[],b.xMin&&(this.xMin=b.xMin),b.yMin&&(this.yMin=b.yMin),b.xMax&&(this.xMax=b.xMax),b.yMax&&(this.yMax=b.yMax),b.advanceWidth&&(this.advanceWidth=b.advanceWidth),Object.defineProperty(this,"path",(b=b.path,v=b||new D,{configurable:!0,get:function(){return v=typeof v=="function"?v():v},set:function(S){v=S}}))},De.prototype.addUnicode=function(b){this.unicodes.length===0&&(this.unicode=b),this.unicodes.push(b)},De.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},De.prototype.getPath=function(b,v,S,W,L){b=b!==void 0?b:0,v=v!==void 0?v:0,S=S!==void 0?S:72;for(var B,F,Q=(W=W||{}).xScale,ae=W.yScale,se=((B=W.hinting&&L&&L.hinting?this.path&&L.hinting.exec(this,S):B)?(F=L.hinting.getCommands(B),b=Math.round(b),v=Math.round(v),Q=ae=1):(F=this.path.commands,W=1/this.path.unitsPerEm*S,Q===void 0&&(Q=W),ae===void 0&&(ae=W)),new D),fe=0;fe<F.length;fe+=1){var Re=F[fe];Re.type==="M"?se.moveTo(b+Re.x*Q,v+-Re.y*ae):Re.type==="L"?se.lineTo(b+Re.x*Q,v+-Re.y*ae):Re.type==="Q"?se.quadraticCurveTo(b+Re.x1*Q,v+-Re.y1*ae,b+Re.x*Q,v+-Re.y*ae):Re.type==="C"?se.curveTo(b+Re.x1*Q,v+-Re.y1*ae,b+Re.x2*Q,v+-Re.y2*ae,b+Re.x*Q,v+-Re.y*ae):Re.type==="Z"&&se.closePath()}return se},De.prototype.getContours=function(){if(this.points===void 0)return[];for(var b=[],v=[],S=0;S<this.points.length;S+=1){var W=this.points[S];v.push(W),W.lastPointOfContour&&(b.push(v),v=[])}return T.argument(v.length===0,"There are still points left in the current contour."),b},De.prototype.getMetrics=function(){for(var b=this.path.commands,v=[],S=[],W=0;W<b.length;W+=1){var L=b[W];L.type!=="Z"&&(v.push(L.x),S.push(L.y)),L.type!=="Q"&&L.type!=="C"||(v.push(L.x1),S.push(L.y1)),L.type==="C"&&(v.push(L.x2),S.push(L.y2))}var B={xMin:Math.min.apply(null,v),yMin:Math.min.apply(null,S),xMax:Math.max.apply(null,v),yMax:Math.max.apply(null,S),leftSideBearing:this.leftSideBearing};return isFinite(B.xMin)||(B.xMin=0),isFinite(B.xMax)||(B.xMax=this.advanceWidth),isFinite(B.yMin)||(B.yMin=0),isFinite(B.yMax)||(B.yMax=0),B.rightSideBearing=this.advanceWidth-B.leftSideBearing-(B.xMax-B.xMin),B},De.prototype.draw=function(b,v,S,W,L){this.getPath(v,S,W,L).draw(b)},De.prototype.drawPoints=function(b,v,S,W){function L(fe,Re,Ie,ue){var Ue=2*Math.PI;b.beginPath();for(var Xe=0;Xe<fe.length;Xe+=1)b.moveTo(Re+fe[Xe].x*ue,Ie+fe[Xe].y*ue),b.arc(Re+fe[Xe].x*ue,Ie+fe[Xe].y*ue,2,0,Ue,!1);b.closePath(),b.fill()}v=v!==void 0?v:0,S=S!==void 0?S:0;for(var W=1/this.path.unitsPerEm*(W=W!==void 0?W:24),B=[],F=[],Q=this.path,ae=0;ae<Q.commands.length;ae+=1){var se=Q.commands[ae];se.x!==void 0&&B.push({x:se.x,y:-se.y}),se.x1!==void 0&&F.push({x:se.x1,y:-se.y1}),se.x2!==void 0&&F.push({x:se.x2,y:-se.y2})}b.fillStyle="blue",L(B,v,S,W),b.fillStyle="red",L(F,v,S,W)},De.prototype.drawMetrics=function(b,v,S,W){v=v!==void 0?v:0,S=S!==void 0?S:0,W=1/this.path.unitsPerEm*(W=W!==void 0?W:24),b.lineWidth=1,b.strokeStyle="black",Je.line(b,v,-1e4,v,1e4),Je.line(b,-1e4,S,1e4,S);var L=this.xMin||0,B=this.yMin||0,F=this.xMax||0,Q=this.yMax||0,ae=this.advanceWidth||0;b.strokeStyle="blue",Je.line(b,v+L*W,-1e4,v+L*W,1e4),Je.line(b,v+F*W,-1e4,v+F*W,1e4),Je.line(b,-1e4,S+-B*W,1e4,S+-B*W),Je.line(b,-1e4,S+-Q*W,1e4,S+-Q*W),b.strokeStyle="green",Je.line(b,v+ae*W,-1e4,v+ae*W,1e4)},bt.prototype.get=function(b){return typeof this.glyphs[b]=="function"&&(this.glyphs[b]=this.glyphs[b]()),this.glyphs[b]},bt.prototype.push=function(b,v){this.glyphs[b]=v,this.length++};var st={GlyphSet:bt,glyphLoader:function(b,v){return new De({index:v,font:b})},ttfGlyphLoader:function(b,v,S,W,L,B){return function(){var F=new De({index:v,font:b});return F.path=function(){S(F,W,L);var Q=B(b.glyphs,F);return Q.unitsPerEm=b.unitsPerEm,Q},Rt(F,"xMin","_xMin"),Rt(F,"xMax","_xMax"),Rt(F,"yMin","_yMin"),Rt(F,"yMax","_yMax"),F}},cffGlyphLoader:function(b,v,S,W){return function(){var L=new De({index:v,font:b});return L.path=function(){var B=S(b,L,W);return B.unitsPerEm=b.unitsPerEm,B},L}}};function It(b){return b=b.length<1240?107:b.length<33900?1131:32768,b}function yt(b,v,S){var W,L=[],B=[],F=ve.getCard16(b,v);if(F!==0){for(var Q=ve.getByte(b,v+2),ae=v+(F+1)*Q+2,se=v+3,fe=0;fe<F+1;fe+=1)L.push(ve.getOffset(b,se,Q)),se+=Q;W=ae+L[F]}else W=v+2;for(var Re=0;Re<L.length-1;Re+=1){var Ie=ve.getBytes(b,ae+L[Re],ae+L[Re+1]);S&&(Ie=S(Ie)),B.push(Ie)}return{objects:B,startOffset:v,endOffset:W}}function Ot(b,v){if(v===28)return b.parseByte()<<8|b.parseByte();if(v===29)return b.parseByte()<<24|b.parseByte()<<16|b.parseByte()<<8|b.parseByte();if(v===30){for(var S=b,W="",L=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var F=S.parseByte(),B=F>>4,F=15&F;if(B==15||(W+=L[B],F==15))break;W+=L[F]}return parseFloat(W)}if(32<=v&&v<=246)return v-139;if(247<=v&&v<=250)return 256*(v-247)+b.parseByte()+108;if(251<=v&&v<=254)return 256*-(v-251)-b.parseByte()-108;throw new Error("Invalid b0 "+v)}function rn(b,v,S){var W=new ve.Parser(b,v=v!==void 0?v:0),L=[],B=[];for(S=S!==void 0?S:b.length;W.relativeOffset<S;){var F=W.parseByte();F<=21?(F===12&&(F=1200+W.parseByte()),L.push([F,B]),B=[]):B.push(Ot(W,F))}for(var Q=L,ae={},se=0;se<Q.length;se+=1){var fe=Q[se][0],Re=Q[se][1],Ie=void 0,Ie=Re.length===1?Re[0]:Re;if(ae.hasOwnProperty(fe)&&!isNaN(ae[fe]))throw new Error("Object "+ae+" already has key "+fe);ae[fe]=Ie}return ae}function vr(b,v){return v=v<=390?$[v]:b[v-391]}function Bt(b,v,S){for(var W,L={},B=0;B<v.length;B+=1){var F=v[B];if(Array.isArray(F.type)){var Q=[];Q.length=F.type.length;for(var ae=0;ae<F.type.length;ae++)(W=b[F.op]!==void 0?b[F.op][ae]:void 0)===void 0&&(W=F.value!==void 0&&F.value[ae]!==void 0?F.value[ae]:null),F.type[ae]==="SID"&&(W=vr(S,W)),Q[ae]=W;L[F.name]=Q}else(W=b[F.op])===void 0&&(W=F.value!==void 0?F.value:null),F.type==="SID"&&(W=vr(S,W)),L[F.name]=W}return L}var $t=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],wt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Pr(b,v,S,W){return Bt(rn(b,v,S),wt,W)}function Tr(b,v,S,W){for(var L=[],B=0;B<S.length;B+=1){var F=new DataView(new Uint8Array(S[B]).buffer),F=(Q=W,Bt(rn(F,0,F.byteLength),$t,Q)),Q=(F._subrs=[],F._subrsBias=0,F.private[0]),ae=F.private[1];Q!==0&&ae!==0&&(Q=Pr(b,ae+v,Q,W),F._defaultWidthX=Q.defaultWidthX,F._nominalWidthX=Q.nominalWidthX,Q.subrs!==0&&(ae=yt(b,ae+Q.subrs+v),F._subrs=ae.objects,F._subrsBias=It(F._subrs)),F._privateDict=Q),L.push(F)}return L}function Et(b,v,S){var W,L,B,F,Q,ae,se,fe,Re,Ie=new D,ue=[],Ue=0,Xe=!1,we=!1,Ve=0,Ce=0,at=(Re=(b.isCIDFont?(Q=b.tables.cff.topDict._fdSelect[v.index],Q=b.tables.cff.topDict._fdArray[Q],ae=Q._subrs,se=Q._subrsBias,fe=Q._defaultWidthX,Q):(ae=b.tables.cff.topDict._subrs,se=b.tables.cff.topDict._subrsBias,fe=b.tables.cff.topDict._defaultWidthX,b.tables.cff.topDict))._nominalWidthX,fe);function vt(ht,St){we&&Ie.closePath(),Ie.moveTo(ht,St),we=!0}function dt(){ue.length%2==0||Xe||(at=ue.shift()+Re),Ue+=ue.length>>1,ue.length=0,Xe=!0}return function ht(St){for(var zt,pr,Rr,nn,on,ni,Jt,er,Nt,sn,cr,zr,tr=0;tr<St.length;){var Fr=St[tr];switch(tr+=1,Fr){case 1:case 3:dt();break;case 4:1<ue.length&&!Xe&&(at=ue.shift()+Re,Xe=!0),Ce+=ue.pop(),vt(Ve,Ce);break;case 5:for(;0<ue.length;)Ve+=ue.shift(),Ce+=ue.shift(),Ie.lineTo(Ve,Ce);break;case 6:for(;0<ue.length&&(Ve+=ue.shift(),Ie.lineTo(Ve,Ce),ue.length!==0);)Ce+=ue.shift(),Ie.lineTo(Ve,Ce);break;case 7:for(;0<ue.length&&(Ce+=ue.shift(),Ie.lineTo(Ve,Ce),ue.length!==0);)Ve+=ue.shift(),Ie.lineTo(Ve,Ce);break;case 8:for(;0<ue.length;)W=Ve+ue.shift(),L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Ve=B+ue.shift(),Ce=F+ue.shift(),Ie.curveTo(W,L,B,F,Ve,Ce);break;case 10:on=ue.pop()+se,(ni=ae[on])&&ht(ni);break;case 11:return;case 12:switch(Fr=St[tr],tr+=1,Fr){case 35:W=Ve+ue.shift(),L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Jt=B+ue.shift(),er=F+ue.shift(),Nt=Jt+ue.shift(),sn=er+ue.shift(),cr=Nt+ue.shift(),zr=sn+ue.shift(),Ve=cr+ue.shift(),Ce=zr+ue.shift(),ue.shift(),Ie.curveTo(W,L,B,F,Jt,er),Ie.curveTo(Nt,sn,cr,zr,Ve,Ce);break;case 34:W=Ve+ue.shift(),L=Ce,B=W+ue.shift(),F=L+ue.shift(),Jt=B+ue.shift(),er=F,Nt=Jt+ue.shift(),sn=F,cr=Nt+ue.shift(),zr=Ce,Ve=cr+ue.shift(),Ie.curveTo(W,L,B,F,Jt,er),Ie.curveTo(Nt,sn,cr,zr,Ve,Ce);break;case 36:W=Ve+ue.shift(),L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Jt=B+ue.shift(),er=F,Nt=Jt+ue.shift(),sn=F,cr=Nt+ue.shift(),zr=sn+ue.shift(),Ve=cr+ue.shift(),Ie.curveTo(W,L,B,F,Jt,er),Ie.curveTo(Nt,sn,cr,zr,Ve,Ce);break;case 37:W=Ve+ue.shift(),L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Jt=B+ue.shift(),er=F+ue.shift(),Nt=Jt+ue.shift(),sn=er+ue.shift(),cr=Nt+ue.shift(),zr=sn+ue.shift(),Math.abs(cr-Ve)>Math.abs(zr-Ce)?Ve=cr+ue.shift():Ce=zr+ue.shift(),Ie.curveTo(W,L,B,F,Jt,er),Ie.curveTo(Nt,sn,cr,zr,Ve,Ce);break;default:console.log("Glyph "+v.index+": unknown operator 1200"+Fr),ue.length=0}break;case 14:0<ue.length&&!Xe&&(at=ue.shift()+Re,Xe=!0),we&&(Ie.closePath(),we=!1);break;case 18:dt();break;case 19:case 20:dt(),tr+=Ue+7>>3;break;case 21:2<ue.length&&!Xe&&(at=ue.shift()+Re,Xe=!0),Ce+=ue.pop(),vt(Ve+=ue.pop(),Ce);break;case 22:1<ue.length&&!Xe&&(at=ue.shift()+Re,Xe=!0),vt(Ve+=ue.pop(),Ce);break;case 23:dt();break;case 24:for(;2<ue.length;)W=Ve+ue.shift(),L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Ve=B+ue.shift(),Ce=F+ue.shift(),Ie.curveTo(W,L,B,F,Ve,Ce);Ve+=ue.shift(),Ce+=ue.shift(),Ie.lineTo(Ve,Ce);break;case 25:for(;6<ue.length;)Ve+=ue.shift(),Ce+=ue.shift(),Ie.lineTo(Ve,Ce);W=Ve+ue.shift(),L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Ve=B+ue.shift(),Ce=F+ue.shift(),Ie.curveTo(W,L,B,F,Ve,Ce);break;case 26:for(ue.length%2&&(Ve+=ue.shift());0<ue.length;)W=Ve,L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Ve=B,Ce=F+ue.shift(),Ie.curveTo(W,L,B,F,Ve,Ce);break;case 27:for(ue.length%2&&(Ce+=ue.shift());0<ue.length;)W=Ve+ue.shift(),L=Ce,B=W+ue.shift(),F=L+ue.shift(),Ve=B+ue.shift(),Ce=F,Ie.curveTo(W,L,B,F,Ve,Ce);break;case 28:zt=St[tr],pr=St[tr+1],ue.push((zt<<24|pr<<16)>>16),tr+=2;break;case 29:on=ue.pop()+b.gsubrsBias,(ni=b.gsubrs[on])&&ht(ni);break;case 30:for(;0<ue.length&&(W=Ve,L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Ve=B+ue.shift(),Ce=F+(ue.length===1?ue.shift():0),Ie.curveTo(W,L,B,F,Ve,Ce),ue.length!==0);)W=Ve+ue.shift(),L=Ce,B=W+ue.shift(),F=L+ue.shift(),Ce=F+ue.shift(),Ve=B+(ue.length===1?ue.shift():0),Ie.curveTo(W,L,B,F,Ve,Ce);break;case 31:for(;0<ue.length&&(W=Ve+ue.shift(),L=Ce,B=W+ue.shift(),F=L+ue.shift(),Ce=F+ue.shift(),Ve=B+(ue.length===1?ue.shift():0),Ie.curveTo(W,L,B,F,Ve,Ce),ue.length!==0);)W=Ve,L=Ce+ue.shift(),B=W+ue.shift(),F=L+ue.shift(),Ve=B+ue.shift(),Ce=F+(ue.length===1?ue.shift():0),Ie.curveTo(W,L,B,F,Ve,Ce);break;default:Fr<32?console.log("Glyph "+v.index+": unknown operator "+Fr):Fr<247?ue.push(Fr-139):Fr<251?(zt=St[tr],tr+=1,ue.push(256*(Fr-247)+zt+108)):Fr<255?(zt=St[tr],tr+=1,ue.push(256*-(Fr-251)-zt-108)):(zt=St[tr],pr=St[tr+1],Rr=St[tr+2],nn=St[tr+3],tr+=4,ue.push((zt<<24|pr<<16|Rr<<8|nn)/65536))}}}(S),v.advanceWidth=at,Ie}function Or(b,v){var S,W=$.indexOf(b);return 0<=W&&(S=W),0<=(W=v.indexOf(b))?S=W+$.length:(S=$.length+v.length,v.push(b)),S}function Aa(b,v,S){for(var W={},L=0;L<b.length;L+=1){var B=b[L],F=v[B.name];F===void 0||function Q(ae,se){if(ae===se)return 1;if(Array.isArray(ae)&&Array.isArray(se)&&ae.length===se.length){for(var fe=0;fe<ae.length;fe+=1)if(!Q(ae[fe],se[fe]))return;return 1}}(F,B.value)||(B.type==="SID"&&(F=Or(F,S)),W[B.op]={name:B.name,type:B.type,value:F})}return W}function Ta(b,v){var S=new We.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return S.dict=Aa($t,b,v),S}function Ba(b){var v=new We.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return v.topDicts=[{name:"topDict_0",type:"TABLE",value:b}],v}function Dc(b){for(var v=new We.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),S=0;S<b.length;S+=1){var W=b.get(S),L=function(B){for(var F=[],Q=B.path,ae=(F.push({name:"width",type:"NUMBER",value:B.advanceWidth}),0),se=0,fe=0;fe<Q.commands.length;fe+=1){var Re,Ie,ue,Ue,Xe=void 0,we=void 0,Ve=Q.commands[fe];(Ve=Ve.type==="Q"?{type:"C",x:Ve.x,y:Ve.y,x1:1/3*ae+2/3*Ve.x1,y1:1/3*se+2/3*Ve.y1,x2:1/3*Ve.x+2/3*Ve.x1,y2:1/3*Ve.y+2/3*Ve.y1}:Ve).type==="M"?(Xe=Math.round(Ve.x-ae),we=Math.round(Ve.y-se),F.push({name:"dx",type:"NUMBER",value:Xe}),F.push({name:"dy",type:"NUMBER",value:we}),F.push({name:"rmoveto",type:"OP",value:21}),ae=Math.round(Ve.x),se=Math.round(Ve.y)):Ve.type==="L"?(Xe=Math.round(Ve.x-ae),we=Math.round(Ve.y-se),F.push({name:"dx",type:"NUMBER",value:Xe}),F.push({name:"dy",type:"NUMBER",value:we}),F.push({name:"rlineto",type:"OP",value:5}),ae=Math.round(Ve.x),se=Math.round(Ve.y)):Ve.type==="C"&&(Re=Math.round(Ve.x1-ae),Ie=Math.round(Ve.y1-se),ue=Math.round(Ve.x2-Ve.x1),Ue=Math.round(Ve.y2-Ve.y1),Xe=Math.round(Ve.x-Ve.x2),we=Math.round(Ve.y-Ve.y2),F.push({name:"dx1",type:"NUMBER",value:Re}),F.push({name:"dy1",type:"NUMBER",value:Ie}),F.push({name:"dx2",type:"NUMBER",value:ue}),F.push({name:"dy2",type:"NUMBER",value:Ue}),F.push({name:"dx",type:"NUMBER",value:Xe}),F.push({name:"dy",type:"NUMBER",value:we}),F.push({name:"rrcurveto",type:"OP",value:8}),ae=Math.round(Ve.x),se=Math.round(Ve.y))}return F.push({name:"endchar",type:"OP",value:14}),F}(W);v.charStrings.push({name:W.name,type:"CHARSTRING",value:L})}return v}var Ua={parse:function(b,v,S){S.tables.cff={},Q=b,W=v,(L={}).formatMajor=ve.getCard8(Q,W),L.formatMinor=ve.getCard8(Q,W+1),L.size=ve.getCard8(Q,W+2),L.offsetSize=ve.getCard8(Q,W+3),L.startOffset=W,L.endOffset=W+4;var Q=yt(b,L.endOffset,ve.bytesToString),W=yt(b,Q.endOffset),L=yt(b,W.endOffset,ve.bytesToString),Q=yt(b,L.endOffset);if(S.gsubrs=Q.objects,S.gsubrsBias=It(S.gsubrs),(Q=Tr(b,v,W.objects,L.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+Q.length);if(W=Q[0],(S.tables.cff.topDict=W)._privateDict&&(S.defaultWidthX=W._privateDict.defaultWidthX,S.nominalWidthX=W._privateDict.nominalWidthX),W.ros[0]!==void 0&&W.ros[1]!==void 0&&(S.isCIDFont=!0),S.isCIDFont){var Q=W.fdArray,B=W.fdSelect;if(Q===0||B===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");Q=Tr(b,v,yt(b,Q+=v).objects,L.objects),W._fdArray=Q,W._fdSelect=function(Ie,ue,Ue,Xe){var we,Ve=[],Ce=new ve.Parser(Ie,ue);if((Ie=Ce.parseCard8())===0)for(var at=0;at<Ue;at++){if(Xe<=(we=Ce.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+we+" (FD count "+Xe+")");Ve.push(we)}else{if(Ie!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ie);var vt,dt=Ce.parseCard16(),ht=Ce.parseCard16();if(ht!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+ht);for(var St=0;St<dt;St++){if(we=Ce.parseCard8(),vt=Ce.parseCard16(),Xe<=we)throw new Error("CFF table CID Font FDSelect has bad FD index value "+we+" (FD count "+Xe+")");if(Ue<vt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+vt);for(;ht<vt;ht++)Ve.push(we);ht=vt}if(vt!==Ue)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+vt)}return Ve}(b,B+=v,S.numGlyphs,Q.length)}var B=v+W.private[1],Q=Pr(b,B,W.private[0],L.objects),F=(S.defaultWidthX=Q.defaultWidthX,S.nominalWidthX=Q.nominalWidthX,Q.subrs!==0?(B=yt(b,B+Q.subrs),S.subrs=B.objects,S.subrsBias=It(S.subrs)):(S.subrs=[],S.subrsBias=0),yt(b,v+W.charStrings)),Q=(S.nGlyphs=F.objects.length,function(fe,Re,Ie,ue){var Ue=new ve.Parser(fe,Re),Xe=(--Ie,[".notdef"]);if((fe=Ue.parseCard8())===0)for(var we=0;we<Ie;we+=1)Ve=Ue.parseSID(),Xe.push(vr(ue,Ve));else if(fe===1)for(;Xe.length<=Ie;)for(var Ve=Ue.parseSID(),Ce=Ue.parseCard8(),at=0;at<=Ce;at+=1)Xe.push(vr(ue,Ve)),Ve+=1;else{if(fe!==2)throw new Error("Unknown charset format "+fe);for(;Xe.length<=Ie;){Ve=Ue.parseSID(),Ce=Ue.parseCard16();for(var vt=0;vt<=Ce;vt+=1)Xe.push(vr(ue,Ve)),Ve+=1}}return Xe}(b,v+W.charset,S.nGlyphs,L.objects));W.encoding===0?S.cffEncoding=new Me(H,Q):W.encoding===1?S.cffEncoding=new Me(re,Q):S.cffEncoding=function(fe,Re,Ie){var ue={},Ue=new ve.Parser(fe,Re);if((fe=Ue.parseCard8())===0)for(var Xe=Ue.parseCard8(),we=0;we<Xe;we+=1)ue[Ce=Ue.parseCard8()]=we;else{if(fe!==1)throw new Error("Unknown encoding format "+fe);for(var Ve=Ue.parseCard8(),Ce=1,at=0;at<Ve;at+=1)for(var vt=Ue.parseCard8(),dt=Ue.parseCard8(),ht=vt;ht<=vt+dt;ht+=1)ue[ht]=Ce,Ce+=1}return new Me(ue,Ie)}(b,v+W.encoding,Q),S.encoding=S.encoding||S.cffEncoding,S.glyphs=new st.GlyphSet(S);for(var ae=0;ae<S.nGlyphs;ae+=1){var se=F.objects[ae];S.glyphs.push(ae,st.cffGlyphLoader(S,ae,Et,se))}},make:function(b,fe){for(var S,W=new We.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),L=1/fe.unitsPerEm,L={version:fe.version,fullName:fe.fullName,familyName:fe.familyName,weight:fe.weightName,fontBBox:fe.fontBBox||[0,0,0,0],fontMatrix:[L,0,0,L,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},B=[],F=1;F<b.length;F+=1)S=b.get(F),B.push(S.name);var Q,ae,se=[],fe=(W.header=new We.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),W.nameIndex=function(Ie){var ue=new We.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);ue.names=[];for(var Ue=0;Ue<Ie.length;Ue+=1)ue.names.push({name:"name_"+Ue,type:"NAME",value:Ie[Ue]});return ue}([fe.postScriptName]),Ta(L,se)),Re=(W.topDictIndex=Ba(fe),W.globalSubrIndex=new We.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),W.charsets=function(Ie,ue){for(var Ue=new We.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Xe=0;Xe<Ie.length;Xe+=1){var we=Or(Ie[Xe],ue);Ue.fields.push({name:"glyph_"+Xe,type:"SID",value:we})}return Ue}(B,se),W.charStringsIndex=Dc(b),W.privateDict=(Re={},Q=se,(ae=new We.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Aa(wt,Re,Q),ae),W.stringIndex=function(Ie){var ue=new We.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);ue.strings=[];for(var Ue=0;Ue<Ie.length;Ue+=1)ue.strings.push({name:"string_"+Ue,type:"STRING",value:Ie[Ue]});return ue}(se),W.header.sizeOf()+W.nameIndex.sizeOf()+W.topDictIndex.sizeOf()+W.stringIndex.sizeOf()+W.globalSubrIndex.sizeOf());return L.charset=Re,L.encoding=0,L.charStrings=L.charset+W.charsets.sizeOf(),L.private[1]=L.charStrings+W.charStringsIndex.sizeOf(),fe=Ta(L,se),W.topDictIndex=Ba(fe),W}},Fa={parse:function(W,v){var S={},W=new ve.Parser(W,v);return S.version=W.parseVersion(),S.fontRevision=Math.round(1e3*W.parseFixed())/1e3,S.checkSumAdjustment=W.parseULong(),S.magicNumber=W.parseULong(),T.argument(S.magicNumber===1594834165,"Font header has wrong magic number."),S.flags=W.parseUShort(),S.unitsPerEm=W.parseUShort(),S.created=W.parseLongDateTime(),S.modified=W.parseLongDateTime(),S.xMin=W.parseShort(),S.yMin=W.parseShort(),S.xMax=W.parseShort(),S.yMax=W.parseShort(),S.macStyle=W.parseUShort(),S.lowestRecPPEM=W.parseUShort(),S.fontDirectionHint=W.parseShort(),S.indexToLocFormat=W.parseShort(),S.glyphDataFormat=W.parseShort(),S},make:function(b){var v=Math.round(new Date().getTime()/1e3)+2082844800,S=v;return b.createdTimestamp&&(S=b.createdTimestamp+2082844800),new We.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:S},{name:"modified",type:"LONGDATETIME",value:v},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],b)}},de={parse:function(W,v){var S={},W=new ve.Parser(W,v);return S.version=W.parseVersion(),S.ascender=W.parseShort(),S.descender=W.parseShort(),S.lineGap=W.parseShort(),S.advanceWidthMax=W.parseUShort(),S.minLeftSideBearing=W.parseShort(),S.minRightSideBearing=W.parseShort(),S.xMaxExtent=W.parseShort(),S.caretSlopeRise=W.parseShort(),S.caretSlopeRun=W.parseShort(),S.caretOffset=W.parseShort(),W.relativeOffset+=8,S.metricDataFormat=W.parseShort(),S.numberOfHMetrics=W.parseUShort(),S},make:function(b){return new We.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],b)}},Ee={parse:function(b,v,S,W,L){for(var B,F,Q=new ve.Parser(b,v),ae=0;ae<W;ae+=1){ae<S&&(B=Q.parseUShort(),F=Q.parseShort());var se=L.get(ae);se.advanceWidth=B,se.leftSideBearing=F}},make:function(b){for(var v=new We.Table("hmtx",[]),S=0;S<b.length;S+=1){var L=b.get(S),W=L.advanceWidth||0,L=L.leftSideBearing||0;v.fields.push({name:"advanceWidth_"+S,type:"USHORT",value:W}),v.fields.push({name:"leftSideBearing_"+S,type:"SHORT",value:L})}return v}},Qe={make:function(b){for(var v=new We.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:b.length}]),S="",W=12+4*b.length,L=0;L<b.length;++L){var B=S.indexOf(b[L]);B<0&&(B=S.length,S+=b[L]),v.fields.push({name:"offset "+L,type:"USHORT",value:W+B}),v.fields.push({name:"length "+L,type:"USHORT",value:b[L].length})}return v.fields.push({name:"stringPool",type:"CHARARRAY",value:S}),v},parse:function(b,v){for(var S=new ve.Parser(b,v),W=S.parseULong(),L=(T.argument(W===1,"Unsupported ltag table version."),S.skip("uLong",1),S.parseULong()),B=[],F=0;F<L;F++){for(var Q="",ae=v+S.parseUShort(),se=S.parseUShort(),fe=ae;fe<ae+se;++fe)Q+=String.fromCharCode(b.getInt8(fe));B.push(Q)}return B}},Ne={parse:function(W,v){var S={},W=new ve.Parser(W,v);return S.version=W.parseVersion(),S.numGlyphs=W.parseUShort(),S.version===1&&(S.maxPoints=W.parseUShort(),S.maxContours=W.parseUShort(),S.maxCompositePoints=W.parseUShort(),S.maxCompositeContours=W.parseUShort(),S.maxZones=W.parseUShort(),S.maxTwilightPoints=W.parseUShort(),S.maxStorage=W.parseUShort(),S.maxFunctionDefs=W.parseUShort(),S.maxInstructionDefs=W.parseUShort(),S.maxStackElements=W.parseUShort(),S.maxSizeOfInstructions=W.parseUShort(),S.maxComponentElements=W.parseUShort(),S.maxComponentDepth=W.parseUShort()),S},make:function(b){return new We.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:b}])}},Vt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Fe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},kt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},je={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Xt="utf-16",_e={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},gr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Lr(b,v,S){switch(b){case 0:return Xt;case 1:return gr[S]||_e[v];case 3:if(v===1||v===10)return Xt}}function mr(b){var v,S={};for(v in b)S[b[v]]=parseInt(v);return S}function Br(b,v,S,W,L,B){return new We.Record("NameRecord",[{name:"platformID",type:"USHORT",value:b},{name:"encodingID",type:"USHORT",value:v},{name:"languageID",type:"USHORT",value:S},{name:"nameID",type:"USHORT",value:W},{name:"length",type:"USHORT",value:L},{name:"offset",type:"USHORT",value:B}])}function vi(b,v){if((S=function(B,F){var Q=B.length,ae=F.length-Q+1;e:for(var se=0;se<ae;se++)for(;se<ae;se++){for(var fe=0;fe<Q;fe++)if(F[se+fe]!==B[fe])continue e;return se}return-1}(b,v))<0)for(var S=v.length,W=0,L=b.length;W<L;++W)v.push(b[W]);return S}var Ln={parse:function(b,v,S){for(var W={},L=new ve.Parser(b,v),v=L.parseUShort(),B=L.parseUShort(),F=L.offset+L.parseUShort(),Q=0;Q<B;Q++){var Ue=L.parseUShort(),ae=L.parseUShort(),se=L.parseUShort(),fe=L.parseUShort(),fe=Vt[fe]||fe,Re=L.parseUShort(),Ie=L.parseUShort(),ue=function(we,Ve,Ce){switch(we){case 0:if(Ve===65535)return"und";if(Ce)return Ce[Ve];break;case 1:return Fe[Ve];case 3:return je[Ve]}}(Ue,se,S),Ue=Lr(Ue,ae,se);Ue!==void 0&&ue!==void 0&&(ae=void 0,(ae=Ue===Xt?N.UTF16(b,F+Ie,Re):N.MACSTRING(b,F+Ie,Re,Ue))&&((se=(se=W[fe])===void 0?W[fe]={}:se)[ue]=ae))}return v===1&&L.parseUShort(),W},make:function(b,v){var S,W=[],L={},B=mr(Vt);for(S in b){var F=B[S];if(F===void 0&&(F=S),Ie=parseInt(F),isNaN(Ie))throw new Error('Name table entry "'+S+'" does not exist, see nameTableNames for complete list.');L[Ie]=b[S],W.push(Ie)}for(var Q=mr(Fe),ae=mr(je),se=[],fe=[],Re=0;Re<W.length;Re++){var Ie,ue,Ue=L[Ie=W[Re]];for(ue in Ue){var Xe=Ue[ue],vt=1,we=Q[ue],Ve=kt[we],Ce=Lr(vt,Ve,we),Ce=z.MACSTRING(Xe,Ce),at=(Ce===void 0&&(vt=0,(we=v.indexOf(ue))<0&&(we=v.length,v.push(ue)),Ve=4,Ce=z.UTF16(Xe)),vi(Ce,fe)),vt=(se.push(Br(vt,Ve,we,Ie,Ce.length,at)),ae[ue]);vt!==void 0&&(we=vi(Ve=z.UTF16(Xe),fe),se.push(Br(3,1,vt,Ie,Ve.length,we)))}}se.sort(function(St,zt){return St.platformID-zt.platformID||St.encodingID-zt.encodingID||St.languageID-zt.languageID||St.nameID-zt.nameID});for(var dt=new We.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:se.length},{name:"stringOffset",type:"USHORT",value:6+12*se.length}]),ht=0;ht<se.length;ht++)dt.fields.push({name:"record_"+ht,type:"RECORD",value:se[ht]});return dt.fields.push({name:"strings",type:"LITERAL",value:fe}),dt}},Gi=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Ur={parse:function(b,v){var S={},W=new ve.Parser(b,v);S.version=W.parseUShort(),S.xAvgCharWidth=W.parseShort(),S.usWeightClass=W.parseUShort(),S.usWidthClass=W.parseUShort(),S.fsType=W.parseUShort(),S.ySubscriptXSize=W.parseShort(),S.ySubscriptYSize=W.parseShort(),S.ySubscriptXOffset=W.parseShort(),S.ySubscriptYOffset=W.parseShort(),S.ySuperscriptXSize=W.parseShort(),S.ySuperscriptYSize=W.parseShort(),S.ySuperscriptXOffset=W.parseShort(),S.ySuperscriptYOffset=W.parseShort(),S.yStrikeoutSize=W.parseShort(),S.yStrikeoutPosition=W.parseShort(),S.sFamilyClass=W.parseShort(),S.panose=[];for(var L=0;L<10;L++)S.panose[L]=W.parseByte();return S.ulUnicodeRange1=W.parseULong(),S.ulUnicodeRange2=W.parseULong(),S.ulUnicodeRange3=W.parseULong(),S.ulUnicodeRange4=W.parseULong(),S.achVendID=String.fromCharCode(W.parseByte(),W.parseByte(),W.parseByte(),W.parseByte()),S.fsSelection=W.parseUShort(),S.usFirstCharIndex=W.parseUShort(),S.usLastCharIndex=W.parseUShort(),S.sTypoAscender=W.parseShort(),S.sTypoDescender=W.parseShort(),S.sTypoLineGap=W.parseShort(),S.usWinAscent=W.parseUShort(),S.usWinDescent=W.parseUShort(),1<=S.version&&(S.ulCodePageRange1=W.parseULong(),S.ulCodePageRange2=W.parseULong()),2<=S.version&&(S.sxHeight=W.parseShort(),S.sCapHeight=W.parseShort(),S.usDefaultChar=W.parseUShort(),S.usBreakChar=W.parseUShort(),S.usMaxContent=W.parseUShort()),S},make:function(b){return new We.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],b)},unicodeRanges:Gi,getUnicodeRange:function(b){for(var v=0;v<Gi.length;v+=1){var S=Gi[v];if(b>=S.begin&&b<S.end)return v}return-1}},hZ={parse:function(b,v){var S={},W=new ve.Parser(b,v);switch(S.version=W.parseVersion(),S.italicAngle=W.parseFixed(),S.underlinePosition=W.parseShort(),S.underlineThickness=W.parseShort(),S.isFixedPitch=W.parseULong(),S.minMemType42=W.parseULong(),S.maxMemType42=W.parseULong(),S.minMemType1=W.parseULong(),S.maxMemType1=W.parseULong(),S.version){case 1:S.names=ye.slice();break;case 2:S.numberOfGlyphs=W.parseUShort(),S.glyphNameIndex=new Array(S.numberOfGlyphs);for(var L=0;L<S.numberOfGlyphs;L++)S.glyphNameIndex[L]=W.parseUShort();S.names=[];for(var B,F=0;F<S.numberOfGlyphs;F++)S.glyphNameIndex[F]>=ye.length&&(B=W.parseChar(),S.names.push(W.parseString(B)));break;case 2.5:S.numberOfGlyphs=W.parseUShort(),S.offset=new Array(S.numberOfGlyphs);for(var Q=0;Q<S.numberOfGlyphs;Q++)S.offset[Q]=W.parseChar()}return S},make:function(){return new We.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ti=new Array(9),Gs=(ti[1]=function(){var b=this.offset+this.relativeOffset,v=this.parseUShort();return v===1?{substFormat:1,coverage:this.parsePointer(Ze.coverage),deltaGlyphId:this.parseUShort()}:v===2?{substFormat:2,coverage:this.parsePointer(Ze.coverage),substitute:this.parseOffset16List()}:void T.assert(!1,"0x"+b.toString(16)+": lookup type 1 format must be 1 or 2.")},ti[2]=function(){var b=this.parseUShort();return T.argument(b===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:b,coverage:this.parsePointer(Ze.coverage),sequences:this.parseListOfLists()}},ti[3]=function(){var b=this.parseUShort();return T.argument(b===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:b,coverage:this.parsePointer(Ze.coverage),alternateSets:this.parseListOfLists()}},ti[4]=function(){var b=this.parseUShort();return T.argument(b===1,"GSUB ligature table identifier-format must be 1"),{substFormat:b,coverage:this.parsePointer(Ze.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Ze.uShort,lookupListIndex:Ze.uShort});ti[5]=function(){var b,v,S=this.offset+this.relativeOffset,W=this.parseUShort();return W===1?{substFormat:W,coverage:this.parsePointer(Ze.coverage),ruleSets:this.parseListOfLists(function(){var L=this.parseUShort(),B=this.parseUShort();return{input:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(B,Gs)}})}:W===2?{substFormat:W,coverage:this.parsePointer(Ze.coverage),classDef:this.parsePointer(Ze.classDef),classSets:this.parseListOfLists(function(){var L=this.parseUShort(),B=this.parseUShort();return{classes:this.parseUShortList(L-1),lookupRecords:this.parseRecordList(B,Gs)}})}:W===3?(b=this.parseUShort(),v=this.parseUShort(),{substFormat:W,coverages:this.parseList(b,Ze.pointer(Ze.coverage)),lookupRecords:this.parseRecordList(v,Gs)}):void T.assert(!1,"0x"+S.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ti[6]=function(){var b=this.offset+this.relativeOffset,v=this.parseUShort();return v===1?{substFormat:1,coverage:this.parsePointer(Ze.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Gs)}})}:v===2?{substFormat:2,coverage:this.parsePointer(Ze.coverage),backtrackClassDef:this.parsePointer(Ze.classDef),inputClassDef:this.parsePointer(Ze.classDef),lookaheadClassDef:this.parsePointer(Ze.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Gs)}})}:v===3?{substFormat:3,backtrackCoverage:this.parseList(Ze.pointer(Ze.coverage)),inputCoverage:this.parseList(Ze.pointer(Ze.coverage)),lookaheadCoverage:this.parseList(Ze.pointer(Ze.coverage)),lookupRecords:this.parseRecordList(Gs)}:void T.assert(!1,"0x"+b.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ti[7]=function(){var b=this.parseUShort(),b=(T.argument(b===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),v=new Ze(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:b,extension:ti[b].call(v)}},ti[8]=function(){var b=this.parseUShort();return T.argument(b===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:b,coverage:this.parsePointer(Ze.coverage),backtrackCoverage:this.parseList(Ze.pointer(Ze.coverage)),lookaheadCoverage:this.parseList(Ze.pointer(Ze.coverage)),substitutes:this.parseUShortList()}};var Qc=new Array(9);Qc[1]=function(b){return b.substFormat===1?new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(b.coverage)},{name:"deltaGlyphID",type:"USHORT",value:b.deltaGlyphId}]):new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new We.Coverage(b.coverage)}].concat(We.ushortList("substitute",b.substitute)))},Qc[3]=function(b){return T.assert(b.substFormat===1,"Lookup type 3 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(b.coverage)}].concat(We.tableList("altSet",b.alternateSets,function(v){return new We.Table("alternateSetTable",We.ushortList("alternate",v))})))},Qc[4]=function(b){return T.assert(b.substFormat===1,"Lookup type 4 substFormat must be 1."),new We.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new We.Coverage(b.coverage)}].concat(We.tableList("ligSet",b.ligatureSets,function(v){return new We.Table("ligatureSetTable",We.tableList("ligature",v,function(S){return new We.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:S.ligGlyph}].concat(We.ushortList("component",S.components,S.components.length+1)))}))})))};var mZ={parse:function(b,v){return v=(b=new Ze(b,v=v||0)).parseVersion(1),T.argument(v===1||v===1.1,"Unsupported GSUB table version."),v===1?{version:v,scripts:b.parseScriptList(),features:b.parseFeatureList(),lookups:b.parseLookupList(ti)}:{version:v,scripts:b.parseScriptList(),features:b.parseFeatureList(),lookups:b.parseLookupList(ti),variations:b.parseFeatureVariationsList()}},make:function(b){return new We.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(b.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(b.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(b.lookups,Qc)}])}},pZ={parse:function(b,v){for(var S=new ve.Parser(b,v),W=S.parseULong(),L=(T.argument(W===1,"Unsupported META table version."),S.parseULong(),S.parseULong(),S.parseULong()),B={},F=0;F<L;F++){var Q=S.parseTag(),se=S.parseULong(),ae=S.parseULong(),se=N.UTF8(b,v+se,ae);B[Q]=se}return B},make:function(b){var v,S=Object.keys(b).length,W="",L=16+12*S,B=new We.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:L},{name:"numTags",type:"ULONG",value:S}]);for(v in b){var F=W.length;W+=b[v],B.fields.push({name:"tag "+v,type:"TAG",value:v}),B.fields.push({name:"offset "+v,type:"ULONG",value:L+F}),B.fields.push({name:"length "+v,type:"ULONG",value:b[v].length})}return B.fields.push({name:"stringPool",type:"CHARARRAY",value:W}),B}};function fZ(b){return Math.log(b)/Math.log(2)|0}function tm(b){for(;b.length%4!=0;)b.push(0);for(var v=0,S=0;S<b.length;S+=4)v+=(b[S]<<24)+(b[S+1]<<16)+(b[S+2]<<8)+b[S+3];return v%=Math.pow(2,32)}function gZ(b,v,S,W){return new We.Record("Table Record",[{name:"tag",type:"TAG",value:b!==void 0?b:""},{name:"checkSum",type:"ULONG",value:v!==void 0?v:0},{name:"offset",type:"ULONG",value:S!==void 0?S:0},{name:"length",type:"ULONG",value:W!==void 0?W:0}])}function yZ(b){for(var v=new We.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),S=(v.tables=b,v.numTables=b.length,Math.pow(2,fZ(v.numTables))),W=(v.searchRange=16*S,v.entrySelector=fZ(S),v.rangeShift=16*v.numTables-v.searchRange,[]),L=[],B=v.sizeOf()+gZ().sizeOf()*v.numTables;B%4!=0;)B+=1,L.push({name:"padding",type:"BYTE",value:0});for(var F=0;F<b.length;F+=1){var Q=b[F],ae=(T.argument(Q.tableName.length===4,"Table name"+Q.tableName+" is invalid."),Q.sizeOf()),se=gZ(Q.tableName,tm(Q.encode()),B,ae);for(W.push({name:se.tag+" Table Record",type:"RECORD",value:se}),L.push({name:Q.tableName+" table",type:"RECORD",value:Q}),B+=ae,T.argument(!isNaN(B),"Something went wrong calculating the offset.");B%4!=0;)B+=1,L.push({name:"padding",type:"BYTE",value:0})}return W.sort(function(fe,Re){return fe.value.tag>Re.value.tag?1:-1}),v.fields=v.fields.concat(W),v.fields=v.fields.concat(L),v}function bZ(b,v,S){for(var W=0;W<v.length;W+=1){var L=b.charToGlyphIndex(v[W]);if(0<L)return b.glyphs.get(L).getMetrics()}return S}var gN={make:yZ,fontToTable:function(b){for(var v,S=[],W=[],L=[],B=[],F=[],Q=[],ae=[],se=0,fe=0,Re=0,Ie=0,ue=0,Ue=0;Ue<b.glyphs.length;Ue+=1){var Xe=b.glyphs.get(Ue),we=0|Xe.unicode;if(isNaN(Xe.advanceWidth))throw new Error("Glyph "+Xe.name+" ("+Ue+"): advanceWidth is not a number.");(we<v||v===void 0)&&0<we&&(v=we),se<we&&(se=we);var we=Ur.getUnicodeRange(we);if(we<32)fe|=1<<we;else if(we<64)Re|=1<<we-32;else if(we<96)Ie|=1<<we-64;else{if(!(we<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");ue|=1<<we-96}Xe.name!==".notdef"&&(we=Xe.getMetrics(),S.push(we.xMin),W.push(we.yMin),L.push(we.xMax),B.push(we.yMax),Q.push(we.leftSideBearing),ae.push(we.rightSideBearing),F.push(Xe.advanceWidth))}var Ve,Ce={xMin:Math.min.apply(null,S),yMin:Math.min.apply(null,W),xMax:Math.max.apply(null,L),yMax:Math.max.apply(null,B),advanceWidthMax:Math.max.apply(null,F),advanceWidthAvg:function(Fr){for(var Ea=0,Ws=0;Ws<Fr.length;Ws+=1)Ea+=Fr[Ws];return Ea/Fr.length}(F),minLeftSideBearing:Math.min.apply(null,Q),maxLeftSideBearing:Math.max.apply(null,Q),minRightSideBearing:Math.min.apply(null,ae)},at=(Ce.ascender=b.ascender,Ce.descender=b.descender,Fa.make({flags:3,unitsPerEm:b.unitsPerEm,xMin:Ce.xMin,yMin:Ce.yMin,xMax:Ce.xMax,yMax:Ce.yMax,lowestRecPPEM:3,createdTimestamp:b.createdTimestamp})),vt=de.make({ascender:Ce.ascender,descender:Ce.descender,advanceWidthMax:Ce.advanceWidthMax,minLeftSideBearing:Ce.minLeftSideBearing,minRightSideBearing:Ce.minRightSideBearing,xMaxExtent:Ce.maxLeftSideBearing+(Ce.xMax-Ce.xMin),numberOfHMetrics:b.glyphs.length}),dt=Ne.make(b.glyphs.length),ht=Ur.make({xAvgCharWidth:Math.round(Ce.advanceWidthAvg),usWeightClass:b.tables.os2.usWeightClass,usWidthClass:b.tables.os2.usWidthClass,usFirstCharIndex:v,usLastCharIndex:se,ulUnicodeRange1:fe,ulUnicodeRange2:Re,ulUnicodeRange3:Ie,ulUnicodeRange4:ue,fsSelection:b.tables.os2.fsSelection,sTypoAscender:Ce.ascender,sTypoDescender:Ce.descender,sTypoLineGap:0,usWinAscent:Ce.yMax,usWinDescent:Math.abs(Ce.yMin),ulCodePageRange1:1,sxHeight:bZ(b,"xyvw",{yMax:Math.round(Ce.ascender/2)}).yMax,sCapHeight:bZ(b,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ce).yMax,usDefaultChar:b.hasChar(" ")?32:0,usBreakChar:b.hasChar(" ")?32:0}),St=Ee.make(b.glyphs),zt=_.make(b.glyphs),er=b.getEnglishName("fontFamily"),Nt=b.getEnglishName("fontSubfamily"),Jt=er+" "+Nt,pr=(pr=b.getEnglishName("postScriptName"))||er.replace(/\s/g,"")+"-"+Nt,Rr={};for(Ve in b.names)Rr[Ve]=b.names[Ve];Rr.uniqueID||(Rr.uniqueID={en:b.getEnglishName("manufacturer")+":"+Jt}),Rr.postScriptName||(Rr.postScriptName={en:pr}),Rr.preferredFamily||(Rr.preferredFamily=b.names.fontFamily),Rr.preferredSubfamily||(Rr.preferredSubfamily=b.names.fontSubfamily);var on=[],nn=Ln.make(Rr,on),on=0<on.length?Qe.make(on):void 0,ni=hZ.make(),Jt=Ua.make(b.glyphs,{version:b.getEnglishName("version"),fullName:Jt,familyName:er,weightName:Nt,postScriptName:pr,unitsPerEm:b.unitsPerEm,fontBBox:[0,Ce.yMin,Ce.ascender,Ce.advanceWidthMax]}),er=b.metas&&0<Object.keys(b.metas).length?pZ.make(b.metas):void 0,Nt=[at,vt,dt,ht,nn,zt,ni,Jt,St];on&&Nt.push(on),b.tables.gsub&&Nt.push(mZ.make(b.tables.gsub)),er&&Nt.push(er);for(var sn=tm((pr=yZ(Nt)).encode()),cr=pr.fields,zr=!1,tr=0;tr<cr.length;tr+=1)if(cr[tr].name==="head table"){cr[tr].value.checkSumAdjustment=2981146554-sn,zr=!0;break}if(zr)return pr;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:tm};function rm(b,v){for(var S=0,W=b.length-1;S<=W;){var L=S+W>>>1,B=b[L].tag;if(B===v)return L;B<v?S=1+L:W=L-1}return-S-1}function ZZ(b,v){for(var S=0,W=b.length-1;S<=W;){var L=S+W>>>1,B=b[L];if(B===v)return L;B<v?S=1+L:W=L-1}return-S-1}function IZ(b,v){for(var S=0,W=b.length-1;S<=W;){var L,B=S+W>>>1,F=(L=b[B]).start;if(F===v)return L;F<v?S=1+B:W=B-1}if(0<S)return v>(L=b[S-1]).end?0:L}function qc(b,v){this.font=b,this.tableName=v}function $c(b){qc.call(this,b,"gpos")}function Ri(b){qc.call(this,b,"gsub")}function vZ(b,v,S){for(var W=b.subtables,L=0;L<W.length;L++){var B=W[L];if(B.substFormat===v)return B}if(S)return W.push(S),S}function GZ(b){for(var v=new ArrayBuffer(b.length),S=new Uint8Array(v),W=0;W<b.length;++W)S[W]=b[W];return v}function Rs(b,v){if(!b)throw v}function RZ(b,v,S,W,L){var B=0<(v&W)?(B=b.parseByte(),S+(B=(v&L)==0?-B:B)):0<(v&L)?S:S+b.parseShort();return B}function yN(b,v,S){var W,L=new ve.Parser(v,S);if(b.numberOfContours=L.parseShort(),b._xMin=L.parseShort(),b._yMin=L.parseShort(),b._xMax=L.parseShort(),b._yMax=L.parseShort(),0<b.numberOfContours){for(var B=b.endPointIndices=[],F=0;F<b.numberOfContours;F+=1)B.push(L.parseUShort());b.instructionLength=L.parseUShort(),b.instructions=[];for(var Q=0;Q<b.instructionLength;Q+=1)b.instructions.push(L.parseByte());for(var ae=B[B.length-1]+1,se=[],fe=0;fe<ae;fe+=1)if(W=L.parseByte(),se.push(W),0<(8&W))for(var Re=L.parseByte(),Ie=0;Ie<Re;Ie+=1)se.push(W),fe+=1;if(T.argument(se.length===ae,"Bad flags."),0<B.length){var ue,Ue=[];if(0<ae){for(var Xe=0;Xe<ae;Xe+=1)W=se[Xe],(ue={}).onCurve=!!(1&W),ue.lastPointOfContour=0<=B.indexOf(Xe),Ue.push(ue);for(var we=0,Ve=0;Ve<ae;Ve+=1)W=se[Ve],(ue=Ue[Ve]).x=RZ(L,W,we,2,16),we=ue.x;for(var Ce=0,at=0;at<ae;at+=1)W=se[at],(ue=Ue[at]).y=RZ(L,W,Ce,4,32),Ce=ue.y}b.points=Ue}else b.points=[]}else if(b.numberOfContours===0)b.points=[];else{b.isComposite=!0,b.points=[],b.components=[];for(var vt=!0;vt;){se=L.parseUShort();var dt={glyphIndex:L.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&se)?0<(2&se)?(dt.dx=L.parseShort(),dt.dy=L.parseShort()):dt.matchedPoints=[L.parseUShort(),L.parseUShort()]:0<(2&se)?(dt.dx=L.parseChar(),dt.dy=L.parseChar()):dt.matchedPoints=[L.parseByte(),L.parseByte()],0<(8&se)?dt.xScale=dt.yScale=L.parseF2Dot14():0<(64&se)?(dt.xScale=L.parseF2Dot14(),dt.yScale=L.parseF2Dot14()):0<(128&se)&&(dt.xScale=L.parseF2Dot14(),dt.scale01=L.parseF2Dot14(),dt.scale10=L.parseF2Dot14(),dt.yScale=L.parseF2Dot14()),b.components.push(dt),vt=!!(32&se)}if(256&se){b.instructionLength=L.parseUShort(),b.instructions=[];for(var ht=0;ht<b.instructionLength;ht+=1)b.instructions.push(L.parseByte())}}}function nm(b,v){for(var S=[],W=0;W<b.length;W+=1){var L=b[W],L={x:v.xScale*L.x+v.scale01*L.y+v.dx,y:v.scale10*L.x+v.yScale*L.y+v.dy,onCurve:L.onCurve,lastPointOfContour:L.lastPointOfContour};S.push(L)}return S}function SZ(b){var v=new D;if(b)for(var S=function(Re){for(var Ie=[],ue=[],Ue=0;Ue<Re.length;Ue+=1){var Xe=Re[Ue];ue.push(Xe),Xe.lastPointOfContour&&(Ie.push(ue),ue=[])}return T.argument(ue.length===0,"There are still points left in the current contour."),Ie}(b),W=0;W<S.length;++W){var L,B=S[W],F=B[B.length-1],Q=B[0];F.onCurve?v.moveTo(F.x,F.y):Q.onCurve?v.moveTo(Q.x,Q.y):(L={x:.5*(F.x+Q.x),y:.5*(F.y+Q.y)},v.moveTo(L.x,L.y));for(var ae=0;ae<B.length;++ae){var se,fe=F,F=Q,Q=B[(ae+1)%B.length];F.onCurve?v.lineTo(F.x,F.y):(se=Q,fe.onCurve||(F.x,fe.x,F.y,fe.y),Q.onCurve||(se={x:.5*(F.x+Q.x),y:.5*(F.y+Q.y)}),v.quadraticCurveTo(F.x,F.y,se.x,se.y))}v.closePath()}return v}function bN(b,v){if(v.isComposite)for(var S=0;S<v.components.length;S+=1){var W=v.components[S],L=b.get(W.glyphIndex);if(L.getPath(),L.points){var B=void 0;if(W.matchedPoints===void 0)B=nm(L.points,W);else{if(W.matchedPoints[0]>v.points.length-1||W.matchedPoints[1]>L.points.length-1)throw Error("Matched points out of range in "+v.name);var F=v.points[W.matchedPoints[0]],Q=L.points[W.matchedPoints[1]],W={xScale:W.xScale,scale01:W.scale01,scale10:W.scale10,yScale:W.yScale,dx:0,dy:0},Q=nm([Q],W)[0];W.dx=F.x-Q.x,W.dy=F.y-Q.y,B=nm(L.points,W)}v.points=v.points.concat(B)}}return SZ(v.points)}($c.prototype=qc.prototype={searchTag:rm,binSearch:ZZ,getTable:function(b){var v=this.font.tables[this.tableName];return v=!v&&b?this.font.tables[this.tableName]=this.createDefaultTable():v},getScriptNames:function(){var b=this.getTable();return b?b.scripts.map(function(v){return v.tag}):[]},getDefaultScriptName:function(){var b=this.getTable();if(b){for(var v=!1,S=0;S<b.scripts.length;S++){var W=b.scripts[S].tag;if(W==="DFLT")return W;W==="latn"&&(v=!0)}return v?"latn":void 0}},getScriptTable:function(b,v){var S,W=this.getTable(v);if(W)return S=W.scripts,0<=(W=rm(W.scripts,b=b||"DFLT"))?S[W].script:v?(S.splice(-1-W,0,v={tag:b,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),v.script):void 0},getLangSysTable:function(L,v,S){var W,L=this.getScriptTable(L,S);if(L)return v&&v!=="dflt"&&v!=="DFLT"?0<=(W=rm(L.langSysRecords,v))?L.langSysRecords[W].langSys:S?(L.langSysRecords.splice(-1-W,0,S={tag:v,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),S.langSys):void 0:L.defaultLangSys},getFeatureTable:function(b,v,S,W){if(b=this.getLangSysTable(b,v,W),b){for(var L,B=b.featureIndexes,F=this.font.tables[this.tableName].features,Q=0;Q<B.length;Q++)if((L=F[B[Q]]).tag===S)return L.feature;if(W)return v=F.length,T.assert(v===0||S>=F[v-1].tag,"Features must be added in alphabetical order."),F.push(L={tag:S,feature:{params:0,lookupListIndexes:[]}}),B.push(v),L.feature}},getLookupTables:function(B,v,S,W,L){var B=this.getFeatureTable(B,v,S,L),F=[];if(B){for(var Q,ae=B.lookupListIndexes,se=this.font.tables[this.tableName].lookups,fe=0;fe<ae.length;fe++)(Q=se[ae[fe]]).lookupType===W&&F.push(Q);if(F.length===0&&L)return v=se.length,se.push(Q={lookupType:W,lookupFlag:0,subtables:[],markFilteringSet:void 0}),ae.push(v),[Q]}return F},getGlyphClass:function(b,v){switch(b.format){case 1:return b.startGlyph<=v&&v<b.startGlyph+b.classes.length?b.classes[v-b.startGlyph]:0;case 2:var S=IZ(b.ranges,v);return S?S.classId:0}},getCoverageIndex:function(b,v){switch(b.format){case 1:var S=ZZ(b.glyphs,v);return 0<=S?S:-1;case 2:return S=IZ(b.ranges,v),S?S.index+v-S.start:-1}},expandCoverage:function(b){if(b.format===1)return b.glyphs;for(var v=[],S=b.ranges,W=0;W<S.length;W++)for(var L=S[W],B=L.start,F=L.end,Q=B;Q<=F;Q++)v.push(Q);return v}}).init=function(){var b=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(b)},$c.prototype.getKerningValue=function(b,v,S){for(var W=0;W<b.length;W++)for(var L=b[W].subtables,B=0;B<L.length;B++){var F=L[B],Q=this.getCoverageIndex(F.coverage,v);if(!(Q<0))switch(F.posFormat){case 1:for(var ae=F.pairSets[Q],se=0;se<ae.length;se++){var fe=ae[se];if(fe.secondGlyph===S)return fe.value1&&fe.value1.xAdvance||0}break;case 2:var Ie=this.getGlyphClass(F.classDef1,v),Re=this.getGlyphClass(F.classDef2,S),Ie=F.classRecords[Ie][Re];return Ie.value1&&Ie.value1.xAdvance||0}}return 0},$c.prototype.getKerningTables=function(b,v){if(this.font.tables.gpos)return this.getLookupTables(b,v,"kern",2)},(Ri.prototype=qc.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Ri.prototype.getSingle=function(b,v,S){for(var W=[],L=this.getLookupTables(v,S,b,1),B=0;B<L.length;B++)for(var F=L[B].subtables,Q=0;Q<F.length;Q++){var ae=F[Q],se=this.expandCoverage(ae.coverage),fe=void 0;if(ae.substFormat===1)for(var Re=ae.deltaGlyphId,fe=0;fe<se.length;fe++){var Ie=se[fe];W.push({sub:Ie,by:Ie+Re})}else{var ue=ae.substitute;for(fe=0;fe<se.length;fe++)W.push({sub:se[fe],by:ue[fe]})}}return W},Ri.prototype.getAlternates=function(b,v,S){for(var W=[],L=this.getLookupTables(v,S,b,3),B=0;B<L.length;B++)for(var F=L[B].subtables,Q=0;Q<F.length;Q++)for(var ae=F[Q],se=this.expandCoverage(ae.coverage),fe=ae.alternateSets,Re=0;Re<se.length;Re++)W.push({sub:se[Re],by:fe[Re]});return W},Ri.prototype.getLigatures=function(b,v,S){for(var W=[],L=this.getLookupTables(v,S,b,4),B=0;B<L.length;B++)for(var F=L[B].subtables,Q=0;Q<F.length;Q++)for(var ae=F[Q],se=this.expandCoverage(ae.coverage),fe=ae.ligatureSets,Re=0;Re<se.length;Re++)for(var Ie=se[Re],ue=fe[Re],Ue=0;Ue<ue.length;Ue++){var Xe=ue[Ue];W.push({sub:[Ie].concat(Xe.components),by:Xe.ligGlyph})}return W},Ri.prototype.addSingle=function(b,v,S,W){S=vZ(this.getLookupTables(S,W,b,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),T.assert(S.coverage.format===1,"Ligature: unable to modify coverage table format "+S.coverage.format),W=v.sub,b=this.binSearch(S.coverage.glyphs,W),b<0&&(S.coverage.glyphs.splice(b=-1-b,0,W),S.substitute.splice(b,0,0)),S.substitute[b]=v.by},Ri.prototype.addAlternate=function(b,v,S,W){S=vZ(this.getLookupTables(S,W,b,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),T.assert(S.coverage.format===1,"Ligature: unable to modify coverage table format "+S.coverage.format),W=v.sub,b=this.binSearch(S.coverage.glyphs,W),b<0&&(S.coverage.glyphs.splice(b=-1-b,0,W),S.alternateSets.splice(b,0,0)),S.alternateSets[b]=v.by},Ri.prototype.addLigature=function(B,ae,Q,L){var Q=this.getLookupTables(Q,L,B,4,!0)[0],L=Q.subtables[0],B=(L||(Q.subtables[0]=L={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),T.assert(L.coverage.format===1,"Ligature: unable to modify coverage table format "+L.coverage.format),ae.sub[0]),F=ae.sub.slice(1),Q={ligGlyph:ae.by,components:F},ae=this.binSearch(L.coverage.glyphs,B);if(0<=ae){for(var se=L.ligatureSets[ae],fe=0;fe<se.length;fe++)if(function(Re,Ie){var ue=Re.length;if(ue===Ie.length){for(var Ue=0;Ue<ue;Ue++)if(Re[Ue]!==Ie[Ue])return;return 1}}(se[fe].components,F))return;se.push(Q)}else L.coverage.glyphs.splice(ae=-1-ae,0,B),L.ligatureSets.splice(ae,0,[Q])},Ri.prototype.getFeature=function(b,v,S){if(/ss\d\d/.test(b))return this.getSingle(b,v,S);switch(b){case"aalt":case"salt":return this.getSingle(b,v,S).concat(this.getAlternates(b,v,S));case"dlig":case"liga":case"rlig":return this.getLigatures(b,v,S)}},Ri.prototype.add=function(b,v,S,W){if(/ss\d\d/.test(b))return this.addSingle(b,v,S,W);switch(b){case"aalt":case"salt":return typeof v.by=="number"?this.addSingle(b,v,S,W):this.addAlternate(b,v,S,W);case"dlig":case"liga":case"rlig":return this.addLigature(b,v,S,W)}};var WZ={getPath:SZ,parse:function(b,v,S,W){for(var L=new st.GlyphSet(W),B=0;B<S.length-1;B+=1){var F=S[B];F!==S[B+1]?L.push(B,st.ttfGlyphLoader(W,B,yN,b,v+F,bN)):L.push(B,st.glyphLoader(W,B))}return L}};function VZ(b){this.font=b,this.getCommands=function(v){return WZ.getPath(v).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function ZN(b){return b}function CZ(b){return Math.sign(b)*Math.round(Math.abs(b))}function IN(b){return Math.sign(b)*Math.round(Math.abs(2*b))/2}function vN(b){return Math.sign(b)*(Math.round(Math.abs(b)+.5)-.5)}function GN(b){return Math.sign(b)*Math.ceil(Math.abs(b))}function RN(b){return Math.sign(b)*Math.floor(Math.abs(b))}function XZ(b){var v=this.srPeriod,S=this.srPhase,W=1;return b<0&&(b=-b,W=-1),b+=this.srThreshold-S,b=Math.trunc(b/v)*v,(b+=S)<0?S*W:b*W}var Si={x:1,y:0,axis:"x",distance:function(b,v,S,W){return(S?b.xo:b.x)-(W?v.xo:v.x)},interpolate:function(b,v,S,W){var L,B,F,Q,ae,se,fe;if(!W||W===this)return L=b.xo-v.xo,B=b.xo-S.xo,ae=v.x-v.xo,se=S.x-S.xo,(fe=(F=Math.abs(L))+(Q=Math.abs(B)))===0?void(b.x=b.xo+(ae+se)/2):void(b.x=b.xo+(ae*Q+se*F)/fe);L=W.distance(b,v,!0,!0),B=W.distance(b,S,!0,!0),ae=W.distance(v,v,!1,!0),se=W.distance(S,S,!1,!0),(fe=(F=Math.abs(L))+(Q=Math.abs(B)))===0?Si.setRelative(b,b,(ae+se)/2,W,!0):Si.setRelative(b,b,(ae*Q+se*F)/fe,W,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(b,v,S,W,L){var B,F;W&&W!==this?(B=L?v.xo:v.x,F=L?v.yo:v.y,B+=S*W.x,F+=S*W.y,b.x=B+(b.y-F)/W.normalSlope):b.x=(L?v.xo:v.x)+S},slope:0,touch:function(b){b.xTouched=!0},touched:function(b){return b.xTouched},untouch:function(b){b.xTouched=!1}},Fi={x:0,y:1,axis:"y",distance:function(b,v,S,W){return(S?b.yo:b.y)-(W?v.yo:v.y)},interpolate:function(b,v,S,W){var L,B,F,Q,ae,se,fe;if(!W||W===this)return L=b.yo-v.yo,B=b.yo-S.yo,ae=v.y-v.yo,se=S.y-S.yo,(fe=(F=Math.abs(L))+(Q=Math.abs(B)))===0?void(b.y=b.yo+(ae+se)/2):void(b.y=b.yo+(ae*Q+se*F)/fe);L=W.distance(b,v,!0,!0),B=W.distance(b,S,!0,!0),ae=W.distance(v,v,!1,!0),se=W.distance(S,S,!1,!0),(fe=(F=Math.abs(L))+(Q=Math.abs(B)))===0?Fi.setRelative(b,b,(ae+se)/2,W,!0):Fi.setRelative(b,b,(ae*Q+se*F)/fe,W,!0)},normalSlope:0,setRelative:function(b,v,S,W,L){var B,F;W&&W!==this?(B=L?v.xo:v.x,F=L?v.yo:v.y,B+=S*W.x,F+=S*W.y,b.y=F+W.normalSlope*(b.x-B)):b.y=(L?v.yo:v.y)+S},slope:Number.POSITIVE_INFINITY,touch:function(b){b.yTouched=!0},touched:function(b){return b.yTouched},untouch:function(b){b.yTouched=!1}};function Ya(b,v){this.x=b,this.y=v,this.axis=void 0,this.slope=v/b,this.normalSlope=-b/v,Object.freeze(this)}function Na(b,v){var S=Math.sqrt(b*b+v*v);return v/=S,(b/=S)===1&&v===0?Si:b===0&&v===1?Fi:new Ya(b,v)}function Yi(b,v,S,W){this.x=this.xo=Math.round(64*b)/64,this.y=this.yo=Math.round(64*v)/64,this.lastPointOfContour=S,this.onCurve=W,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Si),Object.freeze(Fi),Ya.prototype.distance=function(b,v,S,W){return this.x*Si.distance(b,v,S,W)+this.y*Fi.distance(b,v,S,W)},Ya.prototype.interpolate=function(b,L,B,W){var F=W.distance(b,L,!0,!0),Q=W.distance(b,B,!0,!0),L=W.distance(L,L,!1,!0),B=W.distance(B,B,!1,!0),F=Math.abs(F),Q=Math.abs(Q),ae=F+Q;ae===0?this.setRelative(b,b,(L+B)/2,W,!0):this.setRelative(b,b,(L*Q+B*F)/ae,W,!0)},Ya.prototype.setRelative=function(b,B,ae,se,Q){var F=Q?B.xo:B.x,Q=Q?B.yo:B.y,B=F+ae*(se=se||this).x,F=Q+ae*se.y,Q=se.normalSlope,ae=this.slope,se=b.x,fe=b.y;b.x=(ae*se-Q*B+F-fe)/(ae-Q),b.y=ae*(b.x-se)+fe},Ya.prototype.touch=function(b){b.xTouched=!0,b.yTouched=!0},Yi.prototype.nextTouched=function(b){for(var v=this.nextPointOnContour;!b.touched(v)&&v!==this;)v=v.nextPointOnContour;return v},Yi.prototype.prevTouched=function(b){for(var v=this.prevPointOnContour;!b.touched(v)&&v!==this;)v=v.prevPointOnContour;return v};var Ma=Object.freeze(new Yi(0,0)),SN={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function ho(b,v){switch(this.env=b,this.stack=[],this.prog=v,b){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Si,this.round=CZ}}function eu(b){for(var v=b.tZone=new Array(b.gZone.length),S=0;S<v.length;S++)v[S]=new Yi(0,0)}function LZ(b,v){var S,W=b.prog,L=b.ip,B=1;do if((S=W[++L])===88)B++;else if(S===89)B--;else if(S===64)L+=W[L+1]+1;else if(S===65)L+=2*W[L+1]+1;else if(176<=S&&S<=183)L+=S-176+1;else if(184<=S&&S<=191)L+=2*(S-184+1);else if(v&&B===1&&S===27)break;while(0<B);b.ip=L}function xZ(b,v){c.DEBUG&&console.log(v.step,"SVTCA["+b.axis+"]"),v.fv=v.pv=v.dpv=b}function wZ(b,v){c.DEBUG&&console.log(v.step,"SPVTCA["+b.axis+"]"),v.pv=v.dpv=b}function kZ(b,v){c.DEBUG&&console.log(v.step,"SFVTCA["+b.axis+"]"),v.fv=b}function AZ(b,v){var S,L=v.stack,W=L.pop(),L=L.pop(),B=v.z2[W],F=v.z1[L];c.DEBUG&&console.log("SPVTL["+b+"]",W,L),W=b?(S=B.y-F.y,F.x-B.x):(S=F.x-B.x,F.y-B.y),v.pv=v.dpv=Na(S,W)}function TZ(b,v){var S,L=v.stack,W=L.pop(),L=L.pop(),B=v.z2[W],F=v.z1[L];c.DEBUG&&console.log("SFVTL["+b+"]",W,L),W=b?(S=B.y-F.y,F.x-B.x):(S=F.x-B.x,F.y-B.y),v.fv=Na(S,W)}function im(b){c.DEBUG&&console.log(b.step,"POP[]"),b.stack.pop()}function BZ(b,v){var S=v.stack.pop(),W=v.z0[S],L=v.fv,B=v.pv,F=(c.DEBUG&&console.log(v.step,"MDAP["+b+"]",S),B.distance(W,Ma));b&&(F=v.round(F)),L.setRelative(W,Ma,F,B),L.touch(W),v.rp0=v.rp1=S}function UZ(b,v){var S,W,L,B=v.z2,F=B.length-2;c.DEBUG&&console.log(v.step,"IUP["+b.axis+"]");for(var Q=0;Q<F;Q++)S=B[Q],b.touched(S)||(W=S.prevTouched(b))!==S&&(W===(L=S.nextTouched(b))&&b.setRelative(S,S,b.distance(W,W,!1,!0),b,!0),b.interpolate(S,W,L,b))}function FZ(b,v){for(var S=v.stack,W=b?v.rp1:v.rp2,L=(b?v.z0:v.z1)[W],B=v.fv,F=v.pv,Q=v.loop,ae=v.z2;Q--;){var se=S.pop(),fe=ae[se],Re=F.distance(L,L,!1,!0);B.setRelative(fe,fe,Re,F),B.touch(fe),c.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-Q)+": ":"")+"SHP["+(b?"rp1":"rp2")+"]",se)}v.loop=1}function YZ(b,v){for(var S=v.stack,F=b?v.rp1:v.rp2,W=(b?v.z0:v.z1)[F],L=v.fv,B=v.pv,F=S.pop(),Q=v.z2[v.contours[F]],ae=Q,se=(c.DEBUG&&console.log(v.step,"SHC["+b+"]",F),B.distance(W,W,!1,!0));ae!==W&&L.setRelative(ae,ae,se,B),(ae=ae.nextPointOnContour)!==Q;);}function NZ(b,v){var S,W,Q=v.stack,L=b?v.rp1:v.rp2,L=(b?v.z0:v.z1)[L],B=v.fv,F=v.pv,Q=Q.pop();switch(c.DEBUG&&console.log(v.step,"SHZ["+b+"]",Q),Q){case 0:S=v.tZone;break;case 1:S=v.gZone;break;default:throw new Error("Invalid zone")}for(var ae=F.distance(L,L,!1,!0),se=S.length-2,fe=0;fe<se;fe++)W=S[fe],B.setRelative(W,W,ae,F)}function MZ(b,v){var W=v.stack,S=W.pop()/64,W=W.pop(),L=v.z1[W],B=v.z0[v.rp0],F=v.fv,Q=v.pv;F.setRelative(L,B,S,Q),F.touch(L),c.DEBUG&&console.log(v.step,"MSIRP["+b+"]",S,W),v.rp1=v.rp0,v.rp2=W,b&&(v.rp0=W)}function EZ(b,v){var S=v.stack,Q=S.pop(),S=S.pop(),W=v.z0[S],L=v.fv,B=v.pv,F=v.cvt[Q],Q=(c.DEBUG&&console.log(v.step,"MIAP["+b+"]",Q,"(",F,")",S),B.distance(W,Ma));b&&(Math.abs(Q-F)<v.cvCutIn&&(Q=F),Q=v.round(Q)),L.setRelative(W,Ma,Q,B),v.zp0===0&&(W.xo=W.x,W.yo=W.y),L.touch(W),v.rp0=v.rp1=S}function HZ(b,v){var S=v.stack,W=S.pop(),L=v.z2[W];c.DEBUG&&console.log(v.step,"GC["+b+"]",W),S.push(64*v.dpv.distance(L,Ma,b,!1))}function KZ(b,v){var W=v.stack,S=W.pop(),W=W.pop(),L=v.z1[S],B=v.z0[W],B=v.dpv.distance(B,L,b,b);c.DEBUG&&console.log(v.step,"MD["+b+"]",S,W,"->",B),v.stack.push(Math.round(64*B))}function om(b,v){var S=v.stack,W=S.pop(),L=v.fv,B=v.pv,F=v.ppem,Q=v.deltaBase+16*(b-1),ae=v.deltaShift,se=v.z0;c.DEBUG&&console.log(v.step,"DELTAP["+b+"]",W,S);for(var fe=0;fe<W;fe++){var Re=S.pop(),Ie=S.pop();Q+((240&Ie)>>4)===F&&(0<=(Ie=(15&Ie)-8)&&Ie++,c.DEBUG&&console.log(v.step,"DELTAPFIX",Re,"by",Ie*ae),Re=se[Re],L.setRelative(Re,Re,Ie*ae,B))}}function tu(b,v){var S=v.stack,W=S.pop();c.DEBUG&&console.log(v.step,"ROUND[]"),S.push(64*v.round(W/64))}function sm(b,v){var S=v.stack,W=S.pop(),L=v.ppem,B=v.deltaBase+16*(b-1),F=v.deltaShift;c.DEBUG&&console.log(v.step,"DELTAC["+b+"]",W,S);for(var Q=0;Q<W;Q++){var ae=S.pop(),se=S.pop();B+((240&se)>>4)===L&&(0<=(se=(15&se)-8)&&se++,se=se*F,c.DEBUG&&console.log(v.step,"DELTACFIX",ae,"by",se),v.cvt[ae]+=se)}}function JZ(b,v){var S,L=v.stack,W=L.pop(),L=L.pop(),B=v.z2[W],F=v.z1[L];c.DEBUG&&console.log(v.step,"SDPVTL["+b+"]",W,L),W=b?(S=B.y-F.y,F.x-B.x):(S=F.x-B.x,F.y-B.y),v.dpv=Na(S,W)}function mo(b,v){var S=v.stack,W=v.prog,L=v.ip;c.DEBUG&&console.log(v.step,"PUSHB["+b+"]");for(var B=0;B<b;B++)S.push(W[++L]);v.ip=L}function po(b,v){var S=v.ip,W=v.prog,L=v.stack;c.DEBUG&&console.log(v.ip,"PUSHW["+b+"]");for(var B=0;B<b;B++){var F=W[++S]<<8|W[++S];32768&F&&(F=-(1+(65535^F))),L.push(F)}v.ip=S}function nt(b,v,S,W,L,B){var F,Q,se=B.stack,ae=b&&se.pop(),se=se.pop(),fe=B.rp0,fe=B.z0[fe],Re=B.z1[se],Ie=B.minDis,ue=B.fv,Ue=B.dpv,Xe=F=Ue.distance(Re,fe,!0,!0),we=0<=Xe?1:-1;Xe=Math.abs(Xe),b&&(Q=B.cvt[ae],W&&Math.abs(Xe-Q)<B.cvCutIn&&(Xe=Q)),S&&Xe<Ie&&(Xe=Ie),W&&(Xe=B.round(Xe)),ue.setRelative(Re,fe,we*Xe,Ue),ue.touch(Re),c.DEBUG&&console.log(B.step,(b?"MIRP[":"MDRP[")+(v?"M":"m")+(S?">":"_")+(W?"R":"_")+(L===0?"Gr":L===1?"Bl":L===2?"Wh":"")+"]",b?ae+"("+B.cvt[ae]+","+Q+")":"",se,"(d =",F,"->",we*Xe,")"),B.rp1=B.rp0,B.rp2=se,v&&(B.rp0=se)}VZ.prototype.exec=function(b,v){if(typeof v!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var S=this.font,W=this._prepState;if(!W||W.ppem!==v){var L=this._fpgmState;if(!L){ho.prototype=SN,(L=this._fpgmState=new ho("fpgm",S.tables.fpgm)).funcs=[],L.font=S,c.DEBUG&&(console.log("---EXEC FPGM---"),L.step=-1);try{Ss(L)}catch(se){return console.log("Hinting error in FPGM:"+se),void(this._errorState=3)}}ho.prototype=L,(W=this._prepState=new ho("prep",S.tables.prep)).ppem=v;var B=S.tables.cvt;if(B)for(var F=W.cvt=new Array(B.length),Q=v/S.unitsPerEm,ae=0;ae<B.length;ae++)F[ae]=B[ae]*Q;else W.cvt=[];c.DEBUG&&(console.log("---EXEC PREP---"),W.step=-1);try{Ss(W)}catch(se){this._errorState<2&&console.log("Hinting error in PREP:"+se),this._errorState=2}}if(!(1<this._errorState))try{return WN(b,W)}catch(se){this._errorState<1&&(console.log("Hinting error:"+se),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var WN=function(b,v){var S=v.ppem/v.font.unitsPerEm,W=S,L=b.components;if(ho.prototype=v,L){for(var B=v.font,F=[],Q=[],ae=0;ae<L.length;ae++){var se=L[ae],fe=B.glyphs.get(se.glyphIndex),Re=new ho("glyf",fe.instructions);c.DEBUG&&(console.log("---EXEC COMP "+ae+"---"),Re.step=-1),jZ(fe,Re,S,W);for(var Ie=Math.round(se.dx*S),ue=Math.round(se.dy*W),Ue=Re.gZone,Xe=Re.contours,we=0;we<Ue.length;we++){var Ve=Ue[we];Ve.xTouched=Ve.yTouched=!1,Ve.xo=Ve.x=Ve.x+Ie,Ve.yo=Ve.y=Ve.y+ue}var Ce=F.length;F.push.apply(F,Ue);for(var at=0;at<Xe.length;at++)Q.push(Xe[at]+Ce)}b.instructions&&!Re.inhibitGridFit&&((Re=new ho("glyf",b.instructions)).gZone=Re.z0=Re.z1=Re.z2=F,Re.contours=Q,F.push(new Yi(0,0),new Yi(Math.round(b.advanceWidth*S),0)),c.DEBUG&&(console.log("---EXEC COMPOSITE---"),Re.step=-1),Ss(Re),F.length-=2)}else Re=new ho("glyf",b.instructions),c.DEBUG&&(console.log("---EXEC GLYPH---"),Re.step=-1),jZ(b,Re,S,W),F=Re.gZone;return F},jZ=function(b,v,S,W){for(var L,B,F,Q=b.points||[],ae=Q.length,se=v.gZone=v.z0=v.z1=v.z2=[],fe=v.contours=[],Re=0;Re<ae;Re++)L=Q[Re],se[Re]=new Yi(L.x*S,L.y*W,L.lastPointOfContour,L.onCurve);for(var Ie=0;Ie<ae;Ie++)L=se[Ie],B||(B=L,fe.push(Ie)),L.lastPointOfContour?((L.nextPointOnContour=B).prevPointOnContour=L,B=void 0):(F=se[Ie+1],(L.nextPointOnContour=F).prevPointOnContour=L);if(!v.inhibitGridFit){if(c.DEBUG){console.log("PROCESSING GLYPH",v.stack);for(var ue=0;ue<ae;ue++)console.log(ue,se[ue].x,se[ue].y)}if(se.push(new Yi(0,0),new Yi(Math.round(b.advanceWidth*S),0)),Ss(v),se.length-=2,c.DEBUG){console.log("FINISHED GLYPH",v.stack);for(var Ue=0;Ue<ae;Ue++)console.log(Ue,se[Ue].x,se[Ue].y)}}},Ss=function(b){var v=b.prog;if(v){var S,W=v.length;for(b.ip=0;b.ip<W;b.ip++){if(c.DEBUG&&b.step++,!(S=VN[v[b.ip]]))throw new Error("unknown instruction: 0x"+Number(v[b.ip]).toString(16));S(b)}}},VN=[xZ.bind(void 0,Fi),xZ.bind(void 0,Si),wZ.bind(void 0,Fi),wZ.bind(void 0,Si),kZ.bind(void 0,Fi),kZ.bind(void 0,Si),AZ.bind(void 0,0),AZ.bind(void 0,1),TZ.bind(void 0,0),TZ.bind(void 0,1),function(b){var v=(S=b.stack).pop(),S=S.pop();c.DEBUG&&console.log(b.step,"SPVFS[]",v,S),b.pv=b.dpv=Na(S,v)},function(b){var v=(S=b.stack).pop(),S=S.pop();c.DEBUG&&console.log(b.step,"SPVFS[]",v,S),b.fv=Na(S,v)},function(b){var v=b.stack,S=b.pv;c.DEBUG&&console.log(b.step,"GPV[]"),v.push(16384*S.x),v.push(16384*S.y)},function(b){var v=b.stack,S=b.fv;c.DEBUG&&console.log(b.step,"GFV[]"),v.push(16384*S.x),v.push(16384*S.y)},function(b){b.fv=b.pv,c.DEBUG&&console.log(b.step,"SFVTPV[]")},function(v){var S=(F=v.stack).pop(),W=F.pop(),L=F.pop(),B=F.pop(),F=F.pop(),ae=v.z0,fe=v.z1,Q=ae[S],ae=ae[W],se=fe[L],fe=fe[B],v=v.z2[F],S=(c.DEBUG&&console.log("ISECT[], ",S,W,L,B,F),Q.x),W=Q.y,L=ae.x,B=ae.y,F=se.x,Q=se.y,ae=fe.x,se=fe.y,fe=(S-L)*(Q-se)-(W-B)*(F-ae),Re=S*B-W*L,Ie=F*se-Q*ae;v.x=(Re*(F-ae)-Ie*(S-L))/fe,v.y=(Re*(Q-se)-Ie*(W-B))/fe},function(b){b.rp0=b.stack.pop(),c.DEBUG&&console.log(b.step,"SRP0[]",b.rp0)},function(b){b.rp1=b.stack.pop(),c.DEBUG&&console.log(b.step,"SRP1[]",b.rp1)},function(b){b.rp2=b.stack.pop(),c.DEBUG&&console.log(b.step,"SRP2[]",b.rp2)},function(b){var v=b.stack.pop();switch(c.DEBUG&&console.log(b.step,"SZP0[]",v),b.zp0=v){case 0:b.tZone||eu(b),b.z0=b.tZone;break;case 1:b.z0=b.gZone;break;default:throw new Error("Invalid zone pointer")}},function(b){var v=b.stack.pop();switch(c.DEBUG&&console.log(b.step,"SZP1[]",v),b.zp1=v){case 0:b.tZone||eu(b),b.z1=b.tZone;break;case 1:b.z1=b.gZone;break;default:throw new Error("Invalid zone pointer")}},function(b){var v=b.stack.pop();switch(c.DEBUG&&console.log(b.step,"SZP2[]",v),b.zp2=v){case 0:b.tZone||eu(b),b.z2=b.tZone;break;case 1:b.z2=b.gZone;break;default:throw new Error("Invalid zone pointer")}},function(b){var v=b.stack.pop();switch(c.DEBUG&&console.log(b.step,"SZPS[]",v),b.zp0=b.zp1=b.zp2=v){case 0:b.tZone||eu(b),b.z0=b.z1=b.z2=b.tZone;break;case 1:b.z0=b.z1=b.z2=b.gZone;break;default:throw new Error("Invalid zone pointer")}},function(b){b.loop=b.stack.pop(),c.DEBUG&&console.log(b.step,"SLOOP[]",b.loop)},function(b){c.DEBUG&&console.log(b.step,"RTG[]"),b.round=CZ},function(b){c.DEBUG&&console.log(b.step,"RTHG[]"),b.round=vN},function(b){var v=b.stack.pop();c.DEBUG&&console.log(b.step,"SMD[]",v),b.minDis=v/64},function(b){c.DEBUG&&console.log(b.step,"ELSE[]"),LZ(b,!1)},function(b){var v=b.stack.pop();c.DEBUG&&console.log(b.step,"JMPR[]",v),b.ip+=v-1},function(b){var v=b.stack.pop();c.DEBUG&&console.log(b.step,"SCVTCI[]",v),b.cvCutIn=v/64},void 0,void 0,function(b){var v=b.stack;c.DEBUG&&console.log(b.step,"DUP[]"),v.push(v[v.length-1])},im,function(b){c.DEBUG&&console.log(b.step,"CLEAR[]"),b.stack.length=0},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"SWAP[]"),v.push(S),v.push(W)},function(b){var v=b.stack;c.DEBUG&&console.log(b.step,"DEPTH[]"),v.push(v.length)},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"CINDEX[]",S),v.push(v[v.length-S])},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"MINDEX[]",S),v.push(v.splice(v.length-S,1)[0])},void 0,void 0,void 0,function(b){var v=(W=b.stack).pop(),S=W.pop(),W=(c.DEBUG&&console.log(b.step,"LOOPCALL[]",v,S),b.ip),L=b.prog;b.prog=b.funcs[v];for(var B=0;B<S;B++)Ss(b),c.DEBUG&&console.log(++b.step,B+1<S?"next loopcall":"done loopcall",B);b.ip=W,b.prog=L},function(b){var v=b.stack.pop(),S=(c.DEBUG&&console.log(b.step,"CALL[]",v),b.ip),W=b.prog;b.prog=b.funcs[v],Ss(b),b.ip=S,b.prog=W,c.DEBUG&&console.log(++b.step,"returning from",v)},function(b){if(b.env!=="fpgm")throw new Error("FDEF not allowed here");var W=b.stack,v=b.prog,S=b.ip,W=W.pop(),L=S;for(c.DEBUG&&console.log(b.step,"FDEF[]",W);v[++S]!==45;);b.ip=S,b.funcs[W]=v.slice(L+1,S)},void 0,BZ.bind(void 0,0),BZ.bind(void 0,1),UZ.bind(void 0,Fi),UZ.bind(void 0,Si),FZ.bind(void 0,0),FZ.bind(void 0,1),YZ.bind(void 0,0),YZ.bind(void 0,1),NZ.bind(void 0,0),NZ.bind(void 0,1),function(b){for(var v=b.stack,S=b.loop,W=b.fv,L=v.pop()/64,B=b.z2;S--;){var F=v.pop(),Q=B[F];c.DEBUG&&console.log(b.step,(1<b.loop?"loop "+(b.loop-S)+": ":"")+"SHPIX[]",F,L),W.setRelative(Q,Q,L),W.touch(Q)}b.loop=1},function(b){for(var v=b.stack,S=b.rp1,W=b.rp2,L=b.loop,B=b.z0[S],F=b.z1[W],Q=b.fv,ae=b.dpv,se=b.z2;L--;){var fe=v.pop(),Re=se[fe];c.DEBUG&&console.log(b.step,(1<b.loop?"loop "+(b.loop-L)+": ":"")+"IP[]",fe,S,"<->",W),Q.interpolate(Re,B,F,ae),Q.touch(Re)}b.loop=1},MZ.bind(void 0,0),MZ.bind(void 0,1),function(b){for(var v=b.stack,S=b.rp0,W=b.z0[S],L=b.loop,B=b.fv,F=b.pv,Q=b.z1;L--;){var ae=v.pop(),se=Q[ae];c.DEBUG&&console.log(b.step,(1<b.loop?"loop "+(b.loop-L)+": ":"")+"ALIGNRP[]",ae),B.setRelative(se,W,0,F),B.touch(se)}b.loop=1},function(b){c.DEBUG&&console.log(b.step,"RTDG[]"),b.round=IN},EZ.bind(void 0,0),EZ.bind(void 0,1),function(b){var v=b.prog,S=b.ip,W=b.stack,L=v[++S];c.DEBUG&&console.log(b.step,"NPUSHB[]",L);for(var B=0;B<L;B++)W.push(v[++S]);b.ip=S},function(b){var v=b.ip,S=b.prog,W=b.stack,L=S[++v];c.DEBUG&&console.log(b.step,"NPUSHW[]",L);for(var B=0;B<L;B++){var F=S[++v]<<8|S[++v];32768&F&&(F=-(1+(65535^F))),W.push(F)}b.ip=v},function(b){var W=b.stack,v=(v=b.store)||(b.store=[]),S=W.pop(),W=W.pop();c.DEBUG&&console.log(b.step,"WS",S,W),v[W]=S},function(L){var v=L.stack,S=L.store,W=v.pop(),L=(c.DEBUG&&console.log(L.step,"RS",W),S&&S[W]||0);v.push(L)},function(b){var v=(S=b.stack).pop(),S=S.pop();c.DEBUG&&console.log(b.step,"WCVTP",v,S),b.cvt[S]=v/64},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"RCVT",S),v.push(64*b.cvt[S])},HZ.bind(void 0,0),HZ.bind(void 0,1),void 0,KZ.bind(void 0,0),KZ.bind(void 0,1),function(b){c.DEBUG&&console.log(b.step,"MPPEM[]"),b.stack.push(b.ppem)},void 0,function(b){c.DEBUG&&console.log(b.step,"FLIPON[]"),b.autoFlip=!0},void 0,void 0,function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"LT[]",S,W),v.push(W<S?1:0)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"LTEQ[]",S,W),v.push(W<=S?1:0)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"GT[]",S,W),v.push(S<W?1:0)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"GTEQ[]",S,W),v.push(S<=W?1:0)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"EQ[]",S,W),v.push(S===W?1:0)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"NEQ[]",S,W),v.push(S!==W?1:0)},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"ODD[]",S),v.push(Math.trunc(S)%2?1:0)},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"EVEN[]",S),v.push(Math.trunc(S)%2?0:1)},function(b){var v=b.stack.pop();c.DEBUG&&console.log(b.step,"IF[]",v),v||(LZ(b,!0),c.DEBUG&&console.log(b.step,"EIF[]"))},function(b){c.DEBUG&&console.log(b.step,"EIF[]")},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"AND[]",S,W),v.push(S&&W?1:0)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"OR[]",S,W),v.push(S||W?1:0)},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"NOT[]",S),v.push(S?0:1)},om.bind(void 0,1),function(b){var v=b.stack.pop();c.DEBUG&&console.log(b.step,"SDB[]",v),b.deltaBase=v},function(b){var v=b.stack.pop();c.DEBUG&&console.log(b.step,"SDS[]",v),b.deltaShift=Math.pow(.5,v)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"ADD[]",S,W),v.push(W+S)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"SUB[]",S,W),v.push(W-S)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"DIV[]",S,W),v.push(64*W/S)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"MUL[]",S,W),v.push(W*S/64)},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"ABS[]",S),v.push(Math.abs(S))},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"NEG[]",S),v.push(-S)},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"FLOOR[]",S),v.push(64*Math.floor(S/64))},function(b){var v=b.stack,S=v.pop();c.DEBUG&&console.log(b.step,"CEILING[]",S),v.push(64*Math.ceil(S/64))},tu.bind(void 0,0),tu.bind(void 0,1),tu.bind(void 0,2),tu.bind(void 0,3),void 0,void 0,void 0,void 0,function(b){var v=(S=b.stack).pop(),S=S.pop();c.DEBUG&&console.log(b.step,"WCVTF[]",v,S),b.cvt[S]=v*b.ppem/b.font.unitsPerEm},om.bind(void 0,2),om.bind(void 0,3),sm.bind(void 0,1),sm.bind(void 0,2),sm.bind(void 0,3),function(b){var v,S=b.stack.pop();switch(c.DEBUG&&console.log(b.step,"SROUND[]",S),b.round=XZ,192&S){case 0:v=.5;break;case 64:v=1;break;case 128:v=2;break;default:throw new Error("invalid SROUND value")}switch(b.srPeriod=v,48&S){case 0:b.srPhase=0;break;case 16:b.srPhase=.25*v;break;case 32:b.srPhase=.5*v;break;case 48:b.srPhase=.75*v;break;default:throw new Error("invalid SROUND value")}b.srThreshold=(S&=15)===0?0:(S/8-.5)*v},function(b){var v,S=b.stack.pop();switch(c.DEBUG&&console.log(b.step,"S45ROUND[]",S),b.round=XZ,192&S){case 0:v=Math.sqrt(2)/2;break;case 64:v=Math.sqrt(2);break;case 128:v=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(b.srPeriod=v,48&S){case 0:b.srPhase=0;break;case 16:b.srPhase=.25*v;break;case 32:b.srPhase=.5*v;break;case 48:b.srPhase=.75*v;break;default:throw new Error("invalid S45ROUND value")}b.srThreshold=(S&=15)===0?0:(S/8-.5)*v},void 0,void 0,function(b){c.DEBUG&&console.log(b.step,"ROFF[]"),b.round=ZN},void 0,function(b){c.DEBUG&&console.log(b.step,"RUTG[]"),b.round=GN},function(b){c.DEBUG&&console.log(b.step,"RDTG[]"),b.round=RN},im,im,void 0,void 0,void 0,void 0,void 0,function(b){var v=b.stack.pop();c.DEBUG&&console.log(b.step,"SCANCTRL[]",v)},JZ.bind(void 0,0),JZ.bind(void 0,1),function(b){var v=b.stack,S=v.pop(),W=0;c.DEBUG&&console.log(b.step,"GETINFO[]",S),1&S&&(W=35),32&S&&(W|=4096),v.push(W)},void 0,function(b){var v=b.stack,S=v.pop(),W=v.pop(),L=v.pop();c.DEBUG&&console.log(b.step,"ROLL[]"),v.push(W),v.push(S),v.push(L)},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"MAX[]",S,W),v.push(Math.max(W,S))},function(b){var v=b.stack,S=v.pop(),W=v.pop();c.DEBUG&&console.log(b.step,"MIN[]",S,W),v.push(Math.min(W,S))},function(b){var v=b.stack.pop();c.DEBUG&&console.log(b.step,"SCANTYPE[]",v)},function(b){var v=b.stack.pop(),S=b.stack.pop();switch(c.DEBUG&&console.log(b.step,"INSTCTRL[]",v,S),v){case 1:return void(b.inhibitGridFit=!!S);case 2:return void(b.ignoreCvt=!!S);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,mo.bind(void 0,1),mo.bind(void 0,2),mo.bind(void 0,3),mo.bind(void 0,4),mo.bind(void 0,5),mo.bind(void 0,6),mo.bind(void 0,7),mo.bind(void 0,8),po.bind(void 0,1),po.bind(void 0,2),po.bind(void 0,3),po.bind(void 0,4),po.bind(void 0,5),po.bind(void 0,6),po.bind(void 0,7),po.bind(void 0,8),nt.bind(void 0,0,0,0,0,0),nt.bind(void 0,0,0,0,0,1),nt.bind(void 0,0,0,0,0,2),nt.bind(void 0,0,0,0,0,3),nt.bind(void 0,0,0,0,1,0),nt.bind(void 0,0,0,0,1,1),nt.bind(void 0,0,0,0,1,2),nt.bind(void 0,0,0,0,1,3),nt.bind(void 0,0,0,1,0,0),nt.bind(void 0,0,0,1,0,1),nt.bind(void 0,0,0,1,0,2),nt.bind(void 0,0,0,1,0,3),nt.bind(void 0,0,0,1,1,0),nt.bind(void 0,0,0,1,1,1),nt.bind(void 0,0,0,1,1,2),nt.bind(void 0,0,0,1,1,3),nt.bind(void 0,0,1,0,0,0),nt.bind(void 0,0,1,0,0,1),nt.bind(void 0,0,1,0,0,2),nt.bind(void 0,0,1,0,0,3),nt.bind(void 0,0,1,0,1,0),nt.bind(void 0,0,1,0,1,1),nt.bind(void 0,0,1,0,1,2),nt.bind(void 0,0,1,0,1,3),nt.bind(void 0,0,1,1,0,0),nt.bind(void 0,0,1,1,0,1),nt.bind(void 0,0,1,1,0,2),nt.bind(void 0,0,1,1,0,3),nt.bind(void 0,0,1,1,1,0),nt.bind(void 0,0,1,1,1,1),nt.bind(void 0,0,1,1,1,2),nt.bind(void 0,0,1,1,1,3),nt.bind(void 0,1,0,0,0,0),nt.bind(void 0,1,0,0,0,1),nt.bind(void 0,1,0,0,0,2),nt.bind(void 0,1,0,0,0,3),nt.bind(void 0,1,0,0,1,0),nt.bind(void 0,1,0,0,1,1),nt.bind(void 0,1,0,0,1,2),nt.bind(void 0,1,0,0,1,3),nt.bind(void 0,1,0,1,0,0),nt.bind(void 0,1,0,1,0,1),nt.bind(void 0,1,0,1,0,2),nt.bind(void 0,1,0,1,0,3),nt.bind(void 0,1,0,1,1,0),nt.bind(void 0,1,0,1,1,1),nt.bind(void 0,1,0,1,1,2),nt.bind(void 0,1,0,1,1,3),nt.bind(void 0,1,1,0,0,0),nt.bind(void 0,1,1,0,0,1),nt.bind(void 0,1,1,0,0,2),nt.bind(void 0,1,1,0,0,3),nt.bind(void 0,1,1,0,1,0),nt.bind(void 0,1,1,0,1,1),nt.bind(void 0,1,1,0,1,2),nt.bind(void 0,1,1,0,1,3),nt.bind(void 0,1,1,1,0,0),nt.bind(void 0,1,1,1,0,1),nt.bind(void 0,1,1,1,0,2),nt.bind(void 0,1,1,1,0,3),nt.bind(void 0,1,1,1,1,0),nt.bind(void 0,1,1,1,1,1),nt.bind(void 0,1,1,1,1,2),nt.bind(void 0,1,1,1,1,3)],CN=Array.from||function(b){return b.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Kt(b){(b=b||{}).empty||(Rs(b.familyName,"When creating a new Font object, familyName is required."),Rs(b.styleName,"When creating a new Font object, styleName is required."),Rs(b.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Rs(b.ascender,"When creating a new Font object, ascender is required."),Rs(b.descender,"When creating a new Font object, descender is required."),Rs(b.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:b.familyName||" "},fontSubfamily:{en:b.styleName||" "},fullName:{en:b.fullName||b.familyName+" "+b.styleName},postScriptName:{en:b.postScriptName||(b.familyName+b.styleName).replace(/\s/g,"")},designer:{en:b.designer||" "},designerURL:{en:b.designerURL||" "},manufacturer:{en:b.manufacturer||" "},manufacturerURL:{en:b.manufacturerURL||" "},license:{en:b.license||" "},licenseURL:{en:b.licenseURL||" "},version:{en:b.version||"Version 0.1"},description:{en:b.description||" "},copyright:{en:b.copyright||" "},trademark:{en:b.trademark||" "}},this.unitsPerEm=b.unitsPerEm||1e3,this.ascender=b.ascender,this.descender=b.descender,this.createdTimestamp=b.createdTimestamp,this.tables={os2:{usWeightClass:b.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:b.widthClass||this.usWidthClasses.MEDIUM,fsSelection:b.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new st.GlyphSet(this,b.glyphs||[]),this.encoding=new Ge(this),this.position=new $c(this),this.substitution=new Ri(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new VZ(this):void 0)}})}function PZ(b,v){var S,W=JSON.stringify(b),L=256;for(S in v){var B=parseInt(S);if(B&&!(B<256)){if(JSON.stringify(v[S])===W)return B;L<=B&&(L=B+1)}}return v[L]=b,L}Kt.prototype.hasChar=function(b){return this.encoding.charToGlyphIndex(b)!==null},Kt.prototype.charToGlyphIndex=function(b){return this.encoding.charToGlyphIndex(b)},Kt.prototype.charToGlyph=function(b){return b=this.charToGlyphIndex(b),this.glyphs.get(b)||this.glyphs.get(0)},Kt.prototype.stringToGlyphs=function(b,v){v=v||this.defaultRenderOptions;for(var S=CN(b),W=[],L=0;L<S.length;L+=1){var B=S[L];W.push(this.charToGlyphIndex(B))}var F=W.length;if(v.features){var b=v.script||this.substitution.getDefaultScriptName(),Q=[];v.features.liga&&(Q=Q.concat(this.substitution.getFeature("liga",b,v.language))),v.features.rlig&&(Q=Q.concat(this.substitution.getFeature("rlig",b,v.language)));for(var ae=0;ae<F;ae+=1)for(var se=0;se<Q.length;se++){for(var fe=Q[se],Re=fe.sub,Ie=Re.length,ue=0;ue<Ie&&Re[ue]===W[ae+ue];)ue++;ue===Ie&&(W.splice(ae,Ie,fe.by),F=F-Ie+1)}}for(var Ue=new Array(F),Xe=this.glyphs.get(0),we=0;we<F;we+=1)Ue[we]=this.glyphs.get(W[we])||Xe;return Ue},Kt.prototype.nameToGlyphIndex=function(b){return this.glyphNames.nameToGlyphIndex(b)},Kt.prototype.nameToGlyph=function(b){return b=this.nameToGlyphIndex(b),this.glyphs.get(b)||this.glyphs.get(0)},Kt.prototype.glyphIndexToName=function(b){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(b):""},Kt.prototype.getKerningValue=function(b,v){b=b.index||b,v=v.index||v;var S=this.position.defaultKerningTables;return S?this.position.getKerningValue(S,b,v):this.kerningPairs[b+","+v]||0},Kt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Kt.prototype.forEachGlyph=function(b,v,S,W,L,B){v=v!==void 0?v:0,S=S!==void 0?S:0,L=L||this.defaultRenderOptions;var F,Q=1/this.unitsPerEm*(W=W!==void 0?W:72),ae=this.stringToGlyphs(b,L);L.kerning&&(b=L.script||this.position.getDefaultScriptName(),F=this.position.getKerningTables(b,L.language));for(var se=0;se<ae.length;se+=1){var fe=ae[se];B.call(this,fe,v,S,W,L),fe.advanceWidth&&(v+=fe.advanceWidth*Q),L.kerning&&se<ae.length-1&&(v+=(F?this.position.getKerningValue(F,fe.index,ae[se+1].index):this.getKerningValue(fe,ae[se+1]))*Q),L.letterSpacing?v+=L.letterSpacing*W:L.tracking&&(v+=L.tracking/1e3*W)}return v},Kt.prototype.getPath=function(b,v,S,W,L){var B=new D;return this.forEachGlyph(b,v,S,W,L,function(F,Q,ae,se){F=F.getPath(Q,ae,se,L,this),B.extend(F)}),B},Kt.prototype.getPaths=function(b,v,S,W,L){var B=[];return this.forEachGlyph(b,v,S,W,L,function(F,Q,ae,se){F=F.getPath(Q,ae,se,L,this),B.push(F)}),B},Kt.prototype.getAdvanceWidth=function(b,v,S){return this.forEachGlyph(b,0,0,v,S,function(){})},Kt.prototype.draw=function(b,v,S,W,L,B){this.getPath(v,S,W,L,B).draw(b)},Kt.prototype.drawPoints=function(b,v,S,W,L,B){this.forEachGlyph(v,S,W,L,B,function(F,Q,ae,se){F.drawPoints(b,Q,ae,se)})},Kt.prototype.drawMetrics=function(b,v,S,W,L,B){this.forEachGlyph(v,S,W,L,B,function(F,Q,ae,se){F.drawMetrics(b,Q,ae,se)})},Kt.prototype.getEnglishName=function(b){if(b=this.names[b],b)return b.en},Kt.prototype.validate=function(){var b=this;function v(S){S=b.getEnglishName(S),S&&S.trim().length}v("fontFamily"),v("weightName"),v("manufacturer"),v("copyright"),v("version"),this.unitsPerEm},Kt.prototype.toTables=function(){return gN.fontToTable(this)},Kt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Kt.prototype.toArrayBuffer=function(){for(var b=this.toTables().encode(),v=new ArrayBuffer(b.length),S=new Uint8Array(v),W=0;W<b.length;W++)S[W]=b[W];return v},Kt.prototype.download=function(b){var v=this.getEnglishName("fontFamily"),S=this.getEnglishName("fontSubfamily"),W=(b=b||v.replace(/\s/g,"")+"-"+S+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,W.byteLength,function(L){L.root.getFile(b,{create:!0},function(B){B.createWriter(function(F){var Q=new DataView(W),Q=new Blob([Q],{type:"font/opentype"});F.write(Q),F.addEventListener("writeend",function(){location.href=B.toURL()},!1)})})},function(L){throw new Error(L.name+": "+L.message)})):(v=r("fs"),S=function(L){for(var B=new o(L.byteLength),F=new Uint8Array(L),Q=0;Q<B.length;++Q)B[Q]=F[Q];return B}(W),v.writeFileSync(b,S))},Kt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Kt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Kt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var XN={make:function(b,v){var S=new We.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:b.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:b.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*b.axes.length}]);S.offsetToData=S.sizeOf();for(var W,L,B,F=0;F<b.axes.length;F++)S.fields=S.fields.concat((W=F,L=b.axes[F],B=v,B=PZ(L.name,v),[{name:"tag_"+W,type:"TAG",value:L.tag},{name:"minValue_"+W,type:"FIXED",value:L.minValue<<16},{name:"defaultValue_"+W,type:"FIXED",value:L.defaultValue<<16},{name:"maxValue_"+W,type:"FIXED",value:L.maxValue<<16},{name:"flags_"+W,type:"USHORT",value:0},{name:"nameID_"+W,type:"USHORT",value:B}]));for(var Q=0;Q<b.instances.length;Q++)S.fields=S.fields.concat(function(ae,se,fe,Re){for(var Ie=[{name:"nameID_"+ae,type:"USHORT",value:PZ(se.name,Re)},{name:"flags_"+ae,type:"USHORT",value:0}],ue=0;ue<fe.length;++ue){var Ue=fe[ue].tag;Ie.push({name:"axis_"+ae+" "+Ue,type:"FIXED",value:se.coordinates[Ue]<<16})}return Ie}(Q,b.instances[Q],b.axes,v));return S},parse:function(b,v,S){for(var W,L,B,F,Q=new ve.Parser(b,v),ae=Q.parseULong(),se=(T.argument(ae===65536,"Unsupported fvar table version."),Q.parseOffset16()),fe=(Q.skip("uShort",1),Q.parseUShort()),Re=Q.parseUShort(),Ie=Q.parseUShort(),ue=Q.parseUShort(),Ue=[],Xe=0;Xe<fe;Xe++)Ue.push((W=b,L=v+se+Xe*Re,B=S,F={},W=new ve.Parser(W,L),F.tag=W.parseTag(),F.minValue=W.parseFixed(),F.defaultValue=W.parseFixed(),F.maxValue=W.parseFixed(),W.skip("uShort",1),F.name=B[W.parseUShort()]||{},F));for(var we=[],Ve=v+se+fe*Re,Ce=0;Ce<Ie;Ce++)we.push(function(at,vt,dt,ht){var St={},zt=new ve.Parser(at,vt);St.name=ht[zt.parseUShort()]||{},zt.skip("uShort",1),St.coordinates={};for(var pr=0;pr<dt.length;++pr)St.coordinates[dt[pr].tag]=zt.parseFixed();return St}(b,Ve+Ce*ue,Ue,S));return{axes:Ue,instances:we}}},ri=new Array(10);ri[1]=function(){var b=this.offset+this.relativeOffset,v=this.parseUShort();return v===1?{posFormat:1,coverage:this.parsePointer(Ze.coverage),value:this.parseValueRecord()}:v===2?{posFormat:2,coverage:this.parsePointer(Ze.coverage),values:this.parseValueRecordList()}:void T.assert(!1,"0x"+b.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ri[2]=function(){var b,v,S,W,B=this.offset+this.relativeOffset,L=this.parseUShort(),B=(T.assert(L===1||L===2,"0x"+B.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Ze.coverage)),F=this.parseUShort(),Q=this.parseUShort();return L===1?{posFormat:L,coverage:B,valueFormat1:F,valueFormat2:Q,pairSets:this.parseList(Ze.pointer(Ze.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(F),value2:this.parseValueRecord(Q)}})))}:L===2?(b=this.parsePointer(Ze.classDef),v=this.parsePointer(Ze.classDef),S=this.parseUShort(),W=this.parseUShort(),{posFormat:L,coverage:B,valueFormat1:F,valueFormat2:Q,classDef1:b,classDef2:v,class1Count:S,class2Count:W,classRecords:this.parseList(S,Ze.list(W,function(){return{value1:this.parseValueRecord(F),value2:this.parseValueRecord(Q)}}))}):void 0},ri[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ri[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ri[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ri[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ri[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ri[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ri[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var LN=new Array(10),xN={parse:function(b,v){return v=(b=new Ze(b,v=v||0)).parseVersion(1),T.argument(v===1||v===1.1,"Unsupported GPOS table version "+v),v===1?{version:v,scripts:b.parseScriptList(),features:b.parseFeatureList(),lookups:b.parseLookupList(ri)}:{version:v,scripts:b.parseScriptList(),features:b.parseFeatureList(),lookups:b.parseLookupList(ri),variations:b.parseFeatureVariationsList()}},make:function(b){return new We.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new We.ScriptList(b.scripts)},{name:"features",type:"TABLE",value:new We.FeatureList(b.features)},{name:"lookups",type:"TABLE",value:new We.LookupList(b.lookups,LN)}])}},wN={parse:function(b,v){if(b=new ve.Parser(b,v),(v=b.parseUShort())===0){var S=b,W={},Re=(S.skip("uShort"),S.parseUShort()),L=(T.argument(Re===0,"Unsupported kern sub-table version."),S.skip("uShort",2),S.parseUShort());S.skip("uShort",3);for(var B=0;B<L;B+=1){var F=S.parseUShort(),Q=S.parseUShort(),ae=S.parseShort();W[F+","+Q]=ae}return W}if(v!==1)throw new Error("Unsupported kern table version ("+v+").");var se=b,fe={},Re=(se.skip("uShort"),1<se.parseULong()&&console.warn("Only the first kern subtable is supported."),se.skip("uLong"),255&se.parseUShort());if(se.skip("uShort"),Re==0){var Ie=se.parseUShort();se.skip("uShort",3);for(var ue=0;ue<Ie;ue+=1){var Ue=se.parseUShort(),Xe=se.parseUShort(),we=se.parseShort();fe[Ue+","+Xe]=we}}return fe}},kN={parse:function(b,v,S,W){for(var L=new ve.Parser(b,v),B=W?L.parseUShort:L.parseULong,F=[],Q=0;Q<S+1;Q+=1){var ae=B.call(L);W&&(ae*=2),F.push(ae)}return F}};function AN(b,v){r("fs").readFile(b,function(S,W){if(S)return v(S.message);v(null,GZ(W))})}function TN(b,v){var S=new XMLHttpRequest;S.open("get",b,!0),S.responseType="arraybuffer",S.onload=function(){return S.response?v(null,S.response):v("Font could not be loaded: "+S.statusText)},S.onerror=function(){v("Font could not be loaded")},S.send()}function OZ(b,v){for(var S=[],W=12,L=0;L<v;L+=1){var B=ve.getTag(b,W),F=ve.getULong(b,W+4),Q=ve.getULong(b,W+8),ae=ve.getULong(b,W+12);S.push({tag:B,checksum:F,offset:Q,length:ae,compression:!1}),W+=16}return S}function Gr(S,v){if(v.compression!=="WOFF")return{data:S,offset:v.offset};var S=new Uint8Array(S.buffer,v.offset+2,v.compressedLength-2),W=new Uint8Array(v.length);if(J(S,W),W.byteLength!==v.length)throw new Error("Decompression error: "+v.tag+" decompressed length doesn't match recorded length");return{data:new DataView(W.buffer,0),offset:0}}function am(Ce){var v,S,W,L,B,F,Q,ae,se,fe,Re,Ie,ue,Ue,Xe=new Kt({empty:!0}),we=new DataView(Ce,0),Ve=[],Ce=ve.getTag(we,0);if(Ce===String.fromCharCode(0,1,0,0)||Ce==="true"||Ce==="typ1")Xe.outlinesFormat="truetype",Ve=OZ(we,W=ve.getUShort(we,4));else if(Ce==="OTTO")Xe.outlinesFormat="cff",Ve=OZ(we,W=ve.getUShort(we,4));else{if(Ce!=="wOFF")throw new Error("Unsupported OpenType signature "+Ce);var at=ve.getTag(we,4);if(at===String.fromCharCode(0,1,0,0))Xe.outlinesFormat="truetype";else{if(at!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ce);Xe.outlinesFormat="cff"}Ve=function(er,Nt){for(var sn=[],cr=44,zr=0;zr<Nt;zr+=1){var tr=ve.getTag(er,cr),Fr=ve.getULong(er,cr+4),Ea=ve.getULong(er,cr+8),Ws=ve.getULong(er,cr+12),zZ=void 0,zZ=Ea<Ws&&"WOFF";sn.push({tag:tr,offset:Fr,compression:zZ,compressedLength:Ea,length:Ws}),cr+=20}return sn}(we,W=ve.getUShort(we,12))}for(var vt=0;vt<W;vt+=1){var dt=Ve[vt],ht=void 0;switch(dt.tag){case"cmap":ht=Gr(we,dt),Xe.tables.cmap=_.parse(ht.data,ht.offset),Xe.encoding=new Le(Xe.tables.cmap);break;case"cvt ":ht=Gr(we,dt),Ue=new ve.Parser(ht.data,ht.offset),Xe.tables.cvt=Ue.parseShortList(dt.length/2);break;case"fvar":B=dt;break;case"fpgm":ht=Gr(we,dt),Ue=new ve.Parser(ht.data,ht.offset),Xe.tables.fpgm=Ue.parseByteList(dt.length);break;case"head":ht=Gr(we,dt),Xe.tables.head=Fa.parse(ht.data,ht.offset),Xe.unitsPerEm=Xe.tables.head.unitsPerEm,v=Xe.tables.head.indexToLocFormat;break;case"hhea":ht=Gr(we,dt),Xe.tables.hhea=de.parse(ht.data,ht.offset),Xe.ascender=Xe.tables.hhea.ascender,Xe.descender=Xe.tables.hhea.descender,Xe.numberOfHMetrics=Xe.tables.hhea.numberOfHMetrics;break;case"hmtx":se=dt;break;case"ltag":ht=Gr(we,dt),S=Qe.parse(ht.data,ht.offset);break;case"maxp":ht=Gr(we,dt),Xe.tables.maxp=Ne.parse(ht.data,ht.offset),Xe.numGlyphs=Xe.tables.maxp.numGlyphs;break;case"name":Ie=dt;break;case"OS/2":ht=Gr(we,dt),Xe.tables.os2=Ur.parse(ht.data,ht.offset);break;case"post":ht=Gr(we,dt),Xe.tables.post=hZ.parse(ht.data,ht.offset),Xe.glyphNames=new He(Xe.tables.post);break;case"prep":ht=Gr(we,dt),Ue=new ve.Parser(ht.data,ht.offset),Xe.tables.prep=Ue.parseByteList(dt.length);break;case"glyf":F=dt;break;case"loca":Re=dt;break;case"CFF ":L=dt;break;case"kern":fe=dt;break;case"GPOS":Q=dt;break;case"GSUB":ae=dt;break;case"meta":ue=dt}}if(at=Gr(we,Ie),Xe.tables.name=Ln.parse(at.data,at.offset,S),Xe.names=Xe.tables.name,F&&Re)Ce=v===0,at=Gr(we,Re),at=kN.parse(at.data,at.offset,Xe.numGlyphs,Ce),Ce=Gr(we,F),Xe.glyphs=WZ.parse(Ce.data,Ce.offset,at,Xe);else{if(!L)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ce=Gr(we,L),Ua.parse(Ce.data,Ce.offset,Xe)}for(var at=Gr(we,se),St=(Ee.parse(at.data,at.offset,Xe.numberOfHMetrics,Xe.numGlyphs,Xe.glyphs),Xe),zt=St.tables.cmap.glyphIndexMap,pr=Object.keys(zt),Rr=0;Rr<pr.length;Rr+=1){var nn,on=pr[Rr],ni=zt[on];(nn=St.glyphs.get(ni)).addUnicode(parseInt(on))}for(var Jt=0;Jt<St.glyphs.length;Jt+=1)nn=St.glyphs.get(Jt),St.cffEncoding?St.isCIDFont?nn.name="gid"+Jt:nn.name=St.cffEncoding.charset[Jt]:St.glyphNames.names&&(nn.name=St.glyphNames.glyphIndexToName(Jt));return fe?(Ce=Gr(we,fe),Xe.kerningPairs=wN.parse(Ce.data,Ce.offset)):Xe.kerningPairs={},Q&&(at=Gr(we,Q),Xe.tables.gpos=xN.parse(at.data,at.offset),Xe.position.init()),ae&&(Ce=Gr(we,ae),Xe.tables.gsub=mZ.parse(Ce.data,Ce.offset)),B&&(at=Gr(we,B),Xe.tables.fvar=XN.parse(at.data,at.offset,Xe.names)),ue&&(Ce=Gr(we,ue),Xe.tables.meta=pZ.parse(Ce.data,Ce.offset),Xe.metas=Xe.tables.meta),Xe}c.Font=Kt,c.Glyph=De,c.Path=D,c.BoundingBox=O,c._parse=ve,c.parse=am,c.load=function(b,v){(typeof window>"u"?AN:TN)(b,function(S,W){if(S)return v(S);var L;try{L=am(W)}catch(B){return v(B,null)}return v(null,L)})},c.loadSync=function(b){return am(GZ(r("fs").readFileSync(b)))},Object.defineProperty(c,"__esModule",{value:!0})},l(typeof s=="object"&&i!==void 0?s:a.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],242:[function(r,i,s){(function(o){function a(m,p){for(var u=0,d=m.length-1;0<=d;d--){var h=m[d];h==="."?m.splice(d,1):h===".."?(m.splice(d,1),u++):u&&(m.splice(d,1),u--)}if(p)for(;u--;)m.unshift("..");return m}function l(m,p){if(m.filter)return m.filter(p);for(var u=[],d=0;d<m.length;d++)p(m[d],d,m)&&u.push(m[d]);return u}s.resolve=function(){for(var m="",p=!1,u=arguments.length-1;-1<=u&&!p;u--){var d=0<=u?arguments[u]:o.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");d&&(m=d+"/"+m,p=d.charAt(0)==="/")}return(p?"/":"")+(m=a(l(m.split("/"),function(h){return!!h}),!p).join("/"))||"."},s.normalize=function(m){var p=s.isAbsolute(m),u=c(m,-1)==="/";return(m=(m=a(l(m.split("/"),function(d){return!!d}),!p).join("/"))||p?m:".")&&u&&(m+="/"),(p?"/":"")+m},s.isAbsolute=function(m){return m.charAt(0)==="/"},s.join=function(){var m=Array.prototype.slice.call(arguments,0);return s.normalize(l(m,function(p,u){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},s.relative=function(m,p){function u(I){for(var G=0;G<I.length&&I[G]==="";G++);for(var R=I.length-1;0<=R&&I[R]==="";R--);return R<G?[]:I.slice(G,R-G+1)}m=s.resolve(m).substr(1),p=s.resolve(p).substr(1);for(var d=u(m.split("/")),h=u(p.split("/")),f=Math.min(d.length,h.length),g=f,y=0;y<f;y++)if(d[y]!==h[y]){g=y;break}for(var Z=[],y=g;y<d.length;y++)Z.push("..");return(Z=Z.concat(h.slice(g))).join("/")},s.sep="/",s.delimiter=":",s.dirname=function(m){if(typeof m!="string"&&(m+=""),m.length===0)return".";for(var p=m.charCodeAt(0)===47,u=-1,d=!0,h=m.length-1;1<=h;--h)if(m.charCodeAt(h)===47){if(!d){u=h;break}}else d=!1;return u===-1?p?"/":".":p&&u===1?"/":m.slice(0,u)},s.basename=function(m,p){return m=function(u){typeof u!="string"&&(u+="");for(var d=0,h=-1,f=!0,g=u.length-1;0<=g;--g)if(u.charCodeAt(g)===47){if(!f){d=g+1;break}}else h===-1&&(f=!1,h=g+1);return h===-1?"":u.slice(d,h)}(m),m=p&&m.substr(-1*p.length)===p?m.substr(0,m.length-p.length):m},s.extname=function(m){typeof m!="string"&&(m+="");for(var p=-1,u=0,d=-1,h=!0,f=0,g=m.length-1;0<=g;--g){var y=m.charCodeAt(g);if(y===47){if(h)continue;u=g+1;break}d===-1&&(h=!1,d=g+1),y===46?p===-1?p=g:f!==1&&(f=1):p!==-1&&(f=-1)}return p===-1||d===-1||f===0||f===1&&p===d-1&&p===u+1?"":m.slice(p,d)};var c="ab".substr(-1)==="b"?function(m,p,u){return m.substr(p,u)}:function(m,p,u){return p<0&&(p=m.length+p),m.substr(p,u)}}).call(this,r("_process"))},{_process:243}],243:[function(r,l,s){var o,a,l=l.exports={};function c(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}try{o=typeof setTimeout=="function"?setTimeout:c}catch{o=c}try{a=typeof clearTimeout=="function"?clearTimeout:m}catch{a=m}function p(G){if(o===setTimeout)return setTimeout(G,0);if((o===c||!o)&&setTimeout)return(o=setTimeout)(G,0);try{return o(G,0)}catch{try{return o.call(null,G,0)}catch{return o.call(this,G,0)}}}var u,d=[],h=!1,f=-1;function g(){h&&u&&(h=!1,u.length?d=u.concat(d):f=-1,d.length&&y())}function y(){if(!h){for(var G=p(g),R=(h=!0,d.length);R;){for(u=d,d=[];++f<R;)u&&u[f].run();f=-1,R=d.length}u=null,h=!1,function(C){if(a===clearTimeout)return clearTimeout(C);if((a===m||!a)&&clearTimeout)return(a=clearTimeout)(C);try{a(C)}catch{try{return a.call(null,C)}catch{return a.call(this,C)}}}(G)}}function Z(G,R){this.fun=G,this.array=R}function I(){}l.nextTick=function(G){var R=new Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)R[C-1]=arguments[C];d.push(new Z(G,R)),d.length!==1||h||p(y)},Z.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=I,l.addListener=I,l.once=I,l.off=I,l.removeListener=I,l.removeAllListeners=I,l.emit=I,l.prependListener=I,l.prependOnceListener=I,l.listeners=function(G){return[]},l.binding=function(G){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(G){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],244:[function(r,i,s){i=function(o){var a,l=Object.prototype,c=l.hasOwnProperty,V=typeof Symbol=="function"?Symbol:{},m=V.iterator||"@@iterator",p=V.asyncIterator||"@@asyncIterator",u=V.toStringTag||"@@toStringTag";function d(P,N,E,z){var D,le,X,T,N=N&&N.prototype instanceof G?N:G,N=Object.create(N.prototype),z=new M(z||[]);return N._invoke=(D=P,le=E,X=z,T=f,function(te,ne){if(T===y)throw new Error("Generator is already running");if(T===Z){if(te==="throw")throw ne;return K()}for(X.method=te,X.arg=ne;;){var ee=X.delegate;if(ee&&(ee=function oe(ie,ce){var he=ie.iterator[ce.method];if(he===a){if(ce.delegate=null,ce.method==="throw"){if(ie.iterator.return&&(ce.method="return",ce.arg=a,oe(ie,ce),ce.method==="throw"))return I;ce.method="throw",ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}if(he=h(he,ie.iterator,ce.arg),he.type==="throw")return ce.method="throw",ce.arg=he.arg,ce.delegate=null,I;if(he=he.arg,!he)return ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,I;{if(!he.done)return he;ce[ie.resultName]=he.value,ce.next=ie.nextLoc,ce.method!=="return"&&(ce.method="next",ce.arg=a)}return ce.delegate=null,I}(ee,X),ee)){if(ee===I)continue;return ee}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(T===f)throw T=Z,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);if(T=y,ee=h(D,le,X),ee.type==="normal"){if(T=X.done?Z:g,ee.arg!==I)return{value:ee.arg,done:X.done}}else ee.type==="throw"&&(T=Z,X.method="throw",X.arg=ee.arg)}}),N}function h(P,J,E){try{return{type:"normal",arg:P.call(J,E)}}catch(O){return{type:"throw",arg:O}}}o.wrap=d;var f="suspendedStart",g="suspendedYield",y="executing",Z="completed",I={};function G(){}function R(){}function C(){}var V={},x=(V[m]=function(){return this},Object.getPrototypeOf),x=x&&x(x(j([]))),w=(x&&x!==l&&c.call(x,m)&&(V=x),C.prototype=G.prototype=Object.create(V));function k(P){["next","throw","return"].forEach(function(J){P[J]=function(E){return this._invoke(J,E)}})}function A(P){var J;this._invoke=function(E,O){function D(){return new Promise(function(le,X){(function T(oe,z,te,ne){var ee,oe=h(P[oe],P,z);if(oe.type!=="throw")return(z=(ee=oe.arg).value)&&typeof z=="object"&&c.call(z,"__await")?Promise.resolve(z.__await).then(function(ie){T("next",ie,te,ne)},function(ie){T("throw",ie,te,ne)}):Promise.resolve(z).then(function(ie){ee.value=ie,te(ee)},function(ie){return T("throw",ie,te,ne)});ne(oe.arg)})(E,O,le,X)})}return J=J?J.then(D,D):D()}}function Y(P){var J={tryLoc:P[0]};1 in P&&(J.catchLoc=P[1]),2 in P&&(J.finallyLoc=P[2],J.afterLoc=P[3]),this.tryEntries.push(J)}function U(P){var J=P.completion||{};J.type="normal",delete J.arg,P.completion=J}function M(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(Y,this),this.reset(!0)}function j(P){if(P){var J,E=P[m];if(E)return E.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length))return J=-1,(E=function O(){for(;++J<P.length;)if(c.call(P,J))return O.value=P[J],O.done=!1,O;return O.value=a,O.done=!0,O}).next=E}return{next:K}}function K(){return{value:a,done:!0}}return(R.prototype=w.constructor=C).constructor=R,C[u]=R.displayName="GeneratorFunction",o.isGeneratorFunction=function(P){return P=typeof P=="function"&&P.constructor,!!P&&(P===R||(P.displayName||P.name)==="GeneratorFunction")},o.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,C):(P.__proto__=C,u in P||(P[u]="GeneratorFunction")),P.prototype=Object.create(w),P},o.awrap=function(P){return{__await:P}},k(A.prototype),A.prototype[p]=function(){return this},o.AsyncIterator=A,o.async=function(P,J,E,O){var D=new A(d(P,J,E,O));return o.isGeneratorFunction(J)?D:D.next().then(function(le){return le.done?le.value:D.next()})},k(w),w[u]="Generator",w[m]=function(){return this},w.toString=function(){return"[object Generator]"},o.keys=function(P){var J,E=[];for(J in P)E.push(J);return E.reverse(),function O(){for(;E.length;){var D=E.pop();if(D in P)return O.value=D,O.done=!1,O}return O.done=!0,O}},o.values=j,M.prototype={constructor:M,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(U),!P)for(var J in this)J.charAt(0)==="t"&&c.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=a)},stop:function(){this.done=!0;var P=this.tryEntries[0].completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var J=this;function E(N,z){return le.type="throw",le.arg=P,J.next=N,z&&(J.method="next",J.arg=a),!!z}for(var O=this.tryEntries.length-1;0<=O;--O){var D=this.tryEntries[O],le=D.completion;if(D.tryLoc==="root")return E("end");if(D.tryLoc<=this.prev){var X=c.call(D,"catchLoc"),T=c.call(D,"finallyLoc");if(X&&T){if(this.prev<D.catchLoc)return E(D.catchLoc,!0);if(this.prev<D.finallyLoc)return E(D.finallyLoc)}else if(X){if(this.prev<D.catchLoc)return E(D.catchLoc,!0)}else{if(!T)throw new Error("try statement without catch or finally");if(this.prev<D.finallyLoc)return E(D.finallyLoc)}}}},abrupt:function(P,J){for(var E=this.tryEntries.length-1;0<=E;--E){var O=this.tryEntries[E];if(O.tryLoc<=this.prev&&c.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var D=O;break}}var le=(D=D&&(P==="break"||P==="continue")&&D.tryLoc<=J&&J<=D.finallyLoc?null:D)?D.completion:{};return le.type=P,le.arg=J,D?(this.method="next",this.next=D.finallyLoc,I):this.complete(le)},complete:function(P,J){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&J&&(this.next=J),I},finish:function(P){for(var J=this.tryEntries.length-1;0<=J;--J){var E=this.tryEntries[J];if(E.finallyLoc===P)return this.complete(E.completion,E.afterLoc),U(E),I}},catch:function(P){for(var J=this.tryEntries.length-1;0<=J;--J){var E,O,D=this.tryEntries[J];if(D.tryLoc===P)return(E=D.completion).type==="throw"&&(O=E.arg,U(D)),O}throw new Error("illegal catch attempt")},delegateYield:function(P,J,E){return this.delegate={iterator:j(P),resultName:J,nextLoc:E},this.method==="next"&&(this.arg=a),I}},o}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=i}catch{Function("r","regeneratorRuntime = r")(i)}},{}],245:[function(r,i,s){(function(o){var a,l,c,m,p,u,d,h,f,g;function y(U){if(typeof U!="string"&&(U=String(U)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(U))throw new TypeError("Invalid character in header field name");return U.toLowerCase()}function Z(U){return U=typeof U!="string"?String(U):U}function I(U){var M={next:function(){var j=U.shift();return{done:j===void 0,value:j}}};return l&&(M[Symbol.iterator]=function(){return M}),M}function G(U){this.map={},U instanceof G?U.forEach(function(M,j){this.append(j,M)},this):Array.isArray(U)?U.forEach(function(M){this.append(M[0],M[1])},this):U&&Object.getOwnPropertyNames(U).forEach(function(M){this.append(M,U[M])},this)}function R(U){if(U.bodyUsed)return Promise.reject(new TypeError("Already read"));U.bodyUsed=!0}function C(U){return new Promise(function(M,j){U.onload=function(){M(U.result)},U.onerror=function(){j(U.error)}})}function V(U){var M=new FileReader,j=C(M);return M.readAsArrayBuffer(U),j}function x(U){var M;return U.slice?U.slice(0):((M=new Uint8Array(U.byteLength)).set(new Uint8Array(U)),M.buffer)}function w(){return this.bodyUsed=!1,this._initBody=function(U){if(this._bodyInit=U)if(typeof U=="string")this._bodyText=U;else if(c&&Blob.prototype.isPrototypeOf(U))this._bodyBlob=U;else if(m&&FormData.prototype.isPrototypeOf(U))this._bodyFormData=U;else if(a&&URLSearchParams.prototype.isPrototypeOf(U))this._bodyText=U.toString();else if(p&&c&&d(U))this._bodyArrayBuffer=x(U.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(U)&&!h(U))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=x(U)}else this._bodyText="";this.headers.get("content-type")||(typeof U=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a&&URLSearchParams.prototype.isPrototypeOf(U)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var U=R(this);if(U)return U;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?R(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(V)}),this.text=function(){var U,M,j=R(this);if(j)return j;if(this._bodyBlob)return j=this._bodyBlob,U=new FileReader,M=C(U),U.readAsText(j),M;if(this._bodyArrayBuffer)return Promise.resolve(function(K){for(var P=new Uint8Array(K),J=new Array(P.length),E=0;E<P.length;E++)J[E]=String.fromCharCode(P[E]);return J.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}function k(U,M){var j,K=(M=M||{}).body;if(U instanceof k){if(U.bodyUsed)throw new TypeError("Already read");this.url=U.url,this.credentials=U.credentials,M.headers||(this.headers=new G(U.headers)),this.method=U.method,this.mode=U.mode,K||U._bodyInit==null||(K=U._bodyInit,U.bodyUsed=!0)}else this.url=String(U);if(this.credentials=M.credentials||this.credentials||"omit",!M.headers&&this.headers||(this.headers=new G(M.headers)),this.method=(U=M.method||this.method||"GET",j=U.toUpperCase(),-1<f.indexOf(j)?j:U),this.mode=M.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&K)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(K)}function A(U){var M=new FormData;return U.trim().split("&").forEach(function(j){var K;j&&(K=(j=j.split("=")).shift().replace(/\+/g," "),j=j.join("=").replace(/\+/g," "),M.append(decodeURIComponent(K),decodeURIComponent(j)))}),M}function Y(U,M){M=M||{},this.type="default",this.status=M.status===void 0?200:M.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in M?M.statusText:"OK",this.headers=new G(M.headers),this.url=M.url||"",this._initBody(U)}o.fetch||(a="URLSearchParams"in o,l="Symbol"in o&&"iterator"in Symbol,c="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),m="FormData"in o,(p="ArrayBuffer"in o)&&(u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=function(U){return U&&DataView.prototype.isPrototypeOf(U)},h=ArrayBuffer.isView||function(U){return U&&-1<u.indexOf(Object.prototype.toString.call(U))}),G.prototype.append=function(U,M){U=y(U),M=Z(M);var j=this.map[U];this.map[U]=j?j+","+M:M},G.prototype.delete=function(U){delete this.map[y(U)]},G.prototype.get=function(U){return U=y(U),this.has(U)?this.map[U]:null},G.prototype.has=function(U){return this.map.hasOwnProperty(y(U))},G.prototype.set=function(U,M){this.map[y(U)]=Z(M)},G.prototype.forEach=function(U,M){for(var j in this.map)this.map.hasOwnProperty(j)&&U.call(M,this.map[j],j,this)},G.prototype.keys=function(){var U=[];return this.forEach(function(M,j){U.push(j)}),I(U)},G.prototype.values=function(){var U=[];return this.forEach(function(M){U.push(M)}),I(U)},G.prototype.entries=function(){var U=[];return this.forEach(function(M,j){U.push([j,M])}),I(U)},l&&(G.prototype[Symbol.iterator]=G.prototype.entries),f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},w.call(k.prototype),w.call(Y.prototype),Y.prototype.clone=function(){return new Y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new G(this.headers),url:this.url})},Y.error=function(){var U=new Y(null,{status:0,statusText:""});return U.type="error",U},g=[301,302,303,307,308],Y.redirect=function(U,M){if(g.indexOf(M)===-1)throw new RangeError("Invalid status code");return new Y(null,{status:M,headers:{location:U}})},o.Headers=G,o.Request=k,o.Response=Y,o.fetch=function(U,M){return new Promise(function(j,K){var P=new k(U,M),J=new XMLHttpRequest;J.onload=function(){var E,O={status:J.status,statusText:J.statusText,headers:(O=J.getAllResponseHeaders()||"",E=new G,O.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(X){var X=X.split(":"),T=X.shift().trim();T&&(X=X.join(":").trim(),E.append(T,X))}),E)},D=(O.url="responseURL"in J?J.responseURL:O.headers.get("X-Request-URL"),"response"in J?J.response:J.responseText);j(new Y(D,O))},J.onerror=function(){K(new TypeError("Network request failed"))},J.ontimeout=function(){K(new TypeError("Network request failed"))},J.open(P.method,P.url,!0),P.credentials==="include"?J.withCredentials=!0:P.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&c&&(J.responseType="blob"),P.headers.forEach(function(E,O){J.setRequestHeader(O,E)}),J.send(P._bodyInit===void 0?null:P._bodyInit)})},o.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],246:[function(r,i,s){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,a=c(r("../core/main")),l=c(r("../color/color_conversion"));function c(u){return u&&u.__esModule?u:{default:u}}var m=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];a.default.prototype._rgbColorName=function(f){var d,h,f=l.default._rgbaToHSBA(f),g=[(o=f)[0],f[1],f[2]];g[0]!==0&&(g[0]=Math.round(100*g[0]),(f=g[0].toString().split(""))[h=f.length-1]=parseInt(f[h]),f[h]<2.5?f[h]=0:2.5<=f[h]&&f[h]<7.5&&(f[h]=5),f.length===2?(f[0]=parseInt(f[0]),7.5<=f[h]&&(f[h]=0,f[0]=f[0]+1),g[0]=10*f[0]+f[1]):7.5<=f[h]?g[0]=10:g[0]=f[h]),g[2]=g[2]/255;for(var y=g.length-1;1<=y;y--)g[y]<=.25?g[y]=0:.25<g[y]&&g[y]<.75?g[y]=.5:g[y]=1;if(g[0]===0&&g[1]===0&&g[2]===1){for(var Z=2;0<=Z;Z--)o[Z]=Math.round(1e4*o[Z])/1e4;for(var I=0;I<m.length;I++){if(m[I].h===o[0]&&m[I].s===o[1]&&m[I].b===o[2]){d=m[I].name;break}d="white"}}else for(var G=0;G<p.length;G++)if(p[G].h===g[0]&&p[G].s===g[1]&&p[G].b===g[2]){d=p[G].name;break}return d},r=a.default,s.default=r},{"../color/color_conversion":252,"../core/main":267,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],247:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r},a="_Description",l="_fallbackDesc",c="_fallbackTable",m="_Label",p="_labelDesc",u="_labelTable";function d(h){if(h==="label"||h==="fallback")throw new Error("description should not be LABEL or FALLBACK");return h.endsWith(".")||h.endsWith(";")||h.endsWith(",")||h.endsWith("?")||h.endsWith("!")||(h+="."),h}o.default.prototype.describe=function(h,f){var g;o.default._validateParameters("describe",arguments),typeof h=="string"&&(g=this.canvas.id,h=d(h),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==h&&(this.descriptions.fallback.innerHTML=h):this._describeHTML("fallback",h),f===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==h&&(this.descriptions.label.innerHTML=h):this._describeHTML("label",h)))},o.default.prototype.describeElement=function(h,f,g){var y,Z;o.default._validateParameters("describeElement",arguments),typeof f=="string"&&typeof h=="string"&&(y=this.canvas.id,f=d(f),Z=function(I){if(I==="label"||I==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return I.endsWith(".")||I.endsWith(";")||I.endsWith(",")?I=I.replace(/.$/,":"):I.endsWith(":")||(I+=":"),I}(h),h=h.replace(/[^a-zA-Z0-9]/g,""),Z='<th scope="row">'.concat(Z,"</th><td>").concat(f,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(y).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[h]?this.descriptions.fallbackElements[h].innerHTML!==Z&&(this.descriptions.fallbackElements[h].innerHTML=Z):this._describeElementHTML("fallback",h,Z),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[h]?this.descriptions.labelElements[h].innerHTML!==Z&&(this.descriptions.labelElements[h].innerHTML=Z):this._describeElementHTML("label",h,Z)))},o.default.prototype._describeHTML=function(h,f){var g,y=this.canvas.id;h==="fallback"?(this.dummyDOM.querySelector("#".concat(y+a))?this.dummyDOM.querySelector("#"+y+c).insertAdjacentHTML("beforebegin",'<p id="'.concat(y+l,'"></p>')):(g='<div id="'.concat(y).concat(a,'" role="region" aria-label="Canvas Description"><p id="').concat(y).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#".concat(y)).innerHTML=g),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(y).concat(l)),this.descriptions.fallback.innerHTML=f):h==="label"&&(this.dummyDOM.querySelector("#".concat(y+m))?this.dummyDOM.querySelector("#".concat(y+u))&&this.dummyDOM.querySelector("#".concat(y+u)).insertAdjacentHTML("beforebegin",'<p id="'.concat(y).concat(p,'"></p>')):(g='<div id="'.concat(y).concat(m,'" class="p5Label"><p id="').concat(y).concat(p,'"></p></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+y).insertAdjacentHTML("afterend",g)),this.descriptions.label=this.dummyDOM.querySelector("#"+y+p),this.descriptions.label.innerHTML=f)},o.default.prototype._describeElementHTML=function(h,f,g){var y,Z=this.canvas.id;h==="fallback"?(this.dummyDOM.querySelector("#".concat(Z+a))?this.dummyDOM.querySelector("#"+Z+c)||this.dummyDOM.querySelector("#"+Z+l).insertAdjacentHTML("afterend",'<table id="'.concat(Z).concat(c,'"><caption>Canvas elements and their descriptions</caption></table>')):(y='<div id="'.concat(Z).concat(a,'" role="region" aria-label="Canvas Description"><table id="').concat(Z).concat(c,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(Z,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(Z,"accessibleOutput")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+Z).innerHTML=y),(y=document.createElement("tr")).id=Z+"_fte_"+f,this.dummyDOM.querySelector("#"+Z+c).appendChild(y),this.descriptions.fallbackElements[f]=this.dummyDOM.querySelector("#".concat(Z).concat("_fte_").concat(f)),this.descriptions.fallbackElements[f].innerHTML=g):h==="label"&&(this.dummyDOM.querySelector("#".concat(Z+m))?this.dummyDOM.querySelector("#".concat(Z+u))||this.dummyDOM.querySelector("#"+Z+p).insertAdjacentHTML("afterend",'<table id="'.concat(Z+u,'"></table>')):(y='<div id="'.concat(Z).concat(m,'" class="p5Label"><table id="').concat(Z).concat(u,'"></table></div>'),this.dummyDOM.querySelector("#".concat(Z,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(Z,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#"+Z).insertAdjacentHTML("afterend",y)),(h=document.createElement("tr")).id=Z+"_lte_"+f,this.dummyDOM.querySelector("#"+Z+u).appendChild(h),this.descriptions.labelElements[f]=this.dummyDOM.querySelector("#".concat(Z).concat("_lte_").concat(f)),this.descriptions.labelElements[f].innerHTML=g)},r=o.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],248:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateGridOutput=function(o){var a,l,c,m;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(a=this._accessibleOutputs[o],c=function(p,u,d,h){return u="".concat(u," canvas, ").concat(d," by ").concat(h," pixels, contains ").concat(p[0]),u=(p[0]===1?"".concat(u," shape: "):"".concat(u," shapes: ")).concat(p[1]),u}((l=function(p,u){var d,h="",f="",g=0;for(d in u){var y,Z=0;for(y in u[d]){var I='<li id="'.concat(p,"shape").concat(g,'">').concat(u[d][y].color," ").concat(d,",");d==="line"?I+=" location = ".concat(u[d][y].pos,", length = ").concat(u[d][y].length," pixels"):(I+=" location = ".concat(u[d][y].pos),d!=="point"&&(I+=", area = ".concat(u[d][y].area," %")),I+="</li>"),h+=I,Z++,g++}f=1<Z?"".concat(f," ").concat(Z," ").concat(d,"s"):"".concat(f," ").concat(Z," ").concat(d)}return{numShapes:[g,f],details:h}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),m=function(p,u){var d,h,f,g=0,y="",Z=Array.apply(null,Array(10)).map(function(){});for(d in Z)Z[d]=Array.apply(null,Array(10)).map(function(){});for(h in u)for(var I in u[h]){var G=void 0;G=h!=="line"?'<a href="#'.concat(p,"shape").concat(g,'">').concat(u[h][I].color," ").concat(h,"</a>"):'<a href="#'.concat(p,"shape").concat(g,'">').concat(u[h][I].color," ").concat(h," midpoint</a>"),Z[u[h][I].loc.locY][u[h][I].loc.locX]?Z[u[h][I].loc.locY][u[h][I].loc.locX]=Z[u[h][I].loc.locY][u[h][I].loc.locX]+"  "+G:Z[u[h][I].loc.locY][u[h][I].loc.locX]=G,g++}for(f in Z){var R,C="<tr>";for(R in Z[f])C+="<td>",Z[f][R]!==void 0&&(C+=Z[f][R]),C+="</td>";y=y+C+"</tr>"}return y}(o,this.ingredients.shapes),c!==a.summary.innerHTML&&(a.summary.innerHTML=c),m!==a.map.innerHTML&&(a.map.innerHTML=m),l.details!==a.shapeDetails.innerHTML&&(a.shapeDetails.innerHTML=l.details),this._accessibleOutputs[o]=a)},r=r.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],249:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(c,m,p){return c[0]<.4*m?c[1]<.4*p?"top left":c[1]>.6*p?"bottom left":"mid left":c[0]>.6*m?c[1]<.4*p?"top right":c[1]>.6*p?"bottom right":"mid right":c[1]<.4*p?"top middle":c[1]>.6*p?"bottom middle":"middle"}function l(c,m,p){return m=Math.floor(c[0]/m*10),c=Math.floor(c[1]/p*10),m===10&&(m-=1),c===10&&(c-=1),{locX:m,locY:c}}o.default.prototype.textOutput=function(c){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(c){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),c===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(c,m){var p,u,d,h=this.canvas.id,f=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),"");m==="Fallback"?(p=h+c,this.dummyDOM.querySelector("#".concat(u=h+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(h,"_Description"))?this.dummyDOM.querySelector("#".concat(h,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(h)).innerHTML='<div id="'.concat(u,'" role="region" aria-label="Canvas Outputs"></div>'))):m==="Label"&&(p=h+c+(f=m),this.dummyDOM.querySelector("#".concat(u=h+"accessibleOutput"+m))||(this.dummyDOM.querySelector("#".concat(h,"_Label"))?this.dummyDOM.querySelector("#".concat(h,"_Label")):this.dummyDOM.querySelector("#".concat(h))).insertAdjacentHTML("afterend",'<div id="'.concat(u,'"></div>'))),this._accessibleOutputs[p]={},c==="textOutput"?(f="#".concat(h,"gridOutput").concat(f),d='<div id="'.concat(p,'">Text Output<div id="').concat(p,'Summary" aria-label="text output summary"><p id="').concat(p,'_summary"></p><ul id="').concat(p,'_list"></ul></div><table id="').concat(p,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(f)?this.dummyDOM.querySelector(f).insertAdjacentHTML("beforebegin",d):this.dummyDOM.querySelector("#".concat(u)).innerHTML=d,this._accessibleOutputs[p].list=this.dummyDOM.querySelector("#".concat(p,"_list"))):c==="gridOutput"&&(f="#".concat(h,"textOutput").concat(f),d='<div id="'.concat(p,'">Grid Output<p id="').concat(p,'_summary" aria-label="grid output summary"><table id="').concat(p,'_map" summary="grid output content"></table><ul id="').concat(p,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(f)?this.dummyDOM.querySelector(f).insertAdjacentHTML("afterend",d):this.dummyDOM.querySelector("#".concat(u)).innerHTML=d,this._accessibleOutputs[p].map=this.dummyDOM.querySelector("#".concat(p,"_map"))),this._accessibleOutputs[p].shapeDetails=this.dummyDOM.querySelector("#".concat(p,"_shapeDetails")),this._accessibleOutputs[p].summary=this.dummyDOM.querySelector("#".concat(p,"_summary"))},o.default.prototype._updateAccsOutput=function(){var c=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(c+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(c+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(c+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(c+"gridOutputLabel"))},o.default.prototype._accsBackground=function(c){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==c&&(this.ingredients.colors.backgroundRGBA=c,this.ingredients.colors.background=this._rgbColorName(c))},o.default.prototype._accsCanvasColors=function(c,m){c==="fill"?this.ingredients.colors.fillRGBA!==m&&(this.ingredients.colors.fillRGBA=m,this.ingredients.colors.fill=this._rgbColorName(m)):c==="stroke"&&this.ingredients.colors.strokeRGBA!==m&&(this.ingredients.colors.strokeRGBA=m,this.ingredients.colors.stroke=this._rgbColorName(m))},o.default.prototype._accsOutput=function(c,m){c==="ellipse"&&m[2]===m[3]?c="circle":c==="rectangle"&&m[2]===m[3]&&(c="square");var p,u,d={},h=!0,f=function(y,Z){var I;return y=y==="rectangle"||y==="ellipse"||y==="arc"||y==="circle"||y==="square"?(I=Math.round(Z[0]+Z[2]/2),Math.round(Z[1]+Z[3]/2)):y==="triangle"?(I=(Z[0]+Z[2]+Z[4])/3,(Z[1]+Z[3]+Z[5])/3):y==="quadrilateral"?(I=(Z[0]+Z[2]+Z[4]+Z[6])/4,(Z[1]+Z[3]+Z[5]+Z[7])/4):y==="line"?(I=(Z[0]+Z[2])/2,(Z[1]+Z[3])/2):(I=Z[0],Z[1]),[I,y]}(c,m);if(c==="line"?(d.color=this.ingredients.colors.stroke,d.length=Math.round(this.dist(m[0],m[1],m[2],m[3])),p=a([m[0],[1]],this.width,this.height),u=a([m[2],[3]],this.width,this.height),d.loc=l(f,this.width,this.height),d.pos=p===u?"at ".concat(p):"from ".concat(p," to ").concat(u)):(c==="point"?d.color=this.ingredients.colors.stroke:(d.color=this.ingredients.colors.fill,d.area=function(y,Z,I,G){var R=0;{var C,V,x,w,k,A,Y;y==="arc"?(C=((Z[5]-Z[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI),R=C*Z[2]*Z[3]/8,Z[6]!=="open"&&Z[6]!=="chord"||(Y=Z[0],V=Z[1],x=Z[0]+Z[2]/2*Math.cos(Z[4]).toFixed(2),w=Z[1]+Z[3]/2*Math.sin(Z[4]).toFixed(2),k=Z[0]+Z[2]/2*Math.cos(Z[5]).toFixed(2),A=Z[1]+Z[3]/2*Math.sin(Z[5]).toFixed(2),Y=Math.abs(Y*(w-A)+x*(A-V)+k*(V-w))/2,C>Math.PI?R+=Y:R-=Y)):y==="ellipse"||y==="circle"?R=3.14*Z[2]/2*Z[3]/2:y==="line"||y==="point"?R=0:y==="quadrilateral"?R=Math.abs((Z[6]+Z[0])*(Z[7]-Z[1])+(Z[0]+Z[2])*(Z[1]-Z[3])+(Z[2]+Z[4])*(Z[3]-Z[5])+(Z[4]+Z[6])*(Z[5]-Z[7]))/2:y==="rectangle"||y==="square"?R=Z[2]*Z[3]:y==="triangle"&&(R=Math.abs(Z[0]*(Z[3]-Z[5])+Z[2]*(Z[5]-Z[1])+Z[4]*(Z[1]-Z[3]))/2)}return Math.round(100*R/(I*G))}(c,m,this.width,this.height)),d.pos=a(f,this.width,this.height),d.loc=l(f,this.width,this.height)),this.ingredients.shapes[c]){if(this.ingredients.shapes[c]!==[d]){for(var g in this.ingredients.shapes[c])JSON.stringify(this.ingredients.shapes[c][g])===JSON.stringify(d)&&(h=!1);h===!0&&this.ingredients.shapes[c].push(d)}}else this.ingredients.shapes[c]=[d]},r=o.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":171}],250:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateTextOutput=function(o){var a,l,c,m;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(a=this._accessibleOutputs[o],c=function(p,u,d,h){return d="Your output is a, ".concat(d," by ").concat(h," pixels, ").concat(u," canvas containing the following"),d=p===1?"".concat(d," shape:"):"".concat(d," ").concat(p," shapes:"),d}((l=function(p,u){var d,h="",f=0;for(d in u)for(var g in u[d]){var y='<li><a href="#'.concat(p,"shape").concat(f,'">').concat(u[d][g].color," ").concat(d,"</a>");d==="line"?y+=", ".concat(u[d][g].pos,", ").concat(u[d][g].length," pixels long.</li>"):(y+=", at ".concat(u[d][g].pos),d!=="point"&&(y+=", covering ".concat(u[d][g].area,"% of the canvas")),y+=".</li>"),h+=y,f++}return{numShapes:f,listShapes:h}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),m=function(p,u){var d,h="",f=0;for(d in u)for(var g in u[d]){var y='<tr id="'.concat(p,"shape").concat(f,'"><th>').concat(u[d][g].color," ").concat(d,"</th>");d==="line"?y+="<td>location = ".concat(u[d][g].pos,"</td><td>length = ").concat(u[d][g].length," pixels</td></tr>"):(y+="<td>location = ".concat(u[d][g].pos,"</td>"),d!=="point"&&(y+="<td> area = ".concat(u[d][g].area,"%</td>")),y+="</tr>"),h+=y,f++}return h}(o,this.ingredients.shapes),c!==a.summary.innerHTML&&(a.summary.innerHTML=c),l.listShapes!==a.list.innerHTML&&(a.list.innerHTML=l.listShapes),m!==a.shapeDetails.innerHTML&&(a.shapeDetails.innerHTML=m),this._accessibleOutputs[o]=a)},r=r.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149}],251:[function(r,i,s){var o=(o=r("./core/main"))&&o.__esModule?o:{default:o};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),i.exports=o.default},{"./accessibility/color_namer":246,"./accessibility/describe":247,"./accessibility/gridOutput":248,"./accessibility/outputs":249,"./accessibility/textOutput":250,"./color/color_conversion":252,"./color/creating_reading":253,"./color/p5.Color":254,"./color/setting":255,"./core/constants":256,"./core/environment":257,"./core/friendly_errors/fes_core":258,"./core/friendly_errors/file_errors":259,"./core/friendly_errors/sketch_reader":260,"./core/friendly_errors/stacktrace":261,"./core/friendly_errors/validate_params":262,"./core/helpers":263,"./core/init":264,"./core/legacy":266,"./core/main":267,"./core/p5.Element":268,"./core/p5.Graphics":269,"./core/p5.Renderer":270,"./core/p5.Renderer2D":271,"./core/preload":272,"./core/rendering":273,"./core/shape/2d_primitives":274,"./core/shape/attributes":275,"./core/shape/curves":276,"./core/shape/vertex":277,"./core/shim":278,"./core/structure":279,"./core/transform":280,"./data/local_storage.js":281,"./data/p5.TypedDict":282,"./dom/dom":283,"./events/acceleration":284,"./events/keyboard":285,"./events/mouse":286,"./events/touch":287,"./image/filters":288,"./image/image":289,"./image/loading_displaying":290,"./image/p5.Image":291,"./image/pixels":292,"./io/files":293,"./io/p5.Table":294,"./io/p5.TableRow":295,"./io/p5.XML":296,"./math/calculation":297,"./math/math":298,"./math/noise":299,"./math/p5.Vector":300,"./math/random":301,"./math/trigonometry":302,"./typography/attributes":303,"./typography/loading_displaying":304,"./typography/p5.Font":305,"./utilities/array_functions":306,"./utilities/conversion":307,"./utilities/string_functions":308,"./utilities/time_date":309,"./webgl/3d_primitives":310,"./webgl/interaction":311,"./webgl/light":312,"./webgl/loading":313,"./webgl/material":314,"./webgl/p5.Camera":315,"./webgl/p5.Geometry":316,"./webgl/p5.Matrix":317,"./webgl/p5.RenderBuffer":318,"./webgl/p5.RendererGL":321,"./webgl/p5.RendererGL.Immediate":319,"./webgl/p5.RendererGL.Retained":320,"./webgl/p5.Shader":322,"./webgl/p5.Texture":323,"./webgl/text":324}],252:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.ColorConversion={},r.default.ColorConversion._hsbaToHSLA=function(o){var a=o[0],l=o[1],c=o[2],m=(2-l)*c/2;return m!=0&&(m==1?l=0:m<.5?l/=2-l:l=l*c/(2-2*m)),[a,l,m,o[3]]},r.default.ColorConversion._hsbaToRGBA=function(o){var a,l,c,m,p,u=6*o[0],d=o[1],h=o[2];return d===0?[h,h,h,o[3]]:(l=h*(1-d),c=h*(1-d*(u-(a=Math.floor(u)))),d=h*(1-d*(1+a-u)),u=a===1?(m=c,p=h,l):a===2?(m=l,p=h,d):a===3?(m=l,p=c,h):a===4?(m=d,p=l,h):a===5?(m=h,p=l,c):(m=h,p=d,l),[m,p,u,o[3]])},r.default.ColorConversion._hslaToHSBA=function(o){var a=o[0],l=o[1],c=o[2],m=c<.5?(1+l)*c:c+l-c*l;return[a,l=2*(m-c)/m,m,o[3]]},r.default.ColorConversion._hslaToRGBA=function(o){var a,l=6*o[0],c=o[1],m=o[2];return c===0?[m,m,m,o[3]]:[(a=function(p,u,d){return p<0?p+=6:6<=p&&(p-=6),p<1?u+(d-u)*p:p<3?d:p<4?u+(d-u)*(4-p):u})(2+l,c=2*m-(m=m<.5?(1+c)*m:m+c-m*c),m),a(l,c,m),a(l-2,c,m),o[3]]},r.default.ColorConversion._rgbaToHSBA=function(o){var a,l,c=o[0],m=o[1],p=o[2],u=Math.max(c,m,p),d=u-Math.min(c,m,p);return d==0?l=a=0:(l=d/u,c===u?a=(m-p)/d:m===u?a=2+(p-c)/d:p===u&&(a=4+(c-m)/d),a<0?a+=6:6<=a&&(a-=6)),[a/6,l,u,o[3]]},r.default.ColorConversion._rgbaToHSLA=function(o){var a,l,c=o[0],m=o[1],p=o[2],u=Math.max(c,m,p),h=Math.min(c,m,p),d=u+h,h=u-h;return h==0?l=a=0:(l=d<1?h/d:h/(2-d),c===u?a=(m-p)/h:m===u?a=2+(p-c)/h:p===u&&(a=4+(c-m)/h),a<0?a+=6:6<=a&&(a-=6)),[a/6,l,d/2,o[3]]},r=r.default.ColorConversion,s.default=r},{"../core/main":267}],253:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(u){return l.default._validateParameters("alpha",arguments),this.color(u)._getAlpha()},l.default.prototype.blue=function(u){return l.default._validateParameters("blue",arguments),this.color(u)._getBlue()},l.default.prototype.brightness=function(u){return l.default._validateParameters("brightness",arguments),this.color(u)._getBrightness()},l.default.prototype.color=function(){var u;return l.default._validateParameters("color",arguments),arguments[0]instanceof l.default.Color?arguments[0]:(u=arguments[0]instanceof Array?arguments[0]:arguments,new l.default.Color(this,u))},l.default.prototype.green=function(u){return l.default._validateParameters("green",arguments),this.color(u)._getGreen()},l.default.prototype.hue=function(u){return l.default._validateParameters("hue",arguments),this.color(u)._getHue()},l.default.prototype.lerpColor=function(u,d,h){l.default._validateParameters("lerpColor",arguments);var f,g,y,Z=this._colorMode,I=this._colorMaxes;if(Z===c.RGB)g=u.levels.map(function(G){return G/255}),y=d.levels.map(function(G){return G/255});else if(Z===c.HSB)u._getBrightness(),d._getBrightness(),g=u.hsba,y=d.hsba;else{if(Z!==c.HSL)throw new Error("".concat(Z,"cannot be used for interpolation."));u._getLightness(),d._getLightness(),g=u.hsla,y=d.hsla}return h=Math.max(Math.min(h,1),0),this.lerp===void 0&&(this.lerp=function(G,R,C){return C*(R-G)+G}),u=this.lerp(g[0],y[0],h),d=this.lerp(g[1],y[1],h),f=this.lerp(g[2],y[2],h),g=this.lerp(g[3],y[3],h),u*=I[Z][0],d*=I[Z][1],f*=I[Z][2],g*=I[Z][3],this.color(u,d,f,g)},l.default.prototype.lightness=function(u){return l.default._validateParameters("lightness",arguments),this.color(u)._getLightness()},l.default.prototype.red=function(u){return l.default._validateParameters("red",arguments),this.color(u)._getRed()},l.default.prototype.saturation=function(u){return l.default._validateParameters("saturation",arguments),this.color(u)._getSaturation()};var p=l.default;s.default=p},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],254:[function(h,i,s){function o(I){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(I)}function a(I){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(G){return o(G)}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":o(G)})(I)}h("core-js/modules/es.symbol"),h("core-js/modules/es.symbol.description"),h("core-js/modules/es.symbol.iterator"),h("core-js/modules/es.array.iterator"),h("core-js/modules/es.array.join"),h("core-js/modules/es.array.map"),h("core-js/modules/es.array.slice"),h("core-js/modules/es.object.get-own-property-descriptor"),h("core-js/modules/es.object.to-string"),h("core-js/modules/es.regexp.constructor"),h("core-js/modules/es.regexp.exec"),h("core-js/modules/es.regexp.to-string"),h("core-js/modules/es.string.iterator"),h("core-js/modules/es.string.trim"),h("core-js/modules/es.weak-map"),h("core-js/modules/web.dom-collections.iterator"),h("core-js/modules/es.array.join"),h("core-js/modules/es.array.map"),h("core-js/modules/es.array.slice"),h("core-js/modules/es.object.to-string"),h("core-js/modules/es.regexp.constructor"),h("core-js/modules/es.regexp.exec"),h("core-js/modules/es.regexp.to-string"),h("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(h("../core/main")),c=function(I){if(I&&I.__esModule)return I;if(I===null||a(I)!=="object"&&typeof I!="function")return{default:I};var G=p();if(G&&G.has(I))return G.get(I);var R,C={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(R in I){var x;Object.prototype.hasOwnProperty.call(I,R)&&((x=V?Object.getOwnPropertyDescriptor(I,R):null)&&(x.get||x.set)?Object.defineProperty(C,R,x):C[R]=I[R])}return C.default=I,G&&G.set(I,C),C}(h("../core/constants")),m=u(h("./color_conversion"));function p(){var I;return typeof WeakMap!="function"?null:(I=new WeakMap,p=function(){return I},I)}function u(I){return I&&I.__esModule?I:{default:I}}l.default.Color=function(I,G){if(this._storeModeAndMaxes(I._colorMode,I._colorMaxes),this.mode!==c.RGB&&this.mode!==c.HSL&&this.mode!==c.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=l.default.Color._parseInputs.apply(this,G),this._calculateLevels(),this},l.default.Color.prototype.toString=function(I){var G=this.levels,R=this._array,C=R[3];switch(I){case"#rrggbb":return"#".concat(G[0]<16?"0".concat(G[0].toString(16)):G[0].toString(16),G[1]<16?"0".concat(G[1].toString(16)):G[1].toString(16),G[2]<16?"0".concat(G[2].toString(16)):G[2].toString(16));case"#rrggbbaa":return"#".concat(G[0]<16?"0".concat(G[0].toString(16)):G[0].toString(16),G[1]<16?"0".concat(G[1].toString(16)):G[1].toString(16),G[2]<16?"0".concat(G[2].toString(16)):G[2].toString(16),G[3]<16?"0".concat(G[3].toString(16)):G[3].toString(16));case"#rgb":return"#".concat(Math.round(15*R[0]).toString(16),Math.round(15*R[1]).toString(16),Math.round(15*R[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*R[0]).toString(16),Math.round(15*R[1]).toString(16),Math.round(15*R[2]).toString(16),Math.round(15*R[3]).toString(16));case"rgb":return"rgb(".concat(G[0],", ",G[1],", ",G[2],")");case"rgb%":return"rgb(".concat((100*R[0]).toPrecision(3),"%, ",(100*R[1]).toPrecision(3),"%, ",(100*R[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*R[0]).toPrecision(3),"%, ",(100*R[1]).toPrecision(3),"%, ",(100*R[2]).toPrecision(3),"%, ",(100*R[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[c.HSB][0],", ",this.hsba[1]*this.maxes[c.HSB][1],", ",this.hsba[2]*this.maxes[c.HSB][2],", ",C,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*C).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[c.HSL][0],", ",this.hsla[1]*this.maxes[c.HSL][1],", ",this.hsla[2]*this.maxes[c.HSL][2],", ",C,")");case"hsla%":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*C).toPrecision(3),"%)");default:return"rgba(".concat(G[0],",",G[1],",",G[2],",",C,")")}},l.default.Color.prototype.setRed=function(I){this._array[0]=I/this.maxes[c.RGB][0],this._calculateLevels()},l.default.Color.prototype.setGreen=function(I){this._array[1]=I/this.maxes[c.RGB][1],this._calculateLevels()},l.default.Color.prototype.setBlue=function(I){this._array[2]=I/this.maxes[c.RGB][2],this._calculateLevels()},l.default.Color.prototype.setAlpha=function(I){this._array[3]=I/this.maxes[this.mode][3],this._calculateLevels()},l.default.Color.prototype._calculateLevels=function(){for(var I=this._array,G=this.levels=new Array(I.length),R=I.length-1;0<=R;--R)G[R]=Math.round(255*I[R]);this.hsla=null,this.hsba=null},l.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},l.default.Color.prototype._storeModeAndMaxes=function(I,G){this.mode=I,this.maxes=G},l.default.Color.prototype._getMode=function(){return this.mode},l.default.Color.prototype._getMaxes=function(){return this.maxes},l.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[c.RGB][2]},l.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[c.HSB][2]},l.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[c.RGB][1]},l.default.Color.prototype._getHue=function(){return this.mode===c.HSB?(this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[c.HSB][0]):(this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[c.HSL][0])},l.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[c.HSL][2]},l.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[c.RGB][0]},l.default.Color.prototype._getSaturation=function(){return this.mode===c.HSB?(this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[c.HSB][1]):(this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[c.HSL][1])};var d={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},h=/\s*/,Z=/(\d{1,3})/,f=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,g=new RegExp("".concat(f.source,"%")),y={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",Z.source,",",Z.source,",",Z.source,"\\)$"].join(h.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(h.source),"i"),RGBA:new RegExp(["^rgba\\(",Z.source,",",Z.source,",",Z.source,",",f.source,"\\)$"].join(h.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",f.source,"\\)$"].join(h.source),"i"),HSL:new RegExp(["^hsl\\(",Z.source,",",g.source,",",g.source,"\\)$"].join(h.source),"i"),HSLA:new RegExp(["^hsla\\(",Z.source,",",g.source,",",g.source,",",f.source,"\\)$"].join(h.source),"i"),HSB:new RegExp(["^hsb\\(",Z.source,",",g.source,",",g.source,"\\)$"].join(h.source),"i"),HSBA:new RegExp(["^hsba\\(",Z.source,",",g.source,",",g.source,",",f.source,"\\)$"].join(h.source),"i")},Z=(l.default.Color._parseInputs=function(I,G,R,C){var V,x=arguments.length,w=this.mode,k=this.maxes[w],A=[];if(3<=x){for(A[0]=I/k[0],A[1]=G/k[1],A[2]=R/k[2],A[3]=typeof C=="number"?C/k[3]:1,V=A.length-1;0<=V;--V){var Y=A[V];Y<0?A[V]=0:1<Y&&(A[V]=1)}return w===c.HSL?m.default._hslaToRGBA(A):w===c.HSB?m.default._hsbaToRGBA(A):A}if(x===1&&typeof I=="string"){if(R=I.trim().toLowerCase(),d[R])return l.default.Color._parseInputs.call(this,d[R]);if(y.HEX3.test(R))return(A=y.HEX3.exec(R).slice(1).map(function(U){return parseInt(U+U,16)/255}))[3]=1,A;if(y.HEX6.test(R))return(A=y.HEX6.exec(R).slice(1).map(function(U){return parseInt(U,16)/255}))[3]=1,A;if(y.HEX4.test(R))return A=y.HEX4.exec(R).slice(1).map(function(U){return parseInt(U+U,16)/255});if(y.HEX8.test(R))return A=y.HEX8.exec(R).slice(1).map(function(U){return parseInt(U,16)/255});if(y.RGB.test(R))return(A=y.RGB.exec(R).slice(1).map(function(U){return U/255}))[3]=1,A;if(y.RGB_PERCENT.test(R))return(A=y.RGB_PERCENT.exec(R).slice(1).map(function(U){return parseFloat(U)/100}))[3]=1,A;if(y.RGBA.test(R))return A=y.RGBA.exec(R).slice(1).map(function(U,M){return M===3?parseFloat(U):U/255});if(y.RGBA_PERCENT.test(R))return A=y.RGBA_PERCENT.exec(R).slice(1).map(function(U,M){return M===3?parseFloat(U):parseFloat(U)/100});if(y.HSL.test(R)?(A=y.HSL.exec(R).slice(1).map(function(U,M){return M===0?parseInt(U,10)/360:parseInt(U,10)/100}))[3]=1:y.HSLA.test(R)&&(A=y.HSLA.exec(R).slice(1).map(function(U,M){return M===0?parseInt(U,10)/360:M===3?parseFloat(U):parseInt(U,10)/100})),(A=A.map(function(U){return Math.max(Math.min(U,1),0)})).length)return m.default._hslaToRGBA(A);if(y.HSB.test(R)?(A=y.HSB.exec(R).slice(1).map(function(U,M){return M===0?parseInt(U,10)/360:parseInt(U,10)/100}))[3]=1:y.HSBA.test(R)&&(A=y.HSBA.exec(R).slice(1).map(function(U,M){return M===0?parseInt(U,10)/360:M===3?parseFloat(U):parseInt(U,10)/100})),A.length){for(V=A.length-1;0<=V;--V)A[V]=Math.max(Math.min(A[V],1),0);return m.default._hsbaToRGBA(A)}A=[1,1,1,1]}else{if(x!==1&&x!==2||typeof I!="number")throw new Error("".concat(arguments,"is not a valid color representation."));A[0]=I/k[2],A[1]=I/k[2],A[2]=I/k[2],A[3]=typeof G=="number"?G/k[3]:1,A=A.map(function(U){return Math.max(Math.min(U,1),0)})}return A},l.default.Color);s.default=Z},{"../core/constants":256,"../core/main":267,"./color_conversion":252,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],255:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}r("./p5.Color"),l.default.prototype.background=function(){var u;return(u=this._renderer).background.apply(u,arguments),this},l.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},l.default.prototype.colorMode=function(u,d,h,f,g){return l.default._validateParameters("colorMode",arguments),u!==c.RGB&&u!==c.HSB&&u!==c.HSL||(this._colorMode=u,u=this._colorMaxes[u],arguments.length===2?(u[0]=d,u[1]=d,u[2]=d,u[3]=d):arguments.length===4?(u[0]=d,u[1]=h,u[2]=f):arguments.length===5&&(u[0]=d,u[1]=h,u[2]=f,u[3]=g)),this},l.default.prototype.fill=function(){var u;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(u=this._renderer).fill.apply(u,arguments),this},l.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},l.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},l.default.prototype.stroke=function(){var u;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(u=this._renderer).stroke.apply(u,arguments),this},l.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},l.default.prototype.noErase=function(){return this._renderer.noErase(),this};var p=l.default;s.default=p},{"../core/constants":256,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],256:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.BEZIER=s.QUADRATIC=s.LINEAR=s._CTX_MIDDLE=s._DEFAULT_LEADMULT=s._DEFAULT_TEXT_FILL=s.WORD=s.CHAR=s.BOLDITALIC=s.BOLD=s.ITALIC=s.NORMAL=s.BLUR=s.ERODE=s.DILATE=s.POSTERIZE=s.INVERT=s.OPAQUE=s.GRAY=s.THRESHOLD=s.BURN=s.DODGE=s.SOFT_LIGHT=s.HARD_LIGHT=s.OVERLAY=s.REPLACE=s.SCREEN=s.MULTIPLY=s.EXCLUSION=s.SUBTRACT=s.DIFFERENCE=s.LIGHTEST=s.DARKEST=s.ADD=s.REMOVE=s.BLEND=s.UP_ARROW=s.TAB=s.SHIFT=s.RIGHT_ARROW=s.RETURN=s.OPTION=s.LEFT_ARROW=s.ESCAPE=s.ENTER=s.DOWN_ARROW=s.DELETE=s.CONTROL=s.BACKSPACE=s.ALT=s.AUTO=s.HSL=s.HSB=s.RGB=s.MITER=s.BEVEL=s.ROUND=s.SQUARE=s.PROJECT=s.PIE=s.CHORD=s.OPEN=s.CLOSE=s.TESS=s.QUAD_STRIP=s.QUADS=s.TRIANGLE_STRIP=s.TRIANGLE_FAN=s.TRIANGLES=s.LINE_LOOP=s.LINE_STRIP=s.LINES=s.POINTS=s.BASELINE=s.BOTTOM=s.TOP=s.CENTER=s.LEFT=s.RIGHT=s.RADIUS=s.CORNERS=s.CORNER=s.RAD_TO_DEG=s.DEG_TO_RAD=s.RADIANS=s.DEGREES=s.TWO_PI=s.TAU=s.QUARTER_PI=s.PI=s.HALF_PI=s.WAIT=s.TEXT=s.MOVE=s.HAND=s.CROSS=s.ARROW=s.WEBGL=s.P2D=s.VERSION=void 0,s.COVER=s.CONTAIN=s.FALLBACK=s.LABEL=s.AXES=s.GRID=s._DEFAULT_FILL=s._DEFAULT_STROKE=s.PORTRAIT=s.LANDSCAPE=s.MIRROR=s.CLAMP=s.REPEAT=s.NEAREST=s.IMAGE=s.IMMEDIATE=s.TEXTURE=s.FILL=s.STROKE=s.CURVE=void 0;var o=Math.PI,a=(s.VERSION="1.5.0",s.P2D="p2d",s.WEBGL="webgl",s.ARROW="default",s.CROSS="crosshair",s.HAND="pointer",s.MOVE="move",s.TEXT="text",s.WAIT="wait",o/2),a=(s.HALF_PI=a,o),a=(s.PI=a,o/4),a=(s.QUARTER_PI=a,2*o),a=(s.TAU=a,2*o),a=(s.TWO_PI=a,s.DEGREES="degrees",s.RADIANS="radians",o/180),a=(s.DEG_TO_RAD=a,180/o);s.RAD_TO_DEG=a,s.CORNER="corner",s.CORNERS="corners",s.RADIUS="radius",s.RIGHT="right",s.LEFT="left",s.CENTER="center",s.TOP="top",s.BOTTOM="bottom",s.BASELINE="alphabetic",s.POINTS=0,s.LINES=1,s.LINE_STRIP=3,s.LINE_LOOP=2,s.TRIANGLES=4,s.TRIANGLE_FAN=6,s.TRIANGLE_STRIP=5,s.QUADS="quads",s.QUAD_STRIP="quad_strip",s.TESS="tess",s.CLOSE="close",s.OPEN="open",s.CHORD="chord",s.PIE="pie",s.PROJECT="square",s.SQUARE="butt",s.ROUND="round",s.BEVEL="bevel",s.MITER="miter",s.RGB="rgb",s.HSB="hsb",s.HSL="hsl",s.AUTO="auto",s.ALT=18,s.BACKSPACE=8,s.CONTROL=17,s.DELETE=46,s.DOWN_ARROW=40,s.ENTER=13,s.ESCAPE=27,s.LEFT_ARROW=37,s.OPTION=18,s.RETURN=13,s.RIGHT_ARROW=39,s.SHIFT=16,s.TAB=9,s.UP_ARROW=38,s.BLEND="source-over",s.REMOVE="destination-out",s.ADD="lighter",s.DARKEST="darken",s.LIGHTEST="lighten",s.DIFFERENCE="difference",s.SUBTRACT="subtract",s.EXCLUSION="exclusion",s.MULTIPLY="multiply",s.SCREEN="screen",s.REPLACE="copy",s.OVERLAY="overlay",s.HARD_LIGHT="hard-light",s.SOFT_LIGHT="soft-light",s.DODGE="color-dodge",s.BURN="color-burn",s.THRESHOLD="threshold",s.GRAY="gray",s.OPAQUE="opaque",s.INVERT="invert",s.POSTERIZE="posterize",s.DILATE="dilate",s.ERODE="erode",s.BLUR="blur",s.NORMAL="normal",s.ITALIC="italic",s.BOLD="bold",s.BOLDITALIC="bold italic",s.CHAR="CHAR",s.WORD="WORD",s._DEFAULT_TEXT_FILL="#000000",s._DEFAULT_LEADMULT=1.25,s._CTX_MIDDLE="middle",s.LINEAR="linear",s.QUADRATIC="quadratic",s.BEZIER="bezier",s.CURVE="curve",s.STROKE="stroke",s.FILL="fill",s.TEXTURE="texture",s.IMMEDIATE="immediate",s.IMAGE="image",s.NEAREST="nearest",s.REPEAT="repeat",s.CLAMP="clamp",s.MIRROR="mirror",s.LANDSCAPE="landscape",s.PORTRAIT="portrait",s._DEFAULT_STROKE="#000000",s._DEFAULT_FILL="#FFFFFF",s.GRID="grid",s.AXES="axes",s.LABEL="label",s.FALLBACK="fallback",s.CONTAIN="contain",s.COVER="cover"},{}],257:[function(r,i,s){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(f)}function a(f){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(c=r("./main"))&&c.__esModule?c:{default:c},c=function(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var g=m();if(g&&g.has(f))return g.get(f);var y,Z={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f){var G;Object.prototype.hasOwnProperty.call(f,y)&&((G=I?Object.getOwnPropertyDescriptor(f,y):null)&&(G.get||G.set)?Object.defineProperty(Z,y,G):Z[y]=f[y])}return Z.default=f,g&&g.set(f,Z),Z}(r("./constants"));function m(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,m=function(){return f},f)}var p=[c.ARROW,c.CROSS,c.HAND,c.MOVE,c.TEXT,c.WAIT],u=(l.default.prototype._frameRate=0,l.default.prototype._lastFrameTime=window.performance.now(),l.default.prototype._targetFrameRate=60,window.print);function d(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function h(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}l.default.prototype.print=function(){var f;arguments.length?(f=console).log.apply(f,arguments):u()},l.default.prototype.frameCount=0,l.default.prototype.deltaTime=0,l.default.prototype.focused=document.hasFocus(),l.default.prototype.cursor=function(f,g,y){var Z,I="auto",G=this._curElement.elt;p.includes(f)?I=f:typeof f=="string"&&(Z="",g&&y&&typeof g=="number"&&typeof y=="number"&&(Z="".concat(g," ").concat(y)),I=f.substring(0,7)==="http://"||f.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(f)?"url(".concat(f,") ").concat(Z,", auto"):f),G.style.cursor=I},l.default.prototype.frameRate=function(f){return l.default._validateParameters("frameRate",arguments),typeof f!="number"||f<0?this._frameRate:(this._setProperty("_targetFrameRate",f),f===0&&this._setProperty("_frameRate",f),this)},l.default.prototype.getFrameRate=function(){return this.frameRate()},l.default.prototype.setFrameRate=function(f){return this.frameRate(f)},l.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.default.prototype.displayWidth=screen.width,l.default.prototype.displayHeight=screen.height,l.default.prototype.windowWidth=d(),l.default.prototype.windowHeight=h(),l.default.prototype._onresize=function(f){this._setProperty("windowWidth",d()),this._setProperty("windowHeight",h());var g=this._isGlobal?window:this;typeof g.windowResized!="function"||(g=g.windowResized(f))===void 0||g||f.preventDefault()},l.default.prototype.width=0,l.default.prototype.height=0,l.default.prototype.fullscreen=function(f){if(l.default._validateParameters("fullscreen",arguments),f===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(f){if(f=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");f.requestFullscreen?f.requestFullscreen():f.mozRequestFullScreen?f.mozRequestFullScreen():f.webkitRequestFullscreen?f.webkitRequestFullscreen():f.msRequestFullscreen&&f.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.default.prototype.pixelDensity=function(f){var g;return l.default._validateParameters("pixelDensity",arguments),typeof f=="number"?(f!==this._pixelDensity&&(this._pixelDensity=f),(g=this).resizeCanvas(this.width,this.height,!0)):g=this._pixelDensity,g},l.default.prototype.displayDensity=function(){return window.devicePixelRatio},l.default.prototype.getURL=function(){return location.href},l.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(f){return f!==""})},l.default.prototype.getURLParams=function(){for(var f,g=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,y={};(f=g.exec(location.search))!=null;)f.index===g.lastIndex&&g.lastIndex++,y[f[1]]=f[2];return y},r=l.default,s.default=r},{"./constants":256,"./main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],258:[function(r,i,s){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(p=r("../main"))&&p.__esModule?p:{default:p};r("../internationalization");function a(u,d){d=d||console.log.bind(console),l||m(),l.some(function(h){var f;if(u.message&&u.message.match("\\W?".concat(h.name,"\\W"))!==null)return f=h.type==="function"?"".concat(h.name,"()"):h.name,d("Did you just try to use p5.js's ".concat(f," ").concat(h.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(c)),!0})}var l=null,m=null,c=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},l=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),m=function(){function u(h){return Object.getOwnPropertyNames(h).filter(function(f){return f[0]!=="_"&&!(f in d)&&(d[f]=!0)}).map(function(f){var g=typeof h[f]=="function"?"function":f===f.toUpperCase()?"constant":"variable";return{name:f,type:g}})}var d={};(l=[].concat(u(o.default.prototype),u(r("../constants")))).sort(function(h,f){return f.name.length-h.name.length})},p=(o.default.prototype._helpForMisusedAtTopLevelCode=a,document.readyState!=="complete"&&(window.addEventListener("error",a,!1),window.addEventListener("load",function(){window.removeEventListener("error",a,!1)})),o.default);s.default=p},{"../constants":256,"../internationalization":265,"../main":267,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":165,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],259:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(o=r("../main"))&&o.__esModule?o:{default:o};r("../internationalization"),o.default._friendlyFileLoadError=function(){},r=o.default,s.default=r},{"../internationalization":265,"../main":267}],260:[function(r,i,s){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(d)}function a(d){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=p(r("../main"));r("../internationalization"),m(r("../constants"));function c(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,c=function(){return d},d)}function m(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var h=c();if(h&&h.has(d))return h.get(d);var f,g,y={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&((g=Z?Object.getOwnPropertyDescriptor(d,f):null)&&(g.get||g.set)?Object.defineProperty(y,f,g):y[f]=d[f]);return y.default=d,h&&h.set(d,y),y}function p(d){return d&&d.__esModule?d:{default:d}}l.default._fesCodeReader=function(){};var u=l.default;s.default=u},{"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],261:[function(r,i,s){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../main"))&&r.__esModule?r:{default:r};function o(){var a=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,c=/^(eval@)?(\[native code])?$/;return{parse:function(m){return m.stacktrace!==void 0||m["opera#sourceloc"]!==void 0?this.parseOpera(m):m.stack&&m.stack.match(l)?this.parseV8OrIE(m):m.stack?this.parseFFOrSafari(m):void 0},extractLocation:function(m){return m.indexOf(":")===-1?[m]:[(m=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(m.replace(/[()]/g,"")))[1],m[2]||void 0,m[3]||void 0]},parseV8OrIE:function(m){return m.stack.split(`
`).filter(function(p){return!!p.match(l)},this).map(function(p){var u=(p=-1<p.indexOf("(eval ")?p.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):p).replace(/^\s+/,"").replace(/\(eval code/g,"("),d=u.match(/ (\((.+):(\d+):(\d+)\)$)/),u=(u=d?u.replace(d[0],""):u).split(/\s+/).slice(1),d=this.extractLocation(d?d[1]:u.pop());return{functionName:u.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(d[0])?void 0:d[0],lineNumber:d[1],columnNumber:d[2],source:p}},this)},parseFFOrSafari:function(m){return m.stack.split(`
`).filter(function(p){return!p.match(c)},this).map(function(p){var u,d;return(p=-1<p.indexOf(" > eval")?p.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):p).indexOf("@")===-1&&p.indexOf(":")===-1?{functionName:p}:{functionName:(d=p.match(u=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&d[1]?d[1]:void 0,fileName:(d=this.extractLocation(p.replace(u,"")))[0],lineNumber:d[1],columnNumber:d[2],source:p}},this)},parseOpera:function(m){return!m.stacktrace||-1<m.message.indexOf(`
`)&&m.message.split(`
`).length>m.stacktrace.split(`
`).length?this.parseOpera9(m):m.stack?this.parseOpera11(m):this.parseOpera10(m)},parseOpera9:function(m){for(var p=/Line (\d+).*script (?:in )?(\S+)/i,u=m.message.split(`
`),d=[],h=2,f=u.length;h<f;h+=2){var g=p.exec(u[h]);g&&d.push({fileName:g[2],lineNumber:g[1],source:u[h]})}return d},parseOpera10:function(m){for(var p=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=m.stacktrace.split(`
`),d=[],h=0,f=u.length;h<f;h+=2){var g=p.exec(u[h]);g&&d.push({functionName:g[3]||void 0,fileName:g[2],lineNumber:g[1],source:u[h]})}return d},parseOpera11:function(m){return m.stack.split(`
`).filter(function(p){return!!p.match(a)&&!p.match(/^Error created at/)},this).map(function(p){var u,h=p.split("@"),d=this.extractLocation(h.pop()),h=h.shift()||"";return{functionName:h.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(u=h.match(/\(([^)]*)\)/)?h.replace(/^[^(]+\(([^)]*)\)$/,"$1"):u)===void 0||u==="[arguments not available]"?void 0:u.split(","),fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:p}},this)}}}r.default._getErrorStackParser=function(){return new o},r=r.default,s.default=r},{"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],262:[function(r,i,s){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(a=r("../main"))&&a.__esModule?a:{default:a};(function(m){if(!(m&&m.__esModule)&&!(m===null||c(m)!=="object"&&typeof m!="function")){var p=l();if(p&&p.has(m))return p.get(m);var u,d={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in m){var f;Object.prototype.hasOwnProperty.call(m,u)&&((f=h?Object.getOwnPropertyDescriptor(m,u):null)&&(f.get||f.set)?Object.defineProperty(d,u,f):d[u]=m[u])}d.default=m,p&&p.set(m,d)}})(r("../constants")),r("../internationalization");function l(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,l=function(){return m},m)}function c(m){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(m)}a.default._validateParameters=a.default._clearValidateParamsCache=function(){},r=a.default,s.default=r},{"../../../docs/parameterData.json":void 0,"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.map":166,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],263:[function(r,i,s){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}function a(m){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=function(m){if(m&&m.__esModule)return m;if(m===null||a(m)!=="object"&&typeof m!="function")return{default:m};var p=c();if(p&&p.has(m))return p.get(m);var u,d={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in m){var f;Object.prototype.hasOwnProperty.call(m,u)&&((f=h?Object.getOwnPropertyDescriptor(m,u):null)&&(f.get||f.set)?Object.defineProperty(d,u,f):d[u]=m[u])}return d.default=m,p&&p.set(m,d),d}(r("./constants"));function c(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,c=function(){return m},m)}s.default={modeAdjust:function(m,p,u,d,h){return h===l.CORNER?{x:m,y:p,w:u,h:d}:h===l.CORNERS?{x:m,y:p,w:u-m,h:d-p}:h===l.RADIUS?{x:m-u,y:p-d,w:2*u,h:2*d}:h===l.CENTER?{x:m-.5*u,y:p-.5*d,w:u,h:d}:void 0}}},{"./constants":256,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],264:[function(r,i,s){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var o=(a=r("../core/main"))&&a.__esModule?a:{default:a};r("./internationalization");var a=Promise.resolve();Promise.all([new Promise(function(l,c){document.readyState==="complete"?l():window.addEventListener("load",l,!1)}),a]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default})},{"../core/main":267,"./internationalization":265,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":230}],265:[function(r,i,s){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.setTranslatorLanguage=s.currentTranslatorLanguage=s.availableTranslatorLanguages=s.initialize=s.translator=void 0;var o,a,l=m(r("i18next")),c=m(r("i18next-browser-languagedetector"));function m(d){return d&&d.__esModule?d:{default:d}}function p(d,h){for(var f=0;f<h.length;f++){var g=h[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}var u=function(){function d(g,y){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.init(g,y)}var h,f;return h=d,(f=[{key:"fetchWithTimeout",value:function(g,y){var Z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(g,y),new Promise(function(I,G){return setTimeout(function(){return G(new Error("timeout"))},Z)})])}},{key:"init",value:function(g){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=g,this.options=y}},{key:"read",value:function(g,y,Z){var I=this.options.loadPath;g===this.options.fallback?Z(null,o[g][y]):a.includes(g)?(I=this.services.interpolator.interpolate(I,{lng:g,ns:y}),this.loadUrl(I,Z)):Z("Not found",!1)}},{key:"loadUrl",value:function(g,y){this.fetchWithTimeout(g).then(function(Z){if(Z.ok)return Z.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(Z){return y(null,Z)}).catch(y)}}])&&p(h.prototype,f),d}();u.type="backend",s.translator=function(d,h){console.debug("p5.js translator called before translations were loaded"),l.default.t(d,h)},s.initialize=function(){return l.default.use(c.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:o}).then(function(d){s.translator=d},function(d){return console.debug("Translations failed to load (".concat(d,")"))})},s.availableTranslatorLanguages=function(){return l.default.languages},s.currentTranslatorLanguage=function(d){return l.default.language},s.setTranslatorLanguage=function(d){return l.default.changeLanguage(d||void 0,function(h){return console.debug("Translations failed to load (".concat(h,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":230,i18next:3,"i18next-browser-languagedetector":3}],266:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,s.default=r},{"./main":267}],267:[function(r,i,s){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(d)}function a(d){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r("./shim");var l=function(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var h=c();if(h&&h.has(d))return h.get(d);var f,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d){var Z;Object.prototype.hasOwnProperty.call(d,f)&&((Z=y?Object.getOwnPropertyDescriptor(d,f):null)&&(Z.get||Z.set)?Object.defineProperty(g,f,Z):g[f]=d[f])}return g.default=d,h&&h.set(d,g),g}(r("./constants"));function c(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,c=function(){return d},d)}function m(d,h){for(var f=0;f<h.length;f++){var g=h[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}var p,u=function(){function d(g,G,Z){var I=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=G,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var G=Object.getOwnPropertyNames(d.prototype._registeredMethods),R=!0,C=!1,V=void 0;try{for(var x,w=G[Symbol.iterator]();!(R=(x=w.next()).done);R=!0){var k=x.value;this._registeredMethods[k]=d.prototype._registeredMethods[k].slice()}}catch(E){C=!0,V=E}finally{try{R||w.return==null||w.return()}finally{if(C)throw V}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){I._userNode&&typeof I._userNode=="string"&&(I._userNode=document.getElementById(I._userNode));var E=I._isGlobal?window:I;if(E.preload){var O,D=document.getElementById(I._loadingScreenId),le=(D||((D=document.createElement("div")).innerHTML="Loading...",D.style.position="absolute",D.id=I._loadingScreenId,(I._userNode||document.body).appendChild(D)),I._preloadMethods);for(O in le){le[O]=le[O]||d;var X=le[O];X!==d.prototype&&X!==d||(I._isGlobal&&(window[O]=I._wrapPreload(I,O)),X=I),I._registeredPreloadMethods[O]=X[O],X[O]=I._wrapPreload(X,O)}E.preload(),I._runIfPreloadsAreDone()}else I._setup(),I._draw()},this._runIfPreloadsAreDone=function(){var E,O=this._isGlobal?window:this;O._preloadCount===0&&((E=document.getElementById(O._loadingScreenId))&&E.parentNode.removeChild(E),this._setupDone||(this._lastFrameTime=window.performance.now(),O._setup(),O._draw()))},this._decrementPreload=function(){var E=this._isGlobal?window:this;E._preloadDone||typeof E.preload!="function"||(E._setProperty("_preloadCount",E._preloadCount-1),E._runIfPreloadsAreDone())},this._wrapPreload=function(E,O){var D=this;return function(){D._incrementPreload();for(var le=arguments.length,X=new Array(le),T=0;T<le;T++)X[T]=arguments[T];return D._registeredPreloadMethods[O].apply(E,X)}},this._incrementPreload=function(){var E=this._isGlobal?window:this;E._preloadDone||E._setProperty("_preloadCount",E._preloadCount+1)},this._setup=function(){I.createCanvas(I._defaultCanvasSize.width,I._defaultCanvasSize.height,"p2d");var E=I._isGlobal?window:I;if(typeof E.preload=="function")for(var O in I._preloadMethods)E[O]=I._preloadMethods[O][O],E[O]&&I&&(E[O]=E[O].bind(I));I._millisStart=window.performance.now(),E._preloadDone=!0,typeof E.setup=="function"&&E.setup();var D=document.getElementsByTagName("canvas"),le=!0,X=!1,T=void 0;try{for(var N,z=D[Symbol.iterator]();!(le=(N=z.next()).done);le=!0){var te=N.value;te.dataset.hidden==="true"&&(te.style.visibility="",delete te.dataset.hidden)}}catch(ne){X=!0,T=ne}finally{try{le||z.return==null||z.return()}finally{if(X)throw T}}I._lastFrameTime=window.performance.now(),I._setupDone=!0,(I._accessibleOutputs.grid||I._accessibleOutputs.text)&&I._updateAccsOutput()},this._draw=function(){var E=window.performance.now(),O=E-I._lastFrameTime,D=1e3/I._targetFrameRate;(!I._loop||D-5<=O)&&(I.redraw(),I._frameRate=1e3/(E-I._lastFrameTime),I.deltaTime=E-I._lastFrameTime,I._setProperty("deltaTime",I.deltaTime),I._lastFrameTime=E,I._updateMouseCoords!==void 0&&(I._updateMouseCoords(),I._setProperty("movedX",0),I._setProperty("movedY",0))),I._loop&&(I._requestAnimId=window.requestAnimationFrame(I._draw))},this._setProperty=function(E,O){I[E]=O,I._isGlobal&&(window[E]=O)},this.remove=function(){var E=document.getElementById(I._loadingScreenId);if(E&&(E.parentNode.removeChild(E),I._incrementPreload()),I._curElement){for(var O in I._loop=!1,I._requestAnimId&&window.cancelAnimationFrame(I._requestAnimId),I._events)window.removeEventListener(O,I._events[O]);var D=!0,E=!1,le=void 0;try{for(var X,T=I._elements[Symbol.iterator]();!(D=(X=T.next()).done);D=!0){var N,z=X.value;for(N in z.elt&&z.elt.parentNode&&z.elt.parentNode.removeChild(z.elt),z._events)z.elt.removeEventListener(N,z._events[N])}}catch(ie){E=!0,le=ie}finally{try{D||T.return==null||T.return()}finally{if(E)throw le}}var te=I;I._registeredMethods.remove.forEach(function(ie){ie!==void 0&&ie.call(te)})}if(I._isGlobal){for(var ne in d.prototype)try{delete window[ne]}catch{window[ne]=void 0}for(var ee in I)if(I.hasOwnProperty(ee))try{delete window[ee]}catch{window[ee]=void 0}d.instance=null}},this._registeredMethods.init.forEach(function(E){E!==void 0&&E.call(this)},this),this._setupPromisePreloads();var A,Y,U=this._createFriendlyGlobalFunctionBinder();if(g)g(this),d._checkForUserDefinedFunctions(this);else{for(var M in this._isGlobal=!0,d.instance=this,d.prototype)typeof d.prototype[M]=="function"?(A=M.substring(2),this._events.hasOwnProperty(A)||(Math.hasOwnProperty(M)&&Math[M]===d.prototype[M]?U(M,d.prototype[M]):U(M,d.prototype[M].bind(this)))):U(M,d.prototype[M]);for(var j in this)this.hasOwnProperty(j)&&U(j,this[j])}for(Y in this._events){var K=this["_on".concat(Y)];K&&(K=K.bind(this),window.addEventListener(Y,K,{passive:!1}),this._events[Y]=K)}function P(){I._setProperty("focused",!0)}function J(){I._setProperty("focused",!1)}window.addEventListener("focus",P),window.addEventListener("blur",J),this.registerMethod("remove",function(){window.removeEventListener("focus",P),window.removeEventListener("blur",J)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var h,f;return h=d,(f=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=l.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,y){d.prototype._preloadMethods.hasOwnProperty(g)||(d.prototype._preloadMethods[g]=y)}},{key:"registerMethod",value:function(g,y){var Z=this||d.prototype;Z._registeredMethods.hasOwnProperty(g)||(Z._registeredMethods[g]=[]),Z._registeredMethods[g].push(y)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},y=g.globalObject||window;return g.log||console.log.bind(console),function(Z,I){d.disableFriendlyErrors,y[Z]=I}}}])&&m(h.prototype,f),d}();for(p in u.instance=null,u.disableFriendlyErrors=!1,l)u.prototype[p]=l[p];u.VERSION=l.VERSION,u.prototype._preloadMethods={loadJSON:u.prototype,loadImage:u.prototype,loadStrings:u.prototype,loadXML:u.prototype,loadBytes:u.prototype,loadTable:u.prototype,loadFont:u.prototype,loadModel:u.prototype,loadShader:u.prototype},u.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},u.prototype._registeredPreloadMethods={},s.default=u},{"./constants":256,"./shim":278,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],268:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("./main"))&&r.__esModule?r:{default:r};o.default.Element=function(a,l){this.elt=a,this._pInst=this._pixelsState=l,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},o.default.Element.prototype.parent=function(a){return a===void 0?this.elt.parentNode:(typeof a=="string"?(a[0]==="#"&&(a=a.substring(1)),a=document.getElementById(a)):a instanceof o.default.Element&&(a=a.elt),a.appendChild(this.elt),this)},o.default.Element.prototype.id=function(a){return a===void 0?this.elt.id:(this.elt.id=a,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},o.default.Element.prototype.class=function(a){return a===void 0?this.elt.className:(this.elt.className=a,this)},o.default.Element.prototype.mousePressed=function(a){return o.default.Element._adjustListener("mousedown",function(l){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(l),a.call(this,l)},this),this},o.default.Element.prototype.doubleClicked=function(a){return o.default.Element._adjustListener("dblclick",a,this),this},o.default.Element.prototype.mouseWheel=function(a){return o.default.Element._adjustListener("wheel",a,this),this},o.default.Element.prototype.mouseReleased=function(a){return o.default.Element._adjustListener("mouseup",a,this),this},o.default.Element.prototype.mouseClicked=function(a){return o.default.Element._adjustListener("click",a,this),this},o.default.Element.prototype.mouseMoved=function(a){return o.default.Element._adjustListener("mousemove",a,this),this},o.default.Element.prototype.mouseOver=function(a){return o.default.Element._adjustListener("mouseover",a,this),this},o.default.Element.prototype.mouseOut=function(a){return o.default.Element._adjustListener("mouseout",a,this),this},o.default.Element.prototype.touchStarted=function(a){return o.default.Element._adjustListener("touchstart",a,this),this},o.default.Element.prototype.touchMoved=function(a){return o.default.Element._adjustListener("touchmove",a,this),this},o.default.Element.prototype.touchEnded=function(a){return o.default.Element._adjustListener("touchend",a,this),this},o.default.Element.prototype.dragOver=function(a){return o.default.Element._adjustListener("dragover",a,this),this},o.default.Element.prototype.dragLeave=function(a){return o.default.Element._adjustListener("dragleave",a,this),this},o.default.Element._adjustListener=function(a,l,c){return l===!1?o.default.Element._detachListener(a,c):o.default.Element._attachListener(a,l,c),this},o.default.Element._attachListener=function(a,l,c){c._events[a]&&o.default.Element._detachListener(a,c),l=l.bind(c),c.elt.addEventListener(a,l,!1),c._events[a]=l},o.default.Element._detachListener=function(a,l){var c=l._events[a];l.elt.removeEventListener(a,c,!1),l._events[a]=null},o.default.Element.prototype._setProperty=function(a,l){this[a]=l},r=o.default.Element,s.default=r},{"./main":267}],269:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("./main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("./constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}l.default.Graphics=function(u,d,y,f){var g,y=y||c.P2D;for(g in this.canvas=document.createElement("canvas"),(f._userNode||document.body).appendChild(this.canvas),l.default.Element.call(this,this.canvas,f),l.default.prototype)this[g]||(typeof l.default.prototype[g]=="function"?this[g]=l.default.prototype[g].bind(this):this[g]=l.default.prototype[g]);return l.default.prototype._initializeInstanceVariables.apply(this),this.width=u,this.height=d,this._pixelDensity=f._pixelDensity,y===c.WEBGL?this._renderer=new l.default.RendererGL(this.canvas,this,!1):this._renderer=new l.default.Renderer2D(this.canvas,this,!1),f._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(u,d),this._renderer._applyDefaults(),this},l.default.Graphics.prototype=Object.create(l.default.Element.prototype),l.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},l.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var u,d=this._pInst._elements.indexOf(this);for(u in d!==-1&&this._pInst._elements.splice(d,1),this._events)this.elt.removeEventListener(u,this._events[u])};var p=l.default.Graphics;s.default=p},{"./constants":256,"./main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],270:[function(r,i,s){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(u=r("./main"))&&u.__esModule?u:{default:u},l=function(d){if(d&&d.__esModule)return d;if(d===null||m(d)!=="object"&&typeof d!="function")return{default:d};var h=c();if(h&&h.has(d))return h.get(d);var f,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d){var Z;Object.prototype.hasOwnProperty.call(d,f)&&((Z=y?Object.getOwnPropertyDescriptor(d,f):null)&&(Z.get||Z.set)?Object.defineProperty(g,f,Z):g[f]=d[f])}return g.default=d,h&&h.set(d,g),g}(r("../core/constants"));function c(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,c=function(){return d},d)}function m(d){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(d)}function p(d){var h=0,f=0;if(d.offsetParent)for(;h+=d.offsetLeft,f+=d.offsetTop,d=d.offsetParent;);else h+=d.offsetLeft,f+=d.offsetTop;return[h,f]}a.default.Renderer=function(d,h,f){a.default.Element.call(this,d,h),this.canvas=d,this._pixelsState=h,f?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=l.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=l.LEFT,this._textBaseline=l.BASELINE,this._textWrap=l.WORD,this._rectMode=l.CORNER,this._ellipseMode=l.CENTER,this._curveTightness=0,this._imageMode=l.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},a.default.Renderer.prototype=Object.create(a.default.Element.prototype),a.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},a.default.Renderer.prototype.pop=function(d){d.properties&&Object.assign(this,d.properties)},a.default.Renderer.prototype.resize=function(d,h){this.width=d,this.height=h,this.elt.width=d*this._pInst._pixelDensity,this.elt.height=h*this._pInst._pixelDensity,this.elt.style.width="".concat(d,"px"),this.elt.style.height="".concat(h,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},a.default.Renderer.prototype.get=function(d,h,f,g){var y=this._pixelsState,Z=y._pixelDensity,I=this.canvas;if(d===void 0&&h===void 0)d=h=0,f=y.width,g=y.height;else if(d*=Z,h*=Z,f===void 0&&g===void 0)return d<0||h<0||d>=I.width||h>=I.height?[0,0,0,0]:this._getPixel(d,h);return y=new a.default.Image(f,g),y.canvas.getContext("2d").drawImage(I,d,h,f*Z,g*Z,0,0,f,g),y},a.default.Renderer.prototype.textLeading=function(d){return typeof d=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",d),this._pInst):this._textLeading},a.default.Renderer.prototype.textSize=function(d){return typeof d=="number"?(this._setProperty("_textSize",d),this._leadingSet||this._setProperty("_textLeading",d*l._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},a.default.Renderer.prototype.textStyle=function(d){return d?(d!==l.NORMAL&&d!==l.ITALIC&&d!==l.BOLD&&d!==l.BOLDITALIC||this._setProperty("_textStyle",d),this._applyTextProperties()):this._textStyle},a.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},a.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},a.default.Renderer.prototype.textAlign=function(d,h){return d!==void 0?(this._setProperty("_textAlign",d),h!==void 0&&this._setProperty("_textBaseline",h),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},a.default.Renderer.prototype.textWrap=function(d){return this._setProperty("_textWrap",d),this._textWrap},a.default.Renderer.prototype.text=function(d,h,f,g,y){var Z,I,G,R,C=this._pInst,V=this._textWrap,x=Number.MAX_VALUE,w=f;if((this._doFill||this._doStroke)&&d!==void 0){if(Z=(d=(d=typeof d!="string"?d.toString():d).replace(/(\t)/g,"  ")).split(`
`),g!==void 0){switch(this._rectMode===l.CENTER&&(h-=g/2),this._textAlign){case l.CENTER:h+=g/2;break;case l.RIGHT:h+=g}if(y!==void 0){this._rectMode===l.CENTER&&(f-=y/2);var d=f,k=C.textAscent();switch(this._textBaseline){case l.BOTTOM:R=f+y,f=Math.max(R,f),w+=k;break;case l.CENTER:R=f+y/2,f=Math.max(R,f),w+=k/2}x=f+y-k,this._textBaseline===l.CENTER&&(x=d+y-k/2)}else{if(this._textBaseline===l.BOTTOM)return console.warn("textAlign(*, BOTTOM) requires x, y, width and height");if(this._textBaseline===l.CENTER)return console.warn("textAlign(*, CENTER) requires x, y, width and height")}if(V===l.WORD){for(var A=[],Y=0;Y<Z.length;Y++){for(var U="",M=Z[Y].split(" "),j=0;j<M.length;j++)I="".concat(U+M[j])+" ",U=g<(G=this.textWidth(I))&&0<U.length?(A.push(U),"".concat(M[j])+" "):I;A.push(U)}var K=0;this._textBaseline===l.CENTER?K=(A.length-1)*C.textLeading()/2:this._textBaseline===l.BOTTOM&&(K=(A.length-1)*C.textLeading());for(var P=0;P<Z.length;P++){U="",M=Z[P].split(" ");for(var J=0;J<M.length;J++)I="".concat(U+M[J])+" ",g<(G=this.textWidth(I))&&0<U.length?(this._renderText(C,U.trim(),h,f-K,x,w),U="".concat(M[J])+" ",f+=C.textLeading()):U=I;this._renderText(C,U.trim(),h,f-K,x,w),f+=C.textLeading()}}else{for(var E=[],O=0;O<Z.length;O++)for(var D=Z[O].split(U=""),le=0;le<D.length;le++)I="".concat(U+D[le]),(G=this.textWidth(I))<=g?U+=D[le]:g<G&&0<U.length&&(E.push(U),U="".concat(D[le]));E.push(U);var X=0;this._textBaseline===l.CENTER?X=(E.length-1)*C.textLeading()/2:this._textBaseline===l.BOTTOM&&(X=(E.length-1)*C.textLeading());for(var T=0;T<Z.length;T++){D=Z[T].split(U="");for(var N=0;N<D.length;N++)I="".concat(U+D[N]),(G=this.textWidth(I))<=g?U+=D[N]:g<G&&0<U.length&&(this._renderText(C,U.trim(),h,f-X,x,w),f+=C.textLeading(),U="".concat(D[N]))}this._renderText(C,U.trim(),h,f-X,x,w),f+=C.textLeading()}}else{var z=0;this._textBaseline===l.CENTER?z=(Z.length-1)*C.textLeading()/2:this._textBaseline===l.BOTTOM&&(z=(Z.length-1)*C.textLeading());for(var te=0;te<Z.length;te++)this._renderText(C,Z[te],h,f-z,x,w),f+=C.textLeading()}return C}},a.default.Renderer.prototype._applyDefaults=function(){return this},a.default.Renderer.prototype._isOpenType=function(){var d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return m(d)==="object"&&d.font&&d.font.supported},a.default.Renderer.prototype._updateTextMetrics=function(){var d,h,f,g,y,Z;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((d=document.createElement("span")).style.fontFamily=this._textFont,d.style.fontSize="".concat(this._textSize,"px"),d.innerHTML="ABCjgq|",(Z=document.createElement("div")).style.display="inline-block",Z.style.width="1px",Z.style.height="0px",g=((h=document.createElement("div")).appendChild(d),h.appendChild(Z),h.style.height="0px",h.style.overflow="hidden",document.body.appendChild(h),Z.style.verticalAlign="baseline",p(Z)),y=p(d),f=g[1]-y[1],g=(Z.style.verticalAlign="bottom",p(Z)),y=p(d),Z=g[1]-y[1]-f,document.body.removeChild(h),this._setProperty("_textAscent",f),this._setProperty("_textDescent",Z)),this};var u=a.default.Renderer;s.default=u},{"../core/constants":256,"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],271:[function(r,i,s){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(d)}function a(d){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(u=r("./main"))&&u.__esModule?u:{default:u},c=function(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var h=m();if(h&&h.has(d))return h.get(d);var f,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d){var Z;Object.prototype.hasOwnProperty.call(d,f)&&((Z=y?Object.getOwnPropertyDescriptor(d,f):null)&&(Z.get||Z.set)?Object.defineProperty(g,f,Z):g[f]=d[f])}return g.default=d,h&&h.set(d,g),g}(r("./constants"));function m(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,m=function(){return d},d)}r("./p5.Renderer");var p="rgba(0,0,0,0)",u=(l.default.Renderer2D=function(d,h,f){return l.default.Renderer.call(this,d,h,f),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},l.default.Renderer2D.prototype=Object.create(l.default.Renderer.prototype),l.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=c.BLEND,this._setFill(c._DEFAULT_FILL),this._setStroke(c._DEFAULT_STROKE),this.drawingContext.lineCap=c.ROUND,this.drawingContext.font="normal 12px sans-serif"},l.default.Renderer2D.prototype.resize=function(d,h){l.default.Renderer.prototype.resize.call(this,d,h),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},l.default.Renderer2D.prototype.background=function(){var d,h;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(d=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(d,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(d=this._getFill(),h=(h=this._pInst).color.apply(h,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(h.levels),h=h.toString(),this._setFill(h),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(d),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()},l.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},l.default.Renderer2D.prototype.fill=function(){var d=(d=this._pInst).color.apply(d,arguments);this._setFill(d.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",d.levels)},l.default.Renderer2D.prototype.stroke=function(){var d=(d=this._pInst).color.apply(d,arguments);this._setStroke(d.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",d.levels)},l.default.Renderer2D.prototype.erase=function(d,h){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,d=this._pInst.color(255,d).toString(),this.drawingContext.fillStyle=d,this._cachedStrokeStyle=this.drawingContext.strokeStyle,d=this._pInst.color(255,h).toString(),this.drawingContext.strokeStyle=d,h=this._cachedBlendMode,this.blendMode(c.REMOVE),this._cachedBlendMode=h,this._isErasing=!0)},l.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},l.default.Renderer2D.prototype.image=function(d,h,f,g,y,Z,I,G,R){d.gifProperties&&d._animateGif(this._pInst);try{var C=(C=this._tint&&d.canvas?this._getTintedImageCanvas(d):C)||d.canvas||d.elt,V=1;d.width&&0<d.width&&(V=C.width/d.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(C,V*h,V*f,V*g,V*y,Z,I,G,R),this._isErasing&&this._pInst.erase()}catch(x){if(x.name!=="NS_ERROR_NOT_AVAILABLE")throw x}},l.default.Renderer2D.prototype._getTintedImageCanvas=function(d){if(!d.canvas)return d;d.tintCanvas||(d.tintCanvas=document.createElement("canvas")),d.tintCanvas.width!==d.canvas.width&&(d.tintCanvas.width=d.canvas.width),d.tintCanvas.height!==d.canvas.height&&(d.tintCanvas.height=d.canvas.height);var h=d.tintCanvas.getContext("2d");return h.save(),h.clearRect(0,0,d.canvas.width,d.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(h.drawImage(d.canvas,0,0),h.globalCompositeOperation="luminosity",h.drawImage(d.canvas,0,0),h.globalCompositeOperation="color",h.drawImage(d.canvas,0,0),h.globalCompositeOperation="multiply",h.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),h.fillRect(0,0,d.canvas.width,d.canvas.height),h.globalCompositeOperation="destination-in"),h.globalAlpha=this._tint[3]/255,h.drawImage(d.canvas,0,0),h.restore(),d.tintCanvas},l.default.Renderer2D.prototype.blendMode=function(d){if(d===c.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(d!==c.BLEND&&d!==c.REMOVE&&d!==c.DARKEST&&d!==c.LIGHTEST&&d!==c.DIFFERENCE&&d!==c.MULTIPLY&&d!==c.EXCLUSION&&d!==c.SCREEN&&d!==c.REPLACE&&d!==c.OVERLAY&&d!==c.HARD_LIGHT&&d!==c.SOFT_LIGHT&&d!==c.DODGE&&d!==c.BURN&&d!==c.ADD)throw new Error("Mode ".concat(d," not recognized."));this._cachedBlendMode=d,this.drawingContext.globalCompositeOperation=d}},l.default.Renderer2D.prototype.blend=function(){for(var d=this.drawingContext.globalCompositeOperation,h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];var y=f[f.length-1],Z=Array.prototype.slice.call(f,0,f.length-1);this.drawingContext.globalCompositeOperation=y,l.default.prototype.copy.apply(this,Z),this.drawingContext.globalCompositeOperation=d},l.default.Renderer2D.prototype._getPixel=function(d,h){return d=this.drawingContext.getImageData(d,h,1,1).data,[d[0],d[1],d[2],d[3]]},l.default.Renderer2D.prototype.loadPixels=function(){var d=this._pixelsState,h=d._pixelDensity,f=this.width*h,h=this.height*h,f=this.drawingContext.getImageData(0,0,f,h);d._setProperty("imageData",f),d._setProperty("pixels",f.data)},l.default.Renderer2D.prototype.set=function(d,h,f){d=Math.floor(d),h=Math.floor(h);var g=this._pixelsState;if(f instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(g._pixelDensity,g._pixelDensity),this.drawingContext.clearRect(d,h,f.width,f.height),this.drawingContext.drawImage(f.canvas,d,h),this.drawingContext.restore();else{var y=0,Z=0,I=0,G=0,R=4*(h*g._pixelDensity*(this.width*g._pixelDensity)+d*g._pixelDensity);if(g.imageData||g.loadPixels.call(g),typeof f=="number")R<g.pixels.length&&(I=Z=y=f,G=255);else if(f instanceof Array){if(f.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");R<g.pixels.length&&(y=f[0],Z=f[1],I=f[2],G=f[3])}else f instanceof l.default.Color&&R<g.pixels.length&&(y=f.levels[0],Z=f.levels[1],I=f.levels[2],G=f.levels[3]);for(var C=0;C<g._pixelDensity;C++)for(var V=0;V<g._pixelDensity;V++)R=4*((h*g._pixelDensity+V)*this.width*g._pixelDensity+(d*g._pixelDensity+C)),g.pixels[R]=y,g.pixels[R+1]=Z,g.pixels[R+2]=I,g.pixels[R+3]=G}},l.default.Renderer2D.prototype.updatePixels=function(d,h,f,g){var y=this._pixelsState,Z=y._pixelDensity;d===void 0&&h===void 0&&f===void 0&&g===void 0&&(h=d=0,f=this.width,g=this.height),d*=Z,h*=Z,f*=Z,g*=Z,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=y.imageData),this.drawingContext.putImageData(y.imageData,d,h,0,0,f,g)},l.default.Renderer2D.prototype._acuteArcToBezier=function(d,h){var Z=h/2,f=Math.cos(Z),G=Math.sin(Z),g=1/Math.tan(Z),Z=d+Z,y=Math.cos(Z),Z=Math.sin(Z),I=(4-f)/3,G=G+(f-I)*g;return{ax:Math.cos(d).toFixed(7),ay:Math.sin(d).toFixed(7),bx:(I*y+G*Z).toFixed(7),by:(I*Z-G*y).toFixed(7),cx:(I*y-G*Z).toFixed(7),cy:(I*Z+G*y).toFixed(7),dx:Math.cos(d+h).toFixed(7),dy:Math.sin(d+h).toFixed(7)}},l.default.Renderer2D.prototype.arc=function(d,h,f,g,y,Z,I){var G,R=this.drawingContext,C=f/2,V=g/2,x=[];for(d+=C,h+=V;1e-5<=Z-y;)G=Math.min(Z-y,c.HALF_PI),x.push(this._acuteArcToBezier(y,G)),y+=G;return this._doFill&&(R.beginPath(),x.forEach(function(w,k){k===0&&R.moveTo(d+w.ax*C,h+w.ay*V),R.bezierCurveTo(d+w.bx*C,h+w.by*V,d+w.cx*C,h+w.cy*V,d+w.dx*C,h+w.dy*V)}),I!==c.PIE&&I!=null||R.lineTo(d,h),R.closePath(),R.fill()),this._doStroke&&(R.beginPath(),x.forEach(function(w,k){k===0&&R.moveTo(d+w.ax*C,h+w.ay*V),R.bezierCurveTo(d+w.bx*C,h+w.by*V,d+w.cx*C,h+w.cy*V,d+w.dx*C,h+w.dy*V)}),I===c.PIE?(R.lineTo(d,h),R.closePath()):I===c.CHORD&&R.closePath(),R.stroke()),this},l.default.Renderer2D.prototype.ellipse=function(x){var h=this.drawingContext,f=this._doFill,g=this._doStroke,y=parseFloat(x[0]),Z=parseFloat(x[1]),V=parseFloat(x[2]),x=parseFloat(x[3]);if(f&&!g){if(this._getFill()===p)return this}else if(!f&&g&&this._getStroke()===p)return this;var I=V/2*.5522847498,G=x/2*.5522847498,R=y+V,C=Z+x,V=y+V/2,x=Z+x/2;h.beginPath(),h.moveTo(y,x),h.bezierCurveTo(y,x-G,V-I,Z,V,Z),h.bezierCurveTo(V+I,Z,R,x-G,R,x),h.bezierCurveTo(R,x+G,V+I,C,V,C),h.bezierCurveTo(V-I,C,y,x+G,y,x),f&&h.fill(),g&&h.stroke()},l.default.Renderer2D.prototype.line=function(d,h,f,g){var y=this.drawingContext;return this._doStroke&&this._getStroke()!==p&&(y.beginPath(),y.moveTo(d,h),y.lineTo(f,g),y.stroke()),this},l.default.Renderer2D.prototype.point=function(d,h){var f,g,y=this.drawingContext;return!this._doStroke||this._getStroke()===p?this:(f=this._getStroke(),g=this._getFill(),this._setFill(f),y.beginPath(),y.arc(d,h,y.lineWidth/2,0,c.TWO_PI,!1),y.fill(),void this._setFill(g))},l.default.Renderer2D.prototype.quad=function(d,h,f,g,y,Z,I,G){var R=this.drawingContext,C=this._doFill,V=this._doStroke;if(C&&!V){if(this._getFill()===p)return this}else if(!C&&V&&this._getStroke()===p)return this;return R.beginPath(),R.moveTo(d,h),R.lineTo(f,g),R.lineTo(y,Z),R.lineTo(I,G),R.closePath(),C&&R.fill(),V&&R.stroke(),this},l.default.Renderer2D.prototype.rect=function(V){var h,f,g=V[0],y=V[1],Z=V[2],I=V[3],G=V[4],R=V[5],C=V[6],V=V[7],x=this.drawingContext,w=this._doFill,k=this._doStroke;if(w&&!k){if(this._getFill()===p)return this}else if(!w&&k&&this._getStroke()===p)return this;return x.beginPath(),G===void 0?x.rect(g,y,Z,I):(R===void 0&&(R=G),C===void 0&&(C=R),V===void 0&&(V=C),k=(w=Math.abs(Z))/2,f=(h=Math.abs(I))/2,h<2*(G=w<2*G?k:G)&&(G=f),h<2*(R=w<2*R?k:R)&&(R=f),h<2*(C=w<2*C?k:C)&&(C=f),h<2*(V=w<2*V?k:V)&&(V=f),x.beginPath(),x.moveTo(g+G,y),x.arcTo(g+Z,y,g+Z,y+I,R),x.arcTo(g+Z,y+I,g,y+I,C),x.arcTo(g,y+I,g,y,V),x.arcTo(g,y,g+Z,y,G),x.closePath()),this._doFill&&x.fill(),this._doStroke&&x.stroke(),this},l.default.Renderer2D.prototype.triangle=function(C){var h=this.drawingContext,f=this._doFill,g=this._doStroke,y=C[0],Z=C[1],I=C[2],G=C[3],R=C[4],C=C[5];if(f&&!g){if(this._getFill()===p)return this}else if(!f&&g&&this._getStroke()===p)return this;h.beginPath(),h.moveTo(y,Z),h.lineTo(I,G),h.lineTo(R,C),h.closePath(),f&&h.fill(),g&&h.stroke()},l.default.Renderer2D.prototype.endShape=function(d,h,f,g,y,Z,I){if(h.length!==0&&(this._doStroke||this._doFill)){var G,R,C,V=d===c.CLOSE,x=(V&&!Z&&h.push(h[0]),h.length);if(!f||I!==c.POLYGON&&I!==null)if(!g||I!==c.POLYGON&&I!==null)if(!y||I!==c.POLYGON&&I!==null)if(I===c.POINTS)for(R=0;R<x;R++)G=h[R],this._doStroke&&this._pInst.stroke(G[6]),this._pInst.point(G[0],G[1]);else if(I===c.LINES)for(R=0;R+1<x;R+=2)G=h[R],this._doStroke&&this._pInst.stroke(h[R+1][6]),this._pInst.line(G[0],G[1],h[R+1][0],h[R+1][1]);else if(I===c.TRIANGLES)for(R=0;R+2<x;R+=3)G=h[R],this.drawingContext.beginPath(),this.drawingContext.moveTo(G[0],G[1]),this.drawingContext.lineTo(h[R+1][0],h[R+1][1]),this.drawingContext.lineTo(h[R+2][0],h[R+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(h[R+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(h[R+2][6]),this.drawingContext.stroke());else if(I===c.TRIANGLE_STRIP)for(R=0;R+1<x;R++)G=h[R],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[R+1][0],h[R+1][1]),this.drawingContext.lineTo(G[0],G[1]),this._doStroke&&this._pInst.stroke(h[R+1][6]),this._doFill&&this._pInst.fill(h[R+1][5]),R+2<x&&(this.drawingContext.lineTo(h[R+2][0],h[R+2][1]),this._doStroke&&this._pInst.stroke(h[R+2][6]),this._doFill&&this._pInst.fill(h[R+2][5])),this._doFillStrokeClose(V);else if(I===c.TRIANGLE_FAN){if(2<x){for(this.drawingContext.beginPath(),R=2;R<x;R++)G=h[R],this.drawingContext.moveTo(h[0][0],h[0][1]),this.drawingContext.lineTo(h[R-1][0],h[R-1][1]),this.drawingContext.lineTo(G[0],G[1]),this.drawingContext.lineTo(h[0][0],h[0][1]),R<x-1&&(this._doFill&&G[5]!==h[R+1][5]||this._doStroke&&G[6]!==h[R+1][6])&&(this._doFill&&(this._pInst.fill(G[5]),this.drawingContext.fill(),this._pInst.fill(h[R+1][5])),this._doStroke&&(this._pInst.stroke(G[6]),this.drawingContext.stroke(),this._pInst.stroke(h[R+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(V)}}else if(I===c.QUADS)for(R=0;R+3<x;R+=4){for(G=h[R],this.drawingContext.beginPath(),this.drawingContext.moveTo(G[0],G[1]),C=1;C<4;C++)this.drawingContext.lineTo(h[R+C][0],h[R+C][1]);this.drawingContext.lineTo(G[0],G[1]),this._doFill&&this._pInst.fill(h[R+3][5]),this._doStroke&&this._pInst.stroke(h[R+3][6]),this._doFillStrokeClose(V)}else if(I===c.QUAD_STRIP){if(3<x)for(R=0;R+1<x;R+=2)G=h[R],this.drawingContext.beginPath(),R+3<x?(this.drawingContext.moveTo(h[R+2][0],h[R+2][1]),this.drawingContext.lineTo(G[0],G[1]),this.drawingContext.lineTo(h[R+1][0],h[R+1][1]),this.drawingContext.lineTo(h[R+3][0],h[R+3][1]),this._doFill&&this._pInst.fill(h[R+3][5]),this._doStroke&&this._pInst.stroke(h[R+3][6])):(this.drawingContext.moveTo(G[0],G[1]),this.drawingContext.lineTo(h[R+1][0],h[R+1][1])),this._doFillStrokeClose(V)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0][0],h[0][1]),R=1;R<x;R++)(G=h[R]).isVert&&(G.moveTo?this.drawingContext.moveTo(G[0],G[1]):this.drawingContext.lineTo(G[0],G[1]));this._doFillStrokeClose(V)}else{for(this.drawingContext.beginPath(),R=0;R<x;R++)h[R].isVert?h[R].moveTo?this.drawingContext.moveTo(h[R][0],h[R][1]):this.drawingContext.lineTo(h[R][0],h[R][1]):this.drawingContext.quadraticCurveTo(h[R][0],h[R][1],h[R][2],h[R][3]);this._doFillStrokeClose(V)}else{for(this.drawingContext.beginPath(),R=0;R<x;R++)h[R].isVert?h[R].moveTo?this.drawingContext.moveTo(h[R][0],h[R][1]):this.drawingContext.lineTo(h[R][0],h[R][1]):this.drawingContext.bezierCurveTo(h[R][0],h[R][1],h[R][2],h[R][3],h[R][4],h[R][5]);this._doFillStrokeClose(V)}else if(3<x){var w=[],k=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(h[1][0],h[1][1]),R=1;R+2<x;R++)G=h[R],w[0]=[G[0],G[1]],w[1]=[G[0]+(k*h[R+1][0]-k*h[R-1][0])/6,G[1]+(k*h[R+1][1]-k*h[R-1][1])/6],w[2]=[h[R+1][0]+(k*h[R][0]-k*h[R+2][0])/6,h[R+1][1]+(k*h[R][1]-k*h[R+2][1])/6],w[3]=[h[R+1][0],h[R+1][1]],this.drawingContext.bezierCurveTo(w[1][0],w[1][1],w[2][0],w[2][1],w[3][0],w[3][1]);V&&this.drawingContext.lineTo(h[R+1][0],h[R+1][1]),this._doFillStrokeClose(V)}Z=y=g=f=!1,V&&h.pop()}return this},l.default.Renderer2D.prototype.strokeCap=function(d){return d!==c.ROUND&&d!==c.SQUARE&&d!==c.PROJECT||(this.drawingContext.lineCap=d),this},l.default.Renderer2D.prototype.strokeJoin=function(d){return d!==c.ROUND&&d!==c.BEVEL&&d!==c.MITER||(this.drawingContext.lineJoin=d),this},l.default.Renderer2D.prototype.strokeWeight=function(d){return this.drawingContext.lineWidth=d===void 0||d===0?1e-4:d,this},l.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},l.default.Renderer2D.prototype._setFill=function(d){d!==this._cachedFillStyle&&(this.drawingContext.fillStyle=d,this._cachedFillStyle=d)},l.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},l.default.Renderer2D.prototype._setStroke=function(d){d!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=d,this._cachedStrokeStyle=d)},l.default.Renderer2D.prototype.bezier=function(d,h,f,g,y,Z,I,G){return this._pInst.beginShape(),this._pInst.vertex(d,h),this._pInst.bezierVertex(f,g,y,Z,I,G),this._pInst.endShape(),this},l.default.Renderer2D.prototype.curve=function(d,h,f,g,y,Z,I,G){return this._pInst.beginShape(),this._pInst.curveVertex(d,h),this._pInst.curveVertex(f,g),this._pInst.curveVertex(y,Z),this._pInst.curveVertex(I,G),this._pInst.endShape(),this},l.default.Renderer2D.prototype._doFillStrokeClose=function(d){d&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},l.default.Renderer2D.prototype.applyMatrix=function(d,h,f,g,y,Z){this.drawingContext.transform(d,h,f,g,y,Z)},l.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},l.default.Renderer2D.prototype.rotate=function(d){this.drawingContext.rotate(d)},l.default.Renderer2D.prototype.scale=function(d,h){return this.drawingContext.scale(d,h),this},l.default.Renderer2D.prototype.translate=function(d,h){return d instanceof l.default.Vector&&(h=d.y,d=d.x),this.drawingContext.translate(d,h),this},l.default.Renderer2D.prototype.text=function(d,h,f,I,y){I!==void 0&&this.drawingContext.textBaseline===c.BASELINE&&(Z=!0,this.drawingContext.textBaseline=c.TOP);var Z,I=l.default.Renderer.prototype.text.apply(this,arguments);return Z&&(this.drawingContext.textBaseline=c.BASELINE),I},l.default.Renderer2D.prototype._renderText=function(d,h,f,g,y,Z){if(!(g<Z||y<=g))return d.push(),this._isOpenType()?this._textFont._renderPath(h,f,g,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(h,f,g),this._doFill&&(this._fillSet||this._setFill(c._DEFAULT_TEXT_FILL),this.drawingContext.fillText(h,f,g))),d.pop(),d},l.default.Renderer2D.prototype.textWidth=function(d){return this._isOpenType()?this._textFont._textWidth(d,this._textSize):this.drawingContext.measureText(d).width},l.default.Renderer2D.prototype._applyTextProperties=function(){var d,h=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),d=this._textFont,this._isOpenType()&&(d=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(d||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===c.CENTER?this.drawingContext.textBaseline=c._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,h},l.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),l.default.Renderer.prototype.push.apply(this)},l.default.Renderer2D.prototype.pop=function(d){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,l.default.Renderer.prototype.pop.call(this,d)},l.default.Renderer2D);s.default=u},{"./constants":256,"./main":267,"./p5.Renderer":270,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],272:[function(r,i,s){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var o=(r=r("./main"))&&r.__esModule?r:{default:r};o.default.prototype._promisePreloads=[];function a(){return{}}var l=!(o.default.prototype.registerPromisePreload=function(c){o.default.prototype._promisePreloads.push(c)});o.default.prototype._setupPromisePreloads=function(){var c=!0,m=!1,p=void 0;try{for(var u,d=this._promisePreloads[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var h=u.value,f=this,g=h.method,y=h.addCallbacks,Z=h.legacyPreloadSetup,I=h.target||this,G=I[g].bind(I);if(I===o.default.prototype){if(l)continue;f=null,G=I[g]}I[g]=this._wrapPromisePreload(f,G,y),Z&&(I[Z.method]=this._legacyPreloadGenerator(f,Z,I[g]))}}catch(R){m=!0,p=R}finally{try{c||d.return==null||d.return()}finally{if(m)throw p}}l=!0},o.default.prototype._wrapPromisePreload=function(c,m,p){var u=function(){for(var d=this,h=(this._incrementPreload(),null),f=null,g=arguments.length,y=new Array(g),Z=0;Z<g;Z++)y[Z]=arguments[Z];if(p)for(var I=y.length-1;0<=I&&!f&&typeof y[I]=="function";I--)f=h,h=y.pop();var G=Promise.resolve(m.apply(this,y));return h&&G.then(h),f&&G.catch(f),G.then(function(){return d._decrementPreload()}),G};return u=c?u.bind(c):u},o.default.prototype._legacyPreloadGenerator=function(c,d,p){var u=d.createBaseObject||a,d=function(){var h=this,f=(this._incrementPreload(),u.apply(this,arguments));return p.apply(this,arguments).then(function(g){Object.assign(f,g),h._decrementPreload()}),f};return d=c?d.bind(c):d}},{"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],273:[function(r,i,s){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(u=r("./main"))&&u.__esModule?u:{default:u},l=function(d){if(d&&d.__esModule)return d;if(d===null||m(d)!=="object"&&typeof d!="function")return{default:d};var h=c();if(h&&h.has(d))return h.get(d);var f,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d){var Z;Object.prototype.hasOwnProperty.call(d,f)&&((Z=y?Object.getOwnPropertyDescriptor(d,f):null)&&(Z.get||Z.set)?Object.defineProperty(g,f,Z):g[f]=d[f])}return g.default=d,h&&h.set(d,g),g}(r("./constants"));function c(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,c=function(){return d},d)}function m(d){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(d)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var p="defaultCanvas0",u=(a.default.prototype.createCanvas=function(d,h,I){a.default._validateParameters("createCanvas",arguments);var g,y,Z,I=I||l.P2D;if(I===l.WEBGL)(y=document.getElementById(p))&&(y.parentNode.removeChild(y),g=this._renderer,this._elements=this._elements.filter(function(R){return R!==g})),(y=document.createElement("canvas")).id=p,y.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)y=this.canvas;else{y=document.createElement("canvas");for(var G=0;document.getElementById("defaultCanvas".concat(G));)G++;p="defaultCanvas".concat(G),y.id=p,y.classList.add("p5Canvas")}return this._setupDone||(y.dataset.hidden=!0,y.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(Z=document.createElement("main"),document.body.appendChild(Z)),document.getElementsByTagName("main")[0])).appendChild(y),I===l.WEBGL?(this._setProperty("_renderer",new a.default.RendererGL(y,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new a.default.Renderer2D(y,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(d,h),this._renderer._applyDefaults(),this._renderer},a.default.prototype.resizeCanvas=function(d,h,f){if(a.default._validateParameters("resizeCanvas",arguments),this._renderer){var g,y,Z={};for(g in this.drawingContext){var I=this.drawingContext[g];m(I)!=="object"&&typeof I!="function"&&(Z[g]=I)}for(y in this._renderer.resize(d,h),this.width=d,this.height=h,Z)try{this.drawingContext[y]=Z[y]}catch{}f||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},a.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},a.default.prototype.createGraphics=function(d,h,f){return a.default._validateParameters("createGraphics",arguments),new a.default.Graphics(d,h,f,this)},a.default.prototype.blendMode=function(d){a.default._validateParameters("blendMode",arguments),d===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),d=l.BLEND),this._renderer.blendMode(d)},a.default);s.default=u},{"../webgl/p5.RendererGL":321,"./constants":256,"./main":267,"./p5.Graphics":269,"./p5.Renderer2D":271,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],274:[function(r,i,s){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(d)}function a(d){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(r("../main")),c=function(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var h=p();if(h&&h.has(d))return h.get(d);var f,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d){var Z;Object.prototype.hasOwnProperty.call(d,f)&&((Z=y?Object.getOwnPropertyDescriptor(d,f):null)&&(Z.get||Z.set)?Object.defineProperty(g,f,Z):g[f]=d[f])}return g.default=d,h&&h.set(d,g),g}(r("../constants")),m=u(r("../helpers"));function p(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,p=function(){return d},d)}function u(d){return d&&d.__esModule?d:{default:d}}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(d,h,f,g,y){var Z;return d-=c.TWO_PI*Math.floor(d/c.TWO_PI),h-=c.TWO_PI*Math.floor(h/c.TWO_PI),Z=Math.min(Math.abs(d-h),c.TWO_PI-Math.abs(d-h)),y&&(d=d<=c.HALF_PI?Math.atan(f/g*Math.tan(d)):d>c.HALF_PI&&d<=3*c.HALF_PI?Math.atan(f/g*Math.tan(d))+c.PI:Math.atan(f/g*Math.tan(d))+c.TWO_PI,h=h<=c.HALF_PI?Math.atan(f/g*Math.tan(h)):h>c.HALF_PI&&h<=3*c.HALF_PI?Math.atan(f/g*Math.tan(h))+c.PI:Math.atan(f/g*Math.tan(h))+c.TWO_PI),h<d&&(h+=c.TWO_PI),{start:d,stop:h,correspondToSamePoint:Z<1e-5}},l.default.prototype.arc=function(d,h,f,g,y,Z,I,G){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&y!==Z&&(y=this._toRadians(y),Z=this._toRadians(Z),f=Math.abs(f),g=Math.abs(g),d=m.default.modeAdjust(d,h,f,g,this._renderer._ellipseMode),(h=this._normalizeArcAngles(y,Z,d.w,d.h,!0)).correspondToSamePoint?this._renderer.ellipse([d.x,d.y,d.w,d.h,G]):(this._renderer.arc(d.x,d.y,d.w,d.h,h.start,h.stop,I,G),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[d.x,d.y,d.w,d.h,h.start,h.stop,I]))),this},l.default.prototype.ellipse=function(d,h,f,g,y){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){l.default._validateParameters("circle",arguments);var d=Array.prototype.slice.call(arguments,0,2);return d.push(arguments[2]),d.push(arguments[2]),this._renderEllipse.apply(this,d)},l.default.prototype._renderEllipse=function(d,h,f,g,y){return(this._renderer._doStroke||this._renderer._doFill)&&(f<0&&(f=Math.abs(f)),g===void 0?g=f:g<0&&(g=Math.abs(g)),d=m.default.modeAdjust(d,h,f,g,this._renderer._ellipseMode),this._renderer.ellipse([d.x,d.y,d.w,d.h,y]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[d.x,d.y,d.w,d.h])),this},l.default.prototype.line=function(){for(var d,h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return l.default._validateParameters("line",f),this._renderer._doStroke&&(d=this._renderer).line.apply(d,f),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",f),this},l.default.prototype.point=function(){for(var d,h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return l.default._validateParameters("point",f),this._renderer._doStroke&&(f.length===1&&f[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,f[0].x,f[0].y,f[0].z):((d=this._renderer).point.apply(d,f),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",f))),this},l.default.prototype.quad=function(){for(var d,h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return l.default._validateParameters("quad",f),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&f.length<=12?this._renderer.quad.call(this._renderer,f[0],f[1],0,f[2],f[3],0,f[4],f[5],0,f[6],f[7],0,f[8],f[9]):((d=this._renderer).quad.apply(d,f),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",f))),this},l.default.prototype.rect=function(){return l.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},l.default.prototype.square=function(d,h,f,g,y,Z,I){return l.default._validateParameters("square",arguments),this._renderRect.call(this,d,h,f,f,g,y,Z,I)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var d=m.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),h=[d.x,d.y,d.w,d.h],f=4;f<arguments.length;f++)h[f]=arguments[f];this._renderer.rect(h),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[d.x,d.y,d.w,d.h])}return this},l.default.prototype.triangle=function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return l.default._validateParameters("triangle",h),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(h),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",h),this},r=l.default,s.default=r},{"../constants":256,"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../helpers":263,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],275:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("../main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("../constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}l.default.prototype.ellipseMode=function(u){return l.default._validateParameters("ellipseMode",arguments),u!==c.CORNER&&u!==c.CORNERS&&u!==c.RADIUS&&u!==c.CENTER||(this._renderer._ellipseMode=u),this},l.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},l.default.prototype.rectMode=function(u){return l.default._validateParameters("rectMode",arguments),u!==c.CORNER&&u!==c.CORNERS&&u!==c.RADIUS&&u!==c.CENTER||(this._renderer._rectMode=u),this},l.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},l.default.prototype.strokeCap=function(u){return l.default._validateParameters("strokeCap",arguments),u!==c.ROUND&&u!==c.SQUARE&&u!==c.PROJECT||this._renderer.strokeCap(u),this},l.default.prototype.strokeJoin=function(u){return l.default._validateParameters("strokeJoin",arguments),u!==c.ROUND&&u!==c.BEVEL&&u!==c.MITER||this._renderer.strokeJoin(u),this},l.default.prototype.strokeWeight=function(u){return l.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(u),this};var p=l.default;s.default=p},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],276:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(a=r("../main"))&&a.__esModule?a:{default:a};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var l,c=arguments.length,m=new Array(c),p=0;p<c;p++)m[p]=arguments[p];return o.default._validateParameters("bezier",m),(this._renderer._doStroke||this._renderer._doFill)&&(l=this._renderer).bezier.apply(l,m),this},o.default.prototype.bezierDetail=function(l){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=l,this},o.default.prototype.bezierPoint=function(l,c,m,p,u){o.default._validateParameters("bezierPoint",arguments);var d=1-u;return Math.pow(d,3)*l+3*Math.pow(d,2)*u*c+3*d*Math.pow(u,2)*m+Math.pow(u,3)*p},o.default.prototype.bezierTangent=function(l,c,m,p,u){o.default._validateParameters("bezierTangent",arguments);var d=1-u;return 3*p*Math.pow(u,2)-3*m*Math.pow(u,2)+6*m*d*u-6*c*d*u+3*c*Math.pow(d,2)-3*l*Math.pow(d,2)},o.default.prototype.curve=function(){for(var l,c=arguments.length,m=new Array(c),p=0;p<c;p++)m[p]=arguments[p];return o.default._validateParameters("curve",m),this._renderer._doStroke&&(l=this._renderer).curve.apply(l,m),this},o.default.prototype.curveDetail=function(l){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=l<3?3:l,this},o.default.prototype.curveTightness=function(l){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=l,this},o.default.prototype.curvePoint=function(l,c,m,p,u){o.default._validateParameters("curvePoint",arguments);var d=u*u*u,h=u*u;return l*(-.5*d+h-.5*u)+c*(1.5*d-2.5*h+1)+m*(-1.5*d+2*h+.5*u)+p*(.5*d-.5*h)},o.default.prototype.curveTangent=function(l,c,m,p,u){o.default._validateParameters("curveTangent",arguments);var d=u*u;return l*(-3*d/2+2*u-.5)+c*(9*d/2-5*u)+m*(-9*d/2+4*u+.5)+p*(3*d/2-u)};var a=o.default;s.default=a},{"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../main":267}],277:[function(r,i,s){function o(G){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(G)}function a(G){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(R){return o(R)}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":o(R)})(G)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(I=r("../main"))&&I.__esModule?I:{default:I},c=function(G){if(G&&G.__esModule)return G;if(G===null||a(G)!=="object"&&typeof G!="function")return{default:G};var R=m();if(R&&R.has(G))return R.get(G);var C,V={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in G){var w;Object.prototype.hasOwnProperty.call(G,C)&&((w=x?Object.getOwnPropertyDescriptor(G,C):null)&&(w.get||w.set)?Object.defineProperty(V,C,w):V[C]=G[C])}return V.default=G,R&&R.set(G,V),V}(r("../constants"));function m(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,m=function(){return G},G)}var p=null,u=[],d=[],h=!1,f=!1,g=!1,y=!1,Z=!0,I=(l.default.prototype.beginContour=function(){return d=[],y=!0,this},l.default.prototype.beginShape=function(G){var R;return l.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(R=this._renderer).beginShape.apply(R,arguments):(p=G===c.POINTS||G===c.LINES||G===c.TRIANGLES||G===c.TRIANGLE_FAN||G===c.TRIANGLE_STRIP||G===c.QUADS||G===c.QUAD_STRIP?G:null,u=[],d=[]),this},l.default.prototype.bezierVertex=function(){for(var G,R=arguments.length,C=new Array(R),V=0;V<R;V++)C[V]=arguments[V];if(l.default._validateParameters("bezierVertex",C),this._renderer.isP3D)(G=this._renderer).bezierVertex.apply(G,C);else if(u.length===0)l.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{h=!0;for(var x=[],w=0;w<C.length;w++)x[w]=C[w];x.isVert=!1,(y?d:u).push(x)}return this},l.default.prototype.curveVertex=function(){for(var G,R=arguments.length,C=new Array(R),V=0;V<R;V++)C[V]=arguments[V];return l.default._validateParameters("curveVertex",C),this._renderer.isP3D?(G=this._renderer).curveVertex.apply(G,C):(f=!0,this.vertex(C[0],C[1])),this},l.default.prototype.endContour=function(){var G=d[0].slice();G.isVert=d[0].isVert,G.moveTo=!1,d.push(G),Z&&(u.push(u[0]),Z=!1);for(var R=0;R<d.length;R++)u.push(d[R]);return this},l.default.prototype.endShape=function(G){if(l.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(G,f,h,g,y,p);else{if(u.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var R=G===c.CLOSE;R&&!y&&u.push(u[0]),this._renderer.endShape(G,u,f,h,g,y,p),Z=!(y=g=h=f=!1),R&&u.pop()}return this},l.default.prototype.quadraticVertex=function(){for(var G,R=arguments.length,C=new Array(R),V=0;V<R;V++)C[V]=arguments[V];if(l.default._validateParameters("quadraticVertex",C),this._renderer.isP3D)(G=this._renderer).quadraticVertex.apply(G,C);else{if(this._contourInited)return(G={}).x=C[0],G.y=C[1],G.x3=C[2],G.y3=C[3],G.type=c.QUADRATIC,this._contourVertices.push(G),this;if(0<u.length){g=!0;for(var x=[],w=0;w<C.length;w++)x[w]=C[w];x.isVert=!1,(y?d:u).push(x)}else l.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},l.default.prototype.vertex=function(G,R,C,V,x){var w;return this._renderer.isP3D?(w=this._renderer).vertex.apply(w,arguments):((w=[]).isVert=!0,w[0]=G,w[1]=R,w[2]=0,w[3]=0,w[4]=0,w[5]=this._renderer._getFill(),w[6]=this._renderer._getStroke(),C&&(w.moveTo=C),(y?(d.length===0&&(w.moveTo=!0),d):u).push(w)),this},l.default.prototype.normal=function(G,R,C){var V;return this._assert3d("normal"),l.default._validateParameters("normal",arguments),(V=this._renderer).normal.apply(V,arguments),this},l.default);s.default=I},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],278:[function(r,i,s){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(p)}function a(p){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(u){return o(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":o(u)})(p)}var l,c,m;r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(p,u){window.setTimeout(p,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(l=Object.keys,r=Object.defineProperty,c=typeof Symbol=="function"&&a(Symbol())==="symbol",m=Object.prototype.propertyIsEnumerable,r(Object,"assign",{value:function(p,u){if(p==null)throw new TypeError("target must be an object");for(var d,h,f,g=Object(p),y=1;y<arguments.length;++y)for(d=Object(arguments[y]),f=l(d),c&&Object.getOwnPropertySymbols&&f.push.apply(f,Object.getOwnPropertySymbols(d).filter(function(Z){return function(I){return m.call(Z,I)}}(d))),h=0;h<f.length;++h)g[f[h]]=d[f[h]];return g},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":230}],279:[function(r,i,s){r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var o=this._styles.pop();o?(this._renderer.pop(o.renderer),Object.assign(this,o.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(o){if(!this._inUserDraw&&this._setupDone){var a=parseInt(o),l=((isNaN(a)||a<1)&&(a=1),this._isGlobal?window:this);if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var c=function(p){p.call(l)},m=0;m<a;m++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),l._registeredMethods.pre.forEach(c),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}l._registeredMethods.post.forEach(c)}}}},r=r.default,s.default=r},{"./main":267,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":172,"core-js/modules/web.dom-collections.for-each":229}],280:[function(r,i,s){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("./main"))&&r.__esModule?r:{default:r};function a(l){return function(c){if(Array.isArray(c)){for(var m=0,p=new Array(c.length);m<c.length;m++)p[m]=c[m];return p}}(l)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var l=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||l?(l=this._renderer).applyMatrix.apply(l,a(arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(l,c){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(l),c),this},o.default.prototype.rotateX=function(l){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(l)),this},o.default.prototype.rotateY=function(l){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(l)),this},o.default.prototype.rotateZ=function(l){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(l)),this},o.default.prototype.scale=function(l,c,m){var p;return o.default._validateParameters("scale",arguments),l instanceof o.default.Vector?(l=(p=l).x,c=p.y,m=p.z):l instanceof Array&&(l=(p=l)[0],c=p[1],m=p[2]||1),isNaN(c)?c=m=l:isNaN(m)&&(m=1),this._renderer.scale.call(this._renderer,l,c,m),this},o.default.prototype.shearX=function(l){return o.default._validateParameters("shearX",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},o.default.prototype.shearY=function(l){return o.default._validateParameters("shearY",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},o.default.prototype.translate=function(l,c,m){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(l,c,m):this._renderer.translate(l,c),this},r=o.default,s.default=r},{"./main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230}],281:[function(r,i,s){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(m){return function(p){if(Array.isArray(p)){for(var u=0,d=new Array(p.length);u<p.length;u++)d[u]=p[u];return d}}(m)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(m){return(c=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(m)}a.default.prototype.storeItem=function(m,p){typeof m!="string"&&console.log("The argument that you passed to storeItem() - ".concat(m," is not a string.")),m.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(m," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var u=c(p);switch(u){case"number":case"boolean":p=p.toString();break;case"object":p instanceof a.default.Color?u="p5.Color":p instanceof a.default.Vector&&(u="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(m,p),m="".concat(m,"p5TypeID"),localStorage.setItem(m,u)},a.default.prototype.getItem=function(m){var p=localStorage.getItem(m),u=localStorage.getItem("".concat(m,"p5TypeID"));if(u===void 0)console.log("Unable to determine type of item stored under ".concat(m,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(u){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,l(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,l(p))}return p},a.default.prototype.clearStorage=function(){localStorage.clear()},a.default.prototype.removeItem=function(m){typeof m!="string"&&console.log("The argument that you passed to removeItem() - ".concat(m," is not a string.")),localStorage.removeItem(m),localStorage.removeItem("".concat(m,"p5TypeID"))}},{"../core/main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],282:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.createStringDict=function(a,l){return o.default._validateParameters("createStringDict",arguments),new o.default.StringDict(a,l)},o.default.prototype.createNumberDict=function(a,l){return o.default._validateParameters("createNumberDict",arguments),new o.default.NumberDict(a,l)},o.default.TypedDict=function(a,l){return a instanceof Object?this.data=a:(this.data={},this.data[a]=l),this},o.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},o.default.TypedDict.prototype.hasKey=function(a){return this.data.hasOwnProperty(a)},o.default.TypedDict.prototype.get=function(a){if(this.data.hasOwnProperty(a))return this.data[a];console.log("".concat(a," does not exist in this Dictionary"))},o.default.TypedDict.prototype.set=function(a,l){this._validate(l)?this.data[a]=l:console.log("Those values dont work for this dictionary type.")},o.default.TypedDict.prototype._addObj=function(a){for(var l in a)this.set(l,a[l])},o.default.TypedDict.prototype.create=function(a,l){a instanceof Object&&l===void 0?this._addObj(a):a!==void 0?this.set(a,l):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},o.default.TypedDict.prototype.clear=function(){this.data={}},o.default.TypedDict.prototype.remove=function(a){if(!this.data.hasOwnProperty(a))throw new Error("".concat(a," does not exist in this Dictionary"));delete this.data[a]},o.default.TypedDict.prototype.print=function(){for(var a in this.data)console.log("key:".concat(a," value:").concat(this.data[a]))},o.default.TypedDict.prototype.saveTable=function(a){var l,c="";for(l in this.data)c+="".concat(l,",").concat(this.data[l],`
`);var m=new Blob([c],{type:"text/csv"});o.default.prototype.downloadFile(m,a||"mycsv","csv")},o.default.TypedDict.prototype.saveJSON=function(a,l){o.default.prototype.saveJSON(this.data,a,l)},o.default.TypedDict.prototype._validate=function(a){return!0},o.default.StringDict=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];o.default.TypedDict.apply(this,l)},o.default.StringDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.StringDict.prototype._validate=function(a){return typeof a=="string"},o.default.NumberDict=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];o.default.TypedDict.apply(this,l)},o.default.NumberDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.NumberDict.prototype._validate=function(a){return typeof a=="number"},o.default.NumberDict.prototype.add=function(a,l){this.data.hasOwnProperty(a)?this.data[a]+=l:console.log("The key - ".concat(a," does not exist in this dictionary."))},o.default.NumberDict.prototype.sub=function(a,l){this.add(a,-l)},o.default.NumberDict.prototype.mult=function(a,l){this.data.hasOwnProperty(a)?this.data[a]*=l:console.log("The key - ".concat(a," does not exist in this dictionary."))},o.default.NumberDict.prototype.div=function(a,l){this.data.hasOwnProperty(a)?this.data[a]/=l:console.log("The key - ".concat(a," does not exist in this dictionary."))},o.default.NumberDict.prototype._valueTest=function(a){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var l,c=this.data[Object.keys(this.data)[0]];for(l in this.data)this.data[l]*a<c*a&&(c=this.data[l]);return c},o.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},o.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},o.default.NumberDict.prototype._keyTest=function(a){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var l=Object.keys(this.data)[0],c=1;c<Object.keys(this.data).length;c++)Object.keys(this.data)[c]*a<l*a&&(l=Object.keys(this.data)[c]);return l},o.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},o.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)},r=o.default.TypedDict,s.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],283:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(u){return(l=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}function c(u,d,h){return(d._userNode||document.body).appendChild(u),h=new(h?a.default.MediaElement:a.default.Element)(u,d),d._elements.push(h),h}function m(u,Z,h,f){var g=document.createElement(Z),y=(typeof(h=h||"")=="string"&&(h=[h]),!0),Z=!1,I=void 0;try{for(var G,R=h[Symbol.iterator]();!(y=(G=R.next()).done);y=!0){var C=G.value,V=document.createElement("source");V.setAttribute("src",C),g.appendChild(V)}}catch(w){Z=!0,I=w}finally{try{y||R.return==null||R.return()}finally{if(Z)throw I}}typeof f=="function"&&g.addEventListener("canplaythrough",function w(){f(),g.removeEventListener("canplaythrough",w)});var x=c(g,u,!0);return x.loadedmetadata=!1,g.addEventListener("loadedmetadata",function(){x.width=g.videoWidth,x.height=g.videoHeight,x.elt.width===0&&(x.elt.width=g.videoWidth),x.elt.height===0&&(x.elt.height=g.videoHeight),x.presetPlaybackRate&&(x.elt.playbackRate=x.presetPlaybackRate,delete x.presetPlaybackRate),x.loadedmetadata=!0}),x}a.default.prototype.select=function(u,d){return a.default._validateParameters("select",arguments),d=this._getContainer(d).querySelector(u),d?this._wrapElement(d):null},a.default.prototype.selectAll=function(u,d){a.default._validateParameters("selectAll",arguments);var h=[],f=this._getContainer(d).querySelectorAll(u);if(f)for(var g=0;g<f.length;g++){var y=this._wrapElement(f[g]);h.push(y)}return h},a.default.prototype._getContainer=function(u){var d=document;return typeof u=="string"?d=document.querySelector(u)||document:u instanceof a.default.Element?d=u.elt:u instanceof HTMLElement&&(d=u),d},a.default.prototype._wrapElement=function(u){var d,h=Array.prototype.slice.call(u.children);return u.tagName==="INPUT"&&u.type==="checkbox"?((d=new a.default.Element(u,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},d):u.tagName==="VIDEO"||u.tagName==="AUDIO"?new a.default.MediaElement(u,this):u.tagName==="SELECT"?this.createSelect(new a.default.Element(u,this)):0<h.length&&h.every(function(f){return f.tagName==="INPUT"||f.tagName==="LABEL"})?this.createRadio(new a.default.Element(u,this)):new a.default.Element(u,this)},a.default.prototype.removeElements=function(u){a.default._validateParameters("removeElements",arguments),this._elements.filter(function(d){return!(d.elt instanceof HTMLCanvasElement)}).map(function(d){return d.remove()})},a.default.Element.prototype.changed=function(u){return a.default.Element._adjustListener("change",u,this),this},a.default.Element.prototype.input=function(u){return a.default.Element._adjustListener("input",u,this),this},a.default.prototype.createDiv=function(){var u=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",d=document.createElement("div");return d.innerHTML=u,c(d,this)},a.default.prototype.createP=function(){var u=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",d=document.createElement("p");return d.innerHTML=u,c(d,this)},a.default.prototype.createSpan=function(){var u=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",d=document.createElement("span");return d.innerHTML=u,c(d,this)},a.default.prototype.createImg=function(){a.default._validateParameters("createImg",arguments);var u,d=document.createElement("img"),h=arguments;return 1<h.length&&typeof h[1]=="string"&&(d.alt=h[1]),2<h.length&&typeof h[2]=="string"&&(d.crossOrigin=h[2]),d.src=h[0],u=c(d,this),d.addEventListener("load",function(){u.width=d.offsetWidth||d.width,u.height=d.offsetHeight||d.height;var f=h[h.length-1];typeof f=="function"&&f(u)}),u},a.default.prototype.createA=function(u,d,h){a.default._validateParameters("createA",arguments);var f=document.createElement("a");return f.href=u,f.innerHTML=d,h&&(f.target=h),c(f,this)},a.default.prototype.createSlider=function(u,d,h,f){a.default._validateParameters("createSlider",arguments);var g=document.createElement("input");return g.type="range",g.min=u,g.max=d,f===0?g.step=1e-18:f&&(g.step=f),typeof h=="number"&&(g.value=h),c(g,this)},a.default.prototype.createButton=function(u,d){a.default._validateParameters("createButton",arguments);var h=document.createElement("button");return h.innerHTML=u,d&&(h.value=d),c(h,this)},a.default.prototype.createCheckbox=function(){a.default._validateParameters("createCheckbox",arguments);var u=document.createElement("div"),d=document.createElement("input"),h=(d.type="checkbox",document.createElement("label")),f=(h.appendChild(d),u.appendChild(h),c(u,this));return f.checked=function(){var g=f.elt.firstElementChild.getElementsByTagName("input")[0];if(g){if(arguments.length===0)return g.checked;g.checked=!!arguments[0]}return f},this.value=function(g){return f.value=g,this},arguments[0]&&(f.value(arguments[0]),(u=document.createElement("span")).innerHTML=arguments[0],h.appendChild(u)),arguments[1]&&(d.checked=!0),f},a.default.prototype.createSelect=function(){a.default._validateParameters("createSelect",arguments);var u,d,h=arguments[0];return h instanceof a.default.Element&&h.elt instanceof HTMLSelectElement?this.elt=(u=h).elt:h instanceof HTMLSelectElement?(u=c(h,this),this.elt=h):(d=document.createElement("select"),h&&typeof h=="boolean"&&d.setAttribute("multiple","true"),u=c(d,this),this.elt=d),u.option=function(f,g){var y;if(f!==void 0){for(var Z,I=0;I<this.elt.length;I+=1)if(this.elt[I].textContent===f){y=I;break}y!==void 0?g===!1?this.elt.remove(y):this.elt[y].value=g:((Z=document.createElement("option")).textContent=f,Z.value=g===void 0?f:g,this.elt.appendChild(Z),this._pInst._elements.push(Z))}},u.selected=function(f){if(f!==void 0){for(var g=0;g<this.elt.length;g+=1)this.elt[g].value.toString()===f.toString()&&(this.elt.selectedIndex=g);return this}if(this.elt.getAttribute("multiple")){var y=[],Z=!0,I=!1,G=void 0;try{for(var R,C=this.elt.selectedOptions[Symbol.iterator]();!(Z=(R=C.next()).done);Z=!0){var V=R.value;y.push(V.value)}}catch(x){I=!0,G=x}finally{try{Z||C.return==null||C.return()}finally{if(I)throw G}}return y}return this.elt.value},u.disable=function(f){if(typeof f=="string")for(var g=0;g<this.elt.length;g++)this.elt[g].value.toString()===f&&(this.elt[g].disabled=!0,this.elt[g].selected=!1);else this.elt.disabled=!0;return this},u},a.default.prototype.createRadio=function(){function u(Z){return Z instanceof HTMLInputElement&&Z.type==="radio"}function d(Z){return Z instanceof HTMLLabelElement}var h,f,g,y=arguments[0];return y instanceof a.default.Element&&(y.elt instanceof HTMLDivElement||y.elt instanceof HTMLSpanElement)?(h=y,this.elt=y.elt):y instanceof HTMLDivElement||y instanceof HTMLSpanElement?(h=c(y,this),f=this.elt=y,typeof arguments[1]=="string"&&(g=arguments[1])):(typeof y=="string"&&(g=y),f=document.createElement("div"),h=c(f,this),this.elt=f),h._name=g||"radioOption",h._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(Z){return u(Z)||d(Z)&&u(Z.firstElementChild)}).map(function(Z){return u(Z)?Z:Z.firstElementChild})},h.option=function(Z,I){var G,R,C,V=!0,x=!1,w=void 0;try{for(var k,A=h._getOptionsArray()[Symbol.iterator]();!(V=(k=A.next()).done);V=!0){var Y=k.value;if(Y.value===Z){G=Y;break}}}catch(U){x=!0,w=U}finally{try{V||A.return==null||A.return()}finally{if(x)throw w}}return G===void 0&&((G=document.createElement("input")).setAttribute("type","radio"),G.setAttribute("value",Z)),G.setAttribute("name",h._name),d(G.parentElement)?R=G.parentElement:(R=document.createElement("label")).insertAdjacentElement("afterbegin",G),R.lastElementChild instanceof HTMLSpanElement?C=R.lastElementChild:(C=document.createElement("span"),G.insertAdjacentElement("afterend",C)),C.innerHTML=I===void 0?Z:I,this.elt.appendChild(R),G},h.remove=function(Z){var I=!0,G=!1,R=void 0;try{for(var C,V=h._getOptionsArray()[Symbol.iterator]();!(I=(C=V.next()).done);I=!0){var x=C.value;if(x.value===Z)return void(d(x.parentElement)?x.parentElement:x).remove()}}catch(w){G=!0,R=w}finally{try{I||V.return==null||V.return()}finally{if(G)throw R}}},h.value=function(){var Z="",I=!0,G=!1,R=void 0;try{for(var C,V=h._getOptionsArray()[Symbol.iterator]();!(I=(C=V.next()).done);I=!0){var x=C.value;if(x.checked){Z=x.value;break}}}catch(w){G=!0,R=w}finally{try{I||V.return==null||V.return()}finally{if(G)throw R}}return Z},h.selected=function(Z){var I=null;if(Z===void 0){var G=!0,R=!1,C=void 0;try{for(var V,x=h._getOptionsArray()[Symbol.iterator]();!(G=(V=x.next()).done);G=!0){var w=V.value;if(w.checked){I=w;break}}}catch(M){R=!0,C=M}finally{try{G||x.return==null||x.return()}finally{if(R)throw C}}}else{h._getOptionsArray().forEach(function(K){K.checked=!1,K.removeAttribute("checked")});var k=!0,R=!1,C=void 0;try{for(var A,Y=h._getOptionsArray()[Symbol.iterator]();!(k=(A=Y.next()).done);k=!0){var U=A.value;U.value===Z&&(U.setAttribute("checked",!0),U.checked=!0,I=U)}}catch(K){R=!0,C=K}finally{try{k||Y.return==null||Y.return()}finally{if(R)throw C}}}return I},h.disable=function(){var Z=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],I=!0,G=!1,R=void 0;try{for(var C,V=h._getOptionsArray()[Symbol.iterator]();!(I=(C=V.next()).done);I=!0)C.value.setAttribute("disabled",Z)}catch(x){G=!0,R=x}finally{try{I||V.return==null||V.return()}finally{if(G)throw R}}},h},a.default.prototype.createColorPicker=function(u){a.default._validateParameters("createColorPicker",arguments);var d=document.createElement("input");return d.type="color",u?u instanceof a.default.Color?d.value=u.toString("#rrggbb"):(a.default.prototype._colorMode="rgb",a.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},d.value=a.default.prototype.color(u).toString("#rrggbb")):d.value="#000000",(d=c(d,this)).color=function(){return u&&(u.mode&&(a.default.prototype._colorMode=u.mode),u.maxes&&(a.default.prototype._colorMaxes=u.maxes)),a.default.prototype.color(this.elt.value)},d},a.default.prototype.createInput=function(){var u=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",h=(a.default._validateParameters("createInput",arguments),document.createElement("input"));return h.setAttribute("value",u),h.setAttribute("type",d),c(h,this)},a.default.prototype.createFileInput=function(u){var d,h=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(a.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(d=document.createElement("input")).setAttribute("type","file"),h&&d.setAttribute("multiple",!0),d.addEventListener("change",function(f){var g=!0,y=!1,Z=void 0;try{for(var I,G=f.target.files[Symbol.iterator]();!(g=(I=G.next()).done);g=!0){var R=I.value;a.default.File._load(R,u)}}catch(C){y=!0,Z=C}finally{try{g||G.return==null||G.return()}finally{if(y)throw Z}}},!1),c(d,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},a.default.prototype.createVideo=function(u,d){return a.default._validateParameters("createVideo",arguments),m(this,"video",u,d)},a.default.prototype.createAudio=function(u,d){return a.default._validateParameters("createAudio",arguments),m(this,"audio",u,d)},a.default.prototype.VIDEO="video",a.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(u){var d=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return d?new Promise(function(h,f){d.call(navigator,u,h,f)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),a.default.prototype.createCapture=function(){if(a.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var u,d=!0,h=!0,f=!0,g=!1,y=void 0;try{for(var Z,I=arguments[Symbol.iterator]();!(f=(Z=I.next()).done);f=!0){var G=Z.value;G===a.default.prototype.VIDEO?h=!1:G===a.default.prototype.AUDIO?d=!1:l(G)==="object"?R=G:typeof G=="function"&&(u=G)}}catch(x){g=!0,y=x}finally{try{f||I.return==null||I.return()}finally{if(g)throw y}}var R=R||{video:d,audio:h},C=document.createElement("video"),V=(C.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(R).then(function(x){try{"srcObject"in C?C.srcObject=x:C.src=window.URL.createObjectURL(x)}catch{C.src=x}},console.log),c(C,this,!0));return V.loadedmetadata=!1,C.addEventListener("loadedmetadata",function(){C.play(),C.width?(V.width=C.width,V.height=C.height):(V.width=V.elt.width=C.videoWidth,V.height=V.elt.height=C.videoHeight),V.loadedmetadata=!0,u&&u(C.srcObject)}),V},a.default.prototype.createElement=function(u,d){return a.default._validateParameters("createElement",arguments),u=document.createElement(u),d!==void 0&&(u.innerHTML=d),c(u,this)},a.default.Element.prototype.addClass=function(u){return this.elt.className?this.hasClass(u)||(this.elt.className=this.elt.className+" "+u):this.elt.className=u,this},a.default.Element.prototype.removeClass=function(u){return this.elt.classList.remove(u),this},a.default.Element.prototype.hasClass=function(u){return this.elt.classList.contains(u)},a.default.Element.prototype.toggleClass=function(u){return this.elt.classList.contains(u)?this.elt.classList.remove(u):this.elt.classList.add(u),this},a.default.Element.prototype.child=function(u){return u===void 0?this.elt.childNodes:(typeof u=="string"?(u[0]==="#"&&(u=u.substring(1)),u=document.getElementById(u)):u instanceof a.default.Element&&(u=u.elt),u instanceof HTMLElement&&this.elt.appendChild(u),this)},a.default.Element.prototype.center=function(u){var d=this.elt.style.display,h=this.elt.style.display==="none",f=this.parent().style.display==="none",g={x:this.elt.offsetLeft,y:this.elt.offsetTop},y=(h&&this.show(),f&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),Z=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return u==="both"||u===void 0?this.position(y/2+this.parent().offsetLeft,Z/2+this.parent().offsetTop):u==="horizontal"?this.position(y/2+this.parent().offsetLeft,g.y):u==="vertical"&&this.position(g.x,Z/2+this.parent().offsetTop),this.style("display",d),h&&this.hide(),f&&this.parent().hide(),this},a.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},a.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"?"absolute":arguments[2],this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},a.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var u="";return this.elt.style.transform&&(u=(u=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=u,this},a.default.Element.prototype._rotate=function(){var u="";return this.elt.style.transform&&(u=(u=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=u,this},a.default.Element.prototype.style=function(u,d){if((d=d instanceof a.default.Color?"rgba("+d.levels[0]+","+d.levels[1]+","+d.levels[2]+","+d.levels[3]/255+")":d)===void 0){if(u.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(u);for(var h=u.split(";"),f=0;f<h.length;f++){var g=h[f].split(":");g[0]&&g[1]&&(this.elt.style[g[0].trim()]=g[1].trim())}}else this.elt.style[u]=d,u!=="width"&&u!=="height"&&u!=="left"&&u!=="top"||(d=window.getComputedStyle(this.elt).getPropertyValue(u).replace(/[^\d.]/g,""),this[u]=Math.round(parseFloat(d,10)));return this},a.default.Element.prototype.attribute=function(u,d){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return d===void 0?this.elt.getAttribute(u):(this.elt.setAttribute(u,d),this);if(d===void 0)return this.elt.firstChild.getAttribute(u);for(var h=0;h<this.elt.childNodes.length;h++)this.elt.childNodes[h].setAttribute(u,d)},a.default.Element.prototype.removeAttribute=function(u){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var d=0;d<this.elt.childNodes.length;d++)this.elt.childNodes[d].removeAttribute(u);return this.elt.removeAttribute(u),this},a.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},a.default.Element.prototype.show=function(){return this.elt.style.display="block",this},a.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},a.default.Element.prototype.size=function(u,d){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var h=u,f=d,g=a.default.prototype.AUTO;if(h!==g||f!==g){if(h===g?h=d*this.width/this.height:f===g&&(f=u*this.height/this.width),this.elt instanceof HTMLCanvasElement){var y,Z={},I=this.elt.getContext("2d");for(y in I)Z[y]=I[y];for(y in this.elt.setAttribute("width",h*this._pInst._pixelDensity),this.elt.setAttribute("height",f*this._pInst._pixelDensity),this.elt.style.width=h+"px",this.elt.style.height=f+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),Z)this.elt.getContext("2d")[y]=Z[y]}else this.elt.style.width=h+"px",this.elt.style.height=f+"px",this.elt.width=h,this.elt.height=f;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},a.default.Element.prototype.remove=function(){this instanceof a.default.MediaElement&&(this.stop(),(d=this.elt.srcObject)!==null&&d.getTracks().forEach(function(h){h.stop()}));var u,d=this._pInst._elements.indexOf(this);for(u in d!==-1&&this._pInst._elements.splice(d,1),this._events)this.elt.removeEventListener(u,this._events[u]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},a.default.Element.prototype.drop=function(u,d){var h;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",h=function(f){f.preventDefault()}),this.elt.addEventListener("dragleave",h)),a.default.Element._attachListener("drop",function(f){f.preventDefault(),typeof d=="function"&&d.call(this,f);for(var g=f.dataTransfer.files,y=0;y<g.length;y++){var Z=g[y];a.default.File._load(Z,u)}},this)):console.log("The File APIs are not fully supported in this browser."),this},a.default.MediaElement=function(u,d){a.default.Element.call(this,u,d);var h=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(h,"src",{get:function(){var f=h.elt.children[0].src,g=h.elt.src===window.location.href?"":h.elt.src;return f===window.location.href?g:f},set:function(f){for(var g=0;g<h.elt.children.length;g++)h.elt.removeChild(h.elt.children[g]);var y=document.createElement("source");y.src=f,u.appendChild(y),h.elt.src=f,h.modified=!0}}),h._onended=function(){},h.elt.onended=function(){h._onended(h)}},a.default.MediaElement.prototype=Object.create(a.default.Element.prototype),a.default.MediaElement.prototype.play=function(){var u,d=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(u=this.elt.play())&&u.catch&&u.catch(function(h){h.name==="NotAllowedError"?a.default._friendlyAutoplayError(d.src):console.error("Media play method encountered an unexpected error",h)}),this},a.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},a.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},a.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},a.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},a.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var u=this,d=setTimeout(function(){return a.default._friendlyAutoplayError(u.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(d)},{passive:!0,once:!0})},a.default.MediaElement.prototype.autoplay=function(u){var d=this,h=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",u),u&&!h&&(u=function(){return d._setupAutoplayFailDetection()},this.elt.readyState===4?u():this.elt.addEventListener("canplay",u,{passive:!0,once:!0})),this},a.default.MediaElement.prototype.volume=function(u){if(u===void 0)return this.elt.volume;this.elt.volume=u},a.default.MediaElement.prototype.speed=function(u){if(u===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=u:this.presetPlaybackRate=u},a.default.MediaElement.prototype.time=function(u){return u===void 0?this.elt.currentTime:(this.elt.currentTime=u,this)},a.default.MediaElement.prototype.duration=function(){return this.elt.duration},a.default.MediaElement.prototype.pixels=[],a.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},a.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),a.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},a.default.MediaElement.prototype.updatePixels=function(u,d,h,f){return this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.updatePixels.call(this,u,d,h,f)),this.setModified(!0),this},a.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),a.default.Renderer2D.prototype.get.apply(this,arguments)},a.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),a.default.Renderer2D.prototype._getPixel.apply(this,arguments)},a.default.MediaElement.prototype.set=function(u,d,h){this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.set.call(this,u,d,h),this.setModified(!0))},a.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),a.default.prototype.copy.apply(this,arguments)},a.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),a.default.Image.prototype.mask.apply(this,arguments)},a.default.MediaElement.prototype.isModified=function(){return this._modified},a.default.MediaElement.prototype.setModified=function(u){this._modified=u},a.default.MediaElement.prototype.onended=function(u){return this._onended=u,this},a.default.MediaElement.prototype.connect=function(u){var d,h;if(typeof a.default.prototype.getAudioContext=="function")d=a.default.prototype.getAudioContext(),h=a.default.soundOut.input;else try{h=(d=u.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=d.createMediaElementSource(this.elt),this.audioSourceNode.connect(h)),u?u.input?this.audioSourceNode.connect(u.input):this.audioSourceNode.connect(u):this.audioSourceNode.connect(h)},a.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},a.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},a.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function p(u,d,h,f){this.callback=u,this.time=d,this.id=h,this.val=f}a.default.MediaElement.prototype.addCue=function(u,g,h){var f=this._cueIDCounter++,g=new p(g,u,f,h);return this._cues.push(g),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),f},a.default.MediaElement.prototype.removeCue=function(u){for(var d=0;d<this._cues.length;d++)this._cues[d].id===u&&(console.log(u),this._cues.splice(d,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},a.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},a.default.MediaElement.prototype._onTimeUpdate=function(){for(var u=this.time(),d=0;d<this._cues.length;d++){var h=this._cues[d].time,f=this._cues[d].val;this._prevTime<h&&h<=u&&this._cues[d].callback(f)}this._prevTime=u},a.default.File=function(u,d){this.file=u,this._pInst=d,d=u.type.split("/"),this.type=d[0],this.subtype=d[1],this.name=u.name,this.size=u.size,this.data=void 0},a.default.File._createLoader=function(u,d){var h=new FileReader;return h.onload=function(f){var g,y=new a.default.File(u);y.file.type==="application/json"?y.data=JSON.parse(f.target.result):y.file.type==="text/xml"?(g=new DOMParser().parseFromString(f.target.result,"text/xml"),y.data=new a.default.XML(g.documentElement)):y.data=f.target.result,d(y)},h},a.default.File._load=function(u,d){var h;/^text\//.test(u.type)||u.type==="application/json"?a.default.File._createLoader(u,d).readAsText(u):/^(video|audio)\//.test(u.type)?((h=new a.default.File(u)).data=URL.createObjectURL(u),d(h)):a.default.File._createLoader(u,d).readAsDataURL(u)},r=a.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.every":151,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232}],284:[function(r,i,s){function o(G){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(G)}function a(G){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(R){return o(R)}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":o(R)})(G)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(I=r("../core/main"))&&I.__esModule?I:{default:I},c=function(G){if(G&&G.__esModule)return G;if(G===null||a(G)!=="object"&&typeof G!="function")return{default:G};var R=m();if(R&&R.has(G))return R.get(G);var C,V={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in G){var w;Object.prototype.hasOwnProperty.call(G,C)&&((w=x?Object.getOwnPropertyDescriptor(G,C):null)&&(w.get||w.set)?Object.defineProperty(V,C,w):V[C]=G[C])}return V.default=G,R&&R.set(G,V),V}(r("../core/constants"));function m(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,m=function(){return G},G)}l.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",l.default.prototype.accelerationX=0,l.default.prototype.accelerationY=0,l.default.prototype.accelerationZ=0,l.default.prototype.pAccelerationX=0,l.default.prototype.pAccelerationY=0,l.default.prototype.pAccelerationZ=0,l.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},l.default.prototype.rotationX=0,l.default.prototype.rotationY=0,l.default.prototype.rotationZ=0,l.default.prototype.pRotationX=0,l.default.prototype.pRotationY=0;var p=l.default.prototype.pRotationZ=0,u=0,d=0,h="clockwise",f="clockwise",g="clockwise",y=(l.default.prototype.pRotateDirectionX=void 0,l.default.prototype.pRotateDirectionY=void 0,l.default.prototype.pRotateDirectionZ=void 0,l.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},l.default.prototype.turnAxis=void 0,.5),Z=30,I=(l.default.prototype.setMoveThreshold=function(G){l.default._validateParameters("setMoveThreshold",arguments),y=G},l.default.prototype.setShakeThreshold=function(G){l.default._validateParameters("setShakeThreshold",arguments),Z=G},l.default.prototype._ondeviceorientation=function(G){this._updatePRotations(),this._angleMode===c.radians&&(G.beta=G.beta*(_PI/180),G.gamma=G.gamma*(_PI/180),G.alpha=G.alpha*(_PI/180)),this._setProperty("rotationX",G.beta),this._setProperty("rotationY",G.gamma),this._setProperty("rotationZ",G.alpha),this._handleMotion()},l.default.prototype._ondevicemotion=function(G){this._updatePAccelerations(),this._setProperty("accelerationX",2*G.acceleration.x),this._setProperty("accelerationY",2*G.acceleration.y),this._setProperty("accelerationZ",2*G.acceleration.z),this._handleMotion()},l.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var G,R,C,V,x,w=this._isGlobal?window:this;typeof w.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>y||Math.abs(this.accelerationY-this.pAccelerationY)>y||Math.abs(this.accelerationZ-this.pAccelerationZ)>y)&&w.deviceMoved(),typeof w.deviceTurned=="function"&&(R=this.rotationX+180,G=this.pRotationX+180,C=p+180,0<R-G&&R-G<270||R-G<-270?h="clockwise":(R-G<0||270<R-G)&&(h="counter-clockwise"),h!==this.pRotateDirectionX&&(C=R),90<Math.abs(R-C)&&Math.abs(R-C)<270&&(C=R,this._setProperty("turnAxis","X"),w.deviceTurned()),this.pRotateDirectionX=h,p=C-180,G=this.rotationY+180,R=this.pRotationY+180,C=u+180,0<G-R&&G-R<270||G-R<-270?f="clockwise":(G-R<0||270<G-this.pRotationY)&&(f="counter-clockwise"),f!==this.pRotateDirectionY&&(C=G),90<Math.abs(G-C)&&Math.abs(G-C)<270&&(C=G,this._setProperty("turnAxis","Y"),w.deviceTurned()),this.pRotateDirectionY=f,u=C-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?g="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(g="counter-clockwise"),g!==this.pRotateDirectionZ&&(d=this.rotationZ),90<Math.abs(this.rotationZ-d)&&Math.abs(this.rotationZ-d)<270&&(d=this.rotationZ,this._setProperty("turnAxis","Z"),w.deviceTurned()),this.pRotateDirectionZ=g,this._setProperty("turnAxis",void 0)),typeof w.deviceShaken=="function"&&(this.pAccelerationX!==null&&(V=Math.abs(this.accelerationX-this.pAccelerationX),x=Math.abs(this.accelerationY-this.pAccelerationY)),Z<V+x&&w.deviceShaken())},l.default);s.default=I},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],285:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(a){var l;this._downKeys[a.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",a.which),this._downKeys[a.which]=!0,this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),typeof(l=this._isGlobal?window:this).keyPressed!="function"||a.charCode||l.keyPressed(a)===!1&&a.preventDefault())},o.default.prototype._onkeyup=function(a){this._downKeys[a.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),this._setProperty("keyCode",a.which);var l=this._isGlobal?window:this;typeof l.keyReleased=="function"&&l.keyReleased(a)===!1&&a.preventDefault()},o.default.prototype._onkeypress=function(a){var l;a.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",a.which),this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),typeof(l=this._isGlobal?window:this).keyTyped=="function"&&l.keyTyped(a)===!1&&a.preventDefault())},o.default.prototype._onblur=function(a){this._downKeys={}},o.default.prototype.keyIsDown=function(a){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[a]||!1},o.default.prototype._areDownKeys=function(){for(var a in this._downKeys)if(this._downKeys.hasOwnProperty(a)&&this._downKeys[a]===!0)return!0;return!1},r=o.default,s.default=r},{"../core/main":267}],286:[function(r,i,s){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(p)}function a(p){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(u){return o(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":o(u)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(l=r("../core/main"))&&l.__esModule?l:{default:l},c=function(p){if(p&&p.__esModule)return p;if(p===null||a(p)!=="object"&&typeof p!="function")return{default:p};var u=m();if(u&&u.has(p))return u.get(p);var d,h={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in p){var g;Object.prototype.hasOwnProperty.call(p,d)&&((g=f?Object.getOwnPropertyDescriptor(p,d):null)&&(g.get||g.set)?Object.defineProperty(h,d,g):h[d]=p[d])}return h.default=p,u&&u.set(p,h),h}(r("../core/constants"));function m(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,m=function(){return p},p)}l.default.prototype.movedX=0,l.default.prototype.movedY=0,l.default.prototype._hasMouseInteracted=!1,l.default.prototype.mouseX=0,l.default.prototype.mouseY=0,l.default.prototype.pmouseX=0,l.default.prototype.pmouseY=0,l.default.prototype.winMouseX=0,l.default.prototype.winMouseY=0,l.default.prototype.pwinMouseX=0,l.default.prototype.pwinMouseY=0,l.default.prototype.mouseButton=0,l.default.prototype.mouseIsPressed=!1,l.default.prototype._updateNextMouseCoords=function(p){var u,d,h,f,g;this._curElement!==null&&(!p.touches||0<p.touches.length)&&(u=this._curElement.elt,d=this.width,h=this.height,(f=p)&&!f.clientX&&(f.touches?f=f.touches[0]:f.changedTouches&&(f=f.changedTouches[0])),g=u.getBoundingClientRect(),d=u.scrollWidth/d||1,u=u.scrollHeight/h||1,h={x:(f.clientX-g.left)/d,y:(f.clientY-g.top)/u,winX:f.clientX,winY:f.clientY,id:f.identifier},this._setProperty("movedX",p.movementX),this._setProperty("movedY",p.movementY),this._setProperty("mouseX",h.x),this._setProperty("mouseY",h.y),this._setProperty("winMouseX",h.winX),this._setProperty("winMouseY",h.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},l.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},l.default.prototype._setMouseButton=function(p){p.button===1?this._setProperty("mouseButton",c.CENTER):p.button===2?this._setProperty("mouseButton",c.RIGHT):this._setProperty("mouseButton",c.LEFT)},l.default.prototype._onmousemove=function(p){var u=this._isGlobal?window:this;this._updateNextMouseCoords(p),this.mouseIsPressed?typeof u.mouseDragged=="function"?u.mouseDragged(p)===!1&&p.preventDefault():typeof u.touchMoved=="function"&&u.touchMoved(p)===!1&&p.preventDefault():typeof u.mouseMoved=="function"&&u.mouseMoved(p)===!1&&p.preventDefault()},l.default.prototype._onmousedown=function(p){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(p),this._updateNextMouseCoords(p),typeof u.mousePressed=="function"?u.mousePressed(p)===!1&&p.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof u.touchStarted=="function"&&u.touchStarted(p)===!1&&p.preventDefault()},l.default.prototype._onmouseup=function(p){var u=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof u.mouseReleased=="function"?u.mouseReleased(p)===!1&&p.preventDefault():typeof u.touchEnded=="function"&&u.touchEnded(p)===!1&&p.preventDefault()},l.default.prototype._ondragend=l.default.prototype._onmouseup,l.default.prototype._ondragover=l.default.prototype._onmousemove,l.default.prototype._onclick=function(p){var u=this._isGlobal?window:this;typeof u.mouseClicked=="function"&&u.mouseClicked(p)===!1&&p.preventDefault()},l.default.prototype._ondblclick=function(p){var u=this._isGlobal?window:this;typeof u.doubleClicked=="function"&&u.doubleClicked(p)===!1&&p.preventDefault()},l.default.prototype._mouseWheelDeltaY=0,l.default.prototype._pmouseWheelDeltaY=0,l.default.prototype._onwheel=function(p){var u=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",p.deltaY),typeof u.mouseWheel=="function"&&(p.delta=p.deltaY,u.mouseWheel(p)===!1&&p.preventDefault())},l.default.prototype.requestPointerLock=function(){var p=this._curElement.elt;return p.requestPointerLock=p.requestPointerLock||p.mozRequestPointerLock,p.requestPointerLock?(p.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},l.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=l.default,s.default=r},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],287:[function(r,i,s){r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(o){if(this._curElement!==null){for(var a=[],l=0;l<o.touches.length;l++)a[l]=function(g,f,y,u){var d=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,h=g.getBoundingClientRect(),f=g.scrollWidth/f||1,g=g.scrollHeight/y||1,y=u.touches[d]||u.changedTouches[d];return{x:(y.clientX-h.left)/f,y:(y.clientY-h.top)/g,winX:y.clientX,winY:y.clientY,id:y.identifier}}(this._curElement.elt,this.width,this.height,o,l);this._setProperty("touches",a)}},r.default.prototype._ontouchstart=function(o){var a=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(o),this._updateNextMouseCoords(o),this._updateMouseCoords(),typeof a.touchStarted=="function"?a.touchStarted(o)===!1&&o.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof a.mousePressed=="function"&&a.mousePressed(o)===!1&&o.preventDefault()},r.default.prototype._ontouchmove=function(o){var a=this._isGlobal?window:this;this._updateTouchCoords(o),this._updateNextMouseCoords(o),typeof a.touchMoved=="function"?a.touchMoved(o)===!1&&o.preventDefault():typeof a.mouseDragged=="function"&&a.mouseDragged(o)===!1&&o.preventDefault()},r.default.prototype._ontouchend=function(o){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(o),this._updateNextMouseCoords(o);var a=this._isGlobal?window:this;typeof a.touchEnded=="function"?a.touchEnded(o)===!1&&o.preventDefault():typeof a.mouseReleased=="function"&&a.mouseReleased(o)===!1&&o.preventDefault()},r=r.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],288:[function(r,i,s){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o,a,l,c,m={};function p(u,d){for(var h,f,g,y,Z,I,G,R,C,V,x=m._toPixels(u),w=u.width,k=u.height,A=w*k,Y=new Int32Array(A),U=0;U<A;U++)Y[U]=m._getARGB(x,U);var M,j,K,P=new Int32Array(A),J=new Int32Array(A),E=new Int32Array(A),O=new Int32Array(A),D=0,le=3.5*d|0;if(o!==(le=le<1?1:le<248?le:248)){a=1+(o=le)<<1,l=new Int32Array(a),c=new Array(a);for(var X,T,N=0;N<a;N++)c[N]=new Int32Array(256);for(var z=1,te=le-1;z<le;z++){l[le+z]=l[te]=T=te*te;for(var ne=c[le+z],ee=c[te--],oe=0;oe<256;oe++)ne[oe]=ee[oe]=T*oe}X=l[le]=le*le,ne=c[le];for(var ie=0;ie<256;ie++)ne[ie]=X*ie}for(j=0;j<k;j++){for(M=0;M<w;M++){if(y=g=f=Z=h=0,(I=M-o)<0)V=-I,I=0;else{if(w<=I)break;V=0}for(K=V;K<a&&!(w<=I);K++){var ce,he=Y[I+D];Z+=(ce=c[K])[(-16777216&he)>>>24],f+=ce[(16711680&he)>>16],g+=ce[(65280&he)>>8],y+=ce[255&he],h+=l[K],I++}P[G=D+M]=Z/h,J[G]=f/h,E[G]=g/h,O[G]=y/h}D+=w}for(C=(R=-o)*w,j=D=0;j<k;j++){for(M=0;M<w;M++){if(R<(y=g=f=Z=h=0))V=G=-R,I=M;else{if(k<=R)break;V=0,G=R,I=M+C}for(K=V;K<a&&!(k<=G);K++)Z+=(ce=c[K])[P[I]],f+=ce[J[I]],g+=ce[E[I]],y+=ce[O[I]],h+=l[K],G++,I+=w;Y[M+D]=Z/h<<24|f/h<<16|g/h<<8|y/h}D+=w,C+=w,R++}m._setPixels(x,Y)}m._toPixels=function(u){var d,h;return u instanceof ImageData?u.data:u.getContext("2d")?u.getContext("2d").getImageData(0,0,u.width,u.height).data:u.getContext("webgl")?(h=(d=u.getContext("webgl")).drawingBufferWidth*d.drawingBufferHeight*4,h=new Uint8Array(h),d.readPixels(0,0,u.width,u.height,d.RGBA,d.UNSIGNED_BYTE,h),h):void 0},m._getARGB=function(u,d){return d*=4,u[3+d]<<24&4278190080|u[d]<<16&16711680|u[1+d]<<8&65280|255&u[2+d]},m._setPixels=function(u,d){for(var h,f=0,g=u.length;f<g;f++)u[0+(h=4*f)]=(16711680&d[f])>>>16,u[1+h]=(65280&d[f])>>>8,u[2+h]=255&d[f],u[3+h]=(4278190080&d[f])>>>24},m._toImageData=function(u){return u instanceof ImageData?u:u.getContext("2d").getImageData(0,0,u.width,u.height)},m._createImageData=function(u,d){return m._tmpCanvas=document.createElement("canvas"),m._tmpCtx=m._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(u,d)},m.apply=function(u,y,h){var f=u.getContext("2d"),g=f.getImageData(0,0,u.width,u.height),y=y(g,h);y instanceof ImageData?f.putImageData(y,0,0,0,0,u.width,u.height):f.putImageData(g,0,0,0,0,u.width,u.height)},m.threshold=function(u,d){for(var h=m._toPixels(u),f=(d===void 0&&(d=.5),Math.floor(255*d)),g=0;g<h.length;g+=4){var y=void 0,y=f<=.2126*h[g]+.7152*h[g+1]+.0722*h[g+2]?255:0;h[g]=h[g+1]=h[g+2]=y}},m.gray=function(u){for(var d=m._toPixels(u),h=0;h<d.length;h+=4){var f=d[h],g=d[h+1],y=d[h+2];d[h]=d[h+1]=d[h+2]=.2126*f+.7152*g+.0722*y}},m.opaque=function(u){for(var d=m._toPixels(u),h=0;h<d.length;h+=4)d[h+3]=255;return d},m.invert=function(u){for(var d=m._toPixels(u),h=0;h<d.length;h+=4)d[h]=255-d[h],d[h+1]=255-d[h+1],d[h+2]=255-d[h+2]},m.posterize=function(u,d){var h=m._toPixels(u);if(d<2||255<d)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var f=d-1,g=0;g<h.length;g+=4){var y=h[g],Z=h[g+1],I=h[g+2];h[g]=255*(y*d>>8)/f,h[g+1]=255*(Z*d>>8)/f,h[g+2]=255*(I*d>>8)/f}},m.dilate=function(u){for(var d,h,f,g,y,Z,I,G,R,C=m._toPixels(u),V=0,x=C.length?C.length/4:0,w=new Int32Array(x);V<x;)for(h=(d=V)+u.width;V<h;)g=f=m._getARGB(C,V),(R=V-1)<d&&(R=V),h<=(G=V+1)&&(G=V),(y=V-u.width)<0&&(y=0),x<=(Z=V+u.width)&&(Z=V),y=m._getARGB(C,y),R=m._getARGB(C,R),Z=m._getARGB(C,Z),(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<(I=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))&&(f=R,g=I),g<(I=77*((R=m._getARGB(C,G))>>16&255)+151*(R>>8&255)+28*(255&R))&&(f=R,g=I),g<(G=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(f=y,g=G),g<(R=77*(Z>>16&255)+151*(Z>>8&255)+28*(255&Z))&&(f=Z,g=R),w[V++]=f;m._setPixels(C,w)},m.erode=function(u){for(var d,h,f,g,y,Z,I,G,R,C=m._toPixels(u),V=0,x=C.length?C.length/4:0,w=new Int32Array(x);V<x;)for(h=(d=V)+u.width;V<h;)g=f=m._getARGB(C,V),(R=V-1)<d&&(R=V),h<=(G=V+1)&&(G=V),(y=V-u.width)<0&&(y=0),x<=(Z=V+u.width)&&(Z=V),y=m._getARGB(C,y),R=m._getARGB(C,R),Z=m._getARGB(C,Z),(I=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))<(g=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(f=R,g=I),(I=77*((R=m._getARGB(C,G))>>16&255)+151*(R>>8&255)+28*(255&R))<g&&(f=R,g=I),(G=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<g&&(f=y,g=G),(R=77*(Z>>16&255)+151*(Z>>8&255)+28*(255&Z))<g&&(f=Z,g=R),w[V++]=f;m._setPixels(C,w)},m.blur=function(u,d){p(u,d)},s.default=m},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],289:[function(r,i,s){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=l(r("../core/main")),a=l(r("omggif"));function l(m){return m&&m.__esModule?m:{default:m}}function c(m){return function(p){if(Array.isArray(p)){for(var u=0,d=new Array(p.length);u<p.length;u++)d[u]=p[u];return d}}(m)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.createImage=function(m,p){return o.default._validateParameters("createImage",arguments),new o.default.Image(m,p)},o.default.prototype.saveCanvas=function(){o.default._validateParameters("saveCanvas",arguments);var m,p,u,d,h=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(m=arguments[0],h.shift()):arguments[0]instanceof o.default.Element?(m=arguments[0].elt,h.shift()):m=this._curElement&&this._curElement.elt,1<=h.length&&(p=h[0]),u=(u=2<=h.length?h[1]:u)||o.default.prototype._checkFileExtension(p,u)[1]||"png"){default:d="image/png";break;case"jpeg":case"jpg":d="image/jpeg"}m.toBlob(function(f){o.default.prototype.downloadFile(f,p,u)},d)},o.default.prototype.encodeAndDownloadGif=function(m,p){for(var u=m.gifProperties,d=u.loopLimit,h=(d===1?d=null:d===null&&(d=0),new Uint8Array(m.width*m.height*u.numFrames)),f=[],g={},y=0;y<u.numFrames;y++){for(var Z=new Set,I=u.frames[y].image.data,G=I.length,R=new Uint32Array(m.width*m.height),C=0,V=0;C<G;C+=4,V++){var x=I[C+0]<<16|I[C+1]<<8|I[C+2]<<0;Z.add(x),R[V]=x}var w=c(Z).sort().toString();g[w]===void 0?g[w]={freq:1,frames:[y]}:(g[w].freq+=1,g[w].frames.push(y)),f.push(R)}for(var Y=[],k=Object.keys(g).sort(function(X,T){return g[T].freq-g[X].freq}),A=k[0].split(",").map(function(X){return parseInt(X)}),Y=Y.concat(g[A].frames),U=new Set(A),M=1;M<k.length;M++){var j=k[M].split(",").map(function(X){return parseInt(X)}).filter(function(X){return!U.has(X)});if(A.length+j.length<=256){for(var K=0;K<j.length;K++)A.push(j[K]),U.add(j[K]);Y=Y.concat(g[k[M]].frames)}}Y=new Set(Y);for(var P={},J=0;J<A.length;J++)P[A[J]]||(P[A[J]]=J);for(var E=1;E<A.length;)E<<=1;A.length=E;for(var d={loop:d,palette:new Uint32Array(A)},O=new a.default.GifWriter(h,m.width,m.height,d),D={},le=0;le<u.numFrames;le++)(function(T){for(var N=!Y.has(T),z=N?[]:A,te=new Uint8Array(m.width*m.height),ne={},ee=new Set,oe=0;oe<f[T].length;oe++){var ie=f[T][oe];N?(ne[ie]===void 0&&(ne[ie]=z.length,z.push(ie)),te[oe]=ne[ie]):te[oe]=P[ie],0<T&&f[T-1][oe]!==ie&&ee.add(ie)}var ce={},he=z.filter(function(be){return!ee.has(be)});if(0<he.length){var he=he[0],q=(N?ne:P)[he];if(0<T){for(var me=0;me<f[T].length;me++)f[T-1][me]===f[T][me]&&(te[me]=q);ce.transparent=q,D.frameOpts.disposal=1}}if(ce.delay=u.frames[T].delay/10,N){for(var ge=1;ge<z.length;)ge<<=1;z.length=ge,ce.palette=new Uint32Array(z)}0<T&&O.addFrame(0,0,m.width,m.height,D.pixelPaletteIndex,D.frameOpts),D={pixelPaletteIndex:te,frameOpts:ce}})(le);D.frameOpts.disposal=1,O.addFrame(0,0,m.width,m.height,D.pixelPaletteIndex,D.frameOpts),d=new Blob([h.slice(0,O.end())],{type:"image/gif"}),o.default.prototype.downloadFile(d,p,"gif")},o.default.prototype.saveFrames=function(m,p,u,f,h){o.default._validateParameters("saveFrames",arguments),u=o.default.prototype.constrain(u=u||3,0,15),u*=1e3;var f=o.default.prototype.constrain(f||15,0,22),g=0,y=o.default.prototype._makeFrame,Z=this._curElement.elt,I=[],G=setInterval(function(){I.push(y(m+g,p,Z)),g++},1e3/f);setTimeout(function(){if(clearInterval(G),h)h(I);else{var R=!0,C=!1,V=void 0;try{for(var x,w=I[Symbol.iterator]();!(R=(x=w.next()).done);R=!0){var k=x.value;o.default.prototype.downloadFile(k.imageData,k.filename,k.ext)}}catch(A){C=!0,V=A}finally{try{R||w.return==null||w.return()}finally{if(C)throw V}}}I=[]},.01+u)},o.default.prototype._makeFrame=function(m,p,h){var d,h=this?this._curElement.elt:h;if(p)switch(p.toLowerCase()){case"png":d="image/png";break;case"jpeg":case"jpg":d="image/jpeg";break;default:d="image/png"}else p="png",d="image/png";var h=(h=h.toDataURL(d)).replace(d,"image/octet-stream"),f={};return f.imageData=h,f.filename=m,f.ext=p,f},r=o.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,omggif:240}],290:[function(r,i,s){function o(Z){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(Z)}function a(Z){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(I){return o(I)}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":o(I)})(Z)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r("regenerator-runtime/runtime");var l=h(r("../core/main")),c=h(r("../core/helpers")),m=function(Z){if(Z&&Z.__esModule)return Z;if(Z===null||a(Z)!=="object"&&typeof Z!="function")return{default:Z};var I=d();if(I&&I.has(Z))return I.get(Z);var G,R={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(G in Z){var V;Object.prototype.hasOwnProperty.call(Z,G)&&((V=C?Object.getOwnPropertyDescriptor(Z,G):null)&&(V.get||V.set)?Object.defineProperty(R,G,V):R[G]=Z[G])}return R.default=Z,I&&I.set(Z,R),R}(r("../core/constants")),p=h(r("omggif")),u=r("gifenc");function d(){var Z;return typeof WeakMap!="function"?null:(Z=new WeakMap,d=function(){return Z},Z)}function h(Z){return Z&&Z.__esModule?Z:{default:Z}}function f(Z,I,G,R,C,V,x){try{var w=Z[V](x),k=w.value}catch(A){return void G(A)}w.done?I(k):Promise.resolve(k).then(R,C)}function g(Z,I,G,R,C,V,x,w,k,A,Y){var U,M,j,K,P,J,E,O,D;return Z===m.COVER&&(U=I,j=G,E=V,O=x,J=w,D=k,M=A,K=Y,P=Math.max(E/M,O/K),E/=P,O/=P,P=J,J=D,U===m.CENTER?P+=(M-E)/2:U===m.RIGHT&&(P+=M-E),j===m.CENTER?J+=(K-O)/2:j===m.BOTTOM&&(J+=K-O),w=(D={x:P,y:J,w:E,h:O}).x,k=D.y,A=D.w,Y=D.h),Z===m.CONTAIN&&(U=I,M=G,j=R,K=C,P=V,J=x,E=A,O=Y,D=Math.max(E/P,O/J),E/=D,O/=D,D=j,j=K,U===m.CENTER?D+=(P-E)/2:U===m.RIGHT&&(D+=P-E),M===m.CENTER?j+=(J-O)/2:M===m.BOTTOM&&(j+=J-O),R=(Z={x:D,y:j,w:E,h:O}).x,C=Z.y,V=Z.w,x=Z.h),{sx:w,sy:k,sw:A,sh:Y,dx:R,dy:C,dw:V,dh:x}}function y(Z,I){return 0<Z&&Z<I?Z:I}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(Z,I,G){l.default._validateParameters("loadImage",arguments);var R=new l.default.Image(1,1,this),C=this,V=new Request(Z,{method:"GET",mode:"cors"});return fetch(Z,V).then(function(x){var w,k=x.headers.get("content-type");k===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),k&&k.includes("image/gif")?x.arrayBuffer().then(function(A){if(A){var A=new Uint8Array(A),Y=R,U=I,M=G,j=function(N){C._decrementPreload()}.bind(C),K=new p.default.GifReader(A),P=(Y.width=Y.canvas.width=K.width,Y.height=Y.canvas.height=K.height,[]),J=K.numFrames(),E=new Uint8ClampedArray(Y.width*Y.height*4);if(1<J){for(var O=0;O<J;O++){var D=K.frameInfo(O),le=Y.drawingContext.getImageData(0,0,Y.width,Y.height),X=(E=le.data.slice(),function(N,z){try{z.decodeAndBlitFrameRGBA(N,E)}catch(te){l.default._friendlyFileLoadError(8,Y.src),typeof M=="function"?M(te):console.error(te)}}(O,K),new ImageData(E,Y.width,Y.height)),X=(Y.drawingContext.putImageData(X,0,0),D.delay);X===0&&(X=10),P.push({image:Y.drawingContext.getImageData(0,0,Y.width,Y.height),delay:10*X}),D.disposal===2?Y.drawingContext.clearRect(D.x,D.y,D.width,D.height):D.disposal===3&&Y.drawingContext.putImageData(le,0,0,D.x,D.y,D.width,D.height)}A=K.loopCount(),A===null?A=1:A===0&&(A=null),Y.drawingContext.putImageData(P[0].image,0,0),Y.gifProperties={displayIndex:0,loopLimit:A,loopCount:0,frames:P,numFrames:J,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof U=="function"&&U(Y),j()}},function(A){typeof G=="function"?G(A):console.error(A)}):((w=new Image).onload=function(){R.width=R.canvas.width=w.width,R.height=R.canvas.height=w.height,R.drawingContext.drawImage(w,0,0),R.modified=!0,typeof I=="function"&&I(R),C._decrementPreload()},w.onerror=function(A){l.default._friendlyFileLoadError(0,w.src),typeof G=="function"?G(A):console.error(A)},Z.indexOf("data:image/")!==0&&(w.crossOrigin="Anonymous"),w.src=Z),R.modified=!0}).catch(function(x){l.default._friendlyFileLoadError(0,Z),typeof G=="function"?G(x):console.error(x)}),R},l.default.prototype.saveGif=function(){Z=regeneratorRuntime.mark(function G(R,C){var V,x,w,k,A,Y,U,M,j,K,P,J,E,O,D,le,X,T,N,z,te,ne,ee,oe,ie,ce=arguments;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(V=2<ce.length&&ce[2]!==void 0?ce[2]:{delay:0,units:"seconds"},typeof R!="string")throw TypeError("fileName parameter must be a string");he.next=3;break;case 3:if(typeof C!="number")throw TypeError("Duration parameter must be a number");he.next=5;break;case 5:if(typeof V.delay!="number")throw TypeError("Delay parameter must be a number");he.next=7;break;case 7:if(V.units!=="seconds"&&V.units!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');he.next=9;break;case 9:Y=V.units,A=V.delay,k=this._targetFrameRate,x=(x=1/(k=k!==1/0&&k!==void 0&&k!==0?k:60)*1e3)<20?20:x,k=(w=Y==="seconds"?C*k:C)+(Y=Y==="seconds"?A*k:A),A=Y,this.frameCount=A,Y=this._pixelDensity,this.pixelDensity(1),U=[],M="p5.gif.progressBar",document.getElementById(M)!==null&&document.getElementById(M).remove(),(M=this.createP("")).id("progressBar"),M.style("font-size","16px"),M.style("font-family","Montserrat"),M.style("background-color","#ffffffa0"),M.style("padding","8px"),M.style("border-radius","10px"),M.position(0,0),this.drawingContext instanceof WebGLRenderingContext&&(K=document.getElementById("defaultCanvas0").getContext("webgl"),j=new Uint8Array(K.drawingBufferWidth*K.drawingBufferHeight*4)),this.noLoop();case 35:if(A<k)return this.redraw(),D=void 0,D=this.drawingContext instanceof WebGLRenderingContext?(j=new Uint8Array(K.drawingBufferWidth*K.drawingBufferHeight*4),K.readPixels(0,0,K.drawingBufferWidth,K.drawingBufferHeight,K.RGBA,K.UNSIGNED_BYTE,j),function(q){for(var me=parseInt(height/2),ge=4*width,be=new Uint8Array(4*width),pe=0;pe<me;++pe){var xe=pe*ge,Se=(height-pe-1)*ge;be.set(q.subarray(xe,xe+ge)),q.copyWithin(xe,Se,Se+ge),q.set(be,Se)}return q}(j)):this.drawingContext.getImageData(0,0,this.width,this.height).data,U.push(D),A++,M.html("Saved frame <b>"+U.length.toString()+"</b> out of "+w.toString()),he.next=44,new Promise(function(q){return setTimeout(q,0)});he.next=46;break;case 44:he.next=35;break;case 46:M.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(Y),P=(0,u.GIFEncoder)(),J=function(q){for(var me=new Uint8Array(q.length*q[0].length),ge=0;ge<q.length;ge++)me.set(q[0],ge*q[0].length);var be=(0,u.quantize)(me,256,{format:"rgba444",oneBitAlpha:!0});return be.length===256?be[be.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:be.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),be}(U),E=J.length-1,O=0;case 53:if(O<U.length){if(O===0)return D=(0,u.applyPalette)(U[O],J,{format:"rgba4444"}),P.writeFrame(D,this.width,this.height,{palette:J,delay:x,dispose:1}),he.abrupt("continue",68);he.next=58}else he.next=71;break;case 58:for(le=U[O],X=U[O-1],T=[],N=0;N<le.length;N+=4)z=[le[N],le[N+1],le[N+2],le[N+3]],te=[X[N],X[N+1],X[N+2],X[N+3]],!function(q,me){return Array.isArray(q)&&Array.isArray(me)&&q.length===me.length&&q.every(function(ge,be){return ge===me[be]})}(z,te)||T.push(N/4);for(ne=(0,u.applyPalette)(le,J,{format:"rgba4444"}),ee=0;ee<T.length;ee++)oe=T[ee],ne[oe]=E;return P.writeFrame(ne,this.width,this.height,{delay:x,transparent:!0,transparentIndex:E,dispose:1}),M.html("Rendered frame <b>"+O.toString()+"</b> out of "+w.toString()),he.next=68,new Promise(function(q){return setTimeout(q,0)});case 68:O++,he.next=53;break;case 71:P.finish(),ie=P.bytesView(),ie=new Blob([ie],{type:"image/gif"}),U=[],this.loop(),M.html("Done. Downloading your gif!\u{1F338}"),l.default.prototype.downloadFile(ie,R,"gif");case 79:case"end":return he.stop()}},G,this)});var Z,I=function(){var G=this,R=arguments;return new Promise(function(C,V){var x=Z.apply(G,R);function w(A){f(x,C,V,w,k,"next",A)}function k(A){f(x,C,V,w,k,"throw",A)}w(void 0)})};return function(G,R){return I.apply(this,arguments)}}(),l.default.prototype.image=function(Z,I,G,R,K,P,J,E,D,A,Y,U){l.default._validateParameters("image",arguments);var O=Z.width,M=Z.height,j=(U=U||m.CENTER,Y=Y||m.CENTER,Z.elt&&Z.elt.videoWidth&&!Z.canvas&&(O=Z.elt.videoWidth,M=Z.elt.videoHeight),R||O),K=K||M,P=P||0,J=J||0,E=y(E||O,O),O=y(D||M,M),D=1;Z.elt&&!Z.canvas&&Z.elt.style.width&&(D=Z.elt.videoWidth&&!R?Z.elt.videoWidth:Z.elt.width,D/=parseInt(Z.elt.style.width,10)),P*=D,J*=D,O*=D,E*=D,M=g(A,Y,U,(M=c.default.modeAdjust(I,G,j,K,this._renderer._imageMode)).x,M.y,M.w,M.h,P,J,E,O),this._renderer.image(Z,M.sx,M.sy,M.sw,M.sh,M.dx,M.dy,M.dw,M.dh)},l.default.prototype.tint=function(){for(var Z=arguments.length,I=new Array(Z),G=0;G<Z;G++)I[G]=arguments[G];l.default._validateParameters("tint",I);var R=this.color.apply(this,I);this._renderer._tint=R.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(Z){l.default._validateParameters("imageMode",arguments),Z!==m.CORNER&&Z!==m.CORNERS&&Z!==m.CENTER||(this._renderer._imageMode=Z)},r=l.default,s.default=r},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/helpers":263,"../core/main":267,"core-js/modules/es.array.copy-within":150,"core-js/modules/es.array.every":151,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,gifenc:237,omggif:240,"regenerator-runtime/runtime":244}],291:[function(r,i,s){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=l(r("../core/main")),a=l(r("./filters"));function l(c){return c&&c.__esModule?c:{default:c}}o.default.Image=function(c,m){this.width=c,this.height=m,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},o.default.Image.prototype._animateGif=function(u){var m,p=this.gifProperties,u=u._lastFrameTime;p.lastChangeTime===0&&(p.lastChangeTime=u),p.playing&&(p.timeDisplayed=u-p.lastChangeTime,m=p.frames[p.displayIndex].delay,p.timeDisplayed>=m&&(m=Math.floor(p.timeDisplayed/m),p.timeDisplayed=0,p.lastChangeTime=u,p.displayIndex+=m,p.loopCount=Math.floor(p.displayIndex/p.numFrames),p.loopLimit!==null&&p.loopCount>=p.loopLimit?p.playing=!1:(u=p.displayIndex%p.numFrames,this.drawingContext.putImageData(p.frames[u].image,0,0),p.displayIndex=u,this.setModified(!0))))},o.default.Image.prototype._setProperty=function(c,m){this[c]=m,this.setModified(!0)},o.default.Image.prototype.loadPixels=function(){o.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},o.default.Image.prototype.updatePixels=function(c,m,p,u){o.default.Renderer2D.prototype.updatePixels.call(this,c,m,p,u),this.setModified(!0)},o.default.Image.prototype.get=function(c,m,p,u){return o.default._validateParameters("p5.Image.get",arguments),o.default.Renderer2D.prototype.get.apply(this,arguments)},o.default.Image.prototype._getPixel=o.default.Renderer2D.prototype._getPixel,o.default.Image.prototype.set=function(c,m,p){o.default.Renderer2D.prototype.set.call(this,c,m,p),this.setModified(!0)},o.default.Image.prototype.resize=function(c,m){c===0&&m===0?(c=this.canvas.width,m=this.canvas.height):c===0?c=this.canvas.width*m/this.canvas.height:m===0&&(m=this.canvas.height*c/this.canvas.width),c=Math.floor(c),m=Math.floor(m);var p=document.createElement("canvas");if(p.width=c,p.height=m,this.gifProperties)for(var u=this.gifProperties,d=0;d<u.numFrames;d++){for(var h=this.drawingContext.createImageData(c,m),f=(G=G=I=Z=y=void 0,u.frames[d].image),g=h,y=0,Z=0;Z<g.height;Z++)for(var I=0;I<g.width;I++){var G=Math.floor(I*f.width/g.width),G=4*(Math.floor(Z*f.height/g.height)*f.width+G);g.data[y++]=f.data[G++],g.data[y++]=f.data[G++],g.data[y++]=f.data[G++],g.data[y++]=f.data[+G]}u.frames[d].image=h}p.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,p.width,p.height),this.canvas.width=this.width=c,this.canvas.height=this.height=m,this.drawingContext.drawImage(p,0,0,c,m,0,0,c,m),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},o.default.Image.prototype.copy=function(){for(var c=arguments.length,m=new Array(c),p=0;p<c;p++)m[p]=arguments[p];o.default.prototype.copy.apply(this,m)},o.default.Image.prototype.mask=function(c){var m=this.drawingContext.globalCompositeOperation,p=1,u=[c=c===void 0?this:c,0,0,(p=c instanceof o.default.Renderer?c._pInst._pixelDensity:p)*c.width,p*c.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var d=0;d<this.gifProperties.frames.length;d++)this.drawingContext.putImageData(this.gifProperties.frames[d].image,0,0),o.default.Image.prototype.copy.apply(this,u),this.gifProperties.frames[d].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else o.default.Image.prototype.copy.apply(this,u);this.drawingContext.globalCompositeOperation=m,this.setModified(!0)},o.default.Image.prototype.filter=function(c,m){a.default.apply(this.canvas,a.default[c],m),this.setModified(!0)},o.default.Image.prototype.blend=function(){for(var c=arguments.length,m=new Array(c),p=0;p<c;p++)m[p]=arguments[p];o.default._validateParameters("p5.Image.blend",arguments),o.default.prototype.blend.apply(this,m),this.setModified(!0)},o.default.Image.prototype.setModified=function(c){this._modified=c},o.default.Image.prototype.isModified=function(){return this._modified},o.default.Image.prototype.save=function(c,m){this.gifProperties?o.default.prototype.encodeAndDownloadGif(this,c):o.default.prototype.saveCanvas(this.canvas,c,m)},o.default.Image.prototype.reset=function(){var c;this.gifProperties&&((c=this.gifProperties).playing=!0,c.timeSinceStart=0,c.timeDisplayed=0,c.lastChangeTime=0,c.loopCount=0,c.displayIndex=0,this.drawingContext.putImageData(c.frames[0].image,0,0))},o.default.Image.prototype.getCurrentFrame=function(){var c;if(this.gifProperties)return(c=this.gifProperties).displayIndex%c.numFrames},o.default.Image.prototype.setFrame=function(c){var m;this.gifProperties&&(c<(m=this.gifProperties).numFrames&&0<=c?(m.timeDisplayed=0,m.lastChangeTime=0,m.displayIndex=c,this.drawingContext.putImageData(m.frames[c].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))},o.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},o.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},o.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},o.default.Image.prototype.delay=function(c,m){if(this.gifProperties){var p=this.gifProperties;if(m<p.numFrames&&0<=m)p.frames[m].delay=c;else{var u=!0,m=!1,d=void 0;try{for(var h,f=p.frames[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)h.value.delay=c}catch(y){m=!0,d=y}finally{try{u||f.return==null||f.return()}finally{if(m)throw d}}}}},r=o.default.Image,s.default=r},{"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],292:[function(r,i,s){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=l(r("../core/main")),a=l(r("./filters"));function l(c){return c&&c.__esModule?c:{default:c}}r("../color/p5.Color"),o.default.prototype.pixels=[],o.default.prototype.blend=function(){for(var c,m=arguments.length,p=new Array(m),u=0;u<m;u++)p[u]=arguments[u];o.default._validateParameters("blend",p),this._renderer?(c=this._renderer).blend.apply(c,p):o.default.Renderer2D.prototype.blend.apply(this,p)},o.default.prototype.copy=function(){for(var c,m,p,u,d,h,f,g,y,Z=arguments.length,I=new Array(Z),G=0;G<Z;G++)I[G]=arguments[G];if(o.default._validateParameters("copy",I),I.length===9)c=I[0],m=I[1],p=I[2],u=I[3],d=I[4],h=I[5],f=I[6],g=I[7],y=I[8];else{if(I.length!==8)throw new Error("Signature not supported");c=this,m=I[0],p=I[1],u=I[2],d=I[3],h=I[4],f=I[5],g=I[6],y=I[7]}o.default.prototype._copyHelper(this,c,m,p,u,d,h,f,g,y)},o.default.prototype._copyHelper=function(c,m,p,u,d,h,f,g,y,Z){m.loadPixels();var I=m.canvas.width/m.width,G=0,R=0;m._renderer&&m._renderer.isP3D&&(G=m.width/2,R=m.height/2),c._renderer&&c._renderer.isP3D?o.default.RendererGL.prototype.image.call(c._renderer,m,p+G,u+R,d,h,f,g,y,Z):c.drawingContext.drawImage(m.canvas,I*(p+G),I*(u+R),I*d,I*h,f,g,y,Z)},o.default.prototype.filter=function(c,m){o.default._validateParameters("filter",arguments),this.canvas!==void 0?a.default.apply(this.canvas,a.default[c],m):a.default.apply(this.elt,a.default[c],m)},o.default.prototype.get=function(c,m,p,u){var d;return o.default._validateParameters("get",arguments),(d=this._renderer).get.apply(d,arguments)},o.default.prototype.loadPixels=function(){for(var c=arguments.length,m=new Array(c),p=0;p<c;p++)m[p]=arguments[p];o.default._validateParameters("loadPixels",m),this._renderer.loadPixels()},o.default.prototype.set=function(c,m,p){this._renderer.set(c,m,p)},o.default.prototype.updatePixels=function(c,m,p,u){o.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(c,m,p,u)},r=o.default,s.default=r},{"../color/p5.Color":254,"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153}],293:[function(r,i,s){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=m(r("../core/main")),l=(r("whatwg-fetch"),r("es6-promise/auto"),m(r("fetch-jsonp"))),c=m(r("file-saver"));function m(h){return h&&h.__esModule?h:{default:h}}function p(h){return(p=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}function u(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function d(h,f){f&&f!==!0&&f!=="true"||(f="");var g="";return(h=h||"untitled")&&h.includes(".")&&(g=h.split(".").pop()),f&&g!==f&&(g=f,h="".concat(h,".").concat(g)),[h,g]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.loadJSON=function(){for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];a.default._validateParameters("loadJSON",f);for(var y,Z,I,G=f[0],R={},C="json",V=1;V<f.length;V++){var x=f[V];typeof x=="string"?x!=="jsonp"&&x!=="json"||(C=x):typeof x=="function"?y?Z=x:y=x:p(x)==="object"&&(x.hasOwnProperty("jsonpCallback")||x.hasOwnProperty("jsonpCallbackFunction"))&&(C="jsonp",I=x)}var w=this;return this.httpDo(G,"GET",I,C,function(k){for(var A in k)R[A]=k[A];y!==void 0&&y(k),w._decrementPreload()},function(k){if(a.default._friendlyFileLoadError(5,G),!Z)throw k;Z(k)}),R},a.default.prototype.loadStrings=function(){for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];a.default._validateParameters("loadStrings",f);for(var y,Z,I=[],G=1;G<f.length;G++){var R=f[G];typeof R=="function"&&(y===void 0?y=R:Z===void 0&&(Z=R))}var C=this;return a.default.prototype.httpDo.call(this,f[0],"GET","text",function(V){for(var x=V.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),w=0,k=x.length;w<k;w+=32768)Array.prototype.push.apply(I,x.slice(w,Math.min(w+32768,k)));y!==void 0&&y(I),C._decrementPreload()},function(V){if(a.default._friendlyFileLoadError(3,V),!Z)throw V;Z(V)}),I},a.default.prototype.loadTable=function(h){var f,g,y,Z=!1,I=h.substring(h.lastIndexOf(".")+1,h.length);I==="csv"?y=",":I==="ssv"?y=";":I==="tsv"&&(y="	");for(var G=1;G<arguments.length;G++)typeof arguments[G]=="function"?f===void 0?f=arguments[G]:g===void 0&&(g=arguments[G]):typeof arguments[G]=="string"&&(arguments[G]==="header"&&(Z=!0),arguments[G]==="csv"?y=",":arguments[G]==="ssv"?y=";":arguments[G]==="tsv"&&(y="	"));var R=new a.default.Table,C=this;return this.httpDo(h,"GET","table",function(V){for(var x,w,k={},A=0,Y=[],U=0,M=null,j=function(){k.currentState=A,k.token=""},K=function(){M.push(k.token),j()},P=function(){k.currentState=4,Y.push(M),M=null};;){if((x=V[U++])==null){if(k.escaped)throw new Error("Unclosed quote in file.");if(M){K(),P();break}}if(M===null&&(k.escaped=!1,M=[],j()),k.currentState===A){if(x==='"'){k.escaped=!0,k.currentState=1;continue}k.currentState=1}if(k.currentState===1&&k.escaped)if(x==='"')V[U]==='"'?(k.token+='"',U++):(k.escaped=!1,k.currentState=2);else{if(x==="\r")continue;k.token+=x}else x==="\r"?(V[U]===`
`&&U++,K(),P()):x===`
`?(K(),P()):x===y?K():k.currentState===1&&(k.token+=x)}if(Z)R.columns=Y.shift();else for(var J=0;J<Y[0].length;J++)R.columns[J]="null";for(var E=0;E<Y.length;E++)(Y[E].length!==1||Y[E][0]!=="undefined"&&Y[E][0]!=="")&&((w=new a.default.TableRow).arr=Y[E],w.obj=function(O,D){var le={};if((D=D||[])===void 0)for(var X=0;X<O.length;X++)D[X.toString()]=X;for(var T=0;T<D.length;T++){var N=D[T],z=O[T];le[N]=z}return le}(Y[E],R.columns),R.addRow(w));typeof f=="function"&&f(R),C._decrementPreload()},function(V){a.default._friendlyFileLoadError(2,h),g?g(V):console.error(V)}),R},a.default.prototype.loadXML=function(){for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];for(var y,Z,I=new a.default.XML,G=1;G<f.length;G++){var R=f[G];typeof R=="function"&&(y===void 0?y=R:Z===void 0&&(Z=R))}var C=this;return this.httpDo(f[0],"GET","xml",function(V){for(var x in V)I[x]=V[x];y!==void 0&&y(I),C._decrementPreload()},function(V){if(a.default._friendlyFileLoadError(1,V),!Z)throw V;Z(V)}),I},a.default.prototype.loadBytes=function(h,f,g){var y={},Z=this;return this.httpDo(h,"GET","arrayBuffer",function(I){y.bytes=new Uint8Array(I),typeof f=="function"&&f(y),Z._decrementPreload()},function(I){if(a.default._friendlyFileLoadError(6,h),!g)throw I;g(I)}),y},a.default.prototype.httpGet=function(){a.default._validateParameters("httpGet",arguments);var h=Array.prototype.slice.call(arguments);return h.splice(1,0,"GET"),a.default.prototype.httpDo.apply(this,h)},a.default.prototype.httpPost=function(){a.default._validateParameters("httpPost",arguments);var h=Array.prototype.slice.call(arguments);return h.splice(1,0,"POST"),a.default.prototype.httpDo.apply(this,h)},a.default.prototype.httpDo=function(){for(var h,f,g,y={},Z=0,I="text/plain",G=arguments.length-1;0<G&&typeof(G<0||arguments.length<=G?void 0:arguments[G])=="function";G--)Z++;var R=arguments.length-Z,C=arguments.length<=0?void 0:arguments[0];if(R==2&&typeof C=="string"&&p(arguments.length<=1?void 0:arguments[1])==="object")Y=new Request(C,arguments.length<=1?void 0:arguments[1]),f=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3];else{for(var V,x="GET",w=1;w<arguments.length;w++){var k=w<0||arguments.length<=w?void 0:arguments[w];if(typeof k=="string")k==="GET"||k==="POST"||k==="PUT"||k==="DELETE"?x=k:k==="json"||k==="jsonp"||k==="binary"||k==="arrayBuffer"||k==="xml"||k==="text"||k==="table"?h=k:V=k;else if(typeof k=="number")V=k.toString();else if(p(k)==="object")if(k.hasOwnProperty("jsonpCallback")||k.hasOwnProperty("jsonpCallbackFunction"))for(var A in k)y[A]=k[A];else I=k instanceof a.default.XML?(V=k.serialize(),"application/xml"):(V=JSON.stringify(k),"application/json");else typeof k=="function"&&(f?g=k:f=k)}var R=x==="GET"?new Headers:new Headers({"Content-Type":I}),Y=new Request(C,{method:x,mode:"cors",body:V,headers:R})}return(R=(R=(h=h||(C.includes("json")?"json":C.includes("xml")?"xml":"text"))==="jsonp"?(0,l.default)(C,y):fetch(Y)).then(function(U){if(!U.ok)throw(M=new Error(U.body)).status=U.status,M.ok=!1,M;var M=0;switch((M=h!=="jsonp"?U.headers.get("content-length"):M)&&64e6<M&&a.default._friendlyFileLoadError(7,C),h){case"json":case"jsonp":return U.json();case"binary":return U.blob();case"arrayBuffer":return U.arrayBuffer();case"xml":return U.text().then(function(j){return j=new DOMParser().parseFromString(j,"text/xml"),new a.default.XML(j.documentElement)});default:return U.text()}})).then(f||function(){}),R.catch(g||console.error),R},window.URL=window.URL||window.webkitURL,a.default.prototype._pWriters=[],a.default.prototype.createWriter=function(h,f){var g,y;for(y in a.default.prototype._pWriters)if(a.default.prototype._pWriters[y].name===h)return g=new a.default.PrintWriter(h+this.millis(),f),a.default.prototype._pWriters.push(g),g;return g=new a.default.PrintWriter(h,f),a.default.prototype._pWriters.push(g),g},a.default.PrintWriter=function(h,f){var g=this;this.name=h,this.content="",this.write=function(y){this.content+=y},this.print=function(y){this.content+="".concat(y,`
`)},this.clear=function(){this.content=""},this.close=function(){var y,Z=[];for(y in Z.push(this.content),a.default.prototype.writeFile(Z,h,f),a.default.prototype._pWriters)a.default.prototype._pWriters[y].name===this.name&&a.default.prototype._pWriters.splice(y,1);g.clear(),g={}}},a.default.prototype.save=function(h,f,g){var y=arguments,Z=(this._curElement||this).elt;if(y.length===0)a.default.prototype.saveCanvas(Z);else if(y[0]instanceof a.default.Renderer||y[0]instanceof a.default.Graphics)a.default.prototype.saveCanvas(y[0].elt,y[1],y[2]);else if(y.length===1&&typeof y[0]=="string")a.default.prototype.saveCanvas(Z,y[0]);else switch(d(y[1],y[2])[1]){case"json":return void a.default.prototype.saveJSON(y[0],y[1],y[2]);case"txt":return void a.default.prototype.saveStrings(y[0],y[1],y[2]);default:y[0]instanceof Array?a.default.prototype.saveStrings(y[0],y[1],y[2]):y[0]instanceof a.default.Table?a.default.prototype.saveTable(y[0],y[1],y[2]):y[0]instanceof a.default.Image?a.default.prototype.saveCanvas(y[0].canvas,y[1]):y[0]instanceof a.default.SoundFile&&a.default.prototype.saveSound(y[0],y[1],y[2],y[3])}},a.default.prototype.saveJSON=function(h,f,g){a.default._validateParameters("saveJSON",arguments),g=g?JSON.stringify(h):JSON.stringify(h,void 0,2),this.saveStrings(g.split(`
`),f,"json")},a.default.prototype.saveJSONObject=a.default.prototype.saveJSON,a.default.prototype.saveJSONArray=a.default.prototype.saveJSON,a.default.prototype.saveStrings=function(h,f,g,y){a.default._validateParameters("saveStrings",arguments);for(var Z=this.createWriter(f,g||"txt"),I=0;I<h.length;I++)y?Z.write(h[I]+`\r
`):Z.write(h[I]+`
`);Z.close(),Z.clear()},a.default.prototype.saveTable=function(h,f,g){a.default._validateParameters("saveTable",arguments),y=g===void 0?f.substring(f.lastIndexOf(".")+1,f.length):g;var y,Z=this.createWriter(f,y),I=h.columns,G=y==="tsv"?"	":",";if(y!=="html"){if(I[0]!=="0"){for(var R=0;R<I.length;R++)R<I.length-1?Z.write(I[R]+G):Z.write(I[R]);Z.write(`
`)}for(var C=0;C<h.rows.length;C++){for(var V=void 0,V=0;V<h.rows[C].arr.length;V++)V<h.rows[C].arr.length-1?y==="csv"&&String(h.rows[C].arr[V]).includes(",")?Z.write('"'+h.rows[C].arr[V]+'"'+G):Z.write(h.rows[C].arr[V]+G):y==="csv"&&String(h.rows[C].arr[V]).includes(",")?Z.write('"'+h.rows[C].arr[V]+'"'):Z.write(h.rows[C].arr[V]);Z.write(`
`)}}else{if(Z.print("<html>"),Z.print("<head>"),Z.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),Z.print("</head>"),Z.print("<body>"),Z.print("  <table>"),I[0]!=="0"){Z.print("    <tr>");for(var x=0;x<I.length;x++){var w=u(I[x]);Z.print("      <td>".concat(w)),Z.print("      </td>")}Z.print("    </tr>")}for(var k=0;k<h.rows.length;k++){Z.print("    <tr>");for(var A=0;A<h.columns.length;A++){var Y=u(h.rows[k].getString(A));Z.print("      <td>".concat(Y)),Z.print("      </td>")}Z.print("    </tr>")}Z.print("  </table>"),Z.print("</body>"),Z.print("</html>")}Z.close(),Z.clear()},a.default.prototype.writeFile=function(Z,f,g){var y="application/octet-stream",Z=(a.default.prototype._isSafari()&&(y="text/plain"),new Blob(Z,{type:y}));a.default.prototype.downloadFile(Z,f,g)},a.default.prototype.downloadFile=function(h,Z,I){var y,Z=d(Z,I),I=Z[0];h instanceof Blob?c.default.saveAs(h,I):((y=document.createElement("a")).href=h,y.download=I,y.onclick=function(G){document.body.removeChild(G.target),G.stopPropagation()},y.style.display="none",document.body.appendChild(y),a.default.prototype._isSafari()&&(h=(h=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(Z[1],'"'),alert(h)),y.click())},a.default.prototype._checkFileExtension=d,a.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},r=a.default,s.default=r},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232,"es6-promise/auto":233,"fetch-jsonp":235,"file-saver":236,"whatwg-fetch":245}],294:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Table=function(a){this.columns=[],this.rows=[]},o.default.Table.prototype.addRow=function(a){if(a=a||new o.default.TableRow,a.arr===void 0||a.obj===void 0)throw new Error("invalid TableRow: ".concat(a));return(a.table=this).rows.push(a),a},o.default.Table.prototype.removeRow=function(a){this.rows[a].table=null,a=this.rows.splice(a+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(a)},o.default.Table.prototype.getRow=function(a){return this.rows[a]},o.default.Table.prototype.getRows=function(){return this.rows},o.default.Table.prototype.findRow=function(a,l){if(typeof l=="string"){for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[l]===a)return this.rows[c]}else for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[l]===a)return this.rows[m];return null},o.default.Table.prototype.findRows=function(a,l){var c=[];if(typeof l=="string")for(var m=0;m<this.rows.length;m++)this.rows[m].obj[l]===a&&c.push(this.rows[m]);else for(var p=0;p<this.rows.length;p++)this.rows[p].arr[l]===a&&c.push(this.rows[p]);return c},o.default.Table.prototype.matchRow=function(a,l){if(typeof l=="number"){for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[l].match(a))return this.rows[c]}else for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[l].match(a))return this.rows[m];return null},o.default.Table.prototype.matchRows=function(a,l){var c=[];if(typeof l=="number")for(var m=0;m<this.rows.length;m++)this.rows[m].arr[l].match(a)&&c.push(this.rows[m]);else for(var p=0;p<this.rows.length;p++)this.rows[p].obj[l].match(a)&&c.push(this.rows[p]);return c},o.default.Table.prototype.getColumn=function(a){var l=[];if(typeof a=="string")for(var c=0;c<this.rows.length;c++)l.push(this.rows[c].obj[a]);else for(var m=0;m<this.rows.length;m++)l.push(this.rows[m].arr[a]);return l},o.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},o.default.Table.prototype.addColumn=function(a){this.columns.push(a||null)},o.default.Table.prototype.getColumnCount=function(){return this.columns.length},o.default.Table.prototype.getRowCount=function(){return this.rows.length},o.default.Table.prototype.removeTokens=function(a,l){for(var c=[],m=0;m<a.length;m++)c.push(a.charAt(m).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var p=new RegExp(c.join("|"),"g");if(l===void 0)for(var u=0;u<this.columns.length;u++)for(var d=0;d<this.rows.length;d++){var h=(h=this.rows[d].arr[u]).replace(p,"");this.rows[d].arr[u]=h,this.rows[d].obj[this.columns[u]]=h}else if(typeof l=="string")for(var f=0;f<this.rows.length;f++){var g=(g=this.rows[f].obj[l]).replace(p,""),y=(this.rows[f].obj[l]=g,this.columns.indexOf(l));this.rows[f].arr[y]=g}else for(var Z=0;Z<this.rows.length;Z++){var I=(I=this.rows[Z].arr[l]).replace(p,"");this.rows[Z].arr[l]=I,this.rows[Z].obj[this.columns[l]]=I}},o.default.Table.prototype.trim=function(a){var l=new RegExp(" ","g");if(a===void 0)for(var c=0;c<this.columns.length;c++)for(var m=0;m<this.rows.length;m++){var p=(p=this.rows[m].arr[c]).replace(l,"");this.rows[m].arr[c]=p,this.rows[m].obj[this.columns[c]]=p}else if(typeof a=="string")for(var u=0;u<this.rows.length;u++){var d=(d=this.rows[u].obj[a]).replace(l,""),h=(this.rows[u].obj[a]=d,this.columns.indexOf(a));this.rows[u].arr[h]=d}else for(var f=0;f<this.rows.length;f++){var g=(g=this.rows[f].arr[a]).replace(l,"");this.rows[f].arr[a]=g,this.rows[f].obj[this.columns[a]]=g}},o.default.Table.prototype.removeColumn=function(m){typeof m=="string"?c=this.columns.indexOf(l=m):l=this.columns[c=m];var l,c,m=this.columns.splice(c+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(m);for(var p=0;p<this.rows.length;p++){var u=this.rows[p].arr,d=u.splice(c+1,u.length);u.pop(),this.rows[p].arr=u.concat(d),delete this.rows[p].obj[l]}},o.default.Table.prototype.set=function(a,l,c){this.rows[a].set(l,c)},o.default.Table.prototype.setNum=function(a,l,c){this.rows[a].setNum(l,c)},o.default.Table.prototype.setString=function(a,l,c){this.rows[a].setString(l,c)},o.default.Table.prototype.get=function(a,l){return this.rows[a].get(l)},o.default.Table.prototype.getNum=function(a,l){return this.rows[a].getNum(l)},o.default.Table.prototype.getString=function(a,l){return this.rows[a].getString(l)},o.default.Table.prototype.getObject=function(a){for(var l,c={},m=0;m<this.rows.length;m++)if(l=this.rows[m].obj,typeof a=="string"){if(!(0<=this.columns.indexOf(a)))throw new Error('This table has no column named "'.concat(a,'"'));c[l[a]]=l}else c[m]=this.rows[m].obj;return c},o.default.Table.prototype.getArray=function(){for(var a=[],l=0;l<this.rows.length;l++)a.push(this.rows[l].arr);return a},r=o.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],295:[function(r,i,s){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.TableRow=function(o,a){var l=[],c={};o&&(l=o.split(a=a||","));for(var m=0;m<l.length;m++){var p=m,u=l[m];c[p]=u}this.arr=l,this.obj=c,this.table=null},r.default.TableRow.prototype.set=function(o,a){if(typeof o=="string"){var l=this.table.columns.indexOf(o);if(!(0<=l))throw new Error('This table has no column named "'.concat(o,'"'));this.obj[o]=a,this.arr[l]=a}else{if(!(o<this.table.columns.length))throw new Error("Column #".concat(o," is out of the range of this table"));this.arr[o]=a,l=this.table.columns[o],this.obj[l]=a}},r.default.TableRow.prototype.setNum=function(o,a){a=parseFloat(a),this.set(o,a)},r.default.TableRow.prototype.setString=function(o,a){a=a.toString(),this.set(o,a)},r.default.TableRow.prototype.get=function(o){return(typeof o=="string"?this.obj:this.arr)[o]},r.default.TableRow.prototype.getNum=function(o){var a=parseFloat(typeof o=="string"?this.obj[o]:this.arr[o]);if(a.toString()==="NaN")throw"Error: ".concat(this.obj[o]," is NaN (Not a Number)");return a},r.default.TableRow.prototype.getString=function(o){return(typeof o=="string"?this.obj:this.arr)[o].toString()},r=r.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],296:[function(r,i,s){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(l){for(var c=[],m=0;m<l.length;m++)c.push(new o.default.XML(l[m]));return c}o.default.XML=function(l){l?this.DOM=l:(l=document.implementation.createDocument(null,"doc"),this.DOM=l.createElement("root"))},o.default.XML.prototype.getParent=function(){return new o.default.XML(this.DOM.parentElement)},o.default.XML.prototype.getName=function(){return this.DOM.tagName},o.default.XML.prototype.setName=function(l){var c=this.DOM.innerHTML,m=this.DOM.attributes,p=document.implementation.createDocument(null,"default").createElement(l);p.innerHTML=c;for(var u=0;u<m.length;u++)p.setAttribute(m[u].nodeName,m.nodeValue);this.DOM=p},o.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},o.default.XML.prototype.listChildren=function(){for(var l=[],c=0;c<this.DOM.childNodes.length;c++)l.push(this.DOM.childNodes[c].nodeName);return l},o.default.XML.prototype.getChildren=function(l){return a(l?this.DOM.getElementsByTagName(l):this.DOM.children)},o.default.XML.prototype.getChild=function(l){if(typeof l!="string")return new o.default.XML(this.DOM.children[l]);var c=!0,m=!1,p=void 0;try{for(var u,d=this.DOM.children[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var h=u.value;if(h.tagName===l)return new o.default.XML(h)}}catch(f){m=!0,p=f}finally{try{c||d.return==null||d.return()}finally{if(m)throw p}}},o.default.XML.prototype.addChild=function(l){l instanceof o.default.XML&&this.DOM.appendChild(l.DOM)},o.default.XML.prototype.removeChild=function(l){var c=-1;if(typeof l=="string"){for(var m=0;m<this.DOM.children.length;m++)if(this.DOM.children[m].tagName===l){c=m;break}}else c=l;c!==-1&&this.DOM.removeChild(this.DOM.children[c])},o.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},o.default.XML.prototype.listAttributes=function(){var l=[],c=!0,m=!1,p=void 0;try{for(var u,d=this.DOM.attributes[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var h=u.value;l.push(h.nodeName)}}catch(f){m=!0,p=f}finally{try{c||d.return==null||d.return()}finally{if(m)throw p}}return l},o.default.XML.prototype.hasAttribute=function(l){var c={},m=!0,p=!1,u=void 0;try{for(var d,h=this.DOM.attributes[Symbol.iterator]();!(m=(d=h.next()).done);m=!0){var f=d.value;c[f.nodeName]=f.nodeValue}}catch(g){p=!0,u=g}finally{try{m||h.return==null||h.return()}finally{if(p)throw u}}return!!c[l]},o.default.XML.prototype.getNum=function(l,c){var m={},p=!0,u=!1,d=void 0;try{for(var h,f=this.DOM.attributes[Symbol.iterator]();!(p=(h=f.next()).done);p=!0){var g=h.value;m[g.nodeName]=g.nodeValue}}catch(y){u=!0,d=y}finally{try{p||f.return==null||f.return()}finally{if(u)throw d}}return Number(m[l])||c||0},o.default.XML.prototype.getString=function(l,c){var m={},p=!0,u=!1,d=void 0;try{for(var h,f=this.DOM.attributes[Symbol.iterator]();!(p=(h=f.next()).done);p=!0){var g=h.value;m[g.nodeName]=g.nodeValue}}catch(y){u=!0,d=y}finally{try{p||f.return==null||f.return()}finally{if(u)throw d}}return m[l]?String(m[l]):c||null},o.default.XML.prototype.setAttribute=function(l,c){this.DOM.setAttribute(l,c)},o.default.XML.prototype.getContent=function(l){var c=this.DOM.textContent;return(c=c.replace(/\s\s+/g,","))||l||null},o.default.XML.prototype.setContent=function(l){this.DOM.children.length||(this.DOM.textContent=l)},o.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)},r=o.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],297:[function(r,i,s){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var l=arguments.length,c=[],m=0,p=0;p<l;p++){var u=arguments[p];if((u=+u)===1/0||u===-1/0)return 1/0;m<(u=Math.abs(u))&&(m=u),c[p]=u}m===0&&(m=1);for(var y=0,g=0,d=0;d<l;d++)var h=c[d]/m,h=h*h-g,f=y+h,g=f-y-h,y=f;return Math.sqrt(y)*m}o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(l,c,m){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(l,m),c)},o.default.prototype.dist=function(){for(var l=arguments.length,c=new Array(l),m=0;m<l;m++)c[m]=arguments[m];return o.default._validateParameters("dist",c),c.length===4?a(c[2]-c[0],c[3]-c[1]):c.length===6?a(c[3]-c[0],c[4]-c[1],c[5]-c[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(l,c,m){return o.default._validateParameters("lerp",arguments),m*(c-l)+l},o.default.prototype.log=Math.log,o.default.prototype.mag=function(l,c){return o.default._validateParameters("mag",arguments),a(l,c)},o.default.prototype.map=function(l,c,m,p,u,d){return o.default._validateParameters("map",arguments),l=(l-c)/(m-c)*(u-p)+p,d?p<u?this.constrain(l,p,u):this.constrain(l,u,p):l},o.default.prototype.max=function(){for(var l=arguments.length,c=new Array(l),m=0;m<l;m++)c[m]=arguments[m];return c[0]instanceof Array?Math.max.apply(null,c[0]):Math.max.apply(null,c)},o.default.prototype.min=function(){for(var l=arguments.length,c=new Array(l),m=0;m<l;m++)c[m]=arguments[m];return c[0]instanceof Array?Math.min.apply(null,c[0]):Math.min.apply(null,c)},o.default.prototype.norm=function(l,c,m){return o.default._validateParameters("norm",arguments),this.map(l,c,m,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(l,c){return c?(c=Math.pow(10,c),Math.round(l*c)/c):Math.round(l)},o.default.prototype.sq=function(l){return l*l},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(p){o.default._validateParameters("fract",arguments);var c,m=0,p=Number(p);return isNaN(p)||Math.abs(p)===1/0?p:(p<0&&(p=-p,m=1),String(p).includes(".")&&!String(p).includes("e")?(c=String(p),c=Number("0"+c.slice(c.indexOf("."))),Math.abs(m-c)):p<1?Math.abs(m-p):0)},r=o.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.constructor":169,"core-js/modules/es.string.includes":185}],298:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(c,m,p){return(a=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(u,d,h){var f=[null];return f.push.apply(f,d),d=new(Function.bind.apply(u,f)),h&&l(d,h.prototype),d}).apply(null,arguments)}function l(c,m){return(l=Object.setPrototypeOf||function(p,u){return p.__proto__=u,p})(c,m)}o.default.prototype.createVector=function(c,m,p){return this instanceof o.default?a(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(c,m,p)},r=o.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],299:[function(p,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,p=(p=p("../core/main"))&&p.__esModule?p:{default:p};function o(u){return .5*(1-Math.cos(u*Math.PI))}var a,l=4095,c=4,m=.5,p=(p.default.prototype.noise=function(u){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(a==null){a=new Array(4096);for(var f=0;f<4096;f++)a[f]=Math.random()}u<0&&(u=-u),d<0&&(d=-d),h<0&&(h=-h);for(var g,y,Z=Math.floor(u),I=Math.floor(d),G=Math.floor(h),R=u-Z,C=d-I,V=h-G,x=0,w=.5,k=0;k<c;k++){var A=Z+(I<<4)+(G<<8),Y=o(R),U=o(C),M=a[A&l];M+=Y*(a[A+1&l]-M),g=a[A+16&l],M+=U*((g+=Y*(a[A+16+1&l]-g))-M),g=a[(A+=256)&l],g+=Y*(a[A+1&l]-g),y=a[A+16&l],g+=U*((y+=Y*(a[A+16+1&l]-y))-g),x+=(M+=o(V)*(g-M))*w,w*=m,Z<<=1,I<<=1,G<<=1,1<=(R*=2)&&(Z++,R--),1<=(C*=2)&&(I++,C--),1<=(V*=2)&&(G++,V--)}return x},p.default.prototype.noiseDetail=function(u,d){0<u&&(c=u),0<d&&(m=d)},p.default.prototype.noiseSeed=function(u){f=4294967296;var d,h,f,g={setSeed:function(Z){h=d=(Z==null?Math.random()*f:Z)>>>0},getSeed:function(){return d},rand:function(){return(h=(1664525*h+1013904223)%f)/f}};g.setSeed(u),a=new Array(4096);for(var y=0;y<4096;y++)a[y]=g.rand()},p.default);s.default=p},{"../core/main":267}],300:[function(r,i,s){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function a(h){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(d=r("../core/main"))&&d.__esModule?d:{default:d},c=function(h){if(h&&h.__esModule)return h;if(h===null||a(h)!=="object"&&typeof h!="function")return{default:h};var f=m();if(f&&f.has(h))return f.get(h);var g,y={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var I;Object.prototype.hasOwnProperty.call(h,g)&&((I=Z?Object.getOwnPropertyDescriptor(h,g):null)&&(I.get||I.set)?Object.defineProperty(y,g,I):y[g]=h[g])}return y.default=h,f&&f.set(h,y),y}(r("../core/constants"));function m(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,m=function(){return h},h)}l.default.Vector=function(){var h,f,g={}.toString.call(arguments[0])==="[object Function]"?(this.isPInst=!0,this._fromRadians=arguments[0],this._toRadians=arguments[1],h=arguments[2]||0,f=arguments[3]||0,arguments[4]||0):(h=arguments[0]||0,f=arguments[1]||0,arguments[2]||0);this.x=h,this.y=f,this.z=g},l.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},l.default.Vector.prototype.set=function(h,f,g){return h instanceof l.default.Vector?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):h instanceof Array?(this.x=h[0]||0,this.y=h[1]||0,this.z=h[2]||0):(this.x=h||0,this.y=f||0,this.z=g||0),this},l.default.Vector.prototype.copy=function(){return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new l.default.Vector(this.x,this.y,this.z)},l.default.Vector.prototype.add=function(h,f,g){return h instanceof l.default.Vector?(this.x+=h.x||0,this.y+=h.y||0,this.z+=h.z||0):h instanceof Array?(this.x+=h[0]||0,this.y+=h[1]||0,this.z+=h[2]||0):(this.x+=h||0,this.y+=f||0,this.z+=g||0),this};function p(h,f){return h!==0&&(this.x=this.x%h),f!==0&&(this.y=this.y%f),this}function u(h,f,g){return h!==0&&(this.x=this.x%h),f!==0&&(this.y=this.y%f),g!==0&&(this.z=this.z%g),this}l.default.Vector.prototype.rem=function(h,f,g){var y;if(h instanceof l.default.Vector){if(Number.isFinite(h.x)&&Number.isFinite(h.y)&&Number.isFinite(h.z))return Z=parseFloat(h.x),I=parseFloat(h.y),y=parseFloat(h.z),u.call(this,Z,I,y)}else if(h instanceof Array){if(h.every(function(G){return Number.isFinite(G)}))return h.length===2?p.call(this,h[0],h[1]):h.length===3?u.call(this,h[0],h[1],h[2]):void 0}else if(arguments.length===1){if(Number.isFinite(h)&&h!==0)return this.x=this.x%h,this.y=this.y%h,this.z=this.z%h,this}else if(arguments.length===2){var Z=Array.prototype.slice.call(arguments);if(Z.every(function(G){return Number.isFinite(G)})&&Z.length===2)return p.call(this,Z[0],Z[1])}else if(arguments.length===3){var I=Array.prototype.slice.call(arguments);if(I.every(function(G){return Number.isFinite(G)})&&I.length===3)return u.call(this,I[0],I[1],I[2])}},l.default.Vector.prototype.sub=function(h,f,g){return h instanceof l.default.Vector?(this.x-=h.x||0,this.y-=h.y||0,this.z-=h.z||0):h instanceof Array?(this.x-=h[0]||0,this.y-=h[1]||0,this.z-=h[2]||0):(this.x-=h||0,this.y-=f||0,this.z-=g||0),this},l.default.Vector.prototype.mult=function(h,f,g){var y;return h instanceof l.default.Vector?Number.isFinite(h.x)&&Number.isFinite(h.y)&&Number.isFinite(h.z)&&typeof h.x=="number"&&typeof h.y=="number"&&typeof h.z=="number"?(this.x*=h.x,this.y*=h.y,this.z*=h.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):h instanceof Array?h.every(function(Z){return Number.isFinite(Z)})&&h.every(function(Z){return typeof Z=="number"})?h.length===1?(this.x*=h[0],this.y*=h[0],this.z*=h[0]):h.length===2?(this.x*=h[0],this.y*=h[1]):h.length===3&&(this.x*=h[0],this.y*=h[1],this.z*=h[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(y=Array.prototype.slice.call(arguments)).every(function(Z){return Number.isFinite(Z)})&&y.every(function(Z){return typeof Z=="number"})?(arguments.length===1&&(this.x*=h,this.y*=h,this.z*=h),arguments.length===2&&(this.x*=h,this.y*=f),arguments.length===3&&(this.x*=h,this.y*=f,this.z*=g)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},l.default.Vector.prototype.div=function(h,f,g){if(h instanceof l.default.Vector)if(Number.isFinite(h.x)&&Number.isFinite(h.y)&&Number.isFinite(h.z)&&typeof h.x=="number"&&typeof h.y=="number"&&typeof h.z=="number"){if(h.x===0||h.y===0||h.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=h.x,this.y/=h.y,this.z/=h.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(h instanceof Array)if(h.every(function(Z){return Number.isFinite(Z)})&&h.every(function(Z){return typeof Z=="number"})){if(h.some(function(Z){return Z===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;h.length===1?(this.x/=h[0],this.y/=h[0],this.z/=h[0]):h.length===2?(this.x/=h[0],this.y/=h[1]):h.length===3&&(this.x/=h[0],this.y/=h[1],this.z/=h[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else{var y=Array.prototype.slice.call(arguments);if(y.every(function(Z){return Number.isFinite(Z)})&&y.every(function(Z){return typeof Z=="number"})){if(y.some(function(Z){return Z===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=h,this.y/=h,this.z/=h),arguments.length===2&&(this.x/=h,this.y/=f),arguments.length===3&&(this.x/=h,this.y/=f,this.z/=g)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number")}return this},l.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},l.default.Vector.prototype.magSq=function(){var h=this.x,f=this.y,g=this.z;return h*h+f*f+g*g},l.default.Vector.prototype.dot=function(h,f,g){return h instanceof l.default.Vector?this.dot(h.x,h.y,h.z):this.x*(h||0)+this.y*(f||0)+this.z*(g||0)},l.default.Vector.prototype.cross=function(y){var f=this.y*y.z-this.z*y.y,g=this.z*y.x-this.x*y.z,y=this.x*y.y-this.y*y.x;return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,f,g,y):new l.default.Vector(f,g,y)},l.default.Vector.prototype.dist=function(h){return h.copy().sub(this).mag()},l.default.Vector.prototype.normalize=function(){var h=this.mag();return h!==0&&this.mult(1/h),this},l.default.Vector.prototype.limit=function(h){var f=this.magSq();return h*h<f&&this.div(Math.sqrt(f)).mult(h),this},l.default.Vector.prototype.setMag=function(h){return this.normalize().mult(h)},l.default.Vector.prototype.heading=function(){var h=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(h):h},l.default.Vector.prototype.setHeading=function(h){this.isPInst&&(h=this._toRadians(h));var f=this.mag();return this.x=f*Math.cos(h),this.y=f*Math.sin(h),this},l.default.Vector.prototype.rotate=function(f){var f=this.heading()+f,g=(this.isPInst&&(f=this._toRadians(f)),this.mag());return this.x=Math.cos(f)*g,this.y=Math.sin(f)*g,this},l.default.Vector.prototype.angleBetween=function(h){var f=this.dot(h)/(this.mag()*h.mag()),f=Math.acos(Math.min(1,Math.max(-1,f)));return f*=Math.sign(this.cross(h).z||1),f=this.isPInst?this._fromRadians(f):f},l.default.Vector.prototype.lerp=function(h,f,g,y){return h instanceof l.default.Vector?this.lerp(h.x,h.y,h.z,f):(this.x+=(h-this.x)*y||0,this.y+=(f-this.y)*y||0,this.z+=(g-this.z)*y||0,this)},l.default.Vector.prototype.reflect=function(h){return h.normalize(),this.sub(h.mult(2*this.dot(h)))},l.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},l.default.Vector.prototype.equals=function(I,f,g){var y,Z,I=I instanceof l.default.Vector?(y=I.x||0,Z=I.y||0,I.z||0):I instanceof Array?(y=I[0]||0,Z=I[1]||0,I[2]||0):(y=I||0,Z=f||0,g||0);return this.x===y&&this.y===Z&&this.z===I},l.default.Vector.fromAngle=function(h,f){return new l.default.Vector((f=f===void 0?1:f)*Math.cos(h),f*Math.sin(h),0)},l.default.Vector.fromAngles=function(G,Z,g){g===void 0&&(g=1);var y=Math.cos(Z),Z=Math.sin(Z),I=Math.cos(G),G=Math.sin(G);return new l.default.Vector(g*G*Z,-g*I,g*G*y)},l.default.Vector.random2D=function(){return this.fromAngle(Math.random()*c.TWO_PI)},l.default.Vector.random3D=function(){var h=Math.random()*c.TWO_PI,f=2*Math.random()-1,y=Math.sqrt(1-f*f),g=y*Math.cos(h),y=y*Math.sin(h);return new l.default.Vector(g,y,f)},l.default.Vector.add=function(h,f,g){return g?g.set(h):(g=h.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),g.add(f),g},l.default.Vector.rem=function(h,f){if(h instanceof l.default.Vector&&f instanceof l.default.Vector)return(h=h.copy()).rem(f),h},l.default.Vector.sub=function(h,f,g){return g?g.set(h):(g=h.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),g.sub(f),g},l.default.Vector.mult=function(h,f,g){return g?g.set(h):(g=h.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),g.mult(f),g},l.default.Vector.rotate=function(h,f,g){return arguments.length===2?g=h.copy():(g instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),g.set(h)),g.rotate(f),g},l.default.Vector.div=function(h,f,g){return g?g.set(h):(g=h.copy(),arguments.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),g.div(f),g},l.default.Vector.dot=function(h,f){return h.dot(f)},l.default.Vector.cross=function(h,f){return h.cross(f)},l.default.Vector.dist=function(h,f){return h.dist(f)},l.default.Vector.lerp=function(h,f,g,y){return y?y.set(h):(y=h.copy(),arguments.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),y.lerp(f,g),y},l.default.Vector.mag=function(y){var f=y.x,g=y.y,y=y.z;return Math.sqrt(f*f+g*g+y*y)},l.default.Vector.normalize=function(h,f){return arguments.length<2?f=h.copy():(f instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),f.set(h)),f.normalize()};var d=l.default.Vector;s.default=d},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":168,"core-js/modules/es.number.constructor":169,"core-js/modules/es.number.is-finite":170,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],301:[function(m,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(m=m("../core/main"))&&m.__esModule?m:{default:m},a="_lcg_random_state",l=4294967296,c=0,m=(o.default.prototype._lcg=function(p){return this[p]=(1664525*this[p]+1013904223)%l,this[p]/l},o.default.prototype._lcgSetSeed=function(p,u){this[p]=(u==null?Math.random()*l:u)>>>0},o.default.prototype.randomSeed=function(p){this._lcgSetSeed(a,p),this._gaussian_previous=!1},o.default.prototype.random=function(p,u){var d,h;return o.default._validateParameters("random",arguments),d=this[a]!=null?this._lcg(a):Math.random(),p===void 0?d:u===void 0?p instanceof Array?p[Math.floor(d*p.length)]:d*p:(u<p&&(h=p,p=u,u=h),d*(u-p)+p)},o.default.prototype.randomGaussian=function(p){var u,d,h,f,g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)u=c,this._gaussian_previous=!1;else{for(;1<=(f=(d=this.random(2)-1)*d+(h=this.random(2)-1)*h););u=d*(f=Math.sqrt(-2*Math.log(f)/f)),c=h*f,this._gaussian_previous=!0}return u*g+(p||0)},o.default);s.default=m},{"../core/main":267}],302:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}l.default.prototype._angleMode=c.RADIANS,l.default.prototype.acos=function(u){return this._fromRadians(Math.acos(u))},l.default.prototype.asin=function(u){return this._fromRadians(Math.asin(u))},l.default.prototype.atan=function(u){return this._fromRadians(Math.atan(u))},l.default.prototype.atan2=function(u,d){return this._fromRadians(Math.atan2(u,d))},l.default.prototype.cos=function(u){return Math.cos(this._toRadians(u))},l.default.prototype.sin=function(u){return Math.sin(this._toRadians(u))},l.default.prototype.tan=function(u){return Math.tan(this._toRadians(u))},l.default.prototype.degrees=function(u){return u*c.RAD_TO_DEG},l.default.prototype.radians=function(u){return u*c.DEG_TO_RAD},l.default.prototype.angleMode=function(u){if(l.default._validateParameters("angleMode",arguments),u===void 0)return this._angleMode;u!==c.DEGREES&&u!==c.RADIANS||(this._angleMode=u)},l.default.prototype._toRadians=function(u){return this._angleMode===c.DEGREES?u*c.DEG_TO_RAD:u},l.default.prototype._toDegrees=function(u){return this._angleMode===c.RADIANS?u*c.RAD_TO_DEG:u},l.default.prototype._fromRadians=function(u){return this._angleMode===c.DEGREES?u*c.RAD_TO_DEG:u};var p=l.default;s.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],303:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.textAlign=function(a,l){var c;return o.default._validateParameters("textAlign",arguments),(c=this._renderer).textAlign.apply(c,arguments)},o.default.prototype.textLeading=function(a){var l;return o.default._validateParameters("textLeading",arguments),(l=this._renderer).textLeading.apply(l,arguments)},o.default.prototype.textSize=function(a){var l;return o.default._validateParameters("textSize",arguments),(l=this._renderer).textSize.apply(l,arguments)},o.default.prototype.textStyle=function(a){var l;return o.default._validateParameters("textStyle",arguments),(l=this._renderer).textStyle.apply(l,arguments)},o.default.prototype.textWidth=function(){for(var a,l=arguments.length,c=new Array(l),m=0;m<l;m++)c[m]=arguments[m];return c[0]+="",o.default._validateParameters("textWidth",c),c[0].length===0?0:(a=this._renderer).textWidth.apply(a,c)},o.default.prototype.textAscent=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o.default._validateParameters("textAscent",l),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o.default._validateParameters("textDescent",l),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(a){if(a!=="WORD"&&a!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(a)},r=o.default,s.default=r},{"../core/main":267}],304:[function(r,i,s){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function a(h){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(d=r("../core/main"))&&d.__esModule?d:{default:d},c=u(r("../core/constants")),m=u(r("opentype.js"));function p(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,p=function(){return h},h)}function u(h){if(h&&h.__esModule)return h;if(h===null||a(h)!=="object"&&typeof h!="function")return{default:h};var f=p();if(f&&f.has(h))return f.get(h);var g,y,Z={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&((y=I?Object.getOwnPropertyDescriptor(h,g):null)&&(y.get||y.set)?Object.defineProperty(Z,g,y):Z[g]=h[g]);return Z.default=h,f&&f.set(h,Z),Z}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(h,f,g){l.default._validateParameters("loadFont",arguments);var y=new l.default.Font(this),Z=this;return m.load(h,function(R,C){if(R)return l.default._friendlyFileLoadError(4,h),g!==void 0?g(R):void console.error(R,h);y.font=C,f!==void 0&&f(y),Z._decrementPreload();var R=h.split("\\").pop().split("/").pop(),C=R.lastIndexOf("."),V=C<1?null:R.slice(C+1);["ttf","otf","woff","woff2"].includes(V)&&(V=R.slice(0,C!==-1?C:0),(R=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(V,`;
src: url(`).concat(h,`);
}
`))),document.head.appendChild(R))}),y},l.default.prototype.text=function(h,f,g,y,Z){var I;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(I=this._renderer).text.apply(I,arguments):this},l.default.prototype.textFont=function(h,f){if(l.default._validateParameters("textFont",arguments),arguments.length){if(h)return this._renderer._setProperty("_textFont",h),f&&(this._renderer._setProperty("_textSize",f),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",f*c._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var d=l.default;s.default=d},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,"opentype.js":241}],305:[function(r,i,s){function o(V){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(V)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=(a=r("../core/main"))&&a.__esModule?a:{default:a},l=function(V){if(V&&V.__esModule)return V;if(V===null||m(V)!=="object"&&typeof V!="function")return{default:V};var x=c();if(x&&x.has(V))return x.get(V);var w,k={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in V){var Y;Object.prototype.hasOwnProperty.call(V,w)&&((Y=A?Object.getOwnPropertyDescriptor(V,w):null)&&(Y.get||Y.set)?Object.defineProperty(k,w,Y):k[w]=V[w])}return k.default=V,x&&x.set(V,k),k}(r("../core/constants"));function c(){var V;return typeof WeakMap!="function"?null:(V=new WeakMap,c=function(){return V},V)}function m(V){return(m=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(V)}function p(V,x){var w=V.length;return V[x<0?x%w+w:x%w]}function u(V,x,w,k){var A,Y,U;return k?(u.tmpPoint1===void 0&&(u.tmpPoint1=[],u.tmpPoint2=[]),Y=u.tmpPoint1,U=u.tmpPoint2,Y.x=x.x-V.x,Y.y=x.y-V.y,U.x=w.x-x.x,U.y=w.y-x.y,A=Y.x*U.x+Y.y*U.y,Y=Math.sqrt(Y.x*Y.x+Y.y*Y.y),U=Math.sqrt(U.x*U.x+U.y*U.y),Math.acos(A/(Y*U))<k):(x[0]-V[0])*(w[1]-V[1])-(w[0]-V[0])*(x[1]-V[1])==0}function d(X,N,T,z,te,Y,U,M,j){var K=1-j,J=Math.pow(K,3),E=Math.pow(K,2),le=j*j,O=le*j,P=J*X+3*E*j*T+3*K*j*j*te+O*U,J=J*N+3*E*j*z+3*K*j*j*Y+O*M,E=X+2*j*(T-X)+le*(te-2*T+X),O=N+2*j*(z-N)+le*(Y-2*z+N),D=T+2*j*(te-T)+le*(U-2*te+T),le=z+2*j*(Y-z)+le*(M-2*Y+z),X=K*X+j*T,T=K*N+j*z,N=K*te+j*U,z=K*Y+j*M,te=90-180*Math.atan2(E-D,O-le)/Math.PI;return(D<E||O<le)&&(te+=180),{x:P,y:J,m:{x:E,y:O},n:{x:D,y:le},start:{x:X,y:T},end:{x:N,y:z},alpha:te}}function h(V,x,w,k,A,Y,U,M,j){return j==null?R(V,x,w,k,A,Y,U,M):d(V,x,w,k,A,Y,U,M,function(K,P,J,E,O,D,le,X,T){if(!(T<0||R(K,P,J,E,O,D,le,X)<T)){var N,z=.5,te=1-z;for(N=R(K,P,J,E,O,D,le,X,te);.01<Math.abs(N-T);)N=R(K,P,J,E,O,D,le,X,te+=(N<T?1:-1)*(z/=2));return te}}(V,x,w,k,A,Y,U,M,j))}function f(V,x,w){for(var k,A,Y,U,M,j=0,K=0,P=(V=function(J,E){function O(be,pe,xe){var Se,ke;if(!be)return["C",pe.x,pe.y,pe.x,pe.y,pe.x,pe.y];switch(be[0]in{T:1,Q:1}||(pe.qx=pe.qy=null),be[0]){case"M":pe.X=be[1],pe.Y=be[2];break;case"A":be=["C"].concat(y.apply(0,[pe.x,pe.y].concat(be.slice(1))));break;case"S":ke=xe==="C"||xe==="S"?(Se=2*pe.x-pe.bx,2*pe.y-pe.by):(Se=pe.x,pe.y),be=["C",Se,ke].concat(be.slice(1));break;case"T":xe==="Q"||xe==="T"?(pe.qx=2*pe.x-pe.qx,pe.qy=2*pe.y-pe.qy):(pe.qx=pe.x,pe.qy=pe.y),be=["C"].concat(G(pe.x,pe.y,pe.qx,pe.qy,be[1],be[2]));break;case"Q":pe.qx=be[1],pe.qy=be[2],be=["C"].concat(G(pe.x,pe.y,be[1],be[2],be[3],be[4]));break;case"L":be=["C"].concat(I(pe.x,pe.y,be[1],be[2]));break;case"H":be=["C"].concat(I(pe.x,pe.y,be[1],pe.y));break;case"V":be=["C"].concat(I(pe.x,pe.y,pe.x,be[1]));break;case"Z":be=["C"].concat(I(pe.x,pe.y,pe.X,pe.Y))}return be}function D(be,pe){if(7<be[pe].length){be[pe].shift();for(var xe=be[pe];xe.length;)ne[pe]="A",N&&(ee[pe]="A"),be.splice(pe++,0,["C"].concat(xe.splice(0,6)));be.splice(pe,1),X=Math.max(T.length,N&&N.length||0)}}function le(be,pe,xe,Se,ke){be&&pe&&be[ke][0]==="M"&&pe[ke][0]!=="M"&&(pe.splice(ke,0,["M",Se.x,Se.y]),xe.bx=0,xe.by=0,xe.x=be[ke][1],xe.y=be[ke][2],X=Math.max(T.length,N&&N.length||0))}var X,T=g(J),N=E&&g(E),z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ne=[],ee=[],oe="",ie="";X=Math.max(T.length,N&&N.length||0);for(var ce=0;ce<X;ce++){(oe=T[ce]?T[ce][0]:oe)!=="C"&&(ne[ce]=oe,ce&&(ie=ne[ce-1])),T[ce]=O(T[ce],z,ie),ne[ce]!=="A"&&oe==="C"&&(ne[ce]="C"),D(T,ce),N&&((oe=N[ce]?N[ce][0]:oe)!=="C"&&(ee[ce]=oe,ce&&(ie=ee[ce-1])),N[ce]=O(N[ce],te,ie),ee[ce]!=="A"&&oe==="C"&&(ee[ce]="C"),D(N,ce)),le(T,N,z,te,ce),le(N,T,te,z,ce);var he=T[ce],q=N&&N[ce],me=he.length,ge=N&&q.length;z.x=he[me-2],z.y=he[me-1],z.bx=parseFloat(he[me-4])||z.x,z.by=parseFloat(he[me-3])||z.y,te.bx=N&&(parseFloat(q[ge-4])||te.x),te.by=N&&(parseFloat(q[ge-3])||te.y),te.x=N&&q[ge-2],te.y=N&&q[ge-1]}return N?[T,N]:T}(V)).length;K<P;K++){if((Y=V[K])[0]==="M")k=+Y[1],A=+Y[2];else{if(x<j+(U=h(k,A,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]))&&!w)return{x:(M=h(k,A,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],x-j)).x,y:M.y,alpha:M.alpha};j+=U,k=+Y[5],A=+Y[6]}Y.shift()}return M=(M=w?j:d(k,A,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],1)).alpha?{x:M.x,y:M.y,alpha:M.alpha}:M}function g(V){var x=[],w=0,k=0,A=0,Y=0,U=0;if(V){V[0][0]==="M"&&(A=w=+V[0][1],Y=k=+V[0][2],U++,x[0]=["M",w,k]);for(var M,j,K=V.length===3&&V[0][0]==="M"&&V[1][0].toUpperCase()==="R"&&V[2][0].toUpperCase()==="Z",P=U,J=V.length;P<J;P++){if(x.push(M=[]),(j=V[P])[0]!==String.prototype.toUpperCase.call(j[0]))switch(M[0]=String.prototype.toUpperCase.call(j[0]),M[0]){case"A":M[1]=j[1],M[2]=j[2],M[3]=j[3],M[4]=j[4],M[5]=j[5],M[6]=+(j[6]+w),M[7]=+(j[7]+k);break;case"V":M[1]=+j[1]+k;break;case"H":M[1]=+j[1]+w;break;case"R":for(var E,O=2,D=(E=[w,k].concat(j.slice(1))).length;O<D;O++)E[O]=+E[O]+w,E[++O]=+E[O]+k;x.pop(),x=x.concat(Z(E,K));break;case"M":A=+j[1]+w,Y=+j[2]+k;break;default:for(var le=1,X=j.length;le<X;le++)M[le]=+j[le]+(le%2?w:k)}else if(j[0]==="R")E=[w,k].concat(j.slice(1)),x.pop(),x=x.concat(Z(E,K)),M=["R"].concat(j.slice(-2));else for(var T=0,N=j.length;T<N;T++)M[T]=j[T];switch(M[0]){case"Z":w=A,k=Y;break;case"H":w=M[1];break;case"V":k=M[1];break;case"M":A=M[M.length-2],Y=M[M.length-1];break;default:w=M[M.length-2],k=M[M.length-1]}}}return x}function y(V,x,w,k,N,ne,z,M,j,K){function P(ge,be,pe){return{x:ge*Math.cos(pe)-be*Math.sin(pe),y:ge*Math.sin(pe)+be*Math.cos(pe)}}var J,X=Math.PI,T=120*X/180,E=X/180*(+N||0),O=[],D=(K?(ce=K[0],J=K[1],oe=K[2],ie=K[3]):(V=(te=P(V,x,-E)).x,x=te.y,1<(D=(le=(V-(M=(te=P(M,j,-E)).x))/2)*le/(w*w)+(te=(x-(j=te.y))/2)*te/(k*k))&&(w*=D=Math.sqrt(D),k*=D),D=w*w,ee=k*k,oe=(ne=(ne===z?-1:1)*Math.sqrt(Math.abs((D*ee-D*te*te-ee*le*le)/(D*te*te+ee*le*le))))*w*te/k+(V+M)/2,ie=ne*-k*le/w+(x+j)/2,ce=Math.asin(((x-ie)/k).toFixed(9)),J=Math.asin(((j-ie)/k).toFixed(9)),(ce=V<oe?X-ce:ce)<0&&(ce=2*X+ce),(J=M<oe?X-J:J)<0&&(J=2*X+J),z&&J<ce&&(ce-=2*X),!z&&ce<J&&(J-=2*X)),J-ce),le=(Math.abs(D)>T&&(ee=J,te=M,ne=j,J=ce+T*(z&&ce<J?1:-1),O=y(M=oe+w*Math.cos(J),j=ie+k*Math.sin(J),w,k,N,0,z,te,ne,[J,ee,oe,ie])),D=J-ce,Math.cos(ce)),X=Math.sin(ce),T=Math.cos(J),N=Math.sin(J),z=Math.tan(D/4),te=4/3*w*z,ne=4/3*k*z,ee=[V,x],oe=[V+te*X,x-ne*le],ie=[M+te*N,j-ne*T],ce=[M,j];if(oe[0]=2*ee[0]-oe[0],oe[1]=2*ee[1]-oe[1],K)return[oe,ie,ce].concat(O);for(var he=[],q=0,me=(O=[oe,ie,ce].concat(O).join().split(",")).length;q<me;q++)he[q]=q%2?P(O[q-1],O[q],E).y:P(O[q],O[q+1],E).x;return he}function Z(V,x){for(var w=[],k=0,A=V.length;k<A-2*!x;k+=2){var Y=[{x:+V[k-2],y:+V[k-1]},{x:+V[k],y:+V[k+1]},{x:+V[k+2],y:+V[k+3]},{x:+V[k+4],y:+V[k+5]}];x?k?A-4===k?Y[3]={x:+V[0],y:+V[1]}:A-2===k&&(Y[2]={x:+V[0],y:+V[1]},Y[3]={x:+V[2],y:+V[3]}):Y[0]={x:+V[A-2],y:+V[A-1]}:A-4===k?Y[3]=Y[2]:k||(Y[0]={x:+V[k],y:+V[k+1]}),w.push(["C",(-Y[0].x+6*Y[1].x+Y[2].x)/6,(-Y[0].y+6*Y[1].y+Y[2].y)/6,(Y[1].x+6*Y[2].x-Y[3].x)/6,(Y[1].y+6*Y[2].y-Y[3].y)/6,Y[2].x,Y[2].y])}return w}function I(V,x,w,k){return[V,x,w,k,w,k]}function G(V,x,w,k,A,Y){return[1/3*V+2/3*w,1/3*x+2/3*k,1/3*A+2/3*w,1/3*Y+2/3*k,A,Y]}function R(V,x,w,k,A,Y,U,M,j){for(var K=(j=1<(j=j==null?1:j)?1:j<0?0:j)/2,P=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],J=0,E=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],O=0;O<12;O++){var le=K*P[O]+K,D=C(le,V,w,A,U),le=C(le,x,k,Y,M);J+=E[O]*Math.sqrt(D*D+le*le)}return K*J}function C(V,x,w,k,A){return V*(V*(-3*x+9*w-9*k+3*A)+6*x-12*w+6*k)-3*x+3*w}a.default.Font=function(V){this.parent=V,this.cache={},this.font=void 0},a.default.Font.prototype.textBounds=function(V){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,U=3<arguments.length?arguments[3]:void 0,k=4<arguments.length?arguments[4]:void 0,A=k&&k.renderer&&k.renderer._pInst||this.parent,Y=A._renderer.drawingContext,U=(Y.textAlign||l.LEFT,Y.textBaseline||l.BASELINE,U||A._renderer._textSize);if(!T){for(var M=[],j=[],K=[],P=(K[0]=[],[]),J=this._scale(U),E=A._renderer.textLeading(),O=0,D=(this.font.forEachGlyph(V,x,w,U,k,function(te,ne,ee,oe){var ie=te.getMetrics();te.index===0||te.index===10?K[O+=1]=[]:(K[O].push(ne+ie.xMin*J),K[O].push(ne+ie.xMax*J),P.push(ee+O*E+-ie.yMin*J),P.push(ee+O*E+-ie.yMax*J))}),0<K[O].length&&(M[O]=Math.min.apply(null,K[O]),j[O]=Math.max.apply(null,K[O])),0),le=0;le<=O;le++){M[le]=Math.min.apply(null,K[le]),j[le]=Math.max.apply(null,K[le]);var X=j[le]-M[le];D<X&&(D=X)}var Y=Math.min.apply(null,M),T={x:Y,y:w=Math.min.apply(null,P),h:Math.max.apply(null,P)-w,w:D,advance:Y-x},U=this._handleAlignment(A._renderer,V,T.x,T.y,T.w+T.advance);T.x=U.x,T.y=U.y}return T},a.default.Font.prototype.textToPoints=function(V,x,w,k,A){var Y=0,U=[],M=this._getGlyphs(V);k=k||this.parent._renderer._textSize;for(var j,K=0;K<M.length;K++){if(!(M[j=K].name&&M[j].name==="space"||V.length===M.length&&V[j]===" "))for(var P=function(D){for(var le,X=[],T=0;T<D.length;T++)D[T].type==="M"&&(le&&X.push(le),le=[]),le.push(function(N){var z=[N.type];return N.type==="M"||N.type==="L"?z.push(N.x,N.y):N.type==="C"?z.push(N.x1,N.y1,N.x2,N.y2,N.x,N.y):N.type==="Q"&&z.push(N.x1,N.y1,N.x,N.y),z}(D[T]));return X.push(le),X}(M[K].getPath(x,w,k).commands),J=0;J<P.length;J++)for(var E=function(D,le){for(var le=function(ne,ee){if(m(ne)!=="object")ne=ee;else for(var oe in ee)ne[oe]===void 0&&(ne[oe]=ee[oe]);return ne}(le,{sampleFactor:.1,simplifyThreshold:0}),X=f(D,0,1),T=X/(X*le.sampleFactor),N=[],z=0;z<X;z+=T)N.push(f(D,z));return le.simplifyThreshold&&function(te){for(var ne=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ee=0,oe=te.length-1;3<te.length&&0<=oe;--oe)u(p(te,oe-1),p(te,oe),p(te,oe+1),ne)&&(te.splice(oe%te.length,1),ee++)}(N,le.simplifyThreshold),N}(P[J],A),O=0;O<E.length;O++)E[O].x+=Y,U.push(E[O]);Y+=M[K].advanceWidth*this._scale(k)}return U},a.default.Font.prototype._getGlyphs=function(V){return this.font.stringToGlyphs(V)},a.default.Font.prototype._getPath=function(V,Y,w,k){var A=(k&&k.renderer&&k.renderer._pInst||this.parent)._renderer,Y=this._handleAlignment(A,V,Y,w);return this.font.getPath(V,Y.x,Y.y,A._textSize,k)},a.default.Font.prototype._getPathData=function(V,x,w,k){var A=3;return typeof V=="string"&&2<arguments.length?V=this._getPath(V,x,w,k):m(x)==="object"&&(k=x),k&&typeof k.decimals=="number"&&(A=k.decimals),V.toPathData(A)},a.default.Font.prototype._getSVG=function(V,x,w,k){var A=3;return typeof V=="string"&&2<arguments.length?V=this._getPath(V,x,w,k):m(x)==="object"&&(k=x),k&&(typeof k.decimals=="number"&&(A=k.decimals),typeof k.strokeWidth=="number"&&(V.strokeWidth=k.strokeWidth),k.fill!==void 0&&(V.fill=k.fill),k.stroke!==void 0&&(V.stroke=k.stroke)),V.toSVG(A)},a.default.Font.prototype._renderPath=function(U,j,K,k){var A=k&&k.renderer||this.parent._renderer,Y=A.drawingContext,U=(m(U)==="object"&&U.commands?U:this._getPath(U,j,K,k)).commands,M=(Y.beginPath(),!0),j=!1,K=void 0;try{for(var P,J=U[Symbol.iterator]();!(M=(P=J.next()).done);M=!0){var E=P.value;E.type==="M"?Y.moveTo(E.x,E.y):E.type==="L"?Y.lineTo(E.x,E.y):E.type==="C"?Y.bezierCurveTo(E.x1,E.y1,E.x2,E.y2,E.x,E.y):E.type==="Q"?Y.quadraticCurveTo(E.x1,E.y1,E.x,E.y):E.type==="Z"&&Y.closePath()}}catch(O){j=!0,K=O}finally{try{M||J.return==null||J.return()}finally{if(j)throw K}}return A._doStroke&&A._strokeSet&&Y.stroke(),A._doFill&&(A._fillSet||A._setFill(l._DEFAULT_TEXT_FILL),Y.fill()),this},a.default.Font.prototype._textWidth=function(V,x){return this.font.getAdvanceWidth(V,x)},a.default.Font.prototype._textAscent=function(V){return this.font.ascender*this._scale(V)},a.default.Font.prototype._textDescent=function(V){return-this.font.descender*this._scale(V)},a.default.Font.prototype._scale=function(V){return 1/this.font.unitsPerEm*(V||this.parent._renderer._textSize)},a.default.Font.prototype._handleAlignment=function(V,x,w,k,A){var Y=V._textSize;switch(A===void 0&&(A=this._textWidth(x,Y)),V._textAlign){case l.CENTER:w-=A/2;break;case l.RIGHT:w-=A}switch(V._textBaseline){case l.TOP:k+=this._textAscent(Y);break;case l.CENTER:k+=this._textAscent(Y)/2;break;case l.BOTTOM:k-=this._textDescent(Y)}return{x:w,y:k}},r=a.default,s.default=r},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],306:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.append=function(o,a){return o.push(a),o},r.default.prototype.arrayCopy=function(o,a,l,c,m){var p,u;o=m!==void 0?(u=Math.min(m,o.length),p=c,o.slice(a,u+a)):(u=l!==void 0?(u=l,Math.min(u,o.length)):o.length,l=a,o.slice(p=0,u)),Array.prototype.splice.apply(l,[p,u].concat(o))},r.default.prototype.concat=function(o,a){return o.concat(a)},r.default.prototype.reverse=function(o){return o.reverse()},r.default.prototype.shorten=function(o){return o.pop(),o},r.default.prototype.shuffle=function(o,a){for(var l,c,m=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o),p=(o=a||m?o:o.slice()).length;1<p;)l=this.random(0,1)*p|0,c=o[--p],o[p]=o[l],o[l]=c;return o},r.default.prototype.sort=function(o,c){var l=c?o.slice(0,Math.min(c,o.length)):o,c=c?o.slice(Math.min(c,o.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(m,p){return m-p})).concat(c)},r.default.prototype.splice=function(o,a,l){return Array.prototype.splice.apply(o,[l,0].concat(a)),o},r.default.prototype.subset=function(o,a,l){return l!==void 0?o.slice(a,a+l):o.slice(a,o.length)},r=r.default,s.default=r},{"../core/main":267,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],307:[function(r,i,s){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.float=function(a){return a instanceof Array?a.map(parseFloat):parseFloat(a)},o.default.prototype.int=function(a){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return a===1/0||a==="Infinity"?1/0:a===-1/0||a==="-Infinity"?-1/0:typeof a=="string"?parseInt(a,l):typeof a=="number"?0|a:typeof a=="boolean"?a?1:0:a instanceof Array?a.map(function(c){return o.default.prototype.int(c,l)}):void 0},o.default.prototype.str=function(a){return a instanceof Array?a.map(o.default.prototype.str):String(a)},o.default.prototype.boolean=function(a){return typeof a=="number"?a!==0:typeof a=="string"?a.toLowerCase()==="true":typeof a=="boolean"?a:a instanceof Array?a.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(a){return a=o.default.prototype.int(a,10),typeof a=="number"?(a+128)%256-128:a instanceof Array?a.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(a){return typeof a!="number"||isNaN(a)?a instanceof Array?a.map(o.default.prototype.char):typeof a=="string"?o.default.prototype.char(parseInt(a,10)):void 0:String.fromCharCode(a)},o.default.prototype.unchar=function(a){return typeof a=="string"&&a.length===1?a.charCodeAt(0):a instanceof Array?a.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(a,l){if(l=l==null?8:l,a instanceof Array)return a.map(function(m){return o.default.prototype.hex(m,l)});if(a===1/0||a===-1/0)return(a===1/0?"F":"0").repeat(l);if(typeof a=="number"){a<0&&(a=4294967295+a+1);for(var c=Number(a).toString(16).toUpperCase();c.length<l;)c="0".concat(c);return c=c.length>=l?c.substring(c.length-l,c.length):c}},o.default.prototype.unhex=function(a){return a instanceof Array?a.map(o.default.prototype.unhex):parseInt("0x".concat(a),16)},r=o.default,s.default=r},{"../core/main":267,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],308:[function(r,i,s){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(p=r("../core/main"))&&p.__esModule?p:{default:p};function a(g,d,h){var f=g<0,g=f?g.toString().substring(1):g.toString(),y=g.indexOf("."),Z=y!==-1?g.substring(0,y):g,I=y!==-1?g.substring(y+1):"",G=f?"-":"";if(h!==void 0){f="",(y!==-1||0<h-I.length)&&(f="."),I.length>h&&(I=I.substring(0,h));for(var R=0;R<d-Z.length;R++)G+="0";for(var G=(G+=Z)+f+I,C=0;C<h-I.length;C++)G+="0";return G}for(var V=0;V<Math.max(d-Z.length,0);V++)G+="0";return G+=g}function l(g,d){var h=(g=g.toString()).indexOf("."),f=h!==-1?g.substring(h):"",g=(g=h!==-1?g.substring(0,h):g).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(d===0)f="";else if(d!==void 0)if(d>f.length)for(var y=d-(f+=h===-1?".":"").length+1,Z=0;Z<y;Z++)f+="0";else f=f.substring(0,d+1);return g+f}function c(u){return 0<parseFloat(u)?"+".concat(u.toString()):u.toString()}function m(u){return 0<=parseFloat(u)?" ".concat(u.toString()):u.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),o.default.prototype.join=function(u,d){return o.default._validateParameters("join",arguments),u.join(d)},o.default.prototype.match=function(u,d){return o.default._validateParameters("match",arguments),u.match(d)},o.default.prototype.matchAll=function(u,d){o.default._validateParameters("matchAll",arguments);for(var h=new RegExp(d,"g"),f=h.exec(u),g=[];f!==null;)g.push(f),f=h.exec(u);return g},o.default.prototype.nf=function(u,d,h){return o.default._validateParameters("nf",arguments),u instanceof Array?u.map(function(f){return a(f,d,h)}):Object.prototype.toString.call(u)==="[object Arguments]"?u.length===3?this.nf(u[0],u[1],u[2]):u.length===2?this.nf(u[0],u[1]):this.nf(u[0]):a(u,d,h)},o.default.prototype.nfc=function(u,d){return o.default._validateParameters("nfc",arguments),u instanceof Array?u.map(function(h){return l(h,d)}):l(u,d)},o.default.prototype.nfp=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];o.default._validateParameters("nfp",d);var f=o.default.prototype.nf.apply(this,d);return f instanceof Array?f.map(c):c(f)},o.default.prototype.nfs=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];o.default._validateParameters("nfs",d);var f=o.default.prototype.nf.apply(this,d);return f instanceof Array?f.map(m):m(f)},o.default.prototype.split=function(u,d){return o.default._validateParameters("split",arguments),u.split(d)},o.default.prototype.splitTokens=function(u,d){var h,f;return o.default._validateParameters("splitTokens",arguments),f=d!==void 0?(f=/\]/g.exec(d=d),(h=/\[/g.exec(d))&&f?(d=d.slice(0,f.index)+d.slice(f.index+1),h=/\[/g.exec(d),d=d.slice(0,h.index)+d.slice(h.index+1),new RegExp("[\\[".concat(d,"\\]]"),"g")):f?(d=d.slice(0,f.index)+d.slice(f.index+1),new RegExp("[".concat(d,"\\]]"),"g")):h?(d=d.slice(0,h.index)+d.slice(h.index+1),new RegExp("[".concat(d,"\\[]"),"g")):new RegExp("[".concat(d,"]"),"g")):/\s/g,u.split(f).filter(function(g){return g})},o.default.prototype.trim=function(u){return o.default._validateParameters("trim",arguments),u instanceof Array?u.map(this.trim):u.trim()};var p=o.default;s.default=p},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],309:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,s.default=r},{"../core/main":267}],310:[function(r,i,s){function o(d){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(d)}function a(d){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(d)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(u=r("../core/main"))&&u.__esModule?u:{default:u},c=(r("./p5.Geometry"),function(d){if(d&&d.__esModule)return d;if(d===null||a(d)!=="object"&&typeof d!="function")return{default:d};var h=m();if(h&&h.has(d))return h.get(d);var f,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in d){var Z;Object.prototype.hasOwnProperty.call(d,f)&&((Z=y?Object.getOwnPropertyDescriptor(d,f):null)&&(Z.get||Z.set)?Object.defineProperty(g,f,Z):g[f]=d[f])}return g.default=d,h&&h.set(d,g),g}(r("../core/constants")));function m(){var d;return typeof WeakMap!="function"?null:(d=new WeakMap,m=function(){return d},d)}l.default.prototype.plane=function(d,h,f,g){this._assert3d("plane"),l.default._validateParameters("plane",arguments),d===void 0&&(d=50),h===void 0&&(h=d),g===void 0&&(g=1);var y,Z="plane|".concat(f=f===void 0?1:f,"|").concat(g);return this._renderer.geometryInHash(Z)||((y=new l.default.Geometry(f,g,function(){for(var I,G,R=0;R<=this.detailY;R++)for(var C=R/this.detailY,V=0;V<=this.detailX;V++)I=V/this.detailX,G=new l.default.Vector(I-.5,C-.5,0),this.vertices.push(G),this.uvs.push(I,C)})).computeFaces().computeNormals(),f<=1&&g<=1?y._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(Z,y)),this._renderer.drawBuffersScaled(Z,d,h,1),this},l.default.prototype.box=function(d,h,f,g,y){this._assert3d("box"),l.default._validateParameters("box",arguments),d===void 0&&(d=50),h===void 0&&(h=d),f===void 0&&(f=h);var Z,I=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,I=(y===void 0&&(y=I?1:4),"box|".concat(g=g===void 0?I?1:4:g,"|").concat(y));return this._renderer.geometryInHash(I)||((Z=new l.default.Geometry(g,y,function(){var G=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var R=0;R<G.length;R++){for(var C=G[R],V=4*R,x=0;x<4;x++){var w=C[x],w=new l.default.Vector((2*(1&w)-1)/2,((2&w)-1)/2,((4&w)/2-1)/2);this.vertices.push(w),this.uvs.push(1&x,(2&x)/2)}this.faces.push([V,1+V,2+V]),this.faces.push([2+V,1+V,3+V])}})).computeNormals(),g<=4&&y<=4?Z._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(I,Z)),this._renderer.drawBuffersScaled(I,d,h,f),this},l.default.prototype.sphere=function(d,h,f){return this._assert3d("sphere"),l.default._validateParameters("sphere",arguments),this.ellipsoid(d=d===void 0?50:d,d,d,h=h===void 0?24:h,f=f===void 0?16:f),this};function p(d,h,f,g,y,Z,I){d=d<=0?1:d,h=h<0?0:h,f=f<=0?d:f,g=g<3?3:g;for(var G,R,C=(Z=Z===void 0||Z)?-2:0,V=(y=y<1?1:y)+((I=I===void 0?h!==0:I)?2:0),x=Math.atan2(d-h,f),w=Math.sin(x),k=Math.cos(x),A=C;A<=V;++A){var Y=A/y,U=f*Y,M=void 0,M=A<0?(Y=U=0,d):y<A?(U=f,Y=1,h):d+(h-d)*Y;for(A!==-2&&A!==y+2||(M=0),U-=f/2,G=0;G<g;++G){var j=G/(g-1),P=2*Math.PI*j,K=Math.sin(P),P=Math.cos(P),J=(this.vertices.push(new l.default.Vector(K*M,U,P*M)),void 0),J=A<0?new l.default.Vector(0,-1,0):y<A&&h?new l.default.Vector(0,1,0):new l.default.Vector(K*k,w,P*k);this.vertexNormals.push(J),this.uvs.push(j,Y)}}var E=0;if(Z){for(R=0;R<g;++R)this.faces.push([E+R,E+g+(R+1)%g,E+g+R]);E+=2*g}for(A=0;A<y;++A){for(G=0;G<g;++G){var O=(G+1)%g;this.faces.push([E+G,E+O,E+g+O]),this.faces.push([E+G,E+g+O,E+g+G])}E+=g}if(I)for(E+=g,G=0;G<g;++G)this.faces.push([E+G,E+(G+1)%g,E+g])}l.default.prototype.cylinder=function(d,h,f,g,y,Z){this._assert3d("cylinder"),l.default._validateParameters("cylinder",arguments),d===void 0&&(d=50),h===void 0&&(h=d),g===void 0&&(g=1),Z===void 0&&(Z=!0),y===void 0&&(y=!0);var I,G="cylinder|".concat(f=f===void 0?24:f,"|").concat(g,"|").concat(y,"|").concat(Z);return this._renderer.geometryInHash(G)||(I=new l.default.Geometry(f,g),p.call(I,1,1,1,f,g,y,Z),f<=24&&g<=16?I._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(G,I)),this._renderer.drawBuffersScaled(G,d,h,d),this},l.default.prototype.cone=function(d,h,f,g,y){this._assert3d("cone"),l.default._validateParameters("cone",arguments),d===void 0&&(d=50),h===void 0&&(h=d),g===void 0&&(g=1),y===void 0&&(y=!0);var Z,I="cone|".concat(f=f===void 0?24:f,"|").concat(g,"|").concat(y);return this._renderer.geometryInHash(I)||(Z=new l.default.Geometry(f,g),p.call(Z,1,0,1,f,g,y,!1),f<=24&&g<=16?Z._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(I,Z)),this._renderer.drawBuffersScaled(I,d,h,d),this},l.default.prototype.ellipsoid=function(d,h,f,g,y){this._assert3d("ellipsoid"),l.default._validateParameters("ellipsoid",arguments),d===void 0&&(d=50),h===void 0&&(h=d),f===void 0&&(f=d),y===void 0&&(y=16);var Z,I="ellipsoid|".concat(g=g===void 0?24:g,"|").concat(y);return this._renderer.geometryInHash(I)||((Z=new l.default.Geometry(g,y,function(){for(var G=0;G<=this.detailY;G++)for(var R=G/this.detailY,C=Math.PI*R-Math.PI/2,V=Math.cos(C),x=Math.sin(C),w=0;w<=this.detailX;w++){var k=w/this.detailX,Y=2*Math.PI*k,A=Math.cos(Y),Y=Math.sin(Y),Y=new l.default.Vector(V*Y,x,V*A);this.vertices.push(Y),this.vertexNormals.push(Y),this.uvs.push(k,R)}})).computeFaces(),g<=24&&y<=24?Z._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(I,Z)),this._renderer.drawBuffersScaled(I,d,h,f),this},l.default.prototype.torus=function(d,I,f,g){if(this._assert3d("torus"),l.default._validateParameters("torus",arguments),d===void 0)d=50;else if(!d)return;if(I===void 0)I=10;else if(!I)return;f===void 0&&(f=24),g===void 0&&(g=16);var y,Z=(I/d).toPrecision(4),I="torus|".concat(Z,"|").concat(f,"|").concat(g);return this._renderer.geometryInHash(I)||((y=new l.default.Geometry(f,g,function(){for(var G=0;G<=this.detailY;G++)for(var R=G/this.detailY,C=2*Math.PI*R,V=Math.cos(C),x=Math.sin(C),w=1+Z*V,k=0;k<=this.detailX;k++){var A=k/this.detailX,Y=2*Math.PI*A,M=Math.cos(Y),Y=Math.sin(Y),U=new l.default.Vector(w*M,w*Y,Z*x),M=new l.default.Vector(V*M,V*Y,x);this.vertices.push(U),this.vertexNormals.push(M),this.uvs.push(A,R)}})).computeFaces(),f<=24&&g<=16?y._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(I,y)),this._renderer.drawBuffersScaled(I,d,d,d),this},l.default.RendererGL.prototype.point=function(d,h,f){var g=[];return g.push(new l.default.Vector(d,h,f=f===void 0?0:f)),this._drawPoints(g,this.immediateMode.buffers.point),this},l.default.RendererGL.prototype.triangle=function(I){var h=I[0],f=I[1],g=I[2],y=I[3],Z=I[4],I=I[5],G=(this.geometryInHash("tri")||((G=new l.default.Geometry(1,1,function(){var C=[];C.push(new l.default.Vector(0,0,0)),C.push(new l.default.Vector(0,1,0)),C.push(new l.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]}))._makeTriangleEdges()._edgesToVertices(),G.computeNormals(),this.createBuffers("tri",G)),this.uMVMatrix.copy());try{var R=new l.default.Matrix([g-h,y-f,0,0,Z-h,I-f,0,0,0,0,1,0,h,f,0,1]).mult(this.uMVMatrix);this.uMVMatrix=R,this.drawBuffers("tri")}finally{this.uMVMatrix=G}return this},l.default.RendererGL.prototype.ellipse=function(d){this.arc(d[0],d[1],d[2],d[3],0,c.TWO_PI,c.OPEN,d[4])},l.default.RendererGL.prototype.arc=function(d){var h,f=arguments[1],g=arguments[2],y=arguments[3],Z=arguments[4],I=arguments[5],G=arguments[6],R=arguments[7]||25,C=(Math.abs(I-Z)>=c.TWO_PI?"".concat(V="ellipse","|"):"".concat(V="arc","|").concat(Z,"|").concat(I,"|").concat(G,"|")).concat(R,"|"),V=(this.geometryInHash(C)||((h=new l.default.Geometry(R,1,function(){if(this.strokeIndices=[],Z.toFixed(10)!==I.toFixed(10)){G!==c.PIE&&G!==void 0||(this.vertices.push(new l.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var x=0;x<=R;x++){var k=(I-Z)*(x/R)+Z,w=.5+Math.cos(k)/2,k=.5+Math.sin(k)/2;this.vertices.push(new l.default.Vector(w,k,0)),this.uvs.push([w,k]),x<R-1&&(this.faces.push([0,x+1,x+2]),this.strokeIndices.push([x+1,x+2]))}switch(G){case c.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case c.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),R<=50?h._makeTriangleEdges()._edgesToVertices(h):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(V," with more than 50 detail")),this.createBuffers(C,h)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([d,f,0]),this.uMVMatrix.scale(g,y,1),this.drawBuffers(C)}finally{this.uMVMatrix=V}return this},l.default.RendererGL.prototype.rect=function(d){var h=d[0],f=d[1],g=d[2],y=d[3];if(d[4]===void 0){var G=this._pInst._glAttributes.perPixelLighting,Z=d[4]||(G?1:24),I=d[5]||(G?1:16),G="rect|".concat(Z,"|").concat(I),R=(this.geometryInHash(G)||((R=new l.default.Geometry(Z,I,function(){for(var J=0;J<=this.detailY;J++)for(var E=J/this.detailY,O=0;O<=this.detailX;O++){var D=O/this.detailX,le=new l.default.Vector(D,E,0);this.vertices.push(le),this.uvs.push(D,E)}0<Z&&0<I&&(this.strokeIndices=[[0,Z],[Z,(Z+1)*(I+1)-1],[(Z+1)*(I+1)-1,(Z+1)*I],[(Z+1)*I,0]])})).computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(G,R)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([h,f,0]),this.uMVMatrix.scale(g,y,1),this.drawBuffers(G)}finally{this.uMVMatrix=R}}else{var G=d[4],R=d[5]===void 0?G:d[5],C=d[6]===void 0?R:d[6],d=d[7]===void 0?C:d[7],Y=g,V=y,k=((Y+=h)<h&&(k=h,h=Y,Y=k),(V+=f)<f&&(k=f,f=V,V=k),Math.min((Y-h)/2,(V-f)/2)),x=(k<G&&(G=k),k<R&&(R=k),k<C&&(C=k),k<d&&(d=k),h),w=f,k=Y,h=V,A=(this.beginShape(),R!==0?(this.vertex(k-R,w),this.quadraticVertex(k,w,k,w+R)):this.vertex(k,w),C!==0?(this.vertex(k,h-C),this.quadraticVertex(k,h,k-C,h)):this.vertex(k,h),d!==0?(this.vertex(x+d,h),this.quadraticVertex(x,h,x,h-d)):this.vertex(x,h),G!==0?(this.vertex(x,w+G),this.quadraticVertex(x,w,x+G,w)):this.vertex(x,w),!(this.immediateMode.geometry.uvs.length=0)),f=!1,Y=void 0;try{for(var U,M=this.immediateMode.geometry.vertices[Symbol.iterator]();!(A=(U=M.next()).done);A=!0){var j=U.value,K=(j.x-x)/g,P=(j.y-w)/y;this.immediateMode.geometry.uvs.push(K,P)}}catch(X){f=!0,Y=X}finally{try{A||M.return==null||M.return()}finally{if(f)throw Y}}this.endShape(c.CLOSE)}return this},l.default.RendererGL.prototype.quad=function(d,h,f,g,y,Z,I,G,R,C,V,x,w,k){w===void 0&&(w=2),k===void 0&&(k=2);var A="quad|".concat(d,"|").concat(h,"|").concat(f,"|").concat(g,"|").concat(y,"|").concat(Z,"|").concat(I,"|").concat(G,"|").concat(R,"|").concat(C,"|").concat(V,"|").concat(x,"|").concat(w,"|").concat(k);if(!this.geometryInHash(A)){var Y=new l.default.Geometry(w,k,function(){for(var J=1/(this.detailX-1),E=1/(this.detailY-1),O=0;O<this.detailY;O++)for(var D=0;D<this.detailX;D++){var le=D*J,X=O*E;this.vertices.push(new l.default.Vector((1-le)*((1-X)*d+X*C)+le*((1-X)*g+X*I),(1-le)*((1-X)*h+X*V)+le*((1-X)*y+X*G),(1-le)*((1-X)*f+X*x)+le*((1-X)*Z+X*R))),this.uvs.push([le,X])}});Y.faces=[];for(var U=0;U<k-1;U++)for(var M=0;M<w-1;M++){var j=M+U*w,K=M+1+(U+1)*w,P=M+(U+1)*w;Y.faces.push([j,M+1+U*w,K]),Y.faces.push([j,K,P])}Y.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(A,Y)}return this.drawBuffers(A),this},l.default.RendererGL.prototype.bezier=function(d,h,f,g,y,Z,I,G,R,C,V,x){arguments.length===8&&(V=G,C=I,G=Z,I=y,y=g,g=f,f=Z=R=x=0);var w=this._pInst._bezierDetail||20;this.beginShape();for(var k=0;k<=w;k++){var A=Math.pow(1-k/w,3),Y=k/w*3*Math.pow(1-k/w,2),U=3*Math.pow(k/w,2)*(1-k/w),M=Math.pow(k/w,3);this.vertex(d*A+g*Y+I*U+C*M,h*A+y*Y+G*U+V*M,f*A+Z*Y+R*U+x*M)}return this.endShape(),this},l.default.RendererGL.prototype.curve=function(d,h,f,g,y,Z,I,G,R,C,V,x){arguments.length===8&&(C=I,V=G,I=y,G=g,y=g=f,f=Z=R=x=0);var w=this._pInst._curveDetail;this.beginShape();for(var k=0;k<=w;k++){var A=.5*Math.pow(k/w,3),Y=.5*Math.pow(k/w,2),U=k/w*.5;this.vertex(A*(3*g-d-3*I+C)+Y*(2*d-5*g+4*I-C)+U*(-d+I)+2*g*.5,A*(3*y-h-3*G+V)+Y*(2*h-5*y+4*G-V)+U*(-h+G)+2*y*.5,A*(3*Z-f-3*R+x)+Y*(2*f-5*Z+4*R-x)+U*(-f+R)+2*Z*.5)}return this.endShape(),this},l.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(c.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},l.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var d,h,f,g,y,Z,I=[],G=[],R=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var C=1/this._lutBezierDetail,V=0,x=1,w=0;V<1;){if(Z=parseFloat(V.toFixed(6)),this._lookUpTableBezier[w]=this._bezierCoefficients(Z),x.toFixed(6)===C.toFixed(6)){Z=parseFloat(x.toFixed(6))+parseFloat(V.toFixed(6)),++w,this._lookUpTableBezier[w]=this._bezierCoefficients(Z);break}V+=C,x-=C,++w}}var k=this._lookUpTableBezier.length;if(R===6){for(this.isBezier=!0,I=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],G=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],y=0;y<k;y++)h=I[0]*this._lookUpTableBezier[y][0]+I[1]*this._lookUpTableBezier[y][1]+I[2]*this._lookUpTableBezier[y][2]+I[3]*this._lookUpTableBezier[y][3],f=G[0]*this._lookUpTableBezier[y][0]+G[1]*this._lookUpTableBezier[y][1]+G[2]*this._lookUpTableBezier[y][2]+G[3]*this._lookUpTableBezier[y][3],this.vertex(h,f);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(R===9){for(this.isBezier=!0,I=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],G=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],d=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],y=0;y<k;y++)h=I[0]*this._lookUpTableBezier[y][0]+I[1]*this._lookUpTableBezier[y][1]+I[2]*this._lookUpTableBezier[y][2]+I[3]*this._lookUpTableBezier[y][3],f=G[0]*this._lookUpTableBezier[y][0]+G[1]*this._lookUpTableBezier[y][1]+G[2]*this._lookUpTableBezier[y][2]+G[3]*this._lookUpTableBezier[y][3],g=d[0]*this._lookUpTableBezier[y][0]+d[1]*this._lookUpTableBezier[y][1]+d[2]*this._lookUpTableBezier[y][2]+d[3]*this._lookUpTableBezier[y][3],this.vertex(h,f,g);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},l.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var d,h,f,g,y,Z,I=[],G=[],R=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var C=1/this._lutQuadraticDetail,V=0,x=1,w=0;V<1;){if(Z=parseFloat(V.toFixed(6)),this._lookUpTableQuadratic[w]=this._quadraticCoefficients(Z),x.toFixed(6)===C.toFixed(6)){Z=parseFloat(x.toFixed(6))+parseFloat(V.toFixed(6)),++w,this._lookUpTableQuadratic[w]=this._quadraticCoefficients(Z);break}V+=C,x-=C,++w}}var k=this._lookUpTableQuadratic.length;if(R===4){for(this.isQuadratic=!0,I=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],G=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],y=0;y<k;y++)h=I[0]*this._lookUpTableQuadratic[y][0]+I[1]*this._lookUpTableQuadratic[y][1]+I[2]*this._lookUpTableQuadratic[y][2],f=G[0]*this._lookUpTableQuadratic[y][0]+G[1]*this._lookUpTableQuadratic[y][1]+G[2]*this._lookUpTableQuadratic[y][2],this.vertex(h,f);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(R===6){for(this.isQuadratic=!0,I=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],G=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],d=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],y=0;y<k;y++)h=I[0]*this._lookUpTableQuadratic[y][0]+I[1]*this._lookUpTableQuadratic[y][1]+I[2]*this._lookUpTableQuadratic[y][2],f=G[0]*this._lookUpTableQuadratic[y][0]+G[1]*this._lookUpTableQuadratic[y][1]+G[2]*this._lookUpTableQuadratic[y][2],g=d[0]*this._lookUpTableQuadratic[y][0]+d[1]*this._lookUpTableQuadratic[y][1]+d[2]*this._lookUpTableQuadratic[y][2],this.vertex(h,f,g);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},l.default.RendererGL.prototype.curveVertex=function(){var d,h,f,g,y,Z,I=[],G=[],R=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var C=1/this._lutBezierDetail,V=0,x=1,w=0;V<1;){if(Z=parseFloat(V.toFixed(6)),this._lookUpTableBezier[w]=this._bezierCoefficients(Z),x.toFixed(6)===C.toFixed(6)){Z=parseFloat(x.toFixed(6))+parseFloat(V.toFixed(6)),++w,this._lookUpTableBezier[w]=this._bezierCoefficients(Z);break}V+=C,x-=C,++w}}var k=this._lookUpTableBezier.length;if(R===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,I=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),G=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),y=0;y<k;y++)h=I[0]*this._lookUpTableBezier[y][0]+I[1]*this._lookUpTableBezier[y][1]+I[2]*this._lookUpTableBezier[y][2]+I[3]*this._lookUpTableBezier[y][3],f=G[0]*this._lookUpTableBezier[y][0]+G[1]*this._lookUpTableBezier[y][1]+G[2]*this._lookUpTableBezier[y][2]+G[3]*this._lookUpTableBezier[y][3],this.vertex(h,f);for(y=0;y<R;y++)this.immediateMode._curveVertex.shift()}}else if(R===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,I=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),G=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),d=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),y=0;y<k;y++)h=I[0]*this._lookUpTableBezier[y][0]+I[1]*this._lookUpTableBezier[y][1]+I[2]*this._lookUpTableBezier[y][2]+I[3]*this._lookUpTableBezier[y][3],f=G[0]*this._lookUpTableBezier[y][0]+G[1]*this._lookUpTableBezier[y][1]+G[2]*this._lookUpTableBezier[y][2]+G[3]*this._lookUpTableBezier[y][3],g=d[0]*this._lookUpTableBezier[y][0]+d[1]*this._lookUpTableBezier[y][1]+d[2]*this._lookUpTableBezier[y][2]+d[3]*this._lookUpTableBezier[y][3],this.vertex(h,f,g);for(y=0;y<R;y++)this.immediateMode._curveVertex.shift()}},l.default.RendererGL.prototype.image=function(d,x,f,w,y,Z,I,G,R){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(d),this._pInst.textureMode(c.NORMAL);var C=0,V=(x<=d.width&&(C=x/d.width),1),x=(x+w<=d.width&&(V=(x+w)/d.width),0),w=(f<=d.height&&(x=f/d.height),1);f+y<=d.height&&(w=(f+y)/d.height),this.beginShape(),this.vertex(Z,I,0,C,x),this.vertex(Z+G,I,0,V,x),this.vertex(Z+G,I+R,0,V,w),this.vertex(Z,I+R,0,C,w),this.endShape(c.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(c.REMOVE)};var u=l.default;s.default=u},{"../core/constants":256,"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],311:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}l.default.prototype.orbitControl=function(u,d,h){var f,g;if(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY)return f=this._renderer._curCamera,u===void 0&&(u=1),d===void 0&&(d=u),h===void 0&&(h=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0)),g=this.height<this.width?this.height:this.width,this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,h*g):this._renderer._curCamera._orbit(0,0,-h*g)),this.mouseIsPressed&&(this.mouseButton===this.LEFT?(h=-u*(this.mouseX-this.pmouseX)/g,g=d*(this.mouseY-this.pmouseY)/g,this._renderer._curCamera._orbit(h,g,0)):this.mouseButton===this.RIGHT&&(h=f._getLocalAxes(),(g=Math.sqrt(h.x[0]*h.x[0]+h.x[2]*h.x[2]))!==0&&(h.x[0]/=g,h.x[2]/=g),(g=Math.sqrt(h.y[0]*h.y[0]+h.y[2]*h.y[2]))!==0&&(h.y[0]/=g,h.y[2]/=g),g=-1*u*(this.mouseX-this.pmouseX),u=-1*d*(this.mouseY-this.pmouseY),f.setPosition(f.eyeX+g*h.x[0]+u*h.z[0],f.eyeY,f.eyeZ+g*h.x[2]+u*h.z[2]))),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];l.default._validateParameters("debugMode",d);for(var f=this._registeredMethods.post.length-1;0<=f;f--)this._registeredMethods.post[f].toString()!==this._grid().toString()&&this._registeredMethods.post[f].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(f,1);d[0]===c.GRID?this.registerMethod("post",this._grid.call(this,d[1],d[2],d[3],d[4],d[5])):d[0]===c.AXES?this.registerMethod("post",this._axesIcon.call(this,d[1],d[2],d[3],d[4])):(this.registerMethod("post",this._grid.call(this,d[0],d[1],d[2],d[3],d[4])),this.registerMethod("post",this._axesIcon.call(this,d[5],d[6],d[7],d[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1)},l.default.prototype._grid=function(u,d,h,f,g){u===void 0&&(u=this.width/2),d===void 0&&(d=Math.round(u/30)<4?4:Math.round(u/30)),h===void 0&&(h=0),f===void 0&&(f=0),g===void 0&&(g=0);var y=u/d,Z=u/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var I=0;I<=d;I++)this.beginShape(this.LINES),this.vertex(-Z+h,f,I*y-Z+g),this.vertex(Z+h,f,I*y-Z+g),this.endShape();for(var G=0;G<=d;G++)this.beginShape(this.LINES),this.vertex(G*y-Z+h,f,-Z+g),this.vertex(G*y-Z+h,f,Z+g),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(u,d,h,f){return u===void 0&&(u=40<this.width/20?this.width/20:40),d===void 0&&(d=-this.width/4),h===void 0&&(h=d),f===void 0&&(f=d),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(d,h,f),this.vertex(d+u,h,f),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(d,h,f),this.vertex(d,h+u,f),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(d,h,f),this.vertex(d,h,f+u),this.endShape(),this.pop()}};var p=l.default;s.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],312:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}l.default.prototype.ambientLight=function(u,d,h,f){this._assert3d("ambientLight"),l.default._validateParameters("ambientLight",arguments);var g=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(g._array[0],g._array[1],g._array[2]),this._renderer._enableLighting=!0,this},l.default.prototype.specularColor=function(u,d,h){this._assert3d("specularColor"),l.default._validateParameters("specularColor",arguments);var f=this.color.apply(this,arguments);return this._renderer.specularColors=[f._array[0],f._array[1],f._array[2]],this},l.default.prototype.directionalLight=function(u,R,G,f,g,y){this._assert3d("directionalLight"),l.default._validateParameters("directionalLight",arguments),u=u instanceof l.default.Color?u:this.color(u,R,G);var Z,I,R=arguments[arguments.length-1],G=typeof R=="number"?(Z=arguments[arguments.length-3],I=arguments[arguments.length-2],arguments[arguments.length-1]):(Z=R.x,I=R.y,R.z),R=Math.sqrt(Z*Z+I*I+G*G);return this._renderer.directionalLightDirections.push(Z/R,I/R,G/R),this._renderer.directionalLightDiffuseColors.push(u._array[0],u._array[1],u._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.pointLight=function(u,G,R,f,g,y){this._assert3d("pointLight"),l.default._validateParameters("pointLight",arguments),u=u instanceof l.default.Color?u:this.color(u,G,R);var Z,I,G=arguments[arguments.length-1],R=typeof G=="number"?(Z=arguments[arguments.length-3],I=arguments[arguments.length-2],arguments[arguments.length-1]):(Z=G.x,I=G.y,G.z);return this._renderer.pointLightPositions.push(Z,I,R),this._renderer.pointLightDiffuseColors.push(u._array[0],u._array[1],u._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},l.default.prototype.lights=function(){var u;return this._assert3d("lights"),this._colorMode===c.RGB?(this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1)):(u=this._colorMaxes[this._colorMode][2],this.ambientLight(0,0,u),this.directionalLight(0,0,u,0,0,-1)),this},l.default.prototype.lightFalloff=function(u,d,h){return this._assert3d("lightFalloff"),l.default._validateParameters("lightFalloff",arguments),u<0&&(u=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),h<0&&(h=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),u===0&&d===0&&h===0&&(u=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=u,this._renderer.linearAttenuation=d,this._renderer.quadraticAttenuation=h,this},l.default.prototype.spotLight=function(u,d,h,f,g,y,Z,I,G,R,C){this._assert3d("spotLight"),l.default._validateParameters("spotLight",arguments);var V,x,w,k=arguments.length;switch(k){case 11:case 10:V=this.color(u,d,h),x=new l.default.Vector(f,g,y),w=new l.default.Vector(Z,I,G);break;case 9:u instanceof l.default.Color?(V=u,x=new l.default.Vector(d,h,f),w=new l.default.Vector(g,y,Z),R=I,C=G):f instanceof l.default.Vector?(V=this.color(u,d,h),x=f,w=new l.default.Vector(g,y,Z),R=I,C=G):Z instanceof l.default.Vector?(V=this.color(u,d,h),x=new l.default.Vector(f,g,y),w=Z,R=I,C=G):(V=this.color(u,d,h),x=new l.default.Vector(f,g,y),w=new l.default.Vector(Z,I,G));break;case 8:R=(w=u instanceof l.default.Color?(V=u,x=new l.default.Vector(d,h,f),new l.default.Vector(g,y,Z)):f instanceof l.default.Vector?(V=this.color(u,d,h),x=f,new l.default.Vector(g,y,Z)):(V=this.color(u,d,h),x=new l.default.Vector(f,g,y),Z),I);break;case 7:u instanceof l.default.Color&&d instanceof l.default.Vector?(V=u,x=d,w=new l.default.Vector(h,f,g),R=y,C=Z):u instanceof l.default.Color&&g instanceof l.default.Vector?(V=u,x=new l.default.Vector(d,h,f),w=g,R=y,C=Z):f instanceof l.default.Vector&&g instanceof l.default.Vector?(V=this.color(u,d,h),x=f,w=g,R=y,C=Z):w=u instanceof l.default.Color?(V=u,x=new l.default.Vector(d,h,f),new l.default.Vector(g,y,Z)):f instanceof l.default.Vector?(V=this.color(u,d,h),x=f,new l.default.Vector(g,y,Z)):(V=this.color(u,d,h),x=new l.default.Vector(f,g,y),Z);break;case 6:f instanceof l.default.Vector&&g instanceof l.default.Vector?(V=this.color(u,d,h),x=f,w=g,R=y):u instanceof l.default.Color&&g instanceof l.default.Vector?(V=u,x=new l.default.Vector(d,h,f),w=g,R=y):u instanceof l.default.Color&&d instanceof l.default.Vector&&(V=u,x=d,w=new l.default.Vector(h,f,g),R=y);break;case 5:u instanceof l.default.Color&&d instanceof l.default.Vector&&h instanceof l.default.Vector?(V=u,x=d,w=h,R=f,C=g):f instanceof l.default.Vector&&g instanceof l.default.Vector?(V=this.color(u,d,h),x=f,w=g):u instanceof l.default.Color&&g instanceof l.default.Vector?(V=u,x=new l.default.Vector(d,h,f),w=g):u instanceof l.default.Color&&d instanceof l.default.Vector&&(V=u,x=d,w=new l.default.Vector(h,f,g));break;case 4:V=u,x=d,w=h,R=f;break;case 3:V=u,x=d,w=h;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(k<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(V._array[0],V._array[1],V._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(x.x,x.y,x.z),w.normalize(),this._renderer.spotLightDirections.push(w.x,w.y,w.z),R===void 0&&(R=Math.PI/3),C!==void 0&&C<1?(C=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):C===void 0&&(C=100),R=this._renderer._pInst._toRadians(R),this._renderer.spotLightAngle.push(Math.cos(R)),this._renderer.spotLightConc.push(C),this._renderer._enableLighting=!0,this},l.default.prototype.noLights=function(){return this._assert3d("noLights"),l.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var p=l.default;s.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],313:[function(r,i,s){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(a=r("../core/main"))&&a.__esModule?a:{default:a};r("./p5.Geometry"),o.default.prototype.loadModel=function(l){o.default._validateParameters("loadModel",arguments);var c,m,p,u=l.slice(-4),d=(typeof arguments[1]=="boolean"?(c=arguments[1],m=arguments[2],p=arguments[3],arguments[4]!==void 0&&(u=arguments[4])):(c=!1,m=arguments[1],p=arguments[2],arguments[3]!==void 0&&(u=arguments[3])),new o.default.Geometry),h=(d.gid="".concat(l,"|").concat(c),this);return u.match(/\.stl$/i)?this.httpDo(l,"GET","arrayBuffer",function(f){(function(g,y){if(function(Z){for(var I=new DataView(Z),G=[115,111,108,105,100],R=0;R<5;R++)if(function(C,V,x){for(var w=0,k=C.length;w<k;w++)if(C[w]!==V.getUint8(x+w,!1))return;return 1}(G,I,R))return;return 1}(y))(function(Z,I){for(var G,R,C,V,x,w,k,A=new DataView(I),Y=A.getUint32(80,!0),U=!1,M=0;M<70;M++)A.getUint32(M,!1)===1129270351&&A.getUint8(M+4)===82&&A.getUint8(M+5)===61&&(U=!0,V=[],x=A.getUint8(M+6)/255,w=A.getUint8(M+7)/255,k=A.getUint8(M+8)/255);for(var j=0;j<Y;j++){for(var K,P=84+50*j,J=A.getFloat32(P,!0),E=A.getFloat32(4+P,!0),O=A.getFloat32(8+P,!0),D=(U&&(K=A.getUint16(48+P,!0),C=(32768&K)==0?(G=(31&K)/31,R=(K>>5&31)/31,(K>>10&31)/31):(G=x,R=w,k)),new o.default.Vector(J,E,O)),le=1;le<=3;le++){var X=P+12*le,X=new o.default.Vector(A.getFloat32(X,!0),A.getFloat32(4+X,!0),A.getFloat32(8+X,!0));Z.vertices.push(X),Z.vertexNormals.push(D),U&&V.push(G,R,C)}Z.faces.push([3*j,3*j+1,3*j+2]),Z.uvs.push([0,0],[0,0],[0,0])}})(g,y);else{if(y=new DataView(y),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");y=new TextDecoder("utf-8").decode(y).split(`
`),function(Z,I){for(var G,R,C="",V=[],x=0;x<I.length;++x){for(var w=I[x].trim(),k=w.split(" "),A=0;A<k.length;++A)k[A]===""&&k.splice(A,1);if(k.length!==0)switch(C){case"":if(k[0]!=="solid")return console.error(w),console.error('Invalid state "'.concat(k[0],'", should be "solid"'));C="solid";break;case"solid":if(k[0]!=="facet"||k[1]!=="normal")return console.error(w),console.error('Invalid state "'.concat(k[0],'", should be "facet normal"'));G=new o.default.Vector(parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4])),Z.vertexNormals.push(G,G,G),C="facet normal";break;case"facet normal":if(k[0]!=="outer"||k[1]!=="loop")return console.error(w),console.error('Invalid state "'.concat(k[0],'", should be "outer loop"'));C="vertex";break;case"vertex":if(k[0]==="vertex")R=new o.default.Vector(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])),Z.vertices.push(R),Z.uvs.push([0,0]),V.push(Z.vertices.indexOf(R));else{if(k[0]!=="endloop")return console.error(w),console.error('Invalid state "'.concat(k[0],'", should be "vertex" or "endloop"'));Z.faces.push(V),V=[],C="endloop"}break;case"endloop":if(k[0]!=="endfacet")return console.error(w),console.error('Invalid state "'.concat(k[0],'", should be "endfacet"'));C="endfacet";break;case"endfacet":if(k[0]!=="endsolid"){if(k[0]!=="facet"||k[1]!=="normal")return console.error(w),console.error('Invalid state "'.concat(k[0],'", should be "endsolid" or "facet normal"'));G=new o.default.Vector(parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4])),Z.vertexNormals.push(G,G,G),C="facet normal"}break;default:console.error('Invalid state "'.concat(C,'"'))}}}(g,y)}})(d,f),c&&d.normalize(),h._decrementPreload(),typeof m=="function"&&m(d)},p):u.match(/\.obj$/i)?this.loadStrings(l,function(f){for(var g=d,y=f,Z={v:[],vt:[],vn:[]},I={},G=0;G<y.length;++G){var R=y[G].trim().split(/\b\s+/);if(0<R.length){if(R[0]==="v"||R[0]==="vn"){var C=new o.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3]));Z[R[0]].push(C)}else if(R[0]==="vt")C=[parseFloat(R[1]),1-parseFloat(R[2])],Z[R[0]].push(C);else if(R[0]==="f")for(var V=3;V<R.length;++V){for(var x=[],w=[1,V-1,V],k=0;k<w.length;++k){var A=R[w[k]],Y=0;if(I[A]!==void 0)Y=I[A];else{for(var U=A.split("/"),M=0;M<U.length;M++)U[M]=parseInt(U[M])-1;Y=I[A]=g.vertices.length,g.vertices.push(Z.v[U[0]].copy()),Z.vt[U[1]]?g.uvs.push(Z.vt[U[1]].slice()):g.uvs.push([0,0]),Z.vn[U[2]]&&g.vertexNormals.push(Z.vn[U[2]].copy())}x.push(Y)}x[0]!==x[1]&&x[0]!==x[2]&&x[1]!==x[2]&&g.faces.push(x)}}}g.vertexNormals.length===0&&g.computeNormals(),c&&d.normalize(),h._decrementPreload(),typeof m=="function"&&m(d)},p):(o.default._friendlyFileLoadError(3,l),p?p():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),d},o.default.prototype.model=function(l){this._assert3d("model"),o.default._validateParameters("model",arguments),0<l.vertices.length&&(this._renderer.geometryInHash(l.gid)||(l._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(l.gid,l)),this._renderer.drawBuffers(l.gid))};var a=o.default;s.default=a},{"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],314:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.join"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}r("./p5.Texture"),l.default.prototype.loadShader=function(u,d,h,f){l.default._validateParameters("loadShader",arguments),f=f||console.error;function g(){Z._decrementPreload(),h&&h(y)}var y=new l.default.Shader,Z=this,I=!1,G=!1;return this.loadStrings(u,function(R){y._vertSrc=R.join(`
`),G=!0,I&&g()},f),this.loadStrings(d,function(R){y._fragSrc=R.join(`
`),I=!0,G&&g()},f),y},l.default.prototype.createShader=function(u,d){return this._assert3d("createShader"),l.default._validateParameters("createShader",arguments),new l.default.Shader(this._renderer,u,d)},l.default.prototype.shader=function(u){return this._assert3d("shader"),l.default._validateParameters("shader",arguments),u._renderer===void 0&&(u._renderer=this._renderer),u.init(),u.isStrokeShader()?this._renderer.userStrokeShader=u:(this._renderer.userFillShader=u,this._renderer._useNormalMaterial=!1),this},l.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},l.default.prototype.texture=function(u){return this._assert3d("texture"),l.default._validateParameters("texture",arguments),u.gifProperties&&u._animateGif(this),this._renderer.drawMode=c.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=u,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.textureMode=function(u){u!==c.IMAGE&&u!==c.NORMAL?console.warn("You tried to set ".concat(u," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=u},l.default.prototype.textureWrap=function(u){for(var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u,h=(this._renderer.textureWrapX=u,this._renderer.textureWrapY=d,this._renderer.textures),f=0;f<h.length;f++)h[f].setWrapMode(u,d)},l.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return l.default._validateParameters("normalMaterial",d),this._renderer.drawMode=c.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},l.default.prototype.ambientMaterial=function(u,d,h){this._assert3d("ambientMaterial"),l.default._validateParameters("ambientMaterial",arguments);var f=l.default.prototype.color.apply(this,arguments);return this._renderer.curAmbientColor=f._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.emissiveMaterial=function(u,d,h,f){this._assert3d("emissiveMaterial"),l.default._validateParameters("emissiveMaterial",arguments);var g=l.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=g._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},l.default.prototype.specularMaterial=function(u,d,h,f){this._assert3d("specularMaterial"),l.default._validateParameters("specularMaterial",arguments);var g=l.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=g._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},l.default.prototype.shininess=function(u){return this._assert3d("shininess"),l.default._validateParameters("shininess",arguments),this._renderer._useShininess=u=u<1?1:u,this},l.default.RendererGL.prototype._applyColorBlend=function(u){var d=this.GL,h=this.drawMode===c.TEXTURE||this.curBlendMode!==c.BLEND||u[u.length-1]<1||this._isErasing;return h!==this._isBlending&&(h||this.curBlendMode!==c.BLEND&&this.curBlendMode!==c.ADD?d.enable(d.BLEND):d.disable(d.BLEND),d.depthMask(!0),this._isBlending=h),this._applyBlendMode(),u},l.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var u=this.GL;switch(this.curBlendMode){case c.BLEND:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA);break;case c.ADD:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.SRC_ALPHA,u.ONE);break;case c.REMOVE:u.blendEquation(u.FUNC_REVERSE_SUBTRACT),u.blendFunc(u.SRC_ALPHA,u.DST_ALPHA);break;case c.MULTIPLY:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ONE,u.ONE);break;case c.SCREEN:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE,u.ONE,u.ONE);break;case c.EXCLUSION:u.blendEquationSeparate(u.FUNC_ADD,u.FUNC_ADD),u.blendFuncSeparate(u.ONE_MINUS_DST_COLOR,u.ONE_MINUS_SRC_COLOR,u.ONE,u.ONE);break;case c.REPLACE:u.blendEquation(u.FUNC_ADD),u.blendFunc(u.ONE,u.ZERO);break;case c.SUBTRACT:u.blendEquationSeparate(u.FUNC_REVERSE_SUBTRACT,u.FUNC_ADD),u.blendFuncSeparate(u.SRC_ALPHA,u.ONE,u.ONE,u.ONE);break;case c.DARKEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MIN_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case c.LIGHTEST:this.blendExt?(u.blendEquationSeparate(this.blendExt.MAX_EXT,u.FUNC_ADD),u.blendFuncSeparate(u.ONE,u.ONE,u.ONE,u.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var p=l.default;s.default=p},{"../core/constants":256,"../core/main":267,"./p5.Texture":323,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],315:[function(r,i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.prototype.camera=function(){var a;this._assert3d("camera");for(var l=arguments.length,c=new Array(l),m=0;m<l;m++)c[m]=arguments[m];return o.default._validateParameters("camera",c),(a=this._renderer._curCamera).camera.apply(a,c),this},o.default.prototype.perspective=function(){var a;this._assert3d("perspective");for(var l=arguments.length,c=new Array(l),m=0;m<l;m++)c[m]=arguments[m];return o.default._validateParameters("perspective",c),(a=this._renderer._curCamera).perspective.apply(a,c),this},o.default.prototype.ortho=function(){var a;this._assert3d("ortho");for(var l=arguments.length,c=new Array(l),m=0;m<l;m++)c[m]=arguments[m];return o.default._validateParameters("ortho",c),(a=this._renderer._curCamera).ortho.apply(a,c),this},o.default.prototype.frustum=function(){var a;this._assert3d("frustum");for(var l=arguments.length,c=new Array(l),m=0;m<l;m++)c[m]=arguments[m];return o.default._validateParameters("frustum",c),(a=this._renderer._curCamera).frustum.apply(a,c),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var a=new o.default.Camera(this._renderer);return a._computeCameraDefaultSettings(),a._setDefaultCamera(),this._renderer._curCamera=a},o.default.Camera=function(a){this._renderer=a,this.cameraType="default",this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix},o.default.Camera.prototype.perspective=function(p,l,c,m){this.cameraType=0<arguments.length?"custom":"default",p===void 0?(p=this.defaultCameraFOV,this.cameraFOV=p):this.cameraFOV=this._renderer._pInst._toRadians(p),l===void 0&&(l=this.defaultAspectRatio),c===void 0&&(c=this.defaultCameraNear),m===void 0&&(m=this.defaultCameraFar),c<=1e-4&&(c=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),m<c&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=l,this.cameraNear=c,this.cameraFar=m,this.projMatrix=o.default.Matrix.identity();var p=1/Math.tan(this.cameraFOV/2),u=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(p/l,0,0,0,0,-p,0,0,0,0,(m+c)*u,-1,0,0,2*m*c*u,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},o.default.Camera.prototype.ortho=function(I,Z,c,m,p,u){I===void 0&&(I=-this._renderer.width/2),Z===void 0&&(Z=+this._renderer.width/2),c===void 0&&(c=-this._renderer.height/2),p===void 0&&(p=0);var G=Z-I,d=(m=m===void 0?+this._renderer.height/2:m)-c,h=(u=u===void 0?Math.max(this._renderer.width,this._renderer.height):u)-p,f=2/G,g=2/d,y=-2/h,Z=-(Z+I)/G,I=-(m+c)/d,G=-(u+p)/h;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(f,0,0,0,0,-g,0,0,0,0,y,0,Z,I,G,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype.frustum=function(I,Z,c,m,p,u){I===void 0&&(I=-this._renderer.width/2),Z===void 0&&(Z=+this._renderer.width/2),c===void 0&&(c=-this._renderer.height/2),p===void 0&&(p=0);var G=Z-I,d=(m=m===void 0?+this._renderer.height/2:m)-c,h=(u=u===void 0?Math.max(this._renderer.width,this._renderer.height):u)-p,f=2*p/G,g=2*p/d,y=-2*u*p/h,Z=(Z+I)/G,I=(m+c)/d,G=-(u+p)/h;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(f,0,0,0,0,g,0,0,Z,I,G,-1,0,0,y,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype._rotateView=function(f,l,c,m){var p=this.centerX,u=this.centerY,d=this.centerZ,h=(p-=this.eyeX,u-=this.eyeY,d-=this.eyeZ,o.default.Matrix.identity(this._renderer._pInst)),f=(h.rotate(this._renderer._pInst._toRadians(f),l,c,m),[p*h.mat4[0]+u*h.mat4[4]+d*h.mat4[8],p*h.mat4[1]+u*h.mat4[5]+d*h.mat4[9],p*h.mat4[2]+u*h.mat4[6]+d*h.mat4[10]]);f[0]+=this.eyeX,f[1]+=this.eyeY,f[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,f[0],f[1],f[2],this.upX,this.upY,this.upZ)},o.default.Camera.prototype.pan=function(a){var l=this._getLocalAxes();this._rotateView(a,l.y[0],l.y[1],l.y[2])},o.default.Camera.prototype.tilt=function(a){var l=this._getLocalAxes();this._rotateView(a,l.x[0],l.x[1],l.x[2])},o.default.Camera.prototype.lookAt=function(a,l,c){this.camera(this.eyeX,this.eyeY,this.eyeZ,a,l,c,this.upX,this.upY,this.upZ)},o.default.Camera.prototype.camera=function(a,l,c,m,p,u,d,h,f){return a===void 0&&(a=this.defaultEyeX,l=this.defaultEyeY,c=this.defaultEyeZ,m=a,p=l,h=1,f=d=u=0),this.eyeX=a,this.eyeY=l,this.eyeZ=c,m!==void 0&&(this.centerX=m,this.centerY=p,this.centerZ=u),d!==void 0&&(this.upX=d,this.upY=h,this.upZ=f),m=this._getLocalAxes(),this.cameraMatrix.set(m.x[0],m.y[0],m.z[0],0,m.x[1],m.y[1],m.z[1],0,m.x[2],m.y[2],m.z[2],0,0,0,0,1),p=-a,this.cameraMatrix.translate([p,-l,-c]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},o.default.Camera.prototype.move=function(m,p,c){var u=this._getLocalAxes(),m=[u.x[0]*m,u.x[1]*m,u.x[2]*m],p=[u.y[0]*p,u.y[1]*p,u.y[2]*p],u=[u.z[0]*c,u.z[1]*c,u.z[2]*c];this.camera(this.eyeX+m[0]+p[0]+u[0],this.eyeY+m[1]+p[1]+u[1],this.eyeZ+m[2]+p[2]+u[2],this.centerX+m[0]+p[0]+u[0],this.centerY+m[1]+p[1]+u[1],this.centerZ+m[2]+p[2]+u[2],0,1,0)},o.default.Camera.prototype.setPosition=function(a,l,c){var m=a-this.eyeX,p=l-this.eyeY,u=c-this.eyeZ;this.camera(a,l,c,this.centerX+m,this.centerY+p,this.centerZ+u,0,1,0)},o.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},o.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},o.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},o.default.Camera.prototype.copy=function(){var a=new o.default.Camera(this._renderer);return a.cameraFOV=this.cameraFOV,a.aspectRatio=this.aspectRatio,a.eyeX=this.eyeX,a.eyeY=this.eyeY,a.eyeZ=this.eyeZ,a.centerX=this.centerX,a.centerY=this.centerY,a.centerZ=this.centerZ,a.cameraNear=this.cameraNear,a.cameraFar=this.cameraFar,a.cameraType=this.cameraType,a.cameraMatrix=this.cameraMatrix.copy(),a.projMatrix=this.projMatrix.copy(),a},o.default.Camera.prototype._getLocalAxes=function(){var a=this.eyeX-this.centerX,l=this.eyeY-this.centerY,c=this.eyeZ-this.centerZ,d=Math.sqrt(a*a+l*l+c*c),d=(d!==0&&(a/=d,l/=d,c/=d),this.upX),m=(h=this.upY)*c-(f=this.upZ)*l,p=-d*c+f*a,u=d*l-h*a,d=l*u-c*p,h=-a*u+c*m,f=a*p-l*m,g=Math.sqrt(m*m+p*p+u*u),g=(g!==0&&(m/=g,p/=g,u/=g),Math.sqrt(d*d+h*h+f*f));return g!==0&&(d/=g,h/=g,f/=g),{x:[m,p,u],y:[d,h,f],z:[a,l,c]}},o.default.Camera.prototype._orbit=function(h,l,f){var p=this.eyeX-this.centerX,d=this.eyeY-this.centerY,u=this.eyeZ-this.centerZ,m=Math.sqrt(p*p+d*d+u*u),p=Math.atan2(p,u),u=Math.acos(Math.max(-1,Math.min(1,d/m))),d=(p+=h,(m+=f)<0&&(m=.1),(u+=l)>Math.PI?u=Math.PI:u<=0&&(u=.001),Math.sin(u)*m*Math.sin(p)),h=Math.cos(u)*m,f=Math.sin(u)*m*Math.cos(p);this.camera(d+this.centerX,h+this.centerY,f+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},o.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},o.default.prototype.setCamera=function(a){this._renderer._curCamera=a,this._renderer.uPMatrix.set(a.projMatrix.mat4[0],a.projMatrix.mat4[1],a.projMatrix.mat4[2],a.projMatrix.mat4[3],a.projMatrix.mat4[4],a.projMatrix.mat4[5],a.projMatrix.mat4[6],a.projMatrix.mat4[7],a.projMatrix.mat4[8],a.projMatrix.mat4[9],a.projMatrix.mat4[10],a.projMatrix.mat4[11],a.projMatrix.mat4[12],a.projMatrix.mat4[13],a.projMatrix.mat4[14],a.projMatrix.mat4[15])},r=o.default.Camera,s.default=r},{"../core/main":267}],316:[function(r,i,s){r("core-js/modules/es.string.sub"),r("core-js/modules/es.string.sub"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Geometry=function(a,l,c){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=a!==void 0?a:1,this.detailY=l!==void 0?l:1,this.dirtyFlags={},c instanceof Function&&c.call(this),this},o.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},o.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var a,l,c,m=this.detailX+1,p=0;p<this.detailY;p++)for(var u=0;u<this.detailX;u++)l=(p+1)*m+u+1,this.faces.push([p*m+u,a=p*m+u+1,c=(p+1)*m+u]),this.faces.push([c,a,l]);return this},o.default.Geometry.prototype._getFaceNormal=function(l){var l=this.faces[l],c=this.vertices[l[0]],p=this.vertices[l[1]],l=this.vertices[l[2]],p=o.default.Vector.sub(p,c),l=o.default.Vector.sub(l,c),c=o.default.Vector.cross(p,l),m=o.default.Vector.mag(c),p=m/(o.default.Vector.mag(p)*o.default.Vector.mag(l));return p===0||isNaN(p)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),c):(1<p&&(p=1),c.mult(Math.asin(p)/m))},o.default.Geometry.prototype.computeNormals=function(){for(var a=this.vertexNormals,l=this.vertices,c=this.faces,m=a.length=0;m<l.length;++m)a.push(new o.default.Vector);for(var p=0;p<c.length;++p)for(var u=c[p],d=this._getFaceNormal(p),h=0;h<3;++h)a[u[h]].add(d);for(m=0;m<l.length;++m)a[m].normalize();return this},o.default.Geometry.prototype.averageNormals=function(){for(var a=0;a<=this.detailY;a++){var l=this.detailX+1,c=o.default.Vector.add(this.vertexNormals[a*l],this.vertexNormals[a*l+this.detailX]),c=o.default.Vector.div(c,2);this.vertexNormals[a*l]=c,this.vertexNormals[a*l+this.detailX]=c}return this},o.default.Geometry.prototype.averagePoleNormals=function(){for(var a=new o.default.Vector(0,0,0),l=0;l<this.detailX;l++)a.add(this.vertexNormals[l]);for(var a=o.default.Vector.div(a,this.detailX),c=0;c<this.detailX;c++)this.vertexNormals[c]=a;a=new o.default.Vector(0,0,0);for(var m=this.vertices.length-1;m>this.vertices.length-1-this.detailX;m--)a.add(this.vertexNormals[m]);a=o.default.Vector.div(a,this.detailX);for(var p=this.vertices.length-1;p>this.vertices.length-1-this.detailX;p--)this.vertexNormals[p]=a;return this},o.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var a=0,l=this.strokeIndices.length;a<l;a++)this.edges.push(this.strokeIndices[a]);else for(var c=0;c<this.faces.length;c++)this.edges.push([this.faces[c][0],this.faces[c][1]]),this.edges.push([this.faces[c][1],this.faces[c][2]]),this.edges.push([this.faces[c][2],this.faces[c][0]]);return this},o.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var a=this.lineNormals.length=0;a<this.edges.length;a++){var c=this.vertices[this.edges[a][0]],p=this.vertices[this.edges[a][1]],d=p.copy().sub(c).normalize(),l=c.array(),c=c.array(),m=p.array(),p=p.array(),u=d.array(),d=d.array();u.push(1),d.push(-1),this.lineNormals.push(u,d,u,u,d,d),this.lineVertices.push(l,c,m,m,c,p)}return this},o.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var a=this.vertices[0].copy(),l=this.vertices[0].copy(),c=0;c<this.vertices.length;c++)a.x=Math.max(a.x,this.vertices[c].x),l.x=Math.min(l.x,this.vertices[c].x),a.y=Math.max(a.y,this.vertices[c].y),l.y=Math.min(l.y,this.vertices[c].y),a.z=Math.max(a.z,this.vertices[c].z),l.z=Math.min(l.z,this.vertices[c].z);for(var m=o.default.Vector.lerp(a,l,.5),p=o.default.Vector.sub(a,l),u=200/Math.max(Math.max(p.x,p.y),p.z),d=0;d<this.vertices.length;d++)this.vertices[d].sub(m),this.vertices[d].mult(u)}return this},r=o.default.Geometry,s.default=r},{"../core/main":267,"core-js/modules/es.string.sub":192}],317:[function(c,i,s){c("core-js/modules/es.array.iterator"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.typed-array.float32-array"),c("core-js/modules/es.typed-array.copy-within"),c("core-js/modules/es.typed-array.every"),c("core-js/modules/es.typed-array.fill"),c("core-js/modules/es.typed-array.filter"),c("core-js/modules/es.typed-array.find"),c("core-js/modules/es.typed-array.find-index"),c("core-js/modules/es.typed-array.for-each"),c("core-js/modules/es.typed-array.includes"),c("core-js/modules/es.typed-array.index-of"),c("core-js/modules/es.typed-array.iterator"),c("core-js/modules/es.typed-array.join"),c("core-js/modules/es.typed-array.last-index-of"),c("core-js/modules/es.typed-array.map"),c("core-js/modules/es.typed-array.reduce"),c("core-js/modules/es.typed-array.reduce-right"),c("core-js/modules/es.typed-array.reverse"),c("core-js/modules/es.typed-array.set"),c("core-js/modules/es.typed-array.slice"),c("core-js/modules/es.typed-array.some"),c("core-js/modules/es.typed-array.sort"),c("core-js/modules/es.typed-array.subarray"),c("core-js/modules/es.typed-array.to-locale-string"),c("core-js/modules/es.typed-array.to-string"),c("core-js/modules/es.array.iterator"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.typed-array.float32-array"),c("core-js/modules/es.typed-array.copy-within"),c("core-js/modules/es.typed-array.every"),c("core-js/modules/es.typed-array.fill"),c("core-js/modules/es.typed-array.filter"),c("core-js/modules/es.typed-array.find"),c("core-js/modules/es.typed-array.find-index"),c("core-js/modules/es.typed-array.for-each"),c("core-js/modules/es.typed-array.includes"),c("core-js/modules/es.typed-array.index-of"),c("core-js/modules/es.typed-array.iterator"),c("core-js/modules/es.typed-array.join"),c("core-js/modules/es.typed-array.last-index-of"),c("core-js/modules/es.typed-array.map"),c("core-js/modules/es.typed-array.reduce"),c("core-js/modules/es.typed-array.reduce-right"),c("core-js/modules/es.typed-array.reverse"),c("core-js/modules/es.typed-array.set"),c("core-js/modules/es.typed-array.slice"),c("core-js/modules/es.typed-array.some"),c("core-js/modules/es.typed-array.sort"),c("core-js/modules/es.typed-array.subarray"),c("core-js/modules/es.typed-array.to-locale-string"),c("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(c=c("../core/main"))&&c.__esModule?c:{default:c},a=Array,l=function(m){return m instanceof Array},c=(typeof Float32Array<"u"&&(a=Float32Array,l=function(m){return m instanceof Array||m instanceof Float32Array}),o.default.Matrix=function(){for(var m=new Array(arguments.length),p=0;p<m.length;++p)m[p]=arguments[p];return m.length&&m[m.length-1]instanceof o.default&&(this.p5=m[m.length-1]),m[0]==="mat3"?this.mat3=Array.isArray(m[1])?m[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(m[0])?m[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},o.default.Matrix.prototype.set=function(m){return m instanceof o.default.Matrix?this.mat4=m.mat4:l(m)?this.mat4=m:arguments.length===16&&(this.mat4[0]=m,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},o.default.Matrix.prototype.get=function(){return new o.default.Matrix(this.mat4,this.p5)},o.default.Matrix.prototype.copy=function(){var m=new o.default.Matrix(this.p5);return m.mat4[0]=this.mat4[0],m.mat4[1]=this.mat4[1],m.mat4[2]=this.mat4[2],m.mat4[3]=this.mat4[3],m.mat4[4]=this.mat4[4],m.mat4[5]=this.mat4[5],m.mat4[6]=this.mat4[6],m.mat4[7]=this.mat4[7],m.mat4[8]=this.mat4[8],m.mat4[9]=this.mat4[9],m.mat4[10]=this.mat4[10],m.mat4[11]=this.mat4[11],m.mat4[12]=this.mat4[12],m.mat4[13]=this.mat4[13],m.mat4[14]=this.mat4[14],m.mat4[15]=this.mat4[15],m},o.default.Matrix.identity=function(m){return new o.default.Matrix(m)},o.default.Matrix.prototype.transpose=function(m){var p,u,d,h,f,g;return m instanceof o.default.Matrix?(p=m.mat4[1],u=m.mat4[2],d=m.mat4[3],h=m.mat4[6],f=m.mat4[7],g=m.mat4[11],this.mat4[0]=m.mat4[0],this.mat4[1]=m.mat4[4],this.mat4[2]=m.mat4[8],this.mat4[3]=m.mat4[12],this.mat4[4]=p,this.mat4[5]=m.mat4[5],this.mat4[6]=m.mat4[9],this.mat4[7]=m.mat4[13],this.mat4[8]=u,this.mat4[9]=h,this.mat4[10]=m.mat4[10],this.mat4[11]=m.mat4[14],this.mat4[12]=d,this.mat4[13]=f,this.mat4[14]=g,this.mat4[15]=m.mat4[15]):l(m)&&(p=m[1],u=m[2],d=m[3],h=m[6],f=m[7],g=m[11],this.mat4[0]=m[0],this.mat4[1]=m[4],this.mat4[2]=m[8],this.mat4[3]=m[12],this.mat4[4]=p,this.mat4[5]=m[5],this.mat4[6]=m[9],this.mat4[7]=m[13],this.mat4[8]=u,this.mat4[9]=h,this.mat4[10]=m[10],this.mat4[11]=m[14],this.mat4[12]=d,this.mat4[13]=f,this.mat4[14]=g,this.mat4[15]=m[15]),this},o.default.Matrix.prototype.invert=function(A){A instanceof o.default.Matrix?(p=A.mat4[0],u=A.mat4[1],d=A.mat4[2],h=A.mat4[3],f=A.mat4[4],g=A.mat4[5],y=A.mat4[6],Z=A.mat4[7],I=A.mat4[8],G=A.mat4[9],R=A.mat4[10],C=A.mat4[11],V=A.mat4[12],x=A.mat4[13],w=A.mat4[14],k=A.mat4[15]):l(A)&&(p=A[0],u=A[1],d=A[2],h=A[3],f=A[4],g=A[5],y=A[6],Z=A[7],I=A[8],G=A[9],R=A[10],C=A[11],V=A[12],x=A[13],w=A[14],k=A[15]);var p,u,d,h,f,g,y,Z,I,G,R,C,V,x,w,k,A=p*g-u*f,Y=p*y-d*f,U=p*Z-h*f,M=u*y-d*g,j=u*Z-h*g,K=d*Z-h*y,P=I*x-G*V,J=I*w-R*V,E=I*k-C*V,O=G*w-R*x,D=G*k-C*x,le=R*k-C*w,X=A*le-Y*D+U*O+M*E-j*J+K*P;return X?(this.mat4[0]=(g*le-y*D+Z*O)*(X=1/X),this.mat4[1]=(d*D-u*le-h*O)*X,this.mat4[2]=(x*K-w*j+k*M)*X,this.mat4[3]=(R*j-G*K-C*M)*X,this.mat4[4]=(y*E-f*le-Z*J)*X,this.mat4[5]=(p*le-d*E+h*J)*X,this.mat4[6]=(w*U-V*K-k*Y)*X,this.mat4[7]=(I*K-R*U+C*Y)*X,this.mat4[8]=(f*D-g*E+Z*P)*X,this.mat4[9]=(u*E-p*D-h*P)*X,this.mat4[10]=(V*j-x*U+k*A)*X,this.mat4[11]=(G*U-I*j-C*A)*X,this.mat4[12]=(g*J-f*O-y*P)*X,this.mat4[13]=(p*O-u*J+d*P)*X,this.mat4[14]=(x*Y-V*M-w*A)*X,this.mat4[15]=(I*M-G*Y+R*A)*X,this):null},o.default.Matrix.prototype.invert3x3=function(){var m=this.mat3[0],p=this.mat3[1],u=this.mat3[2],d=this.mat3[3],h=this.mat3[4],f=this.mat3[5],g=this.mat3[6],y=this.mat3[7],Z=this.mat3[8],I=Z*h-f*y,G=-Z*d+f*g,R=y*d-h*g,C=m*I+p*G+u*R;return C?(this.mat3[0]=I*(C=1/C),this.mat3[1]=(-Z*p+u*y)*C,this.mat3[2]=(f*p-u*h)*C,this.mat3[3]=G*C,this.mat3[4]=(Z*m-u*g)*C,this.mat3[5]=(-f*m+u*d)*C,this.mat3[6]=R*C,this.mat3[7]=(-y*m+p*g)*C,this.mat3[8]=(h*m-p*d)*C,this):null},o.default.Matrix.prototype.transpose3x3=function(m){var p=m[1],u=m[2],d=m[5];return this.mat3[1]=m[3],this.mat3[2]=m[6],this.mat3[3]=p,this.mat3[5]=m[7],this.mat3[6]=u,this.mat3[7]=d,this},o.default.Matrix.prototype.inverseTranspose=function(m){if(this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=m.mat4[0],this.mat3[1]=m.mat4[1],this.mat3[2]=m.mat4[2],this.mat3[3]=m.mat4[4],this.mat3[4]=m.mat4[5],this.mat3[5]=m.mat4[6],this.mat3[6]=m.mat4[8],this.mat3[7]=m.mat4[9],this.mat3[8]=m.mat4[10]),m=this.invert3x3(),m)m.transpose3x3(this.mat3);else for(var p=0;p<9;p++)this.mat3[p]=0;return this},o.default.Matrix.prototype.determinant=function(){var m=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],p=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],u=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],d=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],h=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],f=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],g=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],y=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],Z=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],I=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],G=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return m*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-p*G+u*I+d*Z-h*y+f*g},o.default.Matrix.prototype.mult=function(u){var p;if(u===this||u===this.mat4)p=this.copy().mat4;else if(u instanceof o.default.Matrix)p=u.mat4;else if(l(u))p=u;else{if(arguments.length!==16)return;p=arguments}var u=this.mat4[0],d=this.mat4[1],h=this.mat4[2],f=this.mat4[3];return this.mat4[0]=u*p[0]+d*p[4]+h*p[8]+f*p[12],this.mat4[1]=u*p[1]+d*p[5]+h*p[9]+f*p[13],this.mat4[2]=u*p[2]+d*p[6]+h*p[10]+f*p[14],this.mat4[3]=u*p[3]+d*p[7]+h*p[11]+f*p[15],u=this.mat4[4],d=this.mat4[5],h=this.mat4[6],f=this.mat4[7],this.mat4[4]=u*p[0]+d*p[4]+h*p[8]+f*p[12],this.mat4[5]=u*p[1]+d*p[5]+h*p[9]+f*p[13],this.mat4[6]=u*p[2]+d*p[6]+h*p[10]+f*p[14],this.mat4[7]=u*p[3]+d*p[7]+h*p[11]+f*p[15],u=this.mat4[8],d=this.mat4[9],h=this.mat4[10],f=this.mat4[11],this.mat4[8]=u*p[0]+d*p[4]+h*p[8]+f*p[12],this.mat4[9]=u*p[1]+d*p[5]+h*p[9]+f*p[13],this.mat4[10]=u*p[2]+d*p[6]+h*p[10]+f*p[14],this.mat4[11]=u*p[3]+d*p[7]+h*p[11]+f*p[15],u=this.mat4[12],d=this.mat4[13],h=this.mat4[14],f=this.mat4[15],this.mat4[12]=u*p[0]+d*p[4]+h*p[8]+f*p[12],this.mat4[13]=u*p[1]+d*p[5]+h*p[9]+f*p[13],this.mat4[14]=u*p[2]+d*p[6]+h*p[10]+f*p[14],this.mat4[15]=u*p[3]+d*p[7]+h*p[11]+f*p[15],this},o.default.Matrix.prototype.apply=function(u){var p;if(u===this||u===this.mat4)p=this.copy().mat4;else if(u instanceof o.default.Matrix)p=u.mat4;else if(l(u))p=u;else{if(arguments.length!==16)return;p=arguments}var u=this.mat4,d=u[0],h=u[4],f=u[8],g=u[12],d=(u[0]=p[0]*d+p[1]*h+p[2]*f+p[3]*g,u[4]=p[4]*d+p[5]*h+p[6]*f+p[7]*g,u[8]=p[8]*d+p[9]*h+p[10]*f+p[11]*g,u[12]=p[12]*d+p[13]*h+p[14]*f+p[15]*g,u[1]),h=u[5],f=u[9],g=u[13],d=(u[1]=p[0]*d+p[1]*h+p[2]*f+p[3]*g,u[5]=p[4]*d+p[5]*h+p[6]*f+p[7]*g,u[9]=p[8]*d+p[9]*h+p[10]*f+p[11]*g,u[13]=p[12]*d+p[13]*h+p[14]*f+p[15]*g,u[2]),h=u[6],f=u[10],g=u[14],d=(u[2]=p[0]*d+p[1]*h+p[2]*f+p[3]*g,u[6]=p[4]*d+p[5]*h+p[6]*f+p[7]*g,u[10]=p[8]*d+p[9]*h+p[10]*f+p[11]*g,u[14]=p[12]*d+p[13]*h+p[14]*f+p[15]*g,u[3]),h=u[7],f=u[11],g=u[15];return u[3]=p[0]*d+p[1]*h+p[2]*f+p[3]*g,u[7]=p[4]*d+p[5]*h+p[6]*f+p[7]*g,u[11]=p[8]*d+p[9]*h+p[10]*f+p[11]*g,u[15]=p[12]*d+p[13]*h+p[14]*f+p[15]*g,this},o.default.Matrix.prototype.scale=function(m,p,u){return m instanceof o.default.Vector?(p=m.y,u=m.z,m=m.x):m instanceof Array&&(p=m[1],u=m[2],m=m[0]),this.mat4[0]*=m,this.mat4[1]*=m,this.mat4[2]*=m,this.mat4[3]*=m,this.mat4[4]*=p,this.mat4[5]*=p,this.mat4[6]*=p,this.mat4[7]*=p,this.mat4[8]*=u,this.mat4[9]*=u,this.mat4[10]*=u,this.mat4[11]*=u,this},o.default.Matrix.prototype.rotate=function(A,D,O,d){D instanceof o.default.Vector?(O=D.y,d=D.z,D=D.x):D instanceof Array&&(O=D[1],d=D[2],D=D[0]);var h=Math.sqrt(D*D+O*O+d*d),h=(D*=1/h,O*=1/h,d*=1/h,this.mat4[0]),f=this.mat4[1],g=this.mat4[2],y=this.mat4[3],Z=this.mat4[4],I=this.mat4[5],G=this.mat4[6],R=this.mat4[7],C=this.mat4[8],V=this.mat4[9],x=this.mat4[10],w=this.mat4[11],k=Math.sin(A),A=Math.cos(A),Y=1-A,U=D*D*Y+A,M=O*D*Y+d*k,j=d*D*Y-O*k,K=D*O*Y-d*k,P=O*O*Y+A,J=d*O*Y+D*k,E=D*d*Y+O*k,O=O*d*Y-D*k,D=d*d*Y+A;return this.mat4[0]=h*U+Z*M+C*j,this.mat4[1]=f*U+I*M+V*j,this.mat4[2]=g*U+G*M+x*j,this.mat4[3]=y*U+R*M+w*j,this.mat4[4]=h*K+Z*P+C*J,this.mat4[5]=f*K+I*P+V*J,this.mat4[6]=g*K+G*P+x*J,this.mat4[7]=y*K+R*P+w*J,this.mat4[8]=h*E+Z*O+C*D,this.mat4[9]=f*E+I*O+V*D,this.mat4[10]=g*E+G*O+x*D,this.mat4[11]=y*E+R*O+w*D,this},o.default.Matrix.prototype.translate=function(d){var p=d[0],u=d[1],d=d[2]||0;this.mat4[12]+=this.mat4[0]*p+this.mat4[4]*u+this.mat4[8]*d,this.mat4[13]+=this.mat4[1]*p+this.mat4[5]*u+this.mat4[9]*d,this.mat4[14]+=this.mat4[2]*p+this.mat4[6]*u+this.mat4[10]*d,this.mat4[15]+=this.mat4[3]*p+this.mat4[7]*u+this.mat4[11]*d},o.default.Matrix.prototype.rotateX=function(m){this.rotate(m,1,0,0)},o.default.Matrix.prototype.rotateY=function(m){this.rotate(m,0,1,0)},o.default.Matrix.prototype.rotateZ=function(m){this.rotate(m,0,0,1)},o.default.Matrix.prototype.perspective=function(h,p,u,d){var h=1/Math.tan(h/2),f=1/(u-d);return this.mat4[0]=h/p,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=h,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(d+u)*f,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*d*u*f,this.mat4[15]=0,this},o.default.Matrix.prototype.ortho=function(m,p,u,d,h,f){var g=1/(m-p),y=1/(u-d),Z=1/(h-f);return this.mat4[0]=-2*g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*y,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*Z,this.mat4[11]=0,this.mat4[12]=(m+p)*g,this.mat4[13]=(d+u)*y,this.mat4[14]=(f+h)*Z,this.mat4[15]=1,this},o.default.Matrix);s.default=c},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],318:[function(r,i,s){r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.RenderBuffer=function(o,a,l,c,m,p){this.size=o,this.src=a,this.dst=l,this.attr=c,this._renderer=m,this.map=p},r.default.RenderBuffer.prototype._prepareBuffer=function(o,a){var l,c,m,d=a.attributes,p=this._renderer.GL,u=o.model||o,d=d[this.attr];d&&(l=o[this.dst],0<(c=u[this.src]).length&&((m=!l)&&(o[this.dst]=l=p.createBuffer()),p.bindBuffer(p.ARRAY_BUFFER,l),!m&&u.dirtyFlags[this.src]===!1||(m=(o=this.map)?o(c):c,this._renderer._bindBuffer(l,p.ARRAY_BUFFER,m),u.dirtyFlags[this.src]=!1),a.enableAttrib(d,this.size)))},r=r.default.RenderBuffer,s.default=r},{"../core/main":267,"core-js/modules/es.array.map":161}],319:[function(r,i,s){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function a(h){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(f){return o(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":o(f)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(d=r("../core/main"))&&d.__esModule?d:{default:d},c=function(h){if(h&&h.__esModule)return h;if(h===null||a(h)!=="object"&&typeof h!="function")return{default:h};var f=m();if(f&&f.has(h))return f.get(h);var g,y={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var I;Object.prototype.hasOwnProperty.call(h,g)&&((I=Z?Object.getOwnPropertyDescriptor(h,g):null)&&(I.get||I.set)?Object.defineProperty(y,g,I):y[g]=h[g])}return y.default=h,f&&f.set(h,y),y}(r("../core/constants"));function m(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,m=function(){return h},h)}function p(h){return function(f){if(Array.isArray(f)){for(var g=0,y=new Array(f.length);g<f.length;g++)y[g]=f[g];return y}}(h)||function(f){if(Symbol.iterator in Object(f)||Object.prototype.toString.call(f)==="[object Arguments]")return Array.from(f)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(h){return this.immediateMode.shapeMode=h!==void 0?h:c.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this};var u={vertices:1,vertexNormals:1,vertexColors:4,uvs:2},d=(l.default.RendererGL.prototype.vertex=function(h,f){if(this.immediateMode.shapeMode===c.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var g in u){var y=u[g],g=this.immediateMode.geometry[g];g.push.apply(g,p(g.slice(g.length-3*y,g.length-2*y)).concat(p(g.slice(g.length-y,g.length))))}var Z,I,G=Z=I=0,R=(arguments.length===3?G=arguments[2]:arguments.length===4?(Z=arguments[2],I=arguments[3]):arguments.length===5&&(G=arguments[2],Z=arguments[3],I=arguments[4]),new l.default.Vector(h,f,G)),R=(this.immediateMode.geometry.vertices.push(R),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexColors.push(R[0],R[1],R[2],R[3]),this.textureMode===c.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(Z/=this._tex.width,I/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(Z,I),this.immediateMode._bezierVertex[0]=h,this.immediateMode._bezierVertex[1]=f,this.immediateMode._bezierVertex[2]=G,this.immediateMode._quadraticVertex[0]=h,this.immediateMode._quadraticVertex[1]=f,this.immediateMode._quadraticVertex[2]=G,this},l.default.RendererGL.prototype.normal=function(h,f,g){return h instanceof l.default.Vector?this._currentNormal=h:this._currentNormal=new l.default.Vector(h,f,g),this},l.default.RendererGL.prototype.endShape=function(h,f,g,y,Z,I){return this.immediateMode.shapeMode===c.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(h){var f;this.immediateMode.geometry.vertices.length!==0&&(f=this._doStroke&&this.drawMode!==c.TEXTURE,h=h===c.CLOSE,f&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,h),this.immediateMode.geometry._edgesToVertices()),f=this.immediateMode.shapeMode===c.TESS,(this.isBezier||this.isQuadratic||this.isCurve||f)&&this.immediateMode.shapeMode!==c.LINES&&this._tesselateShape())},l.default.RendererGL.prototype._calculateEdges=function(h,f,g){var y=[],Z=0;switch(h){case c.TRIANGLE_STRIP:for(Z=0;Z<f.length-2;Z++)y.push([Z,Z+1]),y.push([Z,Z+2]);y.push([Z,Z+1]);break;case c.TRIANGLES:for(Z=0;Z<f.length-2;Z+=3)y.push([Z,Z+1]),y.push([Z+1,Z+2]),y.push([Z+2,Z]);break;case c.LINES:for(Z=0;Z<f.length-1;Z+=2)y.push([Z,Z+1]);break;case c.QUADS:for(Z=0;Z<f.length-5;Z+=6)y.push([Z,Z+1]),y.push([Z+1,Z+2]),y.push([Z+3,Z+5]),y.push([Z+4,Z+5]);break;case c.QUAD_STRIP:for(Z=0;Z<f.length-2;Z+=2)y.push([Z,Z+1]),y.push([Z,Z+2]),y.push([Z+1,Z+3]);y.push([Z,Z+1]);break;default:for(Z=0;Z<f.length-1;Z++)y.push([Z,Z+1])}return g&&y.push([f.length-1,0]),y},l.default.RendererGL.prototype._tesselateShape=function(){for(var h=this,f=(this.immediateMode.shapeMode=c.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(G,R){return[G.x,G.y,G.z,h.immediateMode.geometry.uvs[2*R],h.immediateMode.geometry.uvs[2*R+1],h.immediateMode.geometry.vertexColors[4*R],h.immediateMode.geometry.vertexColors[4*R+1],h.immediateMode.geometry.vertexColors[4*R+2],h.immediateMode.geometry.vertexColors[4*R+3],h.immediateMode.geometry.vertexNormals[R].x,h.immediateMode.geometry.vertexNormals[R].y,h.immediateMode.geometry.vertexNormals[R].z]}))]),g=this._triangulate(f),y=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),Z=0,I=g.length;Z<I;Z+=12)y.push.apply(y,p(g.slice(Z+5,Z+9))),this.normal.apply(this,p(g.slice(Z+9,Z+12))),this.vertex.apply(this,p(g.slice(Z,Z+5)));this.immediateMode.geometry.vertexColors=y},l.default.RendererGL.prototype._drawImmediateFill=function(){var h=this.GL,f=this._getImmediateFillShader(),g=(this._setFillUniforms(f),!0),y=!1,Z=void 0;try{for(var I,G=this.immediateMode.buffers.fill[Symbol.iterator]();!(g=(I=G.next()).done);g=!0)I.value._prepareBuffer(this.immediateMode.geometry,f)}catch(R){y=!0,Z=R}finally{try{g||G.return==null||G.return()}finally{if(y)throw Z}}this.immediateMode.shapeMode!==c.LINE_STRIP&&this.immediateMode.shapeMode!==c.LINES||(this.immediateMode.shapeMode=c.TRIANGLE_FAN),this.immediateMode.shapeMode===c.QUADS?this.immediateMode.shapeMode=c.TRIANGLES:this.immediateMode.shapeMode===c.QUAD_STRIP&&(this.immediateMode.shapeMode=c.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),h.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),f.unbindShader()},l.default.RendererGL.prototype._drawImmediateStroke=function(){var h=this.GL,f=this._getImmediateStrokeShader(),g=(this._setStrokeUniforms(f),!0),y=!1,Z=void 0;try{for(var I,G=this.immediateMode.buffers.stroke[Symbol.iterator]();!(g=(I=G.next()).done);g=!0)I.value._prepareBuffer(this.immediateMode.geometry,f)}catch(R){y=!0,Z=R}finally{try{g||G.return==null||G.return()}finally{if(y)throw Z}}this._applyColorBlend(this.curStrokeColor),h.drawArrays(h.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),f.unbindShader()},l.default.RendererGL);s.default=d},{"../core/constants":256,"../core/main":267,"./p5.RenderBuffer":318,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],320:[function(r,i,s){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(l=r("../core/main"))&&l.__esModule?l:{default:l};r("./p5.RendererGL"),r("./p5.RenderBuffer");var a=0,l=(o.default.RendererGL.prototype._initBufferDefaults=function(c){var m;return this._freeBuffers(c),1e3<++a&&(m=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[m],a--),this.retainedMode.geometry[c]={}},o.default.RendererGL.prototype._freeBuffers=function(c){var m,p=this.retainedMode.geometry[c];function u(d){var h=!0,f=!1,g=void 0;try{for(var y,Z=d[Symbol.iterator]();!(h=(y=Z.next()).done);h=!0){var I=y.value;p[I.dst]&&(m.deleteBuffer(p[I.dst]),p[I.dst]=null)}}catch(G){f=!0,g=G}finally{try{h||Z.return==null||Z.return()}finally{if(f)throw g}}}p&&(delete this.retainedMode.geometry[c],a--,m=this.GL,p.indexBuffer&&m.deleteBuffer(p.indexBuffer),u(this.retainedMode.buffers.stroke),u(this.retainedMode.buffers.fill))},o.default.RendererGL.prototype.createBuffers=function(f,m){var p,u,d,h=this.GL,f=this._initBufferDefaults(f),g=(f.model=m,f.indexBuffer);return m.faces.length?(g=g||(f.indexBuffer=h.createBuffer()),d=(u=(p=o.default.RendererGL.prototype._flatten(m.faces)).some(function(y){return 65535<y}))?Uint32Array:Uint16Array,this._bindBuffer(g,h.ELEMENT_ARRAY_BUFFER,p,d),f.indexBufferType=u?h.UNSIGNED_INT:h.UNSIGNED_SHORT,f.vertexCount=3*m.faces.length):(g&&(h.deleteBuffer(g),f.indexBuffer=null),f.vertexCount=m.vertices?m.vertices.length:0),f.lineVertexCount=m.lineVertices?m.lineVertices.length:0,f},o.default.RendererGL.prototype.drawBuffers=function(c){var m=this.GL,p=this.retainedMode.geometry[c];if(this._doStroke&&0<p.lineVertexCount){var u=this._getRetainedStrokeShader(),d=(this._setStrokeUniforms(u),!0),h=!1,f=void 0;try{for(var g,y=this.retainedMode.buffers.stroke[Symbol.iterator]();!(d=(g=y.next()).done);d=!0)g.value._prepareBuffer(p,u)}catch(C){h=!0,f=C}finally{try{d||y.return==null||y.return()}finally{if(h)throw f}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(m.TRIANGLES,c),u.unbindShader()}if(this._doFill){var Z=this._getRetainedFillShader(),I=(this._setFillUniforms(Z),!0),h=!1,f=void 0;try{for(var G,R=this.retainedMode.buffers.fill[Symbol.iterator]();!(I=(G=R.next()).done);I=!0)G.value._prepareBuffer(p,Z)}catch(x){h=!0,f=x}finally{try{I||R.return==null||R.return()}finally{if(h)throw f}}p.indexBuffer&&this._bindBuffer(p.indexBuffer,m.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(m.TRIANGLES,c),Z.unbindShader()}return this},o.default.RendererGL.prototype.drawBuffersScaled=function(c,m,p,u){var d=this.uMVMatrix.copy();try{this.uMVMatrix.scale(m,p,u),this.drawBuffers(c)}finally{this.uMVMatrix=d}},o.default.RendererGL.prototype._drawArrays=function(c,m){return this.GL.drawArrays(c,0,this.retainedMode.geometry[m].lineVertexCount),this},o.default.RendererGL.prototype._drawElements=function(c,p){var p=this.retainedMode.geometry[p],u=this.GL;if(p.indexBuffer){if(p.indexBufferType===u.UNSIGNED_INT&&!u.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");u.drawElements(u.TRIANGLES,p.vertexCount,p.indexBufferType,0)}else u.drawArrays(c||u.TRIANGLES,0,p.vertexCount)},o.default.RendererGL.prototype._drawPoints=function(c,m){var p=this.GL,u=this._getImmediatePointShader();this._setPointUniforms(u),this._bindBuffer(m,p.ARRAY_BUFFER,this._vToNArray(c),Float32Array,p.STATIC_DRAW),u.enableAttrib(u.attributes.aPosition,3),p.drawArrays(p.Points,0,c.length),u.unbindShader()},o.default.RendererGL);s.default=l},{"../core/main":267,"./p5.RenderBuffer":318,"./p5.RendererGL":321,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":230}],321:[function(f,i,s){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function a(g){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}f("core-js/modules/es.symbol"),f("core-js/modules/es.symbol.description"),f("core-js/modules/es.symbol.iterator"),f("core-js/modules/es.array.concat"),f("core-js/modules/es.array.fill"),f("core-js/modules/es.array.filter"),f("core-js/modules/es.array.from"),f("core-js/modules/es.array.includes"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.array.slice"),f("core-js/modules/es.object.assign"),f("core-js/modules/es.object.get-own-property-descriptor"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.regexp.to-string"),f("core-js/modules/es.string.includes"),f("core-js/modules/es.string.iterator"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.float64-array"),f("core-js/modules/es.typed-array.int16-array"),f("core-js/modules/es.typed-array.uint8-array"),f("core-js/modules/es.typed-array.uint16-array"),f("core-js/modules/es.typed-array.uint32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/es.weak-map"),f("core-js/modules/web.dom-collections.iterator"),f("core-js/modules/es.symbol"),f("core-js/modules/es.symbol.description"),f("core-js/modules/es.symbol.iterator"),f("core-js/modules/es.array.concat"),f("core-js/modules/es.array.fill"),f("core-js/modules/es.array.filter"),f("core-js/modules/es.array.from"),f("core-js/modules/es.array.includes"),f("core-js/modules/es.array.iterator"),f("core-js/modules/es.array.slice"),f("core-js/modules/es.object.assign"),f("core-js/modules/es.object.to-string"),f("core-js/modules/es.regexp.to-string"),f("core-js/modules/es.string.includes"),f("core-js/modules/es.string.iterator"),f("core-js/modules/es.typed-array.float32-array"),f("core-js/modules/es.typed-array.float64-array"),f("core-js/modules/es.typed-array.int16-array"),f("core-js/modules/es.typed-array.uint8-array"),f("core-js/modules/es.typed-array.uint16-array"),f("core-js/modules/es.typed-array.uint32-array"),f("core-js/modules/es.typed-array.copy-within"),f("core-js/modules/es.typed-array.every"),f("core-js/modules/es.typed-array.fill"),f("core-js/modules/es.typed-array.filter"),f("core-js/modules/es.typed-array.find"),f("core-js/modules/es.typed-array.find-index"),f("core-js/modules/es.typed-array.for-each"),f("core-js/modules/es.typed-array.includes"),f("core-js/modules/es.typed-array.index-of"),f("core-js/modules/es.typed-array.iterator"),f("core-js/modules/es.typed-array.join"),f("core-js/modules/es.typed-array.last-index-of"),f("core-js/modules/es.typed-array.map"),f("core-js/modules/es.typed-array.reduce"),f("core-js/modules/es.typed-array.reduce-right"),f("core-js/modules/es.typed-array.reverse"),f("core-js/modules/es.typed-array.set"),f("core-js/modules/es.typed-array.slice"),f("core-js/modules/es.typed-array.some"),f("core-js/modules/es.typed-array.sort"),f("core-js/modules/es.typed-array.subarray"),f("core-js/modules/es.typed-array.to-locale-string"),f("core-js/modules/es.typed-array.to-string"),f("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=u(f("../core/main")),c=function(g){if(g&&g.__esModule)return g;if(g===null||a(g)!=="object"&&typeof g!="function")return{default:g};var y=p();if(y&&y.has(g))return y.get(g);var Z,I={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Z in g){var R;Object.prototype.hasOwnProperty.call(g,Z)&&((R=G?Object.getOwnPropertyDescriptor(g,Z):null)&&(R.get||R.set)?Object.defineProperty(I,Z,R):I[Z]=g[Z])}return I.default=g,y&&y.set(g,I),I}(f("../core/constants")),m=u(f("libtess"));f("./p5.Shader"),f("./p5.Camera"),f("../core/p5.Renderer"),f("./p5.Matrix"),f("path");function p(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,p=function(){return g},g)}function u(g){return g&&g.__esModule?g:{default:g}}function d(g){return function(y){if(Array.isArray(y)){for(var Z=0,I=new Array(y.length);Z<y.length;Z++)I[Z]=y[Z];return I}}(g)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,h={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:f+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:f+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
  gl_FragColor.rgb = diffuse * gl_FragColor.rgb + 
                    vAmbientColor * uAmbientMatColor.rgb + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb;
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`},f=(l.default.RendererGL=function(g,y,Z,I){return l.default.Renderer.call(this,g,y,Z),this._setAttributeDefaults(y),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=c.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curAmbientColor=this._cachedFillStyle=[0,0,0,0],this.curSpecularColor=this._cachedFillStyle=[0,0,0,0],this.curEmissiveColor=this._cachedFillStyle=[0,0,0,0],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=c.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new l.default.Matrix,this.uPMatrix=new l.default.Matrix,this.uNMatrix=new l.default.Matrix("mat3"),this._currentNormal=new l.default.Vector(0,0,1),this._curCamera=new l.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new l.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new l.default.Geometry,shapeMode:c.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new l.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new l.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=c.IMAGE,this.textureWrapX=c.CLAMP,this.textureWrapY=c.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},l.default.RendererGL.prototype=Object.create(l.default.Renderer.prototype),l.default.RendererGL.prototype._setAttributeDefaults=function(g){var y={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};g._glAttributes===null?g._glAttributes=y:g._glAttributes=Object.assign(y,g._glAttributes)},l.default.RendererGL.prototype._initContext=function(){if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var g=this.drawingContext;g.enable(g.DEPTH_TEST),g.depthFunc(g.LEQUAL),g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)},l.default.RendererGL.prototype._resetContext=function(g,y){var Z,I=this.width,G=this.height,C=this.canvas.id,R=this._pInst instanceof l.default.Graphics,C=(R?((Z=this._pInst).canvas.parentNode.removeChild(Z.canvas),Z.canvas=document.createElement("canvas"),(Z._pInst._userNode||document.body).appendChild(Z.canvas),l.default.Element.call(Z,Z.canvas,Z._pInst),Z.width=I,Z.height=G):((Z=this.canvas)&&Z.parentNode.removeChild(Z),(Z=document.createElement("canvas")).id=C,(this._pInst._userNode||document.body).appendChild(Z),this._pInst.canvas=Z,this.canvas=Z),new l.default.RendererGL(this._pInst.canvas,this._pInst,!R));this._pInst._setProperty("_renderer",C),C.resize(I,G),C._applyDefaults(),R||this._pInst._elements.push(C),typeof y=="function"&&setTimeout(function(){y.apply(window._renderer,g)},0)},l.default.prototype.setAttributes=function(g,y){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Z=!0;if(y!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[g]!==y&&(this._glAttributes[g]=y,Z=!1)):g instanceof Object&&this._glAttributes!==g&&(this._glAttributes=g,Z=!1),this._renderer.isP3D&&!Z){if(!this._setupDone){for(var I in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(I))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},l.default.RendererGL.prototype.background=function(){var I=(I=this._pInst).color.apply(I,arguments),g=I.levels[0]/255,y=I.levels[1]/255,Z=I.levels[2]/255,I=I.levels[3]/255;this.GL.clearColor(g,y,Z,I),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},l.default.RendererGL.prototype.fill=function(g,y,Z,I){var G=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=G._array,this.drawMode=c.FILL,this._useNormalMaterial=!1,this._tex=null},l.default.RendererGL.prototype.stroke=function(g,y,Z,I){arguments[3]=255;var G=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=G._array},l.default.RendererGL.prototype.strokeCap=function(g){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},l.default.RendererGL.prototype.strokeJoin=function(g){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},l.default.RendererGL.prototype.filter=function(g){console.error("filter() does not work in WEBGL mode")},l.default.RendererGL.prototype.blendMode=function(g){g===c.DARKEST||g===c.LIGHTEST||g===c.ADD||g===c.BLEND||g===c.SUBTRACT||g===c.SCREEN||g===c.EXCLUSION||g===c.REPLACE||g===c.MULTIPLY||g===c.REMOVE?this.curBlendMode=g:g!==c.BURN&&g!==c.OVERLAY&&g!==c.HARD_LIGHT&&g!==c.SOFT_LIGHT&&g!==c.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},l.default.RendererGL.prototype.erase=function(g,y){this._isErasing||(this._applyBlendMode(c.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,g/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,y/255])},l.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},l.default.RendererGL.prototype.strokeWeight=function(g){this.curStrokeWeight!==g&&(this.pointSize=g,this.curStrokeWeight=g)},l.default.RendererGL.prototype._getPixel=function(g,y){var Z=new Uint8Array(4);return this.drawingContext.readPixels(g,y,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,Z),[Z[0],Z[1],Z[2],Z[3]]},l.default.RendererGL.prototype.loadPixels=function(){var g,y=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(y=y.pixels,g=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4,y instanceof Uint8Array&&y.length===g||(y=new Uint8Array(g),this._pixelsState._setProperty("pixels",y)),g=this._pInst._pixelDensity,this.GL.readPixels(0,0,this.width*g,this.height*g,this.GL.RGBA,this.GL.UNSIGNED_BYTE,y))},l.default.RendererGL.prototype.geometryInHash=function(g){return this.retainedMode.geometry[g]!==void 0},l.default.RendererGL.prototype.resize=function(g,y){l.default.Renderer.prototype.resize.call(this,g,y),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize(),g=this._pixelsState,g.pixels!==void 0&&g._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},l.default.RendererGL.prototype.clear=function(){this.GL.clearColor((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},l.default.RendererGL.prototype.applyMatrix=function(g,y,Z,I,G,R){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([g,y,0,0,Z,I,0,0,0,0,1,0,G,R,0,1])},l.default.RendererGL.prototype.translate=function(g,y,Z){return g instanceof l.default.Vector&&(Z=g.z,y=g.y,g=g.x),this.uMVMatrix.translate([g,y,Z]),this},l.default.RendererGL.prototype.scale=function(g,y,Z){return this.uMVMatrix.scale(g,y,Z),this},l.default.RendererGL.prototype.rotate=function(g,y){return y===void 0?this.rotateZ(g):(l.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},l.default.RendererGL.prototype.rotateX=function(g){return this.rotate(g,1,0,0),this},l.default.RendererGL.prototype.rotateY=function(g){return this.rotate(g,0,1,0),this},l.default.RendererGL.prototype.rotateZ=function(g){return this.rotate(g,0,0,1),this},l.default.RendererGL.prototype.push=function(){var g=l.default.Renderer.prototype.push.apply(this),y=g.properties;return y.uMVMatrix=this.uMVMatrix.copy(),y.uPMatrix=this.uPMatrix.copy(),y._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),y.ambientLightColors=this.ambientLightColors.slice(),y.specularColors=this.specularColors.slice(),y.directionalLightDirections=this.directionalLightDirections.slice(),y.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),y.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),y.pointLightPositions=this.pointLightPositions.slice(),y.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),y.pointLightSpecularColors=this.pointLightSpecularColors.slice(),y.spotLightPositions=this.spotLightPositions.slice(),y.spotLightDirections=this.spotLightDirections.slice(),y.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),y.spotLightSpecularColors=this.spotLightSpecularColors.slice(),y.spotLightAngle=this.spotLightAngle.slice(),y.spotLightConc=this.spotLightConc.slice(),y.userFillShader=this.userFillShader,y.userStrokeShader=this.userStrokeShader,y.userPointShader=this.userPointShader,y.pointSize=this.pointSize,y.curStrokeWeight=this.curStrokeWeight,y.curStrokeColor=this.curStrokeColor,y.curFillColor=this.curFillColor,y.curAmbientColor=this.curAmbientColor,y.curSpecularColor=this.curSpecularColor,y.curEmissiveColor=this.curEmissiveColor,y._useSpecularMaterial=this._useSpecularMaterial,y._useEmissiveMaterial=this._useEmissiveMaterial,y._useShininess=this._useShininess,y.constantAttenuation=this.constantAttenuation,y.linearAttenuation=this.linearAttenuation,y.quadraticAttenuation=this.quadraticAttenuation,y._enableLighting=this._enableLighting,y._useNormalMaterial=this._useNormalMaterial,y._tex=this._tex,y.drawMode=this.drawMode,y._currentNormal=this._currentNormal,y.curBlendMode=this.curBlendMode,g},l.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=l.default.Matrix.identity(this._pInst),this},l.default.RendererGL.prototype._getImmediateStrokeShader=function(){var g=this.userStrokeShader;return g&&g.isStrokeShader()?g:this._getLineShader()},l.default.RendererGL.prototype._getRetainedStrokeShader=l.default.RendererGL.prototype._getImmediateStrokeShader,l.default.RendererGL.prototype._getImmediateFillShader=function(){var g=this.userFillShader;if(this._useNormalMaterial&&(!g||!g.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!g||!g.isLightShader())return this._getLightShader()}else if(this._tex){if(!g||!g.isTextureShader())return this._getLightShader()}else if(!g)return this._getImmediateModeShader();return g},l.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var g=this.userFillShader;if(this._enableLighting){if(!g||!g.isLightShader())return this._getLightShader()}else if(this._tex){if(!g||!g.isTextureShader())return this._getLightShader()}else if(!g)return this._getColorShader();return g},l.default.RendererGL.prototype._getImmediatePointShader=function(){var g=this.userPointShader;return g&&g.isPointShader()?g:this._getPointShader()},l.default.RendererGL.prototype._getRetainedLineShader=l.default.RendererGL.prototype._getImmediateLineShader,l.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,h.phongVert,h.phongFrag):this._defaultLightShader=new l.default.Shader(this,h.lightVert,h.lightTextureFrag)),this._defaultLightShader},l.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,h.immediateVert,h.vertexColorFrag)),this._defaultImmediateModeShader},l.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,h.normalVert,h.normalFrag)),this._defaultNormalShader},l.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,h.normalVert,h.basicFrag)),this._defaultColorShader},l.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,h.pointVert,h.pointFrag)),this._defaultPointShader},l.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,h.lineVert,h.lineFrag)),this._defaultLineShader},l.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,h.fontVert,h.fontFrag)),this._defaultFontShader},l.default.RendererGL.prototype._getEmptyTexture=function(){var g;return this._emptyTexture||((g=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,g)),this._emptyTexture},l.default.RendererGL.prototype.getTexture=function(g){var y=this.textures,Z=!0,I=!1,G=void 0;try{for(var R,C=y[Symbol.iterator]();!(Z=(R=C.next()).done);Z=!0){var V=R.value;if(V.src===g)return V}}catch(x){I=!0,G=x}finally{try{Z||C.return==null||C.return()}finally{if(I)throw G}}return I=new l.default.Texture(this,g),y.push(I),I},l.default.RendererGL.prototype._setStrokeUniforms=function(g){g.bindShader(),g.setUniform("uMaterialColor",this.curStrokeColor),g.setUniform("uStrokeWeight",this.curStrokeWeight)},l.default.RendererGL.prototype._setFillUniforms=function(g){g.bindShader(),g.setUniform("uMaterialColor",this.curFillColor),g.setUniform("isTexture",!!this._tex),this._tex&&g.setUniform("uSampler",this._tex),g.setUniform("uTint",this._tint),g.setUniform("uAmbientMatColor",this.curAmbientColor),g.setUniform("uSpecularMatColor",this.curSpecularColor),g.setUniform("uEmissiveMatColor",this.curEmissiveColor),g.setUniform("uSpecular",this._useSpecularMaterial),g.setUniform("uEmissive",this._useEmissiveMaterial),g.setUniform("uShininess",this._useShininess),g.setUniform("uUseLighting",this._enableLighting);var y=this.pointLightDiffuseColors.length/3,y=(g.setUniform("uPointLightCount",y),g.setUniform("uPointLightLocation",this.pointLightPositions),g.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),g.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),y=(g.setUniform("uDirectionalLightCount",y),g.setUniform("uLightingDirection",this.directionalLightDirections),g.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),g.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),y=(g.setUniform("uAmbientLightCount",y),g.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);g.setUniform("uSpotLightCount",y),g.setUniform("uSpotLightAngle",this.spotLightAngle),g.setUniform("uSpotLightConc",this.spotLightConc),g.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),g.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),g.setUniform("uSpotLightLocation",this.spotLightPositions),g.setUniform("uSpotLightDirection",this.spotLightDirections),g.setUniform("uConstantAttenuation",this.constantAttenuation),g.setUniform("uLinearAttenuation",this.linearAttenuation),g.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),g.bindTextures()},l.default.RendererGL.prototype._setPointUniforms=function(g){g.bindShader(),g.setUniform("uMaterialColor",this.curStrokeColor),g.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},l.default.RendererGL.prototype._bindBuffer=function(g,y,Z,I,G){y=y||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(y,g),Z!==void 0&&(g=new(I||Float32Array)(Z),this.GL.bufferData(y,g,G||this.GL.STATIC_DRAW))},l.default.RendererGL.prototype._arraysEqual=function(g,y){var Z=g.length;if(Z!==y.length)return!1;for(var I=0;I<Z;I++)if(g[I]!==y[I])return!1;return!0},l.default.RendererGL.prototype._isTypedArray=function(g){return g instanceof Uint32Array},l.default.RendererGL.prototype._flatten=function(g){if(g.length===0)return[];var y;if(2e4<g.length){for(var Z=Object.prototype.toString,I=[],G=g.slice(),R=G.pop();Z.call(R)==="[object Array]"?G.push.apply(G,d(R)):I.push(R),G.length&&(R=G.pop())!==void 0;);return I.reverse(),I}return(y=[]).concat.apply(y,d(g))},l.default.RendererGL.prototype._vToNArray=function(g){var y=[],Z=!0,I=!1,G=void 0;try{for(var R,C=g[Symbol.iterator]();!(Z=(R=C.next()).done);Z=!0){var V=R.value;y.push(V.x,V.y,V.z)}}catch(x){I=!0,G=x}finally{try{Z||C.return==null||C.return()}finally{if(I)throw G}}return y},l.default.prototype._assert3d=function(g){if(!this._renderer.isP3D)throw new Error("".concat(g,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype._initTessy=function(){var g=new m.default.GluTesselator;return g.gluTessCallback(m.default.gluEnum.GLU_TESS_VERTEX_DATA,function(y,Z){for(var I=0;I<y.length;I++)Z[Z.length]=y[I]}),g.gluTessCallback(m.default.gluEnum.GLU_TESS_BEGIN,function(y){y!==m.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(y))}),g.gluTessCallback(m.default.gluEnum.GLU_TESS_ERROR,function(y){console.log("error callback"),console.log("error number: ".concat(y))}),g.gluTessCallback(m.default.gluEnum.GLU_TESS_COMBINE,function(y,Z,I){for(var G=[0,0,0,0,0,0,0,0,0,0,0,0],R=0;R<I.length;R++)for(var C=0;C<G.length;C++)I[R]!==0&&Z[R]&&(G[C]+=Z[R][C]*I[R]);return G}),g.gluTessCallback(m.default.gluEnum.GLU_TESS_EDGE_FLAG,function(y){}),g},l.default.RendererGL.prototype._triangulate=function(g){this._tessy.gluTessNormal(0,0,1);var y=[];this._tessy.gluTessBeginPolygon(y);for(var Z=0;Z<g.length;Z++){this._tessy.gluTessBeginContour();for(var I=g[Z],G=0;G<I.length;G+=12){var R=I.slice(G,G+12);this._tessy.gluTessVertex(R,R)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),y},l.default.RendererGL.prototype._bezierCoefficients=function(g){var y=g*g,Z=1-g,I=Z*Z;return[I*Z,3*I*g,3*Z*y,y*g]},l.default.RendererGL.prototype._quadraticCoefficients=function(g){var y=1-g;return[y*y,2*y*g,g*g]},l.default.RendererGL.prototype._bezierToCatmull=function(g){return[g[1],g[1]+(g[2]-g[0])/this._curveTightness,g[2]-(g[3]-g[1])/this._curveTightness,g[2]]},l.default.RendererGL);s.default=f},{"../core/constants":256,"../core/main":267,"../core/p5.Renderer":270,"./p5.Camera":315,"./p5.Matrix":317,"./p5.Shader":322,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,libtess:239,path:242}],322:[function(r,i,s){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=(r=r("../core/main"))&&r.__esModule?r:{default:r};o.default.Shader=function(a,l,c){this._renderer=a,this._vertSrc=l,this._fragSrc=c,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},o.default.Shader.prototype.init=function(){if(this._glProgram===0){var a=this._renderer.GL;if(this._vertShader=a.createShader(a.VERTEX_SHADER),a.shaderSource(this._vertShader,this._vertSrc),a.compileShader(this._vertShader),!a.getShaderParameter(this._vertShader,a.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(a.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(this._fragShader,this._fragSrc),a.compileShader(this._fragShader),!a.getShaderParameter(this._fragShader,a.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(a.getShaderInfoLog(this._fragShader))),null;this._glProgram=a.createProgram(),a.attachShader(this._glProgram,this._vertShader),a.attachShader(this._glProgram,this._fragShader),a.linkProgram(this._glProgram),a.getProgramParameter(this._glProgram,a.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(a.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},o.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var a=this._renderer.GL,l=a.getProgramParameter(this._glProgram,a.ACTIVE_ATTRIBUTES),c=0;c<l;++c){var m=a.getActiveAttrib(this._glProgram,c),p=m.name,u=a.getAttribLocation(this._glProgram,p),d={};d.name=p,d.location=u,d.index=c,d.type=m.type,d.size=m.size,this.attributes[p]=d}this._loadedAttributes=!0}},o.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var a=this._renderer.GL,l=a.getProgramParameter(this._glProgram,a.ACTIVE_UNIFORMS),c=0,m=0;m<l;++m){var p=a.getActiveUniform(this._glProgram,m),u={},d=(u.location=a.getUniformLocation(this._glProgram,p.name),u.size=p.size,p.name);1<p.size&&(d=d.substring(0,d.indexOf("[0]"))),u.name=d,u.type=p.type,u._cachedData=void 0,u.type===a.SAMPLER_2D&&(u.samplerIndex=c,c++,this.samplers.push(u)),u.isArray=1<p.size||u.type===a.FLOAT_MAT3||u.type===a.FLOAT_MAT4||u.type===a.FLOAT_VEC2||u.type===a.FLOAT_VEC3||u.type===a.FLOAT_VEC4||u.type===a.INT_VEC2||u.type===a.INT_VEC4||u.type===a.INT_VEC3,this.uniforms[d]=u}this._loadedUniforms=!0}},o.default.Shader.prototype.compile=function(){},o.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},o.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},o.default.Shader.prototype.bindTextures=function(){var a=this._renderer.GL,l=!0,c=!1,m=void 0;try{for(var p,u=this.samplers[Symbol.iterator]();!(l=(p=u.next()).done);l=!0){var d=p.value,h=d.texture;h===void 0&&(h=this._renderer._getEmptyTexture()),a.activeTexture(a.TEXTURE0+d.samplerIndex),h.bindTexture(),h.update(),a.uniform1i(d.location,d.samplerIndex)}}catch(f){c=!0,m=f}finally{try{l||u.return==null||u.return()}finally{if(c)throw m}}},o.default.Shader.prototype.updateTextures=function(){var a=!0,l=!1,c=void 0;try{for(var m,p=this.samplers[Symbol.iterator]();!(a=(m=p.next()).done);a=!0){var u=m.value.texture;u&&u.update()}}catch(d){l=!0,c=d}finally{try{a||p.return==null||p.return()}finally{if(l)throw c}}},o.default.Shader.prototype.unbindTextures=function(){},o.default.Shader.prototype._setMatrixUniforms=function(){var a=this._renderer._curCamera.cameraMatrix,l=this._renderer.uPMatrix,c=this._renderer.uMVMatrix,m=c.copy();m.mult(l),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",a.mat4),this.setUniform("uProjectionMatrix",l.mat4),this.setUniform("uModelViewMatrix",c.mat4),this.setUniform("uModelViewProjectionMatrix",m.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},o.default.Shader.prototype.useProgram=function(){var a=this._renderer.GL;return this._renderer._curShader!==this&&(a.useProgram(this._glProgram),this._renderer._curShader=this),this},o.default.Shader.prototype.setUniform=function(a,l){var c=this.uniforms[a];if(c){var m=this._renderer.GL;if(c.isArray){if(c._cachedData&&this._renderer._arraysEqual(c._cachedData,l))return;c._cachedData=l.slice(0)}else{if(c._cachedData&&c._cachedData===l)return;Array.isArray(l)?c._cachedData=l.slice(0):c._cachedData=l}var p=c.location;switch(this.useProgram(),c.type){case m.BOOL:l===!0?m.uniform1i(p,1):m.uniform1i(p,0);break;case m.INT:1<c.size?l.length&&m.uniform1iv(p,l):m.uniform1i(p,l);break;case m.FLOAT:1<c.size?l.length&&m.uniform1fv(p,l):m.uniform1f(p,l);break;case m.FLOAT_MAT3:m.uniformMatrix3fv(p,!1,l);break;case m.FLOAT_MAT4:m.uniformMatrix4fv(p,!1,l);break;case m.FLOAT_VEC2:1<c.size?l.length&&m.uniform2fv(p,l):m.uniform2f(p,l[0],l[1]);break;case m.FLOAT_VEC3:1<c.size?l.length&&m.uniform3fv(p,l):m.uniform3f(p,l[0],l[1],l[2]);break;case m.FLOAT_VEC4:1<c.size?l.length&&m.uniform4fv(p,l):m.uniform4f(p,l[0],l[1],l[2],l[3]);break;case m.INT_VEC2:1<c.size?l.length&&m.uniform2iv(p,l):m.uniform2i(p,l[0],l[1]);break;case m.INT_VEC3:1<c.size?l.length&&m.uniform3iv(p,l):m.uniform3i(p,l[0],l[1],l[2]);break;case m.INT_VEC4:1<c.size?l.length&&m.uniform4iv(p,l):m.uniform4i(p,l[0],l[1],l[2],l[3]);break;case m.SAMPLER_2D:m.activeTexture(m.TEXTURE0+c.samplerIndex),c.texture=l instanceof o.default.Texture?l:this._renderer.getTexture(l),m.uniform1i(p,c.samplerIndex)}return this}},o.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},o.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},o.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},o.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},o.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},o.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},o.default.Shader.prototype.enableAttrib=function(a,l,c,m,p,u){var d,h;return a&&(d=a.location)!==-1&&(h=this._renderer.GL,a.enabled||(h.enableVertexAttribArray(d),a.enabled=!0),this._renderer.GL.vertexAttribPointer(d,l,c||h.FLOAT,m||!1,p||0,u||0)),this},r=o.default.Shader,s.default=r},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],323:[function(r,i,s){function o(u){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}function a(u){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(d){return o(d)}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":o(d)})(u)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},c=function(u){if(u&&u.__esModule)return u;if(u===null||a(u)!=="object"&&typeof u!="function")return{default:u};var d=m();if(d&&d.has(u))return d.get(u);var h,f={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in u){var y;Object.prototype.hasOwnProperty.call(u,h)&&((y=g?Object.getOwnPropertyDescriptor(u,h):null)&&(y.get||y.set)?Object.defineProperty(f,h,y):f[h]=u[h])}return f.default=u,d&&d.set(u,f),f}(r("../core/constants"));function m(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,m=function(){return u},u)}l.default.Texture=function(u,d,h){return this._renderer=u,u=this._renderer.GL,(h=h||{}).dataType===u.FLOAT&&(u.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),u.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=d,this.glTex=void 0,this.glTarget=u.TEXTURE_2D,this.glFormat=h.format||u.RGBA,this.mipmaps=!1,this.glMinFilter=h.minFilter||u.LINEAR,this.glMagFilter=h.magFilter||u.LINEAR,this.glWrapS=h.wrapS||u.CLAMP_TO_EDGE,this.glWrapT=h.wrapT||u.CLAMP_TO_EDGE,this.glDataType=h.dataType||u.UNSIGNED_BYTE,this.isSrcMediaElement=l.default.MediaElement!==void 0&&d instanceof l.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=l.default.Element!==void 0&&d instanceof l.default.Element&&!(d instanceof l.default.Graphics)&&!(d instanceof l.default.Renderer),this.isSrcP5Image=d instanceof l.default.Image,this.isSrcP5Graphics=d instanceof l.default.Graphics,this.isSrcP5Renderer=d instanceof l.default.Renderer,this.isImageData=typeof ImageData<"u"&&d instanceof ImageData,h=this._getTextureDataFromSource(),this.width=h.width,this.height=h.height,this.init(h),this},l.default.Texture.prototype._getTextureDataFromSource=function(){var u;return this.isSrcP5Image?u=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?u=this.src.elt:this.isImageData&&(u=this.src),u},l.default.Texture.prototype.init=function(u){var d,h=this._renderer.GL;this.glTex=h.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,this.glMagFilter),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(d=new Uint8Array([1,1,1,1]),h.texImage2D(this.glTarget,0,h.RGBA,1,1,0,this.glFormat,this.glDataType,d)):h.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,u)},l.default.Texture.prototype.update=function(){var u,d,h,f=this.src;return f.width!==0&&f.height!==0&&(u=this._getTextureDataFromSource(),d=!1,h=this._renderer.GL,u.width!==this.width||u.height!==this.height?(d=!0,this.width=u.width,this.height=u.height,this.isSrcP5Image?f.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&f.setModified(!0)):this.isSrcP5Image?f.isModified()&&f.setModified(!(d=!0)):this.isSrcMediaElement?f.isModified()?f.setModified(!(d=!0)):f.loadedmetadata&&this._videoPrevUpdateTime!==f.time()&&(this._videoPrevUpdateTime=f.time(),d=!0):this.isImageData?f._dirty&&(d=!(f._dirty=!1)):d=!0,d&&(this.bindTexture(),h.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,u)),d)},l.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},l.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},l.default.Texture.prototype.setInterpolation=function(u,d){var h=this._renderer.GL;u===c.NEAREST?this.glMinFilter=h.NEAREST:this.glMinFilter=h.LINEAR,d===c.NEAREST?this.glMagFilter=h.NEAREST:this.glMagFilter=h.LINEAR,this.bindTexture(),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.glMinFilter),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},l.default.Texture.prototype.setWrapMode=function(u,d){function h(Z){return(Z&Z-1)==0}var f=this._renderer.GL,g=h(this.width),y=h(this.height);u===c.REPEAT?g&&y?this.glWrapS=f.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=f.CLAMP_TO_EDGE):u===c.MIRROR?g&&y?this.glWrapS=f.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=f.CLAMP_TO_EDGE):this.glWrapS=f.CLAMP_TO_EDGE,d===c.REPEAT?g&&y?this.glWrapT=f.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=f.CLAMP_TO_EDGE):d===c.MIRROR?g&&y?this.glWrapT=f.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=f.CLAMP_TO_EDGE):this.glWrapT=f.CLAMP_TO_EDGE,this.bindTexture(),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,this.glWrapS),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var p=l.default.Texture;s.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],324:[function(r,i,s){function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(g)}function a(g){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(y){return o(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":o(y)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var l,c=(l=r("../core/main"))&&l.__esModule?l:{default:l},m=function(g){if(g&&g.__esModule)return g;if(g===null||a(g)!=="object"&&typeof g!="function")return{default:g};var y=p();if(y&&y.has(g))return y.get(g);var Z,I={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Z in g){var R;Object.prototype.hasOwnProperty.call(g,Z)&&((R=G?Object.getOwnPropertyDescriptor(g,Z):null)&&(R.get||R.set)?Object.defineProperty(I,Z,R):I[Z]=g[Z])}return I.default=g,y&&y.set(g,I),I}(r("../core/constants"));function p(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,p=function(){return g},g)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),c.default.RendererGL.prototype._applyTextProperties=function(){},c.default.RendererGL.prototype.textWidth=function(g){return this._isOpenType()?this._textFont._textWidth(g,this._textSize):0};function u(g,y){this.width=g,this.height=y,this.infos=[],this.findImage=function(Z){var I,G,R=this.width*this.height;if(R<Z)throw new Error("font is too complex to render in 3D");for(var C=this.infos.length-1;0<=C;--C){var V=this.infos[C];if(V.index+Z<R){G=(I=V).imageData;break}}if(!I){try{G=new ImageData(this.width,this.height)}catch{var x=document.getElementsByTagName("canvas")[0],w=!x,k=(x||((x=document.createElement("canvas")).style.display="none",document.body.appendChild(x)),x.getContext("2d"));k&&(G=k.createImageData(this.width,this.height)),w&&document.body.removeChild(x)}this.infos.push(I={index:0,imageData:G})}return k=I.index,I.index+=Z,G._dirty=!0,{imageData:G,index:k}}}function d(C,y,Z,I,G){var R=C.imageData.data,C=4*C.index++;R[C++]=y,R[C++]=Z,R[C++]=I,R[+C]=G}function h(g){this.font=g,this.strokeImageInfos=new u(64,64),this.colDimImageInfos=new u(64,64),this.rowDimImageInfos=new u(64,64),this.colCellImageInfos=new u(64,64),this.rowCellImageInfos=new u(64,64),this.glyphInfos={},this.getGlyphInfo=function(y){var Z=this.glyphInfos[y.index];if(!Z){var I=y.getBoundingBox(),G=I.x1,R=I.y1,C=I.x2-G,V=I.y2-R,x=y.path.commands;if(C==0||V==0||!x.length)return this.glyphInfos[y.index]={};for(var w,k,A,Y,U=[],M=[],j=[],K=8;0<=K;--K)j.push([]);for(K=8;0<=K;--K)M.push([]);var P=!0,J=!1,E=void 0;try{for(var O,D=x[Symbol.iterator]();!(P=(O=D.next()).done);P=!0){var le=O.value,X=(le.x-G)/C,T=(le.y-R)/V;if(!xe(w,k,X,T)){switch(le.type){case"M":A=X,Y=T;break;case"L":pe(w,k,X,T);break;case"Q":var N=(le.x1-G)/C,z=(le.y1-R)/V;me([w,X,N],[k,T,z],{x:w,y:k,cx:N,cy:z});break;case"Z":xe(w,k,A,Y)?U.push({x:w,y:k}):(pe(w,k,A,Y),U.push({x:A,y:Y}));break;case"C":for(var te=function(Ae,H,re,$e,ze,it,qe,Ze){var Ae=new be(new c.default.Vector(Ae,H),new c.default.Vector(re,$e),new c.default.Vector(ze,it),new c.default.Vector(qe,Ze)).splitInflections(),ve=[],_=30/f,$=!0,H=!1,re=void 0;try{for(var ye,Ge=Ae[Symbol.iterator]();!($=(ye=Ge.next()).done);$=!0){for(var Le=ye.value,Me=[],He=void 0;!(.125<=(He=_/Le.quadError()));){var Je=Math.pow(He,.3333333333333333),De=Le.split(Je),Rt=Le.split(1-Je/(1-Je));ve.push(De),Me.push(Le),Le=Rt}He<1&&ve.push(Le.split(.5)),ve.push(Le),Array.prototype.push.apply(ve,Me.reverse())}}catch(bt){H=!0,re=bt}finally{try{$||Ge.return==null||Ge.return()}finally{if(H)throw re}}return ve}(w,k,(le.x1-G)/C,(le.y1-R)/V,(le.x2-G)/C,(le.y2-R)/V,X,T),ne=0;ne<te.length;ne++){var ee=te[ne].toQuadratic();me([ee.x,ee.x1,ee.cx],[ee.y,ee.y1,ee.cy],ee)}break;default:throw new Error("unknown command type: ".concat(le.type))}w=X,k=T}}}catch(ke){J=!0,E=ke}finally{try{P||D.return==null||D.return()}finally{if(J)throw E}}for(var oe=U.length,ie=this.strokeImageInfos.findImage(oe),ce=ie.index,he=0;he<oe;++he){var q=U[he];d(ie,ge(q.x),ge(q.y),ge(q.cx),ge(q.cy))}(Z=this.glyphInfos[y.index]={glyph:y,uGlyphRect:[I.x1,-I.y1,I.x2,-I.y2],strokeImageInfo:ie,strokes:U,colInfo:Se(j,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Se(M,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[Z.colInfo.dimOffset,Z.rowInfo.dimOffset]}return Z;function me(ke,We,Ke){var $e=U.length;function ze(ve,_,$){for(var H=ve.length;0<H--;){var re=ve[H];re<_&&(_=re),$<re&&($=re)}return{min:_,max:$}}U.push(Ke);for(var Ke=ze(ke,1,0),ke=Math.max(Math.floor(9*Ke.min),0),it=Math.min(Math.ceil(9*Ke.max),9),qe=ke;qe<it;++qe)j[qe].push($e);for(var Ke=ze(We,1,0),ke=Math.max(Math.floor(9*Ke.min),0),Ze=Math.min(Math.ceil(9*Ke.max),9),Ae=ke;Ae<Ze;++Ae)M[Ae].push($e)}function ge(ke){return(ke=(Ke=255)*ke)<(We=0)?We:Ke<ke?Ke:ke;var We,Ke}function be(ke,We,Ke,$e){this.p0=ke,this.c0=We,this.c1=Ke,this.p1=$e,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return c.default.Vector.sub(c.default.Vector.sub(this.p1,this.p0),c.default.Vector.mult(c.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(Ae){var it=c.default.Vector.lerp(this.p0,this.c0,Ae),Ze=c.default.Vector.lerp(this.c0,this.c1,Ae),qe=c.default.Vector.lerp(it,Ze,Ae),Ze=(this.c1=c.default.Vector.lerp(this.c1,this.p1,Ae),this.c0=c.default.Vector.lerp(Ze,this.c1,Ae),c.default.Vector.lerp(qe,this.c0,Ae)),Ae=new be(this.p0,it,qe,Ze);return this.p0=Ze,Ae},this.splitInflections=function(){var ze=c.default.Vector.sub(this.c0,this.p0),it=c.default.Vector.sub(c.default.Vector.sub(this.c1,this.c0),ze),qe=c.default.Vector.sub(c.default.Vector.sub(c.default.Vector.sub(this.p1,this.c1),ze),c.default.Vector.mult(it,2)),Ze=[],Ae=it.x*qe.y-it.y*qe.x;return Ae!==0&&0<=(ze=(qe=ze.x*qe.y-ze.y*qe.x)*qe-4*Ae*(ze.x*it.y-ze.y*it.x))&&(Ae<0&&(Ae=-Ae,qe=-qe),ze=(-qe+(it=Math.sqrt(ze)))/(2*Ae),0<(qe=(-qe-it)/(2*Ae))&&qe<1&&(Ze.push(this.split(qe)),ze=1-(1-ze)/(1-qe)),0<ze&&ze<1&&Ze.push(this.split(ze))),Ze.push(this),Ze}}function pe(ke,We,Ke,$e){me([ke,Ke],[We,$e],{x:ke,y:We,cx:(ke+Ke)/2,cy:(We+$e)/2})}function xe(ke,We,Ke,$e){return Math.abs(Ke-ke)<1e-5&&Math.abs($e-We)<1e-5}function Se(ke,We,Ke){for(var $e=ke.length,ze=We.findImage($e),We=ze.index,it=0,qe=0;qe<$e;++qe)it+=ke[qe].length;for(var Ze=Ke.findImage(it),Ae=0;Ae<$e;++Ae){var ve=ke[Ae],_=ve.length,$=Ze.index;d(ze,$>>7,127&$,_>>7,127&_);for(var H=0;H<_;++H){var re=ve[H]+ce;d(Ze,re>>7,127&re,0,0)}}return{cellImageInfo:Ze,dimOffset:We,dimImageInfo:ze}}}}var f=Math.sqrt(3);c.default.RendererGL.prototype._renderText=function(g,y,Z,I,G){if(this._textFont&&typeof this._textFont!="string"){if(!(G<=I)&&this._doFill){if(this._isOpenType()){g.push();var G=this._doStroke,R=this.drawMode,C=(this._doStroke=!1,this.drawMode=m.TEXTURE,this._textFont.font),V=(V=this._textFont._fontInfo)||(this._textFont._fontInfo=new h(C)),Z=this._textFont._handleAlignment(this,y,Z,I),I=this._textSize/C.unitsPerEm,x=(this.translate(Z.x,Z.y,0),this.scale(I,I,1),this.GL),Z=!this._defaultFontShader,w=this._getFontShader(),k=(w.init(),w.bindShader(),Z&&(w.setUniform("uGridImageSize",[64,64]),w.setUniform("uCellsImageSize",[64,64]),w.setUniform("uStrokeImageSize",[64,64]),w.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),A=(k||((I=this._textGeom=new c.default.Geometry(1,1,function(){for(var ee=0;ee<=1;ee++)for(var oe=0;oe<=1;oe++)this.vertices.push(new c.default.Vector(oe,ee,0)),this.uvs.push(oe,ee)})).computeFaces().computeNormals(),k=this.createBuffers("glyph",I)),!0),Z=!1,I=void 0;try{for(var Y,U=this.retainedMode.buffers.text[Symbol.iterator]();!(A=(Y=U.next()).done);A=!0)Y.value._prepareBuffer(k,w)}catch(ee){Z=!0,I=ee}finally{try{A||U.return==null||U.return()}finally{if(Z)throw I}}this._bindBuffer(k.indexBuffer,x.ELEMENT_ARRAY_BUFFER),w.setUniform("uMaterialColor",this.curFillColor);try{var M=0,j=null,K=C.stringToGlyphs(y),P=!0,J=!1,E=void 0;try{for(var O,D=K[Symbol.iterator]();!(P=(O=D.next()).done);P=!0){var le,X,T=O.value,N=(j&&(M+=C.getKerningValue(j,T)),V.getGlyphInfo(T));N.uGlyphRect&&(le=N.rowInfo,X=N.colInfo,w.setUniform("uSamplerStrokes",N.strokeImageInfo.imageData),w.setUniform("uSamplerRowStrokes",le.cellImageInfo.imageData),w.setUniform("uSamplerRows",le.dimImageInfo.imageData),w.setUniform("uSamplerColStrokes",X.cellImageInfo.imageData),w.setUniform("uSamplerCols",X.dimImageInfo.imageData),w.setUniform("uGridOffset",N.uGridOffset),w.setUniform("uGlyphRect",N.uGlyphRect),w.setUniform("uGlyphOffset",M),w.bindTextures(),x.drawElements(x.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),M+=T.advanceWidth,j=T}}catch(ee){J=!0,E=ee}finally{try{P||D.return==null||D.return()}finally{if(J)throw E}}}finally{w.unbindShader(),this._doStroke=G,this.drawMode=R,g.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return g}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":256,"../core/main":267,"./p5.RendererGL.Retained":320,"./p5.Shader":322,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}]},{},[251])(251)})})(hm);const mm=a2(hm.exports);var uu="6.5.0";function Mt(t){return t&&t.length===0}function Xi(t){return t==null?[]:Object.keys(t)}function _r(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++)e.push(t[n[r]]);return e}function c2(t,e){for(var n=[],r=Xi(t),i=0;i<r.length;i++){var s=r[i];n.push(e.call(null,t[s],s))}return n}function et(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e.call(null,t[r],r));return n}function fn(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?e=e.concat(fn(r)):e.push(r)}return e}function xn(t){return Mt(t)?void 0:t[0]}function pm(t){var e=t&&t.length;return e?t[e-1]:void 0}function lt(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e.call(null,t[n],n);else if(hu(t))for(var r=Xi(t),n=0;n<r.length;n++){var i=r[n],s=t[i];e.call(null,s,i)}else throw Error("non exhaustive match")}function ii(t){return typeof t=="string"}function wn(t){return t===void 0}function Ei(t){return t instanceof Function}function Nr(t,e){return e===void 0&&(e=1),t.slice(e,t.length)}function ws(t,e){return e===void 0&&(e=1),t.slice(0,t.length-e)}function Hn(t,e){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&n.push(i)}return n}function fo(t,e){return Hn(t,function(n){return!e(n)})}function kn(t,e){for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var s=n[i],o=t[s];e(o)&&(r[s]=o)}return r}function gt(t,e){return hu(t)?t.hasOwnProperty(e):!1}function Wr(t,e){return Eo(t,function(n){return n===e})!==void 0}function gn(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function ks(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Eo(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(e.call(null,r))return r}}function u2(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&n.push(i)}return n}function Mr(t,e,n){for(var r=Array.isArray(t),i=r?t:_r(t),s=r?[]:Xi(t),o=n,a=0;a<i.length;a++)o=e.call(null,o,i[a],r?a:s[a]);return o}function As(t){return fo(t,function(e){return e==null})}function du(t,e){e===void 0&&(e=function(r){return r});var n=[];return Mr(t,function(r,i){var s=e(i);return Wr(n,s)?r:(n.push(s),r.concat(i))},[])}function Kn(t){return Array.isArray(t)}function Li(t){return t instanceof RegExp}function hu(t){return t instanceof Object}function An(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function Oa(t,e){return fo(t,function(n){return Wr(e,n)})}function fm(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function d2(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function Jn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],s=Xi(i),o=0;o<s.length;o++){var a=s[o];t[a]=i[a]}return t}function h2(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r];if(!wn(i))for(var s=Xi(i),o=0;o<s.length;o++){var a=s[o];gt(t,a)||(t[a]=i[a])}}return t}function za(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h2.apply(null,[{}].concat(t))}function gm(t,e){var n={};return lt(t,function(r){var i=e(r),s=n[i];s?s.push(r):n[i]=[r]}),n}function ym(t,e){for(var n=ks(t),r=Xi(e),i=0;i<r.length;i++){var s=r[i],o=e[s];n[s]=o}return n}function wr(){}function bm(t){return t}function m2(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r!==void 0?r:void 0)}return e}function mu(t){console&&console.error&&console.error("Error: "+t)}function pu(t){console&&console.warn&&console.warn("Warning: "+t)}function Zm(){return typeof Map=="function"}function p2(t,e){e.forEach(function(n){var r=n.prototype;Object.getOwnPropertyNames(r).forEach(function(i){if(i!=="constructor"){var s=Object.getOwnPropertyDescriptor(r,i);s&&(s.get||s.set)?Object.defineProperty(t.prototype,i,s):t.prototype[i]=n.prototype[i]}})})}function Im(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.bar}return r(),r(),t}function _a(t){return t[t.length-1]}function vm(t){var e=new Date().getTime(),n=t(),r=new Date().getTime(),i=r-e;return{time:i,value:n}}var Ho={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.regexpToAst=n()})(typeof self<"u"?self:Ci,function(){function e(){}e.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},e.prototype.restoreState=function(f){this.idx=f.idx,this.input=f.input,this.groupIdx=f.groupIdx},e.prototype.pattern=function(f){this.idx=0,this.input=f,this.groupIdx=0,this.consumeChar("/");var g=this.disjunction();this.consumeChar("/");for(var y={type:"Flags",global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":a(y,"global");break;case"i":a(y,"ignoreCase");break;case"m":a(y,"multiLine");break;case"u":a(y,"unicode");break;case"y":a(y,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:y,value:g}},e.prototype.disjunction=function(){var f=[];for(f.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),f.push(this.alternative());return{type:"Disjunction",value:f}},e.prototype.alternative=function(){for(var f=[];this.isTerm();)f.push(this.term());return{type:"Alternative",value:f}},e.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},e.prototype.assertion=function(){switch(this.popChar()){case"^":return{type:"StartAnchor"};case"$":return{type:"EndAnchor"};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary"};case"B":return{type:"NonWordBoundary"}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var f;switch(this.popChar()){case"=":f="Lookahead";break;case"!":f="NegativeLookahead";break}l(f);var g=this.disjunction();return this.consumeChar(")"),{type:f,value:g}}c()},e.prototype.quantifier=function(f){var g;switch(this.popChar()){case"*":g={atLeast:0,atMost:1/0};break;case"+":g={atLeast:1,atMost:1/0};break;case"?":g={atLeast:0,atMost:1};break;case"{":var y=this.integerIncludingZero();switch(this.popChar()){case"}":g={atLeast:y,atMost:y};break;case",":var Z;this.isDigit()?(Z=this.integerIncludingZero(),g={atLeast:y,atMost:Z}):g={atLeast:y,atMost:1/0},this.consumeChar("}");break}if(f===!0&&g===void 0)return;l(g);break}if(!(f===!0&&g===void 0))return l(g),this.peekChar(0)==="?"?(this.consumeChar("?"),g.greedy=!1):g.greedy=!0,g.type="Quantifier",g},e.prototype.atom=function(){var f;switch(this.peekChar()){case".":f=this.dotAll();break;case"\\":f=this.atomEscape();break;case"[":f=this.characterClass();break;case"(":f=this.group();break}return f===void 0&&this.isPatternCharacter()&&(f=this.patternCharacter()),l(f),this.isQuantifier()&&(f.quantifier=this.quantifier()),f},e.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[s(`
`),s("\r"),s("\u2028"),s("\u2029")]}},e.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.decimalEscapeAtom=function(){var f=this.positiveInteger();return{type:"GroupBackReference",value:f}},e.prototype.characterClassEscape=function(){var f,g=!1;switch(this.popChar()){case"d":f=p;break;case"D":f=p,g=!0;break;case"s":f=d;break;case"S":f=d,g=!0;break;case"w":f=u;break;case"W":f=u,g=!0;break}return l(f),{type:"Set",value:f,complement:g}},e.prototype.controlEscapeAtom=function(){var f;switch(this.popChar()){case"f":f=s("\f");break;case"n":f=s(`
`);break;case"r":f=s("\r");break;case"t":f=s("	");break;case"v":f=s("\v");break}return l(f),{type:"Character",value:f}},e.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var f=this.popChar();if(/[a-zA-Z]/.test(f)===!1)throw Error("Invalid ");var g=f.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:g}},e.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:s("\0")}},e.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},e.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},e.prototype.identityEscapeAtom=function(){var f=this.popChar();return{type:"Character",value:s(f)}},e.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var f=this.popChar();return{type:"Character",value:s(f)}}},e.prototype.characterClass=function(){var f=[],g=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),g=!0);this.isClassAtom();){var y=this.classAtom(),Z=y.type==="Character";if(Z&&this.isRangeDash()){this.consumeChar("-");var I=this.classAtom(),G=I.type==="Character";if(G){if(I.value<y.value)throw Error("Range out of order in character class");f.push({from:y.value,to:I.value})}else o(y.value,f),f.push(s("-")),o(I.value,f)}else o(y.value,f)}return this.consumeChar("]"),{type:"Set",complement:g,value:f}},e.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},e.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:s("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.group=function(){var f=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),f=!1;break;default:this.groupIdx++;break}var g=this.disjunction();this.consumeChar(")");var y={type:"Group",capturing:f,value:g};return f&&(y.idx=this.groupIdx),y},e.prototype.positiveInteger=function(){var f=this.popChar();if(i.test(f)===!1)throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)f+=this.popChar();return parseInt(f,10)},e.prototype.integerIncludingZero=function(){var f=this.popChar();if(r.test(f)===!1)throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)f+=this.popChar();return parseInt(f,10)},e.prototype.patternCharacter=function(){var f=this.popChar();switch(f){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:s(f)}}},e.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},e.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},e.prototype.isDigit=function(){return r.test(this.peekChar(0))},e.prototype.isClassAtom=function(f){switch(f===void 0&&(f=0),this.peekChar(f)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},e.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},e.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},e.prototype.isQuantifier=function(){var f=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(f)}},e.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.parseHexDigits=function(f){for(var g="",y=0;y<f;y++){var Z=this.popChar();if(n.test(Z)===!1)throw Error("Expecting a HexDecimal digits");g+=Z}var I=parseInt(g,16);return{type:"Character",value:I}},e.prototype.peekChar=function(f){return f===void 0&&(f=0),this.input[this.idx+f]},e.prototype.popChar=function(){var f=this.peekChar(0);return this.consumeChar(),f},e.prototype.consumeChar=function(f){if(f!==void 0&&this.input[this.idx]!==f)throw Error("Expected: '"+f+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++};var n=/[0-9a-fA-F]/,r=/[0-9]/,i=/[1-9]/;function s(f){return f.charCodeAt(0)}function o(f,g){f.length!==void 0?f.forEach(function(y){g.push(y)}):g.push(f)}function a(f,g){if(f[g]===!0)throw"duplicate flag "+g;f[g]=!0}function l(f){if(f===void 0)throw Error("Internal Error - Should never get here!")}function c(){throw Error("Internal Error - Should never get here!")}var m,p=[];for(m=s("0");m<=s("9");m++)p.push(m);var u=[s("_")].concat(p);for(m=s("a");m<=s("z");m++)u.push(m);for(m=s("A");m<=s("Z");m++)u.push(m);var d=[s(" "),s("\f"),s(`
`),s("\r"),s("	"),s("\v"),s("	"),s("\xA0"),s("\u1680"),s("\u2000"),s("\u2001"),s("\u2002"),s("\u2003"),s("\u2004"),s("\u2005"),s("\u2006"),s("\u2007"),s("\u2008"),s("\u2009"),s("\u200A"),s("\u2028"),s("\u2029"),s("\u202F"),s("\u205F"),s("\u3000"),s("\uFEFF")];function h(){}return h.prototype.visitChildren=function(f){for(var g in f){var y=f[g];f.hasOwnProperty(g)&&(y.type!==void 0?this.visit(y):Array.isArray(y)&&y.forEach(function(Z){this.visit(Z)},this))}},h.prototype.visit=function(f){switch(f.type){case"Pattern":this.visitPattern(f);break;case"Flags":this.visitFlags(f);break;case"Disjunction":this.visitDisjunction(f);break;case"Alternative":this.visitAlternative(f);break;case"StartAnchor":this.visitStartAnchor(f);break;case"EndAnchor":this.visitEndAnchor(f);break;case"WordBoundary":this.visitWordBoundary(f);break;case"NonWordBoundary":this.visitNonWordBoundary(f);break;case"Lookahead":this.visitLookahead(f);break;case"NegativeLookahead":this.visitNegativeLookahead(f);break;case"Character":this.visitCharacter(f);break;case"Set":this.visitSet(f);break;case"Group":this.visitGroup(f);break;case"GroupBackReference":this.visitGroupBackReference(f);break;case"Quantifier":this.visitQuantifier(f);break}this.visitChildren(f)},h.prototype.visitPattern=function(f){},h.prototype.visitFlags=function(f){},h.prototype.visitDisjunction=function(f){},h.prototype.visitAlternative=function(f){},h.prototype.visitStartAnchor=function(f){},h.prototype.visitEndAnchor=function(f){},h.prototype.visitWordBoundary=function(f){},h.prototype.visitNonWordBoundary=function(f){},h.prototype.visitLookahead=function(f){},h.prototype.visitNegativeLookahead=function(f){},h.prototype.visitCharacter=function(f){},h.prototype.visitSet=function(f){},h.prototype.visitGroup=function(f){},h.prototype.visitGroupBackReference=function(f){},h.prototype.visitQuantifier=function(f){},{RegExpParser:e,BaseRegExpVisitor:h,VERSION:"0.4.0"}})})(Ho);var Da={},f2=new Ho.exports.RegExpParser;function Qa(t){var e=t.toString();if(Da.hasOwnProperty(e))return Da[e];var n=f2.pattern(e);return Da[e]=n,n}function g2(){Da={}}var y2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gm="Complement Sets are not supported for first char optimization",qa=`Unable to use "first char" lexer optimizations:
`;function b2(t,e){e===void 0&&(e=!1);try{var n=Qa(t),r=fu(n.value,{},n.flags.ignoreCase);return r}catch(s){if(s.message===Gm)e&&pu(""+qa+("	Unable to optimize: < "+t.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var i="";e&&(i=`
	This will disable the lexer's first char optimizations.
	See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),mu(qa+`
`+("	Failed parsing: < "+t.toString()+` >
`)+("	Using the regexp-to-ast library version: "+Ho.exports.VERSION+`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+i)}}return[]}function fu(t,e,n){switch(t.type){case"Disjunction":for(var r=0;r<t.value.length;r++)fu(t.value[r],e,n);break;case"Alternative":for(var i=t.value,r=0;r<i.length;r++){var s=i[r];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var o=s;switch(o.type){case"Character":$a(o.value,e,n);break;case"Set":if(o.complement===!0)throw Error(Gm);lt(o.value,function(c){if(typeof c=="number")$a(c,e,n);else{var m=c;if(n===!0)for(var p=m.from;p<=m.to;p++)$a(p,e,n);else{for(var p=m.from;p<=m.to&&p<Ts;p++)$a(p,e,n);if(m.to>=Ts)for(var u=m.from>=Ts?m.from:Ts,d=m.to,h=Hi(u),f=Hi(d),g=h;g<=f;g++)e[g]=g}}});break;case"Group":fu(o.value,e,n);break;default:throw Error("Non Exhaustive Match")}var a=o.quantifier!==void 0&&o.quantifier.atLeast===0;if(o.type==="Group"&&gu(o)===!1||o.type!=="Group"&&a===!1)break}break;default:throw Error("non exhaustive match!")}return _r(e)}function $a(t,e,n){var r=Hi(t);e[r]=r,n===!0&&Z2(t,e)}function Z2(t,e){var n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){var i=Hi(r.charCodeAt(0));e[i]=i}else{var s=n.toLowerCase();if(s!==n){var i=Hi(s.charCodeAt(0));e[i]=i}}}function Rm(t,e){return Eo(t.value,function(n){if(typeof n=="number")return Wr(e,n);var r=n;return Eo(e,function(i){return r.from<=i&&i<=r.to})!==void 0})}function gu(t){return t.quantifier&&t.quantifier.atLeast===0?!0:t.value?Kn(t.value)?An(t.value,gu):gu(t.value):!1}var I2=function(t){y2(e,t);function e(n){var r=t.call(this)||this;return r.targetCharCodes=n,r.found=!1,r}return e.prototype.visitChildren=function(n){if(this.found!==!0){switch(n.type){case"Lookahead":this.visitLookahead(n);return;case"NegativeLookahead":this.visitNegativeLookahead(n);return}t.prototype.visitChildren.call(this,n)}},e.prototype.visitCharacter=function(n){Wr(this.targetCharCodes,n.value)&&(this.found=!0)},e.prototype.visitSet=function(n){n.complement?Rm(n,this.targetCharCodes)===void 0&&(this.found=!0):Rm(n,this.targetCharCodes)!==void 0&&(this.found=!0)},e}(Ho.exports.BaseRegExpVisitor);function yu(t,e){if(e instanceof RegExp){var n=Qa(e),r=new I2(t);return r.visit(n),r.found}else return Eo(e,function(i){return Wr(t,i.charCodeAt(0))})!==void 0}var Sm=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oi="PATTERN",go="defaultMode",el="modes",Wm=typeof new RegExp("(?:)").sticky=="boolean";function v2(t,e){e=za(e,{useSticky:Wm,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(Z,I){return I()}});var n=e.tracer;n("initCharCodeToOptimizedIndexMap",function(){J2()});var r;n("Reject Lexer.NA",function(){r=fo(t,function(Z){return Z[oi]===jn.NA})});var i=!1,s;n("Transform Patterns",function(){i=!1,s=et(r,function(Z){var I=Z[oi];if(Li(I)){var G=I.source;return G.length===1&&G!=="^"&&G!=="$"&&G!=="."?G:G.length===2&&G[0]==="\\"&&!Wr(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],G[1])?G[1]:e.useSticky?Cm(I):Vm(I)}else{if(Ei(I))return i=!0,{exec:I};if(gt(I,"exec"))return i=!0,I;if(typeof I=="string"){if(I.length===1)return I;var R=I.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),C=new RegExp(R);return e.useSticky?Cm(C):Vm(C)}else throw Error("non exhaustive match")}})});var o,a,l,c,m;n("misc mapping",function(){o=et(r,function(Z){return Z.tokenTypeIdx}),a=et(r,function(Z){var I=Z.GROUP;if(I!==jn.SKIPPED){if(ii(I))return I;if(wn(I))return!1;throw Error("non exhaustive match")}}),l=et(r,function(Z){var I=Z.LONGER_ALT;if(I){var G=d2(r,I);return G}}),c=et(r,function(Z){return Z.PUSH_MODE}),m=et(r,function(Z){return gt(Z,"POP_MODE")})});var p;n("Line Terminator Handling",function(){var Z=xm(e.lineTerminatorCharacters);p=et(r,function(I){return!1}),e.positionTracking!=="onlyOffset"&&(p=et(r,function(I){if(gt(I,"LINE_BREAKS"))return I.LINE_BREAKS;if(Lm(I,Z)===!1)return yu(Z,I.PATTERN)}))});var u,d,h,f;n("Misc Mapping #2",function(){u=et(r,Xm),d=et(s,E2),h=Mr(r,function(Z,I){var G=I.GROUP;return ii(G)&&G!==jn.SKIPPED&&(Z[G]=[]),Z},{}),f=et(s,function(Z,I){return{pattern:s[I],longerAlt:l[I],canLineTerminator:p[I],isCustom:u[I],short:d[I],group:a[I],push:c[I],pop:m[I],tokenTypeIdx:o[I],tokenType:r[I]}})});var g=!0,y=[];return e.safeMode||n("First Char Optimization",function(){y=Mr(r,function(Z,I,G){if(typeof I.PATTERN=="string"){var R=I.PATTERN.charCodeAt(0),C=Hi(R);bu(Z,C,f[G])}else if(Kn(I.START_CHARS_HINT)){var V;lt(I.START_CHARS_HINT,function(w){var k=typeof w=="string"?w.charCodeAt(0):w,A=Hi(k);V!==A&&(V=A,bu(Z,A,f[G]))})}else if(Li(I.PATTERN))if(I.PATTERN.unicode)g=!1,e.ensureOptimizations&&mu(""+qa+("	Unable to analyze < "+I.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var x=b2(I.PATTERN,e.ensureOptimizations);Mt(x)&&(g=!1),lt(x,function(w){bu(Z,w,f[G])})}else e.ensureOptimizations&&mu(""+qa+("	TokenType: <"+I.name+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),g=!1;return Z},[])}),n("ArrayPacking",function(){y=m2(y)}),{emptyGroups:h,patternIdxToConfig:f,charCodeToPatternIdxToConfig:y,hasCustom:i,canBeOptimized:g}}function G2(t,e){var n=[],r=S2(t);n=n.concat(r.errors);var i=W2(r.valid),s=i.valid;return n=n.concat(i.errors),n=n.concat(R2(s)),n=n.concat(A2(s)),n=n.concat(T2(s,e)),n=n.concat(B2(s)),n}function R2(t){var e=[],n=Hn(t,function(r){return Li(r[oi])});return e=e.concat(C2(n)),e=e.concat(x2(n)),e=e.concat(w2(n)),e=e.concat(k2(n)),e=e.concat(X2(n)),e}function S2(t){var e=Hn(t,function(i){return!gt(i,oi)}),n=et(e,function(i){return{message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:dr.MISSING_PATTERN,tokenTypes:[i]}}),r=Oa(t,e);return{errors:n,valid:r}}function W2(t){var e=Hn(t,function(i){var s=i[oi];return!Li(s)&&!Ei(s)&&!gt(s,"exec")&&!ii(s)}),n=et(e,function(i){return{message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:dr.INVALID_PATTERN,tokenTypes:[i]}}),r=Oa(t,e);return{errors:n,valid:r}}var V2=/[^\\][\$]/;function C2(t){var e=function(i){Sm(s,i);function s(){var o=i!==null&&i.apply(this,arguments)||this;return o.found=!1,o}return s.prototype.visitEndAnchor=function(o){this.found=!0},s}(Ho.exports.BaseRegExpVisitor),n=Hn(t,function(i){var s=i[oi];try{var o=Qa(s),a=new e;return a.visit(o),a.found}catch{return V2.test(s.source)}}),r=et(n,function(i){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:dr.EOI_ANCHOR_FOUND,tokenTypes:[i]}});return r}function X2(t){var e=Hn(t,function(r){var i=r[oi];return i.test("")}),n=et(e,function(r){return{message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:dr.EMPTY_MATCH_PATTERN,tokenTypes:[r]}});return n}var L2=/[^\\[][\^]|^\^/;function x2(t){var e=function(i){Sm(s,i);function s(){var o=i!==null&&i.apply(this,arguments)||this;return o.found=!1,o}return s.prototype.visitStartAnchor=function(o){this.found=!0},s}(Ho.exports.BaseRegExpVisitor),n=Hn(t,function(i){var s=i[oi];try{var o=Qa(s),a=new e;return a.visit(o),a.found}catch{return L2.test(s.source)}}),r=et(n,function(i){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:dr.SOI_ANCHOR_FOUND,tokenTypes:[i]}});return r}function w2(t){var e=Hn(t,function(r){var i=r[oi];return i instanceof RegExp&&(i.multiline||i.global)}),n=et(e,function(r){return{message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:dr.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}});return n}function k2(t){var e=[],n=et(t,function(s){return Mr(t,function(o,a){return s.PATTERN.source===a.PATTERN.source&&!Wr(e,a)&&a.PATTERN!==jn.NA&&(e.push(a),o.push(a)),o},[])});n=As(n);var r=Hn(n,function(s){return s.length>1}),i=et(r,function(s){var o=et(s,function(l){return l.name}),a=xn(s).PATTERN;return{message:"The same RegExp pattern ->"+a+"<-"+("has been used in all of the following Token Types: "+o.join(", ")+" <-"),type:dr.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}});return i}function A2(t){var e=Hn(t,function(r){if(!gt(r,"GROUP"))return!1;var i=r.GROUP;return i!==jn.SKIPPED&&i!==jn.NA&&!ii(i)}),n=et(e,function(r){return{message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:dr.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}});return n}function T2(t,e){var n=Hn(t,function(i){return i.PUSH_MODE!==void 0&&!Wr(e,i.PUSH_MODE)}),r=et(n,function(i){var s="Token Type: ->"+i.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+i.PUSH_MODE+"<-which does not exist";return{message:s,type:dr.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}});return r}function B2(t){var e=[],n=Mr(t,function(r,i,s){var o=i.PATTERN;return o===jn.NA||(ii(o)?r.push({str:o,idx:s,tokenType:i}):Li(o)&&F2(o)&&r.push({str:o.source,idx:s,tokenType:i})),r},[]);return lt(t,function(r,i){lt(n,function(s){var o=s.str,a=s.idx,l=s.tokenType;if(i<a&&U2(o,r.PATTERN)){var c="Token: ->"+l.name+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+r.name+"<-")+`in the lexer's definition.
See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:dr.UNREACHABLE_PATTERN,tokenTypes:[r,l]})}})}),e}function U2(t,e){if(Li(e)){var n=e.exec(t);return n!==null&&n.index===0}else{if(Ei(e))return e(t,0,[],{});if(gt(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function F2(t){var e=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return Eo(e,function(n){return t.source.indexOf(n)!==-1})===void 0}function Vm(t){var e=t.ignoreCase?"i":"";return new RegExp("^(?:"+t.source+")",e)}function Cm(t){var e=t.ignoreCase?"iy":"y";return new RegExp(""+t.source,e)}function Y2(t,e,n){var r=[];return gt(t,go)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+go+`> property in its definition
`,type:dr.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),gt(t,el)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+el+`> property in its definition
`,type:dr.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),gt(t,el)&&gt(t,go)&&!gt(t.modes,t.defaultMode)&&r.push({message:"A MultiMode Lexer cannot be initialized with a "+go+": <"+t.defaultMode+`>which does not exist
`,type:dr.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),gt(t,el)&&lt(t.modes,function(i,s){lt(i,function(o,a){wn(o)&&r.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+s+"> at index: <"+a+`>
`),type:dr.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),r}function N2(t,e,n){var r=[],i=!1,s=As(fn(c2(t.modes,function(l){return l}))),o=fo(s,function(l){return l[oi]===jn.NA}),a=xm(n);return e&&lt(o,function(l){var c=Lm(l,a);if(c!==!1){var m=K2(l,c),p={message:m,type:c.issue,tokenType:l};r.push(p)}else gt(l,"LINE_BREAKS")?l.LINE_BREAKS===!0&&(i=!0):yu(a,l.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:dr.NO_LINE_BREAKS_FLAGS}),r}function M2(t){var e={},n=Xi(t);return lt(n,function(r){var i=t[r];if(Kn(i))e[r]=[];else throw Error("non exhaustive match")}),e}function Xm(t){var e=t.PATTERN;if(Li(e))return!1;if(Ei(e))return!0;if(gt(e,"exec"))return!0;if(ii(e))return!1;throw Error("non exhaustive match")}function E2(t){return ii(t)&&t.length===1?t.charCodeAt(0):!1}var H2={test:function(t){for(var e=t.length,n=this.lastIndex;n<e;n++){var r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function Lm(t,e){if(gt(t,"LINE_BREAKS"))return!1;if(Li(t.PATTERN)){try{yu(e,t.PATTERN)}catch(n){return{issue:dr.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(ii(t.PATTERN))return!1;if(Xm(t))return{issue:dr.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function K2(t,e){if(e.issue===dr.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("	The problem is in the <"+t.name+`> Token Type
`)+("	 Root cause: "+e.errMsg+`.
`)+"	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(e.issue===dr.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("	The problem is in the <"+t.name+`> Token Type
`)+"	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function xm(t){var e=et(t,function(n){return ii(n)&&n.length>0?n.charCodeAt(0):n});return e}function bu(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}var Ts=256;function Hi(t){return t<Ts?t:tl[t]}var tl=[];function J2(){if(Mt(tl)){tl=new Array(65536);for(var t=0;t<65536;t++)tl[t]=t>255?255+~~(t/255):t}}function rl(t,e){var n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function nl(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var wm=1,km={};function Bs(t){var e=j2(t);P2(e),z2(e),O2(e),lt(e,function(n){n.isParent=n.categoryMatches.length>0})}function j2(t){for(var e=gn(t),n=t,r=!0;r;){n=As(fn(et(n,function(s){return s.CATEGORIES})));var i=Oa(n,e);e=e.concat(i),Mt(i)?r=!1:n=i}return e}function P2(t){lt(t,function(e){Tm(e)||(km[wm]=e,e.tokenTypeIdx=wm++),Bm(e)&&!Kn(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Bm(e)||(e.CATEGORIES=[]),_2(e)||(e.categoryMatches=[]),D2(e)||(e.categoryMatchesMap={})})}function O2(t){lt(t,function(e){e.categoryMatches=[],lt(e.categoryMatchesMap,function(n,r){e.categoryMatches.push(km[r].tokenTypeIdx)})})}function z2(t){lt(t,function(e){Am([],e)})}function Am(t,e){lt(t,function(n){e.categoryMatchesMap[n.tokenTypeIdx]=!0}),lt(e.CATEGORIES,function(n){var r=t.concat(e);Wr(r,n)||Am(r,n)})}function Tm(t){return gt(t,"tokenTypeIdx")}function Bm(t){return gt(t,"CATEGORIES")}function _2(t){return gt(t,"categoryMatches")}function D2(t){return gt(t,"categoryMatchesMap")}function Q2(t){return gt(t,"tokenTypeIdx")}var Um={buildUnableToPopLexerModeMessage:function(t){return"Unable to pop Lexer Mode after encountering Token ->"+t.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(t,e,n,r,i){return"unexpected character: ->"+t.charAt(e)+"<- at offset: "+e+","+(" skipped "+n+" characters.")}},dr;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(dr||(dr={}));var Us={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Um,traceInitPerf:!1,skipValidations:!1};Object.freeze(Us);var jn=function(){function t(e,n){var r=this;if(n===void 0&&(n=Us),this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=ym(Us,n);var i=this.config.traceInitPerf;i===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof i=="number"&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var s,o=!0;r.TRACE_INIT("Lexer Config handling",function(){if(r.config.lineTerminatorsPattern===Us.lineTerminatorsPattern)r.config.lineTerminatorsPattern=H2;else if(r.config.lineTerminatorCharacters===Us.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');r.trackStartLines=/full|onlyStart/i.test(r.config.positionTracking),r.trackEndLines=/full/i.test(r.config.positionTracking),Kn(e)?(s={modes:{}},s.modes[go]=gn(e),s[go]=go):(o=!1,s=ks(e))}),r.config.skipValidations===!1&&(r.TRACE_INIT("performRuntimeChecks",function(){r.lexerDefinitionErrors=r.lexerDefinitionErrors.concat(Y2(s,r.trackStartLines,r.config.lineTerminatorCharacters))}),r.TRACE_INIT("performWarningRuntimeChecks",function(){r.lexerDefinitionWarning=r.lexerDefinitionWarning.concat(N2(s,r.trackStartLines,r.config.lineTerminatorCharacters))})),s.modes=s.modes?s.modes:{},lt(s.modes,function(m,p){s.modes[p]=fo(m,function(u){return wn(u)})});var a=Xi(s.modes);if(lt(s.modes,function(m,p){r.TRACE_INIT("Mode: <"+p+"> processing",function(){if(r.modes.push(p),r.config.skipValidations===!1&&r.TRACE_INIT("validatePatterns",function(){r.lexerDefinitionErrors=r.lexerDefinitionErrors.concat(G2(m,a))}),Mt(r.lexerDefinitionErrors)){Bs(m);var u;r.TRACE_INIT("analyzeTokenTypes",function(){u=v2(m,{lineTerminatorCharacters:r.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:r.TRACE_INIT.bind(r)})}),r.patternIdxToConfig[p]=u.patternIdxToConfig,r.charCodeToPatternIdxToConfig[p]=u.charCodeToPatternIdxToConfig,r.emptyGroups=ym(r.emptyGroups,u.emptyGroups),r.hasCustom=u.hasCustom||r.hasCustom,r.canModeBeOptimized[p]=u.canBeOptimized}})}),r.defaultMode=s.defaultMode,!Mt(r.lexerDefinitionErrors)&&!r.config.deferDefinitionErrorsHandling){var l=et(r.lexerDefinitionErrors,function(m){return m.message}),c=l.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}lt(r.lexerDefinitionWarning,function(m){pu(m.message)}),r.TRACE_INIT("Choosing sub-methods implementations",function(){if(Wm?(r.chopInput=bm,r.match=r.matchWithTest):(r.updateLastIndex=wr,r.match=r.matchWithExec),o&&(r.handleModes=wr),r.trackStartLines===!1&&(r.computeNewColumn=bm),r.trackEndLines===!1&&(r.updateTokenEndLineColumnLocation=wr),/full/i.test(r.config.positionTracking))r.createTokenInstance=r.createFullToken;else if(/onlyStart/i.test(r.config.positionTracking))r.createTokenInstance=r.createStartOnlyToken;else if(/onlyOffset/i.test(r.config.positionTracking))r.createTokenInstance=r.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+r.config.positionTracking+'"');r.hasCustom?(r.addToken=r.addTokenUsingPush,r.handlePayload=r.handlePayloadWithCustom):(r.addToken=r.addTokenUsingMemberAccess,r.handlePayload=r.handlePayloadNoCustom)}),r.TRACE_INIT("Failed Optimization Warnings",function(){var m=Mr(r.canModeBeOptimized,function(p,u,d){return u===!1&&p.push(d),p},[]);if(n.ensureOptimizations&&!Mt(m))throw Error("Lexer Modes: < "+m.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),r.TRACE_INIT("clearRegExpParserCache",function(){g2()}),r.TRACE_INIT("toFastProperties",function(){Im(r)})})}return t.prototype.tokenize=function(e,n){if(n===void 0&&(n=this.defaultMode),!Mt(this.lexerDefinitionErrors)){var r=et(this.lexerDefinitionErrors,function(o){return o.message}),i=r.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}var s=this.tokenizeInternal(e,n);return s},t.prototype.tokenizeInternal=function(e,n){var r=this,i,s,o,a,l,c,m,p,u,d,h,f,g,y,Z=e,I=Z.length,G=0,R=0,C=this.hasCustom?0:Math.floor(e.length/10),V=new Array(C),x=[],w=this.trackStartLines?1:void 0,k=this.trackStartLines?1:void 0,A=M2(this.emptyGroups),Y=this.trackStartLines,U=this.config.lineTerminatorsPattern,M=0,j=[],K=[],P=[],J=[];Object.freeze(J);var E=void 0;function O(){return j}function D(Se){var ke=Hi(Se),We=K[ke];return We===void 0?J:We}var le=function(Se){if(P.length===1&&Se.tokenType.PUSH_MODE===void 0){var ke=r.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Se);x.push({offset:Se.startOffset,line:Se.startLine!==void 0?Se.startLine:void 0,column:Se.startColumn!==void 0?Se.startColumn:void 0,length:Se.image.length,message:ke})}else{P.pop();var We=pm(P);j=r.patternIdxToConfig[We],K=r.charCodeToPatternIdxToConfig[We],M=j.length;var Ke=r.canModeBeOptimized[We]&&r.config.safeMode===!1;K&&Ke?E=D:E=O}};function X(Se){P.push(Se),K=this.charCodeToPatternIdxToConfig[Se],j=this.patternIdxToConfig[Se],M=j.length,M=j.length;var ke=this.canModeBeOptimized[Se]&&this.config.safeMode===!1;K&&ke?E=D:E=O}X.call(this,n);for(var T;G<I;){l=null;var N=Z.charCodeAt(G),z=E(N),te=z.length;for(i=0;i<te;i++){T=z[i];var ne=T.pattern;c=null;var ee=T.short;if(ee!==!1?N===ee&&(l=ne):T.isCustom===!0?(y=ne.exec(Z,G,V,A),y!==null?(l=y[0],y.payload!==void 0&&(c=y.payload)):l=null):(this.updateLastIndex(ne,G),l=this.match(ne,e,G)),l!==null){if(a=T.longerAlt,a!==void 0){var oe=j[a],ie=oe.pattern;m=null,oe.isCustom===!0?(y=ie.exec(Z,G,V,A),y!==null?(o=y[0],y.payload!==void 0&&(m=y.payload)):o=null):(this.updateLastIndex(ie,G),o=this.match(ie,e,G)),o&&o.length>l.length&&(l=o,c=m,T=oe)}break}}if(l!==null){if(p=l.length,u=T.group,u!==void 0&&(d=T.tokenTypeIdx,h=this.createTokenInstance(l,G,d,T.tokenType,w,k,p),this.handlePayload(h,c),u===!1?R=this.addToken(V,R,h):A[u].push(h)),e=this.chopInput(e,p),G=G+p,k=this.computeNewColumn(k,p),Y===!0&&T.canLineTerminator===!0){var ce=0,he=void 0,q=void 0;U.lastIndex=0;do he=U.test(l),he===!0&&(q=U.lastIndex-1,ce++);while(he===!0);ce!==0&&(w=w+ce,k=p-q,this.updateTokenEndLineColumnLocation(h,u,q,ce,w,k,p))}this.handleModes(T,le,X,h)}else{for(var me=G,ge=w,be=k,pe=!1;!pe&&G<I;)for(Z.charCodeAt(G),e=this.chopInput(e,1),G++,s=0;s<M;s++){var xe=j[s],ne=xe.pattern,ee=xe.short;if(ee!==!1?Z.charCodeAt(G)===ee&&(pe=!0):xe.isCustom===!0?pe=ne.exec(Z,G,V,A)!==null:(this.updateLastIndex(ne,G),pe=ne.exec(e)!==null),pe===!0)break}f=G-me,g=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(Z,me,f,ge,be),x.push({offset:me,line:ge,column:be,length:f,message:g})}}return this.hasCustom||(V.length=R),{tokens:V,groups:A,errors:x}},t.prototype.handleModes=function(e,n,r,i){if(e.pop===!0){var s=e.push;n(i),s!==void 0&&r.call(this,s)}else e.push!==void 0&&r.call(this,e.push)},t.prototype.chopInput=function(e,n){return e.substring(n)},t.prototype.updateLastIndex=function(e,n){e.lastIndex=n},t.prototype.updateTokenEndLineColumnLocation=function(e,n,r,i,s,o,a){var l,c;n!==void 0&&(l=r===a-1,c=l?-1:0,i===1&&l===!0||(e.endLine=s+c,e.endColumn=o-1+-c))},t.prototype.computeNewColumn=function(e,n){return e+n},t.prototype.createTokenInstance=function(){return null},t.prototype.createOffsetOnlyToken=function(e,n,r,i){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:i}},t.prototype.createStartOnlyToken=function(e,n,r,i,s,o){return{image:e,startOffset:n,startLine:s,startColumn:o,tokenTypeIdx:r,tokenType:i}},t.prototype.createFullToken=function(e,n,r,i,s,o,a){return{image:e,startOffset:n,endOffset:n+a-1,startLine:s,endLine:s,startColumn:o,endColumn:o+a-1,tokenTypeIdx:r,tokenType:i}},t.prototype.addToken=function(e,n,r){return 666},t.prototype.addTokenUsingPush=function(e,n,r){return e.push(r),n},t.prototype.addTokenUsingMemberAccess=function(e,n,r){return e[n]=r,n++,n},t.prototype.handlePayload=function(e,n){},t.prototype.handlePayloadNoCustom=function(e,n){},t.prototype.handlePayloadWithCustom=function(e,n){n!==null&&(e.payload=n)},t.prototype.match=function(e,n,r){return null},t.prototype.matchWithTest=function(e,n,r){var i=e.test(n);return i===!0?n.substring(r,e.lastIndex):null},t.prototype.matchWithExec=function(e,n){var r=e.exec(n);return r!==null?r[0]:r},t.prototype.TRACE_INIT=function(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;var r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--> <"+e+">");var i=vm(n),s=i.time,o=i.value,a=s>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(r+"<-- <"+e+"> time: "+s+"ms"),this.traceInitIndent--,o}else return n()},t.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",t.NA=/NOT_APPLICABLE/,t}();function yo(t){return Fm(t)?t.LABEL:t.name}function q2(t){return t.name}function Fm(t){return ii(t.LABEL)&&t.LABEL!==""}var $2="parent",Ym="categories",Nm="label",Mm="group",Em="push_mode",Hm="pop_mode",Km="longer_alt",Jm="line_breaks",jm="start_chars_hint";function Zu(t){return eI(t)}function eI(t){var e=t.pattern,n={};if(n.name=t.name,wn(e)||(n.PATTERN=e),gt(t,$2))throw`The parent property is no longer supported.
See: https://github.com/SAP/chevrotain/issues/564#issuecomment-349062346 for details.`;return gt(t,Ym)&&(n.CATEGORIES=t[Ym]),Bs([n]),gt(t,Nm)&&(n.LABEL=t[Nm]),gt(t,Mm)&&(n.GROUP=t[Mm]),gt(t,Hm)&&(n.POP_MODE=t[Hm]),gt(t,Em)&&(n.PUSH_MODE=t[Em]),gt(t,Km)&&(n.LONGER_ALT=t[Km]),gt(t,Jm)&&(n.LINE_BREAKS=t[Jm]),gt(t,jm)&&(n.START_CHARS_HINT=t[jm]),n}var Ki=Zu({name:"EOF",pattern:jn.NA});Bs([Ki]);function il(t,e,n,r,i,s,o,a){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:s,startColumn:o,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function tI(t,e){return rl(t,e)}var xi=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),si=function(){function t(e){this.definition=e}return t.prototype.accept=function(e){e.visit(this),lt(this.definition,function(n){n.accept(e)})},t}(),an=function(t){xi(e,t);function e(n){var r=t.call(this,[])||this;return r.idx=1,Jn(r,kn(n,function(i){return i!==void 0})),r}return Object.defineProperty(e.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(n){},enumerable:!0,configurable:!0}),e.prototype.accept=function(n){n.visit(this)},e}(si),bo=function(t){xi(e,t);function e(n){var r=t.call(this,n.definition)||this;return r.orgText="",Jn(r,kn(n,function(i){return i!==void 0})),r}return e}(si),Dr=function(t){xi(e,t);function e(n){var r=t.call(this,n.definition)||this;return r.ignoreAmbiguities=!1,Jn(r,kn(n,function(i){return i!==void 0})),r}return e}(si),Vr=function(t){xi(e,t);function e(n){var r=t.call(this,n.definition)||this;return r.idx=1,Jn(r,kn(n,function(i){return i!==void 0})),r}return e}(si),yn=function(t){xi(e,t);function e(n){var r=t.call(this,n.definition)||this;return r.idx=1,Jn(r,kn(n,function(i){return i!==void 0})),r}return e}(si),bn=function(t){xi(e,t);function e(n){var r=t.call(this,n.definition)||this;return r.idx=1,Jn(r,kn(n,function(i){return i!==void 0})),r}return e}(si),ir=function(t){xi(e,t);function e(n){var r=t.call(this,n.definition)||this;return r.idx=1,Jn(r,kn(n,function(i){return i!==void 0})),r}return e}(si),ln=function(t){xi(e,t);function e(n){var r=t.call(this,n.definition)||this;return r.idx=1,Jn(r,kn(n,function(i){return i!==void 0})),r}return e}(si),cn=function(t){xi(e,t);function e(n){var r=t.call(this,n.definition)||this;return r.idx=1,r.ignoreAmbiguities=!1,r.hasPredicates=!1,Jn(r,kn(n,function(i){return i!==void 0})),r}return e}(si),_t=function(){function t(e){this.idx=1,Jn(this,kn(e,function(n){return n!==void 0}))}return t.prototype.accept=function(e){e.visit(this)},t}();function Pm(t){return et(t,Fs)}function Fs(t){function e(i){return et(i,Fs)}if(t instanceof an)return{type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};if(t instanceof Dr)return{type:"Flat",definition:e(t.definition)};if(t instanceof Vr)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof yn)return{type:"RepetitionMandatory",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof bn)return{type:"RepetitionMandatoryWithSeparator",name:t.name,idx:t.idx,separator:Fs(new _t({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ln)return{type:"RepetitionWithSeparator",name:t.name,idx:t.idx,separator:Fs(new _t({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ir)return{type:"Repetition",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof cn)return{type:"Alternation",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof _t){var n={type:"Terminal",name:t.terminalType.name,label:yo(t.terminalType),idx:t.idx},r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=Li(r)?r.source:r),n}else{if(t instanceof bo)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}var ol=function(){function t(){}return t.prototype.walk=function(e,n){var r=this;n===void 0&&(n=[]),lt(e.definition,function(i,s){var o=Nr(e.definition,s+1);if(i instanceof an)r.walkProdRef(i,o,n);else if(i instanceof _t)r.walkTerminal(i,o,n);else if(i instanceof Dr)r.walkFlat(i,o,n);else if(i instanceof Vr)r.walkOption(i,o,n);else if(i instanceof yn)r.walkAtLeastOne(i,o,n);else if(i instanceof bn)r.walkAtLeastOneSep(i,o,n);else if(i instanceof ln)r.walkManySep(i,o,n);else if(i instanceof ir)r.walkMany(i,o,n);else if(i instanceof cn)r.walkOr(i,o,n);else throw Error("non exhaustive match")})},t.prototype.walkTerminal=function(e,n,r){},t.prototype.walkProdRef=function(e,n,r){},t.prototype.walkFlat=function(e,n,r){var i=n.concat(r);this.walk(e,i)},t.prototype.walkOption=function(e,n,r){var i=n.concat(r);this.walk(e,i)},t.prototype.walkAtLeastOne=function(e,n,r){var i=[new Vr({definition:e.definition})].concat(n,r);this.walk(e,i)},t.prototype.walkAtLeastOneSep=function(e,n,r){var i=Om(e,n,r);this.walk(e,i)},t.prototype.walkMany=function(e,n,r){var i=[new Vr({definition:e.definition})].concat(n,r);this.walk(e,i)},t.prototype.walkManySep=function(e,n,r){var i=Om(e,n,r);this.walk(e,i)},t.prototype.walkOr=function(e,n,r){var i=this,s=n.concat(r);lt(e.definition,function(o){var a=new Dr({definition:[o]});i.walk(a,s)})},t}();function Om(t,e,n){var r=[new Vr({definition:[new _t({terminalType:t.separator})].concat(t.definition)})],i=r.concat(e,n);return i}var Ji=function(){function t(){}return t.prototype.visit=function(e){var n=e;switch(n.constructor){case an:return this.visitNonTerminal(n);case Dr:return this.visitFlat(n);case Vr:return this.visitOption(n);case yn:return this.visitRepetitionMandatory(n);case bn:return this.visitRepetitionMandatoryWithSeparator(n);case ln:return this.visitRepetitionWithSeparator(n);case ir:return this.visitRepetition(n);case cn:return this.visitAlternation(n);case _t:return this.visitTerminal(n);case bo:return this.visitRule(n);default:throw Error("non exhaustive match")}},t.prototype.visitNonTerminal=function(e){},t.prototype.visitFlat=function(e){},t.prototype.visitOption=function(e){},t.prototype.visitRepetition=function(e){},t.prototype.visitRepetitionMandatory=function(e){},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){},t.prototype.visitRepetitionWithSeparator=function(e){},t.prototype.visitAlternation=function(e){},t.prototype.visitTerminal=function(e){},t.prototype.visitRule=function(e){},t}(),rI=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function nI(t){return t instanceof Dr||t instanceof Vr||t instanceof ir||t instanceof yn||t instanceof bn||t instanceof ln||t instanceof _t||t instanceof bo}function sl(t,e){e===void 0&&(e=[]);var n=t instanceof Vr||t instanceof ir||t instanceof ln;return n?!0:t instanceof cn?fm(t.definition,function(r){return sl(r,e)}):t instanceof an&&Wr(e,t)?!1:t instanceof si?(t instanceof an&&e.push(t),An(t.definition,function(r){return sl(r,e)})):!1}function iI(t){return t instanceof cn}function Pn(t){if(t instanceof an)return"SUBRULE";if(t instanceof Vr)return"OPTION";if(t instanceof cn)return"OR";if(t instanceof yn)return"AT_LEAST_ONE";if(t instanceof bn)return"AT_LEAST_ONE_SEP";if(t instanceof ln)return"MANY_SEP";if(t instanceof ir)return"MANY";if(t instanceof _t)return"CONSUME";throw Error("non exhaustive match")}var zm=function(t){rI(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.separator="-",n.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},n}return e.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},e.prototype.visitTerminal=function(n){var r=n.terminalType.name+this.separator+"Terminal";gt(this.dslMethods,r)||(this.dslMethods[r]=[]),this.dslMethods[r].push(n)},e.prototype.visitNonTerminal=function(n){var r=n.nonTerminalName+this.separator+"Terminal";gt(this.dslMethods,r)||(this.dslMethods[r]=[]),this.dslMethods[r].push(n)},e.prototype.visitOption=function(n){this.dslMethods.option.push(n)},e.prototype.visitRepetitionWithSeparator=function(n){this.dslMethods.repetitionWithSeparator.push(n)},e.prototype.visitRepetitionMandatory=function(n){this.dslMethods.repetitionMandatory.push(n)},e.prototype.visitRepetitionMandatoryWithSeparator=function(n){this.dslMethods.repetitionMandatoryWithSeparator.push(n)},e.prototype.visitRepetition=function(n){this.dslMethods.repetition.push(n)},e.prototype.visitAlternation=function(n){this.dslMethods.alternation.push(n)},e}(Ji),al=new zm;function oI(t){al.reset(),t.accept(al);var e=al.dslMethods;return al.reset(),e}function Ys(t){if(t instanceof an)return Ys(t.referencedRule);if(t instanceof _t)return lI(t);if(nI(t))return sI(t);if(iI(t))return aI(t);throw Error("non exhaustive match")}function sI(t){for(var e=[],n=t.definition,r=0,i=n.length>r,s,o=!0;i&&o;)s=n[r],o=sl(s),e=e.concat(Ys(s)),r=r+1,i=n.length>r;return du(e)}function aI(t){var e=et(t.definition,function(n){return Ys(n)});return du(fn(e))}function lI(t){return[t.terminalType]}var _m="_~IN~_",cI=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uI=function(t){cI(e,t);function e(n){var r=t.call(this)||this;return r.topProd=n,r.follows={},r}return e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(n,r,i){},e.prototype.walkProdRef=function(n,r,i){var s=hI(n.referencedRule,n.idx)+this.topProd.name,o=r.concat(i),a=new Dr({definition:o}),l=Ys(a);this.follows[s]=l},e}(ol);function dI(t){var e={};return lt(t,function(n){var r=new uI(n).startWalking();Jn(e,r)}),e}function hI(t,e){return t.name+e+_m}var mI=4,ji=8,pI=8,Ko=1<<ji,ll=2<<ji,Ns=3<<ji,Ms=4<<ji,Es=5<<ji,Jo=6<<ji;function Hs(t,e,n){return n|e|t}var fI=32-pI;function Dm(t,e,n,r){var i=r+1<<fI;return Hs(t,e,n)|i}var gI=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function Qm(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function qm(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function yI(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function $m(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}var Iu=function(t){gI(e,t);function e(n){var r=t.call(this)||this;return r.result=[],r.ruleIdx=n,r}return e.prototype.collectNamedDSLMethod=function(n,r,i){if(!wn(n.name)){var s=void 0;if(n instanceof Vr||n instanceof ir||n instanceof yn||n instanceof cn)s=new r({definition:n.definition,idx:n.idx});else if(n instanceof bn||n instanceof ln)s=new r({definition:n.definition,idx:n.idx,separator:n.separator});else throw Error("non exhaustive match");var o=[s],a=Hs(this.ruleIdx,i,n.idx);this.result.push({def:o,key:a,name:n.name,orgProd:n})}},e.prototype.visitOption=function(n){this.collectNamedDSLMethod(n,Vr,ll)},e.prototype.visitRepetition=function(n){this.collectNamedDSLMethod(n,ir,Ns)},e.prototype.visitRepetitionMandatory=function(n){this.collectNamedDSLMethod(n,yn,Ms)},e.prototype.visitRepetitionMandatoryWithSeparator=function(n){this.collectNamedDSLMethod(n,bn,Jo)},e.prototype.visitRepetitionWithSeparator=function(n){this.collectNamedDSLMethod(n,ln,Es)},e.prototype.visitAlternation=function(n){var r=this;this.collectNamedDSLMethod(n,cn,Ko);var i=n.definition.length>1;lt(n.definition,function(s,o){if(!wn(s.name)){var a=s.definition;i?a=[new Vr({definition:s.definition})]:a=s.definition;var l=Dm(r.ruleIdx,Ko,n.idx,o);r.result.push({def:a,key:l,name:s.name,orgProd:s})}})},e}(Ji);function bI(t,e){var n={allRuleNames:[]};return lt(t,function(r){var i=e[r.name];n.allRuleNames.push(r.name);var s=new Iu(i);r.accept(s),lt(s.result,function(o){o.def,o.key;var a=o.name;n.allRuleNames.push(r.name+a)})}),n}var Zo=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZI=function(t){Zo(e,t);function e(n,r){var i=t.call(this)||this;return i.topProd=n,i.path=r,i.possibleTokTypes=[],i.nextProductionName="",i.nextProductionOccurrence=0,i.found=!1,i.isAtEndOfPath=!1,i}return e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=gn(this.path.ruleStack).reverse(),this.occurrenceStack=gn(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(n,r){r===void 0&&(r=[]),this.found||t.prototype.walk.call(this,n,r)},e.prototype.walkProdRef=function(n,r,i){if(n.referencedRule.name===this.nextProductionName&&n.idx===this.nextProductionOccurrence){var s=r.concat(i);this.updateExpectedNext(),this.walk(n.referencedRule,s)}},e.prototype.updateExpectedNext=function(){Mt(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(ol),II=function(t){Zo(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.path=r,i.nextTerminalName="",i.nextTerminalOccurrence=0,i.nextTerminalName=i.path.lastTok.name,i.nextTerminalOccurrence=i.path.lastTokOccurrence,i}return e.prototype.walkTerminal=function(n,r,i){if(this.isAtEndOfPath&&n.terminalType.name===this.nextTerminalName&&n.idx===this.nextTerminalOccurrence&&!this.found){var s=r.concat(i),o=new Dr({definition:s});this.possibleTokTypes=Ys(o),this.found=!0}},e}(ZI),cl=function(t){Zo(e,t);function e(n,r){var i=t.call(this)||this;return i.topRule=n,i.occurrence=r,i.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},i}return e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(ol),vI=function(t){Zo(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkMany=function(n,r,i){if(n.idx===this.occurrence){var s=xn(r.concat(i));this.result.isEndOfRule=s===void 0,s instanceof _t&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else t.prototype.walkMany.call(this,n,r,i)},e}(cl),ep=function(t){Zo(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkManySep=function(n,r,i){if(n.idx===this.occurrence){var s=xn(r.concat(i));this.result.isEndOfRule=s===void 0,s instanceof _t&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else t.prototype.walkManySep.call(this,n,r,i)},e}(cl),GI=function(t){Zo(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkAtLeastOne=function(n,r,i){if(n.idx===this.occurrence){var s=xn(r.concat(i));this.result.isEndOfRule=s===void 0,s instanceof _t&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else t.prototype.walkAtLeastOne.call(this,n,r,i)},e}(cl),tp=function(t){Zo(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkAtLeastOneSep=function(n,r,i){if(n.idx===this.occurrence){var s=xn(r.concat(i));this.result.isEndOfRule=s===void 0,s instanceof _t&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else t.prototype.walkAtLeastOneSep.call(this,n,r,i)},e}(cl);function vu(t,e,n){n===void 0&&(n=[]),n=gn(n);var r=[],i=0;function s(c){return c.concat(Nr(t,i+1))}function o(c){var m=vu(s(c),e,n);return r.concat(m)}for(;n.length<e&&i<t.length;){var a=t[i];if(a instanceof Dr)return o(a.definition);if(a instanceof an)return o(a.definition);if(a instanceof Vr)r=o(a.definition);else if(a instanceof yn){var l=a.definition.concat([new ir({definition:a.definition})]);return o(l)}else if(a instanceof bn){var l=[new Dr({definition:a.definition}),new ir({definition:[new _t({terminalType:a.separator})].concat(a.definition)})];return o(l)}else if(a instanceof ln){var l=a.definition.concat([new ir({definition:[new _t({terminalType:a.separator})].concat(a.definition)})]);r=o(l)}else if(a instanceof ir){var l=a.definition.concat([new ir({definition:a.definition})]);r=o(l)}else{if(a instanceof cn)return lt(a.definition,function(c){r=o(c.definition)}),r;if(a instanceof _t)n.push(a.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:Nr(t,i)}),r}function rp(t,e,n,r){var i="EXIT_NONE_TERMINAL",s=[i],o="EXIT_ALTERNATIVE",a=!1,l=e.length,c=l-r-1,m=[],p=[];for(p.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Mt(p);){var u=p.pop();if(u===o){a&&pm(p).idx<=c&&p.pop();continue}var d=u.def,h=u.idx,f=u.ruleStack,g=u.occurrenceStack;if(!Mt(d)){var y=d[0];if(y===i){var Z={idx:h,def:Nr(d),ruleStack:ws(f),occurrenceStack:ws(g)};p.push(Z)}else if(y instanceof _t)if(h<l-1){var I=h+1,G=e[I];if(n(G,y.terminalType)){var Z={idx:I,def:Nr(d),ruleStack:f,occurrenceStack:g};p.push(Z)}}else if(h===l-1)m.push({nextTokenType:y.terminalType,nextTokenOccurrence:y.idx,ruleStack:f,occurrenceStack:g}),a=!0;else throw Error("non exhaustive match");else if(y instanceof an){var R=gn(f);R.push(y.nonTerminalName);var C=gn(g);C.push(y.idx);var Z={idx:h,def:y.definition.concat(s,Nr(d)),ruleStack:R,occurrenceStack:C};p.push(Z)}else if(y instanceof Vr){var V={idx:h,def:Nr(d),ruleStack:f,occurrenceStack:g};p.push(V),p.push(o);var x={idx:h,def:y.definition.concat(Nr(d)),ruleStack:f,occurrenceStack:g};p.push(x)}else if(y instanceof yn){var w=new ir({definition:y.definition,idx:y.idx}),k=y.definition.concat([w],Nr(d)),Z={idx:h,def:k,ruleStack:f,occurrenceStack:g};p.push(Z)}else if(y instanceof bn){var A=new _t({terminalType:y.separator}),w=new ir({definition:[A].concat(y.definition),idx:y.idx}),k=y.definition.concat([w],Nr(d)),Z={idx:h,def:k,ruleStack:f,occurrenceStack:g};p.push(Z)}else if(y instanceof ln){var V={idx:h,def:Nr(d),ruleStack:f,occurrenceStack:g};p.push(V),p.push(o);var A=new _t({terminalType:y.separator}),Y=new ir({definition:[A].concat(y.definition),idx:y.idx}),k=y.definition.concat([Y],Nr(d)),x={idx:h,def:k,ruleStack:f,occurrenceStack:g};p.push(x)}else if(y instanceof ir){var V={idx:h,def:Nr(d),ruleStack:f,occurrenceStack:g};p.push(V),p.push(o);var Y=new ir({definition:y.definition,idx:y.idx}),k=y.definition.concat([Y],Nr(d)),x={idx:h,def:k,ruleStack:f,occurrenceStack:g};p.push(x)}else if(y instanceof cn)for(var U=y.definition.length-1;U>=0;U--){var M=y.definition[U],j={idx:h,def:M.definition.concat(Nr(d)),ruleStack:f,occurrenceStack:g};p.push(j),p.push(o)}else if(y instanceof Dr)p.push({idx:h,def:y.definition.concat(Nr(d)),ruleStack:f,occurrenceStack:g});else if(y instanceof bo)p.push(RI(y,h,f,g));else throw Error("non exhaustive match")}}return m}function RI(t,e,n,r){var i=gn(n);i.push(t.name);var s=gn(r);return s.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:s}}var np=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ht;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(Ht||(Ht={}));function SI(t){if(t instanceof Vr)return Ht.OPTION;if(t instanceof ir)return Ht.REPETITION;if(t instanceof yn)return Ht.REPETITION_MANDATORY;if(t instanceof bn)return Ht.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof ln)return Ht.REPETITION_WITH_SEPARATOR;if(t instanceof cn)return Ht.ALTERNATION;throw Error("non exhaustive match")}function WI(t,e,n,r,i,s){var o=Ru(t,e,n),a=ap(o)?nl:rl;return s(o,r,a,i)}function VI(t,e,n,r,i,s){var o=Su(t,e,i,n),a=ap(o)?nl:rl;return s(o[0],a,r)}function CI(t,e,n,r){var i=t.length,s=An(t,function(l){return An(l,function(c){return c.length===1})});if(e)return function(l){for(var c=et(l,function(I){return I.GATE}),m=0;m<i;m++){var p=t[m],u=p.length,d=c[m];if(d!==void 0&&d.call(this)===!1)continue;e:for(var h=0;h<u;h++){for(var f=p[h],g=f.length,y=0;y<g;y++){var Z=this.LA(y+1);if(n(Z,f[y])===!1)continue e}return m}}};if(s&&!r){var o=et(t,function(l){return fn(l)}),a=Mr(o,function(l,c,m){return lt(c,function(p){gt(l,p.tokenTypeIdx)||(l[p.tokenTypeIdx]=m),lt(p.categoryMatches,function(u){gt(l,u)||(l[u]=m)})}),l},[]);return function(){var l=this.LA(1);return a[l.tokenTypeIdx]}}else return function(){for(var l=0;l<i;l++){var c=t[l],m=c.length;e:for(var p=0;p<m;p++){for(var u=c[p],d=u.length,h=0;h<d;h++){var f=this.LA(h+1);if(n(f,u[h])===!1)continue e}return l}}}}function XI(t,e,n){var r=An(t,function(c){return c.length===1}),i=t.length;if(r&&!n){var s=fn(t);if(s.length===1&&Mt(s[0].categoryMatches)){var o=s[0],a=o.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}else{var l=Mr(s,function(c,m,p){return c[m.tokenTypeIdx]=!0,lt(m.categoryMatches,function(u){c[u]=!0}),c},[]);return function(){var c=this.LA(1);return l[c.tokenTypeIdx]===!0}}}else return function(){e:for(var c=0;c<i;c++){for(var m=t[c],p=m.length,u=0;u<p;u++){var d=this.LA(u+1);if(e(d,m[u])===!1)continue e}return!0}return!1}}var LI=function(t){np(e,t);function e(n,r,i){var s=t.call(this)||this;return s.topProd=n,s.targetOccurrence=r,s.targetProdType=i,s}return e.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},e.prototype.checkIsTarget=function(n,r,i,s){return n.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=i.concat(s),!0):!1},e.prototype.walkOption=function(n,r,i){this.checkIsTarget(n,Ht.OPTION,r,i)||t.prototype.walkOption.call(this,n,r,i)},e.prototype.walkAtLeastOne=function(n,r,i){this.checkIsTarget(n,Ht.REPETITION_MANDATORY,r,i)||t.prototype.walkOption.call(this,n,r,i)},e.prototype.walkAtLeastOneSep=function(n,r,i){this.checkIsTarget(n,Ht.REPETITION_MANDATORY_WITH_SEPARATOR,r,i)||t.prototype.walkOption.call(this,n,r,i)},e.prototype.walkMany=function(n,r,i){this.checkIsTarget(n,Ht.REPETITION,r,i)||t.prototype.walkOption.call(this,n,r,i)},e.prototype.walkManySep=function(n,r,i){this.checkIsTarget(n,Ht.REPETITION_WITH_SEPARATOR,r,i)||t.prototype.walkOption.call(this,n,r,i)},e}(ol),ip=function(t){np(e,t);function e(n,r,i){var s=t.call(this)||this;return s.targetOccurrence=n,s.targetProdType=r,s.targetRef=i,s.result=[],s}return e.prototype.checkIsTarget=function(n,r){n.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||n===this.targetRef)&&(this.result=n.definition)},e.prototype.visitOption=function(n){this.checkIsTarget(n,Ht.OPTION)},e.prototype.visitRepetition=function(n){this.checkIsTarget(n,Ht.REPETITION)},e.prototype.visitRepetitionMandatory=function(n){this.checkIsTarget(n,Ht.REPETITION_MANDATORY)},e.prototype.visitRepetitionMandatoryWithSeparator=function(n){this.checkIsTarget(n,Ht.REPETITION_MANDATORY_WITH_SEPARATOR)},e.prototype.visitRepetitionWithSeparator=function(n){this.checkIsTarget(n,Ht.REPETITION_WITH_SEPARATOR)},e.prototype.visitAlternation=function(n){this.checkIsTarget(n,Ht.ALTERNATION)},e}(Ji);function op(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=[];return e}function Gu(t){for(var e=[""],n=0;n<t.length;n++){for(var r=t[n],i=[],s=0;s<e.length;s++){var o=e[s];i.push(o+"_"+r.tokenTypeIdx);for(var a=0;a<r.categoryMatches.length;a++){var l="_"+r.categoryMatches[a];i.push(o+l)}}e=i}return e}function xI(t,e,n){for(var r=0;r<t.length;r++)if(r!==n)for(var i=t[r],s=0;s<e.length;s++){var o=e[s];if(i[o]===!0)return!1}return!0}function sp(t,e){for(var n=et(t,function(m){return vu([m],1)}),r=op(n.length),i=et(n,function(m){var p={};return lt(m,function(u){var d=Gu(u.partialPath);lt(d,function(h){p[h]=!0})}),p}),s=n,o=1;o<=e;o++){var a=s;s=op(a.length);for(var l=function(m){for(var p=a[m],u=0;u<p.length;u++){var d=p[u].partialPath,h=p[u].suffixDef,f=Gu(d),g=xI(i,f,m);if(g||Mt(h)||d.length===e){var y=r[m];if(Wu(y,d)===!1){y.push(d);for(var Z=0;Z<f.length;Z++){var I=f[Z];i[m][I]=!0}}}else{var G=vu(h,o+1,d);s[m]=s[m].concat(G),lt(G,function(R){var C=Gu(R.partialPath);lt(C,function(V){i[m][V]=!0})})}}},c=0;c<a.length;c++)l(c)}return r}function Ru(t,e,n,r){var i=new ip(t,Ht.ALTERNATION,r);return e.accept(i),sp(i.result,n)}function Su(t,e,n,r){var i=new ip(t,n);e.accept(i);var s=i.result,o=new LI(e,t,n),a=o.startWalking(),l=new Dr({definition:s}),c=new Dr({definition:a});return sp([l,c],r)}function Wu(t,e){e:for(var n=0;n<t.length;n++){var r=t[n];if(r.length===e.length){for(var i=0;i<r.length;i++){var s=e[i],o=r[i],a=s===o||o.categoryMatchesMap[s.tokenTypeIdx]!==void 0;if(a===!1)continue e}return!0}}return!1}function wI(t,e){return t.length<e.length&&An(t,function(n,r){var i=e[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}function ap(t){return An(t,function(e){return An(e,function(n){return An(n,function(r){return Mt(r.categoryMatches)})})})}var Vu=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function kI(t,e,n,r,i,s){var o=et(t,function(Z){return TI(Z,i)}),a=et(t,function(Z){return up(Z,Z,i)}),l=[],c=[],m=[];An(a,Mt)&&(l=et(t,function(Z){return HI(Z,i)}),c=et(t,function(Z){return KI(Z,e,r,i)}),m=PI(t,e,i));var p=_I(t,n,i),u=et(n,function(Z){return NI(Z,i)}),d=AI(t,i),h=DI(t,i),f=et(t,function(Z){return jI(Z,i)}),g=et(t,function(Z){return FI(Z,i)}),y=et(t,function(Z){return MI(Z,t,s,i)});return fn(o.concat(u,d,h,m,a,l,c,p,f,g,y))}function AI(t,e){var n=[];return lt(t,function(r){var i=new Iu("");r.accept(i);var s=et(i.result,function(o){return o.orgProd});n.push(et(s,function(o){return YI(r,o,e)}))}),fn(n)}function TI(t,e){var n=new UI;t.accept(n);var r=n.allProductions,i=gm(r,BI),s=kn(i,function(a){return a.length>1}),o=et(_r(s),function(a){var l=xn(a),c=e.buildDuplicateFoundError(t,a),m=Pn(l),p={message:c,type:Cr.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:m,occurrence:l.idx},u=lp(l);return u&&(p.parameter=u),p});return o}function BI(t){return Pn(t)+"_#_"+t.idx+"_#_"+lp(t)}function lp(t){return t instanceof _t?t.terminalType.name:t instanceof an?t.nonTerminalName:""}var UI=function(t){Vu(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.allProductions=[],n}return e.prototype.visitNonTerminal=function(n){this.allProductions.push(n)},e.prototype.visitOption=function(n){this.allProductions.push(n)},e.prototype.visitRepetitionWithSeparator=function(n){this.allProductions.push(n)},e.prototype.visitRepetitionMandatory=function(n){this.allProductions.push(n)},e.prototype.visitRepetitionMandatoryWithSeparator=function(n){this.allProductions.push(n)},e.prototype.visitRepetition=function(n){this.allProductions.push(n)},e.prototype.visitAlternation=function(n){this.allProductions.push(n)},e.prototype.visitTerminal=function(n){this.allProductions.push(n)},e}(Ji),Io=/^[a-zA-Z_]\w*$/,cp=new RegExp(Io.source.replace("^","^\\$"));function FI(t,e){var n=[],r=t.name;return r.match(Io)||n.push({message:e.buildInvalidRuleNameError({topLevelRule:t,expectedPattern:Io}),type:Cr.INVALID_RULE_NAME,ruleName:r}),n}function YI(t,e,n){var r=[],i;return e.name.match(cp)||(i=n.buildInvalidNestedRuleNameError(t,e),r.push({message:i,type:Cr.INVALID_NESTED_RULE_NAME,ruleName:t.name})),r}function NI(t,e){var n=[],r=t.name;return r.match(Io)||n.push({message:e.buildTokenNameError({tokenType:t,expectedPattern:Io}),type:Cr.INVALID_TOKEN_NAME}),n}function MI(t,e,n,r){var i=[],s=Mr(e,function(a,l){return l.name===t.name?a+1:a},0);if(s>1){var o=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:o,type:Cr.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function EI(t,e,n){var r=[],i;return Wr(e,t)||(i="Invalid rule override, rule: ->"+t+"<- cannot be overridden in the grammar: ->"+n+"<-as it is not defined in any of the super grammars ",r.push({message:i,type:Cr.INVALID_RULE_OVERRIDE,ruleName:t})),r}function up(t,e,n,r){r===void 0&&(r=[]);var i=[],s=ul(e.definition);if(Mt(s))return[];var o=t.name,a=Wr(s,t);a&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:Cr.LEFT_RECURSION,ruleName:o});var l=Oa(s,r.concat([t])),c=et(l,function(m){var p=gn(r);return p.push(m),up(t,m,n,p)});return i.concat(fn(c))}function ul(t){var e=[];if(Mt(t))return e;var n=xn(t);if(n instanceof an)e.push(n.referencedRule);else if(n instanceof Dr||n instanceof Vr||n instanceof yn||n instanceof bn||n instanceof ln||n instanceof ir)e=e.concat(ul(n.definition));else if(n instanceof cn)e=fn(et(n.definition,function(o){return ul(o.definition)}));else if(!(n instanceof _t))throw Error("non exhaustive match");var r=sl(n),i=t.length>1;if(r&&i){var s=Nr(t);return e.concat(ul(s))}else return e}var Cu=function(t){Vu(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.alternations=[],n}return e.prototype.visitAlternation=function(n){this.alternations.push(n)},e}(Ji);function HI(t,e){var n=new Cu;t.accept(n);var r=n.alternations,i=Mr(r,function(s,o){var a=ws(o.definition),l=et(a,function(c,m){var p=rp([c],[],null,1);return Mt(p)?{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:o,emptyChoiceIdx:m}),type:Cr.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:o.idx,alternative:m+1}:null});return s.concat(As(l))},[]);return i}function KI(t,e,n,r){var i=new Cu;t.accept(i);var s=i.alternations,o=n[t.name];o&&(s=fo(s,function(l){return o[Pn(l)+(l.idx===0?"":l.idx)]})),s=fo(s,function(l){return l.ignoreAmbiguities===!0});var a=Mr(s,function(l,c){var m=c.idx,p=c.maxLookahead||e,u=Ru(m,t,p,c),d=OI(u,c,t,r),h=zI(u,c,t,r);return l.concat(d,h)},[]);return a}var JI=function(t){Vu(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.allProductions=[],n}return e.prototype.visitRepetitionWithSeparator=function(n){this.allProductions.push(n)},e.prototype.visitRepetitionMandatory=function(n){this.allProductions.push(n)},e.prototype.visitRepetitionMandatoryWithSeparator=function(n){this.allProductions.push(n)},e.prototype.visitRepetition=function(n){this.allProductions.push(n)},e}(Ji);function jI(t,e){var n=new Cu;t.accept(n);var r=n.alternations,i=Mr(r,function(s,o){return o.definition.length>255&&s.push({message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:o}),type:Cr.TOO_MANY_ALTS,ruleName:t.name,occurrence:o.idx}),s},[]);return i}function PI(t,e,n){var r=[];return lt(t,function(i){var s=new JI;i.accept(s);var o=s.allProductions;lt(o,function(a){var l=SI(a),c=a.maxLookahead||e,m=a.idx,p=Su(m,i,l,c),u=p[0];if(Mt(fn(u))){var d=n.buildEmptyRepetitionError({topLevelRule:i,repetition:a});r.push({message:d,type:Cr.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function OI(t,e,n,r){var i=[],s=Mr(t,function(a,l,c){return e.definition[c].ignoreAmbiguities===!0||lt(l,function(m){var p=[c];lt(t,function(u,d){c!==d&&Wu(u,m)&&e.definition[d].ignoreAmbiguities!==!0&&p.push(d)}),p.length>1&&!Wu(i,m)&&(i.push(m),a.push({alts:p,path:m}))}),a},[]),o=et(s,function(a){var l=et(a.alts,function(m){return m+1}),c=r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:l,prefixPath:a.path});return{message:c,type:Cr.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:[a.alts]}});return o}function zI(t,e,n,r){var i=[],s=Mr(t,function(o,a,l){var c=et(a,function(m){return{idx:l,path:m}});return o.concat(c)},[]);return lt(s,function(o){var a=e.definition[o.idx];if(a.ignoreAmbiguities!==!0){var l=o.idx,c=o.path,m=u2(s,function(u){return e.definition[u.idx].ignoreAmbiguities!==!0&&u.idx<l&&wI(u.path,c)}),p=et(m,function(u){var d=[u.idx+1,l+1],h=e.idx===0?"":e.idx,f=r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:d,prefixPath:u.path});return{message:f,type:Cr.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:h,alternatives:d}});i=i.concat(p)}}),i}function _I(t,e,n){var r=[],i=et(e,function(s){return s.name});return lt(t,function(s){var o=s.name;if(Wr(i,o)){var a=n.buildNamespaceConflictError(s);r.push({message:a,type:Cr.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:o})}}),r}function DI(t,e){var n=[];return lt(t,function(r){var i=new Iu("");r.accept(i);var s=gm(i.result,function(a){return a.name}),o=kn(s,function(a){return a.length>1});lt(_r(o),function(a){var l=et(a,function(m){return m.orgProd}),c=e.buildDuplicateNestedRuleNameError(r,l);n.push({message:c,type:Cr.DUPLICATE_NESTED_NAME,ruleName:r.name})})}),n}var Xu={buildMismatchTokenMessage:function(t){var e=t.expected,n=t.actual;t.previous,t.ruleName;var r=Fm(e),i=r?"--> "+yo(e)+" <--":"token of type --> "+e.name+" <--",s="Expecting "+i+" but found --> '"+n.image+"' <--";return s},buildNotAllInputParsedMessage:function(t){var e=t.firstRedundant;return t.ruleName,"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage:function(t){var e=t.expectedPathsPerAlt,n=t.actual;t.previous;var r=t.customUserDescription;t.ruleName;var i="Expecting: ",s=xn(n).image,o=`
but found: '`+s+"'";if(r)return i+r+o;var a=Mr(e,function(p,u){return p.concat(u)},[]),l=et(a,function(p){return"["+et(p,function(u){return yo(u)}).join(", ")+"]"}),c=et(l,function(p,u){return"  "+(u+1)+". "+p}),m=`one of these possible Token sequences:
`+c.join(`
`);return i+m+o},buildEarlyExitMessage:function(t){var e=t.expectedIterationPaths,n=t.actual,r=t.customUserDescription;t.ruleName;var i="Expecting: ",s=xn(n).image,o=`
but found: '`+s+"'";if(r)return i+r+o;var a=et(e,function(c){return"["+et(c,function(m){return yo(m)}).join(",")+"]"}),l=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+a.join(" ,")+">");return i+l+o}};Object.freeze(Xu);var dp={buildRuleNotFoundError:function(t,e){var n="Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-";return n}},dl={buildDuplicateFoundError:function(t,e){function n(m){return m instanceof _t?m.terminalType.name:m instanceof an?m.nonTerminalName:""}var r=t.name,i=xn(e),s=i.idx,o=Pn(i),a=n(i),l=s>0,c="->"+o+(l?s:"")+"<- "+(a?"with argument: ->"+a+"<-":"")+`
                  appears more than once (`+e.length+" times) in the top level rule: ->"+r+`<-.                  
                  For further details see: https://sap.github.io/chevrotain/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,`
`),c},buildInvalidNestedRuleNameError:function(t,e){var n="Invalid nested rule name: ->"+e.name+"<- inside rule: ->"+t.name+`<-
`+("it must match the pattern: ->"+cp.toString()+`<-.
`)+"Note that this means a nested rule name must start with the '$'(dollar) sign.";return n},buildDuplicateNestedRuleNameError:function(t,e){var n=xn(e).name,r="Duplicate nested rule name: ->"+n+"<- inside rule: ->"+t.name+`<-
A nested name must be unique in the scope of a top level grammar rule.`;return r},buildNamespaceConflictError:function(t){var e=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+t.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return e},buildAlternationPrefixAmbiguityError:function(t){var e=et(t.prefixPath,function(i){return yo(i)}).join(", "),n=t.alternation.idx===0?"":t.alternation.idx,r="Ambiguous alternatives: <"+t.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+n+"> inside <"+t.topLevelRule.name+`> Rule,
`)+("<"+e+`> may appears as a prefix path in all these alternatives.
`)+`See: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return r},buildAlternationAmbiguityError:function(t){var e=et(t.prefixPath,function(i){return yo(i)}).join(", "),n=t.alternation.idx===0?"":t.alternation.idx,r="Ambiguous Alternatives Detected: <"+t.ambiguityIndices.join(" ,")+"> in <OR"+n+">"+(" inside <"+t.topLevelRule.name+`> Rule,
`)+("<"+e+`> may appears as a prefix path in all these alternatives.
`);return r=r+`See: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError:function(t){var e=Pn(t.repetition);t.repetition.idx!==0&&(e+=t.repetition.idx);var n="The repetition <"+e+"> within Rule <"+t.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return n},buildTokenNameError:function(t){var e=t.tokenType.name,n="Invalid Grammar Token name: ->"+e+"<- it must match the pattern: ->"+t.expectedPattern.toString()+"<-";return n},buildEmptyAlternationError:function(t){var e="Ambiguous empty alternative: <"+(t.emptyChoiceIdx+1)+">"+(" in <OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return e},buildTooManyAlternativesError:function(t){var e=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+`> Rule.
 has `+(t.alternation.definition.length+1)+" alternatives.");return e},buildLeftRecursionError:function(t){var e=t.topLevelRule.name,n=et(t.leftRecursionPath,function(s){return s.name}),r=e+" --> "+n.concat([e]).join(" --> "),i=`Left Recursion found in grammar.
`+("rule: <"+e+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is: 
 `+r+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return i},buildInvalidRuleNameError:function(t){var e=t.topLevelRule.name,n=t.expectedPattern.toString(),r="Invalid grammar rule name: ->"+e+"<- it must match the pattern: ->"+n+"<-";return r},buildDuplicateRuleNameError:function(t){var e;t.topLevelRule instanceof bo?e=t.topLevelRule.name:e=t.topLevelRule;var n="Duplicate definition, rule: ->"+e+"<- is already defined in the grammar: ->"+t.grammarName+"<-";return n}},QI=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function qI(t,e){var n=new $I(t,e);return n.resolveRefs(),n.errors}var $I=function(t){QI(e,t);function e(n,r){var i=t.call(this)||this;return i.nameToTopRule=n,i.errMsgProvider=r,i.errors=[],i}return e.prototype.resolveRefs=function(){var n=this;lt(_r(this.nameToTopRule),function(r){n.currTopLevel=r,r.accept(n)})},e.prototype.visitNonTerminal=function(n){var r=this.nameToTopRule[n.nonTerminalName];if(r)n.referencedRule=r;else{var i=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,n);this.errors.push({message:i,type:Cr.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:n.nonTerminalName})}},e}(Ji);function hp(t){t=za(t,{errMsgProvider:dp});var e={};return lt(t.rules,function(n){e[n.name]=n}),qI(e,t.errMsgProvider)}function mp(t){return t=za(t,{errMsgProvider:dl,ignoredIssues:{}}),kI(t.rules,t.maxLookahead,t.tokenTypes,t.ignoredIssues,t.errMsgProvider,t.grammarName)}function ev(t){lt(t.rules,function(e){var n=new zm;e.accept(n),lt(n.dslMethods,function(r){lt(r,function(i,s){i.idx=s+1})})})}var pp="MismatchedTokenException",fp="NoViableAltException",gp="EarlyExitException",yp="NotAllInputParsedException",bp=[pp,fp,gp,yp];Object.freeze(bp);function Ks(t){return Wr(bp,t.name)}function hl(t,e,n){this.name=pp,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}hl.prototype=Error.prototype;function Lu(t,e,n){this.name=fp,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}Lu.prototype=Error.prototype;function xu(t,e){this.name=yp,this.message=t,this.token=e,this.resyncedTokens=[]}xu.prototype=Error.prototype;function wu(t,e,n){this.name=gp,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}wu.prototype=Error.prototype;var ku={},Zp="InRuleRecoveryException";function Ip(t){this.name=Zp,this.message=t}Ip.prototype=Error.prototype;var tv=function(){function t(){}return t.prototype.initRecoverable=function(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=gt(e,"recoveryEnabled")?e.recoveryEnabled:Zn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=rv)},t.prototype.getTokenToInsert=function(e){var n=il(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n},t.prototype.canTokenTypeBeInsertedInRecovery=function(e){return!0},t.prototype.tryInRepetitionRecovery=function(e,n,r,i){for(var s=this,o=this.findReSyncTokenType(),a=this.exportLexerState(),l=[],c=!1,m=this.LA(1),p=this.LA(1),u=function(){var d=s.LA(0),h=s.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:m,previous:d,ruleName:s.getCurrRuleFullName()}),f=new hl(h,m,s.LA(0));f.resyncedTokens=ws(l),s.SAVE_ERROR(f)};!c;)if(this.tokenMatcher(p,i)){u();return}else if(r.call(this)){u(),e.apply(this,n);return}else this.tokenMatcher(p,o)?c=!0:(p=this.SKIP_TOKEN(),this.addToResyncTokens(p,l));this.importLexerState(a)},t.prototype.shouldInRepetitionRecoveryBeTried=function(e,n,r){return!(r===!1||e===void 0||n===void 0||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))},t.prototype.getFollowsForInRuleRecovery=function(e,n){var r=this.getCurrentGrammarPath(e,n),i=this.getNextPossibleTokenTypes(r);return i},t.prototype.tryInRuleRecovery=function(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n)){var r=this.getTokenToInsert(e);return r}if(this.canRecoverWithSingleTokenDeletion(e)){var i=this.SKIP_TOKEN();return this.consumeToken(),i}throw new Ip("sad sad panda")},t.prototype.canPerformInRuleRecovery=function(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)},t.prototype.canRecoverWithSingleTokenInsertion=function(e,n){var r=this;if(!this.canTokenTypeBeInsertedInRecovery(e)||Mt(n))return!1;var i=this.LA(1),s=Eo(n,function(o){return r.tokenMatcher(i,o)})!==void 0;return s},t.prototype.canRecoverWithSingleTokenDeletion=function(e){var n=this.tokenMatcher(this.LA(2),e);return n},t.prototype.isInCurrentRuleReSyncSet=function(e){var n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return Wr(r,e)},t.prototype.findReSyncTokenType=function(){for(var e=this.flattenFollowSet(),n=this.LA(1),r=2;;){var i=n.tokenType;if(Wr(e,i))return i;n=this.LA(r),r++}},t.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return ku;var e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}},t.prototype.buildFullFollowKeyStack=function(){var e=this,n=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return Mt(this.LAST_EXPLICIT_RULE_STACK)||(n=et(this.LAST_EXPLICIT_RULE_STACK,function(i){return e.RULE_STACK[i]}),r=et(this.LAST_EXPLICIT_RULE_STACK,function(i){return e.RULE_OCCURRENCE_STACK[i]})),et(n,function(i,s){return s===0?ku:{ruleName:e.shortRuleNameToFullName(i),idxInCallingRule:r[s],inRule:e.shortRuleNameToFullName(n[s-1])}})},t.prototype.flattenFollowSet=function(){var e=this,n=et(this.buildFullFollowKeyStack(),function(r){return e.getFollowSetFromFollowKey(r)});return fn(n)},t.prototype.getFollowSetFromFollowKey=function(e){if(e===ku)return[Ki];var n=e.ruleName+e.idxInCallingRule+_m+e.inRule;return this.resyncFollows[n]},t.prototype.addToResyncTokens=function(e,n){return this.tokenMatcher(e,Ki)||n.push(e),n},t.prototype.reSyncTo=function(e){for(var n=[],r=this.LA(1);this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return ws(n)},t.prototype.attemptInRepetitionRecovery=function(e,n,r,i,s,o,a){},t.prototype.getCurrentGrammarPath=function(e,n){var r=this.getHumanReadableRuleStack(),i=gn(this.RULE_OCCURRENCE_STACK),s={ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:n};return s},t.prototype.getHumanReadableRuleStack=function(){var e=this;return Mt(this.LAST_EXPLICIT_RULE_STACK)?et(this.RULE_STACK,function(n){return e.shortRuleNameToFullName(n)}):et(this.LAST_EXPLICIT_RULE_STACK,function(n){return e.shortRuleNameToFullName(e.RULE_STACK[n])})},t}();function rv(t,e,n,r,i,s,o){var a=this.getKeyForAutomaticLookahead(r,i),l=this.firstAfterRepMap[a];if(l===void 0){var c=this.getCurrRuleFullName(),m=this.getGAstProductions()[c],p=new s(m,i);l=p.startWalking(),this.firstAfterRepMap[a]=l}var u=l.token,d=l.occurrence,h=l.isEndOfRule;this.RULE_STACK.length===1&&h&&u===void 0&&(u=Ki,d=1),this.shouldInRepetitionRecoveryBeTried(u,d,o)&&this.tryInRepetitionRecovery(t,e,n,u)}var nv=function(){function t(){}return t.prototype.initLooksAhead=function(e){this.dynamicTokensEnabled=gt(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Zn.dynamicTokensEnabled,this.maxLookahead=gt(e,"maxLookahead")?e.maxLookahead:Zn.maxLookahead,this.lookAheadFuncsCache=Zm()?new Map:[],Zm()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},t.prototype.preComputeLookaheadFunctions=function(e){var n=this;lt(e,function(r){n.TRACE_INIT(r.name+" Rule Lookahead",function(){var i=oI(r),s=i.alternation,o=i.repetition,a=i.option,l=i.repetitionMandatory,c=i.repetitionMandatoryWithSeparator,m=i.repetitionWithSeparator;lt(s,function(p){var u=p.idx===0?"":p.idx;n.TRACE_INIT(""+Pn(p)+u,function(){var d=WI(p.idx,r,p.maxLookahead||n.maxLookahead,p.hasPredicates,n.dynamicTokensEnabled,n.lookAheadBuilderForAlternatives),h=Hs(n.fullRuleNameToShort[r.name],Ko,p.idx);n.setLaFuncCache(h,d)})}),lt(o,function(p){n.computeLookaheadFunc(r,p.idx,Ns,Ht.REPETITION,p.maxLookahead,Pn(p))}),lt(a,function(p){n.computeLookaheadFunc(r,p.idx,ll,Ht.OPTION,p.maxLookahead,Pn(p))}),lt(l,function(p){n.computeLookaheadFunc(r,p.idx,Ms,Ht.REPETITION_MANDATORY,p.maxLookahead,Pn(p))}),lt(c,function(p){n.computeLookaheadFunc(r,p.idx,Jo,Ht.REPETITION_MANDATORY_WITH_SEPARATOR,p.maxLookahead,Pn(p))}),lt(m,function(p){n.computeLookaheadFunc(r,p.idx,Es,Ht.REPETITION_WITH_SEPARATOR,p.maxLookahead,Pn(p))})})})},t.prototype.computeLookaheadFunc=function(e,n,r,i,s,o){var a=this;this.TRACE_INIT(""+o+(n===0?"":n),function(){var l=VI(n,e,s||a.maxLookahead,a.dynamicTokensEnabled,i,a.lookAheadBuilderForOptional),c=Hs(a.fullRuleNameToShort[e.name],r,n);a.setLaFuncCache(c,l)})},t.prototype.lookAheadBuilderForOptional=function(e,n,r){return XI(e,n,r)},t.prototype.lookAheadBuilderForAlternatives=function(e,n,r,i){return CI(e,n,r,i)},t.prototype.getKeyForAutomaticLookahead=function(e,n){var r=this.getLastExplicitRuleShortName();return Hs(r,e,n)},t.prototype.getLaFuncFromCache=function(e){},t.prototype.getLaFuncFromMap=function(e){return this.lookAheadFuncsCache.get(e)},t.prototype.getLaFuncFromObj=function(e){return this.lookAheadFuncsCache[e]},t.prototype.setLaFuncCache=function(e,n){},t.prototype.setLaFuncCacheUsingMap=function(e,n){this.lookAheadFuncsCache.set(e,n)},t.prototype.setLaFuncUsingObj=function(e,n){this.lookAheadFuncsCache[e]=n},t}();function iv(t){return ml(t.constructor)}var ov=/^\s*function\s*(\S*)\s*\(/,vp="name";function ml(t){var e=t.name;if(e)return e;var n=t.toString().match(ov)[1];return n}function Gp(t,e){var n=Object.getOwnPropertyDescriptor(t,vp);return wn(n)||n.configurable?(Object.defineProperty(t,vp,{enumerable:!1,configurable:!0,writable:!1,value:e}),!0):!1}function sv(t,e){for(var n=Xi(t),r=n.length,i=0;i<r;i++)for(var s=n[i],o=t[s],a=o.length,l=0;l<a;l++){var c=o[l];c.tokenTypeIdx===void 0&&(c.fullName!==void 0?this[c.fullName](c.children,e):this[c.name](c.children,e))}}function av(t,e){var n=function(){};Gp(n,t+"BaseSemantics");var r={visit:function(i,s){if(Kn(i)&&(i=i[0]),!wn(i))return i.fullName!==void 0?this[i.fullName](i.children,s):this[i.name](i.children,s)},validateVisitor:function(){var i=cv(this,e);if(!Mt(i)){var s=et(i,function(o){return o.msg});throw Error("Errors Detected in CST Visitor <"+ml(this.constructor)+`>:
	`+(""+s.join(`

`).replace(/\n/g,`
	`)))}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}function lv(t,e,n){var r=function(){};Gp(r,t+"BaseSemanticsWithDefaults");var i=Object.create(n.prototype);return lt(e,function(s){i[s]=sv}),r.prototype=i,r.prototype.constructor=r,r}var pl;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(pl||(pl={}));function cv(t,e){var n=uv(t,e),r=hv(t,e);return n.concat(r)}function uv(t,e){var n=et(e,function(r){if(!Ei(t[r]))return{msg:"Missing visitor method: <"+r+"> on "+ml(t.constructor)+" CST Visitor.",type:pl.MISSING_METHOD,methodName:r}});return As(n)}var dv=["constructor","visit","validateVisitor"];function hv(t,e){var n=[];for(var r in t)Io.test(r)&&Ei(t[r])&&!Wr(dv,r)&&!Wr(e,r)&&n.push({msg:"Redundant visitor method: <"+r+"> on "+ml(t.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`+("For utility methods on visitor classes use methods names that do not match /"+Io.source+"/."),type:pl.REDUNDANT_METHOD,methodName:r});return n}var mv=function(){function t(){}return t.prototype.initTreeBuilder=function(e){if(this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.outputCst=gt(e,"outputCst")?e.outputCst:Zn.outputCst,this.nodeLocationTracking=gt(e,"nodeLocationTracking")?e.nodeLocationTracking:Zn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=wr,this.cstFinallyStateUpdate=wr,this.cstPostTerminal=wr,this.cstPostNonTerminal=wr,this.cstPostRule=wr,this.getLastExplicitRuleShortName=this.getLastExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleShortName=this.getPreviousExplicitRuleShortNameNoCst,this.getLastExplicitRuleOccurrenceIndex=this.getLastExplicitRuleOccurrenceIndexNoCst,this.manyInternal=this.manyInternalNoCst,this.orInternal=this.orInternalNoCst,this.optionInternal=this.optionInternalNoCst,this.atLeastOneInternal=this.atLeastOneInternalNoCst,this.manySepFirstInternal=this.manySepFirstInternalNoCst,this.atLeastOneSepFirstInternal=this.atLeastOneSepFirstInternalNoCst;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=qm,this.setNodeLocationFromNode=qm,this.cstPostRule=wr,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=wr,this.setNodeLocationFromNode=wr,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Qm,this.setNodeLocationFromNode=Qm,this.cstPostRule=wr,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=wr,this.setNodeLocationFromNode=wr,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=wr,this.setNodeLocationFromNode=wr,this.cstPostRule=wr,this.setInitialNodeLocation=wr;else throw Error('Invalid <nodeLocationTracking> config option: "'+e.nodeLocationTracking+'"')},t.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(e){e.location={startOffset:NaN,endOffset:NaN}},t.prototype.setInitialNodeLocationOnlyOffsetRegular=function(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},t.prototype.setInitialNodeLocationFullRecovery=function(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.setInitialNodeLocationFullRegular=function(e){var n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.cstNestedInvocationStateUpdate=function(e,n){var r={name:e,fullName:this.shortRuleNameToFull[this.getLastExplicitRuleShortName()]+e,children:{}};this.setInitialNodeLocation(r),this.CST_STACK.push(r)},t.prototype.cstInvocationStateUpdate=function(e,n){this.LAST_EXPLICIT_RULE_STACK.push(this.RULE_STACK.length-1);var r={name:e,children:{}};this.setInitialNodeLocation(r),this.CST_STACK.push(r)},t.prototype.cstFinallyStateUpdate=function(){this.LAST_EXPLICIT_RULE_STACK.pop(),this.CST_STACK.pop()},t.prototype.cstNestedFinallyStateUpdate=function(){var e=this.CST_STACK.pop();this.cstPostRule(e)},t.prototype.cstPostRuleFull=function(e){var n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)},t.prototype.cstPostRuleOnlyOffset=function(e){var n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN},t.prototype.cstPostTerminal=function(e,n){var r=this.CST_STACK[this.CST_STACK.length-1];yI(r,n,e),this.setNodeLocationFromToken(r.location,n)},t.prototype.cstPostNonTerminal=function(e,n){if(this.isBackTracking()!==!0){var r=this.CST_STACK[this.CST_STACK.length-1];$m(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}},t.prototype.getBaseCstVisitorConstructor=function(){if(wn(this.baseCstVisitorConstructor)){var e=av(this.className,this.allRuleNames);return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor},t.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(wn(this.baseCstVisitorWithDefaultsConstructor)){var e=lv(this.className,this.allRuleNames,this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor},t.prototype.nestedRuleBeforeClause=function(e,n){var r;if(e.NAME!==void 0)return r=e.NAME,this.nestedRuleInvocationStateUpdate(r,n),r},t.prototype.nestedAltBeforeClause=function(e,n,r,i){var s=this.getLastExplicitRuleShortName(),o=Dm(s,r,n,i),a;if(e.NAME!==void 0)return a=e.NAME,this.nestedRuleInvocationStateUpdate(a,o),{shortName:o,nestedName:a}},t.prototype.nestedRuleFinallyClause=function(e,n){var r=this.CST_STACK,i=r[r.length-1];this.nestedRuleFinallyStateUpdate();var s=r[r.length-1];$m(s,n,i),this.setNodeLocationFromNode(s.location,i.location)},t.prototype.getLastExplicitRuleShortName=function(){var e=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_STACK[e]},t.prototype.getLastExplicitRuleShortNameNoCst=function(){var e=this.RULE_STACK;return e[e.length-1]},t.prototype.getPreviousExplicitRuleShortName=function(){var e=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_STACK[e]},t.prototype.getPreviousExplicitRuleShortNameNoCst=function(){var e=this.RULE_STACK;return e[e.length-2]},t.prototype.getLastExplicitRuleOccurrenceIndex=function(){var e=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_OCCURRENCE_STACK[e]},t.prototype.getLastExplicitRuleOccurrenceIndexNoCst=function(){var e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]},t.prototype.nestedRuleInvocationStateUpdate=function(e,n){this.RULE_OCCURRENCE_STACK.push(1),this.RULE_STACK.push(n),this.cstNestedInvocationStateUpdate(e,n)},t.prototype.nestedRuleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstNestedFinallyStateUpdate()},t}(),pv=function(){function t(){}return t.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(t.prototype,"input",{get:function(){return this.tokVector},set:function(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length},enumerable:!0,configurable:!0}),t.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):yl},t.prototype.LA=function(e){var n=this.currIdx+e;return n<0||this.tokVectorLength<=n?yl:this.tokVector[n]},t.prototype.consumeToken=function(){this.currIdx++},t.prototype.exportLexerState=function(){return this.currIdx},t.prototype.importLexerState=function(e){this.currIdx=e},t.prototype.resetLexerState=function(){this.currIdx=-1},t.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},t.prototype.getLexerPosition=function(){return this.exportLexerState()},t}(),fv=function(){function t(){}return t.prototype.ACTION=function(e){return e.call(this)},t.prototype.consume=function(e,n,r){return this.consumeInternal(n,e,r)},t.prototype.subrule=function(e,n,r){return this.subruleInternal(n,e,r)},t.prototype.option=function(e,n){return this.optionInternal(n,e)},t.prototype.or=function(e,n){return this.orInternal(n,e)},t.prototype.many=function(e,n){return this.manyInternal(e,n)},t.prototype.atLeastOne=function(e,n){return this.atLeastOneInternal(e,n)},t.prototype.CONSUME=function(e,n){return this.consumeInternal(e,0,n)},t.prototype.CONSUME1=function(e,n){return this.consumeInternal(e,1,n)},t.prototype.CONSUME2=function(e,n){return this.consumeInternal(e,2,n)},t.prototype.CONSUME3=function(e,n){return this.consumeInternal(e,3,n)},t.prototype.CONSUME4=function(e,n){return this.consumeInternal(e,4,n)},t.prototype.CONSUME5=function(e,n){return this.consumeInternal(e,5,n)},t.prototype.CONSUME6=function(e,n){return this.consumeInternal(e,6,n)},t.prototype.CONSUME7=function(e,n){return this.consumeInternal(e,7,n)},t.prototype.CONSUME8=function(e,n){return this.consumeInternal(e,8,n)},t.prototype.CONSUME9=function(e,n){return this.consumeInternal(e,9,n)},t.prototype.SUBRULE=function(e,n){return this.subruleInternal(e,0,n)},t.prototype.SUBRULE1=function(e,n){return this.subruleInternal(e,1,n)},t.prototype.SUBRULE2=function(e,n){return this.subruleInternal(e,2,n)},t.prototype.SUBRULE3=function(e,n){return this.subruleInternal(e,3,n)},t.prototype.SUBRULE4=function(e,n){return this.subruleInternal(e,4,n)},t.prototype.SUBRULE5=function(e,n){return this.subruleInternal(e,5,n)},t.prototype.SUBRULE6=function(e,n){return this.subruleInternal(e,6,n)},t.prototype.SUBRULE7=function(e,n){return this.subruleInternal(e,7,n)},t.prototype.SUBRULE8=function(e,n){return this.subruleInternal(e,8,n)},t.prototype.SUBRULE9=function(e,n){return this.subruleInternal(e,9,n)},t.prototype.OPTION=function(e){return this.optionInternal(e,0)},t.prototype.OPTION1=function(e){return this.optionInternal(e,1)},t.prototype.OPTION2=function(e){return this.optionInternal(e,2)},t.prototype.OPTION3=function(e){return this.optionInternal(e,3)},t.prototype.OPTION4=function(e){return this.optionInternal(e,4)},t.prototype.OPTION5=function(e){return this.optionInternal(e,5)},t.prototype.OPTION6=function(e){return this.optionInternal(e,6)},t.prototype.OPTION7=function(e){return this.optionInternal(e,7)},t.prototype.OPTION8=function(e){return this.optionInternal(e,8)},t.prototype.OPTION9=function(e){return this.optionInternal(e,9)},t.prototype.OR=function(e){return this.orInternal(e,0)},t.prototype.OR1=function(e){return this.orInternal(e,1)},t.prototype.OR2=function(e){return this.orInternal(e,2)},t.prototype.OR3=function(e){return this.orInternal(e,3)},t.prototype.OR4=function(e){return this.orInternal(e,4)},t.prototype.OR5=function(e){return this.orInternal(e,5)},t.prototype.OR6=function(e){return this.orInternal(e,6)},t.prototype.OR7=function(e){return this.orInternal(e,7)},t.prototype.OR8=function(e){return this.orInternal(e,8)},t.prototype.OR9=function(e){return this.orInternal(e,9)},t.prototype.MANY=function(e){this.manyInternal(0,e)},t.prototype.MANY1=function(e){this.manyInternal(1,e)},t.prototype.MANY2=function(e){this.manyInternal(2,e)},t.prototype.MANY3=function(e){this.manyInternal(3,e)},t.prototype.MANY4=function(e){this.manyInternal(4,e)},t.prototype.MANY5=function(e){this.manyInternal(5,e)},t.prototype.MANY6=function(e){this.manyInternal(6,e)},t.prototype.MANY7=function(e){this.manyInternal(7,e)},t.prototype.MANY8=function(e){this.manyInternal(8,e)},t.prototype.MANY9=function(e){this.manyInternal(9,e)},t.prototype.MANY_SEP=function(e){this.manySepFirstInternal(0,e)},t.prototype.MANY_SEP1=function(e){this.manySepFirstInternal(1,e)},t.prototype.MANY_SEP2=function(e){this.manySepFirstInternal(2,e)},t.prototype.MANY_SEP3=function(e){this.manySepFirstInternal(3,e)},t.prototype.MANY_SEP4=function(e){this.manySepFirstInternal(4,e)},t.prototype.MANY_SEP5=function(e){this.manySepFirstInternal(5,e)},t.prototype.MANY_SEP6=function(e){this.manySepFirstInternal(6,e)},t.prototype.MANY_SEP7=function(e){this.manySepFirstInternal(7,e)},t.prototype.MANY_SEP8=function(e){this.manySepFirstInternal(8,e)},t.prototype.MANY_SEP9=function(e){this.manySepFirstInternal(9,e)},t.prototype.AT_LEAST_ONE=function(e){this.atLeastOneInternal(0,e)},t.prototype.AT_LEAST_ONE1=function(e){return this.atLeastOneInternal(1,e)},t.prototype.AT_LEAST_ONE2=function(e){this.atLeastOneInternal(2,e)},t.prototype.AT_LEAST_ONE3=function(e){this.atLeastOneInternal(3,e)},t.prototype.AT_LEAST_ONE4=function(e){this.atLeastOneInternal(4,e)},t.prototype.AT_LEAST_ONE5=function(e){this.atLeastOneInternal(5,e)},t.prototype.AT_LEAST_ONE6=function(e){this.atLeastOneInternal(6,e)},t.prototype.AT_LEAST_ONE7=function(e){this.atLeastOneInternal(7,e)},t.prototype.AT_LEAST_ONE8=function(e){this.atLeastOneInternal(8,e)},t.prototype.AT_LEAST_ONE9=function(e){this.atLeastOneInternal(9,e)},t.prototype.AT_LEAST_ONE_SEP=function(e){this.atLeastOneSepFirstInternal(0,e)},t.prototype.AT_LEAST_ONE_SEP1=function(e){this.atLeastOneSepFirstInternal(1,e)},t.prototype.AT_LEAST_ONE_SEP2=function(e){this.atLeastOneSepFirstInternal(2,e)},t.prototype.AT_LEAST_ONE_SEP3=function(e){this.atLeastOneSepFirstInternal(3,e)},t.prototype.AT_LEAST_ONE_SEP4=function(e){this.atLeastOneSepFirstInternal(4,e)},t.prototype.AT_LEAST_ONE_SEP5=function(e){this.atLeastOneSepFirstInternal(5,e)},t.prototype.AT_LEAST_ONE_SEP6=function(e){this.atLeastOneSepFirstInternal(6,e)},t.prototype.AT_LEAST_ONE_SEP7=function(e){this.atLeastOneSepFirstInternal(7,e)},t.prototype.AT_LEAST_ONE_SEP8=function(e){this.atLeastOneSepFirstInternal(8,e)},t.prototype.AT_LEAST_ONE_SEP9=function(e){this.atLeastOneSepFirstInternal(9,e)},t.prototype.RULE=function(e,n,r){if(r===void 0&&(r=bl),Wr(this.definedRulesNames,e)){var i=dl.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),s={message:i,type:Cr.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(s)}this.definedRulesNames.push(e);var o=this.defineRule(e,n,r);return this[e]=o,o},t.prototype.OVERRIDE_RULE=function(e,n,r){r===void 0&&(r=bl);var i=[];i=i.concat(EI(e,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,i);var s=this.defineRule(e,n,r);return this[e]=s,s},t.prototype.BACKTRACK=function(e,n){return function(){this.isBackTrackingStack.push(1);var r=this.saveRecogState();try{return e.apply(this,n),!0}catch(i){if(Ks(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}},t.prototype.getGAstProductions=function(){return this.gastProductionsCache},t.prototype.getSerializedGastProductions=function(){return Pm(_r(this.gastProductionsCache))},t}(),gv=function(){function t(){}return t.prototype.initRecognizerEngine=function(e,n){if(this.className=iv(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=nl,this.definedRulesNames=[],this.tokensMap={},this.allRuleNames=[],this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},gt(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Kn(e)){if(Mt(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Kn(e))this.tokensMap=Mr(e,function(o,a){return o[a.name]=a,o},{});else if(gt(e,"modes")&&An(fn(_r(e.modes)),Q2)){var r=fn(_r(e.modes)),i=du(r);this.tokensMap=Mr(i,function(o,a){return o[a.name]=a,o},{})}else if(hu(e))this.tokensMap=ks(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Ki;var s=An(_r(e),function(o){return Mt(o.categoryMatches)});this.tokenMatcher=s?nl:rl,Bs(_r(this.tokensMap))},t.prototype.defineRule=function(e,n,r){if(this.selfAnalysisDone)throw Error("Grammar rule <"+e+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var i=gt(r,"resyncEnabled")?r.resyncEnabled:bl.resyncEnabled,s=gt(r,"recoveryValueFunc")?r.recoveryValueFunc:bl.recoveryValueFunc,o=this.ruleShortNameIdx<<mI+ji;this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o;function a(m){try{if(this.outputCst===!0){n.apply(this,m);var p=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(p),p}else return n.apply(this,m)}catch(u){return this.invokeRuleCatch(u,i,s)}finally{this.ruleFinallyStateUpdate()}}var l;l=function(m,p){return m===void 0&&(m=0),this.ruleInvocationStateUpdate(o,e,m),a.call(this,p)};var c="ruleName";return l[c]=e,l.originalGrammarAction=n,l},t.prototype.invokeRuleCatch=function(e,n,r){var i=this.RULE_STACK.length===1,s=n&&!this.isBackTracking()&&this.recoveryEnabled;if(Ks(e)){var o=e;if(s){var a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))if(o.resyncedTokens=this.reSyncTo(a),this.outputCst){var l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}else return r();else{if(this.outputCst){var l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,o.partialCstResult=l}throw o}}else{if(i)return this.moveToTerminatedState(),r();throw o}}else throw e},t.prototype.optionInternal=function(e,n){var r=this.getKeyForAutomaticLookahead(ll,n),i=this.nestedRuleBeforeClause(e,r);try{return this.optionInternalLogic(e,n,r)}finally{i!==void 0&&this.nestedRuleFinallyClause(r,i)}},t.prototype.optionInternalNoCst=function(e,n){var r=this.getKeyForAutomaticLookahead(ll,n);return this.optionInternalLogic(e,n,r)},t.prototype.optionInternalLogic=function(e,n,r){var i=this,s=this.getLaFuncFromCache(r),o,a;if(e.DEF!==void 0){if(o=e.DEF,a=e.GATE,a!==void 0){var l=s;s=function(){return a.call(i)&&l.call(i)}}}else o=e;if(s.call(this)===!0)return o.call(this)},t.prototype.atLeastOneInternal=function(e,n){var r=this.getKeyForAutomaticLookahead(Ms,e),i=this.nestedRuleBeforeClause(n,r);try{return this.atLeastOneInternalLogic(e,n,r)}finally{i!==void 0&&this.nestedRuleFinallyClause(r,i)}},t.prototype.atLeastOneInternalNoCst=function(e,n){var r=this.getKeyForAutomaticLookahead(Ms,e);this.atLeastOneInternalLogic(e,n,r)},t.prototype.atLeastOneInternalLogic=function(e,n,r){var i=this,s=this.getLaFuncFromCache(r),o,a;if(n.DEF!==void 0){if(o=n.DEF,a=n.GATE,a!==void 0){var l=s;s=function(){return a.call(i)&&l.call(i)}}}else o=n;if(s.call(this)===!0)for(var c=this.doSingleRepetition(o);s.call(this)===!0&&c===!0;)c=this.doSingleRepetition(o);else throw this.raiseEarlyExitException(e,Ht.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],s,Ms,e,GI)},t.prototype.atLeastOneSepFirstInternal=function(e,n){var r=this.getKeyForAutomaticLookahead(Jo,e),i=this.nestedRuleBeforeClause(n,r);try{this.atLeastOneSepFirstInternalLogic(e,n,r)}finally{i!==void 0&&this.nestedRuleFinallyClause(r,i)}},t.prototype.atLeastOneSepFirstInternalNoCst=function(e,n){var r=this.getKeyForAutomaticLookahead(Jo,e);this.atLeastOneSepFirstInternalLogic(e,n,r)},t.prototype.atLeastOneSepFirstInternalLogic=function(e,n,r){var i=this,s=n.DEF,o=n.SEP,a=this.getLaFuncFromCache(r);if(a.call(this)===!0){s.call(this);for(var l=function(){return i.tokenMatcher(i.LA(1),o)};this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),s.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,l,s,tp],l,Jo,e,tp)}else throw this.raiseEarlyExitException(e,Ht.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)},t.prototype.manyInternal=function(e,n){var r=this.getKeyForAutomaticLookahead(Ns,e),i=this.nestedRuleBeforeClause(n,r);try{return this.manyInternalLogic(e,n,r)}finally{i!==void 0&&this.nestedRuleFinallyClause(r,i)}},t.prototype.manyInternalNoCst=function(e,n){var r=this.getKeyForAutomaticLookahead(Ns,e);return this.manyInternalLogic(e,n,r)},t.prototype.manyInternalLogic=function(e,n,r){var i=this,s=this.getLaFuncFromCache(r),o,a;if(n.DEF!==void 0){if(o=n.DEF,a=n.GATE,a!==void 0){var l=s;s=function(){return a.call(i)&&l.call(i)}}}else o=n;for(var c=!0;s.call(this)===!0&&c===!0;)c=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],s,Ns,e,vI,c)},t.prototype.manySepFirstInternal=function(e,n){var r=this.getKeyForAutomaticLookahead(Es,e),i=this.nestedRuleBeforeClause(n,r);try{this.manySepFirstInternalLogic(e,n,r)}finally{i!==void 0&&this.nestedRuleFinallyClause(r,i)}},t.prototype.manySepFirstInternalNoCst=function(e,n){var r=this.getKeyForAutomaticLookahead(Es,e);this.manySepFirstInternalLogic(e,n,r)},t.prototype.manySepFirstInternalLogic=function(e,n,r){var i=this,s=n.DEF,o=n.SEP,a=this.getLaFuncFromCache(r);if(a.call(this)===!0){s.call(this);for(var l=function(){return i.tokenMatcher(i.LA(1),o)};this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),s.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,l,s,ep],l,Es,e,ep)}},t.prototype.repetitionSepSecondInternal=function(e,n,r,i,s){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,i,s],r,Jo,e,s)},t.prototype.doSingleRepetition=function(e){var n=this.getLexerPosition();e.call(this);var r=this.getLexerPosition();return r>n},t.prototype.orInternalNoCst=function(e,n){var r=Kn(e)?e:e.DEF,i=this.getKeyForAutomaticLookahead(Ko,n),s=this.getLaFuncFromCache(i),o=s.call(this,r);if(o!==void 0){var a=r[o];return a.ALT.call(this)}this.raiseNoAltException(n,e.ERR_MSG)},t.prototype.orInternal=function(e,n){var r=this.getKeyForAutomaticLookahead(Ko,n),i=this.nestedRuleBeforeClause(e,r);try{var s=Kn(e)?e:e.DEF,o=this.getLaFuncFromCache(r),a=o.call(this,s);if(a!==void 0){var l=s[a],c=this.nestedAltBeforeClause(l,n,Ko,a);try{return l.ALT.call(this)}finally{c!==void 0&&this.nestedRuleFinallyClause(c.shortName,c.nestedName)}}this.raiseNoAltException(n,e.ERR_MSG)}finally{i!==void 0&&this.nestedRuleFinallyClause(r,i)}},t.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new xu(n,e))}},t.prototype.subruleInternal=function(e,n,r){var i;try{var s=r!==void 0?r.ARGS:void 0;return i=e.call(this,n,s),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(o){this.subruleInternalError(o,r,e.ruleName)}},t.prototype.subruleInternalError=function(e,n,r){throw Ks(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e},t.prototype.consumeInternal=function(e,n,r){var i;try{var s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,r)}catch(o){i=this.consumeInternalRecovery(e,n,o)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i},t.prototype.consumeInternalError=function(e,n,r){var i,s=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new hl(i,n,s))},t.prototype.consumeInternalRecovery=function(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){var i=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===Zp?r:s}}else throw r},t.prototype.saveRecogState=function(){var e=this.errors,n=gn(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK,LAST_EXPLICIT_RULE_STACK:this.LAST_EXPLICIT_RULE_STACK}},t.prototype.reloadRecogState=function(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK},t.prototype.ruleInvocationStateUpdate=function(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n,e)},t.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},t.prototype.getCurrRuleFullName=function(){var e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]},t.prototype.shortRuleNameToFullName=function(e){return this.shortRuleNameToFull[e]},t.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),Ki)},t.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},t}(),yv=function(){function t(){}return t.prototype.initErrorHandler=function(e){this._errors=[],this.errorMessageProvider=za(e.errorMessageProvider,Zn.errorMessageProvider)},t.prototype.SAVE_ERROR=function(e){if(Ks(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:gn(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(t.prototype,"errors",{get:function(){return gn(this._errors)},set:function(e){this._errors=e},enumerable:!0,configurable:!0}),t.prototype.raiseEarlyExitException=function(e,n,r){for(var i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=Su(e,s,n,this.maxLookahead),a=o[0],l=[],c=1;c<=this.maxLookahead;c++)l.push(this.LA(c));var m=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:l,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new wu(m,this.LA(1),this.LA(0)))},t.prototype.raiseNoAltException=function(e,n){for(var r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=Ru(e,i,this.maxLookahead),o=[],a=1;a<=this.maxLookahead;a++)o.push(this.LA(a));var l=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:o,previous:l,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Lu(c,this.LA(1),l))},t}(),bv=function(){function t(){}return t.prototype.initContentAssist=function(){},t.prototype.computeContentAssist=function(e,n){var r=this.gastProductionsCache[e];if(wn(r))throw Error("Rule ->"+e+"<- does not exist in this grammar.");return rp([r],n,this.tokenMatcher,this.maxLookahead)},t.prototype.getNextPossibleTokenTypes=function(e){var n=xn(e.ruleStack),r=this.getGAstProductions(),i=r[n],s=new II(i,e).startWalking();return s},t}(),fl={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(fl);var Rp=!0,Sp=Math.pow(2,ji)-1,Wp=Zu({name:"RECORDING_PHASE_TOKEN",pattern:jn.NA});Bs([Wp]);var Vp=il(Wp,`This IToken indicates the Parser is in Recording Phase
	See: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Vp);var Zv={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details`,children:{}},Iv=function(){function t(){}return t.prototype.initGastRecorder=function(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1},t.prototype.enableRecording=function(){var e=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var n=function(i){var s=i>0?i:"";e["CONSUME"+s]=function(o,a){return this.consumeInternalRecord(o,i,a)},e["SUBRULE"+s]=function(o,a){return this.subruleInternalRecord(o,i,a)},e["OPTION"+s]=function(o){return this.optionInternalRecord(o,i)},e["OR"+s]=function(o){return this.orInternalRecord(o,i)},e["MANY"+s]=function(o){this.manyInternalRecord(i,o)},e["MANY_SEP"+s]=function(o){this.manySepFirstInternalRecord(i,o)},e["AT_LEAST_ONE"+s]=function(o){this.atLeastOneInternalRecord(i,o)},e["AT_LEAST_ONE_SEP"+s]=function(o){this.atLeastOneSepFirstInternalRecord(i,o)}},r=0;r<10;r++)n(r);e.consume=function(i,s,o){return this.consumeInternalRecord(s,i,o)},e.subrule=function(i,s,o){return this.subruleInternalRecord(s,i,o)},e.option=function(i,s){return this.optionInternalRecord(s,i)},e.or=function(i,s){return this.orInternalRecord(s,i)},e.many=function(i,s){this.manyInternalRecord(i,s)},e.atLeastOne=function(i,s){this.atLeastOneInternalRecord(i,s)},e.ACTION=e.ACTION_RECORD,e.BACKTRACK=e.BACKTRACK_RECORD,e.LA=e.LA_RECORD})},t.prototype.disableRecording=function(){var e=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var n=0;n<10;n++){var r=n>0?n:"";delete e["CONSUME"+r],delete e["SUBRULE"+r],delete e["OPTION"+r],delete e["OR"+r],delete e["MANY"+r],delete e["MANY_SEP"+r],delete e["AT_LEAST_ONE"+r],delete e["AT_LEAST_ONE_SEP"+r]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})},t.prototype.ACTION_RECORD=function(e){},t.prototype.BACKTRACK_RECORD=function(e,n){return function(){return!0}},t.prototype.LA_RECORD=function(e){return yl},t.prototype.topLevelRuleRecord=function(e,n){try{var r=new bo({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(i){if(i.KNOWN_RECORDER_ERROR!==!0)try{i.message=i.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording`}catch{throw i}throw i}},t.prototype.optionInternalRecord=function(e,n){return Js.call(this,Vr,e,n)},t.prototype.atLeastOneInternalRecord=function(e,n){Js.call(this,yn,n,e)},t.prototype.atLeastOneSepFirstInternalRecord=function(e,n){Js.call(this,bn,n,e,Rp)},t.prototype.manyInternalRecord=function(e,n){Js.call(this,ir,n,e)},t.prototype.manySepFirstInternalRecord=function(e,n){Js.call(this,ln,n,e,Rp)},t.prototype.orInternalRecord=function(e,n){return vv.call(this,e,n)},t.prototype.subruleInternalRecord=function(e,n,r){if(gl(n),!e||gt(e,"ruleName")===!1){var i=new Error("<SUBRULE"+Cp(n)+"> argument is invalid"+(" expecting a Parser method reference but got: <"+JSON.stringify(e)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw i.KNOWN_RECORDER_ERROR=!0,i}var s=_a(this.recordingProdStack),o=e.ruleName,a=new an({idx:n,nonTerminalName:o,referencedRule:void 0});return s.definition.push(a),this.outputCst?Zv:fl},t.prototype.consumeInternalRecord=function(e,n,r){if(gl(n),!Tm(e)){var i=new Error("<CONSUME"+Cp(n)+"> argument is invalid"+(" expecting a TokenType reference but got: <"+JSON.stringify(e)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw i.KNOWN_RECORDER_ERROR=!0,i}var s=_a(this.recordingProdStack),o=new _t({idx:n,terminalType:e});return s.definition.push(o),Vp},t}();function Js(t,e,n,r){r===void 0&&(r=!1),gl(n);var i=_a(this.recordingProdStack),s=Ei(e)?e:e.DEF,o=new t({definition:[],idx:n});return gt(e,"NAME")&&(o.name=e.NAME),r&&(o.separator=e.SEP),gt(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(o),s.call(this),i.definition.push(o),this.recordingProdStack.pop(),fl}function vv(t,e){var n=this;gl(e);var r=_a(this.recordingProdStack),i=Kn(t)===!1,s=i===!1?t:t.DEF,o=new cn({definition:[],idx:e,ignoreAmbiguities:i&&t.IGNORE_AMBIGUITIES===!0});gt(t,"NAME")&&(o.name=t.NAME),gt(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD);var a=fm(s,function(l){return Ei(l.GATE)});return o.hasPredicates=a,r.definition.push(o),lt(s,function(l){var c=new Dr({definition:[]});o.definition.push(c),gt(l,"NAME")&&(c.name=l.NAME),gt(l,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=l.IGNORE_AMBIGUITIES:gt(l,"GATE")&&(c.ignoreAmbiguities=!0),n.recordingProdStack.push(c),l.ALT.call(n),n.recordingProdStack.pop()}),fl}function Cp(t){return t===0?"":""+t}function gl(t){if(t<0||t>Sp){var e=new Error("Invalid DSL Method idx value: <"+t+`>
	`+("Idx value must be a none negative value smaller than "+(Sp+1)));throw e.KNOWN_RECORDER_ERROR=!0,e}}var Gv=function(){function t(){}return t.prototype.initPerformanceTracer=function(e){if(gt(e,"traceInitPerf")){var n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=Zn.traceInitPerf;this.traceInitIndent=-1},t.prototype.TRACE_INIT=function(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;var r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--> <"+e+">");var i=vm(n),s=i.time,o=i.value,a=s>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(r+"<-- <"+e+"> time: "+s+"ms"),this.traceInitIndent--,o}else return n()},t}(),Xp=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yl=il(Ki,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(yl);var Zn=Object.freeze({recoveryEnabled:!1,maxLookahead:4,ignoredIssues:{},dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Xu,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),bl=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),Cr;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.INVALID_NESTED_RULE_NAME=10]="INVALID_NESTED_RULE_NAME",t[t.DUPLICATE_NESTED_NAME=11]="DUPLICATE_NESTED_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=12]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=13]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=14]="TOO_MANY_ALTS"})(Cr||(Cr={}));function Rv(t){return t===void 0&&(t=void 0),function(){return t}}var Zl=function(){function t(e,n){n===void 0&&(n=Zn),this.ignoredIssues=Zn.ignoredIssues,this.definitionErrors=[],this.selfAnalysisDone=!1;var r=this;r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),gt(n,"ignoredIssues")&&n.ignoredIssues!==Zn.ignoredIssues&&pu(`The <ignoredIssues> IParserConfig property is soft-deprecated and will be removed in future versions.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.`),this.ignoredIssues=gt(n,"ignoredIssues")?n.ignoredIssues:Zn.ignoredIssues,this.skipValidations=gt(n,"skipValidations")?n.skipValidations:Zn.skipValidations}return t.performSelfAnalysis=function(e){e.performSelfAnalysis()},t.prototype.performSelfAnalysis=function(){var e=this;this.TRACE_INIT("performSelfAnalysis",function(){var n;e.selfAnalysisDone=!0;var r=e.className;e.TRACE_INIT("toFastProps",function(){Im(e)}),e.TRACE_INIT("Grammar Recording",function(){try{e.enableRecording(),lt(e.definedRulesNames,function(s){var o=e[s],a=o.originalGrammarAction,l=void 0;e.TRACE_INIT(s+" Rule",function(){l=e.topLevelRuleRecord(s,a)}),e.gastProductionsCache[s]=l})}finally{e.disableRecording()}});var i=[];if(e.TRACE_INIT("Grammar Resolving",function(){i=hp({rules:_r(e.gastProductionsCache)}),e.definitionErrors.push.apply(e.definitionErrors,i)}),e.TRACE_INIT("Grammar Validations",function(){if(Mt(i)&&e.skipValidations===!1){var s=mp({rules:_r(e.gastProductionsCache),maxLookahead:e.maxLookahead,tokenTypes:_r(e.tokensMap),ignoredIssues:e.ignoredIssues,errMsgProvider:dl,grammarName:r});e.definitionErrors.push.apply(e.definitionErrors,s)}}),Mt(e.definitionErrors)&&(e.recoveryEnabled&&e.TRACE_INIT("computeAllProdsFollows",function(){var s=dI(_r(e.gastProductionsCache));e.resyncFollows=s}),e.TRACE_INIT("ComputeLookaheadFunctions",function(){e.preComputeLookaheadFunctions(_r(e.gastProductionsCache))})),e.TRACE_INIT("expandAllNestedRuleNames",function(){var s=bI(_r(e.gastProductionsCache),e.fullRuleNameToShort);e.allRuleNames=s.allRuleNames}),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!Mt(e.definitionErrors))throw n=et(e.definitionErrors,function(s){return s.message}),new Error(`Parser Definition Errors detected:
 `+n.join(`
-------------------------------
`))})},t.DEFER_DEFINITION_ERRORS_HANDLING=!1,t}();p2(Zl,[tv,nv,mv,pv,gv,fv,yv,bv,Iv,Gv]);var Sv=function(t){Xp(e,t);function e(n,r){r===void 0&&(r=Zn);var i=this,s=ks(r);return s.outputCst=!0,i=t.call(this,n,s)||this,i}return e}(Zl),Wv=function(t){Xp(e,t);function e(n,r){r===void 0&&(r=Zn);var i=this,s=ks(r);return s.outputCst=!1,i=t.call(this,n,s)||this,i}return e}(Zl);function Vv(t,e){var n=e===void 0?{}:e,r=n.resourceBase,i=r===void 0?"https://unpkg.com/chevrotain@"+uu+"/diagrams/":r,s=n.css,o=s===void 0?"https://unpkg.com/chevrotain@"+uu+"/diagrams/diagrams.css":s,a=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,l=`
<link rel='stylesheet' href='`+o+`'>
`,c=`
<script src='`+i+`vendor/railroad-diagrams.js'><\/script>
<script src='`+i+`src/diagrams_builder.js'><\/script>
<script src='`+i+`src/diagrams_behavior.js'><\/script>
<script src='`+i+`src/main.js'><\/script>
`,m=`
<div id="diagrams" align="center"></div>    
`,p=`
<script>
    window.serializedGrammar = `+JSON.stringify(t,null,"  ")+`;
<\/script>
`,u=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return a+l+c+m+p+u}var yr=`
`;function Cv(t){return`
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['chevrotain'], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like environments that support module.exports,
        // like Node.
        module.exports = factory(require('chevrotain'));
    } else {
        // Browser globals (root is window)
        root.returnExports = factory(root.b);
    }
}(typeof self !== 'undefined' ? self : this, function (chevrotain) {

`+Lp(t)+`
    
return {
    `+t.name+": "+t.name+` 
}
}));
`}function Xv(t){return`    
`+Lp(t)+`
return new `+t.name+`(tokenVocabulary, config)    
`}function Lp(t){var e=`
function `+t.name+`(tokenVocabulary, config) {
    // invoke super constructor
    // No support for embedded actions currently, so we can 'hardcode'
    // The use of CstParser.
    chevrotain.CstParser.call(this, tokenVocabulary, config)

    const $ = this

    `+Lv(t.rules)+`

    // very important to call this after all the rules have been defined.
    // otherwise the parser may not work correctly as it will lack information
    // derived during the self analysis phase.
    this.performSelfAnalysis(this)
}

// inheritance as implemented in javascript in the previous decade... :(
`+t.name+`.prototype = Object.create(chevrotain.CstParser.prototype)
`+t.name+".prototype.constructor = "+t.name+`    
    `;return e}function Lv(t){var e=et(t,function(n){return xv(n,1)});return e.join(`
`)}function xv(t,e){var n=Er(e,'$.RULE("'+t.name+'", function() {')+yr;return n+=Il(t.definition,e+1),n+=Er(e+1,"})")+yr,n}function wv(t,e){var n=t.terminalType.name;return Er(e,"$.CONSUME"+t.idx+"(this.tokensMap."+n+")"+yr)}function kv(t,e){return Er(e,"$.SUBRULE"+t.idx+"($."+t.nonTerminalName+")"+yr)}function Av(t,e){var n=Er(e,"$.OR"+t.idx+"([")+yr,r=et(t.definition,function(i){return Tv(i,e+1)});return n+=r.join(","+yr),n+=yr+Er(e,"])"+yr),n}function Tv(t,e){var n=Er(e,"{")+yr;return t.name&&(n+=Er(e+1,'NAME: "'+t.name+'",')+yr),n+=Er(e+1,"ALT: function() {")+yr,n+=Il(t.definition,e+1),n+=Er(e+1,"}")+yr,n+=Er(e,"}"),n}function Bv(t,e){if(t instanceof an)return kv(t,e);if(t instanceof Vr)return js("OPTION",t,e);if(t instanceof yn)return js("AT_LEAST_ONE",t,e);if(t instanceof bn)return js("AT_LEAST_ONE_SEP",t,e);if(t instanceof ln)return js("MANY_SEP",t,e);if(t instanceof ir)return js("MANY",t,e);if(t instanceof cn)return Av(t,e);if(t instanceof _t)return wv(t,e);if(t instanceof Dr)return Il(t.definition,e);throw Error("non exhaustive match")}function js(t,e,n){var r=Er(n,"$."+(t+e.idx)+"(");return e.name||e.separator?(r+="{"+yr,e.name&&(r+=Er(n+1,'NAME: "'+e.name+'"')+","+yr),e.separator&&(r+=Er(n+1,"SEP: this.tokensMap."+e.separator.name)+","+yr),r+="DEF: "+xp(e.definition,n+2)+yr,r+=Er(n,"}")+yr):r+=xp(e.definition,n+1),r+=Er(n,")")+yr,r}function xp(t,e){var n="function() {"+yr;return n+=Il(t,e),n+=Er(e,"}")+yr,n}function Il(t,e){var n="";return lt(t,function(r){n+=Bv(r,e+1)}),n}function Er(t,e){var n=Array(t*4+1).join(" ");return n+e}function Uv(t){var e=Xv({name:t.name,rules:t.rules}),n=new Function("tokenVocabulary","config","chevrotain",e);return function(r){return n(t.tokenVocabulary,r,require("../api"))}}function Fv(t){return Cv({name:t.name,rules:t.rules})}function Yv(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}const On=l2(Object.freeze(Object.defineProperty({__proto__:null,clearCache:Yv,VERSION:uu,Parser:Zl,CstParser:Sv,EmbeddedActionsParser:Wv,get ParserDefinitionErrorType(){return Cr},EMPTY_ALT:Rv,Lexer:jn,get LexerDefinitionErrorType(){return dr},createToken:Zu,createTokenInstance:il,EOF:Ki,tokenLabel:yo,tokenMatcher:tI,tokenName:q2,defaultGrammarResolverErrorProvider:dp,defaultGrammarValidatorErrorProvider:dl,defaultParserErrorProvider:Xu,EarlyExitException:wu,isRecognitionException:Ks,MismatchedTokenException:hl,NotAllInputParsedException:xu,NoViableAltException:Lu,defaultLexerErrorProvider:Um,Alternation:cn,Flat:Dr,NonTerminal:an,Option:Vr,Repetition:ir,RepetitionMandatory:yn,RepetitionMandatoryWithSeparator:bn,RepetitionWithSeparator:ln,Rule:bo,Terminal:_t,serializeGrammar:Pm,serializeProduction:Fs,GAstVisitor:Ji,assignOccurrenceIndices:ev,resolveGrammar:hp,validateGrammar:mp,createSyntaxDiagramsCode:Vv,generateParserFactory:Uv,generateParserModule:Fv},Symbol.toStringTag,{value:"Module"})));var Nv=typeof Ci=="object"&&Ci&&Ci.Object===Object&&Ci,wp=Nv,Mv=wp,Ev=typeof self=="object"&&self&&self.Object===Object&&self,Hv=Mv||Ev||Function("return this")(),wi=Hv,Kv=wi,Jv=Kv.Symbol,vl=Jv;function jv(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Pv=jv,Ov=Array.isArray,Pi=Ov,kp=vl,Ap=Object.prototype,zv=Ap.hasOwnProperty,_v=Ap.toString,Ps=kp?kp.toStringTag:void 0;function Dv(t){var e=zv.call(t,Ps),n=t[Ps];try{t[Ps]=void 0;var r=!0}catch{}var i=_v.call(t);return r&&(e?t[Ps]=n:delete t[Ps]),i}var Qv=Dv,qv=Object.prototype,$v=qv.toString;function eG(t){return $v.call(t)}var tG=eG,Tp=vl,rG=Qv,nG=tG,iG="[object Null]",oG="[object Undefined]",Bp=Tp?Tp.toStringTag:void 0;function sG(t){return t==null?t===void 0?oG:iG:Bp&&Bp in Object(t)?rG(t):nG(t)}var Os=sG;function aG(t){return t!=null&&typeof t=="object"}var zs=aG,lG=Os,cG=zs,uG="[object Symbol]";function dG(t){return typeof t=="symbol"||cG(t)&&lG(t)==uG}var Gl=dG,Up=vl,hG=Pv,mG=Pi,pG=Gl,fG=1/0,Fp=Up?Up.prototype:void 0,Yp=Fp?Fp.toString:void 0;function Np(t){if(typeof t=="string")return t;if(mG(t))return hG(t,Np)+"";if(pG(t))return Yp?Yp.call(t):"";var e=t+"";return e=="0"&&1/t==-fG?"-0":e}var gG=Np,yG=gG;function bG(t){return t==null?"":yG(t)}var _s=bG;function ZG(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var IG=ZG,vG=IG;function GG(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:vG(t,e,n)}var RG=GG,SG="\\ud800-\\udfff",WG="\\u0300-\\u036f",VG="\\ufe20-\\ufe2f",CG="\\u20d0-\\u20ff",XG=WG+VG+CG,LG="\\ufe0e\\ufe0f",xG="\\u200d",wG=RegExp("["+xG+SG+XG+LG+"]");function kG(t){return wG.test(t)}var Mp=kG;function AG(t){return t.split("")}var TG=AG,Ep="\\ud800-\\udfff",BG="\\u0300-\\u036f",UG="\\ufe20-\\ufe2f",FG="\\u20d0-\\u20ff",YG=BG+UG+FG,NG="\\ufe0e\\ufe0f",MG="["+Ep+"]",Au="["+YG+"]",Tu="\\ud83c[\\udffb-\\udfff]",EG="(?:"+Au+"|"+Tu+")",Hp="[^"+Ep+"]",Kp="(?:\\ud83c[\\udde6-\\uddff]){2}",Jp="[\\ud800-\\udbff][\\udc00-\\udfff]",HG="\\u200d",jp=EG+"?",Pp="["+NG+"]?",KG="(?:"+HG+"(?:"+[Hp,Kp,Jp].join("|")+")"+Pp+jp+")*",JG=Pp+jp+KG,jG="(?:"+[Hp+Au+"?",Au,Kp,Jp,MG].join("|")+")",PG=RegExp(Tu+"(?="+Tu+")|"+jG+JG,"g");function OG(t){return t.match(PG)||[]}var zG=OG,_G=TG,DG=Mp,QG=zG;function qG(t){return DG(t)?QG(t):_G(t)}var $G=qG,eR=RG,tR=Mp,rR=$G,nR=_s;function iR(t){return function(e){e=nR(e);var n=tR(e)?rR(e):void 0,r=n?n[0]:e.charAt(0),i=n?eR(n,1).join(""):e.slice(1);return r[t]()+i}}var oR=iR,sR=oR,aR=sR("toUpperCase"),lR=aR,cR=_s,uR=lR;function dR(t){return uR(cR(t).toLowerCase())}var hR=dR;function mR(t,e,n,r){var i=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}var pR=mR;function fR(t){return function(e){return t==null?void 0:t[e]}}var gR=fR,yR=gR,bR={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ZR=yR(bR),IR=ZR,vR=IR,GR=_s,RR=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,SR="\\u0300-\\u036f",WR="\\ufe20-\\ufe2f",VR="\\u20d0-\\u20ff",CR=SR+WR+VR,XR="["+CR+"]",LR=RegExp(XR,"g");function xR(t){return t=GR(t),t&&t.replace(RR,vR).replace(LR,"")}var wR=xR,kR=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function AR(t){return t.match(kR)||[]}var TR=AR,BR=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function UR(t){return BR.test(t)}var FR=UR,Op="\\ud800-\\udfff",YR="\\u0300-\\u036f",NR="\\ufe20-\\ufe2f",MR="\\u20d0-\\u20ff",ER=YR+NR+MR,zp="\\u2700-\\u27bf",_p="a-z\\xdf-\\xf6\\xf8-\\xff",HR="\\xac\\xb1\\xd7\\xf7",KR="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",JR="\\u2000-\\u206f",jR=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dp="A-Z\\xc0-\\xd6\\xd8-\\xde",PR="\\ufe0e\\ufe0f",Qp=HR+KR+JR+jR,qp="['\u2019]",$p="["+Qp+"]",OR="["+ER+"]",ef="\\d+",zR="["+zp+"]",tf="["+_p+"]",rf="[^"+Op+Qp+ef+zp+_p+Dp+"]",_R="\\ud83c[\\udffb-\\udfff]",DR="(?:"+OR+"|"+_R+")",QR="[^"+Op+"]",nf="(?:\\ud83c[\\udde6-\\uddff]){2}",of="[\\ud800-\\udbff][\\udc00-\\udfff]",jo="["+Dp+"]",qR="\\u200d",sf="(?:"+tf+"|"+rf+")",$R="(?:"+jo+"|"+rf+")",af="(?:"+qp+"(?:d|ll|m|re|s|t|ve))?",lf="(?:"+qp+"(?:D|LL|M|RE|S|T|VE))?",cf=DR+"?",uf="["+PR+"]?",e5="(?:"+qR+"(?:"+[QR,nf,of].join("|")+")"+uf+cf+")*",t5="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",r5="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",n5=uf+cf+e5,i5="(?:"+[zR,nf,of].join("|")+")"+n5,o5=RegExp([jo+"?"+tf+"+"+af+"(?="+[$p,jo,"$"].join("|")+")",$R+"+"+lf+"(?="+[$p,jo+sf,"$"].join("|")+")",jo+"?"+sf+"+"+af,jo+"+"+lf,r5,t5,ef,i5].join("|"),"g");function s5(t){return t.match(o5)||[]}var a5=s5,l5=TR,c5=FR,u5=_s,d5=a5;function h5(t,e,n){return t=u5(t),e=n?void 0:e,e===void 0?c5(t)?d5(t):l5(t):t.match(e)||[]}var m5=h5,p5=pR,f5=wR,g5=m5,y5="['\u2019]",b5=RegExp(y5,"g");function Z5(t){return function(e){return p5(g5(f5(e).replace(b5,"")),t,"")}}var I5=Z5,v5=hR,G5=I5,R5=G5(function(t,e,n){return e=e.toLowerCase(),t+(n?v5(e):e)}),S5=R5,Bu,df;function W5(){if(df)return Bu;df=1;const t=(a,l)=>{for(let c=0;c<l.length;c++){const m=l[c],p=m[0],u=m[1];for(let d=p;d<=u;d++)a.add(d)}},e=new Set([181,257,259,261,263,265,267,269,271,273,275,277,279,281,283,285,287,289,291,293,295,297,299,301,303,305,307,309,314,316,318,320,322,324,326,331,333,335,337,339,341,343,345,347,349,351,353,355,357,359,361,363,365,367,369,371,373,375,378,380,387,389,392,402,405,414,417,419,421,424,429,432,436,438,454,457,460,462,464,466,468,470,472,474,479,481,483,485,487,489,491,493,499,501,505,507,509,511,513,515,517,519,521,523,525,527,529,531,533,535,537,539,541,543,545,547,549,551,553,555,557,559,561,572,578,583,585,587,589,881,883,887,912,985,987,989,991,993,995,997,999,1001,1003,1005,1013,1016,1121,1123,1125,1127,1129,1131,1133,1135,1137,1139,1141,1143,1145,1147,1149,1151,1153,1163,1165,1167,1169,1171,1173,1175,1177,1179,1181,1183,1185,1187,1189,1191,1193,1195,1197,1199,1201,1203,1205,1207,1209,1211,1213,1215,1218,1220,1222,1224,1226,1228,1233,1235,1237,1239,1241,1243,1245,1247,1249,1251,1253,1255,1257,1259,1261,1263,1265,1267,1269,1271,1273,1275,1277,1279,1281,1283,1285,1287,1289,1291,1293,1295,1297,1299,1301,1303,1305,1307,1309,1311,1313,1315,1317,1319,1321,1323,1325,1327,7681,7683,7685,7687,7689,7691,7693,7695,7697,7699,7701,7703,7705,7707,7709,7711,7713,7715,7717,7719,7721,7723,7725,7727,7729,7731,7733,7735,7737,7739,7741,7743,7745,7747,7749,7751,7753,7755,7757,7759,7761,7763,7765,7767,7769,7771,7773,7775,7777,7779,7781,7783,7785,7787,7789,7791,7793,7795,7797,7799,7801,7803,7805,7807,7809,7811,7813,7815,7817,7819,7821,7823,7825,7827,7839,7841,7843,7845,7847,7849,7851,7853,7855,7857,7859,7861,7863,7865,7867,7869,7871,7873,7875,7877,7879,7881,7883,7885,7887,7889,7891,7893,7895,7897,7899,7901,7903,7905,7907,7909,7911,7913,7915,7917,7919,7921,7923,7925,7927,7929,7931,7933,8126,8458,8467,8495,8500,8505,8526,8580,11361,11368,11370,11372,11377,11393,11395,11397,11399,11401,11403,11405,11407,11409,11411,11413,11415,11417,11419,11421,11423,11425,11427,11429,11431,11433,11435,11437,11439,11441,11443,11445,11447,11449,11451,11453,11455,11457,11459,11461,11463,11465,11467,11469,11471,11473,11475,11477,11479,11481,11483,11485,11487,11489,11500,11502,11507,11559,11565,42561,42563,42565,42567,42569,42571,42573,42575,42577,42579,42581,42583,42585,42587,42589,42591,42593,42595,42597,42599,42601,42603,42605,42625,42627,42629,42631,42633,42635,42637,42639,42641,42643,42645,42647,42649,42651,42787,42789,42791,42793,42795,42797,42803,42805,42807,42809,42811,42813,42815,42817,42819,42821,42823,42825,42827,42829,42831,42833,42835,42837,42839,42841,42843,42845,42847,42849,42851,42853,42855,42857,42859,42861,42863,42874,42876,42879,42881,42883,42885,42887,42892,42894,42897,42903,42905,42907,42909,42911,42913,42915,42917,42919,42921,42927,42933,42935,42937,42939,42941,42943,42947,43002,119995,120779,748,750,884,890,1369,1600,2042,2074,2084,2088,2417,3654,3782,4348,6103,6211,6823,7544,8305,8319,11631,11823,12293,12347,40981,42508,42623,42864,42888,43471,43494,43632,43741,65392,94179,125259,170,186,443,660,1749,1791,1808,1969,2365,2384,2482,2493,2510,2556,2654,2749,2768,2809,2877,2929,2947,2972,3024,3133,3200,3261,3294,3389,3406,3517,3716,3749,3773,3840,4159,4193,4238,4696,4800,6108,6314,7418,12294,12348,12447,12543,13312,19968,42606,42895,42999,43259,43642,43697,43712,43714,43762,44032,64285,64318,67592,67644,68096,69415,69956,70006,70106,70108,70280,70461,70480,70751,70855,71236,71352,71935,72161,72163,72192,72250,72272,72349,72768,73030,73112,94032,94208,123214,126500,126503,126521,126523,126530,126535,126537,126539,126548,126551,126553,126555,126557,126559,126564,126590,131072,173824,177984,178208,183984,453,456,459,498,8124,8140,8188,256,258,260,262,264,266,268,270,272,274,276,278,280,282,284,286,288,290,292,294,296,298,300,302,304,306,308,310,313,315,317,319,321,323,325,327,330,332,334,336,338,340,342,344,346,348,350,352,354,356,358,360,362,364,366,368,370,372,374,379,381,388,418,420,425,428,437,444,452,455,458,461,463,465,467,469,471,473,475,478,480,482,484,486,488,490,492,494,497,500,506,508,510,512,514,516,518,520,522,524,526,528,530,532,534,536,538,540,542,544,546,548,550,552,554,556,558,560,562,577,584,586,588,590,880,882,886,895,902,908,975,984,986,988,990,992,994,996,998,1e3,1002,1004,1006,1012,1015,1120,1122,1124,1126,1128,1130,1132,1134,1136,1138,1140,1142,1144,1146,1148,1150,1152,1162,1164,1166,1168,1170,1172,1174,1176,1178,1180,1182,1184,1186,1188,1190,1192,1194,1196,1198,1200,1202,1204,1206,1208,1210,1212,1214,1219,1221,1223,1225,1227,1229,1232,1234,1236,1238,1240,1242,1244,1246,1248,1250,1252,1254,1256,1258,1260,1262,1264,1266,1268,1270,1272,1274,1276,1278,1280,1282,1284,1286,1288,1290,1292,1294,1296,1298,1300,1302,1304,1306,1308,1310,1312,1314,1316,1318,1320,1322,1324,1326,4295,4301,7680,7682,7684,7686,7688,7690,7692,7694,7696,7698,7700,7702,7704,7706,7708,7710,7712,7714,7716,7718,7720,7722,7724,7726,7728,7730,7732,7734,7736,7738,7740,7742,7744,7746,7748,7750,7752,7754,7756,7758,7760,7762,7764,7766,7768,7770,7772,7774,7776,7778,7780,7782,7784,7786,7788,7790,7792,7794,7796,7798,7800,7802,7804,7806,7808,7810,7812,7814,7816,7818,7820,7822,7824,7826,7828,7838,7840,7842,7844,7846,7848,7850,7852,7854,7856,7858,7860,7862,7864,7866,7868,7870,7872,7874,7876,7878,7880,7882,7884,7886,7888,7890,7892,7894,7896,7898,7900,7902,7904,7906,7908,7910,7912,7914,7916,7918,7920,7922,7924,7926,7928,7930,7932,7934,8025,8027,8029,8031,8450,8455,8469,8484,8486,8488,8517,8579,11360,11367,11369,11371,11378,11381,11394,11396,11398,11400,11402,11404,11406,11408,11410,11412,11414,11416,11418,11420,11422,11424,11426,11428,11430,11432,11434,11436,11438,11440,11442,11444,11446,11448,11450,11452,11454,11456,11458,11460,11462,11464,11466,11468,11470,11472,11474,11476,11478,11480,11482,11484,11486,11488,11490,11499,11501,11506,42560,42562,42564,42566,42568,42570,42572,42574,42576,42578,42580,42582,42584,42586,42588,42590,42592,42594,42596,42598,42600,42602,42604,42624,42626,42628,42630,42632,42634,42636,42638,42640,42642,42644,42646,42648,42650,42786,42788,42790,42792,42794,42796,42798,42802,42804,42806,42808,42810,42812,42814,42816,42818,42820,42822,42824,42826,42828,42830,42832,42834,42836,42838,42840,42842,42844,42846,42848,42850,42852,42854,42856,42858,42860,42862,42873,42875,42880,42882,42884,42886,42891,42893,42896,42898,42902,42904,42906,42908,42910,42912,42914,42916,42918,42920,42934,42936,42938,42940,42942,42946,119964,119970,120134,120778,12295,66369,66378,36,1423,1547,2555,2801,3065,3647,6107,43064,65020,65129,65284,123647,126128,95,8276,65343]);t(e,[[97,122],[223,246],[248,255],[311,312],[328,329],[382,384],[396,397],[409,411],[426,427],[441,442],[445,447],[476,477],[495,496],[563,569],[575,576],[591,659],[661,687],[891,893],[940,974],[976,977],[981,983],[1007,1011],[1019,1020],[1072,1119],[1230,1231],[1376,1416],[4304,4346],[4349,4351],[5112,5117],[7296,7304],[7424,7467],[7531,7543],[7545,7578],[7829,7837],[7935,7943],[7952,7957],[7968,7975],[7984,7991],[8e3,8005],[8016,8023],[8032,8039],[8048,8061],[8064,8071],[8080,8087],[8096,8103],[8112,8116],[8118,8119],[8130,8132],[8134,8135],[8144,8147],[8150,8151],[8160,8167],[8178,8180],[8182,8183],[8462,8463],[8508,8509],[8518,8521],[11312,11358],[11365,11366],[11379,11380],[11382,11387],[11491,11492],[11520,11557],[42799,42801],[42865,42872],[42899,42901],[43824,43866],[43872,43879],[43888,43967],[64256,64262],[64275,64279],[65345,65370],[66600,66639],[66776,66811],[68800,68850],[71872,71903],[93792,93823],[119834,119859],[119886,119892],[119894,119911],[119938,119963],[119990,119993],[119997,120003],[120005,120015],[120042,120067],[120094,120119],[120146,120171],[120198,120223],[120250,120275],[120302,120327],[120354,120379],[120406,120431],[120458,120485],[120514,120538],[120540,120545],[120572,120596],[120598,120603],[120630,120654],[120656,120661],[120688,120712],[120714,120719],[120746,120770],[120772,120777],[125218,125251],[688,705],[710,721],[736,740],[1765,1766],[2036,2037],[7288,7293],[7468,7530],[7579,7615],[8336,8348],[11388,11389],[12337,12341],[12445,12446],[12540,12542],[42232,42237],[42652,42653],[42775,42783],[43e3,43001],[43763,43764],[43868,43871],[65438,65439],[92992,92995],[94099,94111],[94176,94177],[123191,123197],[13313,19893],[19969,40943],[44033,55203],[94209,100343],[131073,173782],[173825,177972],[177985,178205],[178209,183969],[183985,191456],[448,451],[1488,1514],[1519,1522],[1568,1599],[1601,1610],[1646,1647],[1649,1747],[1774,1775],[1786,1788],[1810,1839],[1869,1957],[1994,2026],[2048,2069],[2112,2136],[2144,2154],[2208,2228],[2230,2237],[2308,2361],[2392,2401],[2418,2432],[2437,2444],[2447,2448],[2451,2472],[2474,2480],[2486,2489],[2524,2525],[2527,2529],[2544,2545],[2565,2570],[2575,2576],[2579,2600],[2602,2608],[2610,2611],[2613,2614],[2616,2617],[2649,2652],[2674,2676],[2693,2701],[2703,2705],[2707,2728],[2730,2736],[2738,2739],[2741,2745],[2784,2785],[2821,2828],[2831,2832],[2835,2856],[2858,2864],[2866,2867],[2869,2873],[2908,2909],[2911,2913],[2949,2954],[2958,2960],[2962,2965],[2969,2970],[2974,2975],[2979,2980],[2984,2986],[2990,3001],[3077,3084],[3086,3088],[3090,3112],[3114,3129],[3160,3162],[3168,3169],[3205,3212],[3214,3216],[3218,3240],[3242,3251],[3253,3257],[3296,3297],[3313,3314],[3333,3340],[3342,3344],[3346,3386],[3412,3414],[3423,3425],[3450,3455],[3461,3478],[3482,3505],[3507,3515],[3520,3526],[3585,3632],[3634,3635],[3648,3653],[3713,3714],[3718,3722],[3724,3747],[3751,3760],[3762,3763],[3776,3780],[3804,3807],[3904,3911],[3913,3948],[3976,3980],[4096,4138],[4176,4181],[4186,4189],[4197,4198],[4206,4208],[4213,4225],[4352,4680],[4682,4685],[4688,4694],[4698,4701],[4704,4744],[4746,4749],[4752,4784],[4786,4789],[4792,4798],[4802,4805],[4808,4822],[4824,4880],[4882,4885],[4888,4954],[4992,5007],[5121,5740],[5743,5759],[5761,5786],[5792,5866],[5873,5880],[5888,5900],[5902,5905],[5920,5937],[5952,5969],[5984,5996],[5998,6e3],[6016,6067],[6176,6210],[6212,6264],[6272,6276],[6279,6312],[6320,6389],[6400,6430],[6480,6509],[6512,6516],[6528,6571],[6576,6601],[6656,6678],[6688,6740],[6917,6963],[6981,6987],[7043,7072],[7086,7087],[7098,7141],[7168,7203],[7245,7247],[7258,7287],[7401,7404],[7406,7411],[7413,7414],[8501,8504],[11568,11623],[11648,11670],[11680,11686],[11688,11694],[11696,11702],[11704,11710],[11712,11718],[11720,11726],[11728,11734],[11736,11742],[12353,12438],[12449,12538],[12549,12591],[12593,12686],[12704,12730],[12784,12799],[40960,40980],[40982,42124],[42192,42231],[42240,42507],[42512,42527],[42538,42539],[42656,42725],[43003,43009],[43011,43013],[43015,43018],[43020,43042],[43072,43123],[43138,43187],[43250,43255],[43261,43262],[43274,43301],[43312,43334],[43360,43388],[43396,43442],[43488,43492],[43495,43503],[43514,43518],[43520,43560],[43584,43586],[43588,43595],[43616,43631],[43633,43638],[43646,43695],[43701,43702],[43705,43709],[43739,43740],[43744,43754],[43777,43782],[43785,43790],[43793,43798],[43808,43814],[43816,43822],[43968,44002],[55216,55238],[55243,55291],[63744,64109],[64112,64217],[64287,64296],[64298,64310],[64312,64316],[64320,64321],[64323,64324],[64326,64433],[64467,64829],[64848,64911],[64914,64967],[65008,65019],[65136,65140],[65142,65276],[65382,65391],[65393,65437],[65440,65470],[65474,65479],[65482,65487],[65490,65495],[65498,65500],[65536,65547],[65549,65574],[65576,65594],[65596,65597],[65599,65613],[65616,65629],[65664,65786],[66176,66204],[66208,66256],[66304,66335],[66349,66368],[66370,66377],[66384,66421],[66432,66461],[66464,66499],[66504,66511],[66640,66717],[66816,66855],[66864,66915],[67072,67382],[67392,67413],[67424,67431],[67584,67589],[67594,67637],[67639,67640],[67647,67669],[67680,67702],[67712,67742],[67808,67826],[67828,67829],[67840,67861],[67872,67897],[67968,68023],[68030,68031],[68112,68115],[68117,68119],[68121,68149],[68192,68220],[68224,68252],[68288,68295],[68297,68324],[68352,68405],[68416,68437],[68448,68466],[68480,68497],[68608,68680],[68864,68899],[69376,69404],[69424,69445],[69600,69622],[69635,69687],[69763,69807],[69840,69864],[69891,69926],[69968,70002],[70019,70066],[70081,70084],[70144,70161],[70163,70187],[70272,70278],[70282,70285],[70287,70301],[70303,70312],[70320,70366],[70405,70412],[70415,70416],[70419,70440],[70442,70448],[70450,70451],[70453,70457],[70493,70497],[70656,70708],[70727,70730],[70784,70831],[70852,70853],[71040,71086],[71128,71131],[71168,71215],[71296,71338],[71424,71450],[71680,71723],[72096,72103],[72106,72144],[72203,72242],[72284,72329],[72384,72440],[72704,72712],[72714,72750],[72818,72847],[72960,72966],[72968,72969],[72971,73008],[73056,73061],[73063,73064],[73066,73097],[73440,73458],[73728,74649],[74880,75075],[77824,78894],[82944,83526],[92160,92728],[92736,92766],[92880,92909],[92928,92975],[93027,93047],[93053,93071],[93952,94026],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[113664,113770],[113776,113788],[113792,113800],[113808,113817],[123136,123180],[123584,123627],[124928,125124],[126464,126467],[126469,126495],[126497,126498],[126505,126514],[126516,126519],[126541,126543],[126545,126546],[126561,126562],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[194560,195101],[8072,8079],[8088,8095],[8104,8111],[65,90],[192,214],[216,222],[376,377],[385,386],[390,391],[393,395],[398,401],[403,404],[406,408],[412,413],[415,416],[422,423],[430,431],[433,435],[439,440],[502,504],[570,571],[573,574],[579,582],[904,906],[910,911],[913,929],[931,939],[978,980],[1017,1018],[1021,1071],[1216,1217],[1329,1366],[4256,4293],[5024,5109],[7312,7354],[7357,7359],[7944,7951],[7960,7965],[7976,7983],[7992,7999],[8008,8013],[8040,8047],[8120,8123],[8136,8139],[8152,8155],[8168,8172],[8184,8187],[8459,8461],[8464,8466],[8473,8477],[8490,8493],[8496,8499],[8510,8511],[11264,11310],[11362,11364],[11373,11376],[11390,11392],[42877,42878],[42922,42926],[42928,42932],[42948,42950],[65313,65338],[66560,66599],[66736,66771],[68736,68786],[71840,71871],[93760,93791],[119808,119833],[119860,119885],[119912,119937],[119966,119967],[119973,119974],[119977,119980],[119982,119989],[120016,120041],[120068,120069],[120071,120074],[120077,120084],[120086,120092],[120120,120121],[120123,120126],[120128,120132],[120138,120144],[120172,120197],[120224,120249],[120276,120301],[120328,120353],[120380,120405],[120432,120457],[120488,120512],[120546,120570],[120604,120628],[120662,120686],[120720,120744],[125184,125217],[5870,5872],[8544,8578],[8581,8584],[12321,12329],[12344,12346],[42726,42735],[65856,65908],[66513,66517],[74752,74862],[162,165],[2046,2047],[2546,2547],[8352,8383],[65504,65505],[65509,65510],[73693,73696],[8255,8256],[65075,65076],[65101,65103]]);const r=new Set([1471,1479,1648,1809,2045,2362,2364,2381,2433,2492,2509,2558,2620,2641,2677,2748,2765,2817,2876,2879,2893,2902,2946,3008,3021,3072,3076,3201,3260,3263,3270,3405,3530,3542,3633,3761,3893,3895,3897,4038,4226,4237,4253,6086,6109,6313,6450,6683,6742,6752,6754,6783,6964,6972,6978,7142,7149,7405,7412,8417,11647,42607,43010,43014,43019,43263,43443,43493,43587,43596,43644,43696,43713,43766,44005,44008,44013,64286,66045,66272,68159,69633,70003,70196,70206,70367,70464,70726,70750,70842,71229,71339,71341,71351,72160,72263,72767,73018,73031,73109,73111,94031,121461,121476,173,1564,1757,1807,2274,6158,65279,69821,69837,917505]);t(r,[[768,879],[1155,1159],[1425,1469],[1473,1474],[1476,1477],[1552,1562],[1611,1631],[1750,1756],[1759,1764],[1767,1768],[1770,1773],[1840,1866],[1958,1968],[2027,2035],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2273],[2275,2306],[2369,2376],[2385,2391],[2402,2403],[2497,2500],[2530,2531],[2561,2562],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2753,2757],[2759,2760],[2786,2787],[2810,2815],[2881,2884],[2914,2915],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3426,3427],[3538,3540],[3636,3642],[3655,3662],[3764,3772],[3784,3789],[3864,3865],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4229,4230],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6089,6099],[6155,6157],[6277,6278],[6432,6434],[6439,6440],[6457,6459],[6679,6680],[6744,6750],[6757,6764],[6771,6780],[6832,6845],[6912,6915],[6966,6970],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7144,7145],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7416,7417],[7616,7673],[7675,7679],[8400,8412],[8421,8432],[11503,11505],[11744,11775],[12330,12333],[12441,12442],[42612,42621],[42654,42655],[42736,42737],[43045,43046],[43204,43205],[43232,43249],[43302,43309],[43335,43345],[43392,43394],[43446,43449],[43452,43453],[43561,43566],[43569,43570],[43573,43574],[43698,43700],[43703,43704],[43710,43711],[43756,43757],[65024,65039],[65056,65071],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68325,68326],[68900,68903],[69446,69456],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70198,70199],[70371,70378],[70400,70401],[70459,70460],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70835,70840],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71231,71232],[71344,71349],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72193,72202],[72243,72248],[72251,72254],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73020,73021],[73023,73029],[73104,73105],[73459,73460],[92912,92916],[92976,92982],[94095,94098],[113821,113822],[119143,119145],[119163,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917760,917999],[1536,1541],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[65529,65531],[78896,78904],[113824,113827],[119155,119162],[917536,917631]]),t(r,[[0,8],[14,27],[127,159],[768,879],[6832,6911],[7616,7679],[8400,8447],[65056,65071],[48,57]]);const o=new Set(function*(){yield*e,yield*r}());return Bu={firstIdentChar:e,restIdentChar:o},Bu}const{createToken:hf,Lexer:ki}=On,V5=S5;let Rl;const Uu={};try{Rl=W5()}catch{throw Error("unicodesets.js file could not be found. Did you try to run the command: yarn run build ?")}function mf(t){let e=t;return Object.keys(Uu).forEach(n=>{const r=Uu[n],i=new RegExp(`{{${n}}}`,"g");e=e.replace(i,r)}),e}function un(t,e){Uu[t]=mf(e)}function Po(t,e){const n=mf(t);return new RegExp(n,e)}un("Digits","[0-9]([0-9_]*[0-9])?"),un("ExponentPart","[eE][+-]?{{Digits}}"),un("HexDigit","[0-9a-fA-F]"),un("HexDigits","{{HexDigit}}(({{HexDigit}}|'_')*{{HexDigit}})?"),un("FloatTypeSuffix","[fFdD]"),un("LineTerminator","(\\x0A|(\\x0D(\\x0A)?))"),un("UnicodeMarker","uu*"),un("UnicodeEscape","\\\\{{UnicodeMarker}}{{HexDigit}}{4}"),un("RawInputCharacter","\\\\{{UnicodeMarker}}[0-9a-fA-F]{4}"),un("UnicodeInputCharacter","({{UnicodeEscape}}|{{RawInputCharacter}})"),un("OctalDigit","[0-7]"),un("ZeroToThree","[0-3]"),un("OctalEscape","\\\\({{OctalDigit}}|{{ZeroToThree}}?{{OctalDigit}}{2})"),un("EscapeSequence",`\\\\[bstnfr"'\\\\]|{{OctalEscape}}`),un("StringCharacter","(?:(?:{{EscapeSequence}})|{{UnicodeInputCharacter}})");function C5(t,e){let n=e,r=t.codePointAt(n);for(Rl.firstIdentChar.has(r)&&(n++,r>65535&&n++,r=t.codePointAt(n));Rl.restIdentChar.has(r);)n++,r>65535&&n++,r=t.codePointAt(n);return n===e?null:[t.substring(e,n)]}const vo=hf({name:"Identifier",pattern:{exec:C5},line_breaks:!1,start_chars_hint:Array.from(Rl.firstIdentChar,t=>String.fromCharCode(t))}),Fu=[],Yu={};function rt(t){t.label||(typeof t.pattern=="string"?t.label=`'${t.pattern}'`:t.pattern instanceof RegExp&&(t.label=`'${t.name}'`));const e=hf(t);return Fu.push(e),Yu[t.name]=e,e}function Ai(t){return t.longer_alt=vo,rt(t)}const X5=rt({name:"RestrictedKeyword",pattern:ki.NA}),pf=rt({name:"Keyword",pattern:ki.NA}),Tn=rt({name:"AssignmentOperator",pattern:ki.NA}),kr=rt({name:"BinaryOperator",pattern:ki.NA}),Oo=rt({name:"UnaryPrefixOperator",pattern:ki.NA}),Sl=rt({name:"UnaryPrefixOperatorNotPlusMinus",pattern:ki.NA}),ff=rt({name:"UnarySuffixOperator",pattern:ki.NA}),Bn=rt({name:"Separators",pattern:ki.NA});rt({name:"WhiteSpace",pattern:Po("[\\x09\\x20\\x0C]|{{LineTerminator}}"),group:ki.SKIPPED}),rt({name:"LineComment",pattern:/\/\/[^\n\r]*/,group:"comments"}),rt({name:"TraditionalComment",pattern:/\/\*([^*]|\*(?!\/))*\*\//,group:"comments"}),rt({name:"BinaryLiteral",pattern:/0[bB][01]([01_]*[01])?[lL]?/}),rt({name:"FloatLiteral",pattern:Po("{{Digits}}\\.({{Digits}})?({{ExponentPart}})?({{FloatTypeSuffix}})?|\\.{{Digits}}({{ExponentPart}})?({{FloatTypeSuffix}})?|{{Digits}}{{ExponentPart}}({{FloatTypeSuffix}})?|{{Digits}}({{ExponentPart}})?{{FloatTypeSuffix}}")}),rt({name:"OctalLiteral",pattern:/0_*[0-7]([0-7_]*[0-7])?[lL]?/}),rt({name:"HexFloatLiteral",pattern:Po("0[xX]({{HexDigits}}\\.?|({{HexDigits}})?\\.{{HexDigits}})[pP][+-]?{{Digits}}[fFdD]?")}),rt({name:"HexLiteral",pattern:/0[xX][0-9a-fA-F]([0-9a-fA-F_]*[0-9a-fA-F])?[lL]?/}),rt({name:"DecimalLiteral",pattern:Po("(0|[1-9](_+{{Digits}}|({{Digits}})?))[lL]?")}),rt({name:"CharLiteral",pattern:Po("'(?:[^\\\\']|(?:(?:{{EscapeSequence}})|{{UnicodeInputCharacter}}))'")}),rt({name:"TextBlock",pattern:/"""\s*\n(\\"|\s|.)*?"""/}),rt({name:"StringLiteral",pattern:Po('"(?:[^\\\\"]|{{StringCharacter}})*"')}),gf(["open","module","requires","transitive","exports","opens","to","uses","provides","with","sealed","non-sealed","permits"]).forEach(t=>{Ai({name:t[0].toUpperCase()+V5(t.substr(1)),pattern:t,categories:[vo,X5]})}),gf(["abstract","continue","for","new","switch","assert","default","if","package","synchronized","boolean","do","goto","private","this","break","double","implements","protected","throw","byte","else","import","public","throws","case","enum","return","transient","catch","extends","int","short","try","char","final","interface","static","void","class","finally","long","strictfp","volatile","const","float","native","super","while",["_","underscore"]]).forEach(t=>{const e=Array.isArray(t),n=e?t[1]:t,r=e?t[0]:t,i={name:n[0].toUpperCase()+n.substr(1),pattern:r,categories:pf};e&&(i.label=`'${n}'`),Ai(i)}),Ai({name:"Instanceof",pattern:"instanceof",categories:[pf,kr]}),Ai({name:"Var",pattern:"var",categories:vo}),Ai({name:"Yield",pattern:"yield",categories:vo}),Ai({name:"Record",pattern:"record",categories:vo}),Ai({name:"True",pattern:"true"}),Ai({name:"False",pattern:"false"}),Ai({name:"Null",pattern:"null"}),rt({name:"At",pattern:"@",categories:[Bn]}),rt({name:"Arrow",pattern:"->"}),rt({name:"DotDotDot",pattern:"...",categories:[Bn]}),rt({name:"Dot",pattern:".",categories:[Bn]}),rt({name:"Comma",pattern:",",categories:[Bn]}),rt({name:"Semicolon",pattern:";",categories:[Bn]}),rt({name:"ColonColon",pattern:"::",categories:[Bn]}),rt({name:"Colon",pattern:":"}),rt({name:"QuestionMark",pattern:"?"}),rt({name:"LBrace",pattern:"(",categories:[Bn]}),rt({name:"RBrace",pattern:")",categories:[Bn]}),rt({name:"LCurly",pattern:"{",categories:[Bn]}),rt({name:"RCurly",pattern:"}",categories:[Bn]}),rt({name:"LSquare",pattern:"[",categories:[Bn]}),rt({name:"RSquare",pattern:"]",categories:[Bn]}),rt({name:"MinusMinus",pattern:"--",categories:[Oo,ff,Sl]}),rt({name:"PlusPlus",pattern:"++",categories:[Oo,ff,Sl]}),rt({name:"Complement",pattern:"~",categories:[Oo,Sl]}),rt({name:"LessEquals",pattern:"<=",categories:[kr]}),rt({name:"LessLessEquals",pattern:"<<=",categories:[Tn]}),rt({name:"Less",pattern:"<",categories:[kr]}),rt({name:"GreaterEquals",pattern:">=",categories:[kr]}),rt({name:"GreaterGreaterEquals",pattern:">>=",categories:[Tn]}),rt({name:"GreaterGreaterGreaterEquals",pattern:">>>=",categories:[Tn]}),rt({name:"Greater",pattern:">",categories:[kr]}),rt({name:"EqualsEquals",pattern:"==",categories:[kr]}),rt({name:"Equals",pattern:"=",categories:[kr,Tn]}),rt({name:"MinusEquals",pattern:"-=",categories:[Tn]}),rt({name:"Minus",pattern:"-",categories:[kr,Oo]}),rt({name:"PlusEquals",pattern:"+=",categories:[Tn]}),rt({name:"Plus",pattern:"+",categories:[kr,Oo]}),rt({name:"AndAnd",pattern:"&&",categories:[kr]}),rt({name:"AndEquals",pattern:"&=",categories:[Tn]}),rt({name:"And",pattern:"&",categories:[kr]}),rt({name:"XorEquals",pattern:"^=",categories:[Tn]}),rt({name:"Xor",pattern:"^",categories:[kr]}),rt({name:"NotEquals",pattern:"!=",categories:[kr]}),rt({name:"OrOr",pattern:"||",categories:[kr]}),rt({name:"OrEquals",pattern:"|=",categories:[Tn]}),rt({name:"Or",pattern:"|",categories:[kr]}),rt({name:"MultiplyEquals",pattern:"*=",categories:[Tn]}),rt({name:"Star",pattern:"*",categories:[kr]}),rt({name:"DivideEquals",pattern:"/=",categories:[Tn]}),rt({name:"Divide",pattern:"/",categories:[kr]}),rt({name:"ModuloEquals",pattern:"%=",categories:[Tn]}),rt({name:"Modulo",pattern:"%",categories:[kr]}),rt({name:"Not",pattern:"!",categories:[Oo,Sl]}),Fu.push(vo),Yu.Identifier=vo;function gf(t){return t.sort((e,n)=>n.length-e.length)}var yf={allTokens:Fu,tokens:Yu};function L5(){return(process&&process.env&&process.env["prettier-java-development-mode"]==="enabled")===!1}var bf={getSkipValidations:L5};const x5=On,{allTokens:w5}=yf,{getSkipValidations:k5}=bf,A5=x5.Lexer;var T5=new A5(w5,{ensureOptimizations:!0,skipValidations:k5()});function B5(t,e){t.RULE("literal",()=>{t.OR([{ALT:()=>t.SUBRULE(t.integerLiteral)},{ALT:()=>t.SUBRULE(t.floatingPointLiteral)},{ALT:()=>t.SUBRULE(t.booleanLiteral)},{ALT:()=>t.CONSUME(e.CharLiteral)},{ALT:()=>t.CONSUME(e.TextBlock)},{ALT:()=>t.CONSUME(e.StringLiteral)},{ALT:()=>t.CONSUME(e.Null)}])}),t.RULE("integerLiteral",()=>{t.OR([{ALT:()=>t.CONSUME(e.DecimalLiteral)},{ALT:()=>t.CONSUME(e.HexLiteral)},{ALT:()=>t.CONSUME(e.OctalLiteral)},{ALT:()=>t.CONSUME(e.BinaryLiteral)}])}),t.RULE("floatingPointLiteral",()=>{t.OR([{ALT:()=>t.CONSUME(e.FloatLiteral)},{ALT:()=>t.CONSUME(e.HexFloatLiteral)}])}),t.RULE("booleanLiteral",()=>{t.OR([{ALT:()=>t.CONSUME(e.True)},{ALT:()=>t.CONSUME(e.False)}])})}var U5={defineRules:B5};const{tokenMatcher:F5}=On;function Y5(t,e){t.RULE("primitiveType",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.OR([{ALT:()=>t.SUBRULE(t.numericType)},{ALT:()=>t.CONSUME(e.Boolean)}])}),t.RULE("numericType",()=>{t.OR([{ALT:()=>t.SUBRULE(t.integralType)},{ALT:()=>t.SUBRULE(t.floatingPointType)}])}),t.RULE("integralType",()=>{t.OR([{ALT:()=>t.CONSUME(e.Byte)},{ALT:()=>t.CONSUME(e.Short)},{ALT:()=>t.CONSUME(e.Int)},{ALT:()=>t.CONSUME(e.Long)},{ALT:()=>t.CONSUME(e.Char)}])}),t.RULE("floatingPointType",()=>{t.OR([{ALT:()=>t.CONSUME(e.Float)},{ALT:()=>t.CONSUME(e.Double)}])}),t.RULE("referenceType",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.OR({DEF:[{ALT:()=>{t.SUBRULE(t.primitiveType),t.SUBRULE(t.dims)}},{ALT:()=>{t.SUBRULE(t.classOrInterfaceType),t.OPTION(()=>{t.SUBRULE2(t.dims)})}}],IGNORE_AMBIGUITIES:!0})}),t.RULE("classOrInterfaceType",()=>{t.SUBRULE(t.classType)}),t.RULE("classType",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.CONSUME(e.Identifier),t.OPTION(()=>{t.SUBRULE(t.typeArguments)}),t.MANY2(()=>{t.CONSUME(e.Dot),t.MANY3(()=>{t.SUBRULE2(t.annotation)}),t.CONSUME2(e.Identifier),t.OPTION2({GATE:()=>F5(t.LA(2).tokenType,e.Greater)===!1,DEF:()=>{t.SUBRULE2(t.typeArguments)}})})}),t.RULE("interfaceType",()=>{t.SUBRULE(t.classType)}),t.RULE("typeVariable",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.CONSUME(e.Identifier)}),t.RULE("dims",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.CONSUME(e.LSquare),t.CONSUME(e.RSquare),t.MANY2({GATE:()=>t.BACKTRACK_LOOKAHEAD(t.isDims),DEF:()=>{t.MANY3(()=>{t.SUBRULE2(t.annotation)}),t.CONSUME2(e.LSquare),t.CONSUME2(e.RSquare)}})}),t.RULE("typeParameter",()=>{t.MANY(()=>{t.SUBRULE(t.typeParameterModifier)}),t.SUBRULE(t.typeIdentifier),t.OPTION(()=>{t.SUBRULE(t.typeBound)})}),t.RULE("typeParameterModifier",()=>{t.SUBRULE(t.annotation)}),t.RULE("typeBound",()=>{t.CONSUME(e.Extends),t.SUBRULE(t.classOrInterfaceType),t.MANY2(()=>{t.SUBRULE(t.additionalBound)})}),t.RULE("additionalBound",()=>{t.CONSUME(e.And),t.SUBRULE(t.interfaceType)}),t.RULE("typeArguments",()=>{t.CONSUME(e.Less),t.SUBRULE(t.typeArgumentList),t.CONSUME(e.Greater)}),t.RULE("typeArgumentList",()=>{t.SUBRULE(t.typeArgument),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.typeArgument)})}),t.RULE("typeArgument",()=>{t.OR([{GATE:t.BACKTRACK(t.referenceType),ALT:()=>t.SUBRULE(t.referenceType)},{ALT:()=>t.SUBRULE(t.wildcard)}])}),t.RULE("wildcard",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.CONSUME(e.QuestionMark),t.OPTION(()=>{t.SUBRULE(t.wildcardBounds)})}),t.RULE("wildcardBounds",()=>{t.OR([{ALT:()=>t.CONSUME(e.Extends)},{ALT:()=>t.CONSUME(e.Super)}]),t.SUBRULE(t.referenceType)})}var N5={defineRules:Y5};const{tokenMatcher:Zf}=On;function M5(t,e){t.RULE("moduleName",()=>{t.CONSUME(e.Identifier),t.MANY(()=>{t.CONSUME(e.Dot),t.CONSUME2(e.Identifier)})}),t.RULE("packageName",()=>{t.CONSUME(e.Identifier),t.MANY(()=>{t.CONSUME(e.Dot),t.CONSUME2(e.Identifier)})}),t.RULE("typeName",()=>{t.CONSUME(e.Identifier),t.MANY(()=>{t.CONSUME(e.Dot),t.CONSUME2(e.Identifier)})}),t.RULE("expressionName",()=>{t.CONSUME(e.Identifier),t.MANY({GATE:()=>Zf(this.LA(2).tokenType,e.Identifier),DEF:()=>{t.CONSUME(e.Dot),t.CONSUME2(e.Identifier)}})}),t.RULE("methodName",()=>{t.CONSUME(e.Identifier)}),t.RULE("packageOrTypeName",()=>{t.CONSUME(e.Identifier),t.MANY({GATE:()=>Zf(this.LA(2).tokenType,e.Star)===!1,DEF:()=>{t.CONSUME(e.Dot),t.CONSUME2(e.Identifier)}})}),t.RULE("ambiguousName",()=>{t.CONSUME(e.Identifier),t.MANY(()=>{t.CONSUME(e.Dot),t.CONSUME2(e.Identifier)})})}var E5={defineRules:M5};const{isRecognitionException:H5,tokenMatcher:zo,EOF:K5}=On;function J5(t,e){t.RULE("compilationUnit",()=>{const n=t.BACKTRACK_LOOKAHEAD(t.isModuleCompilationUnit);t.OR([{GATE:()=>n===!1,ALT:()=>t.SUBRULE(t.ordinaryCompilationUnit)},{ALT:()=>t.SUBRULE(t.modularCompilationUnit)}]),t.CONSUME(K5)}),t.RULE("ordinaryCompilationUnit",()=>{t.OPTION({GATE:t.BACKTRACK(t.packageDeclaration),DEF:()=>{t.SUBRULE(t.packageDeclaration)}}),t.MANY(()=>{t.SUBRULE3(t.importDeclaration)}),t.MANY2(()=>{t.SUBRULE(t.typeDeclaration)})}),t.RULE("modularCompilationUnit",()=>{t.MANY(()=>{t.SUBRULE(t.importDeclaration)}),t.SUBRULE(t.moduleDeclaration)}),t.RULE("packageDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.packageModifier)}),t.CONSUME(e.Package),t.CONSUME(e.Identifier),t.MANY2(()=>{t.CONSUME(e.Dot),t.CONSUME2(e.Identifier)}),t.CONSUME2(e.Semicolon)}),t.RULE("packageModifier",()=>{t.SUBRULE(t.annotation)}),t.RULE("importDeclaration",()=>{t.OR([{ALT:()=>{t.CONSUME(e.Import),t.OPTION(()=>{t.CONSUME(e.Static)}),t.SUBRULE(t.packageOrTypeName),t.OPTION2(()=>{t.CONSUME(e.Dot),t.CONSUME(e.Star)}),t.CONSUME(e.Semicolon)}},{ALT:()=>t.SUBRULE(t.emptyStatement)}])}),t.RULE("typeDeclaration",()=>{const n=this.BACKTRACK_LOOKAHEAD(t.isClassDeclaration);t.OR([{GATE:()=>n,ALT:()=>t.SUBRULE(t.classDeclaration)},{ALT:()=>t.SUBRULE(t.interfaceDeclaration)},{ALT:()=>t.CONSUME(e.Semicolon)}])}),t.RULE("moduleDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.OPTION(()=>{t.CONSUME(e.Open)}),t.CONSUME(e.Module),t.CONSUME(e.Identifier),t.MANY2(()=>{t.CONSUME(e.Dot),t.CONSUME2(e.Identifier)}),t.CONSUME(e.LCurly),t.MANY3(()=>{t.SUBRULE(t.moduleDirective)}),t.CONSUME(e.RCurly)}),t.RULE("moduleDirective",()=>{t.OR([{ALT:()=>t.SUBRULE(t.requiresModuleDirective)},{ALT:()=>t.SUBRULE(t.exportsModuleDirective)},{ALT:()=>t.SUBRULE(t.opensModuleDirective)},{ALT:()=>t.SUBRULE(t.usesModuleDirective)},{ALT:()=>t.SUBRULE(t.providesModuleDirective)}])}),t.RULE("requiresModuleDirective",()=>{t.CONSUME(e.Requires),t.MANY({GATE:()=>(zo(t.LA(1).tokenType,e.Transitive)&&zo(t.LA(2).tokenType,e.Separators))===!1,DEF:()=>{t.SUBRULE(t.requiresModifier)}}),t.SUBRULE(t.moduleName),t.CONSUME(e.Semicolon)}),t.RULE("exportsModuleDirective",()=>{t.CONSUME(e.Exports),t.SUBRULE(t.packageName),t.OPTION(()=>{t.CONSUME(e.To),t.SUBRULE(t.moduleName),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.moduleName)})}),t.CONSUME(e.Semicolon)}),t.RULE("opensModuleDirective",()=>{t.CONSUME(e.Opens),t.SUBRULE(t.packageName),t.OPTION(()=>{t.CONSUME(e.To),t.SUBRULE(t.moduleName),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.moduleName)})}),t.CONSUME(e.Semicolon)}),t.RULE("usesModuleDirective",()=>{t.CONSUME(e.Uses),t.SUBRULE(t.typeName),t.CONSUME(e.Semicolon)}),t.RULE("providesModuleDirective",()=>{t.CONSUME(e.Provides),t.SUBRULE(t.typeName),t.CONSUME(e.With),t.SUBRULE2(t.typeName),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE3(t.typeName)}),t.CONSUME(e.Semicolon)}),t.RULE("requiresModifier",()=>{t.OR([{ALT:()=>t.CONSUME(e.Transitive)},{ALT:()=>t.CONSUME(e.Static)}])}),t.RULE("isModuleCompilationUnit",()=>{t.OPTION(()=>(t.SUBRULE(t.packageDeclaration),!1));try{t.MANY(()=>{t.SUBRULE2(t.importDeclaration)}),t.MANY2({GATE:()=>(zo(t.LA(1).tokenType,e.At)&&zo(t.LA(2).tokenType,e.Interface))===!1,DEF:()=>{t.SUBRULE(t.annotation)}})}catch(r){throw H5(r)?"Cannot Identify if the source code is an OrdinaryCompilationUnit or  ModularCompilationUnit":r}const n=this.LA(1).tokenType;return zo(n,e.Open)||zo(n,e.Module)})}var j5={defineRules:J5};const{isRecognitionException:P5,tokenMatcher:Ft}=On;function O5(t,e){t.RULE("classDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.classModifier)}),t.OR([{ALT:()=>t.SUBRULE(t.normalClassDeclaration)},{ALT:()=>t.SUBRULE(t.enumDeclaration)},{ALT:()=>t.SUBRULE(t.recordDeclaration)}])}),t.RULE("normalClassDeclaration",()=>{t.CONSUME(e.Class),t.SUBRULE(t.typeIdentifier),t.OPTION(()=>{t.SUBRULE(t.typeParameters)}),t.OPTION2(()=>{t.SUBRULE(t.superclass)}),t.OPTION3(()=>{t.SUBRULE(t.superinterfaces)}),t.OPTION4(()=>{t.SUBRULE(t.classPermits)}),t.SUBRULE(t.classBody)}),t.RULE("classModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Protected)},{ALT:()=>t.CONSUME(e.Private)},{ALT:()=>t.CONSUME(e.Abstract)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Final)},{ALT:()=>t.CONSUME(e.Sealed)},{ALT:()=>t.CONSUME(e.NonSealed)},{ALT:()=>t.CONSUME(e.Strictfp)}])}),t.RULE("typeParameters",()=>{t.CONSUME(e.Less),t.SUBRULE(t.typeParameterList),t.CONSUME(e.Greater)}),t.RULE("typeParameterList",()=>{t.SUBRULE(t.typeParameter),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.typeParameter)})}),t.RULE("superclass",()=>{t.CONSUME(e.Extends),t.SUBRULE(t.classType)}),t.RULE("superinterfaces",()=>{t.CONSUME(e.Implements),t.SUBRULE(t.interfaceTypeList)}),t.RULE("interfaceTypeList",()=>{t.SUBRULE(t.interfaceType),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.interfaceType)})}),t.RULE("classPermits",()=>{t.CONSUME(e.Permits),t.SUBRULE(t.typeName),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.typeName)})}),t.RULE("classBody",()=>{t.CONSUME(e.LCurly),t.MANY(()=>{t.SUBRULE(t.classBodyDeclaration)}),t.CONSUME(e.RCurly)});const n={unknown:0,fieldDeclaration:1,methodDeclaration:2,classDeclaration:3,interfaceDeclaration:4,semiColon:5,instanceInitializer:6,staticInitializer:7,constructorDeclaration:8};t.RULE("classBodyDeclaration",()=>{const r=t.BACKTRACK_LOOKAHEAD(t.identifyClassBodyDeclarationType);t.OR([{GATE:()=>r>=n.fieldDeclaration&&r<=n.semiColon,ALT:()=>t.SUBRULE(t.classMemberDeclaration,{ARGS:[r]})},{ALT:()=>t.SUBRULE(t.instanceInitializer)},{ALT:()=>t.SUBRULE(t.staticInitializer)},{GATE:()=>Ft(r,n.constructorDeclaration),ALT:()=>t.SUBRULE(t.constructorDeclaration)}])}),t.RULE("classMemberDeclaration",r=>{t.OR([{GATE:()=>r===n.fieldDeclaration,ALT:()=>t.SUBRULE(t.fieldDeclaration)},{GATE:()=>r===n.methodDeclaration,ALT:()=>t.SUBRULE(t.methodDeclaration)},{GATE:()=>r===n.classDeclaration,ALT:()=>t.SUBRULE(t.classDeclaration)},{GATE:()=>r===n.interfaceDeclaration,ALT:()=>t.SUBRULE(t.interfaceDeclaration)},{ALT:()=>t.CONSUME(e.Semicolon)}])}),t.RULE("fieldDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.fieldModifier)}),t.SUBRULE(t.unannType),t.SUBRULE(t.variableDeclaratorList),t.CONSUME(e.Semicolon)}),t.RULE("fieldModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Protected)},{ALT:()=>t.CONSUME(e.Private)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Final)},{ALT:()=>t.CONSUME(e.Transient)},{ALT:()=>t.CONSUME(e.Volatile)}])}),t.RULE("variableDeclaratorList",()=>{t.SUBRULE(t.variableDeclarator),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.variableDeclarator)})}),t.RULE("variableDeclarator",()=>{t.SUBRULE(t.variableDeclaratorId),t.OPTION(()=>{t.CONSUME(e.Equals),t.SUBRULE(t.variableInitializer)})}),t.RULE("variableDeclaratorId",()=>{t.CONSUME(e.Identifier),t.OPTION(()=>{t.SUBRULE(t.dims)})}),t.RULE("variableInitializer",()=>{t.OR([{ALT:()=>t.SUBRULE(t.expression)},{ALT:()=>t.SUBRULE(t.arrayInitializer)}])}),t.RULE("unannType",()=>{t.OR([{ALT:()=>t.SUBRULE(t.unannPrimitiveTypeWithOptionalDimsSuffix)},{ALT:()=>t.SUBRULE(t.unannReferenceType)}])}),t.RULE("unannPrimitiveTypeWithOptionalDimsSuffix",()=>{t.SUBRULE(t.unannPrimitiveType),t.OPTION({GATE:()=>this.BACKTRACK_LOOKAHEAD(t.isDims),DEF:()=>t.SUBRULE2(t.dims)})}),t.RULE("unannPrimitiveType",()=>{t.OR([{ALT:()=>t.SUBRULE(t.numericType)},{ALT:()=>t.CONSUME(e.Boolean)}])}),t.RULE("unannReferenceType",()=>{t.SUBRULE(t.unannClassOrInterfaceType),t.OPTION({GATE:()=>this.BACKTRACK_LOOKAHEAD(t.isDims),DEF:()=>t.SUBRULE2(t.dims)})}),t.RULE("unannClassOrInterfaceType",()=>{t.SUBRULE(t.unannClassType)}),t.RULE("unannClassType",()=>{t.CONSUME(e.Identifier),t.OPTION(()=>{t.SUBRULE(t.typeArguments)}),t.MANY2(()=>{t.CONSUME(e.Dot),t.MANY3(()=>{t.SUBRULE2(t.annotation)}),t.CONSUME2(e.Identifier),t.OPTION2(()=>{t.SUBRULE2(t.typeArguments)})})}),t.RULE("unannInterfaceType",()=>{t.SUBRULE(t.unannClassType)}),t.RULE("unannTypeVariable",()=>{t.CONSUME(e.Identifier)}),t.RULE("methodDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.methodModifier)}),t.SUBRULE(t.methodHeader),t.SUBRULE(t.methodBody)}),t.RULE("methodModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Protected)},{ALT:()=>t.CONSUME(e.Private)},{ALT:()=>t.CONSUME(e.Abstract)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Final)},{ALT:()=>t.CONSUME(e.Synchronized)},{ALT:()=>t.CONSUME(e.Native)},{ALT:()=>t.CONSUME(e.Strictfp)}])}),t.RULE("methodHeader",()=>{t.OPTION(()=>{t.SUBRULE(t.typeParameters),t.MANY(()=>{t.SUBRULE(t.annotation)})}),t.SUBRULE(t.result),t.SUBRULE(t.methodDeclarator),t.OPTION2(()=>{t.SUBRULE(t.throws)})}),t.RULE("result",()=>{t.OR([{ALT:()=>t.SUBRULE(t.unannType)},{ALT:()=>t.CONSUME(e.Void)}])}),t.RULE("methodDeclarator",()=>{t.CONSUME(e.Identifier),t.CONSUME(e.LBrace),t.OPTION(()=>{t.SUBRULE(t.formalParameterList)}),t.CONSUME(e.RBrace),t.OPTION2(()=>{t.SUBRULE(t.dims)})}),t.RULE("receiverParameter",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.SUBRULE(t.unannType),t.OPTION(()=>{t.CONSUME(e.Identifier),t.CONSUME(e.Dot)}),t.CONSUME(e.This)}),t.RULE("formalParameterList",()=>{t.SUBRULE(t.formalParameter),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.formalParameter)})}),t.RULE("formalParameter",()=>{t.OR([{GATE:t.BACKTRACK(t.variableParaRegularParameter),ALT:()=>t.SUBRULE(t.variableParaRegularParameter)},{ALT:()=>t.SUBRULE(t.variableArityParameter)}])}),t.RULE("variableParaRegularParameter",()=>{t.MANY(()=>{t.SUBRULE(t.variableModifier)}),t.SUBRULE(t.unannType),t.SUBRULE(t.variableDeclaratorId)}),t.RULE("variableArityParameter",()=>{t.MANY(()=>{t.SUBRULE(t.variableModifier)}),t.SUBRULE(t.unannType),t.MANY2(()=>{t.SUBRULE(t.annotation)}),t.CONSUME(e.DotDotDot),t.CONSUME(e.Identifier)}),t.RULE("variableModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Final)}])}),t.RULE("throws",()=>{t.CONSUME(e.Throws),t.SUBRULE(t.exceptionTypeList)}),t.RULE("exceptionTypeList",()=>{t.SUBRULE(t.exceptionType),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.exceptionType)})}),t.RULE("exceptionType",()=>{t.SUBRULE(t.classType)}),t.RULE("methodBody",()=>{t.OR([{ALT:()=>t.SUBRULE(t.block)},{ALT:()=>t.CONSUME(e.Semicolon)}])}),t.RULE("instanceInitializer",()=>{t.SUBRULE(t.block)}),t.RULE("staticInitializer",()=>{t.CONSUME(e.Static),t.SUBRULE(t.block)}),t.RULE("constructorDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.constructorModifier)}),t.SUBRULE(t.constructorDeclarator),t.OPTION(()=>{t.SUBRULE(t.throws)}),t.SUBRULE(t.constructorBody)}),t.RULE("constructorModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Protected)},{ALT:()=>t.CONSUME(e.Private)}])}),t.RULE("constructorDeclarator",()=>{t.OPTION(()=>{t.SUBRULE(t.typeParameters)}),t.SUBRULE(t.simpleTypeName),t.CONSUME(e.LBrace),t.OPTION2({GATE:t.BACKTRACK(t.receiverParameter),DEF:()=>{t.SUBRULE(t.receiverParameter),t.CONSUME(e.Comma)}}),t.OPTION3(()=>{t.SUBRULE(t.formalParameterList)}),t.CONSUME(e.RBrace)}),t.RULE("simpleTypeName",()=>{t.CONSUME(e.Identifier)}),t.RULE("constructorBody",()=>{t.CONSUME(e.LCurly),t.OPTION({GATE:t.BACKTRACK(t.explicitConstructorInvocation),DEF:()=>{t.SUBRULE(t.explicitConstructorInvocation)}}),t.OPTION2(()=>{t.SUBRULE(t.blockStatements)}),t.CONSUME(e.RCurly)}),t.RULE("explicitConstructorInvocation",()=>{t.OR([{ALT:()=>t.SUBRULE(t.unqualifiedExplicitConstructorInvocation)},{ALT:()=>t.SUBRULE(t.qualifiedExplicitConstructorInvocation)}])}),t.RULE("unqualifiedExplicitConstructorInvocation",()=>{t.OPTION(()=>{t.SUBRULE(t.typeArguments)}),t.OR([{ALT:()=>t.CONSUME(e.This)},{ALT:()=>t.CONSUME(e.Super)}]),t.CONSUME(e.LBrace),t.OPTION2(()=>{t.SUBRULE(t.argumentList)}),t.CONSUME(e.RBrace),t.CONSUME(e.Semicolon)}),t.RULE("qualifiedExplicitConstructorInvocation",()=>{t.SUBRULE(t.expressionName),t.CONSUME(e.Dot),t.OPTION(()=>{t.SUBRULE(t.typeArguments)}),t.CONSUME(e.Super),t.CONSUME(e.LBrace),t.OPTION2(()=>{t.SUBRULE(t.argumentList)}),t.CONSUME(e.RBrace),t.CONSUME(e.Semicolon)}),t.RULE("enumDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.classModifier)}),t.CONSUME(e.Enum),t.SUBRULE(t.typeIdentifier),t.OPTION(()=>{t.SUBRULE(t.superinterfaces)}),t.SUBRULE(t.enumBody)}),t.RULE("enumBody",()=>{t.CONSUME(e.LCurly),t.OPTION(()=>{t.SUBRULE(t.enumConstantList)}),t.OPTION2(()=>{t.CONSUME(e.Comma)}),t.OPTION3(()=>{t.SUBRULE(t.enumBodyDeclarations)}),t.CONSUME(e.RCurly)}),t.RULE("enumConstantList",()=>{t.SUBRULE(t.enumConstant),t.MANY({GATE:()=>{const r=t.LA(2);return Ft(r,e.Identifier)||Ft(r,e.At)},DEF:()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.enumConstant)}})}),t.RULE("enumConstant",()=>{t.MANY(()=>{t.SUBRULE(t.enumConstantModifier)}),t.CONSUME(e.Identifier),t.OPTION(()=>{t.CONSUME(e.LBrace),t.OPTION2(()=>{t.SUBRULE(t.argumentList)}),t.CONSUME(e.RBrace)}),t.OPTION3(()=>{t.SUBRULE(t.classBody)})}),t.RULE("enumConstantModifier",()=>{t.SUBRULE(t.annotation)}),t.RULE("enumBodyDeclarations",()=>{t.CONSUME(e.Semicolon),t.MANY(()=>{t.SUBRULE(t.classBodyDeclaration)})}),t.RULE("recordDeclaration",()=>{t.CONSUME(e.Record),t.SUBRULE(t.typeIdentifier),t.OPTION(()=>{t.SUBRULE(t.typeParameters)}),t.SUBRULE(t.recordHeader),t.OPTION2(()=>{t.SUBRULE(t.superinterfaces)}),t.SUBRULE(t.recordBody)}),t.RULE("recordHeader",()=>{t.CONSUME(e.LBrace),t.OPTION(()=>{t.SUBRULE(t.recordComponentList)}),t.CONSUME(e.RBrace)}),t.RULE("recordComponentList",()=>{t.SUBRULE(t.recordComponent),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.recordComponent)})}),t.RULE("recordComponent",()=>{t.MANY(()=>{t.SUBRULE(t.recordComponentModifier)}),t.SUBRULE(t.unannType),t.OR([{ALT:()=>t.CONSUME(e.Identifier)},{ALT:()=>t.SUBRULE(t.variableArityRecordComponent)}])}),t.RULE("variableArityRecordComponent",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.CONSUME(e.DotDotDot),t.CONSUME(e.Identifier)}),t.RULE("recordComponentModifier",()=>{t.SUBRULE(t.annotation)}),t.RULE("recordBody",()=>{t.CONSUME(e.LCurly),t.MANY(()=>{t.SUBRULE(t.recordBodyDeclaration)}),t.CONSUME(e.RCurly)}),t.RULE("recordBodyDeclaration",()=>{t.OR([{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.isCompactConstructorDeclaration),ALT:()=>t.SUBRULE(t.compactConstructorDeclaration)},{ALT:()=>t.SUBRULE(t.classBodyDeclaration)}])}),t.RULE("compactConstructorDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.constructorModifier)}),t.SUBRULE(t.simpleTypeName),t.SUBRULE(t.constructorBody)}),t.RULE("isClassDeclaration",()=>{let r=!1;t.OPTION(()=>{t.CONSUME(e.Semicolon)})&&(r=!0);try{t.MANY({GATE:()=>(Ft(t.LA(1).tokenType,e.At)&&Ft(t.LA(2).tokenType,e.Interface))===!1,DEF:()=>{t.SUBRULE(t.classModifier)}})}catch(s){throw P5(s)?"Cannot Identify if the <TypeDeclaration> is a <ClassDeclaration> or an <InterfaceDeclaration>":s}if(r)return!1;const i=this.LA(1).tokenType;return Ft(i,e.Class)||Ft(i,e.Enum)||Ft(i,e.Record)&&Ft(this.LA(2).tokenType,e.Identifier)}),t.RULE("identifyClassBodyDeclarationType",()=>{try{let r=this.LA(1).tokenType,i=this.LA(2).tokenType;switch(r){case e.Semicolon:return n.semiColon;case e.LCurly:return n.instanceInitializer;case e.Static:switch(i){case e.LCurly:return n.staticInitializer}}if(t.MANY({GATE:()=>(Ft(t.LA(1).tokenType,e.At)&&Ft(t.LA(2).tokenType,e.Interface))===!1,DEF:()=>{t.OR([{GATE:()=>(Ft(t.LA(1).tokenType,e.At)&&Ft(t.LA(2).tokenType,e.Interface))===!1,ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Protected)},{ALT:()=>t.CONSUME(e.Private)},{ALT:()=>t.CONSUME(e.Abstract)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Final)},{ALT:()=>t.CONSUME(e.Transient)},{ALT:()=>t.CONSUME(e.Volatile)},{ALT:()=>t.CONSUME(e.Synchronized)},{ALT:()=>t.CONSUME(e.Native)},{ALT:()=>t.CONSUME(e.Sealed)},{ALT:()=>t.CONSUME(e.NonSealed)},{ALT:()=>t.CONSUME(e.Strictfp)}])}}),r=this.LA(1).tokenType,i=this.LA(2).tokenType,Ft(r,e.Identifier)&&Ft(i,e.LBrace))return n.constructorDeclaration;if(Ft(r,e.Class)||Ft(r,e.Enum)||Ft(r,e.Record))return n.classDeclaration;if(Ft(r,e.Interface)||Ft(r,e.At))return n.interfaceDeclaration;if(Ft(r,e.Void))return n.methodDeclaration;if(Ft(r,e.Less)){this.SUBRULE(t.typeParameters);const o=this.LA(1).tokenType,a=this.LA(2).tokenType;return Ft(o,e.Identifier)&&Ft(a,e.LBrace)?n.constructorDeclaration:n.methodDeclaration}this.SUBRULE(t.unannType);const s=this.LA(1);return i=this.LA(2).tokenType,Ft(s,e.Identifier)&&Ft(i,e.LBrace)?n.methodDeclaration:Ft(s,e.Identifier)?n.fieldDeclaration:n.unknown}catch{throw Error("Cannot Identify the type of a <classBodyDeclaration>")}}),t.RULE("isDims",()=>(t.MANY(t.annotation),Ft(this.LA(1).tokenType,e.LSquare)&&Ft(this.LA(2).tokenType,e.RSquare))),t.RULE("isCompactConstructorDeclaration",()=>{t.MANY(t.constructorModifier),t.SUBRULE(t.simpleTypeName),t.CONSUME(e.LCurly)})}var z5={defineRules:O5};const{tokenMatcher:rr}=On;function _5(t,e){t.RULE("interfaceDeclaration",()=>{t.MANY({DEF:()=>{t.SUBRULE(t.interfaceModifier)},MAX_LOOKAHEAD:2}),t.OR([{ALT:()=>t.SUBRULE(t.normalInterfaceDeclaration)},{ALT:()=>t.SUBRULE(t.annotationTypeDeclaration)}])}),t.RULE("normalInterfaceDeclaration",()=>{t.CONSUME(e.Interface),t.SUBRULE(t.typeIdentifier),t.OPTION(()=>{t.SUBRULE(t.typeParameters)}),t.OPTION2(()=>{t.SUBRULE(t.extendsInterfaces)}),t.OPTION3(()=>{t.SUBRULE(t.interfacePermits)}),t.SUBRULE(t.interfaceBody)}),t.RULE("interfaceModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Protected)},{ALT:()=>t.CONSUME(e.Private)},{ALT:()=>t.CONSUME(e.Abstract)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Sealed)},{ALT:()=>t.CONSUME(e.NonSealed)},{ALT:()=>t.CONSUME(e.Strictfp)}])}),t.RULE("extendsInterfaces",()=>{t.CONSUME(e.Extends),t.SUBRULE(t.interfaceTypeList)}),t.RULE("interfacePermits",()=>{t.CONSUME(e.Permits),t.SUBRULE(t.typeName),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.typeName)})}),t.RULE("interfaceBody",()=>{t.CONSUME(e.LCurly),t.MANY(()=>{t.SUBRULE(t.interfaceMemberDeclaration)}),t.CONSUME(e.RCurly)});const n={unknown:0,constantDeclaration:1,interfaceMethodDeclaration:2,classDeclaration:3,interfaceDeclaration:4,semiColon:5};t.RULE("interfaceMemberDeclaration",()=>{const i=this.BACKTRACK_LOOKAHEAD(t.identifyInterfaceBodyDeclarationType);t.OR([{GATE:()=>i===n.constantDeclaration,ALT:()=>t.SUBRULE(t.constantDeclaration)},{GATE:()=>i===n.interfaceMethodDeclaration,ALT:()=>t.SUBRULE(t.interfaceMethodDeclaration)},{GATE:()=>i===n.classDeclaration,ALT:()=>t.SUBRULE(t.classDeclaration)},{GATE:()=>i===n.interfaceDeclaration,ALT:()=>t.SUBRULE(t.interfaceDeclaration)},{ALT:()=>t.CONSUME(e.Semicolon)}])}),t.RULE("constantDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.constantModifier)}),t.SUBRULE(t.unannType),t.SUBRULE(t.variableDeclaratorList),t.CONSUME(e.Semicolon)}),t.RULE("constantModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Final)}])}),t.RULE("interfaceMethodDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.interfaceMethodModifier)}),t.SUBRULE(t.methodHeader),t.SUBRULE(t.methodBody)}),t.RULE("interfaceMethodModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Private)},{ALT:()=>t.CONSUME(e.Abstract)},{ALT:()=>t.CONSUME(e.Default)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Strictfp)}])}),t.RULE("annotationTypeDeclaration",()=>{t.CONSUME(e.At),t.CONSUME(e.Interface),t.SUBRULE(t.typeIdentifier),t.SUBRULE(t.annotationTypeBody)}),t.RULE("annotationTypeBody",()=>{t.CONSUME(e.LCurly),t.MANY(()=>{t.SUBRULE(t.annotationTypeMemberDeclaration)}),t.CONSUME(e.RCurly)});const r={unknown:0,annotationTypeElementDeclaration:2,constantDeclaration:1,classDeclaration:3,interfaceDeclaration:4,semiColon:5};t.RULE("annotationTypeMemberDeclaration",()=>{const i=this.BACKTRACK_LOOKAHEAD(t.identifyAnnotationBodyDeclarationType);t.OR([{GATE:()=>i===r.annotationTypeElementDeclaration,ALT:()=>t.SUBRULE(t.annotationTypeElementDeclaration)},{GATE:()=>i===r.constantDeclaration,ALT:()=>t.SUBRULE(t.constantDeclaration)},{GATE:()=>i===r.classDeclaration,ALT:()=>t.SUBRULE(t.classDeclaration)},{GATE:()=>i===r.interfaceDeclaration,ALT:()=>t.SUBRULE(t.interfaceDeclaration)},{ALT:()=>t.CONSUME(e.Semicolon)}])}),t.RULE("annotationTypeElementDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.annotationTypeElementModifier)}),t.SUBRULE(t.unannType),t.CONSUME(e.Identifier),t.CONSUME(e.LBrace),t.CONSUME(e.RBrace),t.OPTION(()=>{t.SUBRULE(t.dims)}),t.OPTION2(()=>{t.SUBRULE(t.defaultValue)}),t.CONSUME(e.Semicolon)}),t.RULE("annotationTypeElementModifier",()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Abstract)}])}),t.RULE("defaultValue",()=>{t.CONSUME(e.Default),t.SUBRULE(t.elementValue)}),t.RULE("annotation",()=>{t.CONSUME(e.At),t.SUBRULE(t.typeName),t.OPTION(()=>{t.CONSUME(e.LBrace),t.OR({DEF:[{ALT:()=>t.SUBRULE(t.elementValuePairList)},{ALT:()=>t.SUBRULE(t.elementValue)},{ALT:()=>{}}],IGNORE_AMBIGUITIES:!0,MAX_LOOKAHEAD:2}),t.CONSUME(e.RBrace)})}),t.RULE("elementValuePairList",()=>{t.SUBRULE(t.elementValuePair),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.elementValuePair)})}),t.RULE("elementValuePair",()=>{t.CONSUME(e.Identifier),t.CONSUME(e.Equals),t.SUBRULE(t.elementValue)}),t.RULE("elementValue",()=>{const i=this.BACKTRACK_LOOKAHEAD(t.isSimpleElementValueAnnotation);t.OR([{GATE:()=>i===!1,ALT:()=>t.SUBRULE(t.expression)},{ALT:()=>t.SUBRULE(t.elementValueArrayInitializer)},{GATE:()=>i===!0,ALT:()=>t.SUBRULE(t.annotation)}])}),t.RULE("elementValueArrayInitializer",()=>{t.CONSUME(e.LCurly),t.OPTION(()=>{t.SUBRULE(t.elementValueList)}),t.OPTION2(()=>{t.CONSUME(e.Comma)}),t.CONSUME(e.RCurly)}),t.RULE("elementValueList",()=>{t.SUBRULE(t.elementValue),t.MANY({GATE:()=>rr(t.LA(2).tokenType,e.RCurly)===!1,DEF:()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.elementValue)}})}),t.RULE("identifyInterfaceBodyDeclarationType",()=>{let i=this.LA(1).tokenType;if(rr(i,e.Semicolon))return n.semiColon;if(t.MANY({GATE:()=>(rr(t.LA(1).tokenType,e.At)&&rr(t.LA(2).tokenType,e.Interface))===!1,DEF:()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Protected)},{ALT:()=>t.CONSUME(e.Private)},{ALT:()=>t.CONSUME(e.Abstract)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Sealed)},{ALT:()=>t.CONSUME(e.NonSealed)},{ALT:()=>t.CONSUME(e.Strictfp)},{ALT:()=>t.CONSUME(e.Final)},{ALT:()=>t.CONSUME(e.Default)}])}}),i=this.LA(1).tokenType,rr(i,e.Class)||rr(i,e.Enum)||rr(i,e.Record))return n.classDeclaration;if(rr(i,e.Interface)||rr(i,e.At))return n.interfaceDeclaration;if(rr(i,e.Void)||rr(i,e.Less))return n.interfaceMethodDeclaration;this.SUBRULE(t.unannType);const s=this.LA(1),o=this.LA(2).tokenType;return rr(s,e.Identifier)&&rr(o,e.LBrace)?n.interfaceMethodDeclaration:rr(s,e.Identifier)?n.constantDeclaration:n.unknown}),t.RULE("identifyAnnotationBodyDeclarationType",()=>{let i=this.LA(1).tokenType;if(rr(i,e.Semicolon))return r.semiColon;if(t.MANY({GATE:()=>(rr(t.LA(1).tokenType,e.At)&&rr(t.LA(2).tokenType,e.Interface))===!1,DEF:()=>{t.OR([{ALT:()=>t.SUBRULE(t.annotation)},{ALT:()=>t.CONSUME(e.Public)},{ALT:()=>t.CONSUME(e.Protected)},{ALT:()=>t.CONSUME(e.Private)},{ALT:()=>t.CONSUME(e.Abstract)},{ALT:()=>t.CONSUME(e.Static)},{ALT:()=>t.CONSUME(e.Final)},{ALT:()=>t.CONSUME(e.Strictfp)}])}}),i=this.LA(1).tokenType,rr(i,e.Class)||rr(i,e.Enum))return r.classDeclaration;if(rr(i,e.Interface)||rr(i,e.At))return r.interfaceDeclaration;this.SUBRULE(t.unannType),i=this.LA(1).tokenType;const s=this.LA(2).tokenType;return rr(i,e.Identifier)&&rr(s,e.LBrace)?r.annotationTypeElementDeclaration:rr(i,e.Identifier)?r.constantDeclaration:r.unknown}),t.RULE("isSimpleElementValueAnnotation",()=>{switch(t.SUBRULE(t.annotation),this.LA(1).tokenType){case e.Comma:case e.Semicolon:case e.RCurly:case e.RBrace:return!0;default:return!1}})}var D5={defineRules:_5};const{tokenMatcher:Q5}=On;function q5(t,e){t.RULE("arrayInitializer",()=>{t.CONSUME(e.LCurly),t.OPTION(()=>{t.SUBRULE(t.variableInitializerList)}),t.OPTION2(()=>{t.CONSUME(e.Comma)}),t.CONSUME(e.RCurly)}),t.RULE("variableInitializerList",()=>{t.SUBRULE(t.variableInitializer),t.MANY({GATE:()=>Q5(this.LA(2).tokenType,e.RCurly)===!1,DEF:()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.variableInitializer)}})})}var $5={defineRules:q5};const{tokenMatcher:_o}=On;function eS(t,e){t.RULE("block",()=>{t.CONSUME(e.LCurly),t.OPTION(()=>{t.SUBRULE(t.blockStatements)}),t.CONSUME(e.RCurly)}),t.RULE("blockStatements",()=>{t.SUBRULE(t.blockStatement),t.MANY(()=>{t.SUBRULE2(t.blockStatement)})}),t.RULE("blockStatement",()=>{const n=this.BACKTRACK_LOOKAHEAD(t.isLocalVariableDeclaration),r=this.BACKTRACK_LOOKAHEAD(t.isClassDeclaration);t.OR({DEF:[{GATE:()=>n,ALT:()=>t.SUBRULE(t.localVariableDeclarationStatement)},{GATE:()=>r,ALT:()=>t.SUBRULE(t.classDeclaration)},{ALT:()=>t.SUBRULE(t.interfaceDeclaration)},{ALT:()=>t.SUBRULE(t.statement)}],IGNORE_AMBIGUITIES:!0})}),t.RULE("localVariableDeclarationStatement",()=>{t.SUBRULE(t.localVariableDeclaration),t.CONSUME(e.Semicolon)}),t.RULE("localVariableDeclaration",()=>{t.MANY(()=>{t.SUBRULE(t.variableModifier)}),t.SUBRULE(t.localVariableType),t.SUBRULE(t.variableDeclaratorList)}),t.RULE("localVariableType",()=>{t.OR({DEF:[{ALT:()=>t.SUBRULE(t.unannType)},{ALT:()=>t.CONSUME(e.Var)}],IGNORE_AMBIGUITIES:!0})}),t.RULE("statement",()=>{t.OR({DEF:[{ALT:()=>t.SUBRULE(t.statementWithoutTrailingSubstatement)},{ALT:()=>t.SUBRULE(t.labeledStatement)},{ALT:()=>t.SUBRULE(t.ifStatement)},{ALT:()=>t.SUBRULE(t.whileStatement)},{ALT:()=>t.SUBRULE(t.forStatement)}],MAX_LOOKAHEAD:2})}),t.RULE("statementWithoutTrailingSubstatement",()=>{t.OR({DEF:[{ALT:()=>t.SUBRULE(t.block)},{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.yieldStatement),ALT:()=>t.SUBRULE(t.yieldStatement)},{ALT:()=>t.SUBRULE(t.emptyStatement)},{GATE:()=>!_o(this.LA(1).tokenType,e.Switch),ALT:()=>t.SUBRULE(t.expressionStatement)},{ALT:()=>t.SUBRULE(t.assertStatement)},{ALT:()=>t.SUBRULE(t.switchStatement)},{ALT:()=>t.SUBRULE(t.doStatement)},{ALT:()=>t.SUBRULE(t.breakStatement)},{ALT:()=>t.SUBRULE(t.continueStatement)},{ALT:()=>t.SUBRULE(t.returnStatement)},{ALT:()=>t.SUBRULE(t.synchronizedStatement)},{ALT:()=>t.SUBRULE(t.throwStatement)},{ALT:()=>t.SUBRULE(t.tryStatement)}],IGNORE_AMBIGUITIES:!0})}),t.RULE("emptyStatement",()=>{t.CONSUME(e.Semicolon)}),t.RULE("labeledStatement",()=>{t.CONSUME(e.Identifier),t.CONSUME(e.Colon),t.SUBRULE(t.statement)}),t.RULE("expressionStatement",()=>{t.SUBRULE(t.statementExpression),t.CONSUME(e.Semicolon)}),t.RULE("statementExpression",()=>{t.SUBRULE(t.expression)}),t.RULE("ifStatement",()=>{t.CONSUME(e.If),t.CONSUME(e.LBrace),t.SUBRULE(t.expression),t.CONSUME(e.RBrace),t.SUBRULE(t.statement),t.OPTION(()=>{t.CONSUME(e.Else),t.SUBRULE2(t.statement)})}),t.RULE("assertStatement",()=>{t.CONSUME(e.Assert),t.SUBRULE(t.expression),t.OPTION(()=>{t.CONSUME(e.Colon),t.SUBRULE2(t.expression)}),t.CONSUME(e.Semicolon)}),t.RULE("switchStatement",()=>{t.CONSUME(e.Switch),t.CONSUME(e.LBrace),t.SUBRULE(t.expression),t.CONSUME(e.RBrace),t.SUBRULE(t.switchBlock)}),t.RULE("switchBlock",()=>{t.CONSUME(e.LCurly),t.OR([{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.isClassicSwitchLabel),ALT:()=>t.MANY(()=>t.SUBRULE(t.switchBlockStatementGroup))},{ALT:()=>t.MANY2(()=>t.SUBRULE(t.switchRule))}]),t.CONSUME(e.RCurly)}),t.RULE("switchBlockStatementGroup",()=>{t.SUBRULE(t.switchLabel),t.CONSUME(e.Colon),t.OPTION(()=>{t.SUBRULE(t.blockStatements)})}),t.RULE("switchLabel",()=>{t.SUBRULE(t.caseOrDefaultLabel),t.MANY({GATE:()=>_o(t.LA(1).tokenType,e.Colon)&&(_o(t.LA(2).tokenType,e.Case)||_o(t.LA(2).tokenType,e.Default)),DEF:()=>{t.CONSUME(e.Colon),t.SUBRULE2(t.caseOrDefaultLabel)}})}),t.RULE("caseOrDefaultLabel",()=>{t.OR([{ALT:()=>{t.CONSUME(e.Case),t.SUBRULE(t.caseLabelElement),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.caseLabelElement)})}},{ALT:()=>t.CONSUME(e.Default)}])}),t.RULE("caseLabelElement",()=>{t.OR([{ALT:()=>t.CONSUME(e.Null)},{ALT:()=>t.CONSUME(e.Default)},{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.pattern),ALT:()=>t.SUBRULE(t.pattern)},{GATE:()=>_o(t.LA(1).tokenType,e.Null)===!1,ALT:()=>t.SUBRULE(t.caseConstant)}])}),t.RULE("switchRule",()=>{t.SUBRULE(t.switchLabel),t.CONSUME(e.Arrow),t.OR([{ALT:()=>t.SUBRULE(t.throwStatement)},{ALT:()=>t.SUBRULE(t.block)},{ALT:()=>{t.SUBRULE(t.expression),t.CONSUME(e.Semicolon)}}])}),t.RULE("caseConstant",()=>{t.SUBRULE(t.ternaryExpression)}),t.RULE("whileStatement",()=>{t.CONSUME(e.While),t.CONSUME(e.LBrace),t.SUBRULE(t.expression),t.CONSUME(e.RBrace),t.SUBRULE(t.statement)}),t.RULE("doStatement",()=>{t.CONSUME(e.Do),t.SUBRULE(t.statement),t.CONSUME(e.While),t.CONSUME(e.LBrace),t.SUBRULE(t.expression),t.CONSUME(e.RBrace),t.CONSUME(e.Semicolon)}),t.RULE("forStatement",()=>{t.OR([{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.isBasicForStatement),ALT:()=>t.SUBRULE(t.basicForStatement)},{ALT:()=>t.SUBRULE(t.enhancedForStatement)}])}),t.RULE("basicForStatement",()=>{t.CONSUME(e.For),t.CONSUME(e.LBrace),t.OPTION(()=>{t.SUBRULE(t.forInit)}),t.CONSUME(e.Semicolon),t.OPTION2(()=>{t.SUBRULE(t.expression)}),t.CONSUME2(e.Semicolon),t.OPTION3(()=>{t.SUBRULE(t.forUpdate)}),t.CONSUME(e.RBrace),t.SUBRULE(t.statement)}),t.RULE("forInit",()=>{t.OR([{GATE:()=>t.BACKTRACK_LOOKAHEAD(t.isLocalVariableDeclaration),ALT:()=>t.SUBRULE(t.localVariableDeclaration)},{ALT:()=>t.SUBRULE(t.statementExpressionList)}])}),t.RULE("forUpdate",()=>{t.SUBRULE(t.statementExpressionList)}),t.RULE("statementExpressionList",()=>{t.SUBRULE(t.statementExpression),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.statementExpression)})}),t.RULE("enhancedForStatement",()=>{t.CONSUME(e.For),t.CONSUME(e.LBrace),t.MANY(()=>{t.SUBRULE(t.variableModifier)}),t.SUBRULE(t.localVariableType),t.SUBRULE(t.variableDeclaratorId),t.CONSUME(e.Colon),t.SUBRULE(t.expression),t.CONSUME(e.RBrace),t.SUBRULE(t.statement)}),t.RULE("breakStatement",()=>{t.CONSUME(e.Break),t.OPTION(()=>{t.CONSUME(e.Identifier)}),t.CONSUME(e.Semicolon)}),t.RULE("continueStatement",()=>{t.CONSUME(e.Continue),t.OPTION(()=>{t.CONSUME(e.Identifier)}),t.CONSUME(e.Semicolon)}),t.RULE("returnStatement",()=>{t.CONSUME(e.Return),t.OPTION(()=>{t.SUBRULE(t.expression)}),t.CONSUME(e.Semicolon)}),t.RULE("throwStatement",()=>{t.CONSUME(e.Throw),t.SUBRULE(t.expression),t.CONSUME(e.Semicolon)}),t.RULE("synchronizedStatement",()=>{t.CONSUME(e.Synchronized),t.CONSUME(e.LBrace),t.SUBRULE(t.expression),t.CONSUME(e.RBrace),t.SUBRULE(t.block)}),t.RULE("tryStatement",()=>{t.OR({DEF:[{ALT:()=>{t.CONSUME(e.Try),t.SUBRULE(t.block),t.OR2([{ALT:()=>{t.SUBRULE(t.catches),t.OPTION(()=>{t.SUBRULE(t.finally)})}},{ALT:()=>t.SUBRULE2(t.finally)}])}},{ALT:()=>t.SUBRULE(t.tryWithResourcesStatement)}],MAX_LOOKAHEAD:2})}),t.RULE("catches",()=>{t.SUBRULE(t.catchClause),t.MANY(()=>{t.SUBRULE2(t.catchClause)})}),t.RULE("catchClause",()=>{t.CONSUME(e.Catch),t.CONSUME(e.LBrace),t.SUBRULE(t.catchFormalParameter),t.CONSUME(e.RBrace),t.SUBRULE(t.block)}),t.RULE("catchFormalParameter",()=>{t.MANY(()=>{t.SUBRULE(t.variableModifier)}),t.SUBRULE(t.catchType),t.SUBRULE(t.variableDeclaratorId)}),t.RULE("catchType",()=>{t.SUBRULE(t.unannClassType),t.MANY(()=>{t.CONSUME(e.Or),t.SUBRULE2(t.classType)})}),t.RULE("finally",()=>{t.CONSUME(e.Finally),t.SUBRULE(t.block)}),t.RULE("tryWithResourcesStatement",()=>{t.CONSUME(e.Try),t.SUBRULE(t.resourceSpecification),t.SUBRULE(t.block),t.OPTION(()=>{t.SUBRULE(t.catches)}),t.OPTION2(()=>{t.SUBRULE(t.finally)})}),t.RULE("resourceSpecification",()=>{t.CONSUME(e.LBrace),t.SUBRULE(t.resourceList),t.OPTION(()=>{t.CONSUME(e.Semicolon)}),t.CONSUME(e.RBrace)}),t.RULE("resourceList",()=>{t.SUBRULE(t.resource),t.MANY({GATE:()=>_o(t.LA(2).tokenType,e.RBrace)===!1,DEF:()=>{t.CONSUME(e.Semicolon),t.SUBRULE2(t.resource)}})}),t.RULE("resource",()=>{t.OR([{GATE:t.BACKTRACK(t.resourceInit),ALT:()=>t.SUBRULE(t.resourceInit)},{ALT:()=>t.SUBRULE(t.variableAccess)}])}),t.RULE("resourceInit",()=>{t.MANY(()=>{t.SUBRULE(t.variableModifier)}),t.SUBRULE(t.localVariableType),t.CONSUME(e.Identifier),t.CONSUME(e.Equals),t.SUBRULE(t.expression)}),t.RULE("yieldStatement",()=>{t.CONSUME(e.Yield),t.SUBRULE(t.expression),t.CONSUME(e.Semicolon)}),t.RULE("variableAccess",()=>{t.SUBRULE(t.primary)}),t.RULE("isBasicForStatement",()=>(t.CONSUME(e.For),t.CONSUME(e.LBrace),t.OPTION(()=>{t.SUBRULE(t.forInit)}),t.CONSUME(e.Semicolon),!0)),t.RULE("isLocalVariableDeclaration",()=>{switch(t.MANY(()=>{t.SUBRULE(t.variableModifier)}),t.SUBRULE(t.localVariableType),t.SUBRULE(t.variableDeclaratorId),this.LA(1).tokenType){case e.Semicolon:case e.Comma:case e.Equals:return!0;default:return!1}}),t.RULE("isClassicSwitchLabel",()=>{t.SUBRULE(t.switchLabel),t.CONSUME(e.Colon)})}var tS={defineRules:eS};const{tokenMatcher:hr}=On;function rS(t,e){t.RULE("expression",()=>{t.OR([{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.isLambdaExpression),ALT:()=>t.SUBRULE(t.lambdaExpression)},{ALT:()=>t.SUBRULE(t.ternaryExpression)}])}),t.RULE("lambdaExpression",()=>{t.SUBRULE(t.lambdaParameters),t.CONSUME(e.Arrow),t.SUBRULE(t.lambdaBody)}),t.RULE("lambdaParameters",()=>{t.OR([{ALT:()=>t.SUBRULE(t.lambdaParametersWithBraces)},{ALT:()=>t.CONSUME(e.Identifier)}])}),t.RULE("lambdaParametersWithBraces",()=>{t.CONSUME(e.LBrace),t.OPTION(()=>{t.SUBRULE(t.lambdaParameterList)}),t.CONSUME(e.RBrace)}),t.RULE("lambdaParameterList",()=>{t.OR([{GATE:()=>{const r=this.LA(1).tokenType,i=this.LA(2).tokenType;return hr(r,e.Identifier)&&(hr(i,e.RBrace)||hr(i,e.Comma))},ALT:()=>t.SUBRULE(t.inferredLambdaParameterList)},{ALT:()=>t.SUBRULE(t.explicitLambdaParameterList)}])}),t.RULE("inferredLambdaParameterList",()=>{t.CONSUME(e.Identifier),t.MANY(()=>{t.CONSUME(e.Comma),t.CONSUME2(e.Identifier)})}),t.RULE("explicitLambdaParameterList",()=>{t.SUBRULE(t.lambdaParameter),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.lambdaParameter)})}),t.RULE("lambdaParameter",()=>{t.OR([{GATE:t.BACKTRACK(t.regularLambdaParameter),ALT:()=>t.SUBRULE(t.regularLambdaParameter)},{ALT:()=>t.SUBRULE(t.variableArityParameter)}])}),t.RULE("regularLambdaParameter",()=>{t.MANY(()=>{t.SUBRULE(t.variableModifier)}),t.SUBRULE(t.lambdaParameterType),t.SUBRULE(t.variableDeclaratorId)}),t.RULE("lambdaParameterType",()=>{t.OR({DEF:[{ALT:()=>t.SUBRULE(t.unannType)},{ALT:()=>t.CONSUME(e.Var)}],IGNORE_AMBIGUITIES:!0})}),t.RULE("lambdaBody",()=>{t.OR([{ALT:()=>t.SUBRULE(t.expression)},{ALT:()=>t.SUBRULE(t.block)}])}),t.RULE("ternaryExpression",()=>{t.SUBRULE(t.binaryExpression),t.OPTION(()=>{t.CONSUME(e.QuestionMark),t.SUBRULE(t.expression),t.CONSUME(e.Colon),t.SUBRULE2(t.expression)})}),t.RULE("binaryExpression",()=>{t.SUBRULE(t.unaryExpression),t.MANY(()=>{t.OR({DEF:[{ALT:()=>{t.CONSUME(e.Instanceof),t.OR1([{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.pattern),ALT:()=>t.SUBRULE(t.pattern)},{ALT:()=>t.SUBRULE(t.referenceType)}])}},{ALT:()=>{t.CONSUME(e.AssignmentOperator),t.SUBRULE2(t.expression)}},{GATE:()=>hr(t.LA(2).tokenType,e.Less)||hr(t.LA(2).tokenType,e.Greater),ALT:()=>{t.OR2([{GATE:()=>t.LA(1).startOffset+1===t.LA(2).startOffset,ALT:()=>{t.CONSUME(e.Less),t.CONSUME2(e.Less)}},{GATE:()=>t.LA(1).startOffset+1===t.LA(2).startOffset,ALT:()=>{t.CONSUME(e.Greater),t.CONSUME2(e.Greater),t.OPTION({GATE:()=>t.LA(0).startOffset+1===t.LA(1).startOffset,DEF:()=>t.CONSUME3(e.Greater)})}}]),t.SUBRULE2(t.unaryExpression)}},{ALT:()=>{t.CONSUME(e.BinaryOperator),t.SUBRULE3(t.unaryExpression)}}],IGNORE_AMBIGUITIES:!0})})}),t.RULE("unaryExpression",()=>{t.MANY(()=>{t.CONSUME(e.UnaryPrefixOperator)}),t.SUBRULE(t.primary),t.MANY2(()=>{t.CONSUME(e.UnarySuffixOperator)})}),t.RULE("unaryExpressionNotPlusMinus",()=>{t.MANY(()=>{t.CONSUME(e.UnaryPrefixOperatorNotPlusMinus)}),t.SUBRULE(t.primary),t.MANY2(()=>{t.CONSUME(e.UnarySuffixOperator)})}),t.RULE("primary",()=>{t.SUBRULE(t.primaryPrefix),t.MANY(()=>{t.SUBRULE(t.primarySuffix)})}),t.RULE("primaryPrefix",()=>{let r=!1;hr(t.LA(1).tokenType,e.LBrace)&&(r=this.BACKTRACK_LOOKAHEAD(t.isCastExpression)),t.OR([{ALT:()=>t.SUBRULE(t.literal)},{ALT:()=>t.CONSUME(e.This)},{ALT:()=>t.CONSUME(e.Void)},{ALT:()=>t.SUBRULE(t.unannPrimitiveTypeWithOptionalDimsSuffix)},{ALT:()=>t.SUBRULE(t.fqnOrRefType)},{GATE:()=>r,ALT:()=>t.SUBRULE(t.castExpression)},{ALT:()=>t.SUBRULE(t.parenthesisExpression)},{ALT:()=>t.SUBRULE(t.newExpression)},{ALT:()=>t.SUBRULE(t.switchStatement)}])}),t.RULE("primarySuffix",()=>{t.OR({DEF:[{ALT:()=>{t.CONSUME(e.Dot),t.OR2([{ALT:()=>t.CONSUME(e.This)},{ALT:()=>t.SUBRULE(t.unqualifiedClassInstanceCreationExpression)},{ALT:()=>{t.OPTION(()=>{t.SUBRULE(t.typeArguments)}),t.CONSUME(e.Identifier)}}])}},{ALT:()=>t.SUBRULE(t.methodInvocationSuffix)},{ALT:()=>t.SUBRULE(t.classLiteralSuffix)},{ALT:()=>t.SUBRULE(t.arrayAccessSuffix)},{ALT:()=>t.SUBRULE(t.methodReferenceSuffix)}],MAX_LOOKAHEAD:2})}),t.RULE("fqnOrRefType",()=>{t.SUBRULE(t.fqnOrRefTypePartFirst),t.MANY2({GATE:()=>hr(this.LA(2).tokenType,e.Class)===!1&&hr(this.LA(2).tokenType,e.This)===!1&&hr(this.LA(2).tokenType,e.New)===!1,DEF:()=>{t.CONSUME(e.Dot),t.SUBRULE2(t.fqnOrRefTypePartRest)}}),t.OPTION({GATE:()=>hr(t.LA(1).tokenType,e.At)||hr(t.LA(2).tokenType,e.RSquare),DEF:()=>{t.SUBRULE(t.dims)}})}),t.RULE("fqnOrRefTypePartRest",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.OPTION(()=>t.SUBRULE2(t.typeArguments)),t.SUBRULE(t.fqnOrRefTypePartCommon)}),t.RULE("fqnOrRefTypePartCommon",()=>{t.OR([{ALT:()=>t.CONSUME(e.Identifier)},{ALT:()=>t.CONSUME(e.Super)}]);let r=!1;hr(t.LA(1).tokenType,e.Less)&&(r=this.BACKTRACK_LOOKAHEAD(t.isRefTypeInMethodRef)),t.OPTION2({GATE:()=>r,DEF:()=>{t.SUBRULE3(t.typeArguments)}})}),t.RULE("fqnOrRefTypePartFirst",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.SUBRULE(t.fqnOrRefTypePartCommon)}),t.RULE("parenthesisExpression",()=>{t.CONSUME(e.LBrace),t.SUBRULE(t.expression),t.CONSUME(e.RBrace)}),t.RULE("castExpression",()=>{t.OR([{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.isPrimitiveCastExpression),ALT:()=>t.SUBRULE(t.primitiveCastExpression)},{ALT:()=>t.SUBRULE(t.referenceTypeCastExpression)}])}),t.RULE("primitiveCastExpression",()=>{t.CONSUME(e.LBrace),t.SUBRULE(t.primitiveType),t.CONSUME(e.RBrace),t.SUBRULE(t.unaryExpression)}),t.RULE("referenceTypeCastExpression",()=>{t.CONSUME(e.LBrace),t.SUBRULE(t.referenceType),t.MANY(()=>{t.SUBRULE(t.additionalBound)}),t.CONSUME(e.RBrace),t.OR([{GATE:()=>this.BACKTRACK_LOOKAHEAD(t.isLambdaExpression),ALT:()=>t.SUBRULE(t.lambdaExpression)},{ALT:()=>t.SUBRULE(t.unaryExpressionNotPlusMinus)}])});const n={arrayCreationExpression:1,unqualifiedClassInstanceCreationExpression:2};t.RULE("newExpression",()=>{const r=this.BACKTRACK_LOOKAHEAD(t.identifyNewExpressionType);t.OR([{GATE:()=>r===n.arrayCreationExpression,ALT:()=>t.SUBRULE(t.arrayCreationExpression)},{GATE:()=>r===n.unqualifiedClassInstanceCreationExpression,ALT:()=>t.SUBRULE(t.unqualifiedClassInstanceCreationExpression)}])}),t.RULE("unqualifiedClassInstanceCreationExpression",()=>{t.CONSUME(e.New),t.OPTION(()=>{t.SUBRULE(t.typeArguments)}),t.SUBRULE(t.classOrInterfaceTypeToInstantiate),t.CONSUME(e.LBrace),t.OPTION2(()=>{t.SUBRULE(t.argumentList)}),t.CONSUME(e.RBrace),t.OPTION3(()=>{t.SUBRULE(t.classBody)})}),t.RULE("classOrInterfaceTypeToInstantiate",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.CONSUME(e.Identifier),t.MANY2(()=>{t.CONSUME(e.Dot),t.MANY3(()=>{t.SUBRULE2(t.annotation)}),t.CONSUME2(e.Identifier)}),t.OPTION(()=>{t.SUBRULE(t.typeArgumentsOrDiamond)})}),t.RULE("typeArgumentsOrDiamond",()=>{t.OR({DEF:[{ALT:()=>t.SUBRULE(t.diamond)},{ALT:()=>t.SUBRULE(t.typeArguments)}],MAX_LOOKAHEAD:2})}),t.RULE("diamond",()=>{t.CONSUME(e.Less),t.CONSUME(e.Greater)}),t.RULE("methodInvocationSuffix",()=>{t.CONSUME(e.LBrace),t.OPTION2(()=>{t.SUBRULE(t.argumentList)}),t.CONSUME(e.RBrace)}),t.RULE("argumentList",()=>{t.SUBRULE(t.expression),t.MANY(()=>{t.CONSUME(e.Comma),t.SUBRULE2(t.expression)})}),t.RULE("arrayCreationExpression",()=>{t.CONSUME(e.New),t.OR([{GATE:t.BACKTRACK(t.primitiveType),ALT:()=>t.SUBRULE(t.primitiveType)},{ALT:()=>t.SUBRULE(t.classOrInterfaceType)}]),t.OR2([{GATE:t.BACKTRACK(t.arrayCreationDefaultInitSuffix),ALT:()=>t.SUBRULE(t.arrayCreationDefaultInitSuffix)},{ALT:()=>t.SUBRULE(t.arrayCreationExplicitInitSuffix)}])}),t.RULE("arrayCreationDefaultInitSuffix",()=>{t.SUBRULE(t.dimExprs),t.OPTION(()=>{t.SUBRULE(t.dims)})}),t.RULE("arrayCreationExplicitInitSuffix",()=>{t.SUBRULE(t.dims),t.SUBRULE(t.arrayInitializer)}),t.RULE("dimExprs",()=>{t.SUBRULE(t.dimExpr),t.MANY({GATE:()=>hr(t.LA(2).tokenType,e.RSquare)===!1,DEF:()=>t.SUBRULE2(t.dimExpr)})}),t.RULE("dimExpr",()=>{t.MANY(()=>{t.SUBRULE(t.annotation)}),t.CONSUME(e.LSquare),t.SUBRULE(t.expression),t.CONSUME(e.RSquare)}),t.RULE("classLiteralSuffix",()=>{t.MANY(()=>{t.CONSUME(e.LSquare),t.CONSUME(e.RSquare)}),t.CONSUME(e.Dot),t.CONSUME(e.Class)}),t.RULE("arrayAccessSuffix",()=>{t.CONSUME(e.LSquare),t.SUBRULE(t.expression),t.CONSUME(e.RSquare)}),t.RULE("methodReferenceSuffix",()=>{t.CONSUME(e.ColonColon),t.OPTION(()=>{t.SUBRULE(t.typeArguments)}),t.OR([{ALT:()=>t.CONSUME(e.Identifier)},{ALT:()=>t.CONSUME(e.New)}])}),t.RULE("pattern",()=>{t.SUBRULE(t.primaryPattern),t.OPTION(()=>{t.CONSUME(e.AndAnd),t.SUBRULE(t.binaryExpression)})}),t.RULE("primaryPattern",()=>{t.OR([{ALT:()=>{t.CONSUME(e.LBrace),t.SUBRULE(t.pattern),t.CONSUME(e.RBrace)}},{ALT:()=>t.SUBRULE(t.typePattern)}])}),t.RULE("typePattern",()=>{t.SUBRULE(t.localVariableDeclaration)}),t.RULE("identifyNewExpressionType",()=>{t.CONSUME(e.New);const r=this.LA(1).tokenType;if(hr(r,e.Less))return n.unqualifiedClassInstanceCreationExpression;try{t.SUBRULE(t.classOrInterfaceTypeToInstantiate)}catch{return n.arrayCreationExpression}const i=this.LA(1).tokenType;return hr(i,e.LBrace)?n.unqualifiedClassInstanceCreationExpression:n.arrayCreationExpression}),t.RULE("isLambdaExpression",()=>{const r=this.LA(1).tokenType,i=this.LA(2).tokenType;return hr(r,e.Identifier)&&hr(i,e.Arrow)?!0:hr(r,e.LBrace)?(t.SUBRULE(t.lambdaParametersWithBraces),hr(this.LA(1).tokenType,e.Arrow)):!1}),t.RULE("isCastExpression",()=>this.BACKTRACK_LOOKAHEAD(t.isPrimitiveCastExpression)?!0:this.BACKTRACK_LOOKAHEAD(t.isReferenceTypeCastExpression)),t.RULE("isPrimitiveCastExpression",()=>(t.CONSUME(e.LBrace),t.SUBRULE(t.primitiveType),t.CONSUME(e.RBrace),!0)),t.RULE("isReferenceTypeCastExpression",()=>{t.CONSUME(e.LBrace),t.SUBRULE(t.referenceType),t.MANY(()=>{t.SUBRULE(t.additionalBound)}),t.CONSUME(e.RBrace);const r=this.LA(1).tokenType;return this.firstForUnaryExpressionNotPlusMinus.find(i=>hr(r,i))!==void 0}),t.RULE("isRefTypeInMethodRef",()=>{let r;t.SUBRULE(t.typeArguments);const i=t.OPTION(()=>{t.SUBRULE(t.dims)}),s=this.LA(1).tokenType;if(hr(s,e.ColonColon)?r=!0:i&&(r=!1),t.OPTION2(()=>{t.CONSUME(e.Dot),t.SUBRULE(t.classOrInterfaceType)}),r!==void 0)return r;const o=this.LA(1).tokenType;return hr(o,e.ColonColon)})}function nS(){return this.computeContentAssist("unaryExpressionNotPlusMinus",[]).map(n=>n.nextTokenType).filter((n,r,i)=>i.indexOf(n)===r)}var iS={defineRules:rS,computeFirstForUnaryExpressionNotPlusMinus:nS};function oS(){this.__data__=[],this.size=0}var sS=oS;function aS(t,e){return t===e||t!==t&&e!==e}var If=aS,lS=If;function cS(t,e){for(var n=t.length;n--;)if(lS(t[n][0],e))return n;return-1}var Wl=cS,uS=Wl,dS=Array.prototype,hS=dS.splice;function mS(t){var e=this.__data__,n=uS(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():hS.call(e,n,1),--this.size,!0}var pS=mS,fS=Wl;function gS(t){var e=this.__data__,n=fS(e,t);return n<0?void 0:e[n][1]}var yS=gS,bS=Wl;function ZS(t){return bS(this.__data__,t)>-1}var IS=ZS,vS=Wl;function GS(t,e){var n=this.__data__,r=vS(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var RS=GS,SS=sS,WS=pS,VS=yS,CS=IS,XS=RS;function Do(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Do.prototype.clear=SS,Do.prototype.delete=WS,Do.prototype.get=VS,Do.prototype.has=CS,Do.prototype.set=XS;var Vl=Do,LS=Vl;function xS(){this.__data__=new LS,this.size=0}var wS=xS;function kS(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var AS=kS;function TS(t){return this.__data__.get(t)}var BS=TS;function US(t){return this.__data__.has(t)}var FS=US;function YS(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Cl=YS,NS=Os,MS=Cl,ES="[object AsyncFunction]",HS="[object Function]",KS="[object GeneratorFunction]",JS="[object Proxy]";function jS(t){if(!MS(t))return!1;var e=NS(t);return e==HS||e==KS||e==ES||e==JS}var vf=jS,PS=wi,OS=PS["__core-js_shared__"],zS=OS,Nu=zS,Gf=function(){var t=/[^.]+$/.exec(Nu&&Nu.keys&&Nu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function _S(t){return!!Gf&&Gf in t}var DS=_S,QS=Function.prototype,qS=QS.toString;function $S(t){if(t!=null){try{return qS.call(t)}catch{}try{return t+""}catch{}}return""}var Rf=$S,eW=vf,tW=DS,rW=Cl,nW=Rf,iW=/[\\^$.*+?()[\]{}|]/g,oW=/^\[object .+?Constructor\]$/,sW=Function.prototype,aW=Object.prototype,lW=sW.toString,cW=aW.hasOwnProperty,uW=RegExp("^"+lW.call(cW).replace(iW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dW(t){if(!rW(t)||tW(t))return!1;var e=eW(t)?uW:oW;return e.test(nW(t))}var hW=dW;function mW(t,e){return t==null?void 0:t[e]}var pW=mW,fW=hW,gW=pW;function yW(t,e){var n=gW(t,e);return fW(n)?n:void 0}var Qo=yW,bW=Qo,ZW=wi,IW=bW(ZW,"Map"),Mu=IW,vW=Qo,GW=vW(Object,"create"),Xl=GW,Sf=Xl;function RW(){this.__data__=Sf?Sf(null):{},this.size=0}var SW=RW;function WW(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var VW=WW,CW=Xl,XW="__lodash_hash_undefined__",LW=Object.prototype,xW=LW.hasOwnProperty;function wW(t){var e=this.__data__;if(CW){var n=e[t];return n===XW?void 0:n}return xW.call(e,t)?e[t]:void 0}var kW=wW,AW=Xl,TW=Object.prototype,BW=TW.hasOwnProperty;function UW(t){var e=this.__data__;return AW?e[t]!==void 0:BW.call(e,t)}var FW=UW,YW=Xl,NW="__lodash_hash_undefined__";function MW(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=YW&&e===void 0?NW:e,this}var EW=MW,HW=SW,KW=VW,JW=kW,jW=FW,PW=EW;function qo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qo.prototype.clear=HW,qo.prototype.delete=KW,qo.prototype.get=JW,qo.prototype.has=jW,qo.prototype.set=PW;var OW=qo,Wf=OW,zW=Vl,_W=Mu;function DW(){this.size=0,this.__data__={hash:new Wf,map:new(_W||zW),string:new Wf}}var QW=DW;function qW(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var $W=qW,eV=$W;function tV(t,e){var n=t.__data__;return eV(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Ll=tV,rV=Ll;function nV(t){var e=rV(this,t).delete(t);return this.size-=e?1:0,e}var iV=nV,oV=Ll;function sV(t){return oV(this,t).get(t)}var aV=sV,lV=Ll;function cV(t){return lV(this,t).has(t)}var uV=cV,dV=Ll;function hV(t,e){var n=dV(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var mV=hV,pV=QW,fV=iV,gV=aV,yV=uV,bV=mV;function $o(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$o.prototype.clear=pV,$o.prototype.delete=fV,$o.prototype.get=gV,$o.prototype.has=yV,$o.prototype.set=bV;var Eu=$o,ZV=Vl,IV=Mu,vV=Eu,GV=200;function RV(t,e){var n=this.__data__;if(n instanceof ZV){var r=n.__data__;if(!IV||r.length<GV-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new vV(r)}return n.set(t,e),this.size=n.size,this}var SV=RV,WV=Vl,VV=wS,CV=AS,XV=BS,LV=FS,xV=SV;function es(t){var e=this.__data__=new WV(t);this.size=e.size}es.prototype.clear=VV,es.prototype.delete=CV,es.prototype.get=XV,es.prototype.has=LV,es.prototype.set=xV;var Vf=es,wV="__lodash_hash_undefined__";function kV(t){return this.__data__.set(t,wV),this}var AV=kV;function TV(t){return this.__data__.has(t)}var BV=TV,UV=Eu,FV=AV,YV=BV;function xl(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new UV;++e<n;)this.add(t[e])}xl.prototype.add=xl.prototype.push=FV,xl.prototype.has=YV;var NV=xl;function MV(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var EV=MV;function HV(t,e){return t.has(e)}var KV=HV,JV=NV,jV=EV,PV=KV,OV=1,zV=2;function _V(t,e,n,r,i,s){var o=n&OV,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),m=s.get(e);if(c&&m)return c==e&&m==t;var p=-1,u=!0,d=n&zV?new JV:void 0;for(s.set(t,e),s.set(e,t);++p<a;){var h=t[p],f=e[p];if(r)var g=o?r(f,h,p,e,t,s):r(h,f,p,t,e,s);if(g!==void 0){if(g)continue;u=!1;break}if(d){if(!jV(e,function(y,Z){if(!PV(d,Z)&&(h===y||i(h,y,n,r,s)))return d.push(Z)})){u=!1;break}}else if(!(h===f||i(h,f,n,r,s))){u=!1;break}}return s.delete(t),s.delete(e),u}var Cf=_V,DV=wi,QV=DV.Uint8Array,qV=QV;function $V(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var eC=$V;function tC(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var rC=tC,Xf=vl,Lf=qV,nC=If,iC=Cf,oC=eC,sC=rC,aC=1,lC=2,cC="[object Boolean]",uC="[object Date]",dC="[object Error]",hC="[object Map]",mC="[object Number]",pC="[object RegExp]",fC="[object Set]",gC="[object String]",yC="[object Symbol]",bC="[object ArrayBuffer]",ZC="[object DataView]",xf=Xf?Xf.prototype:void 0,Hu=xf?xf.valueOf:void 0;function IC(t,e,n,r,i,s,o){switch(n){case ZC:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case bC:return!(t.byteLength!=e.byteLength||!s(new Lf(t),new Lf(e)));case cC:case uC:case mC:return nC(+t,+e);case dC:return t.name==e.name&&t.message==e.message;case pC:case gC:return t==e+"";case hC:var a=oC;case fC:var l=r&aC;if(a||(a=sC),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=lC,o.set(t,e);var m=iC(a(t),a(e),r,i,s,o);return o.delete(t),m;case yC:if(Hu)return Hu.call(t)==Hu.call(e)}return!1}var vC=IC;function GC(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var RC=GC,SC=RC,WC=Pi;function VC(t,e,n){var r=e(t);return WC(t)?r:SC(r,n(t))}var CC=VC;function XC(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var LC=XC;function xC(){return[]}var wC=xC,kC=LC,AC=wC,TC=Object.prototype,BC=TC.propertyIsEnumerable,wf=Object.getOwnPropertySymbols,UC=wf?function(t){return t==null?[]:(t=Object(t),kC(wf(t),function(e){return BC.call(t,e)}))}:AC,FC=UC;function YC(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var NC=YC,MC=Os,EC=zs,HC="[object Arguments]";function KC(t){return EC(t)&&MC(t)==HC}var JC=KC,kf=JC,jC=zs,Af=Object.prototype,PC=Af.hasOwnProperty,OC=Af.propertyIsEnumerable,zC=kf(function(){return arguments}())?kf:function(t){return jC(t)&&PC.call(t,"callee")&&!OC.call(t,"callee")},Tf=zC,wl={exports:{}};function _C(){return!1}var DC=_C;(function(t,e){var n=wi,r=DC,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(wl,wl.exports);var QC=9007199254740991,qC=/^(?:0|[1-9]\d*)$/;function $C(t,e){var n=typeof t;return e=e==null?QC:e,!!e&&(n=="number"||n!="symbol"&&qC.test(t))&&t>-1&&t%1==0&&t<e}var Bf=$C,eX=9007199254740991;function tX(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=eX}var Ku=tX,rX=Os,nX=Ku,iX=zs,oX="[object Arguments]",sX="[object Array]",aX="[object Boolean]",lX="[object Date]",cX="[object Error]",uX="[object Function]",dX="[object Map]",hX="[object Number]",mX="[object Object]",pX="[object RegExp]",fX="[object Set]",gX="[object String]",yX="[object WeakMap]",bX="[object ArrayBuffer]",ZX="[object DataView]",IX="[object Float32Array]",vX="[object Float64Array]",GX="[object Int8Array]",RX="[object Int16Array]",SX="[object Int32Array]",WX="[object Uint8Array]",VX="[object Uint8ClampedArray]",CX="[object Uint16Array]",XX="[object Uint32Array]",Dt={};Dt[IX]=Dt[vX]=Dt[GX]=Dt[RX]=Dt[SX]=Dt[WX]=Dt[VX]=Dt[CX]=Dt[XX]=!0,Dt[oX]=Dt[sX]=Dt[bX]=Dt[aX]=Dt[ZX]=Dt[lX]=Dt[cX]=Dt[uX]=Dt[dX]=Dt[hX]=Dt[mX]=Dt[pX]=Dt[fX]=Dt[gX]=Dt[yX]=!1;function LX(t){return iX(t)&&nX(t.length)&&!!Dt[rX(t)]}var xX=LX;function wX(t){return function(e){return t(e)}}var kX=wX,Ju={exports:{}};(function(t,e){var n=wp,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(Ju,Ju.exports);var AX=xX,TX=kX,Uf=Ju.exports,Ff=Uf&&Uf.isTypedArray,BX=Ff?TX(Ff):AX,Yf=BX,UX=NC,FX=Tf,YX=Pi,NX=wl.exports,MX=Bf,EX=Yf,HX=Object.prototype,KX=HX.hasOwnProperty;function JX(t,e){var n=YX(t),r=!n&&FX(t),i=!n&&!r&&NX(t),s=!n&&!r&&!i&&EX(t),o=n||r||i||s,a=o?UX(t.length,String):[],l=a.length;for(var c in t)(e||KX.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||MX(c,l)))&&a.push(c);return a}var jX=JX,PX=Object.prototype;function OX(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||PX;return t===n}var zX=OX;function _X(t,e){return function(n){return t(e(n))}}var DX=_X,QX=DX,qX=QX(Object.keys,Object),$X=qX,eL=zX,tL=$X,rL=Object.prototype,nL=rL.hasOwnProperty;function iL(t){if(!eL(t))return tL(t);var e=[];for(var n in Object(t))nL.call(t,n)&&n!="constructor"&&e.push(n);return e}var oL=iL,sL=vf,aL=Ku;function lL(t){return t!=null&&aL(t.length)&&!sL(t)}var Nf=lL,cL=jX,uL=oL,dL=Nf;function hL(t){return dL(t)?cL(t):uL(t)}var ju=hL,mL=CC,pL=FC,fL=ju;function gL(t){return mL(t,fL,pL)}var yL=gL,Mf=yL,bL=1,ZL=Object.prototype,IL=ZL.hasOwnProperty;function vL(t,e,n,r,i,s){var o=n&bL,a=Mf(t),l=a.length,c=Mf(e),m=c.length;if(l!=m&&!o)return!1;for(var p=l;p--;){var u=a[p];if(!(o?u in e:IL.call(e,u)))return!1}var d=s.get(t),h=s.get(e);if(d&&h)return d==e&&h==t;var f=!0;s.set(t,e),s.set(e,t);for(var g=o;++p<l;){u=a[p];var y=t[u],Z=e[u];if(r)var I=o?r(Z,y,u,e,t,s):r(y,Z,u,t,e,s);if(!(I===void 0?y===Z||i(y,Z,n,r,s):I)){f=!1;break}g||(g=u=="constructor")}if(f&&!g){var G=t.constructor,R=e.constructor;G!=R&&"constructor"in t&&"constructor"in e&&!(typeof G=="function"&&G instanceof G&&typeof R=="function"&&R instanceof R)&&(f=!1)}return s.delete(t),s.delete(e),f}var GL=vL,RL=Qo,SL=wi,WL=RL(SL,"DataView"),VL=WL,CL=Qo,XL=wi,LL=CL(XL,"Promise"),xL=LL,wL=Qo,kL=wi,AL=wL(kL,"Set"),TL=AL,BL=Qo,UL=wi,FL=BL(UL,"WeakMap"),YL=FL,Pu=VL,Ou=Mu,zu=xL,_u=TL,Du=YL,Ef=Os,ts=Rf,Hf="[object Map]",NL="[object Object]",Kf="[object Promise]",Jf="[object Set]",jf="[object WeakMap]",Pf="[object DataView]",ML=ts(Pu),EL=ts(Ou),HL=ts(zu),KL=ts(_u),JL=ts(Du),Go=Ef;(Pu&&Go(new Pu(new ArrayBuffer(1)))!=Pf||Ou&&Go(new Ou)!=Hf||zu&&Go(zu.resolve())!=Kf||_u&&Go(new _u)!=Jf||Du&&Go(new Du)!=jf)&&(Go=function(t){var e=Ef(t),n=e==NL?t.constructor:void 0,r=n?ts(n):"";if(r)switch(r){case ML:return Pf;case EL:return Hf;case HL:return Kf;case KL:return Jf;case JL:return jf}return e});var jL=Go,Qu=Vf,PL=Cf,OL=vC,zL=GL,Of=jL,zf=Pi,_f=wl.exports,_L=Yf,DL=1,Df="[object Arguments]",Qf="[object Array]",kl="[object Object]",QL=Object.prototype,qf=QL.hasOwnProperty;function qL(t,e,n,r,i,s){var o=zf(t),a=zf(e),l=o?Qf:Of(t),c=a?Qf:Of(e);l=l==Df?kl:l,c=c==Df?kl:c;var m=l==kl,p=c==kl,u=l==c;if(u&&_f(t)){if(!_f(e))return!1;o=!0,m=!1}if(u&&!m)return s||(s=new Qu),o||_L(t)?PL(t,e,n,r,i,s):OL(t,e,l,n,r,i,s);if(!(n&DL)){var d=m&&qf.call(t,"__wrapped__"),h=p&&qf.call(e,"__wrapped__");if(d||h){var f=d?t.value():t,g=h?e.value():e;return s||(s=new Qu),i(f,g,n,r,s)}}return u?(s||(s=new Qu),zL(t,e,n,r,i,s)):!1}var $L=qL,ex=$L,$f=zs;function eg(t,e,n,r,i){return t===e?!0:t==null||e==null||!$f(t)&&!$f(e)?t!==t&&e!==e:ex(t,e,n,r,eg,i)}var tg=eg,tx=Vf,rx=tg,nx=1,ix=2;function ox(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],c=t[l],m=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var p=new tx;if(r)var u=r(c,m,l,t,e,p);if(!(u===void 0?rx(m,c,nx|ix,r,p):u))return!1}}return!0}var sx=ox,ax=Cl;function lx(t){return t===t&&!ax(t)}var rg=lx,cx=rg,ux=ju;function dx(t){for(var e=ux(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,cx(i)]}return e}var hx=dx;function mx(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var ng=mx,px=sx,fx=hx,gx=ng;function yx(t){var e=fx(t);return e.length==1&&e[0][2]?gx(e[0][0],e[0][1]):function(n){return n===t||px(n,t,e)}}var bx=yx,Zx=Pi,Ix=Gl,vx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gx=/^\w*$/;function Rx(t,e){if(Zx(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ix(t)?!0:Gx.test(t)||!vx.test(t)||e!=null&&t in Object(e)}var qu=Rx,ig=Eu,Sx="Expected a function";function $u(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Sx);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new($u.Cache||ig),n}$u.Cache=ig;var Wx=$u,Vx=Wx,Cx=500;function Xx(t){var e=Vx(t,function(r){return n.size===Cx&&n.clear(),r}),n=e.cache;return e}var Lx=Xx,xx=Lx,wx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kx=/\\(\\)?/g,Ax=xx(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(wx,function(n,r,i,s){e.push(i?s.replace(kx,"$1"):r||n)}),e}),Tx=Ax,Bx=Pi,Ux=qu,Fx=Tx,Yx=_s;function Nx(t,e){return Bx(t)?t:Ux(t,e)?[t]:Fx(Yx(t))}var og=Nx,Mx=Gl,Ex=1/0;function Hx(t){if(typeof t=="string"||Mx(t))return t;var e=t+"";return e=="0"&&1/t==-Ex?"-0":e}var Al=Hx,Kx=og,Jx=Al;function jx(t,e){e=Kx(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Jx(e[n++])];return n&&n==r?t:void 0}var sg=jx,Px=sg;function Ox(t,e,n){var r=t==null?void 0:Px(t,e);return r===void 0?n:r}var zx=Ox;function _x(t,e){return t!=null&&e in Object(t)}var Dx=_x,Qx=og,qx=Tf,$x=Pi,e3=Bf,t3=Ku,r3=Al;function n3(t,e,n){e=Qx(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=r3(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&t3(i)&&e3(o,i)&&($x(t)||qx(t)))}var i3=n3,o3=Dx,s3=i3;function a3(t,e){return t!=null&&s3(t,e,o3)}var l3=a3,c3=tg,u3=zx,d3=l3,h3=qu,m3=rg,p3=ng,f3=Al,g3=1,y3=2;function b3(t,e){return h3(t)&&m3(e)?p3(f3(t),e):function(n){var r=u3(n,t);return r===void 0&&r===e?d3(n,t):c3(e,r,g3|y3)}}var Z3=b3;function I3(t){return t}var v3=I3;function G3(t){return function(e){return e==null?void 0:e[t]}}var R3=G3,S3=sg;function W3(t){return function(e){return S3(e,t)}}var V3=W3,C3=R3,X3=V3,L3=qu,x3=Al;function w3(t){return L3(t)?C3(x3(t)):X3(t)}var k3=w3,A3=bx,T3=Z3,B3=v3,U3=Pi,F3=k3;function Y3(t){return typeof t=="function"?t:t==null?B3:typeof t=="object"?U3(t)?T3(t[0],t[1]):A3(t):F3(t)}var ag=Y3,N3=ag,M3=Nf,E3=ju;function H3(t){return function(e,n,r){var i=Object(e);if(!M3(e)){var s=N3(n);e=E3(e),n=function(a){return s(i[a],a,i)}}var o=t(e,n,r);return o>-1?i[s?e[o]:o]:void 0}}var K3=H3;function J3(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var j3=J3,P3=/\s/;function O3(t){for(var e=t.length;e--&&P3.test(t.charAt(e)););return e}var z3=O3,_3=z3,D3=/^\s+/;function Q3(t){return t&&t.slice(0,_3(t)+1).replace(D3,"")}var q3=Q3,$3=q3,lg=Cl,e9=Gl,cg=0/0,t9=/^[-+]0x[0-9a-f]+$/i,r9=/^0b[01]+$/i,n9=/^0o[0-7]+$/i,i9=parseInt;function o9(t){if(typeof t=="number")return t;if(e9(t))return cg;if(lg(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=lg(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=$3(t);var n=r9.test(t);return n||n9.test(t)?i9(t.slice(2),n?2:8):t9.test(t)?cg:+t}var s9=o9,a9=s9,ug=1/0,l9=17976931348623157e292;function c9(t){if(!t)return t===0?t:0;if(t=a9(t),t===ug||t===-ug){var e=t<0?-1:1;return e*l9}return t===t?t:0}var u9=c9,d9=u9;function h9(t){var e=d9(t),n=e%1;return e===e?n?e-n:e:0}var m9=h9,p9=j3,f9=ag,g9=m9,y9=Math.max,b9=Math.min;function Z9(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=r-1;return n!==void 0&&(i=g9(n),i=n<0?y9(r+i,0):b9(i,r-1)),p9(t,f9(e),i,!0)}var I9=Z9,v9=K3,G9=I9,R9=v9(G9),S9=R9;const W9=S9;function V9(t,e){let n,r,i,s=t.length;for(r=0;s;)n=s>>>1,i=r+n,t[i].startOffset>e.startOffset?s=n:(r=i+1,s-=n+1);return r}function dg(t){return t.image.match(/(\/\/(\s*)prettier-ignore(\s*))|(\/\*(\s*)prettier-ignore(\s*)\*\/)/gm)}function C9(t){return t.image.match(/(\/\/(\s*)@formatter:(off|on)(\s*))|(\/\*(\s*)@formatter:(off|on)(\s*)\*\/)/gm)}function X9(t,e,n){t.forEach(r=>{e[r.startOffset]===void 0&&(e[r.startOffset]=r),n[r.endOffset]===void 0&&(n[r.endOffset]=r)})}function L9(t,e){let n;t.forEach(r=>{n=V9(e,r);const i=n-1<0?r.startOffset:e[n-1].endOffset,s=n==e.length?r.endOffset:e[n].startOffset;r.extendedOffset={startOffset:i,endOffset:s}})}function x9(t){const e={},n={};return t.forEach(r=>{const i=r.extendedOffset.startOffset,s=r.extendedOffset.endOffset;e[s]===void 0?e[s]=[r]:e[s].push(r),n[i]===void 0?n[i]=[r]:n[i].push(r)}),{commentsByExtendedEndOffset:e,commentsByExtendedStartOffset:n}}function w9(t,e,n){if(dg(t))return!1;const r=n[t.extendedOffset.endOffset];if(r===void 0)return!0;const i=e.location!==void 0?e.location.endLine:e.endLine;if(t.startLine!==i)return!1;const s=r.location!==void 0?r.location.startLine:r.startLine;return t.endLine!==s}function k9(t,e,n,r){if(t.length===0){n[NaN].leadingComments=e;return}X9(t,n,r),L9(e,t);const{commentsByExtendedStartOffset:i,commentsByExtendedEndOffset:s}=x9(e),o=new Set(e);Object.keys(r).forEach(a=>{if(i[a]!==void 0){const l=i[a].filter(c=>w9(c,r[a],n)&&o.has(c));l.length>0&&(r[a].trailingComments=l),l.forEach(c=>{o.delete(c)})}}),Object.keys(n).forEach(a=>{if(s[a]!==void 0){const l=s[a].filter(c=>o.has(c));l.length>0&&(n[a].leadingComments=l);for(let c=0;c<l.length;c++)if(dg(l[c])){n[a].ignore=!0;break}}})}function A9(t){const e=t.filter(o=>C9(o));let n=!1,r=!0;const i=[];let s={};return e.forEach(o=>{r=o.image.slice(-3)==="off",n?r||(s.on=o,i.push(s),s={}):r&&(s.off=o),n=r}),e.length>0&&r&&(s.on=void 0,i.push(s)),i}function T9(t,e){const n=W9(e,r=>r.off.endOffset<t.location.startOffset);n!==void 0&&(n.on===void 0||n.on.startOffset>t.location.endOffset)&&(t.ignore=!0)}var hg={matchFormatterOffOnPairs:A9,shouldNotFormat:T9,attachComments:k9};const{Parser:B9,isRecognitionException:U9}=On,{allTokens:F9,tokens:ai}=yf,Y9=U5,N9=N5,M9=E5,E9=j5,H9=z5,K9=D5,J9=$5,j9=tS,mg=iS,{getSkipValidations:P9}=bf,{shouldNotFormat:O9}=hg;class z9 extends B9{constructor(){super(F9,{maxLookahead:1,nodeLocationTracking:"full",skipValidations:P9()});const e=this;this.mostEnclosiveCstNodeByStartOffset={},this.mostEnclosiveCstNodeByEndOffset={},e.RULE("typeIdentifier",()=>{e.CONSUME(ai.Identifier)}),Y9.defineRules.call(this,e,ai),N9.defineRules.call(this,e,ai),M9.defineRules.call(this,e,ai),H9.defineRules.call(this,e,ai),E9.defineRules.call(this,e,ai),K9.defineRules.call(this,e,ai),J9.defineRules.call(this,e,ai),j9.defineRules.call(this,e,ai),mg.defineRules.call(this,e,ai),this.firstForUnaryExpressionNotPlusMinus=[],this.performSelfAnalysis(),this.firstForUnaryExpressionNotPlusMinus=mg.computeFirstForUnaryExpressionNotPlusMinus.call(this)}cstPostNonTerminal(e,n){super.cstPostNonTerminal(e,n),this.isBackTracking()===!1&&(this.mostEnclosiveCstNodeByStartOffset[e.location.startOffset]=e,this.mostEnclosiveCstNodeByEndOffset[e.location.endOffset]=e,O9(e,this.onOffCommentPairs))}BACKTRACK_LOOKAHEAD(e,n=!1){return this.ACTION(()=>{this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return this.outputCst=!1,e.call(this)}catch(i){if(U9(i))return n;throw i}finally{this.outputCst=!0,this.reloadRecogState(r),this.isBackTrackingStack.pop()}})}setOnOffCommentPairs(e){this.onOffCommentPairs=e}}var _9=z9;const D9=T5,Q9=_9,{attachComments:q9,matchFormatterOffOnPairs:$9}=hg,zn=new Q9,ew=zn.getBaseCstVisitorConstructor(),tw=zn.getBaseCstVisitorConstructorWithDefaults();function rw(t,e="compilationUnit"){const n=D9.tokenize(t);if(n.errors.length>0){const i=n.errors[0];throw Error("Sad sad panda, lexing errors detected in line: "+i.line+", column: "+i.column+`!
`+i.message)}zn.input=n.tokens,zn.mostEnclosiveCstNodeByStartOffset={},zn.mostEnclosiveCstNodeByEndOffset={},zn.setOnOffCommentPairs($9(n.groups.comments));const r=zn[e]();if(zn.errors.length>0){const i=zn.errors[0];throw Error("Sad sad panda, parsing errors detected in line: "+i.token.startLine+", column: "+i.token.startColumn+`!
`+i.message+`!
	->`+i.context.ruleStack.join(`
	->`))}return q9(n.tokens,n.groups.comments,zn.mostEnclosiveCstNodeByStartOffset,zn.mostEnclosiveCstNodeByEndOffset),r}var Tl={parse:rw,BaseJavaCstVisitor:ew,BaseJavaCstVisitorWithDefaults:tw};function or(t,e,n,r,i,s){for(const o in t.children){const a=t.children[o];for(const l in a)Ct(a[l],e,n,r,i,s)}}function Ct(t,e,n,r,i,s){if("leadingComments"in t)for(const a in t.leadingComments)Ct(t.leadingComments[a],e,n,r,{...i,isComment:!0},s);if(n(t,e,r,i,s)&&or(t,e+1,n,r,i,s),"trailingComments"in t)for(const a in t.trailingComments)Ct(t.trailingComments[a],e,n,r,{...i,isComment:!0},s)}function nw(t,e,n,r,i){return"name"in t?console.log(" ".repeat(e)+t.name):"image"in t&&console.log(" ".repeat(e)+t.image),!0}const iw=t=>Ct(t,0,nw,null,null,null);function ow(t){const e=ed(t),n=Tl.parse(e);iw(n)}function Ro(t,e,n,r,i){if("image"in t&&(r.typeIdentifier===!0&&(i.className=t.image),r.fieldDeclaration===!0&&r.variableDeclaratorId===!0?r.isStatic===!0?i.staticFieldNames.push(t.image):i.fieldNames.push(t.image):r.methodDeclaration===!0&&r.methodDeclarator===!0?t.tokenType.name==="Identifier"&&i.methodNames.push(t.image):r.fieldModifier===!0&&t.image==="static"&&(r.isStatic=!0)),!("name"in t))return!0;if(t.name==="typeIdentifier")return or(t,e+1,Ro,n,{...r,typeIdentifier:!0},i),!1;if(t.name==="fieldDeclaration")return or(t,e+1,Ro,n,{...r,fieldDeclaration:!0},i),!1;if(t.name==="fieldModifier"){let s={...r,fieldModifier:!0};return or(t,e+1,Ro,n,s,i),s.isStatic===!0&&(r.isStatic=!0),!1}else{if(t.name==="variableDeclaratorId"&&r.fieldDeclaration===!0)return or(t,e+1,Ro,n,{...r,variableDeclaratorId:!0},i),!1;if(t.name==="methodDeclaration")return or(t,e+1,Ro,n,{...r,methodDeclaration:!0},i),!1;if(t.name==="methodDeclarator"&&r.methodDeclaration===!0)return or(t,e+1,Ro,n,{...r,methodDeclarator:!0},i),!1;if(t.name==="formalParameterList")return!1}return!0}function sw(t){let e={className:"Unknown",fieldNames:[],staticFieldNames:[],methodNames:[]};return Ct(t,0,Ro,null,{},e),e}function So(t,e,n,r,i,s,o,a){e&&e in t.children&&Ct(t.children[e][0],i+1,Gt,s,o,a);let l=n in t.children?t.children[n]:null;if(!l)return;let c=r in t.children?t.children[r]:null;for(const m in l)Ct(l[m],i+1,Gt,s,o,a),c!==null&&m in c&&Ct(c[m],i+1,Gt,s,o,a)}function aw(t,e,n,r,i){if(!("For"in t.children&&"LBrace"in t.children&&"RBrace"in t.children&&"Semicolon"in t.children&&t.children.Semicolon.length===2&&"expression"in t.children&&"forInit"in t.children&&"forUpdate"in t.children&&"statement"in t.children)){console.log("[processing-p5-convert] handle_basicForStatement not ok");return}return Ct(t.children.For[0],e+1,Gt,n,r,i),Ct(t.children.LBrace[0],e+1,Gt,n,r,i),Ct(t.children.forInit[0],e+1,Gt,n,r,i),Ct(t.children.Semicolon[0],e+1,Gt,n,r,i),Ct(t.children.expression[0],e+1,Gt,n,r,i),Ct(t.children.Semicolon[1],e+1,Gt,n,r,i),Ct(t.children.forUpdate[0],e+1,Gt,n,r,i),Ct(t.children.RBrace[0],e+1,Gt,n,r,i),Ct(t.children.statement[0],e+1,Gt,n,r,i),!1}function lw(t,e,n,r,i){if(!("If"in t.children&&"LBrace"in t.children&&"RBrace"in t.children&&"expression"in t.children&&"statement"in t.children)){console.log("[processing-p5-convert] handle_ifStatement not ok");return}return Ct(t.children.If[0],e+1,Gt,n,r,i),Ct(t.children.LBrace[0],e+1,Gt,n,r,i),Ct(t.children.expression[0],e+1,Gt,n,r,i),Ct(t.children.RBrace[0],e+1,Gt,n,r,i),Ct(t.children.statement[0],e+1,Gt,n,r,i),"Else"in t.children&&(Ct(t.children.Else[0],e+1,Gt,n,r,i),Ct(t.children.statement[1],e+1,Gt,n,r,i)),!1}function cw(t,e,n){if(!("unannType"in t.children&&"variableDeclaratorList"in t.children)){console.log("[processing-p5-convert] registerField not ok");return}const i={transform:!1,ignoreOuterClass:!1};Bl(t.children.unannType[0],i).startsWith("ArrayList")&&(n.arrayListReference=!0)}function uw(t,e,n,r,i){if(n.transform===!0)if(r.methodBody===!0&&r.primaryPrefix===!0&&"fieldNames"in r&&"methodNames"in r){let s="parameterNames"in r&&r.parameterNames.includes(t.image),o=r.fieldNames.includes(t.image)||r.methodNames.includes(t.image),a=r.staticFieldNames.includes(t.image);if(s===!1&&r.fqnOrRefTypePartRest!==!0){if(o===!0)return i.code+="this."+t.image+" ",!1;if(a===!0)return i.code+=r.className+"."+t.image+" ",!1}}else{if(r.enhancedForStatement===!0&&t.image===":")return i.code+="of ",!1;if(r.classDeclaration===!0&&r.variableDeclaratorList===!0&&r.variableDeclarator!==!0&&t.image==",")return i.code+=";",!1}return i.code+=t.image,r.isComment===!0?i.code+=`
`:i.code+=" ",!0}function dw(t,e,n,r,i){return or(t,e+1,Gt,n,{...r,fqnOrRefTypePartRest:!0},i),!1}function hw(t,e,n,r,i){let s={code:""};return So(t,"fqnOrRefTypePartFirst","Dot","fqnOrRefTypePartRest",e+1,n,r,s),s.code=s.code.trim(),n.transform&&(s.code==="size"?s.code="createCanvas":s.code==="P3D"?(s.code="WEBGL",r.webgl=!0):s.code==="pushMatrix"?s.code="push":s.code==="popMatrix"?s.code="pop":s.code==="println"||s.code==="print"?s.code="console.log":s.code==="UP"?s.code="UP_ARROW":s.code==="DOWN"?s.code="DOWN_ARROW":s.code==="RIGHT"?s.code="RIGHT_ARROW":s.code==="LEFT"?s.code="LEFT_ARROW":r.insideSetup===!0&&s.code.startsWith("load")?r.isLoadFile=!0:s.code==="createFont"&&(s.code="loadFont",r.isLoadFile=!0,r.isCreateFont=!0)),i.code+=s.code,!1}function mw(t,e,n,r,i){let s={code:""};if(So(t,"","expression","Comma",e+1,n,r,s),n.transform===!0&&r.isCreateFont===!0){let o=s.code.indexOf(",");s.code=s.code.slice(0,o),r.isCreateFont=!1}return i.code+=s.code,!1}function pw(t,e,n,r,i){return So(t,"","variableDeclarator","Comma",e+1,n,{...r,variableDeclaratorList:!0},i),!1}function fw(t,e,n,r,i){return or(t,e+1,Gt,n,{...r,variableDeclarator:!0},i),!1}function gw(t,e,n,r,i){return So(t,"","variableInitializer","Comma",e+1,n,r,i),!1}function yw(t,e,n,r,i){return n.transform===!0?(r.classDeclaration!==!0&&(i.code+="function "),!1):!0}function bw(t,e,n,r,i){return"BinaryOperator"in t.children?(So(t,"","unaryExpression","BinaryOperator",e+1,n,r,i),!1):!0}function Zw(t,e,n,r,i){return"QuestionMark"in t.children?"binaryExpression"in t.children&&"Colon"in t.children&&"expression"in t.children&&t.children.expression.length===2?(Ct(t.children.binaryExpression[0],e+1,Gt,n,r,i),Ct(t.children.QuestionMark[0],e+1,Gt,n,r,i),Ct(t.children.expression[0],e+1,Gt,n,r,i),Ct(t.children.Colon[0],e+1,Gt,n,r,i),Ct(t.children.expression[1],e+1,Gt,n,r,i),!1):(console.log("[processing-p5-convert] handle_ternaryExpression not ok"),!0):!0}function Iw(t,e,n,r,i){return or(t,e+1,Gt,n,{...r,enhancedForStatement:!0},i),!1}function vw(t,e,n,r,i){return or(t,e+1,Gt,n,{...r,fieldDeclaration:!0},i),n.transform===!0&&cw(t,r,i),!1}function Gw(t,e,n,r,i){return or(t,e+1,Gt,n,{...r,localVariableDeclaration:!0},i),!1}function Ds(t,e,n,r,i){if(n.transform===!0){let s={code:""};return or(t,e+1,Gt,n,n,s),s.code.trim()==="static"&&(i.code+=s.code),!1}return!0}function Rw(t,e,n,r,i){return n.transform?((r.classDeclaration!==!0&&r.formalParameterList!==!0||r.localVariableDeclaration===!0)&&(i.code+="let "),!1):!0}function Sw(t,e,n,r,i){let{className:s,fieldNames:o,staticFieldNames:a,methodNames:l}=sw(t),c={...r,className:s,fieldNames:o,staticFieldNames:a,methodNames:l,classDeclaration:!0};return or(t,e+1,Gt,n,c,i),!1}function Ww(t,e,n,r,i){if(n.transform===!0&&r.hasConstructor===!0){let s={code:""};return or(t,e+1,Gt,n,{...r,constructorDeclaration:!0},s),i.code+="/*"+s.code+"*/",!1}else return or(t,e+1,Gt,n,{...r,constructorDeclaration:!0},i),r.hasConstructor=!0,!1}function pg(t,e,n,r,i){return r.classDeclaration===!0?(or(t,e+1,Gt,n,{...r,methodBody:!0},i),!1):!0}function Vw(t,e,n,r,i){return n.transform===!0&&r.constructorDeclaration===!0?(i.code+="constructor",!1):!0}function Cw(t,e,n,r,i){if(n.transform===!0){if("unqualifiedClassInstanceCreationExpression"in t.children&&"classOrInterfaceTypeToInstantiate"in t.children.unqualifiedClassInstanceCreationExpression[0].children){let s={code:""},o=t.children.unqualifiedClassInstanceCreationExpression[0].children.classOrInterfaceTypeToInstantiate[0];if(Ct(o,e+1,Gt,n,r,s),s.code.startsWith("ArrayList"))return i.code+="new ArrayList()",!1;if(s.code.startsWith("PVector")){let a={code:""};return or(t,e+1,Gt,n,r,a),a.code=a.code.replace("PVector","p5.Vector"),i.code+=a.code,!1}else if(s.code.startsWith("SoundFile")){let a={code:""},l=t.children.unqualifiedClassInstanceCreationExpression[0].children.argumentList[0].children.expression[1];return Ct(l,e+1,Gt,{},r,a),i.code+="loadSound("+a.code+")",r.isLoadFile=!0,!1}}else if("arrayCreationExpression"in t.children){let s=t.children.arrayCreationExpression[0].children.arrayCreationDefaultInitSuffix[0],o={...r,arrayCreationExpression:!0},a={code:"",dimensions:[]};if(Ct(s,e+1,Gt,{},o,a),a.dimensions.length===1)i.code+="new Array("+a.dimensions[0]+")";else if(a.dimensions.length===2){let[l,c]=a.dimensions;i.code+=`Array.from(new Array(${l}), ()=>new Array(${c}))`}else console.log("[processing-p5-convert] newExpression array bad dimensions.length:"+a.dimensions.length);return!1}}return!0}function Xw(t,e,n,r,i){let s={...r,methodDeclaration:!0};return or(t,e+1,Gt,n,s,i),n.transform===!0&&s.insideSetup===!0&&(s.preload&&(i.code+="function preload() {"+s.preload+"}"),s.webgl===!0&&(r.webgl=!0)),!1}function Lw(t,e,n,r,i){if(r.classDeclaration!==!0&&r.methodDeclaration===!0){const s=t.children.Identifier[0].image;s==="setup"?(r.insideSetup=!0,r.preload=""):s==="draw"&&r.webgl===!0&&(r.insideDraw=!0)}return!0}function xw(t,e,n,r,i){if(r.insideSetup===!0){let s={code:""};if(or(t,e+1,Gt,n,r,s),r.isLoadFile===!0){let o=/loadFont/,a=/\".+\.[a-z]{3}\"/i,l=s.code.match(o),c=s.code.match(a);l&&!c&&(s.code=s.code.replace(/loadFont.*\(/,""),s.code=s.code.replace(")","")),r.preload+=s.code,r.isLoadFile=!1}else i.code+=s.code;return!1}return!0}function ww(t,e,n,r,i){return r.webgl===!0&&r.insideDraw===!0&&(i.code+="translate(-width/2, -height/2); ",r.webgl=!1),!0}function kw(t,e,n,r,i){let s={code:""};return So(t,"","formalParameter","Comma",e+1,n,{...r,formalParameterList:!0},s),r.parameterNames=s.code.split(",").map(o=>o.trim()),i.code+=s.code,!1}function Aw(t,e,n,r,i){return n.transform===!0&&"unaryExpression"in t.children?(Ct(t.children.unaryExpression[0],e+1,Gt,n,r,i),!1):!0}function Tw(t,e,n,r,i){return n.transform===!0&&r.methodBody===!0?(or(t,e+1,Gt,n,{...r,primaryPrefix:!0},i),!1):!0}function Bw(t,e,n,r,i){if(n.transform===!0){let s={code:""};return or(t,e+1,Gt,n,r,s),s.code=s.code.replace("{","["),s.code=s.code.replace("}","]"),i.code+=s.code,!1}return!0}function Uw(t,e,n,r,i){return So(t,"","LSquare","RSquare",e+1,n,r,i),!1}function Fw(t,e,n,r,i){if(r.arrayCreationExpression===!0&&"dimensions"in i){let s={code:""};return or(t,e+1,Gt,n,r,s),i.dimensions.push(s.code.trim()),!1}return!0}function Yw(t,e,n,r,i){if(n.transform===!0){let s=t.children.FloatLiteral[0].image;return s.slice(-1)==="f"&&(s=s.slice(0,-1)),i.code+=s,!1}return!0}const fg={fqnOrRefType:hw,fqnOrRefTypePartRest:dw,argumentList:mw,variableDeclaratorList:pw,variableDeclarator:fw,variableInitializerList:gw,result:yw,binaryExpression:bw,ternaryExpression:Zw,basicForStatement:aw,ifStatement:lw,enhancedForStatement:Iw,fieldDeclaration:vw,localVariableDeclaration:Gw,fieldModifier:Ds,variableModifier:Ds,classModifier:Ds,methodModifier:Ds,constructorModifier:Ds,unannType:Rw,classDeclaration:Sw,constructorDeclaration:Ww,methodBody:pg,constructorBody:pg,simpleTypeName:Vw,newExpression:Cw,methodDeclaration:Xw,methodDeclarator:Lw,blockStatement:xw,blockStatements:ww,formalParameterList:kw,primitiveCastExpression:Aw,primaryPrefix:Tw,arrayInitializer:Bw,dims:Uw,expression:Fw,floatingPointLiteral:Yw};function Gt(t,e,n,r,i){return"image"in t?uw(t,e,n,r,i):"name"in t&&t.name in fg?fg[t.name](t,e,n,r,i):!0}function Nw(t,e,n,r,i){return"name"in t&&t.name=="classBody"?(i.node=t,!1):!0}function Mw(t){let e={};return Ct(t,0,Nw,null,null,e),e.node}function Bl(t,e){let n=t,r={},i={code:""};return e.ignoreOuterClass&&(n=Mw(t)),Ct(n,0,Gt,e,{...r,noHeader:!0},i),e.ignoreOuterClass&&(i.code=i.code.trim().slice(1,-1)),e.transform===!0&&!r.noHeader&&i.arrayListReference===!0&&(i.code=Jw+i.code),i.code}function Ew(t,e,n,r,i){if(!("name"in t))return!0;if(t.name==="fieldDeclaration"){let o=Bl(t,{transform:!1,ignoreOuterClass:!1});return console.log(o),!1}return!0}const Hw=t=>Ct(t,0,Ew,null,null,null);function Kw(t){const e="public class Dummy {"+t+"}",n=Tl.parse(e);Hw(n)}const Jw=`
class ArrayList extends Array {
    constructor() {super(...[]);}
    size() {return this.length;}
    add(x) {this.push(x);}
    get(i) {return this[i];}
    remove(i) {this.splice(i,1);}
}
`;function ed(t){t=t.replace(/\/\/.*/g,""),t=t.replace(/\/\*[\s\S]*?\*\//g,""),t=t.replace(new RegExp("(?<!\\w)size(?!\\s*\\()","g"),"sz"),t=t.replace(new RegExp("(?<!\\w)mousePressed(?!\\s*\\()","g"),"mouseIsPressed");const e=/\(\s*(int|float|double|char|byte|boolean)\s*\)\s*(\w+)\s*\(([^\)]*)\)/g;t=t.replace(e,"$1($2($3))");const n=/setup\s*\(\s*\)/,r=/draw\s*\(\s*\)/;n.test(t)||(r.test(t)?t=`void setup () {}
`+t:t=`void setup() { ${t} }`);let i="public class Dummy {"+t+"}";const s=/#[0-9A-Fa-f]{6}/g;i=i.replace(s,'"$&"');const o=/import/g;return i=i.replace(o,"// [processing-p5-convert] $&"),i}function jw(t){const e=/\"#[0-9A-Fa-f]{6}\"/g;t=t.replace(e,i=>i.substring(1,i.length-1));const n=/\/\/ \[processing-p5-convert\] import /g;return t.match(n)&&(t=t.replace(n,"import ")),t}function gg(t){const e=ed(t),n=Tl.parse(e);return Bl(n,{transform:!0,ignoreOuterClass:!0})}function Pw(t){const e=ed(t),n=Tl.parse(e);let i=Bl(n,{transform:!1,ignoreOuterClass:!0});const s="{",o="}";return i=s+i+o,i=i.slice(s.length,-o.length),i=i.replace(/^\s*/g,""),i=i.replace(/\n    /g,`
`),jw(i)}typeof module<"u"&&(module.exports={printRawProcessing:ow,printOutlineProcessing:Kw,transformProcessing:gg,reconstructProcessing:Pw},console.log("processing-p5js-convert"));function Ow(t){const e=document.createElement("table"),n=document.createElement("thead"),r=document.createElement("tbody");e.appendChild(n),e.appendChild(r);const i=document.createElement("tr");return n.appendChild(i),t.columns.forEach(s=>{const o=document.createElement("th");o.textContent=s,i.appendChild(o)}),t.values.forEach(s=>{const o=document.createElement("tr");r.appendChild(o),s.forEach(a=>{const l=document.createElement("td");l.textContent=a,o.appendChild(l)})}),e}function zw(t){let e,n;return{c(){e=xr("svg"),n=xr("path"),Te(n,"d","M8,5.14V19.14L19,12.14L8,5.14Z"),tt(e,"width","70%"),tt(e,"height","70%"),tt(e,"fill","white"),Te(e,"viewBox","0 0 24 24")},m(r,i){Ut(r,e,i),ft(e,n)},d(r){r&&ur(e)}}}function _w(t){let e,n;return{c(){e=xr("svg"),n=xr("path"),Te(n,"d","M8.59 0L5 3.59L1.41 0L0 1.41L3.59 5L0 8.59L1.41 10L5 6.41L8.59 10L10 8.59L6.41 5L10 1.41L8.59 0Z"),Te(n,"fill","white"),tt(e,"width","30%"),tt(e,"height","30%"),tt(e,"fill","white"),Te(e,"viewBox","0 0 10 10"),Te(e,"fill","none"),Te(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){Ut(r,e,i),ft(e,n)},d(r){r&&ur(e)}}}function Dw(t){let e,n,r,i,s,o,a,l;function c(u,d){return u[4]?_w:zw}let m=c(t),p=m(t);return{c(){e=Wt("div"),n=Wt("main"),r=Yr(),i=Wt("button"),p.c(),this.c=Tt,i.disabled=s=t[0]==null&&t[2]!="p5"&&t[2]!="processing",Te(i,"id","run-button"),tt(i,"background-color",t[0]!=null||t[2]=="p5"||t[2]=="processing"?t[4]?"#ff4133":"#00CC3D":"#5f5f5f"),Te(e,"id","play-container"),Te(e,"style",o=t[1]=="vertical"?"right: calc(var(--output-height) + min(0.7vw, 1.4vh) + 1px); bottom: min(0.3vw, 0.6vh)":"right: min(0.4vw, 0.8vh); bottom: calc(var(--output-height) + min(0.5vw, 1vh))")},m(u,d){Ut(u,e,d),ft(e,n),ft(e,r),ft(e,i),p.m(i,null),t[14](e),a||(l=En(i,"click",t[5]),a=!0)},p(u,[d]){m!==(m=c(u))&&(p.d(1),p=m(u),p&&(p.c(),p.m(i,null))),d&5&&s!==(s=u[0]==null&&u[2]!="p5"&&u[2]!="processing")&&(i.disabled=s),d&21&&tt(i,"background-color",u[0]!=null||u[2]=="p5"||u[2]=="processing"?u[4]?"#ff4133":"#00CC3D":"#5f5f5f"),d&2&&o!==(o=u[1]=="vertical"?"right: calc(var(--output-height) + min(0.7vw, 1.4vh) + 1px); bottom: min(0.3vw, 0.6vh)":"right: min(0.4vw, 0.8vh); bottom: calc(var(--output-height) + min(0.5vw, 1vh))")&&Te(e,"style",o)},i:Tt,o:Tt,d(u){u&&ur(e),p.d(),t[14](null),a=!1,l()}}}function Qw(t,e,n){let r,i;Vs(t,ja,C=>n(12,r=C)),Vs(t,cu,C=>n(13,i=C));let{type:s="normal"}=e,{language:o}=e,{editor:a}=e,{offline:l=!1}=e,{webworker:c}=e,m,p=!0,u,d,h=!1,f;const g=new IntersectionObserver(C=>{C[0].isIntersecting?n(8,p=!0):n(8,p=!1)});function y(C,V){const x=new CustomEvent("changedout",{detail:{output:C,outputError:V},bubbles:!0,cancelable:!0,composed:!0});m==null||m.dispatchEvent(x)}function Z(C){if(n(4,h=!1),console.log(C.data),C.data.error)n(10,d=!0),console.log(C.data),n(9,u=o=="python"?"[line "+C.data.line+"] "+C.data.error:o=="ml"?C.data.error.message:C.data.error);else if(n(10,d=!1),o=="sql")if(C.data.result&&Array.isArray(C.data.result)&&C.data.result.length>0){const V=C.data.result.map(x=>Ow(x).outerHTML);n(9,u=V.join("<br>"))}else n(9,u="");else{let V="";C.data.debug&&(V+=C.data.debug+`

`),C.data.result&&(V+="'"+C.data.result+"'"),n(9,u=V)}}function I(){console.warn("Interrupting Code Execution"),o=="python"||o=="java"||o=="cpp"?c.port.close():o=="p5"||o=="processing"?f.remove():c.terminate();const C=new CustomEvent("recreateworker",{bubbles:!0,cancelable:!0,composed:!0});m==null||m.dispatchEvent(C),n(4,h=!1)}async function G(C){if(h){I();return}if(n(4,h=!0),o=="p5"){let w=a.state.doc.toString(),k=a.dom.getBoundingClientRect().width,A=a.dom.getBoundingClientRect().height;const Y=/createCanvas\(([^,]+),\s*([^)]+)\)/,U=Y.exec(w);let M,j;if(U)M=parseInt(U[1]),j=parseInt(U[2]);else{y("Runtime error: createCanvas() function not found",!0),n(4,h=!1);return}M<k&&(k=M),j<A&&(A=j),w=w.replace(Y,`createCanvas(${k}, ${A})`),console.log(w);const K=[];let P=console.log;console.log=function(O,...D){K.push(O+" "+D.join(" "))},window.onerror=function(O,D,le,X,T){y(`Runtime error: ${O}`,!0),n(4,h=!1)},window.onunhandledrejection=function(O){throw O.preventDefault(),O.reason};try{await window.eval(w)}catch(O){y(`Runtime error: ${O.message}`,!0),n(4,h=!1);return}n(11,f=new mm);const J=f.canvas;J.style.width=k+"px",J.style.height=A+"px";const E=new CustomEvent("canvasout",{detail:{canvas:J},bubbles:!0,cancelable:!0,composed:!0});m==null||m.dispatchEvent(E),y(K.join(`
`),!1),console.log=P;return}if(o=="processing"){let w=a.state.doc.toString();try{w=gg(w)}catch(J){const E=/line: (\d+)/,O=/column: (\d+)/,D=/--> (.*?) <--/,le=/but found --> '(.*?)' <--/;if(E&&O&&D&&le&&J.message.match(E)&&J.message.match(O)&&J.message.match(D)&&J.message.match(le)){const X=J.message.match(E)[1],T=J.message.match(O)[1],N=J.message.match(D)[1],z=J.message.match(le)[1];y(`Error at line ${X}, column ${T}: expecting  "${N}" but found  "${z}"`,!0)}else y(`Unknown error - ${J.message}`,!0);n(4,h=!1);return}let k=a.dom.getBoundingClientRect().width,A=a.dom.getBoundingClientRect().height*.7;const Y=/createCanvas\(([^,]+),\s*([^)]+)\)/,U=Y.exec(w);if(U){const J=parseInt(U[1]),E=parseInt(U[2]);J<k&&(k=J),E<A&&(A=E),w=w.replace(Y,`createCanvas(${k}, ${A})`)}else if(w.includes("setup ( ) {"))console.log("setup function found"),w=w.replace("setup ( ) {",`setup() { createCanvas(${k}, ${A});`);else{y("Error: setup() function not found",!0),n(4,h=!1);return}w=`
let width = ${Math.round(k)};
let height = ${Math.round(A)};
${w}
`,console.log(w);let M=[],j=console.log;console.log=function(J,...E){M.push(J+" "+E.join(" "))},typeof setup<"u"&&(setup=void 0),typeof draw<"u"&&(draw=void 0),window.onerror=function(J,E,O,D,le){y(`Runtime error: ${J}`,!0),n(4,h=!1)},window.onunhandledrejection=function(J){throw J.preventDefault(),J.reason};try{await window.eval(w)}catch(J){y(`Runtime error: ${J.message}`,!0),n(4,h=!1);return}n(11,f=new mm);const K=f.canvas;K.style.width=k+"px",K.style.height=A+"px";const P=new CustomEvent("canvasout",{detail:{canvas:K},bubbles:!0,cancelable:!0,composed:!0});m==null||m.dispatchEvent(P),y(M.join(`
`),!1),console.log=j,w.includes("draw ( )")||I();return}let V="";l&&(V=document.location.protocol+"//"+document.location.host+document.location.pathname,V=V.substring(0,V.lastIndexOf("/")),V+=o=="python"?"/utils/python/pyodide/":"/utils/java/");const x={offline:l,language:o,script:a.state.doc.toString(),input:"",baseUrl:V};o=="python"||o=="java"||o=="cpp"?c.port.postMessage(x):c.postMessage(x)}Ls(()=>{g.observe(m)});function R(C){Sr[C?"unshift":"push"](()=>{m=C,n(3,m)})}return t.$$set=C=>{"type"in C&&n(1,s=C.type),"language"in C&&n(2,o=C.language),"editor"in C&&n(6,a=C.editor),"offline"in C&&n(7,l=C.offline),"webworker"in C&&n(0,c=C.webworker)},t.$$.update=()=>{t.$$.dirty&1536&&y(u,d),t.$$.dirty&2308&&!p&&(o=="p5"||o=="processing")&&f&&I(),t.$$.dirty&12352&&r&&a&&a.dom.isEqualNode(i)&&(G(),nu(ja,r=!1,r)),t.$$.dirty&5&&c&&(console.log(c),o=="python"||o=="java"||o=="cpp"?n(0,c.port.onmessage=Z,c):(console.log("Initialized worker for language "+o),n(0,c.onmessage=Z,c)))},[c,s,o,m,h,G,a,l,p,u,d,f,r,i,R]}class qw extends Vi{constructor(e){super(),this.shadowRoot.innerHTML="<style>#play-container{width:min(2vw, 4vh);height:min(2vw, 4vh);position:absolute;z-index:10}#run-button{width:100%;height:100%;padding:0 !important;margin:0 !important;border-radius:50%;transition:all ease-in 150ms;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;box-shadow:2px -7px 17px -5px rgba(0, 0, 0, 0.35)}#run-button:hover{background-color:var(--run-button-bg-color-hover);transform:scale(1.1, 1.1)}#run-button:disabled{cursor:not-allowed}#run-button:focus{outline:0}</style>",Mi(this,{target:this.shadowRoot,props:Ni(this.attributes),customElement:!0},Qw,Dw,Wi,{type:1,language:2,editor:6,offline:7,webworker:0},null),e&&(e.target&&Ut(e.target,this,e.anchor),e.props&&(this.$set(e.props),mt()))}static get observedAttributes(){return["type","language","editor","offline","webworker"]}get type(){return this.$$.ctx[1]}set type(e){this.$$set({type:e}),mt()}get language(){return this.$$.ctx[2]}set language(e){this.$$set({language:e}),mt()}get editor(){return this.$$.ctx[6]}set editor(e){this.$$set({editor:e}),mt()}get offline(){return this.$$.ctx[7]}set offline(e){this.$$set({offline:e}),mt()}get webworker(){return this.$$.ctx[0]}set webworker(e){this.$$set({webworker:e}),mt()}}customElements.define("run-button",qw);class At{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),li.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let r=[];return this.decompose(e,n,r,0),li.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Qs(this),s=new Qs(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Qs(this,e)}iterRange(e,n=this.length){return new bg(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new Zg(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?At.empty:e.length<=32?new fr(e):li.from(fr.split(e,[]))}}class fr extends At{constructor(e,n=$w(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new ek(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new fr(yg(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Ul(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new fr(a,o.length+s.length));else{let l=a.length>>1;r.push(new fr(a.slice(0,l)),new fr(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof fr))return super.replace(e,n,r);let i=Ul(this.text,Ul(r.text,yg(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new fr(i,s):li.from(fr.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new fr(r,i)),r=[],i=-1);return i>-1&&n.push(new fr(r,i)),n}}class li extends At{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let m=this.children.slice();return m[i]=l,new li(m,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof li))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let h of e)h.flatten(d);return new fr(d,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,m=[];function p(d){let h;if(d.lines>s&&d instanceof li)for(let f of d.children)p(f);else d.lines>o&&(l>o||!l)?(u(),a.push(d)):d instanceof fr&&l&&(h=m[m.length-1])instanceof fr&&d.lines+h.lines<=32?(l+=d.lines,c+=d.length+1,m[m.length-1]=new fr(h.text.concat(d.text),h.length+1+d.length)):(l+d.lines>i&&u(),l+=d.lines,c+=d.length+1,m.push(d))}function u(){l!=0&&(a.push(m.length==1?m[0]:li.from(m,c)),c=-1,l=m.length=0)}for(let d of e)p(d);return u(),a.length==1?a[0]:new li(a,n)}}At.empty=new fr([""],0);function $w(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Ul(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function yg(t,e,n){return Ul(t,[""],e,n)}class Qs{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof fr?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof fr?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof fr){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof fr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class bg{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Qs(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Zg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(At.prototype[Symbol.iterator]=function(){return this.iter()},Qs.prototype[Symbol.iterator]=bg.prototype[Symbol.iterator]=Zg.prototype[Symbol.iterator]=function(){return this});class ek{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}let rs="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<rs.length;t++)rs[t]+=rs[t-1];function tk(t){for(let e=1;e<rs.length;e+=2)if(rs[e]>t)return rs[e-1]<=t;return!1}function Ig(t){return t>=127462&&t<=127487}const vg=8205;function dn(t,e,n=!0,r=!0){return(n?Gg:rk)(t,e,r)}function Gg(t,e,n){if(e==t.length)return e;e&&Rg(t.charCodeAt(e))&&Sg(t.charCodeAt(e-1))&&e--;let r=Hr(t,e);for(e+=Rn(r);e<t.length;){let i=Hr(t,e);if(r==vg||i==vg||n&&tk(i))e+=Rn(i),r=i;else if(Ig(i)){let s=0,o=e-2;for(;o>=0&&Ig(Hr(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function rk(t,e,n){for(;e>0;){let r=Gg(t,e-2,n);if(r<e)return r;e--}return 0}function Rg(t){return t>=56320&&t<57344}function Sg(t){return t>=55296&&t<56320}function Hr(t,e){let n=t.charCodeAt(e);if(!Sg(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Rg(r)?(n-55296<<10)+(r-56320)+65536:n}function td(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Rn(t){return t<65536?1:2}const rd=/\r\n?|\n/;var hn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(hn||(hn={}));class ci{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){nd(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new ci(e)}composeDesc(e){return this.empty?e:e.empty?this:Wg(this,e)}mapDesc(e,n=!1){return e.empty?this:id(this,e,n)}mapPos(e,n=-1,r=hn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=hn.Simple&&c>=e&&(r==hn.TrackDel&&i<e&&c>e||r==hn.TrackBefore&&i<e||r==hn.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ci(e)}static create(e){return new ci(e)}}class Xr extends ci{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return nd(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return id(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(At.empty);r.push(o?e.slice(s,s+o):At.empty)}s+=o}return new Xr(n,r)}compose(e){return this.empty?e:e.empty?this:Wg(this,e,!0)}map(e,n=!1){return e.empty?this:id(this,e,n,!0)}iterChanges(e,n=!1){nd(this,e,n)}get desc(){return ci.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new qs(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let m=Math.min(s.len,l-a);Qr(i,m,-1);let p=s.ins==-1?-1:s.off==0?s.ins:0;Qr(n,m,p),p>0&&Oi(r,n,s.text),s.forward(m),a+=m}let c=e[o++];for(;a<c;){if(s.done)break e;let m=Math.min(s.len,c-a);Qr(n,m,-1),Qr(i,m,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(m),a+=m}}return{changes:new Xr(n,r),filtered:ci.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(m=!1){if(!m&&!i.length)return;o<n&&Qr(i,n-o,-1);let p=new Xr(i,s);a=a?a.compose(p.map(a)):p,i=[],s=[],o=0}function c(m){if(Array.isArray(m))for(let p of m)c(p);else if(m instanceof Xr){if(m.length!=n)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${n})`);l(),a=a?a.compose(m.map(a)):m}else{let{from:p,to:u=p,insert:d}=m;if(p>u||p<0||u>n)throw new RangeError(`Invalid change range ${p} to ${u} (in doc of length ${n})`);let h=d?typeof d=="string"?At.of(d.split(r||rd)):d:At.empty,f=h.length;if(p==u&&f==0)return;p<o&&l(),p>o&&Qr(i,p-o,-1),Qr(i,u-p,f),Oi(s,i,h),o=u}}return c(e),l(!a),a}static empty(e){return new Xr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(At.empty);r[i]=At.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Xr(n,r)}static createSet(e,n){return new Xr(e,n)}}function Qr(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Oi(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(At.empty);t.push(n)}}function nd(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,m=s,p=At.empty;for(;c+=a,m+=l,l&&r&&(p=p.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,m,p),i=c,s=m}}}function id(t,e,n,r=!1){let i=[],s=r?[]:null,o=new qs(t),a=new qs(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Qr(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Qr(i,a.ins,-1);c;){let m=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=m&&(Qr(i,0,o.ins),s&&Oi(s,i,o.text),l=o.i),o.forward(m),c-=m}a.next()}else if(o.ins>=0){let c=0,m=o.len;for(;m;)if(a.ins==-1){let p=Math.min(m,a.len);c+=p,m-=p,a.forward(p)}else if(a.ins==0&&a.len<m)m-=a.len,a.next();else break;Qr(i,c,l<o.i?o.ins:0),s&&l<o.i&&Oi(s,i,o.text),l=o.i,o.forward(o.len-m)}else{if(o.done&&a.done)return s?Xr.createSet(i,s):ci.create(i);throw new Error("Mismatched change set lengths")}}function Wg(t,e,n=!1){let r=[],i=n?[]:null,s=new qs(t),o=new qs(e);for(let a=!1;;){if(s.done&&o.done)return i?Xr.createSet(r,i):ci.create(r);if(s.ins==0)Qr(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Qr(r,0,o.ins,a),i&&Oi(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let m=o.ins==-1?-1:o.off?0:o.ins;Qr(r,l,m,a),i&&m&&Oi(i,r,o.text)}else o.ins==-1?(Qr(r,s.off?0:s.len,l,a),i&&Oi(i,r,s.textBit(l))):(Qr(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Oi(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class qs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?At.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?At.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Wo{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Wo(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Ye.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Ye.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ye.range(e.anchor,e.head)}static create(e,n,r){return new Wo(e,n,r)}}class Ye{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Ye.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ye([this.main],0)}addRange(e,n=!0){return Ye.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Ye.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ye(e.ranges.map(n=>Wo.fromJSON(n)),e.main)}static single(e,n=e){return new Ye([Ye.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return Ye.normalized(e.slice(),n);r=s.to}return new Ye(e,n)}static cursor(e,n=0,r,i){return Wo.create(e,e,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(i!=null?i:33554431)<<5)}static range(e,n,r){let i=(r!=null?r:33554431)<<5;return n<e?Wo.create(n,e,16|i|8):Wo.create(e,n,i|(n>e?4:0))}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?Ye.range(l,a):Ye.range(a,l))}}return new Ye(e,n)}}function Vg(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let od=0;class ct{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=od++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new ct(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:sd),!!e.static,e.enables)}of(e){return new Fl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Fl(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function sd(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Fl{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=od++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,m=[];for(let p of this.dependencies)p=="doc"?l=!0:p=="selection"?c=!0:(((n=e[p.id])!==null&&n!==void 0?n:1)&1)==0&&m.push(e[p.id]);return{create(p){return p.values[o]=r(p),1},update(p,u){if(l&&u.docChanged||c&&(u.docChanged||u.selection)||ad(p,m)){let d=r(p);if(a?!Cg(d,p.values[o],i):!i(d,p.values[o]))return p.values[o]=d,1}return 0},reconfigure:(p,u)=>{let d,h=u.config.address[s];if(h!=null){let f=Nl(u,h);if(this.dependencies.every(g=>g instanceof ct?u.facet(g)===p.facet(g):g instanceof br?u.field(g,!1)==p.field(g,!1):!0)||(a?Cg(d=r(p),f,i):i(d=r(p),f)))return p.values[o]=f,0}else d=r(p);return p.values[o]=d,1}}}}function Cg(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function ad(t,e){let n=!1;for(let r of e)ea(t,r)&1&&(n=!0);return n}function nk(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let m=0;m<r.length;m++){let p=Nl(l,r[m]);if(i[m]==2)for(let u of p)c.push(u);else c.push(p)}return e.combine(c)}return{create(l){for(let c of r)ea(l,c);return l.values[o]=a(l),1},update(l,c){if(!ad(l,s))return 0;let m=a(l);return e.compare(m,l.values[o])?0:(l.values[o]=m,1)},reconfigure(l,c){let m=ad(l,r),p=c.config.facets[e.id],u=c.facet(e);if(p&&!m&&sd(n,p))return l.values[o]=u,0;let d=a(l);return e.compare(d,u)?(l.values[o]=u,0):(l.values[o]=d,1)}}}const Xg=ct.define({static:!0});class br{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new br(od++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Xg).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,Xg.of({field:this,create:e})]}get extension(){return this}}const Vo={lowest:4,low:3,default:2,high:1,highest:0};function $s(t){return e=>new Lg(e,t)}const Co={highest:$s(Vo.highest),high:$s(Vo.high),default:$s(Vo.default),low:$s(Vo.low),lowest:$s(Vo.lowest)};class Lg{constructor(e,n){this.inner=e,this.prec=n}}class Xo{of(e){return new ld(this,e)}reconfigure(e){return Xo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ld{constructor(e,n){this.compartment=e,this.inner=n}}class Yl{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let u of ik(e,n,o))u instanceof br?i.push(u):(s[u.facet.id]||(s[u.facet.id]=[])).push(u);let a=Object.create(null),l=[],c=[];for(let u of i)a[u.id]=c.length<<1,c.push(d=>u.slot(d));let m=r==null?void 0:r.config.facets;for(let u in s){let d=s[u],h=d[0].facet,f=m&&m[u]||[];if(d.every(g=>g.type==0))if(a[h.id]=l.length<<1|1,sd(f,d))l.push(r.facet(h));else{let g=h.combine(d.map(y=>y.value));l.push(r&&h.compare(g,r.facet(h))?r.facet(h):g)}else{for(let g of d)g.type==0?(a[g.id]=l.length<<1|1,l.push(g.value)):(a[g.id]=c.length<<1,c.push(y=>g.dynamicSlot(y)));a[h.id]=c.length<<1,c.push(g=>nk(g,h,d))}}let p=c.map(u=>u(a));return new Yl(e,o,p,a,l,s)}}function ik(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof ld&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof ld){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof Lg)s(o.inner,o.prec);else if(o instanceof br)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Fl)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Vo.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Vo.default),r.reduce((o,a)=>o.concat(a))}function ea(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Nl(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const xg=ct.define(),wg=ct.define({combine:t=>t.some(e=>e),static:!0}),kg=ct.define({combine:t=>t.length?t[0]:void 0,static:!0}),Ag=ct.define(),Tg=ct.define(),Bg=ct.define(),Ug=ct.define({combine:t=>t.length?t[0]:!1});class zi{constructor(e,n){this.type=e,this.value=n}static define(){return new ok}}class ok{of(e){return new zi(this,e)}}class sk{constructor(e){this.map=e}of(e){return new Zt(this,e)}}class Zt{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Zt(this.type,n)}is(e){return this.type==e}static define(e={}){return new sk(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Zt.reconfigure=Zt.define(),Zt.appendConfig=Zt.define();class Zr{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&Vg(r,n.newLength),s.some(a=>a.type==Zr.time)||(this.annotations=s.concat(Zr.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Zr(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Zr.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Zr.time=zi.define(),Zr.userEvent=zi.define(),Zr.addToHistory=zi.define(),Zr.remote=zi.define();function ak(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Fg(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=Xr.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Zt.mapEffects(t.effects,i).concat(Zt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function cd(t,e,n){let r=e.selection,i=ns(e.annotations);return e.userEvent&&(i=i.concat(Zr.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xr?e.changes:Xr.of(e.changes||[],n,t.facet(kg)),selection:r&&(r instanceof Ye?r:Ye.single(r.anchor,r.head)),effects:ns(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Yg(t,e,n){let r=cd(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=Fg(r,cd(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=Zr.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return ck(n?lk(i):i)}function lk(t){let e=t.startState,n=!0;for(let i of e.facet(Ag)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:ak(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Xr.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Zr.create(e,i,t.selection&&t.selection.map(s),Zt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(Tg);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Zr?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Zr?t=s[0]:t=Yg(e,ns(s),!1)}return t}function ck(t){let e=t.startState,n=e.facet(Bg),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=Fg(r,cd(e,s,t.changes.newLength),!0))}return r==t?t:Zr.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const uk=[];function ns(t){return t==null?uk:Array.isArray(t)?t:[t]}var nr=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(nr||(nr={}));const dk=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ud;try{ud=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function hk(t){if(ud)return ud.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||dk.test(n)))return!0}return!1}function mk(t){return e=>{if(!/\S/.test(e))return nr.Space;if(hk(e))return nr.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return nr.Word;return nr.Other}}class Lt{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)ea(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return ea(this,r),Nl(this,r)}update(...e){return Yg(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(Xo.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,l)=>i.set(l,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(Zt.reconfigure)?(n=null,r=o.value):o.is(Zt.appendConfig)&&(n=null,r=ns(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=Yl.resolve(r,i,this),s=new Lt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new Lt(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Ye.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=ns(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),m=c.map(i);for(let u=0;u<a;u++)s[u]=s[u].map(m);let p=i.mapDesc(c,!0);s.push(l.range.map(p)),i=i.compose(m),o=Zt.mapEffects(o,m).concat(Zt.mapEffects(ns(l.effects),p))}return{changes:i,selection:Ye.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Xr?e:Xr.of(e,this.doc.length,this.facet(Lt.lineSeparator))}toText(e){return At.of(e.split(this.facet(Lt.lineSeparator)||rd))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ea(this,n),Nl(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof br&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Lt.create({doc:e.doc,selection:Ye.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Yl.resolve(e.extensions||[],new Map),r=e.doc instanceof At?e.doc:At.of((e.doc||"").split(n.staticFacet(Lt.lineSeparator)||rd)),i=e.selection?e.selection instanceof Ye?e.selection:Ye.single(e.selection.anchor,e.selection.head):Ye.single(0);return Vg(i,r.length),n.staticFacet(wg)||(i=i.asSingle()),new Lt(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Lt.tabSize)}get lineBreak(){return this.facet(Lt.lineSeparator)||`
`}get readOnly(){return this.facet(Ug)}phrase(e,...n){for(let r of this.facet(Lt.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(xg))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return mk(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=dn(n,o,!1);if(s(n.slice(l,o))!=nr.Word)break;o=l}for(;a<i;){let l=dn(n,a);if(s(n.slice(a,l))!=nr.Word)break;a=l}return o==a?null:Ye.range(o+r,a+r)}}Lt.allowMultipleSelections=wg,Lt.tabSize=ct.define({combine:t=>t.length?t[0]:4}),Lt.lineSeparator=kg,Lt.readOnly=Ug,Lt.phrases=ct.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}}),Lt.languageData=xg,Lt.changeFilter=Ag,Lt.transactionFilter=Tg,Lt.transactionExtender=Bg,Xo.reconfigure=Zt.define();function ui(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Lo{eq(e){return this==e}range(e,n=e){return ta.create(e,n,this)}}Lo.prototype.startSide=Lo.prototype.endSide=0,Lo.prototype.point=!1,Lo.prototype.mapMode=hn.TrackDel;class ta{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new ta(e,n,r)}}function dd(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class hd{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],m=this.from[l]+e,p=this.to[l]+e,u,d;if(m==p){let h=n.mapPos(m,c.startSide,c.mapMode);if(h==null||(u=d=h,c.startSide!=c.endSide&&(d=n.mapPos(m,c.endSide),d<u)))continue}else if(u=n.mapPos(m,c.startSide),d=n.mapPos(p,c.endSide),u>d||u==d&&c.startSide>0&&c.endSide<=0)continue;(d-u||c.endSide-c.startSide)<0||(o<0&&(o=u),c.point&&(a=Math.max(a,d-u)),r.push(c),i.push(u-o),s.push(d-o))}return{mapped:r.length?new hd(i,s,r,a):null,pos:o}}}class Yt{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new Yt(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(dd)),this.isEmpty)return n.length?Yt.of(n):this;let a=new Mg(this,null,-1).goto(0),l=0,c=[],m=new _i;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let p=n[l++];m.addInner(p.from,p.to,p.value)||c.push(p)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&m.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(m.addInner(a.from,a.to,a.value)||c.push(ta.create(a.from,a.to,a.value))),a.next());return m.finishInner(this.nextLayer.isEmpty&&!c.length?Yt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:m,pos:p}=l.map(a,e);m&&(i=Math.max(i,m.maxPoint),n.push(m),r.push(p))}}let s=this.nextLayer.map(e);return n.length==0?s:new Yt(r,n,s||Yt.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return ra.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return ra.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),a=n.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),l=Ng(o,a,r),c=new na(o,l,s),m=new na(a,l,s);r.iterGaps((p,u,d)=>Eg(c,p,m,u,d,i)),r.empty&&r.length==0&&Eg(c,0,m,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=1e9-1);let s=e.filter(m=>!m.isEmpty&&n.indexOf(m)<0),o=n.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Ng(s,o),l=new na(s,a,0).goto(r),c=new na(o,a,0).goto(r);for(;;){if(l.to!=c.to||!pd(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new na(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let m=o.activeForPoint(o.to),p=o.pointFrom<n?m.length+1:Math.min(m.length,l);i.point(a,c,o.point,m,p,o.pointRank),l=Math.min(o.openEnd(c),m.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new _i;for(let i of e instanceof ta?[e]:n?pk(e):e)r.add(i.from,i.to,i.value);return r.finish()}}Yt.empty=new Yt([],[],null,-1);function pk(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(dd(e,r)>0)return t.slice().sort(dd);e=r}return t}Yt.empty.nextLayer=Yt.empty;class _i{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new hd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new _i)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Yt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Yt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Ng(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class Mg{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ra{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new Mg(o,n,r,s));return i.length==1?i[0]:new ra(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)md(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)md(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),md(this.heap,0)}}}function md(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class na{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ra.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Ml(this.active,e),Ml(this.activeTo,e),Ml(this.activeRank,e),this.minActive=Hg(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;El(this.active,n,r),El(this.activeTo,n,i),El(this.activeRank,n,s),e&&El(e,n,this.cursor.from),this.minActive=Hg(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Ml(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Eg(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=t.to+l-n.to||t.endSide-n.endSide,m=c<0?t.to+l:n.to,p=Math.min(m,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&pd(t.activeForPoint(t.to+l),n.activeForPoint(n.to))||s.comparePoint(a,p,t.point,n.point):p>a&&!pd(t.active,n.active)&&s.compareRange(a,p,t.active,n.active),m>o)break;a=m,c<=0&&t.next(),c>=0&&n.next()}}function pd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Ml(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function El(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Hg(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function ia(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=dn(t,i));return r}function fd(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=dn(t,i)}return r===!0?-1:t.length}const gd="\u037C",Kg=typeof Symbol>"u"?"__"+gd:Symbol.for(gd),yd=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Jg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Di{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let m=[],p=/^@(\w+)\b/.exec(o[0]),u=p&&p[1]=="keyframes";if(p&&a==null)return l.push(o[0]+";");for(let d in a){let h=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(f=>o.map(g=>f.replace(/&/,g))).reduce((f,g)=>f.concat(g)),h,l);else if(h&&typeof h=="object"){if(!p)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),h,m,u)}else h!=null&&m.push(d.replace(/_.*/,"").replace(/[A-Z]/g,f=>"-"+f.toLowerCase())+": "+h+";")}(m.length||u)&&l.push((r&&!p&&!c?o.map(r):o).join(", ")+" {"+m.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Jg[Kg]||1;return Jg[Kg]=e+1,gd+e.toString(36)}static mount(e,n){(e[yd]||new fk(e)).mount(Array.isArray(n)?n:[n])}}let Hl=null;class fk{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Hl)return e.adoptedStyleSheets=[Hl.sheet].concat(e.adoptedStyleSheets),e[yd]=Hl;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Hl=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let n=e.head||e;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],e[yd]=this}mount(e){let n=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var Qi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},oa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},jg=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);for(var gk=typeof navigator<"u"&&/Mac/.test(navigator.platform),yk=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),bk=gk||jg&&+jg[1]<57,Kr=0;Kr<10;Kr++)Qi[48+Kr]=Qi[96+Kr]=String(Kr);for(var Kr=1;Kr<=24;Kr++)Qi[Kr+111]="F"+Kr;for(var Kr=65;Kr<=90;Kr++)Qi[Kr]=String.fromCharCode(Kr+32),oa[Kr]=String.fromCharCode(Kr);for(var bd in Qi)oa.hasOwnProperty(bd)||(oa[bd]=Qi[bd]);function Zk(t){var e=bk&&(t.ctrlKey||t.altKey||t.metaKey)||yk&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?oa:Qi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Kl(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function is(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Ik(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Jl(t,e){if(!e.anchorNode)return!1;try{return is(t,e.anchorNode)}catch{return!1}}function sa(t){return t.nodeType==3?ss(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function jl(t,e,n,r){return n?Pg(t,e,n,r,-1)||Pg(t,e,n,r,1):!1}function Pl(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Pg(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:aa(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Pl(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?aa(t):0}else return!1}}function aa(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}const Og={left:0,right:0,top:0,bottom:0};function Zd(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function vk(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Gk(t,e,n,r,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let m=t;m;)if(m.nodeType==1){let p,u=m==l.body;if(u)p=vk(c);else{if(m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let f=m.getBoundingClientRect();p={left:f.left,right:f.left+m.clientWidth,top:f.top,bottom:f.top+m.clientHeight}}let d=0,h=0;if(i=="nearest")e.top<p.top?(h=-(p.top-e.top+o),n>0&&e.bottom>p.bottom+h&&(h=e.bottom-p.bottom+h+o)):e.bottom>p.bottom&&(h=e.bottom-p.bottom+o,n<0&&e.top-h<p.top&&(h=-(p.top+h-e.top+o)));else{let f=e.bottom-e.top,g=p.bottom-p.top;h=(i=="center"&&f<=g?e.top+f/2-g/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-g+o)-p.top}if(r=="nearest"?e.left<p.left?(d=-(p.left-e.left+s),n>0&&e.right>p.right+d&&(d=e.right-p.right+d+s)):e.right>p.right&&(d=e.right-p.right+s,n<0&&e.left<p.left+d&&(d=-(p.left+d-e.left+s))):d=(r=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:r=="start"==a?e.left-s:e.right-(p.right-p.left)+s)-p.left,d||h)if(u)c.scrollBy(d,h);else{let f=0,g=0;if(h){let y=m.scrollTop;m.scrollTop+=h,g=m.scrollTop-y}if(d){let y=m.scrollLeft;m.scrollLeft+=d,f=m.scrollLeft-y}e={left:e.left-f,top:e.top-g,right:e.right-f,bottom:e.bottom-g},f&&Math.abs(f-d)<1&&(r="nearest"),g&&Math.abs(g-h)<1&&(i="nearest")}if(u)break;m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}class Rk{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let os=null;function zg(t){if(t.setActive)return t.setActive();if(os)return t.focus(os);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(os==null?{get preventScroll(){return os={preventScroll:!0},!0}}:void 0),!os){os=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let _g;function ss(t,e,n=e){let r=_g||(_g=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function as(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function Sk(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Dg(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Wk(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(;;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=aa(n))}else{if(n==t)return!0;r=Pl(n),n=n.parentNode}}class qr{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new qr(e.parentNode,Pl(e),n)}static after(e,n){return new qr(e.parentNode,Pl(e)+1,n)}}const Id=[];class Qt{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,n){return null}sync(e){if(this.dirty&2){let n=this.dom,r=null,i;for(let s of this.children){if(s.dirty){if(!s.dom&&(i=r?r.nextSibling:n.firstChild)){let o=Qt.get(i);(!o||!o.parent&&o.canReuseDOM(s))&&s.reuseDOM(i)}s.sync(e),s.dirty=0}if(i=r?r.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&i!=s.dom&&(e.written=!0),s.dom.parentNode==n)for(;i&&i!=s.dom;)i=Qg(i);else n.insertBefore(s.dom,i);r=s.dom}for(i=r?r.nextSibling:n.firstChild,i&&e&&e.node==n&&(e.written=!0);i;)i=Qg(i)}else if(this.dirty&1)for(let n of this.children)n.dirty&&(n.sync(e),n.dirty=0)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=aa(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Qt.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,m=r;l<this.children.length;l++){let p=this.children[l],u=c+p.length;if(c<e&&u>n)return p.domBoundsAround(e,n,c);if(u>=e&&i==-1&&(i=l,s=c),c>n&&p.dom.parentNode==this.dom){o=l,a=m;break}m=u,c=u+p.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.dirty|=2),n.dirty&1)return;n.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=Id){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new qg(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}Qt.prototype.breakAfter=0;function Qg(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class qg{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function $g(t,e,n,r,i,s,o,a,l){let{children:c}=t,m=c.length?c[e]:null,p=s.length?s[s.length-1]:null,u=p?p.breakAfter:o;if(!(e==r&&m&&!o&&!u&&s.length<2&&m.merge(n,i,s.length?p:null,n==0,a,l))){if(r<c.length){let d=c[r];d&&i<d.length?(e==r&&(d=d.split(i),i=0),!u&&p&&d.merge(0,i,p,!0,0,l)?s[s.length-1]=d:(i&&d.merge(0,i,null,!1,0,l),s.push(d))):d!=null&&d.breakAfter&&(p?p.breakAfter=1:o=1),r++}for(m&&(m.breakAfter=o,n>0&&(!o&&s.length&&m.merge(n,m.length,s[0],!1,a,0)?m.breakAfter=s.shift().breakAfter:(n<m.length||m.children.length&&m.children[m.children.length-1].length==0)&&m.merge(n,m.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function ey(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:m}=o.findPos(e,-1),p=e-n;for(let u of r)p+=u.length;t.length+=p,$g(t,c,m,a,l,r,0,i,s)}let Sn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},vd=typeof document<"u"?document:{documentElement:{style:{}}};const Gd=/Edge\/(\d+)/.exec(Sn.userAgent),ty=/MSIE \d/.test(Sn.userAgent),Rd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Sn.userAgent),Ol=!!(ty||Rd||Gd),ry=!Ol&&/gecko\/(\d+)/i.test(Sn.userAgent),Sd=!Ol&&/Chrome\/(\d+)/.exec(Sn.userAgent),ny="webkitFontSmoothing"in vd.documentElement.style,iy=!Ol&&/Apple Computer/.test(Sn.vendor),oy=iy&&(/Mobile\/\w+/.test(Sn.userAgent)||Sn.maxTouchPoints>2);var ut={mac:oy||/Mac/.test(Sn.platform),windows:/Win/.test(Sn.platform),linux:/Linux|X11/.test(Sn.platform),ie:Ol,ie_version:ty?vd.documentMode||6:Rd?+Rd[1]:Gd?+Gd[1]:0,gecko:ry,gecko_version:ry?+(/Firefox\/(\d+)/.exec(Sn.userAgent)||[0,0])[1]:0,chrome:!!Sd,chrome_version:Sd?+Sd[1]:0,ios:oy,android:/Android\b/.test(Sn.userAgent),webkit:ny,safari:iy,webkit_version:ny?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:vd.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Vk=256;class qi extends Qt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return r&&(!(r instanceof qi)||this.length-(n-e)+r.length>Vk)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new qi(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new qr(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Wd(this.dom,e,n)}}class di extends Qt{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(Dg(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,n,r,i,s,o){return r&&(!(r instanceof di&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(ey(this,e,n,r?r.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new di(this.mark,n,o)}domAtPos(e){return ly(this,e)}coordsAt(e,n){return uy(this,e,n)}}function Wd(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?ut.chrome||ut.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=ss(t,i,s).getClientRects();if(!a.length)return Og;let l=a[(o?o<0:n>=0)?0:a.length-1];return ut.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Zd(l,o<0):l||null}class $i extends Qt{constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}static create(e,n,r){return new(e.customView||$i)(e,n,r)}split(e){let n=$i.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof $i)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e.length==this.length&&e instanceof $i&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return At.empty;let e=this;for(;e.parent;)e=e.parent;let n=e.editorView,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):At.empty}domAtPos(e){return e==0?qr.before(this.dom):qr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.dom.getClientRects(),i=null;if(!r.length)return Og;for(let s=e>0?r.length-1:0;i=r[s],!(e>0?s==0:s==r.length-1||i.top<i.bottom);s+=e>0?-1:1);return this.length?i:Zd(i,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class sy extends $i{domAtPos(e){let{topView:n,text:r}=this.widget;return n?Vd(e,0,n,r,(i,s)=>i.domAtPos(s),i=>new qr(r,Math.min(i,r.nodeValue.length))):new qr(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,n){let{topView:r,text:i}=this.widget;return r?ay(e,n,r,i):Math.min(n,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,n){let{topView:r,text:i}=this.widget;return r?Vd(e,n,r,i,(s,o,a)=>s.coordsAt(o,a),(s,o)=>Wd(i,s,o)):Wd(i,e,n)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function Vd(t,e,n,r,i,s){if(n instanceof di){for(let o=n.dom.firstChild;o;o=o.nextSibling){let a=Qt.get(o);if(!a)return s(t,e);let l=is(o,r),c=a.length+(l?r.nodeValue.length:0);if(t<c||t==c&&a.getSide()<=0)return l?Vd(t,e,a,r,i,s):i(a,t,e);t-=c}return i(n,n.length,-1)}else return n.dom==r?s(t,e):i(n,t,e)}function ay(t,e,n,r){if(n instanceof di)for(let i of n.children){let s=0,o=is(i.dom,r);if(is(i.dom,t))return s+(o?ay(t,e,i,r):i.localPosFromDOM(t,e));s+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(e,r.nodeValue.length);return n.localPosFromDOM(t,e)}class ls extends Qt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ls&&e.side==this.side}split(){return new ls(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return qr.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let n=this.dom.getBoundingClientRect(),r=Ck(this,this.side>0?-1:1);return r&&r.top<n.bottom&&r.bottom>n.top?{left:n.left,right:n.right,top:r.top,bottom:r.bottom}:n}get overrideDOMText(){return At.empty}}qi.prototype.children=$i.prototype.children=ls.prototype.children=Id;function Ck(t,e){let n=t.parent,r=n?n.children.indexOf(t):-1;for(;n&&r>=0;)if(e<0?r>0:r<n.children.length){let i=n.children[r+e];if(i instanceof qi){let s=i.coordsAt(e<0?i.length:0,e);if(s)return s}r+=e}else if(n instanceof di&&n.parent)r=n.parent.children.indexOf(n)+(e<0?0:1),n=n.parent;else{let i=n.dom.lastChild;if(i&&i.nodeName=="BR")return i.getClientRects()[0];break}}function ly(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new qr(n,0)}function cy(t,e,n){let r,{children:i}=t;n>0&&e instanceof di&&i.length&&(r=i[i.length-1])instanceof di&&r.mark.eq(e.mark)?cy(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function uy(t,e,n){let r=null,i=-1,s=null,o=-1;function a(c,m){for(let p=0,u=0;p<c.children.length&&u<=m;p++){let d=c.children[p],h=u+d.length;h>=m&&(d.children.length?a(d,m-u):!s&&(h>m||u==h&&d.getSide()>0)?(s=d,o=m-u):(u<m||u==h&&d.getSide()<0)&&(r=d,i=m-u)),u=h}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):Xk(t)}function Xk(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=sa(e);return n[n.length-1]||null}function Cd(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}function Xd(t,e){if(t==e)return!0;if(!t||!e)return!1;let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i of n)if(r.indexOf(i)==-1||t[i]!==e[i])return!1;return!0}function Ld(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}class eo{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var jt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(jt||(jt={}));class pt extends Lo{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new zl(e)}static widget(e){let n=e.side||0,r=!!e.block;return n+=r?n>0?3e8:-4e8:n>0?1e8:-1e8,new xo(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=dy(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new xo(e,r,i,n,e.widget||null,!0)}static line(e){return new la(e)}static set(e,n=!1){return Yt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}pt.none=Yt.empty;class zl extends pt{constructor(e){let{start:n,end:r}=dy(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof zl&&this.tagName==e.tagName&&this.class==e.class&&Xd(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}zl.prototype.point=!1;class la extends pt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof la&&Xd(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}la.prototype.mapMode=hn.TrackBefore,la.prototype.point=!0;class xo extends pt{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?hn.TrackBefore:hn.TrackAfter:hn.TrackDel}get type(){return this.startSide<this.endSide?jt.WidgetRange:this.startSide<=0?jt.WidgetBefore:jt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof xo&&Lk(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}xo.prototype.point=!0;function dy(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n!=null?n:e,end:r!=null?r:e}}function Lk(t,e){return t==e||!!(t&&e&&t.compare(e))}function xd(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class mn extends Qt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof mn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),ey(this,e,n,r?r.children:[],s,o),!0}split(e){let n=new mn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Xd(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){cy(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Cd(n,this.attrs||{})),r&&(this.attrs=Cd({class:r},this.attrs||{}))}domAtPos(e){return ly(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var n;this.dom?this.dirty&4&&(Dg(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Ld(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let r=this.dom.lastChild;for(;r&&Qt.get(r)instanceof di;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((n=Qt.get(r))===null||n===void 0?void 0:n.isEditable)==!1&&(!ut.ios||!this.children.some(i=>i instanceof qi))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let n of this.children){if(!(n instanceof qi)||/[^ -~]/.test(n.text))return null;let r=sa(n.dom);if(r.length!=1)return null;e+=r[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,n){return uy(this,e,n)}become(e){return!1}get type(){return jt.Text}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof mn)return s;if(o>n)break}i=o+s.breakAfter}return null}}class wo extends Qt{constructor(e,n,r){super(),this.widget=e,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof wo)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?qr.before(this.dom):qr.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new wo(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return Id}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):At.empty}domBoundsAround(){return null}become(e){return e instanceof wo&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wd{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof wo&&e.type==jt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new mn),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(_l(new ls(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(_l(new qi(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof xo){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof xo)if(r.block){let{type:l}=r;l==jt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new wo(r.widget||new hy("div"),a,l))}else{let l=$i.create(r.widget||new hy("span"),a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),m=!l.isEditable&&(e<n||r.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(p.append(_l(new ls(1),i),s),s=i.length+Math.max(0,s-i.length)),p.append(_l(l,i),s),this.atCursorPos=m,this.pendingBuffer=m?e<n?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new wd(e,n,r,s);return o.openEnd=Yt.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function _l(t,e){for(let n of e)t=new di(n,[t],t.length);return t}class hy extends eo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const my=ct.define(),py=ct.define(),fy=ct.define(),gy=ct.define(),kd=ct.define(),yy=ct.define(),by=ct.define({combine:t=>t.some(e=>e)}),Zy=ct.define({combine:t=>t.some(e=>e)});class Dl{constructor(e,n="nearest",r="nearest",i=5,s=5){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new Dl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Iy=Zt.define({map:(t,e)=>t.map(e)});function Wn(t,e,n){let r=t.facet(gy);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Ql=ct.define({combine:t=>t.length?t[0]:!0});let xk=0;const ca=ct.define();class Ir{constructor(e,n,r,i){this.id=e,this.create=n,this.domEventHandlers=r,this.extension=i(this)}static define(e,n){const{eventHandlers:r,provide:i,decorations:s}=n||{};return new Ir(xk++,e,r,o=>{let a=[ca.of(o)];return s&&a.push(ua.of(l=>{let c=l.plugin(o);return c?s(c):pt.none})),i&&a.push(i(o)),a})}static fromClass(e,n){return Ir.define(r=>new e(r),n)}}class Ad{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Wn(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Wn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Wn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const vy=ct.define(),Td=ct.define(),ua=ct.define(),Gy=ct.define(),Ry=ct.define(),da=ct.define();class hi{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new hi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,m=l?l.fromB:1e9;for(;s<n.length&&n[s]<m;){let p=n[s],u=n[s+1],d=Math.max(a,p),h=Math.min(m,u);if(d<=h&&new hi(d+c,h+c,d,h).addToSet(r),u>m)break;s+=2}if(!l)return r;new hi(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class ql{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Xr.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,l,c)=>i.push(new hi(o,a,l,c))),this.changedRanges=i;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,n,r){return new ql(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var sr=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(sr||(sr={}));const Bd=sr.LTR,wk=sr.RTL;function Sy(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const kk=Sy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ak=Sy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ud=Object.create(null),mi=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Ud[e]=n,Ud[n]=-e}function Tk(t){return t<=247?kk[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Ak[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const Bk=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class cs{constructor(e,n,r){this.from=e,this.to=n,this.level=r}get dir(){return this.level%2?wk:Bd}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const ar=[];function Uk(t,e){let n=t.length,r=e==Bd?1:2,i=e==Bd?2:1;if(!t||r==1&&!Bk.test(t))return Wy(n);for(let o=0,a=r,l=r;o<n;o++){let c=Tk(t.charCodeAt(o));c==512?c=a:c==8&&l==4&&(c=16),ar[o]=c==4?2:c,c&7&&(l=c),a=c}for(let o=0,a=r,l=r;o<n;o++){let c=ar[o];if(c==128)o<n-1&&a==ar[o+1]&&a&24?c=ar[o]=a:ar[o]=256;else if(c==64){let m=o+1;for(;m<n&&ar[m]==64;)m++;let p=o&&a==8||m<n&&ar[m]==8?l==1?1:8:256;for(let u=o;u<m;u++)ar[u]=p;o=m-1}else c==8&&l==1&&(ar[o]=1);a=c,c&7&&(l=c)}for(let o=0,a=0,l=0,c,m,p;o<n;o++)if(m=Ud[c=t.charCodeAt(o)])if(m<0){for(let u=a-3;u>=0;u-=3)if(mi[u+1]==-m){let d=mi[u+2],h=d&2?r:d&4?d&1?i:r:0;h&&(ar[o]=ar[mi[u]]=h),a=u;break}}else{if(mi.length==189)break;mi[a++]=o,mi[a++]=c,mi[a++]=l}else if((p=ar[o])==2||p==1){let u=p==r;l=u?0:1;for(let d=a-3;d>=0;d-=3){let h=mi[d+2];if(h&2)break;if(u)mi[d+2]|=2;else{if(h&4)break;mi[d+2]|=4}}}for(let o=0;o<n;o++)if(ar[o]==256){let a=o+1;for(;a<n&&ar[a]==256;)a++;let l=(o?ar[o-1]:r)==1,c=(a<n?ar[a]:r)==1,m=l==c?l?1:2:r;for(let p=o;p<a;p++)ar[p]=m;o=a-1}let s=[];if(r==1)for(let o=0;o<n;){let a=o,l=ar[o++]!=1;for(;o<n&&l==(ar[o]!=1);)o++;if(l)for(let c=o;c>a;){let m=c,p=ar[--c]!=2;for(;c>a&&p==(ar[c-1]!=2);)c--;s.push(new cs(c,m,p?2:1))}else s.push(new cs(a,o,0))}else for(let o=0;o<n;){let a=o,l=ar[o++]==2;for(;o<n&&l==(ar[o]==2);)o++;s.push(new cs(a,o,l?1:2))}return s}function Wy(t){return[new cs(0,t,0)]}let Vy="";function Fk(t,e,n,r,i){var s;let o=r.head-t.from,a=-1;if(o==0){if(!i||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(i)return null;let u=e[e.length-1];u.level!=n&&(o=u.side(!0,n),a=e.length-1)}a<0&&(a=cs.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let l=e[a];o==l.side(i,n)&&(l=e[a+=i?1:-1],o=l.side(!i,n));let c=i==(l.dir==n),m=dn(t.text,o,c);if(Vy=t.text.slice(Math.min(o,m),Math.max(o,m)),m!=l.side(i,n))return Ye.cursor(m+t.from,c?-1:1,l.level);let p=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!p&&l.level!=n?Ye.cursor(i?t.to:t.from,i?-1:1,n):p&&p.level<l.level?Ye.cursor(p.side(!i,n)+t.from,i?1:-1,p.level):Ye.cursor(m+t.from,i?-1:1,l.level)}const to="\uFFFF";class Cy{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Lt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=to}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let s=i.nextSibling;if(s==n)break;let o=Qt.get(i),a=Qt.get(s);(o&&a?o.breakAfter:(o?o.breakAfter:Xy(i))||Xy(s)&&(i.nodeName!="BR"||i.cmIgnore))&&this.lineBreak(),i=s}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=Qt.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function Xy(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Ly{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class xy extends Qt{constructor(e){super(),this.view=e,this.compositionDeco=pt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new mn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new hi(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:o,toA:a})=>a<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=pt.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=Nk(this.view,e.changes)),(ut.ie||ut.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,i=this.updateDeco(),s=Kk(r,i,e.changes);return n=hi.extendWithRanges(n,s),this.dirty==0&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=ut.chrome||ut.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof wo&&s.widget instanceof wy&&i.push(s.dom);r.updateGaps(i)}updateChildren(e,n){let r=this.childCursor(n);for(let i=e.length-1;;i--){let s=i>=0?e[i]:null;if(!s)break;let{fromA:o,toA:a,fromB:l,toB:c}=s,{content:m,breakAtStart:p,openStart:u,openEnd:d}=wd.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:h,off:f}=r.findPos(a,1),{i:g,off:y}=r.findPos(o,-1);$g(this,g,y,h,f,m,p,u,d)}}updateSelection(e=!1,n=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(n||this.mayControlSelection()))return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,s=this.domAtPos(i.anchor),o=i.empty?s:this.domAtPos(i.head);if(ut.gecko&&i.empty&&Yk(s)){let l=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(l,s.node.childNodes[s.offset]||null)),s=o=new qr(l,0),r=!0}let a=this.view.observer.selectionRange;(r||!a.focusNode||!jl(s.node,s.offset,a.anchorNode,a.anchorOffset)||!jl(o.node,o.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{ut.android&&ut.chrome&&this.dom.contains(a.focusNode)&&Jk(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=Kl(this.view.root);if(l)if(i.empty){if(ut.gecko){let c=Ek(s.node,s.offset);if(c&&c!=3){let m=Ay(s.node,s.offset,c==1?1:-1);m&&(s=new qr(m,c==1?0:m.nodeValue.length))}}l.collapse(s.node,s.offset),i.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=i.bidiLevel)}else if(l.extend){l.collapse(s.node,s.offset);try{l.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();i.anchor>i.head&&([s,o]=[o,s]),c.setEnd(o.node,o.offset),c.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(c)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new qr(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new qr(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,n=e.state.selection.main,r=Kl(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=mn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let m=this.domAtPos(n.head+n.assoc);r.collapse(m.node,m.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=n.from&&r.collapse(i,s)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Jl(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let n=e;n;){let r=Qt.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof mn)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],o=r-s.breakAfter-s.length;if(e>o||e==o&&s.type!=jt.WidgetBefore&&s.type!=jt.WidgetAfter&&(!i||n==2||this.children[i-1].breakAfter||this.children[i-1].type==jt.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);r=o}}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==sr.LTR;for(let c=0,m=0;m<this.children.length;m++){let p=this.children[m],u=c+p.length;if(u>i)break;if(c>=r){let d=p.dom.getBoundingClientRect();if(n.push(d.height),o){let h=p.dom.lastChild,f=h?sa(h):[];if(f.length){let g=f[f.length-1],y=l?g.right-d.left:d.right-g.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=u)}}}c=u+p.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?sr.RTL:sr.LTR}measureTextSize(){for(let i of this.children)if(i instanceof mn){let s=i.measureTextSize();if(s)return s}let e=document.createElement("div"),n,r;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=sa(e.firstChild)[0];n=e.getBoundingClientRect().height,r=i?i.width/27:7,e.remove()}),{lineHeight:n,charWidth:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new qg(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(r).top;e.push(pt.replace({widget:new wy(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return pt.set(e)}updateDeco(){let e=this.view.state.facet(ua).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=0,o=0,a=0,l=0;for(let m of this.view.state.facet(Ry).map(p=>p(this.view)))if(m){let{left:p,right:u,top:d,bottom:h}=m;p!=null&&(s=Math.max(s,p)),u!=null&&(o=Math.max(o,u)),d!=null&&(a=Math.max(a,d)),h!=null&&(l=Math.max(l,h))}let c={left:r.left-s,top:r.top-a,right:r.right+o,bottom:r.bottom+l};Gk(this.view.scrollDOM,c,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==sr.LTR)}}function Yk(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class wy extends eo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function ky(t){let e=t.observer.selectionRange,n=e.focusNode&&Ay(e.focusNode,e.focusOffset,0);if(!n)return null;let r=t.docView.nearest(n);if(!r)return null;if(r instanceof mn){let i=n;for(;i.parentNode!=r.dom;)i=i.parentNode;let s=i.previousSibling;for(;s&&!Qt.get(s);)s=s.previousSibling;let o=s?Qt.get(s).posAtEnd:r.posAtStart;return{from:o,to:o,node:i,text:n}}else{for(;;){let{parent:s}=r;if(!s)return null;if(s instanceof mn)break;r=s}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:n}}}function Nk(t,e){let n=ky(t);if(!n)return pt.none;let{from:r,to:i,node:s,text:o}=n,a=e.mapPos(r,1),l=Math.max(a,e.mapPos(i,-1)),{state:c}=t,m=s.nodeType==3?s.nodeValue:new Cy([],c).readRange(s.firstChild,null).text;if(l-a<m.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+m.length),to)==m)l=a+m.length;else if(c.doc.sliceString(Math.max(0,l-m.length),l,to)==m)a=l-m.length;else return pt.none;else if(c.doc.sliceString(a,l,to)!=m)return pt.none;let p=Qt.get(s);return p instanceof sy?p=p.widget.topView:p&&(p.parent=null),pt.set(pt.replace({widget:new Mk(s,o,p),inclusive:!0}).range(a,l))}class Mk extends eo{constructor(e,n,r){super(),this.top=e,this.text=n,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return sy}}function Ay(t,e,n){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0&&n<=0)t=t.childNodes[e-1],e=aa(t);else if(t.nodeType==1&&e<t.childNodes.length&&n>=0)t=t.childNodes[e],e=0;else return null}}function Ek(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class Hk{constructor(){this.changes=[]}compareRange(e,n){xd(e,n,this.changes)}comparePoint(e,n){xd(e,n,this.changes)}}function Kk(t,e,n){let r=new Hk;return Yt.compare(t,e,n,r),r.changes}function Jk(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function jk(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return Ye.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=dn(i.text,s,!1):a=dn(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=dn(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=dn(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return Ye.range(o+i.from,a+i.from)}function Pk(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Ok(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Fd(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Ty(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function By(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Yd(t,e,n){let r,i,s,o,a=!1,l,c,m,p;for(let h=t.firstChild;h;h=h.nextSibling){let f=sa(h);for(let g=0;g<f.length;g++){let y=f[g];i&&Fd(i,y)&&(y=Ty(By(y,i.bottom),i.top));let Z=Pk(e,y),I=Ok(n,y);if(Z==0&&I==0)return h.nodeType==3?Uy(h,e,n):Yd(h,e,n);(!r||o>I||o==I&&s>Z)&&(r=h,i=y,s=Z,o=I,a=!Z||(Z>0?g<f.length-1:g>0)),Z==0?n>y.bottom&&(!m||m.bottom<y.bottom)?(l=h,m=y):n<y.top&&(!p||p.top>y.top)&&(c=h,p=y):m&&Fd(m,y)?m=By(m,y.bottom):p&&Fd(p,y)&&(p=Ty(p,y.top))}}if(m&&m.bottom>=n?(r=l,i=m):p&&p.top<=n&&(r=c,i=p),!r)return{node:t,offset:0};let u=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Uy(r,u,n);if(a&&r.contentEditable!="false")return Yd(r,u,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function Uy(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=ss(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let m=l[c];if(m.top==m.bottom)continue;o||(o=e-m.left);let p=(m.top>n?m.top-n:n-m.bottom)-1;if(m.left-1<=e&&m.right+1>=e&&p<s){let u=e>=(m.left+m.right)/2,d=u;if((ut.chrome||ut.gecko)&&ss(t,a).getBoundingClientRect().left==m.right&&(d=!u),p<=0)return{node:t,offset:a+(d?1:0)};i=a+(d?1:0),s=p}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function Fy(t,{x:e,y:n},r,i=-1){var s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,m=n-a;if(m<0)return 0;if(m>c)return t.state.doc.length;for(let y=t.defaultLineHeight/2,Z=!1;l=t.elementAtHeight(m),l.type!=jt.Text;)for(;m=i>0?l.bottom+y:l.top-y,!(m>=0&&m<=c);){if(Z)return r?null:0;Z=!0,i=-i}n=a+m;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:r?null:Yy(t,o,l,e,n);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:r?null:Yy(t,o,l,e,n);let u=t.dom.ownerDocument,d=t.root.elementFromPoint?t.root:u,h=d.elementFromPoint(e,n);h&&!t.contentDOM.contains(h)&&(h=null),h||(e=Math.max(o.left+1,Math.min(o.right-1,e)),h=d.elementFromPoint(e,n),h&&!t.contentDOM.contains(h)&&(h=null));let f,g=-1;if(h&&((s=t.docView.nearest(h))===null||s===void 0?void 0:s.isEditable)!=!1){if(u.caretPositionFromPoint){let y=u.caretPositionFromPoint(e,n);y&&({offsetNode:f,offset:g}=y)}else if(u.caretRangeFromPoint){let y=u.caretRangeFromPoint(e,n);y&&({startContainer:f,startOffset:g}=y,(!t.contentDOM.contains(f)||ut.safari&&zk(f,g,e)||ut.chrome&&_k(f,g,e))&&(f=void 0))}}if(!f||!t.docView.dom.contains(f)){let y=mn.find(t.docView,p);if(!y)return m>l.top+l.height/2?l.to:l.from;({node:f,offset:g}=Yd(y.dom,e,n))}return t.docView.posFromDOM(f,g)}function Yy(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);t.lineWrapping&&n.height>t.defaultLineHeight*1.5&&(s+=Math.floor((i-n.top)/t.defaultLineHeight)*t.viewState.heightOracle.lineLength);let o=t.state.sliceDoc(n.from,n.to);return n.from+fd(o,s,t.state.tabSize)}function zk(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ss(t,r-1,r).getBoundingClientRect().left>n}function _k(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():ss(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function Dk(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=!r||!t.lineWrapping?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let l=t.dom.getBoundingClientRect(),c=t.textDirectionAt(i.from),m=t.posAtCoords({x:n==(c==sr.LTR)?l.right-1:l.left+1,y:(s.top+s.bottom)/2});if(m!=null)return Ye.cursor(m,n?-1:1)}let o=mn.find(t.docView,e.head),a=o?n?o.posAtEnd:o.posAtStart:n?i.to:i.from;return Ye.cursor(a,n?-1:1)}function Ny(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=Fk(i,s,o,a,n),m=Vy;if(!c){if(i.number==(n?t.state.doc.lines:1))return a;m=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=Ye.cursor(n?i.from:i.to)}if(l){if(!l(m))return a}else{if(!r)return c;l=r(m)}a=c}}function Qk(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==nr.Space&&(i=o),i==o}}function qk(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return Ye.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i),m=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let d=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-d.from))),a=(s<0?d.top:d.bottom)+m}let p=l.left+o,u=r!=null?r:t.defaultLineHeight>>1;for(let d=0;;d+=10){let h=a+(u+d)*s,f=Fy(t,{x:p,y:h},!1,s);if(h<l.top||h>l.bottom||(s<0?f<i:f>i))return Ye.cursor(f,e.assoc,void 0,o)}}function Nd(t,e,n){let r=t.state.facet(Gy).map(i=>i(t));for(;;){let i=!1;for(let s of r)s.between(n.from-1,n.from+1,(o,a,l)=>{n.from>o&&n.from<a&&(n=e.head>n.from?Ye.cursor(o,1):Ye.cursor(a,-1),i=!0)});if(!i)return n}}class $k{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let n in Ar){let r=Ar[n];e.contentDOM.addEventListener(n,i=>{!Hy(e,i)||this.ignoreDuringComposition(i)||n=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(n,e,i)?i.preventDefault():r(e,i))},Md[n]),this.registeredEvents.push(n)}ut.chrome&&ut.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ut.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var r;let i;this.customHandlers=[];for(let s of n)if(i=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let o in i)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{!Hy(e,a)||this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,n)||r.defaultPrevented)return!0}catch(o){Wn(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,n,e)}catch(s){Wn(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(ut.android&&ut.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return ut.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=My.find(i=>i.keyCode==n.keyCode))&&!n.ctrlKey||eA.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,as(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ut.safari&&!ut.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const My=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],eA="dthko",Ey=[16,17,18,20,91,92,224,225];class tA{constructor(e,n,r,i){this.view=e,this.style=r,this.mustSelect=i,this.lastEvent=n;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Lt.allowMultipleSelections)&&rA(e,n),this.dragMove=nA(e,n),this.dragging=iA(e,n)&&qy(n)==1?null:!1,this.dragging===!1&&(n.preventDefault(),this.select(n))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let n=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!n.eq(this.view.state.selection)||n.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:n,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function rA(t,e){let n=t.state.facet(my);return n.length?n[0](e):ut.mac?e.metaKey:e.ctrlKey}function nA(t,e){let n=t.state.facet(py);return n.length?n[0](e):ut.mac?!e.altKey:!e.ctrlKey}function iA(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Kl(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Hy(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Qt.get(n))&&r.ignoreEvent(e))return!1;return!0}const Ar=Object.create(null),Md=Object.create(null),Ky=ut.ie&&ut.ie_version<15||ut.ios&&ut.webkit_version<604;function oA(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Jy(t,n.value)},50)}function Jy(t,e){let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Ed!=null&&n.selection.ranges.every(l=>l.empty)&&Ed==s.toString()){let l=-1;r=n.changeByRange(c=>{let m=n.doc.lineAt(c.from);if(m.from==l)return{range:c};l=m.from;let p=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:m.from,insert:p},range:Ye.cursor(c.from+p.length)}})}else o?r=n.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:Ye.cursor(l.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Ar.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27?t.inputState.lastEscPress=Date.now():Ey.indexOf(e.keyCode)<0&&(t.inputState.lastEscPress=0)},Ar.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},Ar.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},Md.touchstart=Md.touchmove={passive:!0},Ar.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of t.state.facet(fy))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=lA(t,e)),n){let r=t.root.activeElement!=t.contentDOM;r&&t.observer.ignore(()=>zg(t.contentDOM)),t.inputState.startMouseSelection(new tA(t,e,n,r))}};function jy(t,e,n,r){if(r==1)return Ye.cursor(e,n);if(r==2)return jk(t.state,e,n);{let i=mn.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,Ye.range(o,a)}}let Py=(t,e)=>t>=e.top&&t<=e.bottom,Oy=(t,e,n)=>Py(e,n)&&t>=n.left&&t<=n.right;function sA(t,e,n,r){let i=mn.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&Oy(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&Oy(n,r,a)?1:o&&Py(r,o)?-1:1}function zy(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:sA(t,n,e.clientX,e.clientY)}}const aA=ut.ie&&ut.ie_version<=11;let _y=null,Dy=0,Qy=0;function qy(t){if(!aA)return t.detail;let e=_y,n=Qy;return _y=t,Qy=Date.now(),Dy=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Dy+1)%3:1}function lA(t,e){let n=zy(t,e),r=qy(e),i=t.state.selection,s=n,o=e;return{update(a){a.docChanged&&(n.pos=a.changes.mapPos(n.pos),i=i.map(a.changes),o=null)},get(a,l,c){let m;o&&a.clientX==o.clientX&&a.clientY==o.clientY?m=s:(m=s=zy(t,a),o=a);let p=jy(t,m.pos,m.bias,r);if(n.pos!=m.pos&&!l){let u=jy(t,n.pos,n.bias,r),d=Math.min(u.from,p.from),h=Math.max(u.to,p.to);p=d<p.from?Ye.range(d,h):Ye.range(h,d)}return l?i.replaceRange(i.main.extend(p.from,p.to)):c&&i.ranges.length>1&&i.ranges.some(u=>u.eq(p))?cA(i,p):c?i.addRange(p):Ye.create([p])}}}function cA(t,e){for(let n=0;;n++)if(t.ranges[n].eq(e))return Ye.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}Ar.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function $y(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=r&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}Ar.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,s=()=>{++i==n.length&&$y(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}}else $y(t,e,e.dataTransfer.getData("Text"),!0)},Ar.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=Ky?null:e.clipboardData;n?(Jy(t,n.getData("text/plain")),e.preventDefault()):oA(t)};function uA(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function dA(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let Ed=null;Ar.copy=Ar.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=dA(t.state);if(!n&&!i)return;Ed=i?n:null;let s=Ky?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):uA(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};function e0(t){setTimeout(()=>{t.hasFocus!=t.inputState.notifiedFocused&&t.update([])},10)}Ar.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),e0(t)},Ar.blur=t=>{t.observer.clearSelectionRange(),e0(t)},Ar.compositionstart=Ar.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)},Ar.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionFirstChange=null,ut.chrome&&ut.android&&t.observer.flushSoon(),setTimeout(()=>{t.inputState.composing<0&&t.docView.compositionDeco.size&&t.update([])},50)},Ar.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},Ar.beforeinput=(t,e)=>{var n;let r;if(ut.chrome&&ut.android&&(r=My.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const t0=["pre-wrap","normal","pre-line","break-spaces"];class hA{constructor(e){this.lineWrapping=e,this.doc=At.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return t0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s){let o=t0.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=n,this.charWidth=r,this.lineLength=i,a){this.heightSamples={};for(let l=0;l<s.length;l++){let c=s[l];c<0?l++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class mA{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class ro{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new ro(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var qt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(qt||(qt={}));const $l=.001;class pn{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>$l&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return pn.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this;for(let o=i.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:c,toB:m}=i[o],p=s.lineAt(a,qt.ByPosNoHeight,n,0,0),u=p.to>=l?p:s.lineAt(l,qt.ByPosNoHeight,n,0,0);for(m+=u.to-l,l=u.to;o>0&&p.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<p.from&&(p=s.lineAt(a,qt.ByPosNoHeight,n,0,0));c+=p.from-a,a=p.from;let d=Hd.build(r,e,c,m);s=s.replace(a,l,d)}return s.updateHeight(r,0)}static empty(){return new Vn(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new pA(pn.of(e.slice(0,n)),o,pn.of(e.slice(r)))}}pn.prototype.size=1;class r0 extends pn{constructor(e,n,r){super(e,n),this.type=r}blockAt(e,n,r,i){return new ro(i,this.length,r,this.height,this.type)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Vn extends r0{constructor(e,n){super(e,n,jt.Text),this.collapsed=0,this.widgetHeight=0}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Vn||i instanceof Jr&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Jr?i=new Vn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):pn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Jr extends pn{constructor(e){super(e,0)}lines(e,n){let r=e.lineAt(n).number,i=e.lineAt(n+this.length).number;return{firstLine:r,lastLine:i,lineHeight:this.height/(i-r+1)}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,lineHeight:a}=this.lines(n,i),l=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:m}=n.line(s+l);return new ro(c,m,r+a*l,a,jt.Text)}lineAt(e,n,r,i,s){if(n==qt.ByHeight)return this.blockAt(e,r,i,s);if(n==qt.ByPosNoHeight){let{from:p,to:u}=r.lineAt(e);return new ro(p,u-p,0,0,jt.Text)}let{firstLine:o,lineHeight:a}=this.lines(r,s),{from:l,length:c,number:m}=r.lineAt(e);return new ro(l,c,i+a*(m-o),a,jt.Text)}forEachLine(e,n,r,i,s,o){let{firstLine:a,lineHeight:l}=this.lines(r,s);for(let c=Math.max(e,s),m=Math.min(s+this.length,n);c<=m;){let p=r.lineAt(c);c==e&&(i+=l*(p.number-a)),o(new ro(p.from,p.length,i,l,jt.Text)),i+=l,c=p.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Jr?r[r.length-1]=new Jr(s.length+i):r.push(null,new Jr(i-1))}if(e>0){let s=r[0];s instanceof Jr?r[0]=new Jr(e+s.length):r.unshift(new Jr(e-1),null)}return pn.of(r)}decomposeLeft(e,n){n.push(new Jr(e-1),null)}decomposeRight(e,n){n.push(null,new Jr(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1,c=e.heightChanged;for(i.from>n&&o.push(new Jr(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let p=e.doc.lineAt(a).length;o.length&&o.push(null);let u=i.heights[i.index++];l==-1?l=u:Math.abs(u-l)>=$l&&(l=-2);let d=new Vn(p,u);d.outdated=!1,o.push(d),a+=p+1}a<=s&&o.push(null,new Jr(s-a).updateHeight(e,a));let m=pn.of(o);return e.heightChanged=c||l<0||Math.abs(m.height-this.height)>=$l||Math.abs(l-this.lines(e.doc,n).lineHeight)>=$l,m}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class pA extends pn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==qt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let m=n==qt.ByPosNoHeight?qt.ByPosNoHeight:qt.ByPos;return l?c.join(this.right.lineAt(a,m,r,o,a)):this.left.lineAt(a,m,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,qt.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&n0(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),n0(s,a)}return pn.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?pn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function n0(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Jr&&(r=t[e+1])instanceof Jr&&t.splice(e-1,3,new Jr(n.length+1+r.length))}const fA=5;class Hd{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Vn?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Vn(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let s=n-e;r.block?this.addBlock(new r0(s,i,r.type)):(s||i>=fA)&&this.addLineDeco(i,s)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Jr(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Vn)return e;let n=new Vn(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine(),e.type==jt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=jt.WidgetBefore&&(this.covering=e)}addLineDeco(e,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+n}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Vn)&&!this.isCovered?this.nodes.push(new Vn(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Vn&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Hd(r,e);return Yt.spans(n,r,i,s,0),s.finish(r)}}function gA(t,e,n){let r=new yA;return Yt.compare(t,e,n,r,0),r.changes}class yA{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&xd(e,n,this.changes,5)}}function bA(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let m=c,p=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&p.overflow!="visible"){let u=m.getBoundingClientRect();s=Math.max(s,u.left),o=Math.min(o,u.right),a=Math.max(a,u.top),l=c==t.parentNode?u.bottom:Math.min(l,u.bottom)}c=p.position=="absolute"||p.position=="fixed"?m.offsetParent:m.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function ZA(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Kd{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return pt.replace({widget:new IA(this.size,e)}).range(this.from,this.to)}}class IA extends eo{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class i0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=o0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=sr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Td).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new hA(n),this.stateDeco=e.facet(ua).filter(r=>typeof r!="function"),this.heightMap=pn.empty().applyChanges(this.stateDeco,At.empty,this.heightOracle.setDoc(e.doc),[new hi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=pt.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new ec(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?o0:new RA(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:ha(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(ua).filter(c=>typeof c!="function");let i=e.changedRanges,s=hi.extendWithRanges(i,gA(r,this.stateDeco,e?e.changes:Xr.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let l=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Zy)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?sr.RTL:sr.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=o||this.mustMeasureContent||this.contentDOMHeight!=n.clientHeight;this.contentDOMHeight=n.clientHeight,this.mustMeasureContent=!1;let l=0,c=0,m=parseInt(r.paddingTop)||0,p=parseInt(r.paddingBottom)||0;(this.paddingTop!=m||this.paddingBottom!=p)&&(this.paddingTop=m,this.paddingBottom=p,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let u=(this.printing?ZA:bA)(n,this.paddingTop),d=u.top-this.pixelViewport.top,h=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let g=n.clientWidth;if((this.contentDOMWidth!=g||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=g,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let Z=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(Z)&&(o=!0),o||i.lineWrapping&&Math.abs(g-this.contentDOMWidth)>i.charWidth){let{lineHeight:I,charWidth:G}=e.docView.measureTextSize();o=I>0&&i.refresh(s,I,G,g/G,Z),o&&(e.docView.minWidth=0,l|=8)}d>0&&h>0?c=Math.max(d,h):d<0&&h<0&&(c=Math.min(d,h)),i.heightChanged=!1;for(let I of this.viewports){let G=I.from==this.viewport.from?Z:e.docView.measureVisibleLineHeights(I);this.heightMap=(o?pn.empty().applyChanges(this.stateDeco,At.empty,this.heightOracle,[new hi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new mA(I.from,G))}i.heightChanged&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(l&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:a}=this,l=new ec(i.lineAt(o-r*1e3,qt.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,qt.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=i.lineAt(c,qt.ByPos,s,0,0),u;n.y=="center"?u=(p.top+p.bottom)/2-m/2:n.y=="start"||n.y=="nearest"&&c<l.from?u=p.top:u=p.bottom-m,l=new ec(i.lineAt(u-1e3/2,qt.ByHeight,s,0,0).from,i.lineAt(u+m+1e3/2,qt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new ec(this.heightMap.lineAt(r,qt.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,qt.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,qt.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(n,qt.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Kd(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=sr.LTR&&!r)return[];let a=[],l=(c,m,p,u)=>{if(m-c<s)return;let d=this.state.selection.main,h=[d.from];d.empty||h.push(d.to);for(let g of h)if(g>c&&g<m){l(c,g-10,p,u),l(g+10,m,p,u);return}let f=GA(e,g=>g.from>=p.from&&g.to<=p.to&&Math.abs(g.from-c)<s&&Math.abs(g.to-m)<s&&!h.some(y=>g.from<y&&g.to>y));if(!f){if(m<p.to&&n&&r&&n.visibleRanges.some(g=>g.from<=m&&g.to>=m)){let g=n.moveToLineBoundary(Ye.cursor(m),!1,!0).head;g>c&&(m=g)}f=new Kd(c,m,this.gapSize(p,c,m,u))}a.push(f)};for(let c of this.viewportLines){if(c.length<o)continue;let m=vA(c.from,c.to,this.stateDeco);if(m.total<o)continue;let p=this.scrollTarget?this.scrollTarget.range.head:null,u,d;if(r){let h=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,f,g;if(p!=null){let y=rc(m,p),Z=((this.visibleBottom-this.visibleTop)/2+h)/c.height;f=y-Z,g=y+Z}else f=(this.visibleTop-c.top-h)/c.height,g=(this.visibleBottom-c.top+h)/c.height;u=tc(m,f),d=tc(m,g)}else{let h=m.total*this.heightOracle.charWidth,f=i*this.heightOracle.charWidth,g,y;if(p!=null){let Z=rc(m,p),I=((this.pixelViewport.right-this.pixelViewport.left)/2+f)/h;g=Z-I,y=Z+I}else g=(this.pixelViewport.left-f)/h,y=(this.pixelViewport.right+f)/h;u=tc(m,g),d=tc(m,y)}u>c.from&&l(c.from,u,c,m),d<c.to&&l(d,c.to,c,m)}return a}gapSize(e,n,r,i){let s=rc(i,r)-rc(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Kd.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=pt.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Yt.spans(e,this.viewport.from,this.viewport.to,{span(i,s){n.push({from:i,to:s})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=n[s].from||i.to!=n[s].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ha(this.heightMap.lineAt(e,qt.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return ha(this.heightMap.lineAt(this.scaler.fromDOM(e),qt.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return ha(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ec{constructor(e,n){this.from=e,this.to=n}}function vA(t,e,n){let r=[],i=t,s=0;return Yt.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function tc({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function rc(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function GA(t,e){for(let n of t)if(e(n))return n}const o0={toDOM(t){return t},fromDOM(t){return t},scale:1};class RA{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,qt.ByPos,e,0,0).top,m=n.lineAt(l,qt.ByPos,e,0,0).bottom;return i+=m-c,{from:a,to:l,top:c,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function ha(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new ro(t.from,t.length,n,r-n,Array.isArray(t.type)?t.type.map(i=>ha(i,e)):t.type)}const nc=ct.define({combine:t=>t.join(" ")}),Jd=ct.define({combine:t=>t.indexOf(!0)>-1}),jd=Di.newName(),s0=Di.newName(),a0=Di.newName(),l0={"&light":"."+s0,"&dark":"."+a0};function Pd(t,e,n){return new Di(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const SA=Pd("."+jd,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},l0);class WA{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:CA(e),l=new Cy(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=XA(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!is(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!is(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=Ye.single(c,l)}}}function c0(t,e){let n,{newSel:r}=e,i=t.state.selection.main;if(e.bounds){let{from:s,to:o}=e.bounds,a=i.from,l=null;(t.inputState.lastKeyCode===8&&t.inputState.lastKeyTime>Date.now()-100||ut.android&&e.text.length<o-s)&&(a=i.to,l="end");let c=VA(t.state.doc.sliceString(s,o,to),e.text,a-s,l);c&&(ut.chrome&&t.inputState.lastKeyCode==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==to+to&&c.toB--,n={from:s+c.from,to:s+c.toA,insert:At.of(e.text.slice(c.from,c.toB).split(to))})}else r&&(!t.hasFocus||!t.state.facet(Ql)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(ut.mac||ut.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())?(r&&n.insert.length==2&&(r=Ye.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:At.of([" "])}):ut.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Ye.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:At.of([" "])}),n){let s=t.state;if(ut.ios&&t.inputState.flushIOSKey(t)||ut.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&as(t.contentDOM,"Enter",13)||n.from==i.from-1&&n.to==i.to&&n.insert.length==0&&as(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&as(t.contentDOM,"Delete",46)))return!0;let o=n.insert.toString();if(t.state.facet(yy).some(c=>c(t,n.from,n.to,o)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let a;if(n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=i.from<n.from?s.sliceDoc(i.from,n.from):"",m=i.to>n.to?s.sliceDoc(n.to,i.to):"";a=s.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+m))}else{let c=s.changes(n),m=r&&!s.selection.main.eq(r.main)&&r.main.to<=c.newLength?r.main:void 0;if(s.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let p=t.state.sliceDoc(n.from,n.to),u=ky(t)||t.state.doc.lineAt(i.head),d=i.to-n.to,h=i.to-i.from;a=s.changeByRange(f=>{if(f.from==i.from&&f.to==i.to)return{changes:c,range:m||f.map(c)};let g=f.to-d,y=g-p.length;if(f.to-f.from!=h||t.state.sliceDoc(y,g)!=p||u&&f.to>=u.from&&f.from<=u.to)return{range:f};let Z=s.changes({from:y,to:g,insert:n.insert}),I=f.to-i.to;return{changes:Z,range:m?Ye.range(Math.max(0,m.anchor+I),Math.max(0,m.head+I)):f.map(Z)}})}else a={changes:c,selection:m&&s.selection.replaceRange(m)}}let l="input.type";return t.composing&&(l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(a,{scrollIntoView:!0,userEvent:l}),!0}else if(r&&!r.main.eq(i)){let s=!1,o="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(s=!0),o=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:s,userEvent:o}),!0}else return!1}function VA(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}return o<s&&t.length<e.length?(s-=n<=s&&n>=o?s-n:0,a=s+(a-o),o=s):a<s&&(s-=n<=s&&n>=a?s-n:0,o=s+(o-a),a=s),{from:s,toA:o,toB:a}}function CA(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new Ly(n,r)),(i!=n||s!=r)&&e.push(new Ly(i,s))),e}function XA(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Ye.single(n+e,r+e):null}const LA={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Od=ut.ie&&ut.ie_version<=11;class xA{constructor(e){this.view=e,this.active=!1,this.selectionRange=new Rk,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(ut.ie&&ut.ie_version<=11||ut.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Od&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Ql)?r.root.activeElement!=this.dom:!Jl(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(ut.ie&&ut.ie_version<=11||ut.android&&ut.chrome)&&!r.state.selection.main.empty&&i.focusNode&&jl(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ut.safari&&e.root.nodeType==11&&Ik(this.dom.ownerDocument)==this.dom&&wA(this.view)||Kl(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=Jl(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Wk(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,LA),Od&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Od&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),!this.flush()&&s.force&&as(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Jl(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new WA(this.view,e,n,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let r=this.view.state,i=c0(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.dirty|=4),e.type=="childList"){let r=u0(n,e.previousSibling||e.target.previousSibling,-1),i=u0(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resize)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function u0(t,e,n){for(;e;){let r=Qt.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function wA(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return jl(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class ot{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||Sk(e.parent)||document,this.viewState=new i0(e.state||Lt.create(e)),this.plugins=this.state.facet(ca).map(n=>new Ad(n));for(let n of this.plugins)n.update(this);this.observer=new xA(this),this.inputState=new $k(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new xy(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Zr?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let c of e){if(c.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=c.state}if(this.destroyed){this.viewState.state=s;return}let o=this.observer.delayedAndroidKey,a=null;if(o?(this.observer.clearDelayedAndroidKey(),a=this.observer.readChange(),(a&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(a=null)):this.observer.clear(),s.facet(Lt.phrases)!=this.state.facet(Lt.phrases))return this.setState(s);i=ql.create(this,s,e);let l=this.viewState.scrollTarget;try{this.updateState=2;for(let c of e){if(l&&(l=l.map(c.changes)),c.scrollIntoView){let{main:m}=c.state.selection;l=new Dl(m.empty?m:Ye.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of c.effects)m.is(Iy)&&(l=m.value)}this.viewState.update(i,l),this.bidiCache=ic.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(da)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(c=>c.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(nc)!=i.state.facet(nc)&&(this.viewState.mustMeasureContent=!0),(n||r||l||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let c of this.state.facet(kd))c(i);a&&!c0(this,a)&&o.force&&as(this.contentDOM,o.key,o.keyCode)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new i0(e),this.plugins=e.facet(ca).map(r=>new Ad(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new xy(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(ca),r=e.state.facet(ca);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new Ad(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,{scrollHeight:r,scrollTop:i,clientHeight:s}=this.scrollDOM,o=i>r-s-4?r:i;try{for(let a=0;;a++){this.updateState=1;let l=this.viewport,c=this.viewState.lineBlockAtHeight(o),m=this.viewState.measure(this);if(!m&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];m&4||([this.measureRequests,p]=[p,this.measureRequests]);let u=p.map(g=>{try{return g.read(this)}catch(y){return Wn(this.state,y),d0}}),d=ql.create(this,this.state,[]),h=!1,f=!1;d.flags|=m,n?n.flags|=m:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d));for(let g=0;g<p.length;g++)if(u[g]!=d0)try{let y=p[g];y.write&&y.write(u[g],this)}catch(y){Wn(this.state,y)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,f=!0;else{let g=this.viewState.lineBlockAt(c.from).top-c.top;(g>1||g<-1)&&(this.scrollDOM.scrollTop+=g,f=!0)}if(h&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!f&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(kd))a(n)}get themeClasses(){return jd+" "+(this.state.facet(Jd)?a0:s0)+" "+this.state.facet(nc)}updateAttrs(){let e=h0(this,vy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ql)?"true":"false",class:"cm-content",style:`${ut.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),h0(this,Td,n);let r=this.observer.ignore(()=>{let i=Ld(this.contentDOM,this.contentAttrs,n),s=Ld(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(ot.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(da),Di.mount(this.root,this.styleModules.concat(SA).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Nd(this,e,Ny(this,e,n,r))}moveByGroup(e,n){return Nd(this,e,Ny(this,e,n,r=>Qk(this,e.head,r)))}moveToLineBoundary(e,n,r=!0){return Dk(this,e,n,r)}moveVertically(e,n,r){return Nd(this,e,qk(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Fy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[cs.find(s,e-i.from,-1,n)];return Zd(r,o.dir==sr.LTR==n>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(by)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>kA)return Wy(e.length);let n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n)return i.order;let r=Uk(e.text,n);return this.bidiCache.push(new ic(e.from,e.to,n,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ut.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{zg(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Iy.of(new Dl(typeof e=="number"?Ye.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Ir.define(()=>({}),{eventHandlers:e})}static theme(e,n){let r=Di.newName(),i=[nc.of(r),da.of(Pd(`.${r}`,e))];return n&&n.dark&&i.push(Jd.of(!0)),i}static baseTheme(e){return Co.lowest(da.of(Pd("."+jd,e,l0)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Qt.get(r)||Qt.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}ot.styleModule=da,ot.inputHandler=yy,ot.perLineTextDirection=by,ot.exceptionSink=gy,ot.updateListener=kd,ot.editable=Ql,ot.mouseSelectionStyle=fy,ot.dragMovesSelection=py,ot.clickAddsSelectionRange=my,ot.decorations=ua,ot.atomicRanges=Gy,ot.scrollMargins=Ry,ot.darkTheme=Jd,ot.contentAttributes=Td,ot.editorAttributes=vy,ot.lineWrapping=ot.contentAttributes.of({class:"cm-lineWrapping"}),ot.announce=Zt.define();const kA=4096,d0={};class ic{constructor(e,n,r,i){this.from=e,this.to=n,this.dir=r,this.order=i}static update(e,n){if(n.empty)return e;let r=[],i=e.length?e[e.length-1].dir:sr.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new ic(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return r}}function h0(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&Cd(o,n)}return n}const AA=ut.mac?"mac":ut.windows?"win":ut.linux?"linux":"key";function TA(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function oc(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const BA=Co.default(ot.domEventHandlers({keydown(t,e){return f0(p0(e.state),t,e,"editor")}})),ma=ct.define({enables:BA}),m0=new WeakMap;function p0(t){let e=t.facet(ma),n=m0.get(e);return n||m0.set(e,n=YA(e.reduce((r,i)=>r.concat(i),[]))),n}function UA(t,e,n){return f0(p0(t.state),e,t,n)}let no=null;const FA=4e3;function YA(t,e=AA){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c)=>{var m,p;let u=n[o]||(n[o]=Object.create(null)),d=a.split(/ (?!$)/).map(g=>TA(g,e));for(let g=1;g<d.length;g++){let y=d.slice(0,g).join(" ");i(y,!0),u[y]||(u[y]={preventDefault:!0,run:[Z=>{let I=no={view:Z,prefix:y,scope:o};return setTimeout(()=>{no==I&&(no=null)},FA),!0}]})}let h=d.join(" ");i(h,!1);let f=u[h]||(u[h]={preventDefault:!1,run:((p=(m=u._any)===null||m===void 0?void 0:m.run)===null||p===void 0?void 0:p.slice())||[]});l&&f.run.push(l),c&&(f.preventDefault=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let m=n[c]||(n[c]=Object.create(null));m._any||(m._any={preventDefault:!1,run:[]});for(let p in m)m[p].run.push(o.any)}let l=o[e]||o.key;if(!!l)for(let c of a)s(c,l,o.run,o.preventDefault),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault)}return n}function f0(t,e,n,r){let i=Zk(e),s=Hr(i,0),o=Rn(s)==i.length&&i!=" ",a="",l=!1;no&&no.view==n&&no.scope==r&&(a=no.prefix+" ",(l=Ey.indexOf(e.keyCode)<0)&&(no=null));let c=new Set,m=h=>{if(h){for(let f of h.run)if(!c.has(f)&&(c.add(f),f(n,e)))return!0;h.preventDefault&&(l=!0)}return!1},p=t[r],u,d;if(p){if(m(p[a+oc(i,e,!o)]))return!0;if(o&&(e.altKey||e.metaKey||e.ctrlKey)&&(u=Qi[e.keyCode])&&u!=i){if(m(p[a+oc(u,e,!0)]))return!0;if(e.shiftKey&&(d=oa[e.keyCode])!=i&&d!=u&&m(p[a+oc(d,e,!1)]))return!0}else if(o&&e.shiftKey&&m(p[a+oc(i,e,!0)]))return!0;if(m(p._any))return!0}return l}class g0{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}function NA(t,e){return t.constructor==e.constructor&&t.eq(e)}class MA{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(sc)!=e.state.facet(sc)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(sc);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!NA(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.dom.remove()}}const sc=ct.define();function y0(t){return[Ir.define(e=>new MA(e,t)),sc.of(t)]}const b0=!ut.ios,pa=ct.define({combine(t){return ui(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function EA(t={}){return[pa.of(t),HA,KA,JA,Zy.of(!0)]}function Z0(t){return t.startState.facet(pa)!=t.startState.facet(pa)}const HA=y0({above:!0,markers(t){let{state:e}=t,n=e.facet(pa),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||b0:n.drawRangeCursor){let o=PA(t,i,s);o&&r.push(o)}}return r},update(t,e){t.transactions.some(r=>r.scrollIntoView)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Z0(t);return n&&I0(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){I0(e.state,t)},class:"cm-cursorLayer"});function I0(t,e){e.style.animationDuration=t.facet(pa).cursorBlinkRate+"ms"}const KA=y0({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:jA(t,e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Z0(t)},class:"cm-selectionLayer"}),v0={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};b0&&(v0[".cm-line"].caretColor="transparent !important");const JA=Co.highest(ot.theme(v0));function G0(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==sr.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function R0(t,e,n){let r=Ye.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:jt.Text}}function S0(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==jt.Text))return r}return n}function jA(t,e){if(e.to<=t.viewport.from||e.from>=t.viewport.to)return[];let n=Math.max(e.from,t.viewport.from),r=Math.min(e.to,t.viewport.to),i=t.textDirection==sr.LTR,s=t.contentDOM,o=s.getBoundingClientRect(),a=G0(t),l=window.getComputedStyle(s.firstChild),c=o.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),m=o.right-parseInt(l.paddingRight),p=S0(t,n),u=S0(t,r),d=p.type==jt.Text?p:null,h=u.type==jt.Text?u:null;if(t.lineWrapping&&(d&&(d=R0(t,n,d)),h&&(h=R0(t,r,h))),d&&h&&d.from==h.from)return g(y(e.from,e.to,d));{let I=d?y(e.from,null,d):Z(p,!1),G=h?y(null,e.to,h):Z(u,!0),R=[];return(d||p).to<(h||u).from-1?R.push(f(c,I.bottom,m,G.top)):I.bottom<G.top&&t.elementAtHeight((I.bottom+G.top)/2).type==jt.Text&&(I.bottom=G.top=(I.bottom+G.top)/2),g(I).concat(R).concat(g(G))}function f(I,G,R,C){return new g0("cm-selectionBackground",I-a.left,G-a.top-.01,R-I,C-G+.01)}function g({top:I,bottom:G,horizontal:R}){let C=[];for(let V=0;V<R.length;V+=2)C.push(f(R[V],I,R[V+1],G));return C}function y(I,G,R){let C=1e9,V=-1e9,x=[];function w(Y,U,M,j,K){let P=t.coordsAtPos(Y,Y==R.to?-2:2),J=t.coordsAtPos(M,M==R.from?2:-2);C=Math.min(P.top,J.top,C),V=Math.max(P.bottom,J.bottom,V),K==sr.LTR?x.push(i&&U?c:P.left,i&&j?m:J.right):x.push(!i&&j?c:J.left,!i&&U?m:P.right)}let k=I!=null?I:R.from,A=G!=null?G:R.to;for(let Y of t.visibleRanges)if(Y.to>k&&Y.from<A)for(let U=Math.max(Y.from,k),M=Math.min(Y.to,A);;){let j=t.state.doc.lineAt(U);for(let K of t.bidiSpans(j)){let P=K.from+j.from,J=K.to+j.from;if(P>=M)break;J>U&&w(Math.max(P,U),I==null&&P<=k,Math.min(J,M),G==null&&J>=A,K.dir)}if(U=j.to+1,U>=M)break}return x.length==0&&w(k,I==null,A,G==null,t.textDirection),{top:C,bottom:V,horizontal:x}}function Z(I,G){let R=o.top+(G?I.top:I.bottom);return{top:R,bottom:R,horizontal:[]}}}function PA(t,e,n){let r=t.coordsAtPos(e.head,e.assoc||1);if(!r)return null;let i=G0(t);return new g0(n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",r.left-i.left,r.top-i.top,-1,r.bottom-r.top)}const W0=Zt.define({map(t,e){return t==null?null:e.mapPos(t)}}),fa=br.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(W0)?r.value:n,t)}}),OA=Ir.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(fa);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(fa)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(fa),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(fa)!=t&&this.view.dispatch({effects:W0.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function zA(){return[fa,OA]}function V0(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function _A(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class DA{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,c,m)=>i(m,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,m)=>{let p=r(a,l,c);p&&m(c,c+a[0].length,p)};else if(r)this.addMatch=(a,l,c,m)=>m(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new _i,r=n.add.bind(n);for(let{from:i,to:s}of _A(e,this.maxLength))V0(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,m=Math.max(s.from,l.from),p=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){m=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){p=a;break}}let u=[],d,h=(f,g,y)=>u.push(y.range(f,g));if(l==c)for(this.regexp.lastIndex=m-l.from;(d=this.regexp.exec(l.text))&&d.index<p-l.from;)this.addMatch(d,e,d.index+l.from,h);else V0(e.state.doc,this.regexp,m,p,(f,g)=>this.addMatch(g,e,f,h));n=n.update({filterFrom:m,filterTo:p,filter:(f,g)=>f<m||g>p,add:u})}}return n}}const zd=/x/.unicode!=null?"gu":"g",QA=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,zd),qA={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _d=null;function $A(){var t;if(_d==null&&typeof document<"u"&&document.body){let e=document.body.style;_d=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return _d||!1}const ac=ct.define({combine(t){let e=ui(t,{render:null,specialChars:QA,addSpecialChars:null});return(e.replaceTabs=!$A())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,zd)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,zd)),e}});function eT(t={}){return[ac.of(t),tT()]}let C0=null;function tT(){return C0||(C0=Ir.fromClass(class{constructor(t){this.view=t,this.decorations=pt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(ac)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new DA({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=Hr(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=ia(o.text,a,r-o.from);return pt.replace({widget:new oT((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=pt.replace({widget:new iT(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(ac);t.startState.facet(ac)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const rT="\u2022";function nT(t){return t>=32?rT:t==10?"\u2424":String.fromCharCode(9216+t)}class iT extends eo{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=nT(this.code),r=e.state.phrase("Control character")+" "+(qA[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class oT extends eo{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function sT(){return lT}const aT=pt.line({class:"cm-activeLine"}),lT=Ir.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(aT.range(i.from)),e=i.from)}return pt.set(n)}},{decorations:t=>t.decorations}),Dd=2e3;function cT(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>Dd||n.off>Dd||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let l=r;l<=i;l++){let c=t.doc.line(l);c.length<=a&&s.push(Ye.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let l=r;l<=i;l++){let c=t.doc.line(l),m=fd(c.text,o,t.tabSize,!0);if(m<0)s.push(Ye.cursor(c.to));else{let p=fd(c.text,a,t.tabSize);s.push(Ye.range(c.from+m,c.from+p))}}}return s}function uT(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function X0(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>Dd?-1:i==r.length?uT(t,e.clientX):ia(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function dT(t,e){let n=X0(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=X0(t,i);if(!a)return r;let l=cT(t.state,n,a);return l.length?o?Ye.create(l.concat(r.ranges)):Ye.create(l):r}}:null}function hT(t){let e=(t==null?void 0:t.eventFilter)||(n=>n.altKey&&n.button==0);return ot.mouseSelectionStyle.of((n,r)=>e(r)?dT(n,r):null)}const mT={Alt:[18,t=>t.altKey],Control:[17,t=>t.ctrlKey],Shift:[16,t=>t.shiftKey],Meta:[91,t=>t.metaKey]},pT={style:"cursor: crosshair"};function fT(t={}){let[e,n]=mT[t.key||"Alt"],r=Ir.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,ot.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?pT:null})]}const lc="-10000px";class L0{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var n;let r=e.state.facet(this.facet),i=r.filter(o=>o);if(r===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<i.length;o++){let a=i[o],l=-1;if(!!a){for(let c=0;c<this.tooltips.length;c++){let m=this.tooltips[c];m&&m.create==a.create&&(l=c)}if(l<0)s[o]=this.createTooltipView(a);else{let c=s[o]=this.tooltipViews[l];c.update&&c.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=r,this.tooltips=i,this.tooltipViews=s,!0}}function gT(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Qd=ct.define({combine:t=>{var e,n,r;return{position:ut.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||gT}}}),x0=Ir.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Qd);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new L0(t,qd,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(Qd);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=lc,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Qd).tooltipSpace(this.view)}}writeMeasure(t){let{editor:e,space:n}=t,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let s=this.manager.tooltips[i],o=this.manager.tooltipViews[i],{dom:a}=o,l=t.pos[i],c=t.size[i];if(!l||l.bottom<=Math.max(e.top,n.top)||l.top>=Math.min(e.bottom,n.bottom)||l.right<Math.max(e.left,n.left)-.1||l.left>Math.min(e.right,n.right)+.1){a.style.top=lc;continue}let m=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,p=m?7:0,u=c.right-c.left,d=c.bottom-c.top,h=o.offset||bT,f=this.view.textDirection==sr.LTR,g=c.width>n.right-n.left?f?n.left:n.right-c.width:f?Math.min(l.left-(m?14:0)+h.x,n.right-u):Math.max(n.left,l.left-u+(m?14:0)-h.x),y=!!s.above;!s.strictSide&&(y?l.top-(c.bottom-c.top)-h.y<n.top:l.bottom+(c.bottom-c.top)+h.y>n.bottom)&&y==n.bottom-l.bottom>l.top-n.top&&(y=!y);let Z=(y?l.top-n.top:n.bottom-l.bottom)-p;if(Z<d&&o.resize!==!1){if(Z<this.view.defaultLineHeight){a.style.top=lc;continue}a.style.height=(d=Z)+"px"}else a.style.height&&(a.style.height="");let I=y?l.top-d-p-h.y:l.bottom+p+h.y,G=g+u;if(o.overlap!==!0)for(let R of r)R.left<G&&R.right>g&&R.top<I+d&&R.bottom>I&&(I=y?R.top-d-2-p:R.bottom+p+2);this.position=="absolute"?(a.style.top=I-t.parent.top+"px",a.style.left=g-t.parent.left+"px"):(a.style.top=I+"px",a.style.left=g+"px"),m&&(m.style.left=`${l.left+(f?h.x:-h.x)-(g+14-7)}px`),o.overlap!==!0&&r.push({left:g,top:I,right:G,bottom:I+d}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),o.positioned&&o.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=lc}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),yT=ot.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),bT={x:0,y:0},qd=ct.define({enables:[x0,yT]}),cc=ct.define();class $d{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new L0(e,cc,n=>this.createHostedView(n))}static create(e){return new $d(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}}const ZT=qd.compute([cc],t=>{let e=t.facet(cc).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:$d.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class IT{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=i&&i.dir==sr.RTL?-1:1,o=this.source(this.view,n,e.x<r.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Wn(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!w0(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,s=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:i;(i==s?this.view.posAtCoords(this.lastMove)!=i:!vT(this.view,i,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!w0(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function w0(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function vT(t,e,n,r,i,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let c=o.getClientRects();o.detach();for(let m=0;m<c.length;m++){let p=c[m];if(Math.max(p.top-i,i-p.bottom,p.left-r,r-p.right)<=s)return!0}return!1}function GT(t,e={}){let n=Zt.define(),r=br.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,hn.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(ST)&&(i=null);return i},provide:i=>cc.from(i)});return[r,Ir.define(i=>new IT(i,t,r,n,e.hoverTime||300)),ZT]}function RT(t,e){let n=t.plugin(x0);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const ST=Zt.define(),k0=ct.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function ga(t,e){let n=t.plugin(A0),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const A0=Ir.fromClass(class{constructor(t){this.input=t.state.facet(ya),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(k0);this.top=new uc(t,!0,e.topContainer),this.bottom=new uc(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(k0);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new uc(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new uc(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(ya);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),m;c<0?(m=l(t.view),a.push(m)):(m=this.panels[c],m.update&&m.update(t)),i.push(m),(m.top?s:o).push(m)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>ot.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class uc{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=T0(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=T0(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function T0(t){let e=t.nextSibling;return t.remove(),e}const ya=ct.define({enables:A0});class Ti extends Lo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ti.prototype.elementClass="",Ti.prototype.toDOM=void 0,Ti.prototype.mapMode=hn.TrackBefore,Ti.prototype.startSide=Ti.prototype.endSide=-1,Ti.prototype.point=!0;const dc=ct.define(),WT={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Yt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ba=ct.define();function VT(t){return[B0(),ba.of(Object.assign(Object.assign({},WT),t))]}const eh=ct.define({combine:t=>t.some(e=>e)});function B0(t){let e=[CT];return t&&t.fixed===!1&&e.push(eh.of(!0)),e}const CT=Ir.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(ba).map(e=>new Y0(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(eh),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(eh)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Yt.iter(this.view.state.facet(dc),this.view.viewport.from),r=[],i=this.gutters.map(s=>new XT(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let o;if(Array.isArray(s.type)){for(let a of s.type)if(a.type==jt.Text){o=a;break}}else o=s.type==jt.Text?s:void 0;if(!!o){r.length&&(r=[]),F0(n,r,s.from);for(let a of i)a.line(this.view,o,r)}}for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(ba),n=t.state.facet(ba),r=t.docChanged||t.heightChanged||t.viewportChanged||!Yt.eq(t.startState.facet(dc),t.state.facet(dc),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new Y0(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>ot.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==sr.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function U0(t){return Array.isArray(t)?t:[t]}function F0(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class XT{constructor(e,n,r){this.gutter=e,this.height=r,this.localMarkers=[],this.i=0,this.cursor=Yt.iter(e.markers,n.from)}line(e,n,r){this.localMarkers.length&&(this.localMarkers=[]),F0(this.cursor,this.localMarkers,n.from);let i=r.length?this.localMarkers.concat(r):this.localMarkers,s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;if(i.length==0&&!o.config.renderEmptyElements)return;let a=n.top-this.height;if(this.i==o.elements.length){let l=new N0(e,n.height,a,i);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,n.height,a,i);this.height=n.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Y0{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=e.lineBlockAtHeight(i.clientY-e.documentTop);n.domEventHandlers[r](e,s,i)&&i.preventDefault()});this.markers=U0(n.markers(e)),n.initialSpacer&&(this.spacer=new N0(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=U0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Yt.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class N0{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),LT(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let m=l.elementClass;m&&(r+=" "+m);for(let p=o;p<this.markers.length;p++)if(this.markers[p].compare(l)){a=p,c=!0;break}}else a=this.markers.length;for(;o<a;){let m=this.markers[o++];if(m.toDOM){m.destroy(i);let p=i.nextSibling;i.remove(),i=p}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function LT(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const xT=ct.define(),us=ct.define({combine(t){return ui(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class th extends Ti{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function rh(t,e){return t.state.facet(us).formatNumber(e,t.state)}const wT=ba.compute([us],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(xT)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new th(rh(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:e=>e.startState.facet(us)!=e.state.facet(us),initialSpacer(e){return new th(rh(e,M0(e.state.doc.lines)))},updateSpacer(e,n){let r=rh(n.view,M0(n.view.state.doc.lines));return r==e.number?e:new th(r)},domEventHandlers:t.facet(us).domEventHandlers}));function kT(t={}){return[us.of(t),B0(),wT]}function M0(t){let e=9;for(;e<t;)e=e*10+9;return e}const AT=new class extends Ti{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},TT=dc.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(AT.range(i)))}return Yt.of(e)});function BT(){return TT}const UT=1024;let FT=0;class nh{constructor(e,n){this.from=e,this.to=n}}class xt{constructor(e={}){this.id=FT++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=In.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}xt.closedBy=new xt({deserialize:t=>t.split(" ")}),xt.openedBy=new xt({deserialize:t=>t.split(" ")}),xt.group=new xt({deserialize:t=>t.split(" ")}),xt.contextHash=new xt({perNode:!0}),xt.lookAhead=new xt({perNode:!0}),xt.mounted=new xt({perNode:!0});const YT=Object.create(null);class In{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):YT,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new In(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(xt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(xt.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}In.none=new In("",Object.create(null),0,8);class ih{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new In(r.name,i,r.id,r.flags):r)}return new ih(n)}}const hc=new WeakMap,E0=new WeakMap;var $r;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})($r||($r={}));class lr{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(xt.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new fc(this.topNode,e)}cursorAt(e,n=0,r=0){let i=hc.get(this)||this.topNode,s=new fc(i);return s.moveTo(e,n),hc.set(this,s._tree),s}get topNode(){return new Bi(this,0,0,null)}resolve(e,n=0){let r=ds(hc.get(this)||this.topNode,e,n,!1);return hc.set(this,r),r}resolveInner(e,n=0){let r=ds(E0.get(this)||this.topNode,e,n,!0);return E0.set(this,r),r}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|$r.IncludeAnonymous);;){let a=!1;if(o.from<=s&&o.to>=i&&(o.type.isAnonymous||n(o)!==!1)){if(o.firstChild())continue;a=!0}for(;a&&r&&!o.type.isAnonymous&&r(o),!o.nextSibling();){if(!o.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:ah(In.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new lr(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new lr(In.none,n,r,i)))}static build(e){return MT(e)}}lr.empty=new lr(In.none,[],[],0);class oh{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new oh(this.buffer,this.index)}}class ko{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return In.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(H0(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new ko(s,o,this.set)}}function H0(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function K0(t,e){let n=t.childBefore(e);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}function ds(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Bi&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:$r.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Bi&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Bi{constructor(e,n,r,i){this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let m=a[e],p=l[e]+o.from;if(!!H0(i,r,p,p+m.length)){if(m instanceof ko){if(s&$r.ExcludeBuffers)continue;let u=m.findChild(0,m.buffer.length,n,r-p,i);if(u>-1)return new io(new NT(o,m,e,p),null,u)}else if(s&$r.IncludeAnonymous||!m.type.isAnonymous||sh(m)){let u;if(!(s&$r.IgnoreMounts)&&m.props&&(u=m.prop(xt.mounted))&&!u.overlay)return new Bi(u.tree,p,e,o);let d=new Bi(m,p,e,o);return s&$r.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?m.children.length-1:0,n,r,i)}}}if(s&$r.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&$r.IgnoreOverlays)&&(i=this._tree.prop(xt.mounted))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Bi(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new fc(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return ds(this,e,n,!1)}resolveInner(e,n=0){return ds(this,e,n,!0)}enterUnfinishedNodesBefore(e){return K0(this,e)}getChild(e,n=null,r=null){let i=mc(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return mc(this,e,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return pc(this,e)}}function mc(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function pc(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class NT{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class io{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new io(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&$r.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new io(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new io(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new io(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new fc(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new lr(this.type,e,n,this.to-this.from)}resolve(e,n=0){return ds(this,e,n,!1)}resolveInner(e,n=0){return ds(this,e,n,!0)}enterUnfinishedNodesBefore(e){return K0(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,r=null){let i=mc(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return mc(this,e,n,r)}get node(){return this}matchContext(e){return pc(this,e)}}class fc{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Bi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Bi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&$r.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&$r.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&$r.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&$r.IncludeAnonymous||a instanceof ko||!a.type.isAnonymous||sh(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}}for(let i=r;i<this.stack.length;i++)n=new io(this.buffer,n,this.stack[i]);return this.bufferNode=new io(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return pc(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return pc(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function sh(t){return t.children.some(e=>e instanceof ko||!e.type.isAnonymous||sh(e))}function MT(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=UT,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new oh(n,n.length):n,l=r.types,c=0,m=0;function p(G,R,C,V,x){let{id:w,start:k,end:A,size:Y}=a,U=m;for(;Y<0;)if(a.next(),Y==-1){let J=s[w];C.push(J),V.push(k-G);return}else if(Y==-3){c=w;return}else if(Y==-4){m=w;return}else throw new RangeError(`Unrecognized record size: ${Y}`);let M=l[w],j,K,P=k-G;if(A-k<=i&&(K=f(a.pos-R,x))){let J=new Uint16Array(K.size-K.skip),E=a.pos-K.size,O=J.length;for(;a.pos>E;)O=g(K.start,J,O);j=new ko(J,A-K.start,r),P=K.start-G}else{let J=a.pos-Y;a.next();let E=[],O=[],D=w>=o?w:-1,le=0,X=A;for(;a.pos>J;)D>=0&&a.id==D&&a.size>=0?(a.end<=X-i&&(d(E,O,k,le,a.end,X,D,U),le=E.length,X=a.end),a.next()):p(k,J,E,O,D);if(D>=0&&le>0&&le<E.length&&d(E,O,k,le,k,X,D,U),E.reverse(),O.reverse(),D>-1&&le>0){let T=u(M);j=ah(M,E,O,0,E.length,0,A-k,T,T)}else j=h(M,E,O,A-k,U-A)}C.push(j),V.push(P)}function u(G){return(R,C,V)=>{let x=0,w=R.length-1,k,A;if(w>=0&&(k=R[w])instanceof lr){if(!w&&k.type==G&&k.length==V)return k;(A=k.prop(xt.lookAhead))&&(x=C[w]+k.length+A)}return h(G,R,C,V,x)}}function d(G,R,C,V,x,w,k,A){let Y=[],U=[];for(;G.length>V;)Y.push(G.pop()),U.push(R.pop()+C-x);G.push(h(r.types[k],Y,U,w-x,A-w)),R.push(x-C)}function h(G,R,C,V,x=0,w){if(c){let k=[xt.contextHash,c];w=w?[k].concat(w):[k]}if(x>25){let k=[xt.lookAhead,x];w=w?[k].concat(w):[k]}return new lr(G,R,C,V,w)}function f(G,R){let C=a.fork(),V=0,x=0,w=0,k=C.end-i,A={size:0,start:0,skip:0};e:for(let Y=C.pos-G;C.pos>Y;){let U=C.size;if(C.id==R&&U>=0){A.size=V,A.start=x,A.skip=w,w+=4,V+=4,C.next();continue}let M=C.pos-U;if(U<0||M<Y||C.start<k)break;let j=C.id>=o?4:0,K=C.start;for(C.next();C.pos>M;){if(C.size<0)if(C.size==-3)j+=4;else break e;else C.id>=o&&(j+=4);C.next()}x=K,V+=U,w+=j}return(R<0||V==G)&&(A.size=V,A.start=x,A.skip=w),A.size>4?A:void 0}function g(G,R,C){let{id:V,start:x,end:w,size:k}=a;if(a.next(),k>=0&&V<o){let A=C;if(k>4){let Y=a.pos-(k-4);for(;a.pos>Y;)C=g(G,R,C)}R[--C]=A,R[--C]=w-G,R[--C]=x-G,R[--C]=V}else k==-3?c=V:k==-4&&(m=V);return C}let y=[],Z=[];for(;a.pos>0;)p(t.start||0,t.bufferStart||0,y,Z,-1);let I=(e=t.length)!==null&&e!==void 0?e:y.length?Z[0]+y[0].length:0;return new lr(l[t.topID],y.reverse(),Z.reverse(),I)}const J0=new WeakMap;function gc(t,e){if(!t.isAnonymous||e instanceof ko||e.type!=t)return 1;let n=J0.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof lr)){n=1;break}n+=gc(t,r)}J0.set(e,n)}return n}function ah(t,e,n,r,i,s,o,a,l){let c=0;for(let h=r;h<i;h++)c+=gc(t,e[h]);let m=Math.ceil(c*1.5/8),p=[],u=[];function d(h,f,g,y,Z){for(let I=g;I<y;){let G=I,R=f[I],C=gc(t,h[I]);for(I++;I<y;I++){let V=gc(t,h[I]);if(C+V>=m)break;C+=V}if(I==G+1){if(C>m){let V=h[G];d(V.children,V.positions,0,V.children.length,f[G]+Z);continue}p.push(h[G])}else{let V=f[I-1]+h[I-1].length-R;p.push(ah(t,h,f,G,I,R,V,null,l))}u.push(R+Z-s)}}return d(e,n,r,i,0),(a||l)(p,u,o)}class Ao{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Ao(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let m=a<n.length?n[a]:null,p=m?m.fromA:1e9;if(p-l>=r)for(;o&&o.from<p;){let u=o;if(l>=u.from||p<=u.to||c){let d=Math.max(u.from,l)-c,h=Math.min(u.to,p)-c;u=d>=h?null:new Ao(d,h,u.tree,u.offset+c,a>0,!!m)}if(u&&i.push(u),o.to>p)break;o=s<e.length?e[s++]:null}if(!m)break;l=m.toA,c=m.toA-m.toB}return i}}class j0{startParse(e,n,r){return typeof e=="string"&&(e=new ET(e)),r=r?r.length?r.map(i=>new nh(i.from,i.to)):[new nh(0,0)]:[new nh(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class ET{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new xt({perNode:!0});let HT=0;class pi{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=HT++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new pi([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new yc;return n=>n.modified.indexOf(e)>-1?n:yc.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let KT=0;class yc{constructor(){this.instances=[],this.id=KT++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&JT(n,a.modified));if(r)return r;let i=[],s=new pi(i,e,n);for(let a of n)a.instances.push(s);let o=jT(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(yc.get(a,l));return s}}function JT(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function jT(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function PT(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let p=0;;){if(a=="..."&&p>0&&p+3==i.length){o=1;break}let u=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!u)throw new RangeError("Invalid path: "+i);if(s.push(u[0]=="*"?"":u[0][0]=='"'?JSON.parse(u[0]):u[0]),p+=u[0].length,p==i.length)break;let d=i[p++];if(p==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(p)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let m=new bc(r,o,l>0?s.slice(0,l):null);e[c]=m.sort(e[c])}}return P0.add(e)}const P0=new xt;class bc{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}bc.empty=new bc([],2,null);function O0(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function OT(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function zT(t,e,n,r=0,i=t.length){let s=new _T(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class _T{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=i,m=DT(e)||bc.empty,p=OT(s,m.tags);if(p&&(c&&(c+=" "),c+=p,m.mode==1&&(i+=(i?" ":"")+p)),this.startSpan(e.from,c),m.opaque)return;let u=e.tree&&e.tree.prop(xt.mounted);if(u&&u.overlay){let d=e.node.enter(u.overlay[0].from+a,1),h=this.highlighters.filter(g=>!g.scope||g.scope(u.tree.type)),f=e.firstChild();for(let g=0,y=a;;g++){let Z=g<u.overlay.length?u.overlay[g]:null,I=Z?Z.from+a:l,G=Math.max(n,y),R=Math.min(r,I);if(G<R&&f)for(;e.from<R&&(this.highlightRange(e,G,R,i,s),this.startSpan(Math.min(R,e.to),c),!(e.to>=I||!e.nextSibling())););if(!Z||I>r)break;y=Z.to+a,y>n&&(this.highlightRange(d.cursor(),Math.max(n,Z.from+a),Math.min(r,y),i,h),this.startSpan(y,c))}f&&e.parent()}else if(e.firstChild()){do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function DT(t){let e=t.type.prop(P0);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Oe=pi.define,Zc=Oe(),oo=Oe(),z0=Oe(oo),_0=Oe(oo),so=Oe(),Ic=Oe(so),lh=Oe(so),fi=Oe(),To=Oe(fi),gi=Oe(),yi=Oe(),ch=Oe(),Za=Oe(ch),vc=Oe(),Be={comment:Zc,lineComment:Oe(Zc),blockComment:Oe(Zc),docComment:Oe(Zc),name:oo,variableName:Oe(oo),typeName:z0,tagName:Oe(z0),propertyName:_0,attributeName:Oe(_0),className:Oe(oo),labelName:Oe(oo),namespace:Oe(oo),macroName:Oe(oo),literal:so,string:Ic,docString:Oe(Ic),character:Oe(Ic),attributeValue:Oe(Ic),number:lh,integer:Oe(lh),float:Oe(lh),bool:Oe(so),regexp:Oe(so),escape:Oe(so),color:Oe(so),url:Oe(so),keyword:gi,self:Oe(gi),null:Oe(gi),atom:Oe(gi),unit:Oe(gi),modifier:Oe(gi),operatorKeyword:Oe(gi),controlKeyword:Oe(gi),definitionKeyword:Oe(gi),moduleKeyword:Oe(gi),operator:yi,derefOperator:Oe(yi),arithmeticOperator:Oe(yi),logicOperator:Oe(yi),bitwiseOperator:Oe(yi),compareOperator:Oe(yi),updateOperator:Oe(yi),definitionOperator:Oe(yi),typeOperator:Oe(yi),controlOperator:Oe(yi),punctuation:ch,separator:Oe(ch),bracket:Za,angleBracket:Oe(Za),squareBracket:Oe(Za),paren:Oe(Za),brace:Oe(Za),content:fi,heading:To,heading1:Oe(To),heading2:Oe(To),heading3:Oe(To),heading4:Oe(To),heading5:Oe(To),heading6:Oe(To),contentSeparator:Oe(fi),list:Oe(fi),quote:Oe(fi),emphasis:Oe(fi),strong:Oe(fi),link:Oe(fi),monospace:Oe(fi),strikethrough:Oe(fi),inserted:Oe(),deleted:Oe(),changed:Oe(),invalid:Oe(),meta:vc,documentMeta:Oe(vc),annotation:Oe(vc),processingInstruction:Oe(vc),definition:pi.defineModifier(),constant:pi.defineModifier(),function:pi.defineModifier(),standard:pi.defineModifier(),local:pi.defineModifier(),special:pi.defineModifier()};O0([{tag:Be.link,class:"tok-link"},{tag:Be.heading,class:"tok-heading"},{tag:Be.emphasis,class:"tok-emphasis"},{tag:Be.strong,class:"tok-strong"},{tag:Be.keyword,class:"tok-keyword"},{tag:Be.atom,class:"tok-atom"},{tag:Be.bool,class:"tok-bool"},{tag:Be.url,class:"tok-url"},{tag:Be.labelName,class:"tok-labelName"},{tag:Be.inserted,class:"tok-inserted"},{tag:Be.deleted,class:"tok-deleted"},{tag:Be.literal,class:"tok-literal"},{tag:Be.string,class:"tok-string"},{tag:Be.number,class:"tok-number"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],class:"tok-string2"},{tag:Be.variableName,class:"tok-variableName"},{tag:Be.local(Be.variableName),class:"tok-variableName tok-local"},{tag:Be.definition(Be.variableName),class:"tok-variableName tok-definition"},{tag:Be.special(Be.variableName),class:"tok-variableName2"},{tag:Be.definition(Be.propertyName),class:"tok-propertyName tok-definition"},{tag:Be.typeName,class:"tok-typeName"},{tag:Be.namespace,class:"tok-namespace"},{tag:Be.className,class:"tok-className"},{tag:Be.macroName,class:"tok-macroName"},{tag:Be.propertyName,class:"tok-propertyName"},{tag:Be.operator,class:"tok-operator"},{tag:Be.comment,class:"tok-comment"},{tag:Be.meta,class:"tok-meta"},{tag:Be.invalid,class:"tok-invalid"},{tag:Be.punctuation,class:"tok-punctuation"}]);var uh;const Ia=new xt;function QT(t){return ct.define({combine:t?e=>e.concat(t):void 0})}class _n{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Lt.prototype.hasOwnProperty("tree")||Object.defineProperty(Lt.prototype,"tree",{get(){return jr(this)}}),this.parser=n,this.extension=[ao.of(this),Lt.languageData.of((s,o,a)=>s.facet(D0(s,o,a)))].concat(r)}isActiveAt(e,n,r=-1){return D0(e,n,r)==this.data}findRegions(e){let n=e.facet(ao);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Ia)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(xt.mounted);if(a){if(a.tree.prop(Ia)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof lr&&i(c,s.positions[l]+o)}};return i(jr(e),0),r}get allowsNesting(){return!0}}_n.setState=Zt.define();function D0(t,e,n){let r=t.facet(ao);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let s=jr(t).topNode;s;s=s.enter(e,n,$r.ExcludeBuffers))i=s.type.prop(Ia)||i;return i}function jr(t){let e=t.field(_n.state,!1);return e?e.tree:lr.empty}class qT{constructor(e,n=e.length){this.doc=e,this.length=n,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let va=null;class hs{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new hs(e,n,[],lr.empty,0,r,[],null)}startParse(){return this.parser.startParse(new qT(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=lr.empty&&this.isDone(n!=null?n:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ao.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n!=null?n:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Ao.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=va;va=this;try{return e()}finally{va=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Q0(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,m,p,u)=>l.push({fromA:c,toA:m,fromB:p,toB:u})),r=Ao.applyChanges(r,l),i=lr.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let m=e.mapPos(c.from,1),p=e.mapPos(c.to,-1);m<p&&a.push({from:m,to:p})}}}return new hs(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Q0(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends j0{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=va;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new lr(In.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return va}}function Q0(t,e,n){return Ao.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class ms{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new ms(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=hs.create(e.facet(ao).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new ms(r)}}_n.state=br.define({create:ms.init,update(t,e){for(let n of e.effects)if(n.is(_n.setState))return n.value;return e.startState.facet(ao)!=e.state.facet(ao)?ms.init(e.state):t.apply(e)}});let q0=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(q0=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const dh=typeof navigator<"u"&&((uh=navigator.scheduling)===null||uh===void 0?void 0:uh.isInputPending)?()=>navigator.scheduling.isInputPending():null,$T=Ir.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(_n.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(_n.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=q0(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(_n.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!dh?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>dh&&dh()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:_n.setState.of(new ms(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Wn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ao=ct.define({combine(t){return t.length?t[0]:null},enables:t=>[_n.state,$T,ot.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),$0=ct.define(),hh=ct.define({combine:t=>{if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function Bo(t){let e=t.facet(hh);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Ga(t,e){let n="",r=t.tabSize;if(t.facet(hh).charCodeAt(0)==9)for(;e>=r;)n+="	",e-=r;for(let i=0;i<e;i++)n+=" ";return n}function mh(t,e){t instanceof Lt&&(t=new Gc(t));for(let r of t.state.facet($0)){let i=r(t,e);if(i!==void 0)return i}let n=jr(t.state);return n?tB(t,n,e):null}class Gc{constructor(e,n={}){this.state=e,this.options=n,this.unit=Bo(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return ia(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const eB=new xt;function tB(t,e,n){return eb(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function rB(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function nB(t){let e=t.type.prop(eB);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(xt.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>aB(o,!0,1,void 0,s&&!rB(o)?i.from:void 0)}return t.parent==null?iB:null}function eb(t,e,n){for(;t;t=t.parent){let r=nB(t);if(r)return r(ph.create(n,e,t))}return null}function iB(){return 0}class ph extends Gc{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.node=r}static create(e,n,r){return new ph(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let n=this.node.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(oB(n,this.node))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?eb(e,this.pos,this.base):0}}function oB(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function sB(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function aB(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?sB(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const lB=200;function cB(){return Lt.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+lB)return t;let s=n.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let m=o.doc.lineAt(c);if(m.from==a)continue;a=m.from;let p=mh(o,m.from);if(p==null)continue;let u=/^\s*/.exec(m.text)[0],d=Ga(o,p);u!=d&&l.push({from:m.from,to:m.from+u.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const uB=ct.define(),dB=new xt;function hB(t,e,n){let r=jr(t);if(r.length<n)return null;let i=r.resolveInner(n,1),s=null;for(let o=i;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(dB);if(a&&(o.to<r.length-50||r.length==t.doc.length||!mB(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function mB(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Rc(t,e,n){for(let r of t.facet(uB)){let i=r(t,e,n);if(i)return i}return hB(t,e,n)}function tb(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Sc=Zt.define({map:tb}),Ra=Zt.define({map:tb});function rb(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Uo=br.define({create(){return pt.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(Sc)&&!pB(t,n.value.from,n.value.to)?t=t.update({add:[ab.range(n.value.from,n.value.to)]}):n.is(Ra)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>ot.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(ab.range(r,i))}return pt.set(e,!0)}});function Wc(t,e,n){var r;let i=null;return(r=t.field(Uo,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function pB(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function nb(t,e){return t.field(Uo,!1)?e:e.concat(Zt.appendConfig.of(sb()))}const fB=t=>{for(let e of rb(t)){let n=Rc(t.state,e.from,e.to);if(n)return t.dispatch({effects:nb(t.state,[Sc.of(n),ib(t,n)])}),!0}return!1},gB=t=>{if(!t.state.field(Uo,!1))return!1;let e=[];for(let n of rb(t)){let r=Wc(t.state,n.from,n.to);r&&e.push(Ra.of(r),ib(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function ib(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return ot.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const yB=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:fB},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:gB},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=Rc(e,i.from,i.to);s&&n.push(Sc.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:nb(t.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(Uo,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(Ra.of({from:r,to:i}))}),t.dispatch({effects:n}),!0}}],bB={placeholderDOM:null,placeholderText:"\u2026"},ob=ct.define({combine(t){return ui(t,bB)}});function sb(t){let e=[Uo,vB];return t&&e.push(ob.of(t)),e}const ab=pt.replace({widget:new class extends eo{toDOM(t){let{state:e}=t,n=e.facet(ob),r=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=Wc(t.state,o.from,o.to);a&&t.dispatch({effects:Ra.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),ZB={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class fh extends Ti{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function IB(t={}){let e=Object.assign(Object.assign({},ZB),t),n=new fh(e,!0),r=new fh(e,!1),i=Ir.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(ao)!=o.state.facet(ao)||o.startState.field(Uo,!1)!=o.state.field(Uo,!1)||jr(o.startState)!=jr(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new _i;for(let l of o.viewportLineBlocks){let c=Wc(o.state,l.from,l.to)?r:Rc(o.state,l.from,l.to)?n:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,VT({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||Yt.empty},initialSpacer(){return new fh(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Wc(o.state,a.from,a.to);if(c)return o.dispatch({effects:Ra.of(c)}),!0;let m=Rc(o.state,a.from,a.to);return m?(o.dispatch({effects:Sc.of(m)}),!0):!1}})}),sb()]}const vB=ot.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Sa{constructor(e,n){this.specs=e;let r;function i(a){let l=Di.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof _n?a=>a.prop(Ia)==o.data:o?a=>a==o:void 0,this.style=O0(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Di(r):null,this.themeType=n.themeType}static define(e,n){return new Sa(e,n||{})}}const gh=ct.define(),lb=ct.define({combine(t){return t.length?[t[0]]:null}});function yh(t){let e=t.facet(gh);return e.length?e:t.facet(lb)}function cb(t,e){let n=[RB],r;return t instanceof Sa&&(t.module&&n.push(ot.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(lb.of(t)):r?n.push(gh.computeN([ot.darkTheme],i=>i.facet(ot.darkTheme)==(r=="dark")?[t]:[])):n.push(gh.of(t)),n}class GB{constructor(e){this.markCache=Object.create(null),this.tree=jr(e.state),this.decorations=this.buildDeco(e,yh(e.state))}update(e){let n=jr(e.state),r=yh(e.state),i=r!=yh(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return pt.none;let r=new _i;for(let{from:i,to:s}of e.visibleRanges)zT(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=pt.mark({class:l})))},i,s);return r.finish()}}const RB=Co.high(Ir.fromClass(GB,{decorations:t=>t.decorations})),SB=Sa.define([{tag:Be.meta,color:"#7a757a"},{tag:Be.link,textDecoration:"underline"},{tag:Be.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Be.emphasis,fontStyle:"italic"},{tag:Be.strong,fontWeight:"bold"},{tag:Be.strikethrough,textDecoration:"line-through"},{tag:Be.keyword,color:"#708"},{tag:[Be.atom,Be.bool,Be.url,Be.contentSeparator,Be.labelName],color:"#219"},{tag:[Be.literal,Be.inserted],color:"#164"},{tag:[Be.string,Be.deleted],color:"#a11"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],color:"#e40"},{tag:Be.definition(Be.variableName),color:"#00f"},{tag:Be.local(Be.variableName),color:"#30a"},{tag:[Be.typeName,Be.namespace],color:"#085"},{tag:Be.className,color:"#167"},{tag:[Be.special(Be.variableName),Be.macroName],color:"#256"},{tag:Be.definition(Be.propertyName),color:"#00c"},{tag:Be.comment,color:"#940"},{tag:Be.invalid,color:"#f00"}]),WB=ot.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ub=1e4,db="()[]{}",hb=ct.define({combine(t){return ui(t,{afterCursor:!0,brackets:db,maxScanDistance:ub,renderMatch:XB})}}),VB=pt.mark({class:"cm-matchingBracket"}),CB=pt.mark({class:"cm-nonmatchingBracket"});function XB(t){let e=[],n=t.matched?VB:CB;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const LB=[br.define({create(){return pt.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(hb);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=bi(e.state,i.head,-1,r)||i.head>0&&bi(e.state,i.head-1,1,r)||r.afterCursor&&(bi(e.state,i.head,1,r)||i.head<e.state.doc.length&&bi(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return pt.set(n,!0)},provide:t=>ot.decorations.from(t)}),WB];function xB(t={}){return[hb.of(t),LB]}function bh(t,e,n){let r=t.prop(e<0?xt.openedBy:xt.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function bi(t,e,n,r={}){let i=r.maxScanDistance||ub,s=r.brackets||db,o=jr(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=bh(l.type,n,s);if(c&&l.from<l.to)return wB(t,e,n,l,c,s)}return kB(t,e,n,o,a.type,i,s)}function wB(t,e,n,r,i,s){let o=r.parent,a={from:r.from,to:r.to},l=0,c=o==null?void 0:o.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(l==0&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(bh(c.type,n,s))l++;else if(bh(c.type,-n,s)){if(l==0)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};l--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function kB(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},m=t.doc.iterRange(e,n>0?t.doc.length:0),p=0;for(let u=0;!m.next().done&&u<=s;){let d=m.value;n<0&&(u+=d.length);let h=e+u*n;for(let f=n>0?0:d.length-1,g=n>0?d.length:-1;f!=g;f+=n){let y=o.indexOf(d[f]);if(!(y<0||r.resolveInner(h+f,1).type!=i))if(y%2==0==n>0)p++;else{if(p==1)return{start:c,end:{from:h+f,to:h+f+1},matched:y>>1==l>>1};p--}}n>0&&(u+=d.length)}return m.done?{start:c,matched:!1}:null}function mb(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class pb{constructor(e,n,r){this.string=e,this.tabSize=n,this.indentUnit=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=mb(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){return mb(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function AB(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||TB,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||vh}}function TB(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}class Zh extends _n{constructor(e){let n=QT(e.languageData),r=AB(e),i,s=new class extends j0{createParse(o,a,l){return new UB(i,o,a,l)}};super(n,s,[$0.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=NB(n),i=this,this.streamParser=r,this.stateAfter=new xt({perNode:!0}),this.tokenTable=e.tokenTable?new Zb(r.tokenTable):YB}static define(e){return new Zh(e)}getIndent(e,n){let r=jr(e.state),i=r.resolve(n);for(;i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;let s=Ih(this,r,0,i.from,n),o,a;if(s?(a=s.state,o=s.pos+1):(a=this.streamParser.startState(e.unit),o=0),n-o>1e4)return null;for(;o<n;){let c=e.state.doc.lineAt(o),m=Math.min(n,c.to);if(c.length){let p=new pb(c.text,e.state.tabSize,e.unit);for(;p.pos<m-c.from;)gb(this.streamParser.token,p,a)}else this.streamParser.blankLine(a,e.unit);if(m==n)break;o=c.to+1}let{text:l}=e.lineAt(n);return this.streamParser.indent(a,/^\s*(.*)/.exec(l)[1],e)}get allowsNesting(){return!1}}function Ih(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof lr&&l<i&&Ih(t,a,l,r,i);if(c)return c}return null}function fb(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<r&&a instanceof lr){if(!(l=fb(t,a,n-o,r-o,i)))break;return i?new lr(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function BB(t,e,n,r){for(let i of e){let s=i.from+(i.openStart?25:0),o=i.to-(i.openEnd?25:0),a=s<=n&&o>n&&Ih(t,i.tree,0-i.offset,n,o),l;if(a&&(l=fb(t,i.tree,n+i.offset,a.pos+i.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(r?Bo(r):4),tree:lr.empty}}class UB{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=hs.get(),o=i[0].from,{state:a,tree:l}=BB(e,r,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Bo(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=hs.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,a=this.lineAfter(o);n+=a,r=o+a.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;n+=this.ranges[++this.rangeIndex].from-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(r,s,-1),r+=s,i+=this.chunk.length-o}return this.chunk.push(e,n,r,i),s}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new pb(n,e?e.state.tabSize:4,e?Bo(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=gb(s.token,o,this.state);if(a&&(i=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=lr.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:FB,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new lr(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new lr(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function gb(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const vh=Object.create(null),Wa=[In.none],FB=new ih(Wa),yb=[],bb=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])bb[t]=Ib(vh,e);class Zb{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),bb)}resolve(e){return e?this.table[e]||(this.table[e]=Ib(this.extra,e)):0}}const YB=new Zb(vh);function Gh(t,e){yb.indexOf(t)>-1||(yb.push(t),console.warn(e))}function Ib(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||Be[s];o?typeof o=="function"?n?n=o(n):Gh(s,`Modifier ${s} used at start of tag`):n?Gh(s,`Tag ${s} used as modifier`):n=o:Gh(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=In.define({id:Wa.length,name:r,props:[PT({[r]:n})]});return Wa.push(i),i.id}function NB(t){let e=In.define({id:Wa.length,name:"Document",props:[Ia.add(()=>t)]});return Wa.push(e),e}const MB=t=>{let e=Sh(t.state);return e.line?EB(t):e.block?KB(t):!1};function Rh(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const EB=Rh(PB,0),HB=Rh(vb,0),KB=Rh((t,e)=>vb(t,e,jB(e)),0);function Sh(t,e=t.selection.main.head){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Va=50;function JB(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Va,r),o=t.sliceDoc(i,i+Va),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let m,p;i-r<=2*Va?m=p=t.sliceDoc(r,i):(m=t.sliceDoc(r,r+Va),p=t.sliceDoc(i-Va,i));let u=/^\s*/.exec(m)[0].length,d=/\s*$/.exec(p)[0].length,h=p.length-d-n.length;return m.slice(u,u+e.length)==e&&p.slice(h,h+n.length)==n?{open:{pos:r+u+e.length,margin:/\s/.test(m.charAt(u+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(p.charAt(h-1))?1:0}}:null}function jB(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from,to:i.to})}return e}function vb(t,e,n=e.selection.ranges){let r=n.map(s=>Sh(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>JB(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:m}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:m.pos-m.margin,to:m.pos+l.close.length})}return{changes:s}}return null}function PB(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9;for(let c=s;c<=o;){let m=e.doc.lineAt(c);if(m.from>i&&(s==o||o>m.from)){i=m.from;let p=Sh(e,c).line;if(!p)continue;let u=/^\s*/.exec(m.text)[0].length,d=u==m.length,h=m.text.slice(u,u+p.length)==p?u:-1;u<m.text.length&&u<l&&(l=u),r.push({line:m,comment:h,token:p,indent:u,empty:d,single:!1})}c=m.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:m,single:p}of r)(p||!m)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,m=c+l.length;o.text[m-o.from]==" "&&m++,s.push({from:c,to:m})}return{changes:s}}return null}const Wh=zi.define(),OB=zi.define(),zB=ct.define(),Gb=ct.define({combine(t){return ui(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function _B(t){let e=0;return t.iterChangedRanges((n,r)=>e=r),e}const Rb=br.define({create(){return Zi.empty},update(t,e){let n=e.state.facet(Gb),r=e.annotation(Wh);if(r){let l=e.docChanged?Ye.single(_B(e.changes)):void 0,c=vn.fromTransaction(e,l),m=r.side,p=m==0?t.undone:t.done;return c?p=Cc(p,p.length,n.minDepth,c):p=Vb(p,e.startState.selection),new Zi(m==0?r.rest:p,m==0?p:r.rest)}let i=e.annotation(OB);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Zr.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=vn.fromTransaction(e),o=e.annotation(Zr.time),a=e.annotation(Zr.userEvent);return s?t=t.addChanges(s,o,a,n.newGroupDelay,n.minDepth):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Zi(t.done.map(vn.fromJSON),t.undone.map(vn.fromJSON))}});function DB(t={}){return[Rb,Gb.of(t),ot.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?Sb:e.inputType=="historyRedo"?Vh:null;return r?(e.preventDefault(),r(n)):!1}})]}function Vc(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(Rb,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const Sb=Vc(0,!1),Vh=Vc(1,!1),QB=Vc(0,!0),qB=Vc(1,!0);class vn{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new vn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new vn(e.changes&&Xr.fromJSON(e.changes),[],e.mapped&&ci.fromJSON(e.mapped),e.startSelection&&Ye.fromJSON(e.startSelection),e.selectionsAfter.map(Ye.fromJSON))}static fromTransaction(e,n){let r=Un;for(let i of e.startState.facet(zB)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new vn(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Un)}static selection(e){return new vn(void 0,Un,void 0,void 0,e)}}function Cc(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function $B(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],m=n[l++];a>=c&&o<=m&&(r=!0)}}),r}function eU(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function Wb(t,e){return t.length?e.length?t.concat(e):t:e}const Un=[],tU=200;function Vb(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-tU));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Cc(t,t.length-1,1e9,n.setSelAfter(r)))}else return[vn.selection([e])]}function rU(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Ch(t,e){if(!t.length)return t;let n=t.length,r=Un;for(;n;){let i=nU(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[vn.selection(r)]:Un}function nU(t,e,n){let r=Wb(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Un,n);if(!t.changes)return vn.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new vn(i,Zt.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const iU=/^(input\.type|delete)($|\.)/;class Zi{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Zi(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||iU.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i&&$B(a.changes,e.changes)||r=="input.type.compose")?o=Cc(o,o.length-1,s,new vn(e.changes.compose(a.changes),Wb(e.effects,a.effects),a.mapped,a.startSelection,Un)):o=Cc(o,o.length,s,e),new Zi(o,Un,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Un;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&eU(s[s.length-1],e)?this:new Zi(Vb(this.done,e),this.undone,n,r)}addMapping(e){return new Zi(Ch(this.done,e),Ch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1];if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Wh.of({side:e,rest:rU(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?Un:i.slice(0,i.length-1);return s.mapped&&(o=Ch(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Wh.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Zi.empty=new Zi(Un,Un);const oU=[{key:"Mod-z",run:Sb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Vh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Vh,preventDefault:!0},{key:"Mod-u",run:QB,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:qB,preventDefault:!0}];function ps(t,e){return Ye.create(t.ranges.map(e),t.mainIndex)}function Ii(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Dn({state:t,dispatch:e},n){let r=ps(t.selection,n);return r.eq(t.selection)?!1:(e(Ii(t,r)),!0)}function Xc(t,e){return Ye.cursor(e?t.to:t.from)}function Cb(t,e){return Dn(t,n=>n.empty?t.moveByChar(n,e):Xc(n,e))}function en(t){return t.textDirectionAt(t.state.selection.main.head)==sr.LTR}const Xb=t=>Cb(t,!en(t)),Lb=t=>Cb(t,en(t));function xb(t,e){return Dn(t,n=>n.empty?t.moveByGroup(n,e):Xc(n,e))}const sU=t=>xb(t,!en(t)),aU=t=>xb(t,en(t));function lU(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Lc(t,e,n){let r=jr(t).resolveInner(e.head),i=n?xt.closedBy:xt.openedBy;for(let l=e.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;lU(t,c,i)?r=c:l=n?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=n?bi(t,r.from,1):bi(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,Ye.cursor(a,n?-1:1)}const cU=t=>Dn(t,e=>Lc(t.state,e,!en(t))),uU=t=>Dn(t,e=>Lc(t.state,e,en(t)));function wb(t,e){return Dn(t,n=>{if(!n.empty)return Xc(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const kb=t=>wb(t,!1),Ab=t=>wb(t,!0);function Tb(t){return Math.max(t.defaultLineHeight,Math.min(t.dom.clientHeight,innerHeight)-5)}function Bb(t,e){let{state:n}=t,r=ps(n.selection,a=>a.empty?t.moveVertically(a,e,Tb(t)):Xc(a,e));if(r.eq(n.selection))return!1;let i=t.coordsAtPos(n.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),o;return i&&i.top>s.top&&i.bottom<s.bottom&&i.top-s.top<=t.scrollDOM.scrollHeight-t.scrollDOM.scrollTop-t.scrollDOM.clientHeight&&(o=ot.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-s.top})),t.dispatch(Ii(n,r),{effects:o}),!0}const Ub=t=>Bb(t,!1),Xh=t=>Bb(t,!0);function lo(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=Ye.cursor(r.from+s))}return i}const dU=t=>Dn(t,e=>lo(t,e,!0)),hU=t=>Dn(t,e=>lo(t,e,!1)),mU=t=>Dn(t,e=>lo(t,e,!en(t))),pU=t=>Dn(t,e=>lo(t,e,en(t))),fU=t=>Dn(t,e=>Ye.cursor(t.lineBlockAt(e.head).from,1)),gU=t=>Dn(t,e=>Ye.cursor(t.lineBlockAt(e.head).to,-1));function yU(t,e,n){let r=!1,i=ps(t.selection,s=>{let o=bi(t,s.head,-1)||bi(t,s.head,1)||s.head>0&&bi(t,s.head-1,1)||s.head<t.doc.length&&bi(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?Ye.range(s.anchor,a):Ye.cursor(a)});return r?(e(Ii(t,i)),!0):!1}const bU=({state:t,dispatch:e})=>yU(t,e,!1);function Fn(t,e){let n=ps(t.state.selection,r=>{let i=e(r);return Ye.range(r.anchor,i.head,i.goalColumn)});return n.eq(t.state.selection)?!1:(t.dispatch(Ii(t.state,n)),!0)}function Fb(t,e){return Fn(t,n=>t.moveByChar(n,e))}const Yb=t=>Fb(t,!en(t)),Nb=t=>Fb(t,en(t));function Mb(t,e){return Fn(t,n=>t.moveByGroup(n,e))}const ZU=t=>Mb(t,!en(t)),IU=t=>Mb(t,en(t)),vU=t=>Fn(t,e=>Lc(t.state,e,!en(t))),GU=t=>Fn(t,e=>Lc(t.state,e,en(t)));function Eb(t,e){return Fn(t,n=>t.moveVertically(n,e))}const Hb=t=>Eb(t,!1),Kb=t=>Eb(t,!0);function Jb(t,e){return Fn(t,n=>t.moveVertically(n,e,Tb(t)))}const jb=t=>Jb(t,!1),Pb=t=>Jb(t,!0),RU=t=>Fn(t,e=>lo(t,e,!0)),SU=t=>Fn(t,e=>lo(t,e,!1)),WU=t=>Fn(t,e=>lo(t,e,!en(t))),VU=t=>Fn(t,e=>lo(t,e,en(t))),CU=t=>Fn(t,e=>Ye.cursor(t.lineBlockAt(e.head).from)),XU=t=>Fn(t,e=>Ye.cursor(t.lineBlockAt(e.head).to)),Ob=({state:t,dispatch:e})=>(e(Ii(t,{anchor:0})),!0),zb=({state:t,dispatch:e})=>(e(Ii(t,{anchor:t.doc.length})),!0),_b=({state:t,dispatch:e})=>(e(Ii(t,{anchor:t.selection.main.anchor,head:0})),!0),Db=({state:t,dispatch:e})=>(e(Ii(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),LU=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),xU=({state:t,dispatch:e})=>{let n=kc(t).map(({from:r,to:i})=>Ye.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Ye.create(n),userEvent:"select"})),!0},wU=({state:t,dispatch:e})=>{let n=ps(t.selection,r=>{var i;let s=jr(t).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||!(!((i=s.parent)===null||i===void 0)&&i.parent));)s=s.parent;return Ye.range(s.to,s.from)});return e(Ii(t,n)),!0},kU=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Ye.create([n.main]):n.main.empty||(r=Ye.create([Ye.cursor(n.main.head)])),r?(e(Ii(t,r)),!0):!1};function xc(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=wc(t,l,!1)):l>o&&(n="delete.forward",l=wc(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=wc(t,o,!1),a=wc(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:Ye.cursor(o)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?ot.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function wc(t,e,n){if(t instanceof ot)for(let r of t.state.facet(ot.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Qb=(t,e)=>xc(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),s,o;if(!e&&n>i.from&&n<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,n-i.from))){if(s[s.length-1]=="	")return n-1;let a=ia(s,r.tabSize),l=a%Bo(r)||Bo(r);for(let c=0;c<l&&s[s.length-1-c]==" ";c++)n--;o=n}else o=dn(i.text,n-i.from,e,e)+i.from,o==n&&i.number!=(e?r.doc.lines:1)&&(o+=e?1:-1);return o}),Lh=t=>Qb(t,!1),qb=t=>Qb(t,!0),$b=(t,e)=>xc(t,n=>{let r=n,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=dn(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),m=o(c);if(a!=null&&m!=a)break;(c!=" "||r!=n)&&(a=m),r=l}return r}),e1=t=>$b(t,!1),AU=t=>$b(t,!0),t1=t=>xc(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),TU=t=>xc(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),BU=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:At.of(["",""])},range:Ye.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},UU=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:dn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:dn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:Ye.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function kc(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function r1(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of kc(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(Ye.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(Ye.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Ye.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const FU=({state:t,dispatch:e})=>r1(t,e,!1),YU=({state:t,dispatch:e})=>r1(t,e,!0);function n1(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of kc(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const NU=({state:t,dispatch:e})=>n1(t,e,!1),MU=({state:t,dispatch:e})=>n1(t,e,!0),EU=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(kc(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=ps(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function HU(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=jr(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(xt.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const KU=i1(!1),JU=i1(!0);function i1(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&HU(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new Gc(e,{simulateBreak:s,simulateDoubleBreak:!!l}),m=mh(c,s);for(m==null&&(m=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let p=["",Ga(e,m)];return l&&p.push(Ga(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:At.of(p)},range:Ye.cursor(s+1+p[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function xh(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:Ye.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const jU=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Gc(t,{overrideIndentation:s=>{let o=n[s];return o==null?-1:o}}),i=xh(t,(s,o,a)=>{let l=mh(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],m=Ga(t,l);(c!=m||a.from<s.from+c.length)&&(n[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:m}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},o1=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(xh(t,(n,r)=>{r.push({from:n.from,insert:t.facet(hh)})}),{userEvent:"input.indent"})),!0),s1=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(xh(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=ia(i,t.tabSize),o=0,a=Ga(t,Math.max(0,s-Bo(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),PU=[{key:"Ctrl-b",run:Xb,shift:Yb,preventDefault:!0},{key:"Ctrl-f",run:Lb,shift:Nb},{key:"Ctrl-p",run:kb,shift:Hb},{key:"Ctrl-n",run:Ab,shift:Kb},{key:"Ctrl-a",run:fU,shift:CU},{key:"Ctrl-e",run:gU,shift:XU},{key:"Ctrl-d",run:qb},{key:"Ctrl-h",run:Lh},{key:"Ctrl-k",run:t1},{key:"Ctrl-Alt-h",run:e1},{key:"Ctrl-o",run:BU},{key:"Ctrl-t",run:UU},{key:"Ctrl-v",run:Xh}],OU=[{key:"ArrowLeft",run:Xb,shift:Yb,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:sU,shift:ZU,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:mU,shift:WU,preventDefault:!0},{key:"ArrowRight",run:Lb,shift:Nb,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:aU,shift:IU,preventDefault:!0},{mac:"Cmd-ArrowRight",run:pU,shift:VU,preventDefault:!0},{key:"ArrowUp",run:kb,shift:Hb,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ob,shift:_b},{mac:"Ctrl-ArrowUp",run:Ub,shift:jb},{key:"ArrowDown",run:Ab,shift:Kb,preventDefault:!0},{mac:"Cmd-ArrowDown",run:zb,shift:Db},{mac:"Ctrl-ArrowDown",run:Xh,shift:Pb},{key:"PageUp",run:Ub,shift:jb},{key:"PageDown",run:Xh,shift:Pb},{key:"Home",run:hU,shift:SU,preventDefault:!0},{key:"Mod-Home",run:Ob,shift:_b},{key:"End",run:dU,shift:RU,preventDefault:!0},{key:"Mod-End",run:zb,shift:Db},{key:"Enter",run:KU},{key:"Mod-a",run:LU},{key:"Backspace",run:Lh,shift:Lh},{key:"Delete",run:qb},{key:"Mod-Backspace",mac:"Alt-Backspace",run:e1},{key:"Mod-Delete",mac:"Alt-Delete",run:AU},{mac:"Mod-Backspace",run:TU},{mac:"Mod-Delete",run:t1}].concat(PU.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),zU=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cU,shift:vU},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:uU,shift:GU},{key:"Alt-ArrowUp",run:FU},{key:"Shift-Alt-ArrowUp",run:NU},{key:"Alt-ArrowDown",run:YU},{key:"Shift-Alt-ArrowDown",run:MU},{key:"Escape",run:kU},{key:"Mod-Enter",run:JU},{key:"Alt-l",mac:"Ctrl-l",run:xU},{key:"Mod-i",run:wU,preventDefault:!0},{key:"Mod-[",run:s1},{key:"Mod-]",run:o1},{key:"Mod-Alt-\\",run:jU},{key:"Shift-Mod-k",run:EU},{key:"Shift-Mod-\\",run:bU},{key:"Mod-/",run:MB},{key:"Alt-A",run:HB}].concat(OU),_U={key:"Tab",run:o1,shift:s1};function Pt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)a1(t,arguments[e]);return t}function a1(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)a1(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const l1=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class fs{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(l1(a)):l1,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Hr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=td(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Rn(e);let i=this.normalize(n);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(l)return this.value=l,this;if(s==i.length-1)break;o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(fs.prototype[Symbol.iterator]=function(){return this});const c1={from:-1,to:-1,match:/.*/.exec("")},wh="gm"+(/x/.unicode==null?"":"u");class u1{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=c1,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new d1(e,n,r,i,s);this.re=new RegExp(n,wh+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Ac(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Ac(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const kh=new WeakMap;class gs{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=kh.get(e);if(!i||i.from>=r||i.to<=n){let a=new gs(n,e.sliceString(n,r));return kh.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),kh.set(e,new gs(o,s)),new gs(n,s.slice(n-o,r-o))}}class d1{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=c1,this.matchPos=Ac(e,i),this.re=new RegExp(n,wh+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=gs.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Ac(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=gs.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(u1.prototype[Symbol.iterator]=d1.prototype[Symbol.iterator]=function(){return this});function DU(t){try{return new RegExp(t,wh),!0}catch{return!1}}function Ac(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Ah(t){let e=Pt("input",{class:"cm-textfield",name:"line"}),n=Pt("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:Tc.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},Pt("label",t.state.phrase("Go to line"),": ",e)," ",Pt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,c,m]=i,p=c?+c.slice(1):0,u=l?+l:o.number;if(l&&m){let h=u/100;a&&(h=h*(a=="-"?-1:1)+o.number/s.doc.lines),u=Math.round(s.doc.lines*h)}else l&&a&&(u=u*(a=="-"?-1:1)+o.number);let d=s.doc.line(Math.max(1,Math.min(s.doc.lines,u)));t.dispatch({effects:Tc.of(!1),selection:Ye.cursor(d.from+Math.max(0,Math.min(p,d.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const Tc=Zt.define(),h1=br.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Tc)&&(t=n.value);return t},provide:t=>ya.from(t,e=>e?Ah:null)}),QU=t=>{let e=ga(t,Ah);if(!e){let n=[Tc.of(!0)];t.state.field(h1,!1)==null&&n.push(Zt.appendConfig.of([h1,qU])),t.dispatch({effects:n}),e=ga(t,Ah)}return e&&e.dom.querySelector("input").focus(),!0},qU=ot.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),$U={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},m1=ct.define({combine(t){return ui(t,$U,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function eF(t){let e=[oF,iF];return t&&e.push(m1.of(t)),e}const tF=pt.mark({class:"cm-selectionMatch"}),rF=pt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function p1(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=nr.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=nr.Word)}function nF(t,e,n,r){return t(e.sliceDoc(n,n+1))==nr.Word&&t(e.sliceDoc(r-1,r))==nr.Word}const iF=Ir.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(m1),{state:n}=t,r=n.selection;if(r.ranges.length>1)return pt.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return pt.none;let l=n.wordAt(i.head);if(!l)return pt.none;o=n.charCategorizer(i.head),s=n.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return pt.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(p1(o,n,i.from,i.to)&&nF(o,n,i.from,i.to)))return pt.none}else if(s=n.sliceDoc(i.from,i.to).trim(),!s)return pt.none}let a=[];for(let l of t.visibleRanges){let c=new fs(n.doc,s,l.from,l.to);for(;!c.next().done;){let{from:m,to:p}=c.value;if((!o||p1(o,n,m,p))&&(i.empty&&m<=i.from&&p>=i.to?a.push(rF.range(m,p)):(m>=i.to||p<=i.from)&&a.push(tF.range(m,p)),a.length>e.maxMatches))return pt.none}}return pt.set(a)}},{decorations:t=>t.decorations}),oF=ot.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),sF=({state:t,dispatch:e})=>{let{selection:n}=t,r=Ye.create(n.ranges.map(i=>t.wordAt(i.head)||Ye.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function aF(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new fs(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new fs(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const lF=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return sF({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=aF(t,r);return i?(e(t.update({selection:t.selection.addRange(Ye.range(i.from,i.to),!1),effects:ot.scrollIntoView(i.to)})),!0):!1},Th=ct.define({combine(t){return ui(t,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new IF(e)})}});class f1{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||DU(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new hF(this):new uF(this)}getCursor(e,n=0,r){let i=e.doc?e:Lt.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?bs(this,i,n,r):ys(this,i,n,r)}}class g1{constructor(e){this.spec=e}}function ys(t,e,n,r){return new fs(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?cF(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function cF(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Bc(i,n-s))!=nr.Word||e(Uc(i,n-s))!=nr.Word)&&(e(Uc(i,r-s))!=nr.Word||e(Bc(i,r-s))!=nr.Word))}class uF extends g1{constructor(e){super(e)}nextMatch(e,n,r){let i=ys(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=ys(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=ys(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=ys(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=ys(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function bs(t,e,n,r){return new u1(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?dF(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Bc(t,e){return t.slice(dn(t,e,!1),e)}function Uc(t,e){return t.slice(e,dn(t,e))}function dF(t){return(e,n,r)=>!r[0].length||(t(Bc(r.input,r.index))!=nr.Word||t(Uc(r.input,r.index))!=nr.Word)&&(t(Uc(r.input,r.index+r[0].length))!=nr.Word||t(Bc(r.input,r.index+r[0].length))!=nr.Word)}class hF extends g1{nextMatch(e,n,r){let i=bs(this.spec,e,r,e.doc.length).next();return i.done&&(i=bs(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=bs(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n))}matchAll(e,n){let r=bs(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=bs(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Ca=Zt.define(),Bh=Zt.define(),co=br.define({create(t){return new Uh(Yh(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Ca)?t=new Uh(n.value.create(),t.panel):n.is(Bh)&&(t=new Uh(t.query,n.value?Fh:null));return t},provide:t=>ya.from(t,e=>e.panel)});class Uh{constructor(e,n){this.query=e,this.panel=n}}const mF=pt.mark({class:"cm-searchMatch"}),pF=pt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),fF=Ir.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(co))}update(t){let e=t.state.field(co);(e!=t.startState.field(co)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return pt.none;let{view:n}=this,r=new _i;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(c,m)=>{let p=n.state.selection.ranges.some(u=>u.from==c&&u.to==m);r.add(c,m,p?pF:mF)})}return r.finish()}},{decorations:t=>t.decorations});function Xa(t){return e=>{let n=e.state.field(co,!1);return n&&n.query.spec.valid?t(e,n):b1(e)}}const Fc=Xa((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);return r?(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Nh(t,r),userEvent:"select.search"}),!0):!1}),Yc=Xa((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);return i?(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Nh(t,i),userEvent:"select.search"}),!0):!1}),gF=Xa((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Ye.create(n.map(r=>Ye.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),yF=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new fs(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(Ye.range(a.value.from,a.value.to))}return e(t.update({selection:Ye.create(s,o),userEvent:"select.search.matches"})),!0},y1=Xa((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=[],a,l,c=[];if(s.from==r&&s.to==i&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),c.push(ot.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let m=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a={anchor:s.from-m,head:s.to-m},c.push(Nh(t,s))}return t.dispatch({changes:o,selection:a,scrollIntoView:!!a,effects:c,userEvent:"input.replace"}),!0}),bF=Xa((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:ot.announce.of(r),userEvent:"input.replace.all"}),!0});function Fh(t){return t.state.facet(Th).createPanel(t)}function Yh(t,e){var n,r,i,s;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let l=t.facet(Th);return new f1({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:l.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:l.literal,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:l.wholeWord})}const b1=t=>{let e=t.state.field(co,!1);if(e&&e.panel){let n=ga(t,Fh);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=t.root.activeElement){let i=Yh(t.state,e.query.spec);i.valid&&t.dispatch({effects:Ca.of(i)}),r.focus(),r.select()}}else t.dispatch({effects:[Bh.of(!0),e?Ca.of(Yh(t.state,e.query.spec)):Zt.appendConfig.of(GF)]});return!0},Z1=t=>{let e=t.state.field(co,!1);if(!e||!e.panel)return!1;let n=ga(t,Fh);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Bh.of(!1)}),!0},ZF=[{key:"Mod-f",run:b1,scope:"editor search-panel"},{key:"F3",run:Fc,shift:Yc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Fc,shift:Yc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Z1,scope:"editor search-panel"},{key:"Mod-Shift-l",run:yF},{key:"Alt-g",run:QU},{key:"Mod-d",run:lF,preventDefault:!0}];class IF{constructor(e){this.view=e;let n=this.query=e.state.field(co).query.spec;this.commit=this.commit.bind(this),this.searchField=Pt("input",{value:n.search,placeholder:Cn(e,"Find"),"aria-label":Cn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Pt("input",{value:n.replace,placeholder:Cn(e,"Replace"),"aria-label":Cn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Pt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Pt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Pt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return Pt("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Pt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Fc(e),[Cn(e,"next")]),r("prev",()=>Yc(e),[Cn(e,"previous")]),r("select",()=>gF(e),[Cn(e,"all")]),Pt("label",null,[this.caseField,Cn(e,"match case")]),Pt("label",null,[this.reField,Cn(e,"regexp")]),Pt("label",null,[this.wordField,Cn(e,"by word")]),...e.state.readOnly?[]:[Pt("br"),this.replaceField,r("replace",()=>y1(e),[Cn(e,"replace")]),r("replaceAll",()=>bF(e),[Cn(e,"replace all")])],Pt("button",{name:"close",onclick:()=>Z1(e),"aria-label":Cn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new f1({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ca.of(e)}))}keydown(e){UA(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Yc:Fc)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),y1(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Ca)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Th).top}}function Cn(t,e){return t.state.phrase(e)}const Nc=30,Mc=/[\s\.,:;?!]/;function Nh(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Nc),o=Math.min(i,n+Nc),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Nc;l++)if(!Mc.test(a[l+1])&&Mc.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Nc;l--)if(!Mc.test(a[l-1])&&Mc.test(a[l])){a=a.slice(0,l);break}}return ot.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const vF=ot.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),GF=[co,Co.lowest(fF),vF];class I1{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=jr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(R1(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function v1(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function RF(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=v1(e)+v1(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function SF(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:RF(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class G1{constructor(e,n,r){this.completion=e,this.source=n,this.match=r}}function uo(t){return t.selection.main.head}function R1(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const WF=zi.define();function VF(t,e,n,r){return Object.assign(Object.assign({},t.changeByRange(i=>{if(i==t.selection.main)return{changes:{from:n,to:r,insert:e},range:Ye.cursor(n+e.length)};let s=r-n;return!i.empty||s&&t.sliceDoc(i.from-s,i.from)!=t.sliceDoc(n,r)?{range:i}:{changes:{from:i.from-s,to:i.from,insert:e},range:Ye.cursor(i.from-s+e.length)}})),{userEvent:"input.complete"})}function S1(t,e){const n=e.completion.apply||e.completion.label;let r=e.source;typeof n=="string"?t.dispatch(Object.assign(Object.assign({},VF(t.state,n,r.from,r.to)),{annotations:WF.of(e.completion)})):n(t,e.completion,r.from,r.to)}const W1=new WeakMap;function CF(t){if(!Array.isArray(t))return t;let e=W1.get(t);return e||W1.set(t,e=SF(t)),e}class XF{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<e.length;){let r=Hr(e,n),i=Rn(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Hr(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let Z=Hr(e,0);return Z==n[0]?[0,0,Rn(Z)]:Z==r[0]?[-200,0,Rn(Z)]:null}let a=e.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=n.length,c=0;if(a<0){for(let Z=0,I=Math.min(e.length,200);Z<I&&c<l;){let G=Hr(e,Z);(G==n[c]||G==r[c])&&(i[c++]=Z),Z+=Rn(G)}if(c<l)return null}let m=0,p=0,u=!1,d=0,h=-1,f=-1,g=/[a-z]/.test(e),y=!0;for(let Z=0,I=Math.min(e.length,200),G=0;Z<I&&p<l;){let R=Hr(e,Z);a<0&&(m<l&&R==n[m]&&(s[m++]=Z),d<l&&(R==n[d]||R==r[d]?(d==0&&(h=Z),f=Z+1,d++):d=0));let C,V=R<255?R>=48&&R<=57||R>=97&&R<=122?2:R>=65&&R<=90?1:0:(C=td(R))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!Z||V==1&&g||G==0&&V!=0)&&(n[p]==R||r[p]==R&&(u=!0)?o[p++]=Z:o.length&&(y=!1)),G=V,Z+=Rn(R)}return p==l&&o[0]==0&&y?this.result(-100+(u?-200:0),o,e):d==l&&h==0?[-200-e.length,0,f]:a>-1?[-700-e.length,a,a+this.pattern.length]:d==l?[-200+-700-e.length,h,f]:p==l?this.result(-100+(u?-200:0)+-700+(y?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[e-r.length],s=1;for(let o of n){let a=o+(this.astral?Rn(Hr(r,o)):1);s>1&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return i}}const Yn=ct.define({combine(t){return ui(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,optionClass:(e,n)=>r=>LF(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function LF(t,e){return t?e?t+" "+e:t:e}function xF(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=n,a=0;for(let l=1;l<i.length;){let c=i[l++],m=i[l++];c>a&&s.appendChild(document.createTextNode(o.slice(a,c)));let p=s.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(o.slice(c,m))),p.className="cm-completionMatchedText",a=m}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function V1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class wF{constructor(e,n){this.view=e,this.stateField=n,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this},this.space=null;let r=e.state.field(n),{options:i,selected:s}=r.open,o=e.state.facet(Yn);this.optionContent=xF(o),this.optionClass=o.optionClass,this.range=V1(i.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let l=a.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<i.length){S1(e,i[+c[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var n,r,i;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=s.open)===null||i===void 0)&&i.disabled)))}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=V1(n.options.length,n.selected,this.view.state.facet(Yn).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>Wn(this.view.state,o,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(e),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&AF(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let h=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:h.innerWidth,bottom:h.innerHeight}}if(i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10)return null;let o=this.view.textDirection==sr.RTL,a=o,l=!1,c,m="",p="",u=n.left-s.left,d=s.right-n.right;if(a&&u<Math.min(r.width,d)?a=!1:!a&&d<Math.min(r.width,u)&&(a=!0),r.width<=(a?u:d))m=Math.max(s.top,Math.min(i.top,s.bottom-r.height))-n.top+"px",c=Math.min(400,a?u:d)+"px";else{l=!0,c=Math.min(400,(o?n.right:s.right-n.left)-30)+"px";let h=s.bottom-n.bottom;h>=r.height||h>n.top?m=i.bottom-n.top+"px":p=n.bottom-i.top+"px"}return{top:m,bottom:p,maxWidth:c,class:l?o?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=r.from;s<r.to;s++){let{completion:o,match:a}=e[s];const l=i.appendChild(document.createElement("li"));l.id=n+"-"+s,l.setAttribute("role","option");let c=this.optionClass(o);c&&(l.className=c);for(let m of this.optionContent){let p=m(o,this.view.state,a);p&&l.appendChild(p)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function kF(t){return e=>new wF(e,t)}function AF(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}function C1(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function TF(t,e){let n=[],r=0;for(let a of t)if(a.hasResult())if(a.result.filter===!1){let l=a.result.getMatch;for(let c of a.result.options){let m=[1e9-r++];if(l)for(let p of l(c))m.push(p);n.push(new G1(c,a,m))}}else{let l=new XF(e.sliceDoc(a.from,a.to)),c;for(let m of a.result.options)(c=l.match(m.label))&&(m.boost!=null&&(c[0]+=m.boost),n.push(new G1(m,a,c)))}let i=[],s=null,o=e.facet(Yn).compareCompletions;for(let a of n.sort((l,c)=>c.match[0]-l.match[0]||o(l.completion,c.completion)))!s||s.label!=a.completion.label||s.detail!=a.completion.detail||s.type!=null&&a.completion.type!=null&&s.type!=a.completion.type||s.apply!=a.completion.apply?i.push(a):C1(a.completion)>C1(s)&&(i[i.length-1]=a),s=a.completion;return i}class Zs{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Zs(this.options,X1(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s){let o=TF(e,n);if(!o.length)return i&&e.some(l=>l.state==1)?new Zs(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=n.facet(Yn).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new Zs(o,X1(r,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:kF(Nn),above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Zs(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Ec{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Ec(FF,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Yn),s=(r.override||n.languageDataAt("autocomplete",uo(n)).map(CF)).map(a=>(this.active.find(c=>c.source==a)||new Gn(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!BF(s,this.active)?o=Zs.build(s,n,this.id,this.open,r):o&&o.disabled&&!s.some(a=>a.state==1)?o=null:o&&e.docChanged&&(o=o.map(e.changes)),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Gn(a.source,0):a));for(let a of e.effects)a.is(x1)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Ec(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:UF}}function BF(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const UF={"aria-autocomplete":"list"};function X1(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const FF=[];function Mh(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Gn{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=Mh(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Gn(i.source,0));for(let s of e.effects)if(s.is(Eh))i=new Gn(i.source,1,s.value?uo(e.state):-1);else if(s.is(Hc))i=new Gn(i.source,0);else if(s.is(L1))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Gn(this.source,1)}handleChange(e){return e.changes.touchesRange(uo(e.startState))?new Gn(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Gn(this.source,this.state,e.mapPos(this.explicitPos))}}class La extends Gn{constructor(e,n,r,i,s){super(e,2,n),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,n,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=uo(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&uo(e.startState)==this.from)return new Gn(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return YF(this.result.validFor,e.state,s,o)?new La(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new I1(e.state,a,l>=0)))?new La(this.source,l,c,c.from,(i=c.to)!==null&&i!==void 0?i:uo(e.state)):new Gn(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Gn(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new La(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function YF(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):R1(t,!0).test(i)}const Eh=Zt.define(),Hc=Zt.define(),L1=Zt.define({map(t,e){return t.map(n=>n.map(e))}}),x1=Zt.define(),Nn=br.define({create(){return Ec.start()},update(t,e){return t.update(e)},provide:t=>[qd.from(t,e=>e.tooltip),ot.contentAttributes.from(t,e=>e.attrs)]});function Kc(t,e="option"){return n=>{let r=n.state.field(Nn,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Yn).interactionDelay)return!1;let i=1,s;e=="page"&&(s=RT(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:x1.of(a)}),!0}}const NF=t=>{let e=t.state.field(Nn,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<t.state.facet(Yn).interactionDelay?!1:(e.open.disabled||S1(t,e.open.options[e.open.selected]),!0)},MF=t=>t.state.field(Nn,!1)?(t.dispatch({effects:Eh.of(!0)}),!0):!1,EF=t=>{let e=t.state.field(Nn,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Hc.of(null)}),!0)};class HF{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const w1=50,KF=50,JF=1e3,jF=Ir.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(Nn).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(Nn);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Nn)==e)return;let n=t.transactions.some(r=>(r.selection||r.docChanged)&&!Mh(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(n||i.updates.length+t.transactions.length>KF&&Date.now()-i.time>JF){for(let s of i.context.abortListeners)try{s()}catch(o){Wn(this.view.state,o)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),w1):-1,this.composing!=0)for(let r of t.transactions)Mh(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(Nn);for(let n of e.active)n.state==1&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n)}startQuery(t){let{state:e}=this.view,n=uo(e),r=new I1(e,n,t.explicitPos==n),i=new HF(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Hc.of(null)}),Wn(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),w1))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Yn);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new La(i.active.source,i.active.explicitPos,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:uo(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)o=o.update(a,n);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(Nn).active.find(o=>o.source==i.active.source);if(s&&s.state==1)if(i.done==null){let o=new Gn(i.active.source,0);for(let a of i.updates)o=o.update(a,n);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:L1.of(e)})}},{eventHandlers:{blur(){let t=this.view.state.field(Nn,!1);t&&t.tooltip&&this.view.state.facet(Yn).closeOnBlur&&this.view.dispatch({effects:Hc.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Eh.of(!1)}),20),this.composing=0}}}),PF=ot.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),xa={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Fo=Zt.define({map(t,e){let n=e.mapPos(t,-1,hn.TrackAfter);return n==null?void 0:n}}),Hh=Zt.define({map(t,e){return e.mapPos(t)}}),Kh=new class extends Lo{};Kh.startSide=1,Kh.endSide=-1;const k1=br.define({create(){return Yt.empty},update(t,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(r,-1)&&(t=Yt.empty)}t=t.map(e.changes);for(let n of e.effects)n.is(Fo)?t=t.update({add:[Kh.range(n.value,n.value+1)]}):n.is(Hh)&&(t=t.update({filter:r=>r!=n.value}));return t}});function OF(){return[_F,k1]}const Jh="()[]{}<>";function A1(t){for(let e=0;e<Jh.length;e+=2)if(Jh.charCodeAt(e)==t)return Jh.charAt(e+1);return td(t<128?t:t+1)}function T1(t,e){return t.languageDataAt("closeBrackets",e)[0]||xa}const zF=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),_F=ot.inputHandler.of((t,e,n,r)=>{if((zF?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Rn(Hr(r,0))==1||e!=i.from||n!=i.to)return!1;let s=QF(t.state,r);return s?(t.dispatch(s),!0):!1}),DF=[{key:"Backspace",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=T1(t,t.selection.main.head).brackets||xa.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=qF(t.doc,o.head);for(let l of r)if(l==a&&Jc(t.doc,o.head)==A1(Hr(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:Ye.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function QF(t,e){let n=T1(t,t.selection.main.head),r=n.brackets||xa.brackets;for(let i of r){let s=A1(Hr(i,0));if(e==i)return s==i?tY(t,i,r.indexOf(i+i+i)>-1,n):$F(t,i,s,n.before||xa.before);if(e==s&&B1(t,t.selection.main.from))return eY(t,i,s)}return null}function B1(t,e){let n=!1;return t.field(k1).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function Jc(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Rn(Hr(n,0)))}function qF(t,e){let n=t.sliceString(e-2,e);return Rn(Hr(n,0))==n.length?n:n.slice(1)}function $F(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Fo.of(o.to+e.length),range:Ye.range(o.anchor+e.length,o.head+e.length)};let a=Jc(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:Fo.of(o.head+e.length),range:Ye.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function eY(t,e,n){let r=null,i=t.selection.ranges.map(s=>s.empty&&Jc(t.doc,s.head)==n?Ye.cursor(s.head+n.length):r=s);return r?null:t.update({selection:Ye.create(i,t.selection.mainIndex),scrollIntoView:!0,effects:t.selection.ranges.map(({from:s})=>Hh.of(s))})}function tY(t,e,n,r){let i=r.stringPrefixes||xa.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Fo.of(a.to+e.length),range:Ye.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=Jc(t.doc,l),m;if(c==e){if(U1(t,l))return{changes:{insert:e+e,from:l},effects:Fo.of(l+e.length),range:Ye.cursor(l+e.length)};if(B1(t,l)){let p=n&&t.sliceDoc(l,l+e.length*3)==e+e+e;return{range:Ye.cursor(l+e.length*(p?3:1)),effects:Hh.of(l)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(m=F1(t,l-2*e.length,i))>-1&&U1(t,m))return{changes:{insert:e+e+e+e,from:l},effects:Fo.of(l+e.length),range:Ye.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=nr.Word&&F1(t,l,i)>-1&&!rY(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Fo.of(l+e.length),range:Ye.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function U1(t,e){let n=jr(t).resolveInner(e+1);return n.parent&&n.from==e}function rY(t,e,n,r){let i=jr(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let m=i.firstChild;for(;m&&m.from==i.from&&m.to-m.from>n.length+l;){if(t.sliceDoc(m.to-n.length,m.to)==n)return!1;m=m.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function F1(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=nr.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=nr.Word)return s}return-1}function nY(t={}){return[Nn,Yn.of(t),jF,iY,PF]}const Y1=[{key:"Ctrl-Space",run:MF},{key:"Escape",run:EF},{key:"ArrowDown",run:Kc(!0)},{key:"ArrowUp",run:Kc(!1)},{key:"PageDown",run:Kc(!0,"page")},{key:"PageUp",run:Kc(!1,"page")},{key:"Enter",run:NF}],iY=Co.highest(ma.computeN([Yn],t=>t.facet(Yn).defaultKeymap?[Y1]:[]));class oY{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Yo{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,s=r.facet(vs).markerFilter;s&&(i=s(i));let o=pt.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?pt.widget({widget:new pY(a),diagnostic:a}).range(a.from):pt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new Yo(o,n,Is(o))}}function Is(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new oY(i,s,o.diagnostic),!1}),r}function sY(t,e){return!!(t.effects.some(n=>n.is(jh))||t.changes.touchesRange(e.pos))}function N1(t,e){return t.field(Xn,!1)?e:e.concat(Zt.appendConfig.of([Xn,ot.decorations.compute([Xn],n=>{let{selected:r,panel:i}=n.field(Xn);return!r||!i||r.from==r.to?pt.none:pt.set([lY.range(r.from,r.to)])}),GT(cY,{hideOn:sY}),gY]))}function aY(t,e){return{effects:N1(t,[jh.of(e)])}}const jh=Zt.define(),Ph=Zt.define(),M1=Zt.define(),Xn=br.define({create(){return new Yo(pt.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=Is(n,t.selected.diagnostic,i)||Is(n,null,i)}t=new Yo(n,t.panel,r)}for(let n of e.effects)n.is(jh)?t=Yo.init(n.value,t.panel,e.state):n.is(Ph)?t=new Yo(t.diagnostics,n.value?jc.open:null,t.selected):n.is(M1)&&(t=new Yo(t.diagnostics,t.panel,n.value));return t},provide:t=>[ya.from(t,e=>e.panel),ot.decorations.from(t,e=>e.diagnostics)]}),lY=pt.mark({class:"cm-lintRange cm-lintRange-active"});function cY(t,e,n){let{diagnostics:r}=t.state.field(Xn),i=[],s=2e8,o=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:m})=>{e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0))&&(i.push(m.diagnostic),s=Math.min(l,s),o=Math.max(c,o))});let a=t.state.facet(vs).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:uY(t,i)}}}:null}function uY(t,e){return Pt("ul",{class:"cm-tooltip-lint"},e.map(n=>K1(t,n,!1)))}const dY=t=>{let e=t.state.field(Xn,!1);(!e||!e.panel)&&t.dispatch({effects:N1(t.state,[Ph.of(!0)])});let n=ga(t,jc.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},E1=t=>{let e=t.state.field(Xn,!1);return!e||!e.panel?!1:(t.dispatch({effects:Ph.of(!1)}),!0)},hY=[{key:"Mod-Shift-m",run:dY,preventDefault:!0},{key:"F8",run:t=>{let e=t.state.field(Xn,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],mY=Ir.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(vs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(vs);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(aY(this.view.state,i))},r=>{Wn(this.view.state,r)})}}update(t){let e=t.state.facet(vs);(t.docChanged||e!=t.startState.facet(vs))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),vs=ct.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},ui(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:mY});function H1(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function K1(t,e,n){var r;let i=n?H1(e.actions):[];return Pt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Pt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=p=>{p.preventDefault();let u=Is(t.state.field(Xn).diagnostics,e);u&&s.apply(t,u.from,u.to)},{name:l}=s,c=i[o]?l.indexOf(i[o]):-1,m=c<0?l:[l.slice(0,c),Pt("u",l.slice(c,c+1)),l.slice(c+1)];return Pt("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${c<0?"":` (access key "${i[o]})"`}.`},m)}),e.source&&Pt("div",{class:"cm-diagnosticSource"},e.source))}class pY extends eo{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Pt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class J1{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=K1(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class jc{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)E1(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=H1(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Is(this.view.state.field(Xn).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Pt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Pt("div",{class:"cm-panel-lint"},this.list,Pt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>E1(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Xn).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Xn),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,m;for(let p=r;p<this.items.length;p++)if(this.items[p].diagnostic==l.diagnostic){c=p;break}c<0?(m=new J1(this.view,l.diagnostic),this.items.splice(r,0,m),i=!0):(m=this.items[c],c>r&&(this.items.splice(r,c-r),i=!0)),n&&m.diagnostic==n.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),s=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new J1(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Xn),r=Is(n.diagnostics,this.items[e].diagnostic);!r||this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:M1.of(r)})}static open(e){return new jc(e)}}function fY(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Oh(t){return fY(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const gY=ot.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Oh("#d11")},".cm-lintRange-warning":{backgroundImage:Oh("orange")},".cm-lintRange-info":{backgroundImage:Oh("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),yY=(()=>[kT(),BT(),eT(),DB(),IB(),EA(),zA(),Lt.allowMultipleSelections.of(!0),cB(),cb(SB,{fallback:!0}),xB(),OF(),nY(),hT(),fT(),sT(),eF(),ma.of([...DF,...zU,...ZF,...oU,...yB,...Y1,...hY])])(),bY="#e5c07b",j1="#e06c75",ZY="#56b6c2",IY="#ffffff",Pc="#abb2bf",zh="#7d8799",vY="#61afef",GY="#98c379",P1="#d19a66",RY="#c678dd",SY="#21252b",O1="#2c313a",z1="#282c34",_h="#353a42",WY="#3E4451",_1="#528bff",VY=ot.theme({"&":{color:Pc,backgroundColor:z1},".cm-content":{caretColor:_1},".cm-cursor, .cm-dropCursor":{borderLeftColor:_1},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:WY},".cm-panels":{backgroundColor:SY,color:Pc},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:z1,color:zh,border:"none"},".cm-activeLineGutter":{backgroundColor:O1},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:_h},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:_h,borderBottomColor:_h},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:O1,color:Pc}}},{dark:!0}),CY=Sa.define([{tag:Be.keyword,color:RY},{tag:[Be.name,Be.deleted,Be.character,Be.propertyName,Be.macroName],color:j1},{tag:[Be.function(Be.variableName),Be.labelName],color:vY},{tag:[Be.color,Be.constant(Be.name),Be.standard(Be.name)],color:P1},{tag:[Be.definition(Be.name),Be.separator],color:Pc},{tag:[Be.typeName,Be.className,Be.number,Be.changed,Be.annotation,Be.modifier,Be.self,Be.namespace],color:bY},{tag:[Be.operator,Be.operatorKeyword,Be.url,Be.escape,Be.regexp,Be.link,Be.special(Be.string)],color:ZY},{tag:[Be.meta,Be.comment],color:zh},{tag:Be.strong,fontWeight:"bold"},{tag:Be.emphasis,fontStyle:"italic"},{tag:Be.strikethrough,textDecoration:"line-through"},{tag:Be.link,color:zh,textDecoration:"underline"},{tag:Be.heading,fontWeight:"bold",color:j1},{tag:[Be.atom,Be.bool,Be.special(Be.variableName)],color:P1},{tag:[Be.processingInstruction,Be.string,Be.inserted],color:GY},{tag:Be.invalid,color:IY}]),D1=[VY,cb(CY)],XY=pt.mark({class:"cm-editable",inclusive:!0}),LY=pt.mark({class:"cm-not-editable"}),xY=pt.mark({class:"cm-editable-before"}),wY=pt.mark({class:"cm-editable-after"}),Dh=ot.baseTheme({"&light .cm-editable":{borderTop:"1px solid blue",borderBottom:"1px solid blue"},"&dark .cm-editable":{borderTop:"1px solid yellow",borderBottom:"1px solid yellow",backgroundColor:"rgb(25, 28, 33, 0.3)"},"&light .cm-editable-before":{borderRight:"2px solid blue"},"&light .cm-editable-after":{borderLeft:"2px solid blue"},"&dark .cm-editable-before":{borderRight:"2px solid yellow"},"&dark .cm-editable-after":{borderLeft:"2px solid yellow"},"&light .cm-not-editable":{backgroundColor:"rgb(50, 50, 50, 0.07)",cursor:"not-allowed"},"&dark .cm-not-editable":{backgroundColor:"rgb(200, 200, 200, 0.07)",cursor:"not-allowed"}}),Q1=Zt.define(),q1=Zt.define(),$1=Zt.define(),eZ=Zt.define(),Qh=br.define({create(){return pt.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(Q1)&&(t=t.update({add:[XY.range(n.value.from,n.value.to)]}));return t},provide:t=>ot.decorations.from(t)}),tZ=br.define({create(){return pt.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(eZ)&&(t=t.update({add:[LY.range(n.value.from,n.value.to)]}));return t},provide:t=>ot.decorations.from(t)}),rZ=br.define({create(){return pt.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(q1)?t=t.update({add:[xY.range(n.value.from,n.value.to)]}):n.is($1)&&(t=t.update({add:[wY.range(n.value.from,n.value.to)]}));return t},provide:t=>ot.decorations.from(t)});function nZ(){return Lt.transactionFilter.of(t=>{let e=t.startState.field(Qh,!1);if(e&&t.docChanged&&!t.annotation(Zr.remote)){let n=!1;if(t.changes.iterChangedRanges((r,i)=>{e.between(r,i,(s,o)=>{if(r>=s&&i<=o)n=!0;else if(r<=s&&i>=s&&t.newDoc.toString().indexOf("<EDITABLE>")!=-1){let a=t.newDoc.toString(),l=a.substring(a.indexOf("<EDITABLE>",s)+10,a.indexOf("</EDITABLE>",s));l.length<o-s&&(l+="".repeat(o-l.length-s)),t=t.startState.update({changes:{from:s,to:o,insert:l}}),n=!0}})}),!n)return[]}return t})}function iZ(t,e,n){let r=[Q1.of({from:e,to:n})];if(!r.length)return!1;t.state.field(Qh,!1)||r.push(Zt.appendConfig.of([Qh,Dh]));let i=[q1.of({from:e-1,to:e}),$1.of({from:n,to:n+1})];return t.state.field(rZ,!1)||i.push(Zt.appendConfig.of([rZ,Dh])),t.dispatch({effects:i}),t.dispatch({effects:r}),!0}function Oc(t,e,n){let r=[eZ.of({from:e,to:n})];return r.length?(t.state.field(tZ,!1)||r.push(Zt.appendConfig.of([tZ,Dh])),t.dispatch({effects:r}),!0):!1}function kY(t,e,n=!1,r=""){console.log("Creating editor for element",t);let i=new Xo,s=new Xo,o=new Xo,a=[yY,ot.lineWrapping,e,i.of([]),o.of(n?D1:[]),Co.highest(ma.of([{key:"Ctrl-Enter",run:()=>(t.dispatchEvent(new CustomEvent("execute")),!0)}])),ot.updateListener.of(p=>{p.docChanged&&t.dispatchEvent(new CustomEvent("changedcode",{detail:{content:p.state.doc.toString()},bubbles:!0,cancelable:!0,composed:!0}))})],l=[],c=[];if(r.includes("<EDITABLE>")){a.push(s.of([nZ()]));let p=0,u=new RegExp("(?<=<EDITABLE>)(.|\\n)*?(?=<\\/EDITABLE>)","gm"),d,h=0;for(;(d=u.exec(r))!==null;){p++,l.push({from:d.index-10*p-11*(p-1),to:d.index+d[0].length-10*p-11*(p-1)});const f=d.index-10*p-11*(p-1);c.push({from:h,to:f}),h=d.index+d[0].length-10*p-11*(p-1)}r=r.replace(/<EDITABLE>/gm,"").replace(/<\/EDITABLE>/gm,"")}let m=new ot({state:Lt.create({doc:r,extensions:a}),parent:t});return c.length>0&&c.forEach(p=>{Oc(m,p.from,p.to)}),l.length>0&&(l.forEach(p=>{iZ(m,p.from,p.to)}),Oc(m,l[l.length-1].to,r.length)),{editor:m,tabsConfiguration:i,editableFilterConfiguration:s,darkModeConfiguration:o}}function AY(t,e,n){t.dispatch({effects:e.reconfigure(n?ma.of([_U]):[])})}function TY(t,e,n){t.dispatch({effects:e.reconfigure(n?D1:[])})}function BY(t,e,n,r){if(t.dispatch({effects:e.reconfigure(r?nZ():[])}),r){let i=[],s=[],o=0,a=new RegExp("(?<=<EDITABLE>)(.|\\n)*?(?=<\\/EDITABLE>)","gm"),l,c=0;for(;(l=a.exec(n))!==null;){o++,i.push({from:l.index-10*o-11*(o-1),to:l.index+l[0].length-10*o-11*(o-1)});const m=l.index-10*o-11*(o-1);s.push({from:c,to:m}),c=l.index+l[0].length-10*o-11*(o-1)}n=n.replace(/<EDITABLE>/gm,"").replace(/<\/EDITABLE>/gm,""),s.length>0&&s.forEach(m=>{Oc(t,m.from,m.to)}),i.length>0&&(i.forEach(m=>{iZ(t,m.from,m.to)}),Oc(t,i[i.length-1].to,n.length)),t.dispatch({changes:[{from:0,to:t.state.doc.length,insert:n}]})}else t.dispatch({changes:[{from:0,to:t.state.doc.length,insert:n.replace(/<EDITABLE>/gm,"").replace(/<\/EDITABLE>/gm,"")}]})}function UY(t){let e,n,r,i,s,o,a,l,c,m,p,u,d,h,f,g,y,Z,I,G;return{c(){e=Wt("div"),n=Wt("div"),r=Wt("input"),i=Yr(),s=Wt("label"),s.innerHTML='<svg class="settings" style="width: min(0.8vw, 1.6vh); height: min(0.8vw, 1.6vh)" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.20442 13.6177H5.7956C5.64467 13.6177 5.49827 13.5661 5.38067 13.4715C5.26308 13.3769 5.18135 13.2449 5.14905 13.0975L4.87972 11.8507C4.52042 11.6933 4.17972 11.4964 3.86391 11.2638L2.64825 11.6509C2.50435 11.6968 2.34909 11.6921 2.20825 11.6375C2.06741 11.583 1.94946 11.4819 1.87398 11.3511L0.666921 9.26589C0.592238 9.13495 0.564204 8.98254 0.587405 8.83359C0.610607 8.68465 0.68367 8.54798 0.794642 8.44596L1.73766 7.58567C1.69477 7.19596 1.69477 6.80273 1.73766 6.41302L0.794642 5.55471C0.683513 5.45265 0.61035 5.31587 0.587145 5.16677C0.56394 5.01768 0.592069 4.86513 0.666921 4.73412L1.87133 2.64758C1.94681 2.51676 2.06476 2.41569 2.2056 2.36116C2.34645 2.30663 2.50171 2.30191 2.6456 2.3478L3.86126 2.73493C4.02273 2.61581 4.19082 2.50464 4.3642 2.40405C4.53163 2.31008 4.70369 2.22471 4.87972 2.14861L5.14972 0.903167C5.18186 0.755725 5.26343 0.623696 5.3809 0.528972C5.49837 0.434247 5.64469 0.382517 5.7956 0.382359H8.20442C8.35533 0.382517 8.50165 0.434247 8.61912 0.528972C8.73659 0.623696 8.81816 0.755725 8.85031 0.903167L9.12295 2.14927C9.48179 2.30761 9.82239 2.50442 10.1388 2.73626L11.3551 2.34912C11.4989 2.30341 11.654 2.30821 11.7947 2.36273C11.9354 2.41725 12.0532 2.51822 12.1287 2.6489L13.3331 4.73545C13.4866 5.00479 13.4337 5.3456 13.2054 5.55537L12.2624 6.41567C12.3052 6.80537 12.3052 7.19861 12.2624 7.58832L13.2054 8.44861C13.4337 8.65905 13.4866 8.9992 13.3331 9.26854L12.1287 11.3551C12.0532 11.4859 11.9353 11.587 11.7944 11.6415C11.6536 11.696 11.4983 11.7007 11.3544 11.6549L10.1388 11.2677C9.82319 11.5002 9.48271 11.6969 9.12361 11.8541L8.85031 13.0975C8.81803 13.2448 8.73641 13.3767 8.61895 13.4713C8.50148 13.5659 8.35524 13.6175 8.20442 13.6177V13.6177ZM6.99736 4.35295C6.29532 4.35295 5.62203 4.63183 5.12561 5.12825C4.62919 5.62467 4.3503 6.29796 4.3503 7.00001C4.3503 7.70205 4.62919 8.37534 5.12561 8.87176C5.62203 9.36818 6.29532 9.64707 6.99736 9.64707C7.69941 9.64707 8.3727 9.36818 8.86912 8.87176C9.36554 8.37534 9.64442 7.70205 9.64442 7.00001C9.64442 6.29796 9.36554 5.62467 8.86912 5.12825C8.3727 4.63183 7.69941 4.35295 6.99736 4.35295V4.35295Z" fill="white"></path></svg>',o=Yr(),a=Wt("div"),a.innerHTML='<svg style="width: min(0.62vw, 1.24vh); height: min(0.72vw, 1.44vh);" viewBox="0 0 12 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.0625 0.682514C10.0625 0.592517 10.0447 0.503409 10.0101 0.420318C9.97556 0.337227 9.92489 0.261794 9.86105 0.19836C9.79721 0.134927 9.72146 0.0847456 9.63815 0.0507051C9.55484 0.0166647 9.46562 -0.000562877 9.37562 1.40238e-05H0.686875C0.59688 -0.000562877 0.50766 0.0166647 0.42435 0.0507051C0.341039 0.0847456 0.265284 0.134927 0.201444 0.19836C0.137604 0.261794 0.0869395 0.337227 0.0523675 0.420318C0.0177954 0.503409 -1.84891e-06 0.592517 1.44068e-10 0.682514V11.5675C-1.84891e-06 11.6575 0.0177954 11.7466 0.0523675 11.8297C0.0869395 11.9128 0.137604 11.9882 0.201444 12.0517C0.265284 12.1151 0.341039 12.1653 0.42435 12.1993C0.50766 12.2334 0.59688 12.2506 0.686875 12.25H0.914375V0.905639H10.0625V0.682514Z" fill="white"></path><path d="M11.1562 1.75H2.40625C2.04381 1.75 1.75 2.04381 1.75 2.40625V13.3437C1.75 13.7062 2.04381 14 2.40625 14H11.1562C11.5187 14 11.8125 13.7062 11.8125 13.3437V2.40625C11.8125 2.04381 11.5187 1.75 11.1562 1.75Z" fill="white"></path></svg>',l=Yr(),c=Wt("div"),m=xr("svg"),p=xr("path"),u=Yr(),d=Wt("div"),d.innerHTML='<svg style="width: min(0.65vw, 1.3vh); height: min(0.65vw, 1.3vh)" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.48807 1.0568e-05C4.75119 0.00312952 3.17418 0.687569 2.00989 1.80022L1.07384 0.86417C0.677546 0.46788 0 0.748533 0 1.30895V4.82259C0 5.17 0.281623 5.45162 0.629032 5.45162H4.14268C4.70309 5.45162 4.98374 4.77408 4.58748 4.37779L3.49323 3.28353C4.30216 2.5261 5.3489 2.10653 6.46095 2.09694C8.88267 2.07603 10.924 4.03586 10.9031 6.53796C10.8832 8.91154 8.95889 10.9032 6.5 10.9032C5.42207 10.9032 4.4033 10.5185 3.60042 9.81407C3.47611 9.70501 3.28837 9.71164 3.17142 9.82856L2.1319 10.8681C2.0042 10.9958 2.01052 11.204 2.14453 11.325C3.29712 12.3661 4.82452 13 6.5 13C10.0898 13 13 10.0899 13 6.50006C13 2.91434 10.0738 -0.0064108 6.48807 1.0568e-05Z" fill="white"></path></svg>',h=Yr(),f=Wt("div"),g=Wt("div"),y=Wt("span"),this.c=Tt,Te(r,"type","checkbox"),Te(r,"class","menu-open"),Te(r,"name","menu-open"),Te(r,"id","menu-open"),Te(s,"id","settings-button"),Te(s,"class","settings-button"),Te(s,"for","menu-open"),Te(a,"class","menu-item"),tt(a,"background-color","#00CC3D"),Te(p,"d","M14 0.7C14 0.514348 13.9263 0.336301 13.795 0.205025C13.6637 0.0737497 13.4857 0 13.3 0C13.1143 0 12.9363 0.0737497 12.805 0.205025C12.6738 0.336301 12.6 0.514348 12.6 0.7V10.5C12.6 10.6857 12.6738 10.8637 12.805 10.995C12.9363 11.1262 13.1143 11.2 13.3 11.2C13.4857 11.2 13.6637 11.1262 13.795 10.995C13.9263 10.8637 14 10.6857 14 10.5V0.7ZM6.09467 0.205333C5.96197 0.0816851 5.78646 0.0143704 5.60511 0.01757C5.42377 0.0207697 5.25074 0.094234 5.12249 0.222486C4.99423 0.350738 4.92077 0.523765 4.91757 0.705112C4.91437 0.88646 4.98169 1.06197 5.10533 1.19467L8.81067 4.9H0.7C0.514348 4.9 0.336301 4.97375 0.205025 5.10503C0.0737497 5.2363 0 5.41435 0 5.6C0 5.78565 0.0737497 5.9637 0.205025 6.09497C0.336301 6.22625 0.514348 6.3 0.7 6.3H8.81067L5.10533 10.0053C5.03656 10.0694 4.9814 10.1467 4.94314 10.2326C4.90488 10.3184 4.88431 10.4111 4.88265 10.5051C4.88099 10.5991 4.89828 10.6925 4.93349 10.7796C4.96869 10.8668 5.02109 10.946 5.08756 11.0124C5.15404 11.0789 5.23321 11.1313 5.32038 11.1665C5.40754 11.2017 5.5009 11.219 5.59489 11.2174C5.68888 11.2157 5.78157 11.1951 5.86744 11.1569C5.9533 11.1186 6.03058 11.0634 6.09467 10.9947L10.9947 6.09467C11.1258 5.96342 11.1994 5.7855 11.1994 5.6C11.1994 5.4145 11.1258 5.23658 10.9947 5.10533L6.09467 0.205333Z"),Te(p,"fill","white"),tt(m,"width","min(0.72vw, 1.44vh)"),tt(m,"height","min(0.62vw, 1.24vh)"),Te(m,"viewBox","0 0 14 12"),Te(m,"fill","none"),Te(m,"xmlns","http://www.w3.org/2000/svg"),Te(c,"class","menu-item"),tt(c,"background-color",t[9]?"#00cc3d":"#ff4133"),Te(d,"class","menu-item"),tt(d,"background-color","#ff4133"),Te(y,"class",Z="lock "+(t[10]?"":"unlocked")),Te(g,"class","container"),Te(f,"class","menu-item"),Te(f,"style",I="background-color: "+(t[10]?"#ff4133":"#00cc3d")+"; "+(!t[2]||!t[2].get(t[1].state)?"display: none !important":"")),Te(n,"class","menu"),Te(e,"id","settings-container"),Te(e,"style",G=t[0]=="vertical"?"right: calc(var(--output-height) + min(0.7vw, 1.4vh) + 1px); bottom: min(4.5vw, 9vh)":"right: min(0.4vw, 0.8vh); bottom: calc(var(--output-height) + min(4.7vw, 9.4vh))")},m(R,C){Ut(R,e,C),ft(e,n),ft(n,r),t[13](r),ft(n,i),ft(n,s),ft(n,o),ft(n,a),t[14](a),ft(n,l),ft(n,c),ft(c,m),ft(m,p),t[15](c),ft(n,u),ft(n,d),t[16](d),ft(n,h),ft(n,f),ft(f,g),ft(g,y),t[17](f),t[18](e)},p(R,[C]){C&512&&tt(c,"background-color",R[9]?"#00cc3d":"#ff4133"),C&1024&&Z!==(Z="lock "+(R[10]?"":"unlocked"))&&Te(y,"class",Z),C&1030&&I!==(I="background-color: "+(R[10]?"#ff4133":"#00cc3d")+"; "+(!R[2]||!R[2].get(R[1].state)?"display: none !important":""))&&Te(f,"style",I),C&1&&G!==(G=R[0]=="vertical"?"right: calc(var(--output-height) + min(0.7vw, 1.4vh) + 1px); bottom: min(4.5vw, 9vh)":"right: min(0.4vw, 0.8vh); bottom: calc(var(--output-height) + min(4.7vw, 9.4vh))")&&Te(e,"style",G)},i:Tt,o:Tt,d(R){R&&ur(e),t[13](null),t[14](null),t[15](null),t[16](null),t[17](null),t[18](null)}}}function FY(t,e,n){let{type:r="normal"}=e,{editor:i}=e,{tabsconf:s}=e,{editableconf:o}=e,{code:a}=e,l,c,m,p,u,d,h=!1,f=!0;function g(V){const x=new CustomEvent("showmsg",{detail:V,bubbles:!0,cancelable:!0,composed:!0});l==null||l.dispatchEvent(x)}Ls(()=>{m.addEventListener("click",V=>{var x=i.state.doc.toString();navigator.clipboard.writeText(x),c.click(),g("Text Copied!")}),p.addEventListener("click",V=>{n(9,h=!h),AY(i,s,h),c.click(),g(h?"Tabs handling enabled":"Tabs handling disabled")}),u.addEventListener("click",V=>{i.dispatch({changes:[{from:0,to:i.state.doc.length,insert:f?a:a.replaceAll("<EDITABLE>","").replaceAll("</EDITABLE>","")}]}),c.click(),g("Code reset!")}),d.addEventListener("click",V=>{u.click(),n(10,f=!f),BY(i,o,a,f),g(f?"Text locked":"Text unlocked")})});function y(V){Sr[V?"unshift":"push"](()=>{c=V,n(4,c)})}function Z(V){Sr[V?"unshift":"push"](()=>{m=V,n(5,m)})}function I(V){Sr[V?"unshift":"push"](()=>{p=V,n(6,p)})}function G(V){Sr[V?"unshift":"push"](()=>{u=V,n(7,u)})}function R(V){Sr[V?"unshift":"push"](()=>{d=V,n(8,d)})}function C(V){Sr[V?"unshift":"push"](()=>{l=V,n(3,l)})}return t.$$set=V=>{"type"in V&&n(0,r=V.type),"editor"in V&&n(1,i=V.editor),"tabsconf"in V&&n(11,s=V.tabsconf),"editableconf"in V&&n(2,o=V.editableconf),"code"in V&&n(12,a=V.code)},[r,i,o,l,c,m,p,u,d,h,f,s,a,y,Z,I,G,R,C]}class YY extends Vi{constructor(e){super(),this.shadowRoot.innerHTML='<style>#settings-container{position:absolute;z-index:10}#settings-button{transition:all ease-in 150ms;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;box-shadow:2px -7px 17px -5px rgba(0, 0, 0, 0.35)}.menu-item,.settings-button{cursor:pointer;background:#5f5f5f;border-radius:100%;width:min(1.85vw, 3.7vh);height:min(1.85vw, 3.7vh);margin-left:max(-1.85vw, -3.7vh);position:absolute;transition:all ease-in-out 200ms;display:flex;align-items:center;justify-content:center}.menu-open{display:none}.menu-item:nth-child(3){transition-duration:70ms}.menu-item:nth-child(4){transition-duration:130ms}.menu-item:nth-child(5){transition-duration:190ms}.menu-item:nth-child(6){transition-duration:250ms}.settings-button{z-index:2;transition-timing-function:cubic-bezier(0.175, 0.885, 0.32, 1.275);transition-duration:400ms;transform:scale(1.1, 1.1);cursor:pointer}.settings-button:hover{transform:scale(1.2, 1.2)}.menu-open:checked+.settings-button{transition-timing-function:linear;transition-duration:200ms;transform:scale(0.8, 0.8)}.menu-open:checked~.menu-item{transition-timing-function:cubic-bezier(0.935, 0, 0.34, 1.33)}.menu-open:checked~.menu-item:nth-child(3){transition-duration:160ms;transform:translate3d(max(-2.5vw, -5vh), 0, 0)}.menu-open:checked~.menu-item:nth-child(4){transition-duration:240ms;transform:translate3d(max(-2.5vw, -5vh), max(-2.5vw, -5vh), 0)}.menu-open:checked~.menu-item:nth-child(5){transition-duration:320ms;transform:translate3d(0, max(-2.5vw, -5vh), 0)}.menu-open:checked~.menu-item:nth-child(6){transition-duration:400ms;transform:translate3d(0, max(-5vw, -10vh), 0)}.container{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.lock{transform:scale(0.5);width:60%;height:52.5%;border:min(0.25vw, 0.5vh) solid white;margin-top:12.5%;border-radius:5px;position:relative;cursor:pointer;-webkit-transition:all 0.1s ease-in-out;transition:all 0.1s ease-in-out}.lock:after{content:"";display:block;background:white;width:10%;height:23.3%;position:absolute;top:50%;left:50%;margin:-11.7% 0 0 -6.7%;-webkit-transition:all 0.1s ease-in-out;transition:all 0.1s ease-in-out}.lock:before{content:"";display:block;width:33.3%;height:50%;bottom:105%;position:absolute;left:40%;margin-left:-26.7%;border:min(0.25vw, 0.5vh) solid white;border-top-right-radius:50%;border-top-left-radius:50%;border-bottom:0;-webkit-transition:all 0.1s ease-in-out;transition:all 0.1s ease-in-out}.lock:hover:before{height:40%}.unlocked{transform:rotate(10deg) scale(0.5);margin-top:26.7%}.unlocked:before{bottom:120%;left:31%;margin-left:-38.3%;transform:rotate(-45deg)}.unlocked,.unlocked:before{border-color:white}.unlocked:after{background:white}.unlocked:hover{transform:rotate(3deg) scale(0.5)}.unlocked:hover:before{height:33.3%;left:40%;bottom:124%;transform:rotate(-30deg)}</style>',Mi(this,{target:this.shadowRoot,props:Ni(this.attributes),customElement:!0},FY,UY,Wi,{type:0,editor:1,tabsconf:11,editableconf:2,code:12},null),e&&(e.target&&Ut(e.target,this,e.anchor),e.props&&(this.$set(e.props),mt()))}static get observedAttributes(){return["type","editor","tabsconf","editableconf","code"]}get type(){return this.$$.ctx[0]}set type(e){this.$$set({type:e}),mt()}get editor(){return this.$$.ctx[1]}set editor(e){this.$$set({editor:e}),mt()}get tabsconf(){return this.$$.ctx[11]}set tabsconf(e){this.$$set({tabsconf:e}),mt()}get editableconf(){return this.$$.ctx[2]}set editableconf(e){this.$$set({editableconf:e}),mt()}get code(){return this.$$.ctx[12]}set code(e){this.$$set({code:e}),mt()}}customElements.define("settings-button",YY);function NY(t){let e,n,r;return{c(){e=Wt("div"),n=Ha(t[2]),this.c=Tt,Te(e,"style",r=(t[3]?"opacity: 1;":"opacity: 0;")+" "+(t[0]=="vertical"?t[1]=="p5"||t[1]=="processing"?"width: 40%; left: 25%; top: 50%;":"width: 50%; left: 35%; top: 50%;":"")),Te(e,"id","message")},m(i,s){Ut(i,e,s),ft(e,n)},p(i,[s]){s&4&&iu(n,i[2]),s&11&&r!==(r=(i[3]?"opacity: 1;":"opacity: 0;")+" "+(i[0]=="vertical"?i[1]=="p5"||i[1]=="processing"?"width: 40%; left: 25%; top: 50%;":"width: 50%; left: 35%; top: 50%;":""))&&Te(e,"style",r)},i:Tt,o:Tt,d(i){i&&ur(e)}}}function MY(t,e,n){let{type:r="normal"}=e,{language:i}=e,{message:s}=e,{show:o}=e;return t.$$set=a=>{"type"in a&&n(0,r=a.type),"language"in a&&n(1,i=a.language),"message"in a&&n(2,s=a.message),"show"in a&&n(3,o=a.show)},[r,i,s,o]}class EY extends Vi{constructor(e){super(),this.shadowRoot.innerHTML="<style>#message{transition:500ms;position:absolute;text-align:center;width:70%;pointer-events:none;font-family:monospace;z-index:20;font-size:min(1.1vw, 2.2vh);top:40%;left:50%;transform:translate(-50%, -50%);background-color:black;color:white}</style>",Mi(this,{target:this.shadowRoot,props:Ni(this.attributes),customElement:!0},MY,NY,Wi,{type:0,language:1,message:2,show:3},null),e&&(e.target&&Ut(e.target,this,e.anchor),e.props&&(this.$set(e.props),mt()))}static get observedAttributes(){return["type","language","message","show"]}get type(){return this.$$.ctx[0]}set type(e){this.$$set({type:e}),mt()}get language(){return this.$$.ctx[1]}set language(e){this.$$set({language:e}),mt()}get message(){return this.$$.ctx[2]}set message(e){this.$$set({message:e}),mt()}get show(){return this.$$.ctx[3]}set show(e){this.$$set({show:e}),mt()}}customElements.define("overlay-message",EY);var Mn=typeof window<"u"?window:null,qh=Mn===null,wa=qh?void 0:Mn.document,Qn="addEventListener",qn="removeEventListener",$h="getBoundingClientRect",ka="_a",$n="_b",Ui="_c",zc="horizontal",ei=function(){return!1},HY=qh?"calc":["","-webkit-","-moz-","-o-"].filter(function(t){var e=wa.createElement("div");return e.style.cssText="width:"+t+"calc(9px)",!!e.style.length}).shift()+"calc",oZ=function(t){return typeof t=="string"||t instanceof String},sZ=function(t){if(oZ(t)){var e=wa.querySelector(t);if(!e)throw new Error("Selector "+t+" did not match a DOM element");return e}return t},tn=function(t,e,n){var r=t[e];return r!==void 0?r:n},_c=function(t,e,n,r){if(e){if(r==="end")return 0;if(r==="center")return t/2}else if(n){if(r==="start")return 0;if(r==="center")return t/2}return t},KY=function(t,e){var n=wa.createElement("div");return n.className="gutter gutter-"+e,n},JY=function(t,e,n){var r={};return oZ(e)?r[t]=e:r[t]=HY+"("+e+"% - "+n+"px)",r},jY=function(t,e){var n;return n={},n[t]=e+"px",n},aZ=function(t,e){if(e===void 0&&(e={}),qh)return{};var n=t,r,i,s,o,a,l;Array.from&&(n=Array.from(n));var c=sZ(n[0]),m=c.parentNode,p=getComputedStyle?getComputedStyle(m):null,u=p?p.flexDirection:null,d=tn(e,"sizes")||n.map(function(){return 100/n.length}),h=tn(e,"minSize",100),f=Array.isArray(h)?h:n.map(function(){return h}),g=tn(e,"maxSize",1/0),y=Array.isArray(g)?g:n.map(function(){return g}),Z=tn(e,"expandToMin",!1),I=tn(e,"gutterSize",10),G=tn(e,"gutterAlign","center"),R=tn(e,"snapOffset",30),C=Array.isArray(R)?R:n.map(function(){return R}),V=tn(e,"dragInterval",1),x=tn(e,"direction",zc),w=tn(e,"cursor",x===zc?"col-resize":"row-resize"),k=tn(e,"gutter",KY),A=tn(e,"elementStyle",JY),Y=tn(e,"gutterStyle",jY);x===zc?(r="width",i="clientX",s="left",o="right",a="clientWidth"):x==="vertical"&&(r="height",i="clientY",s="top",o="bottom",a="clientHeight");function U(ne,ee,oe,ie){var ce=A(r,ee,oe,ie);Object.keys(ce).forEach(function(he){ne.style[he]=ce[he]})}function M(ne,ee,oe){var ie=Y(r,ee,oe);Object.keys(ie).forEach(function(ce){ne.style[ce]=ie[ce]})}function j(){return l.map(function(ne){return ne.size})}function K(ne){return"touches"in ne?ne.touches[0][i]:ne[i]}function P(ne){var ee=l[this.a],oe=l[this.b],ie=ee.size+oe.size;ee.size=ne/this.size*ie,oe.size=ie-ne/this.size*ie,U(ee.element,ee.size,this[$n],ee.i),U(oe.element,oe.size,this[Ui],oe.i)}function J(ne){var ee,oe=l[this.a],ie=l[this.b];!this.dragging||(ee=K(ne)-this.start+(this[$n]-this.dragOffset),V>1&&(ee=Math.round(ee/V)*V),ee<=oe.minSize+oe.snapOffset+this[$n]?ee=oe.minSize+this[$n]:ee>=this.size-(ie.minSize+ie.snapOffset+this[Ui])&&(ee=this.size-(ie.minSize+this[Ui])),ee>=oe.maxSize-oe.snapOffset+this[$n]?ee=oe.maxSize+this[$n]:ee<=this.size-(ie.maxSize-ie.snapOffset+this[Ui])&&(ee=this.size-(ie.maxSize+this[Ui])),P.call(this,ee),tn(e,"onDrag",ei)(j()))}function E(){var ne=l[this.a].element,ee=l[this.b].element,oe=ne[$h](),ie=ee[$h]();this.size=oe[r]+ie[r]+this[$n]+this[Ui],this.start=oe[s],this.end=oe[o]}function O(ne){if(!getComputedStyle)return null;var ee=getComputedStyle(ne);if(!ee)return null;var oe=ne[a];return oe===0?null:(x===zc?oe-=parseFloat(ee.paddingLeft)+parseFloat(ee.paddingRight):oe-=parseFloat(ee.paddingTop)+parseFloat(ee.paddingBottom),oe)}function D(ne){var ee=O(m);if(ee===null||f.reduce(function(he,q){return he+q},0)>ee)return ne;var oe=0,ie=[],ce=ne.map(function(he,q){var me=ee*he/100,ge=_c(I,q===0,q===ne.length-1,G),be=f[q]+ge;return me<be?(oe+=be-me,ie.push(0),be):(ie.push(me-be),me)});return oe===0?ne:ce.map(function(he,q){var me=he;if(oe>0&&ie[q]-oe>0){var ge=Math.min(oe,ie[q]-oe);oe-=ge,me=he-ge}return me/ee*100})}function le(){var ne=this,ee=l[ne.a].element,oe=l[ne.b].element;ne.dragging&&tn(e,"onDragEnd",ei)(j()),ne.dragging=!1,Mn[qn]("mouseup",ne.stop),Mn[qn]("touchend",ne.stop),Mn[qn]("touchcancel",ne.stop),Mn[qn]("mousemove",ne.move),Mn[qn]("touchmove",ne.move),ne.stop=null,ne.move=null,ee[qn]("selectstart",ei),ee[qn]("dragstart",ei),oe[qn]("selectstart",ei),oe[qn]("dragstart",ei),ee.style.userSelect="",ee.style.webkitUserSelect="",ee.style.MozUserSelect="",ee.style.pointerEvents="",oe.style.userSelect="",oe.style.webkitUserSelect="",oe.style.MozUserSelect="",oe.style.pointerEvents="",ne.gutter.style.cursor="",ne.parent.style.cursor="",wa.body.style.cursor=""}function X(ne){if(!("button"in ne&&ne.button!==0)){var ee=this,oe=l[ee.a].element,ie=l[ee.b].element;ee.dragging||tn(e,"onDragStart",ei)(j()),ne.preventDefault(),ee.dragging=!0,ee.move=J.bind(ee),ee.stop=le.bind(ee),Mn[Qn]("mouseup",ee.stop),Mn[Qn]("touchend",ee.stop),Mn[Qn]("touchcancel",ee.stop),Mn[Qn]("mousemove",ee.move),Mn[Qn]("touchmove",ee.move),oe[Qn]("selectstart",ei),oe[Qn]("dragstart",ei),ie[Qn]("selectstart",ei),ie[Qn]("dragstart",ei),oe.style.userSelect="none",oe.style.webkitUserSelect="none",oe.style.MozUserSelect="none",oe.style.pointerEvents="none",ie.style.userSelect="none",ie.style.webkitUserSelect="none",ie.style.MozUserSelect="none",ie.style.pointerEvents="none",ee.gutter.style.cursor=w,ee.parent.style.cursor=w,wa.body.style.cursor=w,E.call(ee),ee.dragOffset=K(ne)-ee.end}}d=D(d);var T=[];l=n.map(function(ne,ee){var oe={element:sZ(ne),size:d[ee],minSize:f[ee],maxSize:y[ee],snapOffset:C[ee],i:ee},ie;if(ee>0&&(ie={a:ee-1,b:ee,dragging:!1,direction:x,parent:m},ie[$n]=_c(I,ee-1===0,!1,G),ie[Ui]=_c(I,!1,ee===n.length-1,G),u==="row-reverse"||u==="column-reverse")){var ce=ie.a;ie.a=ie.b,ie.b=ce}if(ee>0){var he=k(ee,x,oe.element);M(he,I,ee),ie[ka]=X.bind(ie),he[Qn]("mousedown",ie[ka]),he[Qn]("touchstart",ie[ka]),m.insertBefore(he,oe.element),ie.gutter=he}return U(oe.element,oe.size,_c(I,ee===0,ee===n.length-1,G),ee),ee>0&&T.push(ie),oe});function N(ne){var ee=ne.i===T.length,oe=ee?T[ne.i-1]:T[ne.i];E.call(oe);var ie=ee?oe.size-ne.minSize-oe[Ui]:ne.minSize+oe[$n];P.call(oe,ie)}l.forEach(function(ne){var ee=ne.element[$h]()[r];ee<ne.minSize&&(Z?N(ne):ne.minSize=ee)});function z(ne){var ee=D(ne);ee.forEach(function(oe,ie){if(ie>0){var ce=T[ie-1],he=l[ce.a],q=l[ce.b];he.size=ee[ie-1],q.size=oe,U(he.element,he.size,ce[$n],he.i),U(q.element,q.size,ce[Ui],q.i)}})}function te(ne,ee){T.forEach(function(oe){if(ee!==!0?oe.parent.removeChild(oe.gutter):(oe.gutter[qn]("mousedown",oe[ka]),oe.gutter[qn]("touchstart",oe[ka])),ne!==!0){var ie=A(r,oe.a.size,oe[$n]);Object.keys(ie).forEach(function(ce){l[oe.a].element.style[ce]="",l[oe.b].element.style[ce]=""})}})}return{setSizes:z,getSizes:j,collapse:function(ee){N(l[ee])},destroy:te,parent:m,pairs:T}};function PY(t){let e,n,r,i,s,o;function a(m,p){return m[0]=="sql"?_Y:zY}let l=a(t),c=l(t);return{c(){e=Wt("div"),n=Wt("p"),n.textContent="OUTPUT",i=Yr(),s=Wt("div"),c.c(),Te(n,"id","output-title"),Te(e,"id","output-title-container"),Te(e,"style",r=t[1]=="vertical"?"height: min(1.6vw, 3.2vh); margin-top: min(0.3vw, 0.6vh);":""),Te(s,"id","output-container"),Te(s,"style",o=t[1]=="vertical"?"height: calc(100% - min(1.6vw, 3.2vh)} - min(0.3vw, 0.6vh));":"width: 100%;"),Te(s,"class","rounded-scrollbar")},m(m,p){Ut(m,e,p),ft(e,n),Ut(m,i,p),Ut(m,s,p),c.m(s,null)},p(m,p){p&2&&r!==(r=m[1]=="vertical"?"height: min(1.6vw, 3.2vh); margin-top: min(0.3vw, 0.6vh);":"")&&Te(e,"style",r),l===(l=a(m))&&c?c.p(m,p):(c.d(1),c=l(m),c&&(c.c(),c.m(s,null))),p&2&&o!==(o=m[1]=="vertical"?"height: calc(100% - min(1.6vw, 3.2vh)} - min(0.3vw, 0.6vh));":"width: 100%;")&&Te(s,"style",o)},d(m){m&&ur(e),m&&ur(i),m&&ur(s),c.d()}}}function OY(t){let e,n,r,i,s,o,a,l,c,m,p,u;return{c(){e=Wt("div"),n=Wt("div"),r=Yr(),i=Wt("div"),s=Wt("div"),o=Wt("p"),o.textContent="CONSOLE",l=Yr(),c=Wt("div"),m=Ha(t[2]),tt(n,"display","flex"),tt(n,"flex-direction","column"),tt(n,"width","100%"),tt(n,"height","70%"),Te(o,"id","output-title"),Te(s,"id","output-title-container"),Te(s,"style",a=t[1]=="vertical"?"height: min(1.6vw, 3.2vh);":""),Te(c,"style",p=(t[3]?"color: var(--error-color);":"")+" display: flex; flex-direction: column; width: 100%; height: calc(100% - min(1.6vw, 3.2vh)); padding: 5px; box-sizing: border-box; white-space:pre-wrap; overflow: auto;"),Te(c,"class","output-text"),tt(i,"height","30%"),tt(i,"position","relative"),tt(i,"z-index","99"),tt(i,"background-color","var(--main-output-bg-color)"),Te(e,"id","output-container"),Te(e,"style",u=t[1]=="vertical"?"height: 100%; overflow: hidden;":"width: 100%;"),Te(e,"class","rounded-scrollbar")},m(d,h){Ut(d,e,h),ft(e,n),t[21](n),ft(e,r),ft(e,i),ft(i,s),ft(s,o),ft(i,l),ft(i,c),ft(c,m),t[22](c),t[23](i)},p(d,h){h&2&&a!==(a=d[1]=="vertical"?"height: min(1.6vw, 3.2vh);":"")&&Te(s,"style",a),h&4&&iu(m,d[2]),h&8&&p!==(p=(d[3]?"color: var(--error-color);":"")+" display: flex; flex-direction: column; width: 100%; height: calc(100% - min(1.6vw, 3.2vh)); padding: 5px; box-sizing: border-box; white-space:pre-wrap; overflow: auto;")&&Te(c,"style",p),h&2&&u!==(u=d[1]=="vertical"?"height: 100%; overflow: hidden;":"width: 100%;")&&Te(e,"style",u)},d(d){d&&ur(e),t[21](null),t[22](null),t[23](null)}}}function zY(t){let e,n,r;return{c(){e=Wt("p"),n=Ha(t[2]),Te(e,"style",r=t[3]?"color: var(--error-color);":""),Te(e,"class","output-text"),Te(e,"id","output")},m(i,s){Ut(i,e,s),ft(e,n)},p(i,s){s&4&&iu(n,i[2]),s&8&&r!==(r=i[3]?"color: var(--error-color);":"")&&Te(e,"style",r)},d(i){i&&ur(e)}}}function _Y(t){let e,n;return{c(){e=Wt("div"),Te(e,"style",n=t[3]?"color: var(--error-color);":""),Te(e,"class","output-text"),Te(e,"id","output")},m(r,i){Ut(r,e,i),t[24](e)},p(r,i){i&8&&n!==(n=r[3]?"color: var(--error-color);":"")&&Te(e,"style",n)},d(r){r&&ur(e),t[24](null)}}}function DY(t){let e,n,r,i,s,o,a,l;function c(u,d){return u[0]=="p5"||u[0]=="processing"?OY:PY}let m=c(t),p=m(t);return{c(){e=Wt("div"),n=Yr(),r=Wt("div"),s=Yr(),o=Wt("div"),p.c(),this.c=Tt,Te(r,"style",i=t[1]=="vertical"?"height: 100%; width: calc(100% - var(--output-height));":""),Te(r,"id","editor"),Te(o,"id","editor-output"),Te(o,"style",a=t[1]=="vertical"?"height: 100%; width: var(--output-height); min-height: 0;":""),Te(e,"id","editor-container"),Te(e,"style",l=t[1]=="vertical"?"display: flex; flex-direction: row; justify-content: space-between;":"display: flex; flex-direction: column;")},m(u,d){Ut(u,e,d),ft(e,n),ft(e,r),t[20](r),ft(e,s),ft(e,o),p.m(o,null),t[25](o),t[26](e)},p(u,[d]){d&2&&i!==(i=u[1]=="vertical"?"height: 100%; width: calc(100% - var(--output-height));":"")&&Te(r,"style",i),m===(m=c(u))&&p?p.p(u,d):(p.d(1),p=m(u),p&&(p.c(),p.m(o,null))),d&2&&a!==(a=u[1]=="vertical"?"height: 100%; width: var(--output-height); min-height: 0;":"")&&Te(o,"style",a),d&2&&l!==(l=u[1]=="vertical"?"display: flex; flex-direction: row; justify-content: space-between;":"display: flex; flex-direction: column;")&&Te(e,"style",l)},i:Tt,o:Tt,d(u){u&&ur(e),t[20](null),p.d(),t[25](null),t[26](null)}}}function QY(t,e,n){let r,i;Vs(t,ja,K=>n(27,r=K)),Vs(t,cu,K=>n(28,i=K));let{language:s="javascript"}=e,{syntax:o}=e,{type:a="normal"}=e,{theme:l="light"}=e,{code:c}=e,{output:m}=e,{canvas:p}=e,{iserror:u}=e,{id:d=""}=e,{save:h=!1}=e,f,g,y,Z,I,G,R,C,V,x;Ls(()=>{if(g.addEventListener("execute",()=>{nu(cu,i=g.firstChild,i),nu(ja,r=!0,r)}),aZ([g,y],{gutterSize:1,minSize:0,sizes:s=="p5"||s=="processing"?[50,50]:[70,30],direction:a=="normal"?"vertical":"horizontal"}),(s=="p5"||s=="processing")&&aZ([I,G],{gutterSize:1,minSize:0,sizes:[70,30],direction:"vertical"}),d&&h){const P=localStorage.getItem(d);P&&n(10,c=P)}let K;R||(K=kY(g,o,l=="dark",c)),n(16,R=K.editor),n(17,C=K.tabsConfiguration),n(18,V=K.editableFilterConfiguration),n(19,x=K.darkModeConfiguration)});function w(K){Sr[K?"unshift":"push"](()=>{g=K,n(8,g)})}function k(K){Sr[K?"unshift":"push"](()=>{I=K,n(7,I),n(13,p),n(5,y)})}function A(K){Sr[K?"unshift":"push"](()=>{Z=K,n(6,Z),n(0,s),n(2,m)})}function Y(K){Sr[K?"unshift":"push"](()=>{G=K,n(9,G)})}function U(K){Sr[K?"unshift":"push"](()=>{Z=K,n(6,Z),n(0,s),n(2,m)})}function M(K){Sr[K?"unshift":"push"](()=>{y=K,n(5,y),n(13,p),n(7,I)})}function j(K){Sr[K?"unshift":"push"](()=>{f=K,n(4,f)})}return t.$$set=K=>{"language"in K&&n(0,s=K.language),"syntax"in K&&n(11,o=K.syntax),"type"in K&&n(1,a=K.type),"theme"in K&&n(12,l=K.theme),"code"in K&&n(10,c=K.code),"output"in K&&n(2,m=K.output),"canvas"in K&&n(13,p=K.canvas),"iserror"in K&&n(3,u=K.iserror),"id"in K&&n(14,d=K.id),"save"in K&&n(15,h=K.save)},t.$$.update=()=>{if(t.$$.dirty&983056){const K=new CustomEvent("editormsg",{detail:{editor:R,tabsConfiguration:C,editableFilterConfiguration:V,darkModeConfiguration:x},bubbles:!0,cancelable:!0,composed:!0});f==null||f.dispatchEvent(K)}t.$$.dirty&8352&&(p?(n(7,I.innerHTML="",I),I.appendChild(p)):y&&y.getElementsByTagName("canvas").length>0&&n(5,y.innerHTML="",y)),t.$$.dirty&69&&s=="sql"&&Z&&n(6,Z.innerHTML=m,Z)},[s,a,m,u,f,y,Z,I,g,G,c,o,l,p,d,h,R,C,V,x,w,k,A,Y,U,M,j]}class qY extends Vi{constructor(e){super(),this.shadowRoot.innerHTML='<style>#editor-container{position:absolute;left:0;top:0;height:100%;width:100%;box-shadow:rgba(0, 0, 0, 0.35) 0px 5px 15px}#editor{height:calc(100% - var(--output-height))}#editor-output{z-index:99;box-sizing:border-box;background-color:var(--main-output-bg-color);color:var(--main-output-text-color);height:var(--output-height);overflow:hidden}#output-title-container{height:min(1.6vw, 3.2vh);display:flex;align-items:center}#output-title{margin:0;height:60%;margin-left:min(0.8vw, 1.6vh);font-size:min(0.9vw, 1.8vh);width:fit-content;border-bottom:1px solid var(--output-text-color);color:var(--output-text-color);box-sizing:border-box}#output-container{overflow:auto;height:calc(100% - min(1.6vw, 3.2vh));width:100%}.output-text{color:var(--output-text-color);padding:min(0.05vw, 0.1vh) 0 0 min(0.6vw, 1.2vh);margin:0;font-family:monospace;font-size:min(1.1vw, 2.2vh);white-space:pre-wrap}.cm-editor{height:100%;font-size:min(1.1vw, 2.2vh)}.cm-scroller{overflow:auto}.\u037C1 .cm-lineNumbers .cm-gutterElement{padding:0 min(0.3vw, 0.6vh) !important;min-width:unset !important}.\u037C1 .cm-content{padding:min(0.1vw, 0.2vh) 0 !important}.\u037C1 .cm-line{padding:0 min(0.05vw, 0.025vh) 0 min(0.15vw, 0.075vh) !important}.gutter{width:min(0.2vw, 0.4vh) !important;height:100%;z-index:99;position:relative;background-color:rgb(150, 150, 150);background-repeat:no-repeat;background-position:50%;transition:background-color 1s}.gutter:hover{background-color:#466be5}.gutter.gutter-vertical{height:min(0.2vw, 0.4vh) !important;width:100% !important;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=");cursor:row-resize}.gutter.gutter-horizontal{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==");cursor:col-resize}table{margin:min(0.7vw, 1.4vh);border-collapse:collapse}td,th{border:1px solid var(--table-th-color);text-align:center;padding:8px}tr:nth-child(even){background-color:var(--table-tr-even-color)}tr:hover{background-color:var(--table-tr-hover-color)}th{padding-top:12px;padding-bottom:12px;text-align:center;background-color:var(--table-th-background-color);color:var(--table-th-text-color)}*::-webkit-scrollbar-track{box-shadow:inset 0 0 min(0.29vw, 0.6vh) rgba(0, 0, 0, 0.3);-webkit-box-shadow:inset 0 0 min(0.29vw, 0.6vh) rgba(0, 0, 0, 0.3);background-color:var(--dark-mode-main-output-bg-color-light)}*::-webkit-scrollbar{width:min(0.29vw, 0.6vh);background-color:var(--main-output-bg-color)}*::-webkit-scrollbar-thumb{box-shadow:inset 0 0 min(0.29vw, 0.6vh) rgba(0, 0, 0, 0.3);-webkit-box-shadow:inset 0 0 min(0.29vw, 0.6vh) rgba(0, 0, 0, 0.3);background-color:#999999}.rounded-scrollbar::-webkit-scrollbar-track{border-radius:10px;background-color:var(--main-output-bg-color)}.rounded-scrollbar::-webkit-scrollbar-thumb{border-radius:10px}</style>',Mi(this,{target:this.shadowRoot,props:Ni(this.attributes),customElement:!0},QY,DY,Wi,{language:0,syntax:11,type:1,theme:12,code:10,output:2,canvas:13,iserror:3,id:14,save:15},null),e&&(e.target&&Ut(e.target,this,e.anchor),e.props&&(this.$set(e.props),mt()))}static get observedAttributes(){return["language","syntax","type","theme","code","output","canvas","iserror","id","save"]}get language(){return this.$$.ctx[0]}set language(e){this.$$set({language:e}),mt()}get syntax(){return this.$$.ctx[11]}set syntax(e){this.$$set({syntax:e}),mt()}get type(){return this.$$.ctx[1]}set type(e){this.$$set({type:e}),mt()}get theme(){return this.$$.ctx[12]}set theme(e){this.$$set({theme:e}),mt()}get code(){return this.$$.ctx[10]}set code(e){this.$$set({code:e}),mt()}get output(){return this.$$.ctx[2]}set output(e){this.$$set({output:e}),mt()}get canvas(){return this.$$.ctx[13]}set canvas(e){this.$$set({canvas:e}),mt()}get iserror(){return this.$$.ctx[3]}set iserror(e){this.$$set({iserror:e}),mt()}get id(){return this.$$.ctx[14]}set id(e){this.$$set({id:e}),mt()}get save(){return this.$$.ctx[15]}set save(e){this.$$set({save:e}),mt()}}customElements.define("editor-container",qY);function $Y(t){let e,n;return{c(){e=xr("svg"),n=xr("path"),Te(n,"stroke-linecap","round"),Te(n,"stroke-linejoin","round"),Te(n,"d","M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"),Te(e,"xmlns","http://www.w3.org/2000/svg"),Te(e,"fill","none"),Te(e,"viewBox","0 0 24 24"),Te(e,"stroke-width","1.5"),Te(e,"stroke","black"),Te(e,"class","w-6 h-6")},m(r,i){Ut(r,e,i),ft(e,n)},d(r){r&&ur(e)}}}function eN(t){let e,n;return{c(){e=xr("svg"),n=xr("path"),Te(n,"stroke-linecap","round"),Te(n,"stroke-linejoin","round"),Te(n,"d","M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"),Te(e,"xmlns","http://www.w3.org/2000/svg"),Te(e,"fill","none"),Te(e,"viewBox","0 0 24 24"),Te(e,"stroke-width","1.5"),Te(e,"stroke","white"),Te(e,"class","w-6 h-6")},m(r,i){Ut(r,e,i),ft(e,n)},d(r){r&&ur(e)}}}function tN(t){let e,n,r;function i(a,l){return a[0]=="dark"?eN:$Y}let s=i(t),o=s(t);return{c(){e=Wt("button"),o.c(),this.c=Tt,tt(e,"position","absolute"),tt(e,"right",t[1]=="vertical"?"calc(var(--output-height) + min(0.5vw, 1vh))":"min(0.5vw, 1vh)"),tt(e,"top","min(2.5vw, 5vh)"),tt(e,"padding","min(0.25vw, 0.5vh)"),tt(e,"width","min(1.7vw, 3.4vh)"),tt(e,"height","min(1.7vw, 3.4vh)"),tt(e,"border","0px"),tt(e,"border-radius",".4em"),tt(e,"display","flex"),tt(e,"justify-content","center"),tt(e,"align-items","center"),tt(e,"z-index","99"),tt(e,"background-color","var(--theme-color)"),tt(e,"cursor","pointer")},m(a,l){Ut(a,e,l),o.m(e,null),t[5](e),n||(r=En(e,"click",t[6]),n=!0)},p(a,[l]){s!==(s=i(a))&&(o.d(1),o=s(a),o&&(o.c(),o.m(e,null))),l&2&&tt(e,"right",a[1]=="vertical"?"calc(var(--output-height) + min(0.5vw, 1vh))":"min(0.5vw, 1vh)")},i:Tt,o:Tt,d(a){a&&ur(e),o.d(),t[5](null),n=!1,r()}}}function rN(t,e,n){let r;Vs(t,dm,m=>n(4,r=m));let{theme:i}=e,{type:s}=e,o;function a(m){localStorage.setItem("icp-default-theme",m?"dark":"light"),dm.set(m?"dark":"light");const p=new CustomEvent("changedtheme",{detail:{darkMode:m},bubbles:!0,cancelable:!0,composed:!0});o.dispatchEvent(p)}function l(m){Sr[m?"unshift":"push"](()=>{o=m,n(2,o)})}const c=()=>{a(i=="light")};return t.$$set=m=>{"theme"in m&&n(0,i=m.theme),"type"in m&&n(1,s=m.type)},t.$$.update=()=>{t.$$.dirty&21&&o&&r&&r!=i&&a(r=="dark")},[i,s,o,a,r,l,c]}class nN extends Vi{constructor(e){super(),Mi(this,{target:this.shadowRoot,props:Ni(this.attributes),customElement:!0},rN,tN,Wi,{theme:0,type:1},null),e&&(e.target&&Ut(e.target,this,e.anchor),e.props&&(this.$set(e.props),mt()))}static get observedAttributes(){return["theme","type"]}get theme(){return this.$$.ctx[0]}set theme(e){this.$$set({theme:e}),mt()}get type(){return this.$$.ctx[1]}set type(e){this.$$set({type:e}),mt()}}customElements.define("theme-switch",nN);function iN(t){let e,n,r,i,s,o,a,l;return{c(){e=Wt("button"),n=xr("svg"),r=xr("path"),i=xr("path"),s=xr("path"),this.c=Tt,Te(r,"d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"),Te(i,"d","m7 10 5 5 5-5"),Te(s,"d","M12 15V3"),tt(n,"width","min(1.2vw, 2.4vh)"),tt(n,"height","min(1.2vw, 2.4vh)"),Te(n,"fill","none"),Te(n,"stroke",o=t[0]=="dark"?"#ffffff":"#000000"),Te(n,"stroke-linecap","round"),Te(n,"stroke-linejoin","round"),Te(n,"stroke-width","2"),Te(n,"viewBox","0 0 24 24"),Te(n,"xmlns","http://www.w3.org/2000/svg"),tt(e,"position","absolute"),tt(e,"right",t[1]=="vertical"?"calc(var(--output-height) + min(2vw, 4vh))":"min(2vw, 4vh)"),tt(e,"top","min(0.5vw, 1vh)"),tt(e,"border","0px"),tt(e,"border-radius",".4em"),tt(e,"display","flex"),tt(e,"justify-content","center"),tt(e,"align-items","center"),tt(e,"z-index","99"),tt(e,"background-color","transparent"),tt(e,"cursor","pointer")},m(c,m){Ut(c,e,m),ft(e,n),ft(n,r),ft(n,i),ft(n,s),t[7](e),a||(l=En(e,"click",t[8]),a=!0)},p(c,[m]){m&1&&o!==(o=c[0]=="dark"?"#ffffff":"#000000")&&Te(n,"stroke",o),m&2&&tt(e,"right",c[1]=="vertical"?"calc(var(--output-height) + min(2vw, 4vh))":"min(2vw, 4vh)")},i:Tt,o:Tt,d(c){c&&ur(e),t[7](null),a=!1,l()}}}function oN(t,e,n){let{language:r}=e,{theme:i}=e,{type:s}=e,{code:o=""}=e,{id:a=""}=e,l,c={sql:"sql",javascript:"js",typescript:"ts",python:"py",java:"java",cpp:"cpp",processing:"pde",p5:"js",ml:"ml"},m={sql:"text/x-sql",javascript:"text/javascript",typescript:"text/typescript",python:"text/x-python",java:"text/x-java",cpp:"text/x-c++src",processing:"text/x-processing",p5:"text/javascript",ml:"text/x-sml"};async function p(){const h=`${a!=""?a:"code-snippet"}.${c[r]}`;if(window.showSaveFilePicker){const g=await(await window.showSaveFilePicker({suggestedName:h,types:[{description:r,accept:{[m[r]]:[`.${c[r]}`]}}]})).createWritable();await g.write(o),await g.close()}else{const f=document.createElement("a");f.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(o)),f.setAttribute("download",h),f.style.display="none",document.body.appendChild(f),f.click(),document.body.removeChild(f)}}function u(h){Sr[h?"unshift":"push"](()=>{l=h,n(2,l)})}const d=()=>{p()};return t.$$set=h=>{"language"in h&&n(4,r=h.language),"theme"in h&&n(0,i=h.theme),"type"in h&&n(1,s=h.type),"code"in h&&n(5,o=h.code),"id"in h&&n(6,a=h.id)},[i,s,l,p,r,o,a,u,d]}class sN extends Vi{constructor(e){super(),Mi(this,{target:this.shadowRoot,props:Ni(this.attributes),customElement:!0},oN,iN,Wi,{language:4,theme:0,type:1,code:5,id:6},null),e&&(e.target&&Ut(e.target,this,e.anchor),e.props&&(this.$set(e.props),mt()))}static get observedAttributes(){return["language","theme","type","code","id"]}get language(){return this.$$.ctx[4]}set language(e){this.$$set({language:e}),mt()}get theme(){return this.$$.ctx[0]}set theme(e){this.$$set({theme:e}),mt()}get type(){return this.$$.ctx[1]}set type(e){this.$$set({type:e}),mt()}get code(){return this.$$.ctx[5]}set code(e){this.$$set({code:e}),mt()}get id(){return this.$$.ctx[6]}set id(e){this.$$set({id:e}),mt()}}customElements.define("download-button",sN);function lZ(t){let e;return{c(){e=Wt("download-button"),Pe(e,"language",t[2]),Pe(e,"id",t[8]),Pe(e,"theme",t[0]),Pe(e,"type",t[4]),Pe(e,"code",t[1])},m(n,r){Ut(n,e,r)},p(n,r){r[0]&4&&Pe(e,"language",n[2]),r[0]&256&&Pe(e,"id",n[8]),r[0]&1&&Pe(e,"theme",n[0]),r[0]&16&&Pe(e,"type",n[4]),r[0]&2&&Pe(e,"code",n[1])},d(n){n&&ur(e)}}}function aN(t){let e,n,r;return{c(){e=xr("svg"),n=xr("path"),Te(n,"fill-rule","evenodd"),Te(n,"d","M7 10H5V5h5v2H7v3Zm-2 4h2v3h3v2H5v-5Zm12 3h-3v2h5v-5h-2v3ZM14 7V5h5v5h-2V7h-3Z"),Te(n,"clip-rule","evenodd"),tt(e,"width","min(2.5vw, 5vh)"),tt(e,"height","min(2.5vw, 5vh)"),Te(e,"fill",r=t[0]=="dark"?"white":"black"),Te(e,"viewBox","0 0 24 24"),Te(e,"xmlns","http://www.w3.org/2000/svg")},m(i,s){Ut(i,e,s),ft(e,n)},p(i,s){s[0]&1&&r!==(r=i[0]=="dark"?"white":"black")&&Te(e,"fill",r)},d(i){i&&ur(e)}}}function lN(t){let e,n,r;return{c(){e=xr("svg"),n=xr("path"),Te(n,"fill-rule","evenodd"),Te(n,"d","M5 8h3V5h2v5H5V8Zm3 8H5v-2h5v5H8v-3Zm6 3h2v-3h3v-2h-5v5Zm2-14v3h3v2h-5V5h2Z"),Te(n,"clip-rule","evenodd"),tt(e,"width","min(2.5vw, 5vh)"),tt(e,"height","min(2.5vw, 5vh)"),Te(e,"fill",r=t[0]=="dark"?"white":"black"),Te(e,"viewBox","0 0 24 24"),Te(e,"xmlns","http://www.w3.org/2000/svg")},m(i,s){Ut(i,e,s),ft(e,n)},p(i,s){s[0]&1&&r!==(r=i[0]=="dark"?"white":"black")&&Te(e,"fill",r)},d(i){i&&ur(e)}}}function cN(t){let e,n,r,i,s,o,a,l,c,m,p,u,d,h,f,g=t[10]&&lZ(t);function y(G,R){return G[20]?lN:aN}let Z=y(t),I=Z(t);return{c(){e=Wt("div"),n=Wt("overlay-message"),r=Yr(),i=Wt("theme-switch"),s=Yr(),g&&g.c(),o=Yr(),a=Wt("button"),I.c(),l=Yr(),c=Wt("settings-button"),m=Yr(),p=Wt("run-button"),u=Yr(),d=Wt("editor-container"),this.c=Tt,Pe(n,"type",t[4]),Pe(n,"language",t[2]),Pe(n,"show",t[19]),Pe(n,"message",t[18]),Pe(i,"theme",t[0]),Pe(i,"type",t[4]),tt(a,"position","absolute"),tt(a,"right",t[4]=="vertical"?"calc(var(--output-height) + min(0.5vw, 1vh))":"min(0.5vw, 1vh)"),tt(a,"top","min(0.5vw, 1vh)"),tt(a,"width","min(1.5vw, 3vh)"),tt(a,"height","min(1.5vw, 3vh)"),tt(a,"border","0px"),tt(a,"border-radius",".4em"),tt(a,"display","flex"),tt(a,"justify-content","center"),tt(a,"align-items","center"),tt(a,"z-index","99"),tt(a,"background-color","transparent"),tt(a,"cursor","pointer"),Pe(c,"type",t[4]),Pe(c,"editor",t[12]),Pe(c,"tabsconf",t[13]),Pe(c,"editableconf",t[14]),Pe(c,"code",t[5]),Pe(p,"type",t[4]),Pe(p,"language",t[2]),Pe(p,"editor",t[12]),Pe(p,"webworker",t[7]),Pe(p,"offline",t[6]),Pe(d,"syntax",t[3]),Pe(d,"language",t[2]),Pe(d,"type",t[4]),Pe(d,"theme",t[0]),Pe(d,"code",t[5]),Pe(d,"output",t[16]),Pe(d,"canvas",t[21]),Pe(d,"id",t[8]),Pe(d,"save",t[9]),Pe(d,"iserror",t[17]),Te(e,"id","code-container")},m(G,R){Ut(G,e,R),ft(e,n),ft(e,r),ft(e,i),ft(e,s),g&&g.m(e,null),ft(e,o),ft(e,a),I.m(a,null),ft(e,l),ft(e,c),ft(e,m),ft(e,p),ft(e,u),ft(e,d),t[31](e),h||(f=[En(i,"changedtheme",t[24]),En(a,"click",t[25]),En(c,"showmsg",t[26]),En(p,"changedout",t[27]),En(p,"canvasout",t[28]),En(d,"editormsg",t[29]),En(d,"changedcode",t[30])],h=!0)},p(G,R){R[0]&16&&Pe(n,"type",G[4]),R[0]&4&&Pe(n,"language",G[2]),R[0]&524288&&Pe(n,"show",G[19]),R[0]&262144&&Pe(n,"message",G[18]),R[0]&1&&Pe(i,"theme",G[0]),R[0]&16&&Pe(i,"type",G[4]),G[10]?g?g.p(G,R):(g=lZ(G),g.c(),g.m(e,o)):g&&(g.d(1),g=null),Z===(Z=y(G))&&I?I.p(G,R):(I.d(1),I=Z(G),I&&(I.c(),I.m(a,null))),R[0]&16&&tt(a,"right",G[4]=="vertical"?"calc(var(--output-height) + min(0.5vw, 1vh))":"min(0.5vw, 1vh)"),R[0]&16&&Pe(c,"type",G[4]),R[0]&4096&&Pe(c,"editor",G[12]),R[0]&8192&&Pe(c,"tabsconf",G[13]),R[0]&16384&&Pe(c,"editableconf",G[14]),R[0]&32&&Pe(c,"code",G[5]),R[0]&16&&Pe(p,"type",G[4]),R[0]&4&&Pe(p,"language",G[2]),R[0]&4096&&Pe(p,"editor",G[12]),R[0]&128&&Pe(p,"webworker",G[7]),R[0]&64&&Pe(p,"offline",G[6]),R[0]&8&&Pe(d,"syntax",G[3]),R[0]&4&&Pe(d,"language",G[2]),R[0]&16&&Pe(d,"type",G[4]),R[0]&1&&Pe(d,"theme",G[0]),R[0]&32&&Pe(d,"code",G[5]),R[0]&65536&&Pe(d,"output",G[16]),R[0]&2097152&&Pe(d,"canvas",G[21]),R[0]&256&&Pe(d,"id",G[8]),R[0]&512&&Pe(d,"save",G[9]),R[0]&131072&&Pe(d,"iserror",G[17])},i:Tt,o:Tt,d(G){G&&ur(e),g&&g.d(),I.d(),t[31](null),h=!1,No(f)}}}function uN(t,e,n){let{language:r}=e,{syntax:i}=e,{type:s="normal"}=e,{theme:o="light"}=e,{code:a=""}=e,{userCode:l=""}=e,{offline:c=!1}=e,{webworker:m}=e,{id:p=""}=e,{save:u=!1}=e,{downloadable:d=!1}=e,h,f,g,y,Z,I="",G=!1,R="",C=!1,V=!1,x;Ls(()=>{n(1,l=a)});function w(E){n(19,C=!0),n(18,R=E),setTimeout(function(){n(19,C=!1)},1e3)}function k(E){n(0,o=E?"dark":"light"),TY(f,Z,E)}document.addEventListener("fullscreenchange",E=>{n(20,V=document.fullscreenElement!=null)});const A=E=>{k(E.detail.darkMode)},Y=()=>{V?document.exitFullscreen():h.requestFullscreen()},U=E=>{w(E.detail)},M=E=>{n(16,I=E.detail.output),n(17,G=E.detail.outputError)},j=E=>{n(21,x=E.detail.canvas)},K=E=>{n(12,f=E.detail.editor),n(13,g=E.detail.tabsConfiguration),n(14,y=E.detail.editableFilterConfiguration),n(15,Z=E.detail.darkModeConfiguration)},P=E=>{n(1,l=E.detail.content),u&&localStorage.setItem(p,E.detail.content)};function J(E){Sr[E?"unshift":"push"](()=>{h=E,n(11,h)})}return t.$$set=E=>{"language"in E&&n(2,r=E.language),"syntax"in E&&n(3,i=E.syntax),"type"in E&&n(4,s=E.type),"theme"in E&&n(0,o=E.theme),"code"in E&&n(5,a=E.code),"userCode"in E&&n(1,l=E.userCode),"offline"in E&&n(6,c=E.offline),"webworker"in E&&n(7,m=E.webworker),"id"in E&&n(8,p=E.id),"save"in E&&n(9,u=E.save),"downloadable"in E&&n(10,d=E.downloadable)},t.$$.update=()=>{t.$$.dirty[0]&2053&&h&&(h.style.setProperty("--output-height",r=="p5"||r=="processing"?"50%":"30%"),h.style.setProperty("--main-output-bg-color",o=="dark"?"#333842":"#f5f5f5"),h.style.setProperty("--main-output-text-color",o=="dark"?"#cccccc":"#303030"),h.style.setProperty("--output-text-color",o=="dark"?"#eeeeee":"#303030"),h.style.setProperty("--run-button-bg-color",o=="dark"?"#333842":"white"),h.style.setProperty("--run-button-bg-color-hover",o=="dark"?"#2C313A":"#eeeeee"),h.style.setProperty("--run-button-text-color",o=="dark"?"white":"black"),h.style.setProperty("--table-th-color",(o=="dark","#dddddd")),h.style.setProperty("--table-tr-even-color",o=="dark"?"#404652":"#e8e8e8"),h.style.setProperty("--table-tr-hover-color",o=="dark"?"#252930":"#cccccc"),h.style.setProperty("--table-th-background-color",(o=="dark","#362f4b")),h.style.setProperty("--table-th-text-color",(o=="dark","white")),h.style.setProperty("--theme-color",o=="dark"?"#cccccc":"#ffee00"))},[o,l,r,i,s,a,c,m,p,u,d,h,f,g,y,Z,I,G,R,C,V,x,w,k,A,Y,U,M,j,K,P,J]}class dN extends Vi{constructor(e){super(),this.shadowRoot.innerHTML='<style>:host{--error-color:red;--run-btn-main-color:#00cc3d;--run-btn-active-color:#00aa33;--run-btn-shadow-color:#00cc3d81;--run-btn-active-shadow-color:#00cc3d3d}#code-container>*{margin:0;padding:0;vertical-align:baseline;line-height:normal;font-size:medium;text-align:left}#code-container{font-family:"Roboto", sans-serif;font-weight:300;background-color:white;color:black;position:relative;width:100%;height:100%}</style>',Mi(this,{target:this.shadowRoot,props:Ni(this.attributes),customElement:!0},uN,cN,Wi,{language:2,syntax:3,type:4,theme:0,code:5,userCode:1,offline:6,webworker:7,id:8,save:9,downloadable:10},null,[-1,-1]),e&&(e.target&&Ut(e.target,this,e.anchor),e.props&&(this.$set(e.props),mt()))}static get observedAttributes(){return["language","syntax","type","theme","code","userCode","offline","webworker","id","save","downloadable"]}get language(){return this.$$.ctx[2]}set language(e){this.$$set({language:e}),mt()}get syntax(){return this.$$.ctx[3]}set syntax(e){this.$$set({syntax:e}),mt()}get type(){return this.$$.ctx[4]}set type(e){this.$$set({type:e}),mt()}get theme(){return this.$$.ctx[0]}set theme(e){this.$$set({theme:e}),mt()}get code(){return this.$$.ctx[5]}set code(e){this.$$set({code:e}),mt()}get userCode(){return this.$$.ctx[1]}set userCode(e){this.$$set({userCode:e}),mt()}get offline(){return this.$$.ctx[6]}set offline(e){this.$$set({offline:e}),mt()}get webworker(){return this.$$.ctx[7]}set webworker(e){this.$$set({webworker:e}),mt()}get id(){return this.$$.ctx[8]}set id(e){this.$$set({id:e}),mt()}get save(){return this.$$.ctx[9]}set save(e){this.$$set({save:e}),mt()}get downloadable(){return this.$$.ctx[10]}set downloadable(e){this.$$set({downloadable:e}),mt()}}customElements.define("base-editor",dN);const cZ="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBOZT10eXBlb2YgZ2xvYmFsVGhpczwidSI/Z2xvYmFsVGhpczp0eXBlb2Ygd2luZG93PCJ1Ij93aW5kb3c6dHlwZW9mIGdsb2JhbDwidSI/Z2xvYmFsOnR5cGVvZiBzZWxmPCJ1Ij9zZWxmOnt9LGtlPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oYmUsSWUpeyhmdW5jdGlvbihUZSxTZSl7YmUuZXhwb3J0cz1TZSgpfSkoTmUsZnVuY3Rpb24oKXtyZXR1cm4oKCk9Pnt2YXIgVGU9ezY1NTpmdW5jdGlvbihmZSx1LEspe3ZhciBtLGc9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChtPWZ1bmN0aW9uKEgsUCl7cmV0dXJuKG09T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHgsUil7eC5fX3Byb3RvX189Un18fGZ1bmN0aW9uKHgsUil7Zm9yKHZhciBfIGluIFIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFIsXykmJih4W19dPVJbX10pfSkoSCxQKX0sZnVuY3Rpb24oSCxQKXtpZih0eXBlb2YgUCE9ImZ1bmN0aW9uIiYmUCE9PW51bGwpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyhQKSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiB4KCl7dGhpcy5jb25zdHJ1Y3Rvcj1IfW0oSCxQKSxILnByb3RvdHlwZT1QPT09bnVsbD9PYmplY3QuY3JlYXRlKFApOih4LnByb3RvdHlwZT1QLnByb3RvdHlwZSxuZXcgeCl9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5FeGNlcHRpb25BbGlhcz11LkRpcmVjdEV4Y2VwdGlvbkJpbmRpbmc9dS5EYXRhdHlwZUJpbmRpbmc9dS5UeXBlQmluZGluZz11LkZ1bmN0aW9uVmFsdWVCaW5kaW5nPXUuVmFsdWVCaW5kaW5nPXUuTm9uZml4RGVjbGFyYXRpb249dS5JbmZpeFJEZWNsYXJhdGlvbj11LkluZml4RGVjbGFyYXRpb249dS5BYnN0eXBlRGVjbGFyYXRpb249dS5FdmFsdWF0aW9uPXUuRnVuY3Rpb25EZWNsYXJhdGlvbj11LlNlcXVlbnRpYWxEZWNsYXJhdGlvbj11LkVtcHR5RGVjbGFyYXRpb249dS5PcGVuRGVjbGFyYXRpb249dS5Mb2NhbERlY2xhcmF0aW9uPXUuRXhjZXB0aW9uRGVjbGFyYXRpb249dS5EYXRhdHlwZVJlcGxpY2F0aW9uPXUuRGF0YXR5cGVEZWNsYXJhdGlvbj11LlR5cGVEZWNsYXJhdGlvbj11LlZhbHVlRGVjbGFyYXRpb249dS5EZWNsYXJhdGlvbj12b2lkIDA7dmFyIHM9Syg0OTQpLHE9Syg1MzQpLEI9Syg2OTkpLE09SygzNjcpLFY9Syg3NTgpLEQ9SygxMDYpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBIKCl7fXJldHVybiBILnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24oUCx4LFIsXyxXLFEpe3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiTm90IHlldCBpbXBsZW1lbnRlZC4iKX0sSC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oUCx4KXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIk5vdCB5ZXQgaW1wbGVtZW50ZWQuIil9LEgucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJOb3QgeWV0IGltcGxlbWVudGVkLiIpfSxILnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiTm90IHlldCBpbXBsZW1lbnRlZC4iKX0sSC5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlQmluZGluZz1mdW5jdGlvbihQLHgpe3JldHVybiBuZXcgU2V0fSxIfSgpO3UuRGVjbGFyYXRpb249aDt2YXIgQT1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgsUixfKXtfPT09dm9pZCAwJiYoXz0wKTt2YXIgVz1ILmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIFcudHlwZVZhcmlhYmxlU2VxdWVuY2U9eCxXLnZhbHVlQmluZGluZz1SLFcuaWQ9XyxXfXJldHVybiBnKFAsSCksUC5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlQmluZGluZz1mdW5jdGlvbih4LFIpe2Zvcih2YXIgXz0wO188dGhpcy52YWx1ZUJpbmRpbmcubGVuZ3RoOysrXyl0aGlzLnZhbHVlQmluZGluZ1tfXS5wYXR0ZXJuLmFzc2VydFVuaXF1ZUJpbmRpbmcoeCxSKSx0aGlzLnZhbHVlQmluZGluZ1tfXS5leHByZXNzaW9uLmFzc2VydFVuaXF1ZUJpbmRpbmcoeCxSKTtyZXR1cm4gbmV3IFNldH0sUC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIHg9W10sUj0wO1I8dGhpcy52YWx1ZUJpbmRpbmcubGVuZ3RoOysrUil4LnB1c2gobmV3IHAodGhpcy52YWx1ZUJpbmRpbmdbUl0uaXNSZWN1cnNpdmUsdGhpcy52YWx1ZUJpbmRpbmdbUl0ucGF0dGVybi5zaW1wbGlmeSgpLHRoaXMudmFsdWVCaW5kaW5nW1JdLmV4cHJlc3Npb24uc2ltcGxpZnkoKSkpO3JldHVybiBuZXcgUCh0aGlzLnR5cGVWYXJpYWJsZVNlcXVlbmNlLHgsdGhpcy5pZCl9LFAucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbih4LFIsXyxXLFEsbmUpe2Zvcih2YXIgRj1bXSxiPVtdLGw9W10sdD1bXSxuPVIsaT0wLGE9ZnVuY3Rpb24oKXtpZihmLnZhbHVlQmluZGluZ1tpXS5pc1JlY3Vyc2l2ZSl7Zm9yKHZhciB1ZT1pO3VlPGYudmFsdWVCaW5kaW5nLmxlbmd0aDsrK3VlKXtmb3IodmFyIGllPWYudmFsdWVCaW5kaW5nW3VlXS5wYXR0ZXJuO2llIGluc3RhbmNlb2Ygcy5UeXBlZEV4cHJlc3Npb247KWllPWllLmV4cHJlc3Npb247dmFyIHBlPWllLm5hbWUuZ2V0VGV4dCgpO0YucHVzaChbcGUsbmV3IEIuVHlwZVZhcmlhYmxlQmluZCgiJ2EiLG5ldyBCLlR5cGVWYXJpYWJsZUJpbmQoIidiIixuZXcgQi5GdW5jdGlvblR5cGUobmV3IEIuVHlwZVZhcmlhYmxlKCInYSIpLG5ldyBCLlR5cGVWYXJpYWJsZSgiJ2IiKSkpKV0pfXJldHVybiJicmVhayJ9dmFyIHJlPSExO3RyeXt2YXIgYWU9eC5nZXROZXN0ZWRTdGF0ZSh4LmlkKSxjZT1uZXcgTWFwO24uZm9yRWFjaChmdW5jdGlvbihoZSxnZSl7Y2U9Y2Uuc2V0KGdlLGhlKX0pO3ZhciBsZT1uZXcgTWFwO1cuZm9yRWFjaChmdW5jdGlvbihoZSxnZSl7bGU9bGUuc2V0KGdlLG51bGwpfSksZi52YWx1ZUJpbmRpbmdbaV0uZ2V0VHlwZShmLnR5cGVWYXJpYWJsZVNlcXVlbmNlLGFlLGNlLF8sbGUsUSl9Y2F0Y2h7cmU9ITB9dmFyIGRlPWYudmFsdWVCaW5kaW5nW2ldLmdldFR5cGUoZi50eXBlVmFyaWFibGVTZXF1ZW5jZSx4LG4sXyxXLFEpO2Zvcih0PXQuY29uY2F0KGRlWzFdKSxuPWRlWzJdLF89ZGVbM10seC52YWx1ZUlkZW50aWZpZXJJZD1kZVs0XSx1ZT0wO3VlPGRlWzBdLmxlbmd0aDsrK3VlKWwucHVzaChyZSksYi5wdXNoKGRlWzBdW3VlXSl9LGY9dGhpcztpPHRoaXMudmFsdWVCaW5kaW5nLmxlbmd0aCYmYSgpIT09ImJyZWFrIjsrK2kpO2Zvcih2YXIgUz14LmdldE5lc3RlZFN0YXRlKHguaWQpLEw9MDtMPEYubGVuZ3RoOysrTCl7aWYoIShuZSYmbmUuYWxsb3dTdWNjZXNzb3JNTD09PSEwfHxGW0xdWzFdLmlzUmVzb2x2ZWQoKSkpdGhyb3cgbmV3IFYuRWxhYm9yYXRpb25FcnJvcigiVW5yZXNvbHZlZCByZWNvcmQgdHlwZTogTXVsdGlwbGUgbm9uLWFncmVlaW5nIHR5cGVzIHBvc3NpYmxlLiIpO1Muc2V0U3RhdGljVmFsdWUoRltMXVswXSxGW0xdWzFdLE0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSl9dmFyIGs9dCxVPW5ldyBNYXA7bi5mb3JFYWNoKGZ1bmN0aW9uKHVlLGllKXtVPVUuc2V0KGllLHVlKX0pO2Zvcih2YXIgaj1fLFg9Uy52YWx1ZUlkZW50aWZpZXJJZCxaPXRoaXMudmFsdWVCaW5kaW5nLmxlbmd0aC1pKzEsZWU9MDtlZTxaKlorMTsrK2VlKXt0PWssbj1uZXcgTWFwLFUuZm9yRWFjaChmdW5jdGlvbih1ZSxpZSl7bj1uLnNldChpZSx1ZSl9KSxfPWosUy52YWx1ZUlkZW50aWZpZXJJZD1YO3ZhciB0ZT0hMSxvZT1mdW5jdGlvbih1ZSl7dmFyIGllPSExO2lmKCFRKXRyeXt2YXIgcGU9Uy5nZXROZXN0ZWRTdGF0ZSh4LmlkKSxyZT1uZXcgTWFwO24uZm9yRWFjaChmdW5jdGlvbihkZSxoZSl7cmU9cmUuc2V0KGhlLGRlKX0pLHNlLnZhbHVlQmluZGluZ1t1ZV0uZ2V0VHlwZShzZS50eXBlVmFyaWFibGVTZXF1ZW5jZSxwZSxyZSxfLG5ldyBNYXAsUSl9Y2F0Y2h7aWU9ITB9dmFyIGFlPXNlLnZhbHVlQmluZGluZ1t1ZV0uZ2V0VHlwZShzZS50eXBlVmFyaWFibGVTZXF1ZW5jZSxTLG4sXyxXLFEpO3Q9dC5jb25jYXQoYWVbMV0pLG49YWVbMl0sXz1hZVszXSxTLnZhbHVlSWRlbnRpZmllcklkPWFlWzRdO2Zvcih2YXIgY2U9MDtjZTxhZVswXS5sZW5ndGg7KytjZSl7dmFyIGxlPVMuZ2V0U3RhdGljVmFsdWUoYWVbMF1bY2VdWzBdKTtpZihsZSE9PXZvaWQgMCYmbGVbMF0ubm9ybWFsaXplKClbMF0uZXF1YWxzKGFlWzBdW2NlXVsxXS5ub3JtYWxpemUoKVswXSl8fCh0ZT0hMCksIShuZSYmbmUuYWxsb3dTdWNjZXNzb3JNTD09PSEwfHxhZVswXVtjZV1bMV0uaXNSZXNvbHZlZCgpKSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCJVbnJlc29sdmVkIHJlY29yZCB0eXBlOiBNdWx0aXBsZSBub24tYWdyZWVpbmcgdHlwZXMgcG9zc2libGUuIik7aWV8fChXPVcuc2V0KGFlWzBdW2NlXVswXSxhZVswXVtjZV1bMV0pKSxTLnNldFN0YXRpY1ZhbHVlKGFlWzBdW2NlXVswXSxhZVswXVtjZV1bMV0sTS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKX19LHNlPXRoaXM7Zm9yKEw9aTtMPHRoaXMudmFsdWVCaW5kaW5nLmxlbmd0aDsrK0wpb2UoTCk7aWYoIXRlKWJyZWFrO2lmKGVlPT09WipaKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIk15IGJyYWluIHRyZW1ibGVzOyB0b28gbXVjaCBjaXJjdWxhcml0eS4iKX1mb3IoTD0wO0w8Yi5sZW5ndGg7KytMKXtpZighKG5lJiZuZS5hbGxvd1N1Y2Nlc3Nvck1MPT09ITB8fGJbTF1bMV0uaXNSZXNvbHZlZCgpKSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCJVbnJlc29sdmVkIHJlY29yZCB0eXBlOiBNdWx0aXBsZSBub24tYWdyZWVpbmcgdHlwZXMgcG9zc2libGUuIik7bFtMXXx8KFc9Vy5zZXQoYltMXVswXSxiW0xdWzFdKSksUy5zZXRTdGF0aWNWYWx1ZShiW0xdWzBdLGJbTF1bMV0sTS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKX1yZXR1cm5bUyx0LG4sX119LFAucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHgsUil7dmFyIF89eC5zdGF0ZTt4LnN0ZXA9PT12b2lkIDAmJih4LnJlc3VsdD1bXSx4LnJlY3Vyc2l2ZXM9W10seC5pc1JlYz0hMSx4LnN0ZXA9LTEpO3ZhciBXPXgucmVzdWx0LFE9eC5yZWN1cnNpdmVzLG5lPXguaXNSZWMsRj14LnN0ZXA7aWYoRj49MCl7dmFyIGI9eC5yZWNSZXN1bHQ7aWYoYj09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkhvdyBpcyB0aGlzIHVuZGVmaW5lZD8gIitKU09OLnN0cmluZ2lmeShiKSk7aWYodGhpcy52YWx1ZUJpbmRpbmdbRl0uaXNSZWN1cnNpdmUmJihuZT0hMCksYi5oYXNUaHJvd24pcmV0dXJue25ld1N0YXRlOl8sdmFsdWU6Yi52YWx1ZSxoYXNUaHJvd246ITB9O3ZhciBsPXRoaXMudmFsdWVCaW5kaW5nW0ZdLnBhdHRlcm4ubWF0Y2hlcyhfLGIudmFsdWUpO2lmKGw9PT12b2lkIDApcmV0dXJue25ld1N0YXRlOl8sdmFsdWU6bmV3IEQuRXhjZXB0aW9uVmFsdWUoIkJpbmQiLHZvaWQgMCwwLDEpLGhhc1Rocm93bjohMH07Zm9yKHZhciB0PTA7dDxsLmxlbmd0aDsrK3QpbmU/US5wdXNoKGxbdF0pOlcucHVzaChsW3RdKX1pZigrK0Y8dGhpcy52YWx1ZUJpbmRpbmcubGVuZ3RoKXJldHVybiB4LnN0ZXA9Rix4LmlzUmVjPW5lLFIucHVzaCh7bmV4dDp0aGlzLHBhcmFtczp4fSksdm9pZCBSLnB1c2goe25leHQ6dGhpcy52YWx1ZUJpbmRpbmdbRl0uZXhwcmVzc2lvbixwYXJhbXM6e3N0YXRlOl8sbW9kaWZpYWJsZTp4Lm1vZGlmaWFibGUscmVjUmVzdWx0OnZvaWQgMH19KTt2YXIgbj1fLmdldE5lc3RlZFN0YXRlKF8uaWQpO2Zvcih0PTA7dDxRLmxlbmd0aDsrK3Qpe2lmKFFbdF1bMF09PT0iPSIpdGhyb3cgbmV3IFYuRXZhbHVhdGlvbkVycm9yKCJBbGwgZGVjbGFyYXRpb25zIGFyZSBlcXVhbCwgYnV0IHNvbWUgZGVjbGFyYXRpb25zIGFyZSBtb3JlIGVxdWFsIHRoYW4gb3RoZXJzLiIpO1FbdF1bMV1pbnN0YW5jZW9mIEQuRnVuY3Rpb25WYWx1ZT9uLnNldER5bmFtaWNWYWx1ZShRW3RdWzBdLG5ldyBELkZ1bmN0aW9uVmFsdWUoUVt0XVsxXS5zdGF0ZSxRLFFbdF1bMV0uYm9keSksTS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKTpuLnNldER5bmFtaWNWYWx1ZShRW3RdWzBdLFFbdF1bMV0sTS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKX1mb3IodD0wO3Q8Vy5sZW5ndGg7Kyt0KXtpZihXW3RdWzBdPT09Ij0iKXRocm93IG5ldyBWLkV2YWx1YXRpb25FcnJvcigiQWxsIGRlY2xhcmF0aW9ucyBhcmUgZXF1YWwsIGJ1dCBzb21lIGRlY2xhcmF0aW9ucyBhcmUgbW9yZSBlcXVhbCB0aGFuIG90aGVycy4iKTtuLnNldER5bmFtaWNWYWx1ZShXW3RdWzBdLFdbdF1bMV0sTS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKX1yZXR1cm57bmV3U3RhdGU6bix2YWx1ZTp2b2lkIDAsaGFzVGhyb3duOiExfX0sUC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHg9InZhbCIsUj0wO1I8dGhpcy50eXBlVmFyaWFibGVTZXF1ZW5jZS5sZW5ndGg7KytSKXgrPSIgIit0aGlzLnR5cGVWYXJpYWJsZVNlcXVlbmNlLnRvU3RyaW5nKCk7Zm9yKFI9MDtSPHRoaXMudmFsdWVCaW5kaW5nLmxlbmd0aDsrK1IpUj4wJiYoeCs9IiBhbmQiKSx4Kz0iICIrdGhpcy52YWx1ZUJpbmRpbmdbUl07cmV0dXJuIHgrIjsifSxQfShoKTt1LlZhbHVlRGVjbGFyYXRpb249QTt2YXIgST1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgsUil7Uj09PXZvaWQgMCYmKFI9MCk7dmFyIF89SC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBfLnR5cGVCaW5kaW5nPXgsXy5pZD1SLF99cmV0dXJuIGcoUCxIKSxQLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe2Zvcih2YXIgeD1bXSxSPTA7Ujx0aGlzLnR5cGVCaW5kaW5nLmxlbmd0aDsrK1IpeC5wdXNoKG5ldyB3KHRoaXMudHlwZUJpbmRpbmdbUl0udHlwZVZhcmlhYmxlU2VxdWVuY2UsdGhpcy50eXBlQmluZGluZ1tSXS5uYW1lLHRoaXMudHlwZUJpbmRpbmdbUl0udHlwZS5zaW1wbGlmeSgpKSk7cmV0dXJuIG5ldyBQKHgsdGhpcy5pZCl9LFAucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbih4LFIsXyxXLFEsbmUpe2Zvcih2YXIgRj1mdW5jdGlvbih0KXtmb3IodmFyIG49bmV3IFNldCxpPVtdLGE9MCxmPWIudHlwZUJpbmRpbmdbdF0udHlwZVZhcmlhYmxlU2VxdWVuY2U7YTxmLmxlbmd0aDthKyspe3ZhciBTPWZbYV07bj1uLmFkZChTLnRvU3RyaW5nKCkpfWlmKGIudHlwZUJpbmRpbmdbdF0udHlwZS5pbnN0YW50aWF0ZSh4LFIpLmdldFR5cGVWYXJpYWJsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGssVSl7bi5oYXMoVSl8fGkucHVzaChVKX0pLGkubGVuZ3RoPjApdGhyb3cgVi5FbGFib3JhdGlvbkVycm9yLmdldFVuZ3VhcmRlZChpKTt2YXIgTD14LmdldFN0YXRpY1R5cGUoYi50eXBlQmluZGluZ1t0XS5uYW1lLmdldFRleHQoKSk7aWYoTCE9PXZvaWQgMCYmTC50eXBlIGluc3RhbmNlb2YgQi5DdXN0b21UeXBlKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIk5uYWFhfiBSZWRlZmluaW5nIHR5cGVzIGFzIGFsaWFzZXMgaXMgbm90IHlldCBpbXBsZW1lbnRlZC4iKTt4LnNldFN0YXRpY1R5cGUoYi50eXBlQmluZGluZ1t0XS5uYW1lLmdldFRleHQoKSxuZXcgQi5GdW5jdGlvblR5cGUobmV3IEIuQ3VzdG9tVHlwZShiLnR5cGVCaW5kaW5nW3RdLm5hbWUuZ2V0VGV4dCgpLGIudHlwZUJpbmRpbmdbdF0udHlwZVZhcmlhYmxlU2VxdWVuY2UpLGIudHlwZUJpbmRpbmdbdF0udHlwZS5pbnN0YW50aWF0ZSh4LFIpKSxbXSxiLnR5cGVCaW5kaW5nW3RdLnR5cGVWYXJpYWJsZVNlcXVlbmNlLmxlbmd0aCwhMCl9LGI9dGhpcyxsPTA7bDx0aGlzLnR5cGVCaW5kaW5nLmxlbmd0aDsrK2wpRihsKTtyZXR1cm5beCxbXSxSLF9dfSxQLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih4LFIpe2Zvcih2YXIgXz14LnN0YXRlLFc9MDtXPHRoaXMudHlwZUJpbmRpbmcubGVuZ3RoOysrVylfLnNldER5bmFtaWNUeXBlKHRoaXMudHlwZUJpbmRpbmdbV10ubmFtZS5nZXRUZXh0KCksW10pO3JldHVybntuZXdTdGF0ZTpfLHZhbHVlOnZvaWQgMCxoYXNUaHJvd246ITF9fSxQLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgeD0idHlwZSIsUj0wO1I8dGhpcy50eXBlQmluZGluZy5sZW5ndGg7KytSKVI+MCYmKHgrPSIgYW5kIikseCs9IiA8c3R1ZmY+ICIrdGhpcy50eXBlQmluZGluZ1tSXS5uYW1lLmdldFRleHQoKSx4Kz0iID0gIit0aGlzLnR5cGVCaW5kaW5nW1JdLnR5cGU7cmV0dXJuIHgrIjsifSxQfShoKTt1LlR5cGVEZWNsYXJhdGlvbj1JO3ZhciBPPWZ1bmN0aW9uKEgpe2Z1bmN0aW9uIFAoeCxSLF8sVyl7Xz09PXZvaWQgMCYmKF89MCksVz09PXZvaWQgMCYmKFc9e30pO3ZhciBRPUguY2FsbCh0aGlzKXx8dGhpcztpZihRLmRhdGF0eXBlQmluZGluZz14LFEudHlwZUJpbmRpbmc9UixRLmlkPV8sUS5naXZlbklkcz1XLFEudHlwZUJpbmRpbmchPT12b2lkIDApdGhyb3cgbmV3IFYuRmVhdHVyZURpc2FibGVkRXJyb3IoJ1dobyBpcyAid2l0aHR5cGUiPycpO3JldHVybiBRfXJldHVybiBnKFAsSCksUC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIHg9W10sUj0wO1I8dGhpcy5kYXRhdHlwZUJpbmRpbmcubGVuZ3RoOysrUil7Zm9yKHZhciBfPVtdLFc9MDtXPHRoaXMuZGF0YXR5cGVCaW5kaW5nW1JdLnR5cGUubGVuZ3RoOysrVyl0aGlzLmRhdGF0eXBlQmluZGluZ1tSXS50eXBlW1ddWzFdIT09dm9pZCAwP18ucHVzaChbdGhpcy5kYXRhdHlwZUJpbmRpbmdbUl0udHlwZVtXXVswXSx0aGlzLmRhdGF0eXBlQmluZGluZ1tSXS50eXBlW1ddWzFdLnNpbXBsaWZ5KCldKTpfLnB1c2godGhpcy5kYXRhdHlwZUJpbmRpbmdbUl0udHlwZVtXXSk7eC5wdXNoKG5ldyBUKHRoaXMuZGF0YXR5cGVCaW5kaW5nW1JdLnR5cGVWYXJpYWJsZVNlcXVlbmNlLHRoaXMuZGF0YXR5cGVCaW5kaW5nW1JdLm5hbWUsXykpfXJldHVybiBuZXcgUCh4LHZvaWQgMCx0aGlzLmlkKX0sUC5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKHgsUixfLFcsUSxuZSl7Zm9yKHZhciBGPVtdLGI9MDtiPHRoaXMuZGF0YXR5cGVCaW5kaW5nLmxlbmd0aDsrK2Ipe3ZhciBsPXRoaXMuZGF0YXR5cGVCaW5kaW5nW2JdLmdldFR5cGUoeCxRLFcsITApO3guc2V0U3RhdGljVHlwZShsWzJdWzBdLGxbMV0sbFsyXVsxXSx0aGlzLmRhdGF0eXBlQmluZGluZ1tiXS50eXBlVmFyaWFibGVTZXF1ZW5jZS5sZW5ndGgsITApO2Zvcih2YXIgdD0wO3Q8bFswXS5sZW5ndGg7Kyt0KXguc2V0U3RhdGljVmFsdWUobFswXVt0XVswXSxsWzBdW3RdWzFdLE0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUil9Zm9yKGI9MDtiPHRoaXMuZGF0YXR5cGVCaW5kaW5nLmxlbmd0aDsrK2Ipe2ZvcihsPXRoaXMuZGF0YXR5cGVCaW5kaW5nW2JdLmdldFR5cGUoeCxRLFcpLHQ9MDt0PGxbMF0ubGVuZ3RoOysrdCl7aWYoIU0uU3RhdGUuYWxsb3dzUmViaW5kKGxbMF1bdF1bMF0pKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1lvdSBzaW1wbHkgY2Fubm90IHJlYmluZCAiJytsWzBdW3RdWzBdKyciLicpO0YucHVzaChsWzBdW3RdWzFdKSx4LnNldFN0YXRpY1ZhbHVlKGxbMF1bdF1bMF0sbFswXVt0XVsxXSxNLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfQ09OU1RSVUNUT1IpfXguc2V0U3RhdGljVHlwZShsWzJdWzBdLGxbMV0sbFsyXVsxXSx0aGlzLmRhdGF0eXBlQmluZGluZ1tiXS50eXBlVmFyaWFibGVTZXF1ZW5jZS5sZW5ndGgsITApLHguaW5jcmVtZW50VmFsdWVJZGVudGlmaWVySWQobFsyXVswXSl9Zm9yKGI9MDtiPEYubGVuZ3RoOysrYilGW2JdLmluc3RhbnRpYXRlKHgsbmV3IE1hcCk7cmV0dXJuW3gsW10sUixfXX0sUC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oeCxSKXtmb3IodmFyIF89eC5zdGF0ZSxXPXgubW9kaWZpYWJsZSxRPTA7UTx0aGlzLmRhdGF0eXBlQmluZGluZy5sZW5ndGg7KytRKXtmb3IodmFyIG5lPXRoaXMuZGF0YXR5cGVCaW5kaW5nW1FdLmNvbXB1dGUoXyxXKSxGPTA7RjxuZVswXS5sZW5ndGg7KytGKXtpZighTS5TdGF0ZS5hbGxvd3NSZWJpbmQobmVbMF1bRl1bMF0pKXRocm93IG5ldyBWLkV2YWx1YXRpb25FcnJvcignWW91IHNpbXBseSBjYW5ub3QgcmViaW5kICInK25lWzBdW0ZdWzBdKyciLicpO18uc2V0RHluYW1pY1ZhbHVlKG5lWzBdW0ZdWzBdLG5lWzBdW0ZdWzFdLE0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUil9Xy5zZXREeW5hbWljVHlwZShuZVsxXVswXSxuZVsxXVsxXSksdGhpcy5naXZlbklkc1tuZVsxXVswXV09PT12b2lkIDAmJihXLmluY3JlbWVudFZhbHVlSWRlbnRpZmllcklkKG5lWzFdWzBdKSx0aGlzLmdpdmVuSWRzW25lWzFdWzBdXT1fLmdldFZhbHVlSWRlbnRpZmllcklkKG5lWzFdWzBdKSl9cmV0dXJue25ld1N0YXRlOl8sdmFsdWU6dm9pZCAwLGhhc1Rocm93bjohMX19LFAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB4PSJkYXRhdHlwZSIsUj0wO1I8dGhpcy5kYXRhdHlwZUJpbmRpbmcubGVuZ3RoOysrUil7Uj4wJiYoeCs9IiBhbmQiKSx4Kz0iICIrdGhpcy5kYXRhdHlwZUJpbmRpbmdbUl0ubmFtZS5nZXRUZXh0KCkrIiA9Ijtmb3IodmFyIF89MDtfPHRoaXMuZGF0YXR5cGVCaW5kaW5nW1JdLnR5cGUubGVuZ3RoOysrXylfPjAmJih4Kz0iIHwiKSx4Kz0iICIrdGhpcy5kYXRhdHlwZUJpbmRpbmdbUl0udHlwZVtfXVswXS5nZXRUZXh0KCksdGhpcy5kYXRhdHlwZUJpbmRpbmdbUl0udHlwZVtfXVsxXSE9PXZvaWQgMCYmKHgrPSIgb2YgIit0aGlzLmRhdGF0eXBlQmluZGluZ1tSXS50eXBlW19dWzFdKX1yZXR1cm4geCsiOyJ9LFB9KGgpO3UuRGF0YXR5cGVEZWNsYXJhdGlvbj1PO3ZhciBFPWZ1bmN0aW9uKEgpe2Z1bmN0aW9uIFAoeCxSLF8pe189PT12b2lkIDAmJihfPTApO3ZhciBXPUguY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gVy5uYW1lPXgsVy5vbGRuYW1lPVIsVy5pZD1fLFd9cmV0dXJuIGcoUCxIKSxQLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxQLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24oeCxSLF8sVyxRLG5lKXt2YXIgRj12b2lkIDA7aWYodGhpcy5vbGRuYW1lIGluc3RhbmNlb2YgcS5Mb25nSWRlbnRpZmllclRva2VuKXt2YXIgYj14LmdldEFuZFJlc29sdmVTdGF0aWNTdHJ1Y3R1cmUodGhpcy5vbGRuYW1lKTtiIT09dm9pZCAwJiYoRj1iLmdldFR5cGUodGhpcy5vbGRuYW1lLmlkLmdldFRleHQoKSkpfWVsc2UgRj14LmdldFN0YXRpY1R5cGUodGhpcy5vbGRuYW1lLmdldFRleHQoKSk7aWYoRj09PXZvaWQgMCl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCdUaGUgZGF0YXR5cGUgIicrdGhpcy5vbGRuYW1lLmdldFRleHQoKStgIiBkb2Vzbid0IGV4aXN0LmApO3ZhciBsPUYudHlwZS5pbnN0YW50aWF0ZSh4LFIpO3JldHVybiB4LnNldFN0YXRpY1R5cGUodGhpcy5uYW1lLmdldFRleHQoKSxuZXcgQi5GdW5jdGlvblR5cGUobmV3IEIuQ3VzdG9tVHlwZSh0aGlzLm5hbWUuZ2V0VGV4dCgpLGwudHlwZUFyZ3VtZW50cyx0aGlzLm9sZG5hbWUgaW5zdGFuY2VvZiBxLkxvbmdJZGVudGlmaWVyVG9rZW4/dGhpcy5vbGRuYW1lOnZvaWQgMCksbCksW10sRi5hcml0eSxGLmFsbG93c0VxdWFsaXR5KSxbeCxbXSxSLF9dfSxQLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih4LFIpe3ZhciBfPXguc3RhdGUsVz1bXTtpZih0aGlzLm9sZG5hbWUgaW5zdGFuY2VvZiBxLkxvbmdJZGVudGlmaWVyVG9rZW4pe3ZhciBRPV8uZ2V0QW5kUmVzb2x2ZUR5bmFtaWNTdHJ1Y3R1cmUodGhpcy5vbGRuYW1lKTtRIT09dm9pZCAwJiYoVz1RLmdldFR5cGUodGhpcy5vbGRuYW1lLmlkLmdldFRleHQoKSkpfWVsc2UgVz1fLmdldER5bmFtaWNUeXBlKHRoaXMub2xkbmFtZS5nZXRUZXh0KCkpO2lmKFc9PT12b2lkIDApdGhyb3cgbmV3IFYuRXZhbHVhdGlvbkVycm9yKCdUaGUgZGF0YXR5cGUgIicrdGhpcy5vbGRuYW1lLmdldFRleHQoKSsnIiBkb2VzIG5vdCBleGlzdC4nKTtyZXR1cm4gXy5zZXREeW5hbWljVHlwZSh0aGlzLm5hbWUuZ2V0VGV4dCgpLFcpLHtuZXdTdGF0ZTpfLHZhbHVlOnZvaWQgMCxoYXNUaHJvd246ITF9fSxQLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJkYXRhdHlwZSAiK3RoaXMubmFtZS5nZXRUZXh0KCkrIiA9IGRhdGF0eXBlICIrdGhpcy5vbGRuYW1lLmdldFRleHQoKSsiOyJ9LFB9KGgpO3UuRGF0YXR5cGVSZXBsaWNhdGlvbj1FO3ZhciByPWZ1bmN0aW9uKEgpe2Z1bmN0aW9uIFAoeCxSKXtSPT09dm9pZCAwJiYoUj0wKTt2YXIgXz1ILmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIF8uYmluZGluZ3M9eCxfLmlkPVIsX31yZXR1cm4gZyhQLEgpLFAucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LFAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuImV4Y2VwdGlvbiA8c3R1ZmY+OyJ9LFAucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbih4LFIsXyxXLFEsbmUpe3ZhciBGPW5ldyBTZXQ7Ui5mb3JFYWNoKGZ1bmN0aW9uKGwsdCl7dC5pbmNsdWRlcygiISIpJiYoRj1GLmFkZCh0LnN1YnN0cmluZygxKSkpfSk7Zm9yKHZhciBiPTA7Yjx0aGlzLmJpbmRpbmdzLmxlbmd0aDsrK2IpeD10aGlzLmJpbmRpbmdzW2JdLmVsYWJvcmF0ZSh4LFEsRixuZSk7cmV0dXJuW3gsW10sUixfXX0sUC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oeCxSKXtmb3IodmFyIF89eC5zdGF0ZSxXPTA7Vzx0aGlzLmJpbmRpbmdzLmxlbmd0aDsrK1cpdGhpcy5iaW5kaW5nc1tXXS5ldmFsdWF0ZShfLHgubW9kaWZpYWJsZSk7cmV0dXJue25ld1N0YXRlOl8sdmFsdWU6dm9pZCAwLGhhc1Rocm93bjohMX19LFB9KGgpO3UuRXhjZXB0aW9uRGVjbGFyYXRpb249cjt2YXIgZT1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgsUixfKXtfPT09dm9pZCAwJiYoXz0wKTt2YXIgVz1ILmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIFcuZGVjbGFyYXRpb249eCxXLmJvZHk9UixXLmlkPV8sV31yZXR1cm4gZyhQLEgpLFAucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24oeCxSKXtyZXR1cm4gdGhpcy5kZWNsYXJhdGlvbi5hc3NlcnRVbmlxdWVCaW5kaW5nKHgsUiksdGhpcy5ib2R5LmFzc2VydFVuaXF1ZUJpbmRpbmcoeCxSKSxuZXcgU2V0fSxQLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgUCh0aGlzLmRlY2xhcmF0aW9uLnNpbXBsaWZ5KCksdGhpcy5ib2R5LnNpbXBsaWZ5KCksdGhpcy5pZCl9LFAucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbih4LFIsXyxXLFEsbmUpe3ZhciBGPVt4LmdldE5lc3RlZFN0YXRlKDApLmdldE5lc3RlZFN0YXRlKHguaWQpLFtdLFIsX10sYj1uZXcgTWFwO1cuZm9yRWFjaChmdW5jdGlvbihuLGkpe2I9Yi5zZXQoaSxuKX0pO3ZhciBsPXRoaXMuZGVjbGFyYXRpb24uZWxhYm9yYXRlKEZbMF0sUixfLGIsITEsbmUpO3gudmFsdWVJZGVudGlmaWVySWQ9bFswXS5nZXRJZENoYW5nZXMoMCk7dmFyIHQ9bFswXS5nZXROZXN0ZWRTdGF0ZSh4LmlkKTtyZXR1cm4gRj10aGlzLmJvZHkuZWxhYm9yYXRlKHQsbFsyXSxsWzNdLGIsUSxuZSksdC5wYXJlbnQ9eCxbRlswXSxsWzFdLmNvbmNhdChGWzFdKSxGWzJdLEZbM11dfSxQLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih4LFIpe3ZhciBfPXguc3RhdGUsVz14Lm1vZGlmaWFibGU7eC5zdGVwPT09dm9pZCAwJiYoeC5zdGVwPS0xKTt2YXIgUT14LnN0ZXA7aWYoUT09PS0xKXt2YXIgbmU9Xy5nZXROZXN0ZWRTdGF0ZSgwKSxGPW5lLmdldE5lc3RlZFN0YXRlKF8uaWQpO3JldHVybiBuZS5pbnNpZGVMb2NhbERlY2xCb2R5fHwobmUubG9jYWxEZWNsU3RhcnQ9ITApLHgubnN0YXRlPUYseC5zdGVwPVErMSxSLnB1c2goe25leHQ6dGhpcyxwYXJhbXM6eH0pLHZvaWQgUi5wdXNoKHtuZXh0OnRoaXMuZGVjbGFyYXRpb24scGFyYW1zOntzdGF0ZTpGLG1vZGlmaWFibGU6VyxyZWNSZXN1bHQ6dm9pZCAwfX0pfWlmKFE9PT0wKXtpZigodD14LnJlY1Jlc3VsdCk9PT12b2lkIDB8fHQubmV3U3RhdGU9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJIb3cgaXMgdGhpcyB1bmRlZmluZWQ/Iik7dmFyIGI9dC5uZXdTdGF0ZTtyZXR1cm4gdC5oYXNUaHJvd24/e25ld1N0YXRlOl8sdmFsdWU6dC52YWx1ZSxoYXNUaHJvd246ITB9OigoRj1iLmdldE5lc3RlZFN0YXRlKF8uaWQpKS5pbnNpZGVMb2NhbERlY2xCb2R5PSEwLHgubnN0YXRlPUYseC5yZXM9dCx4LnN0ZXA9USsxLFIucHVzaCh7bmV4dDp0aGlzLHBhcmFtczp4fSksdm9pZCBSLnB1c2goe25leHQ6dGhpcy5ib2R5LHBhcmFtczp7c3RhdGU6Rixtb2RpZmlhYmxlOlcscmVjUmVzdWx0OnZvaWQgMH19KSl9dmFyIGw9eC5yZWNSZXN1bHQsdD0oRj14Lm5zdGF0ZSx4LnJlcyk7aWYobD09PXZvaWQgMHx8dD09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkhvdyBpcyB0aGlzIHVuZGVmaW5lZD8iKTtyZXR1cm4gRi5wYXJlbnQ9XyxsLm5ld1N0YXRlIT09dm9pZCAwJiYobC5uZXdTdGF0ZS5pbnNpZGVMb2NhbERlY2xCb2R5PV8uaW5zaWRlTG9jYWxEZWNsQm9keSksbH0sUC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgeD0ibG9jYWwgIit0aGlzLmRlY2xhcmF0aW9uO3JldHVybih4Kz0iIGluICIrdGhpcy5ib2R5KSsiIGVuZDsifSxQfShoKTt1LkxvY2FsRGVjbGFyYXRpb249ZTt2YXIgbz1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgsUil7Uj09PXZvaWQgMCYmKFI9MCk7dmFyIF89SC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBfLm5hbWVzPXgsXy5pZD1SLF99cmV0dXJuIGcoUCxIKSxQLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxQLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24oeCxSLF8sVyxRLG5lKXtmb3IodmFyIEY9MDtGPHRoaXMubmFtZXMubGVuZ3RoOysrRil7dmFyIGI9dm9pZCAwO2lmKHRoaXMubmFtZXNbRl1pbnN0YW5jZW9mIHEuTG9uZ0lkZW50aWZpZXJUb2tlbj8oYj14LmdldEFuZFJlc29sdmVTdGF0aWNTdHJ1Y3R1cmUodGhpcy5uYW1lc1tGXSkpIT09dm9pZCAwJiYoYj1iLmdldFN0cnVjdHVyZSh0aGlzLm5hbWVzW0ZdLmlkLmdldFRleHQoKSkpOmI9eC5nZXRTdGF0aWNTdHJ1Y3R1cmUodGhpcy5uYW1lc1tGXS5nZXRUZXh0KCkpLGI9PT12b2lkIDApdGhyb3cgbmV3IFYuRXZhbHVhdGlvbkVycm9yKCdVbmRlZmluZWQgbW9kdWxlICInK3RoaXMubmFtZXNbRl0uZ2V0VGV4dCgpKyciLicpO3guc3RhdGljQmFzaXMuZXh0ZW5kKGIpfXJldHVyblt4LFtdLFIsX119LFAucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHgsUil7Zm9yKHZhciBfPXguc3RhdGUsVz0wO1c8dGhpcy5uYW1lcy5sZW5ndGg7KytXKXt2YXIgUT12b2lkIDA7aWYodGhpcy5uYW1lc1tXXWluc3RhbmNlb2YgcS5Mb25nSWRlbnRpZmllclRva2VuPyhRPV8uZ2V0QW5kUmVzb2x2ZUR5bmFtaWNTdHJ1Y3R1cmUodGhpcy5uYW1lc1tXXSkpIT09dm9pZCAwJiYoUT1RLmdldFN0cnVjdHVyZSh0aGlzLm5hbWVzW1ddLmlkLmdldFRleHQoKSkpOlE9Xy5nZXREeW5hbWljU3RydWN0dXJlKHRoaXMubmFtZXNbV10uZ2V0VGV4dCgpKSxRPT09dm9pZCAwKXRocm93IG5ldyBWLkV2YWx1YXRpb25FcnJvcignVW5kZWZpbmVkIG1vZHVsZSAiJyt0aGlzLm5hbWVzW1ddLmdldFRleHQoKSsnIi4nKTtfLmR5bmFtaWNCYXNpcy5leHRlbmQoUSl9cmV0dXJue25ld1N0YXRlOl8sdmFsdWU6dm9pZCAwLGhhc1Rocm93bjohMX19LFAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB4PSJvcGVuIixSPTA7Ujx0aGlzLm5hbWVzLmxlbmd0aDsrK1IpeCs9IiAiK3RoaXMubmFtZXNbUl0uZ2V0VGV4dCgpO3JldHVybiB4KyI7In0sUH0oaCk7dS5PcGVuRGVjbGFyYXRpb249bzt2YXIgeT1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgpe3g9PT12b2lkIDAmJih4PTApO3ZhciBSPUguY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gUi5pZD14LFJ9cmV0dXJuIGcoUCxIKSxQLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxQLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24oeCxSLF8sVyxRLG5lKXtyZXR1cm5beCxbXSxSLF9dfSxQLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih4LFIpe3JldHVybntuZXdTdGF0ZTp4LnN0YXRlLHZhbHVlOnZvaWQgMCxoYXNUaHJvd246ITF9fSxQLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIgOyJ9LFB9KGgpO3UuRW1wdHlEZWNsYXJhdGlvbj15O3ZhciBkPWZ1bmN0aW9uKEgpe2Z1bmN0aW9uIFAoeCxSKXtSPT09dm9pZCAwJiYoUj0wKTt2YXIgXz1ILmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIF8uZGVjbGFyYXRpb25zPXgsXy5pZD1SLF99cmV0dXJuIGcoUCxIKSxQLnByb3RvdHlwZS5hc3NlcnRVbmlxdWVCaW5kaW5nPWZ1bmN0aW9uKHgsUil7Zm9yKHZhciBfPTA7Xzx0aGlzLmRlY2xhcmF0aW9ucy5sZW5ndGg7KytfKXRoaXMuZGVjbGFyYXRpb25zW19dLmFzc2VydFVuaXF1ZUJpbmRpbmcoeCxSKTtyZXR1cm4gbmV3IFNldH0sUC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIHg9W10sUj0wO1I8dGhpcy5kZWNsYXJhdGlvbnMubGVuZ3RoOysrUil4LnB1c2godGhpcy5kZWNsYXJhdGlvbnNbUl0uc2ltcGxpZnkoKSk7cmV0dXJuIG5ldyBQKHgsdGhpcy5pZCl9LFAucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbih4LFIsXyxXLFEsbmUpe2Zvcih2YXIgRj1bXSxiPVIsbD1fLHQ9ZnVuY3Rpb24oTCl7USYmKGI9bmV3IE1hcCx4LmdldFR5cGVWYXJpYWJsZUJpbmRzKClbMV0uZm9yRWFjaChmdW5jdGlvbihlZSx0ZSl7Yj1iLnNldCh0ZSxlZSl9KSxXPW5ldyBNYXApO3ZhciBrPW4uZGVjbGFyYXRpb25zW0xdLmVsYWJvcmF0ZSh4LmdldE5lc3RlZFN0YXRlKG4uZGVjbGFyYXRpb25zW0xdLmlkKSxiLGwsVyxRLG5lKTt4PWtbMF0sRj1GLmNvbmNhdChrWzFdKSxiPWtbMl07dmFyIFU9bmV3IE1hcDtpZihRJiYoVT1SKSxrWzJdLmZvckVhY2goZnVuY3Rpb24oZWUsdGUpe2lmKHRlWzFdPT09In4iKXt2YXIgb2U9ZWVbMF0uaW5zdGFudGlhdGUoeCxrWzJdKS5ub3JtYWxpemUoeC5mcmVlVHlwZVZhcmlhYmxlc1swXSxuZSk7eC5wYXJlbnQuZ2V0VHlwZVZhcmlhYmxlQmluZHMoKVsxXS5oYXModGUpfHxGLnB1c2gobmV3IFYuV2FybmluZygwLCdUaGUgZnJlZSB0eXBlIHZhcmlhYmxlICInK3RlKyciIGhhcyBiZWVuIGluc3RhbnRpYXRlZCB0byAiJytvZVswXStgIi4KYCkpLFU9VS5zZXQodGUsW29lWzBdLCEwXSl9ZWxzZSBRfHwoVT1VLnNldCh0ZSxlZSkpfSksYj1VLFEpe2Zvcih2YXIgaiBpbiB4LmZyZWVUeXBlVmFyaWFibGVzWzFdPVUseC5zdGF0aWNCYXNpcy52YWx1ZUVudmlyb25tZW50KWlmKHguc3RhdGljQmFzaXMudmFsdWVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShqKSl7dmFyIFg9eC5zdGF0aWNCYXNpcy52YWx1ZUVudmlyb25tZW50W2pdLFo9WFswXS5ub3JtYWxpemUoeC5mcmVlVHlwZVZhcmlhYmxlc1swXSxuZSk7eC5mcmVlVHlwZVZhcmlhYmxlc1swXT1aWzFdLHguc2V0U3RhdGljVmFsdWUoaixaWzBdLFhbMV0pfX1sPWtbM119LG49dGhpcyxpPTA7aTx0aGlzLmRlY2xhcmF0aW9ucy5sZW5ndGg7KytpKXQoaSk7aWYoIVEpe3ZhciBhPW5ldyBNYXAsZj1uZXcgTWFwLFM9bmV3IFNldDtiLmZvckVhY2goZnVuY3Rpb24oTCxrKXtmPWEuc2V0KGssTCl9KSxiLmZvckVhY2goZnVuY3Rpb24oTCxrKXtpZighUy5oYXMoaykmJihhPWEuc2V0KGssTCksay5zdGFydHNXaXRoKCJAIikpKXt2YXIgVT1rLnN1YnN0cigxKTtpZihTPVMuYWRkKFUpLGYuaGFzKFUpKXt2YXIgaj1mLmdldChVKTt0cnl7dmFyIFg9alswXS5tZXJnZSh4LGYsTFswXSk7YT1hLnNldChVLFtYWzBdLGpbMV18fExbMV1dKX1jYXRjaChaKXt0aHJvdyBaIGluc3RhbmNlb2YgQXJyYXk/bmV3IFYuRWxhYm9yYXRpb25FcnJvcignQ2Fubm90IG1lcmdlICInK2pbMF0ubm9ybWFsaXplKClbMF0rJyIgYW5kICInK0xbMF0ubm9ybWFsaXplKClbMF0rJyIgOicrWlswXSsiLiIpOlp9fWVsc2UgYT1hLnNldChVLEwpfX0pLGI9YX1yZXR1cm5beCxGLGIsbF19LFAucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKHgsUil7dmFyIF89eC5zdGF0ZTt4LnN0ZXA9PT12b2lkIDAmJih4LnN0ZXA9LTEpO3ZhciBXPXguc3RlcDtpZihXPj0wKXt2YXIgUT14LnJlY1Jlc3VsdDtpZihRPT09dm9pZCAwfHxRLm5ld1N0YXRlPT09dm9pZCAwKXRocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiSG93IGlzIHRoaXMgdW5kZWZpbmVkPyIpO2lmKFEuaGFzVGhyb3duKXJldHVybntuZXdTdGF0ZTpRLm5ld1N0YXRlLHZhbHVlOlEudmFsdWUsaGFzVGhyb3duOiEwfTtfPVEubmV3U3RhdGV9aWYoKytXPHRoaXMuZGVjbGFyYXRpb25zLmxlbmd0aCl7dmFyIG5lPV8uZ2V0TmVzdGVkU3RhdGUodGhpcy5kZWNsYXJhdGlvbnNbV10uaWQpO3JldHVybiB4LnN0ZXA9Vyx4LnN0YXRlPV8sUi5wdXNoKHtuZXh0OnRoaXMscGFyYW1zOnh9KSx2b2lkIFIucHVzaCh7bmV4dDp0aGlzLmRlY2xhcmF0aW9uc1tXXSxwYXJhbXM6e3N0YXRlOm5lLG1vZGlmaWFibGU6eC5tb2RpZmlhYmxlLHJlY1Jlc3VsdDp2b2lkIDB9fSl9cmV0dXJue25ld1N0YXRlOl8sdmFsdWU6dm9pZCAwLGhhc1Rocm93bjohMX19LFAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB4PSIiLFI9MDtSPHRoaXMuZGVjbGFyYXRpb25zLmxlbmd0aDsrK1IpUj4wJiYoeCs9IiAiKSx4Kz10aGlzLmRlY2xhcmF0aW9uc1tSXTtyZXR1cm4geH0sUH0oaCk7dS5TZXF1ZW50aWFsRGVjbGFyYXRpb249ZDt2YXIgdj1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgsUixfKXtfPT09dm9pZCAwJiYoXz0wKTt2YXIgVz1ILmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIFcudHlwZVZhcmlhYmxlU2VxdWVuY2U9eCxXLmZ1bmN0aW9uVmFsdWVCaW5kaW5nPVIsVy5pZD1fLFd9cmV0dXJuIGcoUCxIKSxQLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe2Zvcih2YXIgeD1bXSxSPTA7Ujx0aGlzLmZ1bmN0aW9uVmFsdWVCaW5kaW5nLmxlbmd0aDsrK1IpeC5wdXNoKHRoaXMuZnVuY3Rpb25WYWx1ZUJpbmRpbmdbUl0uc2ltcGxpZnkoKSk7cmV0dXJuIG5ldyBBKHRoaXMudHlwZVZhcmlhYmxlU2VxdWVuY2UseCx0aGlzLmlkKX0sUH0oaCk7dS5GdW5jdGlvbkRlY2xhcmF0aW9uPXY7dmFyIEM9ZnVuY3Rpb24oSCl7ZnVuY3Rpb24gUCh4KXt2YXIgUj1ILmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIFIuZXhwcmVzc2lvbj14LFJ9cmV0dXJuIGcoUCxIKSxQLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgQShbXSxbbmV3IHAoITEsbmV3IHMuVHVwbGUoW10pLHRoaXMuZXhwcmVzc2lvbildKS5zaW1wbGlmeSgpfSxQfShoKTt1LkV2YWx1YXRpb249Qzt2YXIgRz1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgsUixfLFcpe1c9PT12b2lkIDAmJihXPTApO3ZhciBRPUguY2FsbCh0aGlzKXx8dGhpcztpZihRLmRhdGF0eXBlQmluZGluZz14LFEudHlwZUJpbmRpbmc9UixRLmRlY2xhcmF0aW9uPV8sUS5pZD1XLFEudHlwZUJpbmRpbmchPT12b2lkIDApdGhyb3cgbmV3IFYuRmVhdHVyZURpc2FibGVkRXJyb3IoJ1dobyBpcyAid2l0aHR5cGUiPycpO3JldHVybiBRfXJldHVybiBnKFAsSCksUC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIHg9bmV3IE8odGhpcy5kYXRhdHlwZUJpbmRpbmcsdm9pZCAwLHRoaXMuaWQpLFI9W10sXz0wO188dGhpcy5kYXRhdHlwZUJpbmRpbmcubGVuZ3RoOysrXylSLnB1c2gobmV3IHcodGhpcy5kYXRhdHlwZUJpbmRpbmdbX10udHlwZVZhcmlhYmxlU2VxdWVuY2UsdGhpcy5kYXRhdHlwZUJpbmRpbmdbX10ubmFtZSxuZXcgQi5DdXN0b21UeXBlKHRoaXMuZGF0YXR5cGVCaW5kaW5nW19dLm5hbWUuZ2V0VGV4dCgpLHRoaXMuZGF0YXR5cGVCaW5kaW5nW19dLnR5cGVWYXJpYWJsZVNlcXVlbmNlKSkpO3ZhciBXPW5ldyBJKFIsdGhpcy5pZCk7cmV0dXJuIG5ldyBlKHgsbmV3IGQoW1csdGhpcy5kZWNsYXJhdGlvbl0sdGhpcy5pZCksdGhpcy5pZCkuc2ltcGxpZnkoKX0sUH0oaCk7dS5BYnN0eXBlRGVjbGFyYXRpb249Rzt2YXIgWT1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgsUixfKXtSPT09dm9pZCAwJiYoUj0wKSxfPT09dm9pZCAwJiYoXz0wKTt2YXIgVz1ILmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIFcub3BlcmF0b3JzPXgsVy5wcmVjZWRlbmNlPVIsVy5pZD1fLFd9cmV0dXJuIGcoUCxIKSxQLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxQLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24oeCxSLF8sVyl7cmV0dXJuW3gsW10sUixfXX0sUC5wcm90b3R5cGUuc2V0SW5maXhTdGF0dXM9ZnVuY3Rpb24oeCl7Zm9yKHZhciBSPTA7Ujx0aGlzLm9wZXJhdG9ycy5sZW5ndGg7KytSKXguc2V0SW5maXhTdGF0dXModGhpcy5vcGVyYXRvcnNbUl0sdGhpcy5wcmVjZWRlbmNlLCExLCEwKX0sUC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oeCxSKXt2YXIgXz14LnN0YXRlO3JldHVybiB0aGlzLnNldEluZml4U3RhdHVzKF8pLHtuZXdTdGF0ZTpfLHZhbHVlOnZvaWQgMCxoYXNUaHJvd246ITF9fSxQLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB4PSJpbmZpeCI7eCs9IiAiK3RoaXMucHJlY2VkZW5jZTtmb3IodmFyIFI9MDtSPHRoaXMub3BlcmF0b3JzLmxlbmd0aDsrK1IpeCs9IiAiK3RoaXMub3BlcmF0b3JzW1JdLmdldFRleHQoKTtyZXR1cm4geCsiOyJ9LFB9KGgpO3UuSW5maXhEZWNsYXJhdGlvbj1ZO3ZhciBKPWZ1bmN0aW9uKEgpe2Z1bmN0aW9uIFAoeCxSLF8pe1I9PT12b2lkIDAmJihSPTApLF89PT12b2lkIDAmJihfPTApO3ZhciBXPUguY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gVy5vcGVyYXRvcnM9eCxXLnByZWNlZGVuY2U9UixXLmlkPV8sV31yZXR1cm4gZyhQLEgpLFAucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LFAucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbih4LFIsXyxXKXtyZXR1cm5beCxbXSxSLF9dfSxQLnByb3RvdHlwZS5zZXRJbmZpeFN0YXR1cz1mdW5jdGlvbih4KXtmb3IodmFyIFI9MDtSPHRoaXMub3BlcmF0b3JzLmxlbmd0aDsrK1IpeC5zZXRJbmZpeFN0YXR1cyh0aGlzLm9wZXJhdG9yc1tSXSx0aGlzLnByZWNlZGVuY2UsITAsITApfSxQLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih4LFIpe3ZhciBfPXguc3RhdGU7cmV0dXJuIHRoaXMuc2V0SW5maXhTdGF0dXMoXykse25ld1N0YXRlOl8sdmFsdWU6dm9pZCAwLGhhc1Rocm93bjohMX19LFAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHg9ImluZml4ciI7eCs9IiAiK3RoaXMucHJlY2VkZW5jZTtmb3IodmFyIFI9MDtSPHRoaXMub3BlcmF0b3JzLmxlbmd0aDsrK1IpeCs9IiAiK3RoaXMub3BlcmF0b3JzW1JdLmdldFRleHQoKTtyZXR1cm4geCsiOyJ9LFB9KGgpO3UuSW5maXhSRGVjbGFyYXRpb249Sjt2YXIgej1mdW5jdGlvbihIKXtmdW5jdGlvbiBQKHgsUil7Uj09PXZvaWQgMCYmKFI9MCk7dmFyIF89SC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBfLm9wZXJhdG9ycz14LF8uaWQ9UixffXJldHVybiBnKFAsSCksUC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sUC5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKHgsUixfLFcpe3JldHVyblt4LFtdLFIsX119LFAucHJvdG90eXBlLnNldEluZml4U3RhdHVzPWZ1bmN0aW9uKHgpe2Zvcih2YXIgUj0wO1I8dGhpcy5vcGVyYXRvcnMubGVuZ3RoOysrUil4LnNldEluZml4U3RhdHVzKHRoaXMub3BlcmF0b3JzW1JdLDAsITEsITEpfSxQLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbih4LFIpe3ZhciBfPXguc3RhdGU7cmV0dXJuIHRoaXMuc2V0SW5maXhTdGF0dXMoXykse25ld1N0YXRlOl8sdmFsdWU6dm9pZCAwLGhhc1Rocm93bjohMX19LFAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB4PSJub25maXgiLFI9MDtSPHRoaXMub3BlcmF0b3JzLmxlbmd0aDsrK1IpeCs9IiAiK3RoaXMub3BlcmF0b3JzW1JdLmdldFRleHQoKTtyZXR1cm4geCsiOyJ9LFB9KGgpO3UuTm9uZml4RGVjbGFyYXRpb249ejt2YXIgcD1mdW5jdGlvbigpe2Z1bmN0aW9uIEgoUCx4LFIpe3RoaXMuaXNSZWN1cnNpdmU9UCx0aGlzLnBhdHRlcm49eCx0aGlzLmV4cHJlc3Npb249Un1yZXR1cm4gSC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgUD0iIjtyZXR1cm4gdGhpcy5pc1JlY3Vyc2l2ZSYmKFArPSJyZWMgIiksUCs9dGhpcy5wYXR0ZXJuLChQKz0iID0gIikrdGhpcy5leHByZXNzaW9ufSxILnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKFAseCxSLF8sVyxRKXt2YXIgbmU9eC5nZXROZXN0ZWRTdGF0ZSh4LmlkKSxGPVIsYj10aGlzLmV4cHJlc3Npb24uZ2V0VHlwZShuZSxGLF8sbmV3IFNldCwhMSxXKSxsPWJbMV0sdD10aGlzLnBhdHRlcm4ubWF0Y2hUeXBlKG5lLGJbNF0sYlswXSk7dHJ5e2Zvcih2YXIgbj1uZXcgcy5NYXRjaChbW3RoaXMucGF0dGVybix0aGlzLmV4cHJlc3Npb25dXSkuY2hlY2tFeGhhdXN0aXZlbmVzcyh4KSxpPVtdLGE9bmV3IFNldCxmPTAsUz1uO2Y8Uy5sZW5ndGg7ZisrKXt2YXIgTD1TW2ZdO2EuaGFzKEwubWVzc2FnZSl8fChhLmFkZChMLm1lc3NhZ2UpLGkucHVzaChuZXcgVi5XYXJuaW5nKEwudHlwZT09PS0xPy0xOjAsTC5tZXNzYWdlKSkpfWw9bC5jb25jYXQoaSl9Y2F0Y2h7fXZhciBrPW5ldyBTZXQ7aWYodD09PXZvaWQgMCl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCdUeXBlIGNsYXNoLiBBbiBleHByZXNzaW9uIG9mIHR5cGUgIicrYlswXSsnIiBjYW5ub3QgYmUgYXNzaWduZWQgdG8gIicrdFsxXSsnIi4nKTtmb3IodmFyIFU9W10saj1uZXcgU2V0LFg9MDtYPFAubGVuZ3RoOysrWCl7aWYoai5oYXMoUFtYXS5uYW1lKSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCdJIHdpbGwgbm90IGxldCBhIGR1cGxpY2F0ZSB0eXBlIHZhcmlhYmxlIG5hbWUgIicrUFtYXS5uYW1lKyciIGRpc3R1cmIgbXkgSGFwcHkgU3VnYXIgTGlmZS4nKTtqPWouYWRkKFBbWF0ubmFtZSk7dmFyIFo9UFtYXS5pbnN0YW50aWF0ZSh4LHRbMl0pO2lmKCEoWiBpbnN0YW5jZW9mIEIuVHlwZVZhcmlhYmxlKXx8Wi5kb21haW4ubGVuZ3RoPjB8fFBbWF0uYWRtaXRzRXF1YWxpdHkoeCkhPT1aLmFkbWl0c0VxdWFsaXR5KHgpKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1R5cGUgY2xhc2guIEFuIGV4cHJlc3Npb24gb2YgZXhwbGljaXQgdHlwZSAiJytQW1hdKyciIGNhbm5vdCBoYXZlIHR5cGUgIicrWi5ub3JtYWxpemUoKVswXSsnIi4nKTtVLnB1c2goWil9dGhpcy5leHByZXNzaW9uLmdldEV4cGxpY2l0VHlwZVZhcmlhYmxlcygpLmZvckVhY2goZnVuY3Rpb24oc2Upe3ZhciB1ZT1zZS5pbnN0YW50aWF0ZSh4LHRbMl0pO2lmKCEodWUgaW5zdGFuY2VvZiBCLlR5cGVWYXJpYWJsZSl8fHVlLmRvbWFpbi5sZW5ndGg+MHx8c2UuYWRtaXRzRXF1YWxpdHkoeCkhPT11ZS5hZG1pdHNFcXVhbGl0eSh4KSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCdUeXBlIGNsYXNoLiBBbiBleHByZXNzaW9uIG9mIGV4cGxpY2l0IHR5cGUgIicrc2UrJyIgY2Fubm90IGhhdmUgdHlwZSAiJyt1ZS5ub3JtYWxpemUoKVswXSsnIi4nKX0pO3ZhciBlZT0hdGhpcy5pc1JlY3Vyc2l2ZSYmIXRoaXMuZXhwcmVzc2lvbi5pc1NhZmUoeCksdGU9ITEsb2U9ZnVuY3Rpb24oc2Upe2lmKHRbMF1bc2VdWzBdPT09Ij0iKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIkFsbCBkZWNsYXJhdGlvbnMgYXJlIGVxdWFsLCBidXQgc29tZSBkZWNsYXJhdGlvbnMgYXJlIG1vcmUgZXF1YWwgdGhhbiBvdGhlcnMuIik7dFswXVtzZV1bMV09dFswXVtzZV1bMV0uaW5zdGFudGlhdGUoeCx0WzJdKSxRfHwoVz1XLnNldCh0WzBdW3NlXVswXSx0WzBdW3NlXVsxXSkpO2Zvcih2YXIgdWU9dFswXVtzZV1bMV0uZ2V0VHlwZVZhcmlhYmxlcygpLGllPXRbMF1bc2VdWzFdLmdldFR5cGVWYXJpYWJsZXMoITApLHBlPW5ldyBTZXQscmU9VS5sZW5ndGgtMTtyZT49MDstLXJlKWlmKHVlLmhhcyhVW3JlXS5uYW1lKSl7dmFyIGFlPXVlLmdldChVW3JlXS5uYW1lKTt0WzJdLmhhcygiJCIrVVtyZV0ubmFtZSkmJihhZT1CLlR5cGVWYXJpYWJsZS5tZXJnZURvbWFpbihhZSx0WzJdLmdldCgiJCIrVVtyZV0ubmFtZSlbMF0uZG9tYWluKSksdFswXVtzZV1bMV09bmV3IEIuVHlwZVZhcmlhYmxlQmluZChVW3JlXS5uYW1lLHRbMF1bc2VdWzFdLGFlKSx0WzBdW3NlXVsxXS5pc0ZyZWU9dFswXVtzZV1bMV0uZG9tYWluLmxlbmd0aD09PTAmJihlZXx8aWUuaGFzKFVbcmVdLm5hbWUpKSx0ZT10ZXx8dFswXVtzZV1bMV0uaXNGcmVlLHBlLmFkZChVW3JlXS5uYW1lKX1mb3IoVT1bXSx0WzBdW3NlXVsxXS5nZXRUeXBlVmFyaWFibGVzKCkuZm9yRWFjaChmdW5jdGlvbihjZSxsZSl7aWYoKFF8fCFrLmhhcyhsZSkpJiYhcGUuaGFzKGxlKSl7dmFyIGRlPWNlO3RbMl0uaGFzKCIkIitsZSkmJihkZT1CLlR5cGVWYXJpYWJsZS5tZXJnZURvbWFpbihkZSx0WzJdLmdldCgiJCIrbGUpWzBdLmRvbWFpbikpLFUucHVzaChuZXcgQi5UeXBlVmFyaWFibGUobGUsZGUpKX19KSxyZT1VLmxlbmd0aC0xO3JlPj0wOy0tcmUpdFswXVtzZV1bMV09bmV3IEIuVHlwZVZhcmlhYmxlQmluZChVW3JlXS5uYW1lLHRbMF1bc2VdWzFdLFVbcmVdLmRvbWFpbiksdFswXVtzZV1bMV0uaXNGcmVlPXRbMF1bc2VdWzFdLmRvbWFpbi5sZW5ndGg9PT0wJiYoZWV8fGllLmhhcyhVW3JlXS5uYW1lKSksdGU9dGV8fHRbMF1bc2VdWzFdLmlzRnJlZX07Zm9yKFg9MDtYPHRbMF0ubGVuZ3RoOysrWClvZShYKTtyZXR1cm4gdGUmJlEmJmwucHVzaChuZXcgVi5XYXJuaW5nKDAsYEZyZWUgdHlwZSB2YXJpYWJsZXMgYXQgdG9wIGxldmVsLgpgKSksW3RbMF0sbCx0WzJdLGJbMl0sYls1XV19LEh9KCk7dS5WYWx1ZUJpbmRpbmc9cDt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIEgoUCx4KXt0aGlzLnBhcmFtZXRlcnM9UCx0aGlzLm5hbWU9eH1yZXR1cm4gSC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtpZih0aGlzLm5hbWU9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJUaGlzIGZ1bmN0aW9uIGlzbid0IHJlYWR5IHRvIGJlIHNpbXBsaWZpZWQgeWV0LiIpO2Zvcih2YXIgUCx4PVtdLFI9W10sXz0wO188dGhpcy5wYXJhbWV0ZXJzWzBdWzBdLmxlbmd0aDsrK18peC5wdXNoKG5ldyBzLlZhbHVlSWRlbnRpZmllcihuZXcgcS5JZGVudGlmaWVyVG9rZW4oIl9fYXJnIitfKSkpO2ZvcihfPTA7Xzx0aGlzLnBhcmFtZXRlcnMubGVuZ3RoOysrXyl7dmFyIFc7Vz10aGlzLnBhcmFtZXRlcnNbX11bMF0ubGVuZ3RoPT09MT90aGlzLnBhcmFtZXRlcnNbX11bMF1bMF06bmV3IHMuVHVwbGUodGhpcy5wYXJhbWV0ZXJzW19dWzBdKSx0aGlzLnBhcmFtZXRlcnNbX11bMV09PT12b2lkIDA/Ui5wdXNoKFtXLHRoaXMucGFyYW1ldGVyc1tfXVsyXV0pOlIucHVzaChbVyxuZXcgcy5UeXBlZEV4cHJlc3Npb24odGhpcy5wYXJhbWV0ZXJzW19dWzJdLHRoaXMucGFyYW1ldGVyc1tfXVsxXSldKX1QPXgubGVuZ3RoIT09MT9uZXcgcy5UdXBsZSh4KS5zaW1wbGlmeSgpOnhbMF07dmFyIFEsbmU9bmV3IHMuTWF0Y2goUik7Zm9yKFE9bmV3IHMuQ2FzZUFuYWx5c2lzKFAsbmUpLF89dGhpcy5wYXJhbWV0ZXJzWzBdWzBdLmxlbmd0aC0xO18+PTA7LS1fKVE9bmV3IHMuTGFtYmRhKG5ldyBzLk1hdGNoKFtbbmV3IHMuVmFsdWVJZGVudGlmaWVyKG5ldyBxLklkZW50aWZpZXJUb2tlbigiX19hcmciK18pKSxRXV0pKTtyZXR1cm4gbmV3IHAoITAsdGhpcy5uYW1lLFEuc2ltcGxpZnkoKSl9LEgucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciBQPSIiLHg9MDt4PHRoaXMucGFyYW1ldGVycy5sZW5ndGg7Kyt4KXt4PjAmJihQKz0iIHwgIiksUCs9dGhpcy5uYW1lLm5hbWUuZ2V0VGV4dCgpO2Zvcih2YXIgUj0wO1I8dGhpcy5wYXJhbWV0ZXJzW3hdWzBdLmxlbmd0aDsrK1IpUCs9IiAiK3RoaXMucGFyYW1ldGVyc1t4XVswXVtSXTt0aGlzLnBhcmFtZXRlcnNbeF1bMV0hPT12b2lkIDAmJihQKz0iOiAiK3RoaXMucGFyYW1ldGVyc1t4XVsxXSksUCs9IiA9ICIrdGhpcy5wYXJhbWV0ZXJzW3hdWzJdfXJldHVybiBQfSxIfSgpO3UuRnVuY3Rpb25WYWx1ZUJpbmRpbmc9Yzt2YXIgdz1mdW5jdGlvbihILFAseCl7dGhpcy50eXBlVmFyaWFibGVTZXF1ZW5jZT1ILHRoaXMubmFtZT1QLHRoaXMudHlwZT14fTt1LlR5cGVCaW5kaW5nPXc7dmFyIFQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBIKFAseCxSLF8pe189PT12b2lkIDAmJihfPXt9KSx0aGlzLnR5cGVWYXJpYWJsZVNlcXVlbmNlPVAsdGhpcy5uYW1lPXgsdGhpcy50eXBlPVIsdGhpcy5naXZlbklkcz1ffXJldHVybiBILnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKFAseCxSLF8pe189PT12b2lkIDAmJihfPSExKTt2YXIgVz1bXSxRPVtdLG5lPVAuZ2V0TmVzdGVkU3RhdGUoUC5pZCksRj1QLmdldFZhbHVlSWRlbnRpZmllcklkKHRoaXMubmFtZS5nZXRUZXh0KCkpO25lLmluY3JlbWVudFZhbHVlSWRlbnRpZmllcklkKHRoaXMubmFtZS5nZXRUZXh0KCkpO3ZhciBiPW5ldyBCLkN1c3RvbVR5cGUodGhpcy5uYW1lLmdldFRleHQoKSx0aGlzLnR5cGVWYXJpYWJsZVNlcXVlbmNlLHZvaWQgMCwhMSwwKSxsPW5ldyBCLkN1c3RvbVR5cGUodGhpcy5uYW1lLmdldFRleHQoKSx0aGlzLnR5cGVWYXJpYWJsZVNlcXVlbmNlLHZvaWQgMCwhMSxGKSx0PXRoaXMudHlwZVZhcmlhYmxlU2VxdWVuY2UubGVuZ3RoO25lLnNldFN0YXRpY1R5cGUodGhpcy5uYW1lLmdldFRleHQoKSxsLFtdLHQsITApO2Zvcih2YXIgbj1mdW5jdGlvbihmKXt2YXIgUz1sO2lmKGkudHlwZVtmXVsxXSE9PXZvaWQgMCl7dmFyIEw9aS50eXBlW2ZdWzFdO198fEwuaW5zdGFudGlhdGUobmUsbmV3IE1hcCksTD1MLnJlcGxhY2UoYixsKSxTPW5ldyBCLkZ1bmN0aW9uVHlwZShMLFMpfWZvcih2YXIgaz1uZXcgU2V0LFU9MDtVPGkudHlwZVZhcmlhYmxlU2VxdWVuY2UubGVuZ3RoOysrVSl7aWYoay5oYXMoaS50eXBlVmFyaWFibGVTZXF1ZW5jZVtVXS5uYW1lKSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKGBJJ20gbm90IGludGVyZXN0ZWQgaW4gZHVwbGljYXRlIHR5cGUgdmFyaWFibGUgbmFtZXMgc3VjaCBhcyAiYCtpLnR5cGVWYXJpYWJsZVNlcXVlbmNlW1VdKyciLicpO2s9ay5hZGQoaS50eXBlVmFyaWFibGVTZXF1ZW5jZVtVXS5uYW1lKX12YXIgaj1bXTtpZihTLmdldFR5cGVWYXJpYWJsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKFgsWil7ay5oYXMoWik/Uz1uZXcgQi5UeXBlVmFyaWFibGVCaW5kKFosUyxYKTpqLnB1c2goWil9KSxqLmxlbmd0aD4wKXRocm93IFYuRWxhYm9yYXRpb25FcnJvci5nZXRVbmd1YXJkZWQoaik7US5wdXNoKFtpLnR5cGVbZl1bMF0uZ2V0VGV4dCgpLFNdKSxXLnB1c2goaS50eXBlW2ZdWzBdLmdldFRleHQoKSl9LGk9dGhpcyxhPTA7YTx0aGlzLnR5cGUubGVuZ3RoOysrYSluKGEpO3JldHVybltRLGwsW3RoaXMubmFtZS5nZXRUZXh0KCksV11dfSxILnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKFAseCl7Zm9yKHZhciBSPVtdLF89W10sVz0wO1c8dGhpcy50eXBlLmxlbmd0aDsrK1cpe3ZhciBRPTA7dGhpcy50eXBlW1ddWzFdIT09dm9pZCAwJiYoUT0xKTt2YXIgbmU9LTE7dGhpcy5naXZlbklkc1t0aGlzLnR5cGVbV11bMF0uZ2V0VGV4dCgpXT09PXZvaWQgMD8obmU9eC5nZXRWYWx1ZUlkZW50aWZpZXJJZCh0aGlzLnR5cGVbV11bMF0uZ2V0VGV4dCgpKSx4LmluY3JlbWVudFZhbHVlSWRlbnRpZmllcklkKHRoaXMudHlwZVtXXVswXS5nZXRUZXh0KCkpLHRoaXMuZ2l2ZW5JZHNbdGhpcy50eXBlW1ddWzBdLmdldFRleHQoKV09bmUpOm5lPXRoaXMuZ2l2ZW5JZHNbdGhpcy50eXBlW1ddWzBdLmdldFRleHQoKV0sXy5wdXNoKFt0aGlzLnR5cGVbV11bMF0uZ2V0VGV4dCgpLG5ldyBELlZhbHVlQ29uc3RydWN0b3IodGhpcy50eXBlW1ddWzBdLmdldFRleHQoKSxRLG5lKV0pLFIucHVzaCh0aGlzLnR5cGVbV11bMF0uZ2V0VGV4dCgpKX1yZXR1cm5bXyxbdGhpcy5uYW1lLmdldFRleHQoKSxSXV19LEh9KCk7dS5EYXRhdHlwZUJpbmRpbmc9VDt2YXIgTj1mdW5jdGlvbigpe2Z1bmN0aW9uIEgoUCx4KXt0aGlzLm5hbWU9UCx0aGlzLnR5cGU9eH1yZXR1cm4gSC5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKFAseCxSLF8pe2lmKHRoaXMudHlwZSE9PXZvaWQgMCl7dmFyIFc9dGhpcy50eXBlLnNpbXBsaWZ5KCkuaW5zdGFudGlhdGUoUCxuZXcgTWFwKSxRPVtdO2lmKFcuZ2V0VHlwZVZhcmlhYmxlcygpLmZvckVhY2goZnVuY3Rpb24obmUsRil7US5wdXNoKEYpfSkseCYmUS5sZW5ndGg+MCl0aHJvdyBWLkVsYWJvcmF0aW9uRXJyb3IuZ2V0VW5ndWFyZGVkKFEpO1Auc2V0U3RhdGljVmFsdWUodGhpcy5uYW1lLmdldFRleHQoKSxuZXcgQi5GdW5jdGlvblR5cGUoVy5tYWtlRnJlZSgpLG5ldyBCLkN1c3RvbVR5cGUoImV4biIpKSxNLklkZW50aWZpZXJTdGF0dXMuRVhDRVBUSU9OX0NPTlNUUlVDVE9SKX1lbHNlIFAuc2V0U3RhdGljVmFsdWUodGhpcy5uYW1lLmdldFRleHQoKSxuZXcgQi5DdXN0b21UeXBlKCJleG4iKSxNLklkZW50aWZpZXJTdGF0dXMuRVhDRVBUSU9OX0NPTlNUUlVDVE9SKTtyZXR1cm4gUH0sSC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oUCx4KXt2YXIgUj0wO3RoaXMudHlwZSE9PXZvaWQgMCYmKFI9MSk7dmFyIF89UC5nZXRWYWx1ZUlkZW50aWZpZXJJZCh0aGlzLm5hbWUuZ2V0VGV4dCgpKTtQLmluY3JlbWVudFZhbHVlSWRlbnRpZmllcklkKHRoaXMubmFtZS5nZXRUZXh0KCkpO3ZhciBXPXguZ2V0TmV4dEV4Y2VwdGlvbkV2YWxJZCgpO2lmKCFNLlN0YXRlLmFsbG93c1JlYmluZCh0aGlzLm5hbWUuZ2V0VGV4dCgpKSl0aHJvdyBuZXcgVi5FdmFsdWF0aW9uRXJyb3IoJ1lvdSBzaW1wbHkgY2Fubm90IHJlYmluZCAiJyt0aGlzLm5hbWUuZ2V0VGV4dCgpKyciLicpO1Auc2V0RHluYW1pY1ZhbHVlKHRoaXMubmFtZS5nZXRUZXh0KCksbmV3IEQuRXhjZXB0aW9uQ29uc3RydWN0b3IodGhpcy5uYW1lLmdldFRleHQoKSxSLF8sVyksTS5JZGVudGlmaWVyU3RhdHVzLkVYQ0VQVElPTl9DT05TVFJVQ1RPUil9LEh9KCk7dS5EaXJlY3RFeGNlcHRpb25CaW5kaW5nPU47dmFyICQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBIKFAseCl7dGhpcy5uYW1lPVAsdGhpcy5vbGRuYW1lPXh9cmV0dXJuIEgucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihQLHgsUixfKXt2YXIgVz12b2lkIDA7aWYodGhpcy5vbGRuYW1lIGluc3RhbmNlb2YgcS5Mb25nSWRlbnRpZmllclRva2VuKXt2YXIgUT1QLmdldEFuZFJlc29sdmVTdGF0aWNTdHJ1Y3R1cmUodGhpcy5vbGRuYW1lKTtRIT09dm9pZCAwJiYoVz1RLmdldFZhbHVlKHRoaXMub2xkbmFtZS5pZC5nZXRUZXh0KCkpKX1lbHNlIFc9UC5nZXRTdGF0aWNWYWx1ZSh0aGlzLm9sZG5hbWUuZ2V0VGV4dCgpKTtpZihXPT09dm9pZCAwKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1VuYm91bmQgdmFsdWUgaWRlbnRpZmllciAiJyt0aGlzLm9sZG5hbWUuZ2V0VGV4dCgpKyciLicpO2lmKFdbMV0hPT1NLklkZW50aWZpZXJTdGF0dXMuRVhDRVBUSU9OX0NPTlNUUlVDVE9SKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1lvdSBjYW5ub3QgdHJhbnNmb3JtICInK1dbMF0rJyIgaW50byBhbiBleGNlcHRpb24uJyk7cmV0dXJuIFAuc2V0U3RhdGljVmFsdWUodGhpcy5uYW1lLmdldFRleHQoKSxXWzBdLm5vcm1hbGl6ZSgpWzBdLE0uSWRlbnRpZmllclN0YXR1cy5FWENFUFRJT05fQ09OU1RSVUNUT1IpLFB9LEgucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKFAseCl7dmFyIFI9dm9pZCAwO2lmKHRoaXMub2xkbmFtZSBpbnN0YW5jZW9mIHEuTG9uZ0lkZW50aWZpZXJUb2tlbil7dmFyIF89UC5nZXRBbmRSZXNvbHZlRHluYW1pY1N0cnVjdHVyZSh0aGlzLm9sZG5hbWUpO18hPT12b2lkIDAmJihSPV8uZ2V0VmFsdWUodGhpcy5vbGRuYW1lLmlkLmdldFRleHQoKSkpfWVsc2UgUj1QLmdldER5bmFtaWNWYWx1ZSh0aGlzLm9sZG5hbWUuZ2V0VGV4dCgpKTtpZihSPT09dm9pZCAwKXRocm93IG5ldyBWLkV2YWx1YXRpb25FcnJvcignVW5ib3VuZCB2YWx1ZSBpZGVudGlmaWVyICInK3RoaXMub2xkbmFtZS5nZXRUZXh0KCkrJyIuJyk7aWYoUlsxXSE9PU0uSWRlbnRpZmllclN0YXR1cy5FWENFUFRJT05fQ09OU1RSVUNUT1IpdGhyb3cgbmV3IFYuRXZhbHVhdGlvbkVycm9yKCdZb3UgY2Fubm90IHRyYW5zZm9ybSAiJytSWzBdLnRvU3RyaW5nKFAsNDApKyciIGludG8gYW4gZXhjZXB0aW9uLicpO1Auc2V0RHluYW1pY1ZhbHVlKHRoaXMubmFtZS5nZXRUZXh0KCksUlswXSxNLklkZW50aWZpZXJTdGF0dXMuRVhDRVBUSU9OX0NPTlNUUlVDVE9SKX0sSH0oKTt1LkV4Y2VwdGlvbkFsaWFzPSR9LDc1ODpmdW5jdGlvbihmZSx1KXt2YXIgSyxtPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoSz1mdW5jdGlvbihPLEUpe3JldHVybihLPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihyLGUpe3IuX19wcm90b19fPWV9fHxmdW5jdGlvbihyLGUpe2Zvcih2YXIgbyBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiYocltvXT1lW29dKX0pKE8sRSl9LGZ1bmN0aW9uKE8sRSl7aWYodHlwZW9mIEUhPSJmdW5jdGlvbiImJkUhPT1udWxsKXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcoRSkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9T31LKE8sRSksTy5wcm90b3R5cGU9RT09PW51bGw/T2JqZWN0LmNyZWF0ZShFKTooci5wcm90b3R5cGU9RS5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHUuV2FybmluZz11LlBhdHRlcm5NYXRjaEVycm9yPXUuRXZhbHVhdGlvbkVycm9yPXUuRWxhYm9yYXRpb25FcnJvcj11LlBhcnNlckVycm9yPXUuTGV4ZXJFcnJvcj11LkluY29tcGxldGVFcnJvcj11LkZlYXR1cmVEaXNhYmxlZEVycm9yPXUuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yPXUuSW50ZXJwcmV0ZXJFcnJvcj12b2lkIDA7dmFyIGc9ZnVuY3Rpb24oTyl7ZnVuY3Rpb24gRShyLGUpe3ZhciBvPU8uY2FsbCh0aGlzLHIpfHx0aGlzO3JldHVybiBvLm1lc3NhZ2U9cixvLm5hbWU9ZSxPYmplY3Quc2V0UHJvdG90eXBlT2YobyxFLnByb3RvdHlwZSksb31yZXR1cm4gbShFLE8pLEUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZSsiOiAiK3RoaXMubWVzc2FnZX0sRX0oRXJyb3IpO3UuSW50ZXJwcmV0ZXJFcnJvcj1nO3ZhciBzPWZ1bmN0aW9uKE8pe2Z1bmN0aW9uIEUocil7dmFyIGU9Ty5jYWxsKHRoaXMsciwiWW91IHRyaWdnZXJlZCBUaGlyZCBJbXBhY3QiKXx8dGhpcztyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsRS5wcm90b3R5cGUpLGV9cmV0dXJuIG0oRSxPKSxFfShnKTt1LkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcj1zO3ZhciBxPWZ1bmN0aW9uKE8pe2Z1bmN0aW9uIEUocil7dmFyIGU9Ty5jYWxsKHRoaXMsciwiSGF2ZSB5b3UgZXZlciB0cmllZCBkb2luZyBzb21ldGhpbmcgeW91IHdlcmUgbm90IHN1cHBvc2VkIHRvPyBCYXNpY2FsbHkgdGhhdCIpfHx0aGlzO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxFLnByb3RvdHlwZSksZX1yZXR1cm4gbShFLE8pLEV9KGcpO3UuRmVhdHVyZURpc2FibGVkRXJyb3I9cTt2YXIgQj1mdW5jdGlvbihPKXtmdW5jdGlvbiBFKHIpe3ZhciBlPU8uY2FsbCh0aGlzLHIsIklucHV0IEluY29tcGxldGUiKXx8dGhpcztyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsRS5wcm90b3R5cGUpLGV9cmV0dXJuIG0oRSxPKSxFfShnKTt1LkluY29tcGxldGVFcnJvcj1CO3ZhciBNPWZ1bmN0aW9uKE8pe2Z1bmN0aW9uIEUocil7dmFyIGU9Ty5jYWxsKHRoaXMsciwiTGV4aW5nIGZhaWxlZCIpfHx0aGlzO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxFLnByb3RvdHlwZSksZX1yZXR1cm4gbShFLE8pLEV9KGcpO3UuTGV4ZXJFcnJvcj1NO3ZhciBWPWZ1bmN0aW9uKE8pe2Z1bmN0aW9uIEUocil7dmFyIGU9Ty5jYWxsKHRoaXMsciwiUGFyc2luZyBmYWlsZWQiKXx8dGhpcztyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsRS5wcm90b3R5cGUpLGV9cmV0dXJuIG0oRSxPKSxFfShnKTt1LlBhcnNlckVycm9yPVY7dmFyIEQ9ZnVuY3Rpb24oTyl7ZnVuY3Rpb24gRShyKXt2YXIgZT1PLmNhbGwodGhpcyxyLCJFbGFib3JhdGlvbiBmYWlsZWQiKXx8dGhpcztyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsRS5wcm90b3R5cGUpLGV9cmV0dXJuIG0oRSxPKSxFLmdldFVuZ3VhcmRlZD1mdW5jdGlvbihyKXt2YXIgZT0iIjtyLmxlbmd0aD4xJiYoZSs9InMiKSxlKz0iICI7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDsrK28pbz4wJiYoZSs9IiwgIiksZSs9JyInK3Jbb10rJyInO3JldHVybiBuZXcgRSgiVW5ndWFyZGVkIHR5cGUgdmFyaWFibGUiK2UrIi4iKX0sRX0oZyk7dS5FbGFib3JhdGlvbkVycm9yPUQ7dmFyIGg9ZnVuY3Rpb24oTyl7ZnVuY3Rpb24gRShyKXt2YXIgZT1PLmNhbGwodGhpcyxyLCJFdmFsdWF0aW9uIGZhaWxlZCIpfHx0aGlzO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxFLnByb3RvdHlwZSksZX1yZXR1cm4gbShFLE8pLEV9KGcpO3UuRXZhbHVhdGlvbkVycm9yPWg7dmFyIEE9ZnVuY3Rpb24oTyl7ZnVuY3Rpb24gRShyKXt2YXIgZT1PLmNhbGwodGhpcyxyLCJDaGVja2luZyBQYXR0ZXJuIGZhaWxlZCIpfHx0aGlzO3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSxFLnByb3RvdHlwZSksZX1yZXR1cm4gbShFLE8pLEV9KGcpO3UuUGF0dGVybk1hdGNoRXJyb3I9QTt2YXIgST1mdW5jdGlvbihPKXtmdW5jdGlvbiBFKHIsZSl7dmFyIG89Ty5jYWxsKHRoaXMsZSwiV2FybmluZyIpfHx0aGlzO3JldHVybiBvLnR5cGU9cixPYmplY3Quc2V0UHJvdG90eXBlT2YobyxFLnByb3RvdHlwZSksb31yZXR1cm4gbShFLE8pLEV9KGcpO3UuV2FybmluZz1JfSw4NTk6KGZlLHUsSyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5ldmFsdWF0ZT12b2lkIDA7dmFyIG09Syg2NTUpLGc9Syg3NTgpO3UuZXZhbHVhdGU9ZnVuY3Rpb24ocyxxKXt2YXIgQj1zLmdldE5lc3RlZFN0YXRlKCksTT1bXTtNLnB1c2goe25leHQ6cSxwYXJhbXM6e3N0YXRlOnMsbW9kaWZpYWJsZTpCLHJlY1Jlc3VsdDp2b2lkIDB9fSk7Zm9yKHZhciBWPXZvaWQgMDtNLmxlbmd0aD4wOyl7dmFyIEQ9TS5wb3AoKTtpZihEPT09dm9pZCAwKXRocm93IG5ldyBnLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiSG93IGlzIHRoaXMgdW5kZWZpbmVkPyIpO3ZhciBoPUQubmV4dDtpZihELm5leHQ9PT12b2lkIDApdGhyb3cgbmV3IGcuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJJJ2xsIHNvbHZlIGV2ZXJ5dGhpbmcgYnkgYnVybmluZyBpdCEiKTt2YXIgQT1ELnBhcmFtcztBLnJlY1Jlc3VsdD1WLFY9aCBpbnN0YW5jZW9mIG0uRGVjbGFyYXRpb24/aC5ldmFsdWF0ZShBLE0pOmguY29tcHV0ZShBLE0pfWlmKFYhPT12b2lkIDApe3ZhciBJPVYubmV3U3RhdGU7aWYoSSE9PXZvaWQgMCl7SS5zZXRXYXJuaW5ncyhCLmdldFdhcm5pbmdzKCkpO2Zvcih2YXIgTz0wLEU9Qi5nZXRNZW1vcnlDaGFuZ2VzKHMuaWQpO088RS5sZW5ndGg7TysrKXt2YXIgcj1FW09dO0kuc2V0Q2VsbChyWzBdLHJbMV0pfXZhciBlPUIuZ2V0SWRDaGFuZ2VzKHMuaWQpO2Zvcih2YXIgbyBpbiBlKWUuaGFzT3duUHJvcGVydHkobykmJkkuc2V0VmFsdWVJZGVudGlmaWVySWQobyxlW29dKTtJLmV4Y2VwdGlvbkV2YWxJZD1CLmV4Y2VwdGlvbkV2YWxJZH19cmV0dXJuIFZ9fSw0OTQ6ZnVuY3Rpb24oZmUsdSxLKXt2YXIgbSxnPXRoaXMmJnRoaXMuX19leHRlbmRzfHwobT1mdW5jdGlvbihsLHQpe3JldHVybihtPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihuLGkpe24uX19wcm90b19fPWl9fHxmdW5jdGlvbihuLGkpe2Zvcih2YXIgYSBpbiBpKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpLGEpJiYoblthXT1pW2FdKX0pKGwsdCl9LGZ1bmN0aW9uKGwsdCl7aWYodHlwZW9mIHQhPSJmdW5jdGlvbiImJnQhPT1udWxsKXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9bH1tKGwsdCksbC5wcm90b3R5cGU9dD09PW51bGw/T2JqZWN0LmNyZWF0ZSh0KToobi5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IG4pfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHUuUGF0dGVybkd1YXJkPXUuV2hpbGU9dS5Db25kaXRpb25hbD11LkNhc2VBbmFseXNpcz11LlJlY29yZFNlbGVjdG9yPXUuU2VxdWVuY2U9dS5MaXN0PXUuVHVwbGU9dS5EaXNqdW5jdGlvbj11LkNvbmp1bmN0aW9uPXUuSW5maXhFeHByZXNzaW9uPXUuTmVzdGVkTWF0Y2g9dS5EaXNqdW5jdGl2ZVBhdHRlcm49dS5Db25qdW5jdGl2ZVBhdHRlcm49dS5WZWN0b3I9dS5MYXllcmVkUGF0dGVybj11LldpbGRjYXJkPXUuTWF0Y2g9dS5MYW1iZGE9dS5SYWlzZUV4Y2VwdGlvbj11LkhhbmRsZUV4Y2VwdGlvbj11LkZ1bmN0aW9uQXBwbGljYXRpb249dS5UeXBlZEV4cHJlc3Npb249dS5Mb2NhbERlY2xhcmF0aW9uRXhwcmVzc2lvbj11LlJlY29yZD11LlZhbHVlSWRlbnRpZmllcj11LkNvbnN0YW50PXUuRXhwcmVzc2lvbj12b2lkIDA7dmFyIHM9Syg2OTkpLHE9Syg2NTUpLEI9Syg1MzQpLE09SygzNjcpLFY9Syg3NTgpLEQ9SygxMDYpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBsKCl7fXJldHVybiBsLnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKHQsbixpLGEsZixTKXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiZ2V0VHlwZSIgb24gYSBkZXJpdmVkIGZvcm0uIFsnK3RoaXMrIl0iKX0sbC5wcm90b3R5cGUuY29tcHV0ZT1mdW5jdGlvbih0LG4pe3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignQ2FsbGVkICJnZXRWYWx1ZSIgb24gYSBkZXJpdmVkIGZvcm0uIFsnK3RoaXMrIl0iKX0sbC5wcm90b3R5cGUuaXNTYWZlPWZ1bmN0aW9uKHQpe3JldHVybiEwfSxsLnByb3RvdHlwZS5nZXRFeHBsaWNpdFR5cGVWYXJpYWJsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFNldH0sbC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIllvdSBodW1hbnMgY2FuJ3Qgc2VlbSB0byB3cml0ZSBidWctZnJlZSBjb2RlLiBXaGF0IGFuIGluZmVyaW9yIHNwZWNpZXMuIil9LGwucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IFNldH0sbH0oKTt1LkV4cHJlc3Npb249aDt2YXIgQT1mdW5jdGlvbihsKXtmdW5jdGlvbiB0KG4pe3ZhciBpPWwuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS50b2tlbj1uLGl9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24obixpLGEpe3JldHVybltbXSx0aGlzLmdldFR5cGUobixpKVswXSxpXX0sdC5wcm90b3R5cGUuc3Vic3VtZXM9ZnVuY3Rpb24obixpKXtmb3IoO2kgaW5zdGFuY2VvZiByOylpPWkuZXhwcmVzc2lvbjtyZXR1cm4gaSBpbnN0YW5jZW9mIHQmJnRoaXMudG9TdHJpbmcoKT09PWkudG9TdHJpbmcoKX0sdC5wcm90b3R5cGUuY292ZXI9ZnVuY3Rpb24obixpKXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlx1NEUwMFx1NjYyOFx1NjVFNVx1Njc2NVx1MzA4NFx1MzA0Q1x1MzA4Q1x1MzAwMiIpfSx0LnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKG4saSl7dmFyIGE9dGhpcy5jb21wdXRlKHtzdGF0ZTpuLG1vZGlmaWFibGU6bixyZWNSZXN1bHQ6dm9pZCAwfSxbXSk7aWYoYT09PXZvaWQgMHx8YS52YWx1ZT09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlJpZ2h0IG5vdywgSSdtIHRoZSBoYXBwaWVzdCBpbnRlcnByZXRlciBpbiB0aGUgd29ybGQhIik7cmV0dXJuIGEudmFsdWUuZXF1YWxzKGkpP1tdOnZvaWQgMH0sdC5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbihuLGksYSxmLFMsTCl7aWYoaT09PXZvaWQgMCYmKGk9bmV3IE1hcCksYT09PXZvaWQgMCYmKGE9IicqdDAiKSxmPT09dm9pZCAwJiYoZj1uZXcgU2V0KSx0aGlzLnRva2VuIGluc3RhbmNlb2YgQi5JbnRlZ2VyQ29uc3RhbnRUb2tlbnx8dGhpcy50b2tlbiBpbnN0YW5jZW9mIEIuTnVtZXJpY1Rva2VuKXJldHVybltuZXcgcy5DdXN0b21UeXBlKCJpbnQiKSxbXSxhLGYsaSxuLnZhbHVlSWRlbnRpZmllcklkXTtpZih0aGlzLnRva2VuIGluc3RhbmNlb2YgQi5SZWFsQ29uc3RhbnRUb2tlbilyZXR1cm5bbmV3IHMuQ3VzdG9tVHlwZSgicmVhbCIpLFtdLGEsZixpLG4udmFsdWVJZGVudGlmaWVySWRdO2lmKHRoaXMudG9rZW4gaW5zdGFuY2VvZiBCLldvcmRDb25zdGFudFRva2VuKXJldHVybltuZXcgcy5DdXN0b21UeXBlKCJ3b3JkIiksW10sYSxmLGksbi52YWx1ZUlkZW50aWZpZXJJZF07aWYodGhpcy50b2tlbiBpbnN0YW5jZW9mIEIuQ2hhcmFjdGVyQ29uc3RhbnRUb2tlbilyZXR1cm5bbmV3IHMuQ3VzdG9tVHlwZSgiY2hhciIpLFtdLGEsZixpLG4udmFsdWVJZGVudGlmaWVySWRdO2lmKHRoaXMudG9rZW4gaW5zdGFuY2VvZiBCLlN0cmluZ0NvbnN0YW50VG9rZW4pcmV0dXJuW25ldyBzLkN1c3RvbVR5cGUoInN0cmluZyIpLFtdLGEsZixpLG4udmFsdWVJZGVudGlmaWVySWRdO3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignIicrdGhpcysnIiBkb2VzIG5vdCBzZWVtIHRvIGJlIGEgdmFsaWQgY29uc3RhbnQuJyl9LHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW4uZ2V0VGV4dCgpfSx0LnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKG4saSl7dmFyIGE9dm9pZCAwO2lmKHRoaXMudG9rZW4gaW5zdGFuY2VvZiBCLkludGVnZXJDb25zdGFudFRva2VufHx0aGlzLnRva2VuIGluc3RhbmNlb2YgQi5OdW1lcmljVG9rZW4/YT1uZXcgRC5JbnRlZ2VyKHRoaXMudG9rZW4udmFsdWUpOnRoaXMudG9rZW4gaW5zdGFuY2VvZiBCLlJlYWxDb25zdGFudFRva2VuP2E9bmV3IEQuUmVhbCh0aGlzLnRva2VuLnZhbHVlKTp0aGlzLnRva2VuIGluc3RhbmNlb2YgQi5Xb3JkQ29uc3RhbnRUb2tlbj9hPW5ldyBELldvcmQodGhpcy50b2tlbi52YWx1ZSk6dGhpcy50b2tlbiBpbnN0YW5jZW9mIEIuQ2hhcmFjdGVyQ29uc3RhbnRUb2tlbj9hPW5ldyBELkNoYXJWYWx1ZSh0aGlzLnRva2VuLnZhbHVlKTp0aGlzLnRva2VuIGluc3RhbmNlb2YgQi5TdHJpbmdDb25zdGFudFRva2VuJiYoYT1uZXcgRC5TdHJpbmdWYWx1ZSh0aGlzLnRva2VuLnZhbHVlKSksYT09PXZvaWQgMCl0aHJvdyBuZXcgVi5FdmFsdWF0aW9uRXJyb3IoIllvdSBzdXJlIHRoYXQgdGhpcyBpcyBhIGNvbnN0YW50PyIpO3JldHVybntuZXdTdGF0ZTp2b2lkIDAsdmFsdWU6YSxoYXNUaHJvd246ITF9fSx0fShoKTt1LkNvbnN0YW50PUE7dmFyIEk9ZnVuY3Rpb24obCl7ZnVuY3Rpb24gdChuKXt2YXIgaT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkubmFtZT1uLGl9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5nZXRDb25zdHJ1Y3Rvck5hbWU9ZnVuY3Rpb24obil7dmFyIGk9dGhpcy5uYW1lLmdldFRleHQoKSxhPW4uZ2V0U3RhdGljVmFsdWUoaSk7aWYoYSE9PXZvaWQgMCYmYVsxXSE9PU0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSlyZXR1cm4gaX0sdC5wcm90b3R5cGUuZ2V0Q29uc3RydWN0b3JMaXN0PWZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMubmFtZS5nZXRUZXh0KCksYT1uLmdldFN0YXRpY1ZhbHVlKGkpO2lmKGEhPT12b2lkIDAmJmFbMV0hPT1NLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpe2lmKGFbMV09PT1NLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfQ09OU1RSVUNUT1Ipe2Zvcih2YXIgZj1hWzBdO2YgaW5zdGFuY2VvZiBzLlR5cGVWYXJpYWJsZUJpbmQ7KWY9Zi50eXBlO2lmKGYgaW5zdGFuY2VvZiBzLkZ1bmN0aW9uVHlwZSYmKGY9Zi5yZXR1cm5UeXBlKSwhKGYgaW5zdGFuY2VvZiBzLkN1c3RvbVR5cGUpKXJldHVybjt2YXIgUz1mLm5hbWUsTD1uLmdldFN0YXRpY1R5cGUoUyk7cmV0dXJuIEw9PT12b2lkIDA/dm9pZCAwOkwuY29uc3RydWN0b3JzfXJldHVyblsiX19leG4iXX19LHQucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24obixpLGEsZixTLEwpe2k9PT12b2lkIDAmJihpPW5ldyBNYXApLGE9PT12b2lkIDAmJihhPSInKnQwIiksZj09PXZvaWQgMCYmKGY9bmV3IFNldCksTD09PXZvaWQgMCYmKEw9bmV3IE1hcCk7dmFyIGs9dm9pZCAwO2lmKHRoaXMubmFtZSBpbnN0YW5jZW9mIEIuTG9uZ0lkZW50aWZpZXJUb2tlbil7dmFyIFU9bi5nZXRBbmRSZXNvbHZlU3RhdGljU3RydWN0dXJlKHRoaXMubmFtZSk7aWYoVSE9PXZvaWQgMCYmKGs9VS5nZXRWYWx1ZSh0aGlzLm5hbWUuaWQuZ2V0VGV4dCgpKSkhPT12b2lkIDApe3ZhciBqPW5ldyBNLlN0YXRlKDAsdm9pZCAwLFUsbi5keW5hbWljQmFzaXMsWzAse31dLDQpO2s9W2tbMF0ucXVhbGlmeShqLHRoaXMubmFtZSksa1sxXV19fWVsc2V7dmFyIFg9TC5nZXQodGhpcy5uYW1lLmdldFRleHQoKSk7az1YIT09dm9pZCAwP1tYLE0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV06bi5nZXRTdGF0aWNWYWx1ZSh0aGlzLm5hbWUuZ2V0VGV4dCgpKX1pZihrPT09dm9pZCAwKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1VuYm91bmQgdmFsdWUgaWRlbnRpZmllciAiJyt0aGlzLm5hbWUuZ2V0VGV4dCgpKyciLicpO2Zvcih2YXIgWj1uZXcgU2V0LGVlPW5ldyBTZXQsdGU9bmV3IE1hcDtrWzBdaW5zdGFuY2VvZiBzLlR5cGVWYXJpYWJsZUJpbmQ7KWtbMF0uaXNGcmVlPyhlZT1lZS5hZGQoa1swXS5uYW1lKSx0ZT10ZS5zZXQoa1swXS5uYW1lLGtbMF0ubmFtZSkpOlo9Wi5hZGQoa1swXS5uYW1lKSxrWzBdPWtbMF0udHlwZTtaPVouYWRkKCIqIik7dmFyIG9lPVtdO1ouZm9yRWFjaChmdW5jdGlvbih1ZSl7dmFyIGllPWE9cy5UeXBlVmFyaWFibGUuZ2V0VW51c2VkVHlwZVZhcmlhYmxlTmFtZShuLGEsZixpLFopO3VlWzFdPT09IiciJiYoaWU9IiciK2llKSxvZS5wdXNoKGllKSx0ZT10ZS5zZXQodWUsaWUpfSk7Zm9yKHZhciBzZT0wO3NlPG9lLmxlbmd0aDsrK3NlKWY9Zi5hZGQob2Vbc2VdKTtyZXR1cm5ba1swXS5yZXBsYWNlVHlwZVZhcmlhYmxlcyh0ZSxlZSkuaW5zdGFudGlhdGUobixpKSxbXSxhLGYsaSxuLnZhbHVlSWRlbnRpZmllcklkXX0sdC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKG4saSxhKXtpZih0aGlzLm5hbWUgaW5zdGFuY2VvZiBCLkxvbmdJZGVudGlmaWVyVG9rZW4pdGhyb3cgbmV3IFYuRWxhYm9yYXRpb25FcnJvcigiVmFyaWFibGUgbmFtZXMgaW4gcGF0dGVybnMgY2Fubm90IGJlIHF1YWxpZmllZC4iKTt2YXIgZj1uLmdldFN0YXRpY1ZhbHVlKHRoaXMubmFtZS5nZXRUZXh0KCkpO2lmKGY9PT12b2lkIDB8fGZbMV09PT1NLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpcmV0dXJuW1tbdGhpcy5uYW1lLmdldFRleHQoKSxhLmluc3RhbnRpYXRlKG4saSldXSxhLmluc3RhbnRpYXRlKG4saSksaV07dmFyIFM9dGhpcy5nZXRUeXBlKG4saSwiJypnMCIpO1NbM10uZm9yRWFjaChmdW5jdGlvbihrKXt2YXIgVT0iJypwIitrLnN1YnN0cmluZygzKTtrWzFdPT09IiciJiYoVT0iJycqcCIray5zdWJzdHJpbmcoNCkpLFNbNF09U1s0XS5zZXQoayxbbmV3IHMuVHlwZVZhcmlhYmxlKFUpLCExXSl9KSxmWzBdPVNbMF0saT1TWzRdO3RyeXt2YXIgTD1hLm1lcmdlKG4saSxmWzBdKTtyZXR1cm5bW10sTFswXSxMWzFdXX1jYXRjaChrKXt0aHJvdyBrIGluc3RhbmNlb2YgQXJyYXk/bmV3IFYuRWxhYm9yYXRpb25FcnJvcignVHlwZSBjbGFzaDogIicrYS5ub3JtYWxpemUoKVswXSsnIiB2cy4gIicrZlswXS5ub3JtYWxpemUoKVswXSsnIjogJytrWzBdKTprfX0sdC5wcm90b3R5cGUuc3Vic3VtZXM9ZnVuY3Rpb24obixpKXtmb3IoO2kgaW5zdGFuY2VvZiByOylpPWkuZXhwcmVzc2lvbjt2YXIgYT10aGlzLmdldENvbnN0cnVjdG9yTmFtZShuKTtyZXR1cm4gYT09PXZvaWQgMHx8aSBpbnN0YW5jZW9mIHQmJmE9PT1pLmdldENvbnN0cnVjdG9yTmFtZShuKX0sdC5wcm90b3R5cGUuY292ZXI9ZnVuY3Rpb24obixpKXtyZXR1cm5bXX0sdC5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbihuLGkpe3ZhciBhPXZvaWQgMDtpZih0aGlzLm5hbWUgaW5zdGFuY2VvZiBCLkxvbmdJZGVudGlmaWVyVG9rZW4pe3ZhciBmPW4uZ2V0QW5kUmVzb2x2ZUR5bmFtaWNTdHJ1Y3R1cmUodGhpcy5uYW1lKTtmIT09dm9pZCAwJiYoYT1mLmdldFZhbHVlKHRoaXMubmFtZS5pZC5nZXRUZXh0KCkpKX1lbHNlIGE9bi5nZXREeW5hbWljVmFsdWUodGhpcy5uYW1lLmdldFRleHQoKSk7aWYoYT09PXZvaWQgMHx8YVsxXT09PU0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSlyZXR1cm5bW3RoaXMubmFtZS5nZXRUZXh0KCksaV1dO3RyeXtpZihpLmVxdWFscyhhWzBdKSlyZXR1cm5bXX1jYXRjaHtyZXR1cm5bW3RoaXMubmFtZS5nZXRUZXh0KCksaV1dfX0sdC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lLmdldFRleHQoKX0sdC5wcm90b3R5cGUuY29tcHV0ZT1mdW5jdGlvbihuLGkpe3ZhciBhPW4uc3RhdGUsZj12b2lkIDA7aWYodGhpcy5uYW1lIGluc3RhbmNlb2YgQi5Mb25nSWRlbnRpZmllclRva2VuKXt2YXIgUz1hLmdldEFuZFJlc29sdmVEeW5hbWljU3RydWN0dXJlKHRoaXMubmFtZSk7UyE9PXZvaWQgMCYmKGY9Uy5nZXRWYWx1ZSh0aGlzLm5hbWUuaWQuZ2V0VGV4dCgpKSl9ZWxzZSBmPWEuZ2V0RHluYW1pY1ZhbHVlKHRoaXMubmFtZS5nZXRUZXh0KCkpO2lmKGY9PT12b2lkIDApdGhyb3cgbmV3IFYuRXZhbHVhdGlvbkVycm9yKCdVbmJvdW5kIHZhbHVlIGlkZW50aWZpZXIgIicrdGhpcy5uYW1lLmdldFRleHQoKSsnIi4nKTtyZXR1cm4gZlsxXT09PU0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUiYmZlswXS5udW1BcmdzPT09MHx8ZlsxXT09PU0uSWRlbnRpZmllclN0YXR1cy5FWENFUFRJT05fQ09OU1RSVUNUT1ImJmZbMF0ubnVtQXJncz09PTA/e25ld1N0YXRlOnZvaWQgMCx2YWx1ZTpmWzBdLmNvbnN0cnVjdCgpLGhhc1Rocm93bjohMX06e25ld1N0YXRlOnZvaWQgMCx2YWx1ZTpmWzBdLGhhc1Rocm93bjohMX19LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXtpZihpLmhhcyh0aGlzLm5hbWUuZ2V0VGV4dCgpKSlyZXR1cm4gbmV3IFNldDt2YXIgYT1uLmdldFN0YXRpY1ZhbHVlKHRoaXMubmFtZS5nZXRUZXh0KCkpO2lmKGEhPT12b2lkIDAmJmFbMV0hPT1NLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpcmV0dXJuIG5ldyBTZXQ7dmFyIGY9bi5nZXREeW5hbWljVmFsdWUodGhpcy5uYW1lLmdldFRleHQoKSk7cmV0dXJuIGYhPT12b2lkIDAmJmZbMV0hPT1NLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEU/bmV3IFNldDpuZXcgU2V0KCkuYWRkKHRoaXMubmFtZS5nZXRUZXh0KCkpfSx0fShoKTt1LlZhbHVlSWRlbnRpZmllcj1JO3ZhciBPPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobixpKXt2YXIgYT1sLmNhbGwodGhpcyl8fHRoaXM7YS5jb21wbGV0ZT1uLGEuZW50cmllcz1pLGEuZW50cmllcy5zb3J0KCk7Zm9yKHZhciBmPTE7ZjxhLmVudHJpZXMubGVuZ3RoOysrZilpZihhLmVudHJpZXNbZl1bMF09PT1hLmVudHJpZXNbZi0xXVswXSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCdMYWJlbCAiJythLmVudHJpZXNbZl1bMF0rJyIgb2NjdXJzIG1vcmUgdGhhbiBvbmNlIGluIHRoZSBzYW1lIHJlY29yZC4nKTtyZXR1cm4gYX1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLmhhc0NvbnN0YW50PWZ1bmN0aW9uKCl7Zm9yKHZhciBuPTAsaT10aGlzLmVudHJpZXM7bjxpLmxlbmd0aDtuKyspe3ZhciBhPWlbbl07aWYoYVsxXWluc3RhbmNlb2YgQXx8YVsxXWluc3RhbmNlb2YgdCYmYVsxXS5oYXNDb25zdGFudCgpKXJldHVybiEwfXJldHVybiExfSx0LnByb3RvdHlwZS5zdWJzdW1lcz1mdW5jdGlvbihuLGkpe2Zvcig7aSBpbnN0YW5jZW9mIHI7KWk9aS5leHByZXNzaW9uO2lmKCEoaSBpbnN0YW5jZW9mIHQpKXJldHVybiExO2Zvcih2YXIgYT0wLGY9MDthPHRoaXMuZW50cmllcy5sZW5ndGh8fGY8aS5lbnRyaWVzLmxlbmd0aDspe3ZhciBTPWE8dGhpcy5lbnRyaWVzLmxlbmd0aD90aGlzLmVudHJpZXNbYV06dm9pZCAwLEw9ZjxpLmVudHJpZXMubGVuZ3RoP2kuZW50cmllc1tmXTp2b2lkIDA7aWYoTD09PXZvaWQgMHx8UyE9PXZvaWQgMCYmU1swXTxMWzBdKXtpZihTPT09dm9pZCAwKWJyZWFrO2lmKFNbMV0uc3Vic3VtZXMobixuZXcgQykpeysrYTtjb250aW51ZX1yZXR1cm4hMX1pZihTIT09dm9pZCAwJiZMIT09dm9pZCAwJiZTWzBdPT09TFswXSl7aWYoU1sxXS5zdWJzdW1lcyhuLExbMV0pKXsrK2EsKytmO2NvbnRpbnVlfXJldHVybiExfWlmKFM9PT12b2lkIDB8fEwhPT12b2lkIDAmJlNbMF0+TFswXSl7aWYoTD09PXZvaWQgMClicmVhaztpZihuZXcgQygpLnN1YnN1bWVzKG4sTFsxXSkpeysrZjtjb250aW51ZX1yZXR1cm4hMX19cmV0dXJuITB9LHQucHJvdG90eXBlLmdldEV4cGxpY2l0VHlwZVZhcmlhYmxlcz1mdW5jdGlvbigpe2Zvcih2YXIgbj1uZXcgU2V0LGk9MDtpPHRoaXMuZW50cmllcy5sZW5ndGg7KytpKXRoaXMuZW50cmllc1tpXVsxXS5nZXRFeHBsaWNpdFR5cGVWYXJpYWJsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe249bi5hZGQoYSl9KTtyZXR1cm4gbn0sdC5wcm90b3R5cGUuaGFzRW50cnk9ZnVuY3Rpb24obil7Zm9yKHZhciBpPTA7aTx0aGlzLmVudHJpZXMubGVuZ3RoOysraSlpZih0aGlzLmVudHJpZXNbaV1bMF09PT1uKXJldHVybiEwO3JldHVybiExfSx0LnByb3RvdHlwZS5nZXRFbnRyeT1mdW5jdGlvbihuKXtmb3IodmFyIGk9MDtpPHRoaXMuZW50cmllcy5sZW5ndGg7KytpKWlmKHRoaXMuZW50cmllc1tpXVswXT09PW4pcmV0dXJuIHRoaXMuZW50cmllc1tpXVsxXTt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ1llYWgsICInK24rJyIgd291bGQgYmUgbmljZSB0byBoYXZlLicpfSx0LnByb3RvdHlwZS5pc1NhZmU9ZnVuY3Rpb24obil7Zm9yKHZhciBpPTA7aTx0aGlzLmVudHJpZXMubGVuZ3RoOysraSlpZighdGhpcy5lbnRyaWVzW2ldWzFdLmlzU2FmZShuKSlyZXR1cm4hMTtyZXR1cm4hMH0sdC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKG4saSxhKXtpZihhIGluc3RhbmNlb2Ygcy5SZWNvcmRUeXBlfHwoYT1hLmluc3RhbnRpYXRlKG4saSkpLGEgaW5zdGFuY2VvZiBzLlR5cGVWYXJpYWJsZXx8YSBpbnN0YW5jZW9mIHMuUmVjb3JkVHlwZSYmIWEuY29tcGxldGUpe3ZhciBmPW5ldyBNYXAsUz0iIixMPSExO2lmKGEgaW5zdGFuY2VvZiBzLlR5cGVWYXJpYWJsZSlTPWEubmFtZSxMPWEuaXNGcmVlO2Vsc2V7aWYoIShhIGluc3RhbmNlb2Ygcy5SZWNvcmRUeXBlJiZhLnNvdXJjZVR5VmFyIT09dm9pZCAwKSl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkFuIGluY29tcGxldGUgcmVjb3JkIHR5cGUganVzdCBkaWVkLiIpO2lmKFM9YS5zb3VyY2VUeVZhciwhaS5oYXMoUykpdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJBbiBpbmNvbXBsZXRlIHJlY29yZCB0eXBlIGp1c3QgZGllZC4iKTtMPWkuZ2V0KFMpWzFdfWZvcih2YXIgaz0wO2s8dGhpcy5lbnRyaWVzLmxlbmd0aDsrK2spe3ZhciBVPW5ldyBzLlR5cGVWYXJpYWJsZShTKyIqIit0aGlzLmVudHJpZXNba11bMF0pO1UuaXNGcmVlPUwsZj1mLnNldCh0aGlzLmVudHJpZXNba11bMF0sVSl9dmFyIGo9bmV3IHMuUmVjb3JkVHlwZShmLHRoaXMuY29tcGxldGUsdGhpcy5jb21wbGV0ZT92b2lkIDA6Uyk7aWYoaS5oYXMoIkAiK1MpKXt2YXIgWD1pLmdldCgiQCIrUyk7dHJ5e3ZhciBaPVhbMF0ubWVyZ2UobixpLGopO2k9aS5zZXQoIkAiK1MsW1pbMF0sTF0pLHRoaXMuY29tcGxldGUmJihpPWkuc2V0KFMsW1pbMF0sTF0pKX1jYXRjaChwZSl7dGhyb3cgcGUgaW5zdGFuY2VvZiBBcnJheT9uZXcgVi5FbGFib3JhdGlvbkVycm9yKCdUeXBlIG1pc21hdGNoICInK1hbMF0ubm9ybWFsaXplKClbMF0rJyIgdnMuICInK2oubm9ybWFsaXplKClbMF0rJyI6ICcrcGVbMF0pOnBlfX1lbHNlIGk9aS5zZXQoIkAiK1MsW2osTF0pO2E9an1pZighKGEgaW5zdGFuY2VvZiBzLlJlY29yZFR5cGUpKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ0V4cGVjdGVkIHBhdHRlcm4gb2YgYSByZWNvcmQgdHlwZSwgZ290ICInK2EudHlwZU5hbWUoKSsnIi4nKTtpZih0aGlzLmNvbXBsZXRlJiZhLmNvbXBsZXRlJiZ0aGlzLmVudHJpZXMubGVuZ3RoIT09YS5lbGVtZW50cy5zaXplKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIkV4cGVjdGVkIGEgcmVjb3JkIHR5cGUgd2l0aCAiK3RoaXMuZW50cmllcy5sZW5ndGgrIiBlbnRyaWVzLCBidXQgdGhlIGdpdmVuIHJlY29yZCBoYXMgIithLmVsZW1lbnRzLnNpemUrIiBlbnRyaWVzLiIpO3ZhciBlZT1bXSx0ZT1uZXcgTWFwLG9lPWksc2U9bmV3IFNldDtmb3Ioaz0wO2s8dGhpcy5lbnRyaWVzLmxlbmd0aDsrK2spe2lmKHNlPXNlLmFkZCh0aGlzLmVudHJpZXNba11bMF0pLCFhLmhhc1R5cGUodGhpcy5lbnRyaWVzW2tdWzBdKSl7aWYoYS5jb21wbGV0ZSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCdSZWNvcmQgaXMgbWlzc2luZyBlbnRyeSAiJyt0aGlzLmVudHJpZXNba11bMF0rJyIuJyk7YS5zZXRUeXBlKHRoaXMuZW50cmllc1trXVswXSxuZXcgcy5UeXBlVmFyaWFibGUoIip6IitrKyIqIithLnRvU3RyaW5nKCkubGVuZ3RoKyIqIikpfXZhciB1ZT10aGlzLmVudHJpZXNba11bMV0ubWF0Y2hUeXBlKG4sb2UsYS5nZXRUeXBlKHRoaXMuZW50cmllc1trXVswXSkpO2VlPWVlLmNvbmNhdCh1ZVswXSksdGU9dGUuc2V0KHRoaXMuZW50cmllc1trXVswXSx1ZVsxXSksb2U9dWVbMl19dmFyIGllPW5ldyBzLlJlY29yZFR5cGUodGUsdGhpcy5jb21wbGV0ZXx8YS5jb21wbGV0ZSk7dHJ5e3JldHVybltlZSwoWj1pZS5tZXJnZShuLG9lLGEpKVswXSxaWzFdXX1jYXRjaChwZSl7dGhyb3cgcGUgaW5zdGFuY2VvZiBBcnJheT9uZXcgVi5FbGFib3JhdGlvbkVycm9yKCdUeXBlIG1pc21hdGNoICInK2Eubm9ybWFsaXplKClbMF0rJyIgdnMuICInK2llLm5vcm1hbGl6ZSgpWzBdKyciOiAnK3BlWzBdKTpwZX19LHQucHJvdG90eXBlLmNvdmVyPWZ1bmN0aW9uKG4saSl7aWYodGhpcy5lbnRyaWVzLmxlbmd0aD09PTApcmV0dXJuIGkubGVuZ3RoPT09MD9bbmV3IFYuV2FybmluZygtMSxgUGF0dGVybiBtYXRjaGluZyBpcyBub3QgZXhoYXVzdGl2ZS4KYCldOltdO2Zvcih2YXIgYT10aGlzLmVudHJpZXNbMF1bMF0sZj1bXSxTPW5ldyBNYXAsTD1uZXcgQyxrPVtdLFU9W10saj1bXSxYPVtdLFo9W10sZWU9W10sdGU9dm9pZCAwLG9lPW5ldyBTZXQsc2U9ZnVuY3Rpb24oaGUpe2lmKHRlIT09dm9pZCAwKXJldHVybiBlZS5wdXNoKG5ldyBWLldhcm5pbmcoMCwnUnVsZXMgYWZ0ZXIgIicrdGUrYCIgdW51c2VkIGluIHBhdHRlcm4gbWF0Y2hpbmcuCmApKSwiYnJlYWsiO2lmKCEoaGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlBpcGlydSBwaXJ1IHBpcnUgcGlwaXJ1IHBpaSEiKTtpZihoZS5oYXNDb25zdGFudCgpKXJldHVybiJjb250aW51ZSI7aGUuc3Vic3VtZXMobix1ZSkmJih0ZT1oZS50b1N0cmluZygpKTtmb3IodmFyIGdlPVtdLHllPXZvaWQgMCx3ZT0wLHhlPWhlLmVudHJpZXM7d2U8eGUubGVuZ3RoO3dlKyspe3ZhciBFZT14ZVt3ZV07RWVbMF09PT1hPyh5ZT1FZVsxXSlpbnN0YW5jZW9mIGUmJmdlLnB1c2goW0VlWzBdLHllLmFyZ3VtZW50XSk6Z2UucHVzaChFZSl9aWYoeWU9PT12b2lkIDAmJih5ZT1MKSx5ZSBpbnN0YW5jZW9mIEkpe2lmKHllLmdldENvbnN0cnVjdG9yTmFtZShuKT09PXZvaWQgMCl5ZT1MO2Vsc2UgaWYoVS5sZW5ndGg9PT0wKXtpZigoUmU9eWUuZ2V0Q29uc3RydWN0b3JMaXN0KG4pKT09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlBpcGlydSBwaXJ1IHBpcnUgcGlwaXJ1IHBpaSEiKTtVPVJlfX1pZihmLnB1c2goeWUpLHllIGluc3RhbmNlb2YgdCl7aWYoeWUuaGFzQ29uc3RhbnQoKSlyZXR1cm4iY29udGludWUiO3ZhciBtZT1bXTtaLnB1c2goWyExLCExXSk7Zm9yKHZhciB2ZT0wO3ZlPGoubGVuZ3RoOysrdmUpe3ZhciBBZT15ZS5zdWJzdW1lcyhuLGpbdmVdKSxEZT1qW3ZlXS5zdWJzdW1lcyhuLHllKTtBZSYmKFpbdmVdWzBdPSEwLFpbai5sZW5ndGhdWzFdPSEwLChMZT1TLmdldCh2ZSsiIikpLnB1c2gobmV3IHQoaGUuY29tcGxldGUsZ2UpKSxTPVMuc2V0KHZlKyIiLExlKSksRGUmJihaW3ZlXVsxXT0hMCxaW2oubGVuZ3RoXVswXT0hMCxtZS5wdXNoKG5ldyB0KGhlLmNvbXBsZXRlLFhbdmVdKSkpfXJldHVybiBtZS5wdXNoKG5ldyB0KGhlLmNvbXBsZXRlLGdlKSksUz1TLnNldChqLmxlbmd0aCsiIixrLmNvbmNhdChtZSkpLGoucHVzaCh5ZSksWC5wdXNoKGdlKSwiY29udGludWUifXZhciBMZSxPZT0hMSxWZT15ZS50b1N0cmluZygpO2lmKHllIGluc3RhbmNlb2YgZSl7T2U9ITA7dmFyIEJlPXllLmZ1bmM7aWYoIShCZSBpbnN0YW5jZW9mIEkpKXRocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiVGhlcmUuIEp1c3QgYW5vdGhlciB1bmZvcnR1bmF0ZSBhY2NpZGVudC4iKTtpZihWZT1CZS5uYW1lLmdldFRleHQoKSxVLmxlbmd0aD09PTApe3ZhciBSZTtpZigoUmU9QmUuZ2V0Q29uc3RydWN0b3JMaXN0KG4pKT09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlBpcGlydSBwaXJ1IHBpcnUgcGlwaXJ1IHBpaSEiKTtVPVJlfX1pZihWZSs9eWUuY29uc3RydWN0b3IubmFtZSxPZSYmKG9lPW9lLmFkZChWZSkpLHllIGluc3RhbmNlb2YgQSlyZXR1cm4iY29udGludWUiO2lmKHllIGluc3RhbmNlb2YgQyl7ay5wdXNoKG5ldyB0KGhlLmNvbXBsZXRlLGdlKSk7dmFyIENlPW5ldyBNYXA7cmV0dXJuIFMuZm9yRWFjaChmdW5jdGlvbihfZSxxZSl7X2UucHVzaChuZXcgdChoZS5jb21wbGV0ZSxnZSkpLENlPUNlLnNldChxZSxfZSl9KSxTPUNlLCJjb250aW51ZSJ9Uy5oYXMoVmUpPygoTGU9Uy5nZXQoVmUpKS5wdXNoKG5ldyB0KGhlLmNvbXBsZXRlLGdlKSksUz1TLnNldChWZSxMZSkpOlM9Uy5zZXQoVmUsay5jb25jYXQoW25ldyB0KGhlLmNvbXBsZXRlLGdlKV0pKX0sdWU9dGhpcyxpZT0wLHBlPWk7aWU8cGUubGVuZ3RoJiZzZShwZVtpZV0pIT09ImJyZWFrIjtpZSsrKTtlZT1lZS5jb25jYXQoTC5jb3ZlcihuLGYpLmZpbHRlcihmdW5jdGlvbihoZSl7cmV0dXJuIGhlLnR5cGU9PT0tMX0pKTtmb3IodmFyIHJlPVtdLGFlPTE7YWU8dGhpcy5lbnRyaWVzLmxlbmd0aDsrK2FlKXJlLnB1c2godGhpcy5lbnRyaWVzW2FlXSk7dmFyIGNlPW5ldyB0KCEwLHJlKSxsZT1bXTtmb3IobGUucHVzaChbdGhpcy5lbnRyaWVzWzBdWzBdLG5ldyBDXSksYWU9MTthZTx0aGlzLmVudHJpZXMubGVuZ3RoOysrYWUpbGUucHVzaCh0aGlzLmVudHJpZXNbYWVdKTt2YXIgZGU9bmV3IHQoITAsbGUpO3JldHVybiBTLmZvckVhY2goZnVuY3Rpb24oaGUsZ2Upe2lmKG9lLmhhcyhnZSkpe2Zvcih2YXIgeWU9W10sd2U9MCx4ZT1oZTt3ZTx4ZS5sZW5ndGg7d2UrKyl7dmFyIEVlPXhlW3dlXTtpZihFZSBpbnN0YW5jZW9mIHQpaWYoRWUuaGFzRW50cnkoYSkpeWUucHVzaChFZSk7ZWxzZXt2YXIgbWU9W107bWUucHVzaChbYSxuZXcgQ10pO2Zvcih2YXIgdmU9MDt2ZTxFZS5lbnRyaWVzLmxlbmd0aDsrK3ZlKW1lLnB1c2goRWUuZW50cmllc1t2ZV0pO3llLnB1c2gobmV3IHQoITAsbWUpKX1lbHNlIHllLnB1c2goRWUpfWVlPWVlLmNvbmNhdChkZS5jb3ZlcihuLHllKS5maWx0ZXIoZnVuY3Rpb24oQWUpe3JldHVybiBBZS50eXBlPT09LTF9KSl9ZWxzZSBlZT1lZS5jb25jYXQoY2UuY292ZXIobixoZSkuZmlsdGVyKGZ1bmN0aW9uKEFlKXtyZXR1cm4gQWUudHlwZT09PS0xfSkpfSksKFMuc2l6ZT09PTB8fFMuc2l6ZTxVLmxlbmd0aCkmJihlZT1lZS5jb25jYXQoY2UuY292ZXIobixrKSkpLGVlfSx0LnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKG4saSl7aWYoaSBpbnN0YW5jZW9mIEQuUmVjb3JkVmFsdWUmJighdGhpcy5jb21wbGV0ZXx8dGhpcy5lbnRyaWVzLmxlbmd0aD09PWkuZW50cmllcy5zaXplKSl7Zm9yKHZhciBhPVtdLGY9MDtmPHRoaXMuZW50cmllcy5sZW5ndGg7KytmKXtpZighaS5oYXNWYWx1ZSh0aGlzLmVudHJpZXNbZl1bMF0pKXJldHVybjt2YXIgUz10aGlzLmVudHJpZXNbZl1bMV0ubWF0Y2hlcyhuLGkuZ2V0VmFsdWUodGhpcy5lbnRyaWVzW2ZdWzBdKSk7aWYoUz09PXZvaWQgMClyZXR1cm4gUztmb3IodmFyIEw9MDtMPFMubGVuZ3RoOysrTClhLnB1c2goU1tMXSl9cmV0dXJuIGF9fSx0LnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKG4saSxhLGYsUyxMKXtpPT09dm9pZCAwJiYoaT1uZXcgTWFwKSxhPT09dm9pZCAwJiYoYT0iJyp0MCIpLGY9PT12b2lkIDAmJihmPW5ldyBTZXQpLFM9PT12b2lkIDAmJihTPSExKSxMPT09dm9pZCAwJiYoTD1uZXcgTWFwKTtmb3IodmFyIGs9bmV3IE1hcCxVPVtdLGo9aSxYPTA7WDx0aGlzLmVudHJpZXMubGVuZ3RoOysrWCl7dmFyIFo9dGhpcy5lbnRyaWVzW1hdWzBdLGVlPXRoaXMuZW50cmllc1tYXVsxXTtpZihrLmhhcyhaKSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCdMYWJlbCAiJytaKyciIG9jY3VycyBtb3JlIHRoYW4gb25jZSBpbiB0aGUgc2FtZSByZWNvcmQuJyk7aWYoZWUgaW5zdGFuY2VvZiBJJiZTKXt2YXIgdGU9bi5nZXRTdGF0aWNWYWx1ZShlZS5uYW1lLmdldFRleHQoKSk7aWYodGUhPT12b2lkIDAmJnRlWzFdIT09TS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFJiZ0ZVswXWluc3RhbmNlb2Ygcy5GdW5jdGlvblR5cGUpdGhyb3cgbmV3IFYuRWxhYm9yYXRpb25FcnJvcigiVW5hcnkgY29uc3RydWN0b3IgaW4gdGhlIHBhdHRlcm4gbmVlZHMgYW4gYXJndW1lbnQuIil9dmFyIG9lPWVlLmdldFR5cGUobixqLGEsZixTLEwpO1U9VS5jb25jYXQob2VbMV0pLGE9b2VbMl0sZj1vZVszXSxvZVs0XS5mb3JFYWNoKGZ1bmN0aW9uKHNlLHVlKXtqPWouc2V0KHVlLHNlKX0pLG4udmFsdWVJZGVudGlmaWVySWQ9b2VbNV0saz1rLnNldChaLG9lWzBdKX1yZXR1cm5bbmV3IHMuUmVjb3JkVHlwZShrLHRoaXMuY29tcGxldGUpLFUsYSxmLGosbi52YWx1ZUlkZW50aWZpZXJJZF19LHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLGk9MDtpPHRoaXMuZW50cmllcy5sZW5ndGg7KytpKXt2YXIgYT10aGlzLmVudHJpZXNbaV07bi5wdXNoKFthWzBdLGFbMV0uc2ltcGxpZnkoKV0pfXJldHVybiBuZXcgdCh0aGlzLmNvbXBsZXRlLG4pfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgbj10aGlzLmVudHJpZXMubGVuZ3RoIT09MSxpPTA7aTx0aGlzLmVudHJpZXMubGVuZ3RoOysraSl0aGlzLmVudHJpZXNbaV1bMF0hPT0iIisoaSsxKSYmKG49ITEpO3ZhciBhPSJ7IjtpZihuKXtmb3IoYT0iKCIsaT0wO2k8dGhpcy5lbnRyaWVzLmxlbmd0aDsrK2kpaT4wJiYoYSs9IiwgIiksYSs9dGhpcy5lbnRyaWVzW2ldWzFdLnRvU3RyaW5nKCk7cmV0dXJuIGErIikifXZhciBmPSEwO2ZvcihpPTA7aTx0aGlzLmVudHJpZXMubGVuZ3RoOysraSlmfHwoYSs9IiwgIiksZj0hMSxhKz10aGlzLmVudHJpZXNbaV1bMF0rIiA9ICIrdGhpcy5lbnRyaWVzW2ldWzFdO3JldHVybiB0aGlzLmNvbXBsZXRlfHwoZnx8KGErPSIsICIpLGErPSIuLi4iKSxhKyJ9In0sdC5wcm90b3R5cGUuY29tcHV0ZT1mdW5jdGlvbihuLGkpe3ZhciBhPW4uc3RhdGU7bi5zdGVwPT09dm9pZCAwJiYobi5zdGVwPS0xLG4ubmVudHI9bmV3IE1hcCk7dmFyIGY9bi5uZW50cixTPW4uc3RlcDtpZihTPj0wKXt2YXIgTD1uLnJlY1Jlc3VsdDtpZihMPT09dm9pZCAwKXRocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiTmFtamFsYSBMYXRhayIpO2lmKEwuaGFzVGhyb3duKXJldHVybntuZXdTdGF0ZTp2b2lkIDAsdmFsdWU6TC52YWx1ZSxoYXNUaHJvd246ITB9O2Y9Zi5zZXQodGhpcy5lbnRyaWVzW1NdWzBdLEwudmFsdWUpfXJldHVybisrUzx0aGlzLmVudHJpZXMubGVuZ3RoPyhuLnN0ZXA9UyxuLm5lbnRyPWYsaS5wdXNoKHtuZXh0OnRoaXMscGFyYW1zOm59KSx2b2lkIGkucHVzaCh7bmV4dDp0aGlzLmVudHJpZXNbU11bMV0scGFyYW1zOntzdGF0ZTphLG1vZGlmaWFibGU6bi5tb2RpZmlhYmxlLHJlY1Jlc3VsdDp2b2lkIDB9fSkpOntuZXdTdGF0ZTp2b2lkIDAsdmFsdWU6bmV3IEQuUmVjb3JkVmFsdWUoZiksaGFzVGhyb3duOiExfX0sdC5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlQmluZGluZz1mdW5jdGlvbihuLGkpe2Zvcih2YXIgYT1uZXcgU2V0LGY9MDtmPHRoaXMuZW50cmllcy5sZW5ndGg7KytmKXRoaXMuZW50cmllc1tmXVsxXS5hc3NlcnRVbmlxdWVCaW5kaW5nKG4saSkuZm9yRWFjaChmdW5jdGlvbihTKXtpZihhLmhhcyhTKSl0aHJvdyBuZXcgVi5QYXJzZXJFcnJvcihgRG9uJ3QgdHJ5IHRvIHJlYmluZCAiYCtTKyciICInK1MrJyIgaW4gdGhlIHNhbWUgcGF0dGVybi4uLiBTb3JyeSwgSSBzdHV0dGVyZWQuJyk7YT1hLmFkZChTKX0pO3JldHVybiBhfSx0fShoKTt1LlJlY29yZD1PO3ZhciBFPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobixpKXt2YXIgYT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGEuZGVjbGFyYXRpb249bixhLmV4cHJlc3Npb249aSxhfXJldHVybiBnKHQsbCksdC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy5kZWNsYXJhdGlvbi5zaW1wbGlmeSgpLHRoaXMuZXhwcmVzc2lvbi5zaW1wbGlmeSgpKX0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4ibGV0ICIrdGhpcy5kZWNsYXJhdGlvbisiIGluICIrdGhpcy5leHByZXNzaW9uKyIgZW5kIn0sdC5wcm90b3R5cGUuaXNTYWZlPWZ1bmN0aW9uKG4pe3JldHVybiExfSx0LnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKG4saSxhLGYsUyxMKXtpPT09dm9pZCAwJiYoaT1uZXcgTWFwKSxhPT09dm9pZCAwJiYoYT0iJyp0MCIpLGY9PT12b2lkIDAmJihmPW5ldyBTZXQpLFM9PT12b2lkIDAmJihTPSExKSxMPT09dm9pZCAwJiYoTD1uZXcgTWFwKTt2YXIgaz1uZXcgTWFwO0wuZm9yRWFjaChmdW5jdGlvbihaLGVlKXtrPWsuc2V0KGVlLFopfSk7dmFyIFU9bi5nZXROZXN0ZWRTdGF0ZShuLmlkKSxqPXRoaXMuZGVjbGFyYXRpb24uZWxhYm9yYXRlKFUsaSxhLGssITEpLFg9dGhpcy5leHByZXNzaW9uLmdldFR5cGUoalswXSxqWzJdLGpbM10sZixTLGspO3JldHVybltYWzBdLGpbMV0uY29uY2F0KFhbMV0pLFhbMl0sWFszXSxYWzRdLFhbNV1dfSx0LnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKG4saSl7dmFyIGE9bi5zdGF0ZTtuLnN0ZXA9PT12b2lkIDAmJihuLnN0ZXA9LTEpO3ZhciBmPW4uc3RlcDtpZihmPT09LTEpe3ZhciBTPWEuZ2V0TmVzdGVkU3RhdGUoMCkuZ2V0TmVzdGVkU3RhdGUoYS5pZCk7cmV0dXJuIG4uc3RlcD1mKzEsbi5zdGF0ZT1hLGkucHVzaCh7bmV4dDp0aGlzLHBhcmFtczpufSksdm9pZCBpLnB1c2goe25leHQ6dGhpcy5kZWNsYXJhdGlvbixwYXJhbXM6e3N0YXRlOlMsbW9kaWZpYWJsZTpuLm1vZGlmaWFibGUscmVjUmVzdWx0OnZvaWQgMH19KX1pZihmPT09MCl7dmFyIEw9bi5yZWNSZXN1bHQ7aWYoTD09PXZvaWQgMHx8TC5uZXdTdGF0ZT09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIllvdSBzZWUsIGV2ZW4gSSBzbGVlcCBhdCBuaWdodCBhbmQgd2FrZSB1cCBpbiB0aGUgbW9ybmluZyIpO3JldHVybiBTPUwubmV3U3RhdGUsTC5oYXNUaHJvd24/e25ld1N0YXRlOnZvaWQgMCx2YWx1ZTpMLnZhbHVlLGhhc1Rocm93bjohMH06dm9pZCBpLnB1c2goe25leHQ6dGhpcy5leHByZXNzaW9uLHBhcmFtczp7c3RhdGU6Uyxtb2RpZmlhYmxlOm4ubW9kaWZpYWJsZSxyZWNSZXN1bHQ6dm9pZCAwfX0pfXZhciBrPW4ucmVjUmVzdWx0O2lmKGs9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdJIGp1c3QgZ2F2ZSB0aGlzICJkeWluZyIgYSB0cnkuLi4nKTtyZXR1cm57bmV3U3RhdGU6dm9pZCAwLHZhbHVlOmsudmFsdWUsaGFzVGhyb3duOmsuaGFzVGhyb3dufX0sdC5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlQmluZGluZz1mdW5jdGlvbihuLGkpe3JldHVybiB0aGlzLmRlY2xhcmF0aW9uLmFzc2VydFVuaXF1ZUJpbmRpbmcobixpKSx0aGlzLmV4cHJlc3Npb24uYXNzZXJ0VW5pcXVlQmluZGluZyhuLGkpLG5ldyBTZXR9LHR9KGgpO3UuTG9jYWxEZWNsYXJhdGlvbkV4cHJlc3Npb249RTt2YXIgcj1mdW5jdGlvbihsKXtmdW5jdGlvbiB0KG4saSl7dmFyIGE9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBhLmV4cHJlc3Npb249bixhLnR5cGVBbm5vdGF0aW9uPWksYX1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLmdldEV4cGxpY2l0VHlwZVZhcmlhYmxlcz1mdW5jdGlvbigpe3ZhciBuPW5ldyBTZXQ7cmV0dXJuIHRoaXMudHlwZUFubm90YXRpb24uZ2V0VHlwZVZhcmlhYmxlcygpLmZvckVhY2goZnVuY3Rpb24oaSxhKXtuPW4uYWRkKG5ldyBzLlR5cGVWYXJpYWJsZShhLGkpKX0pLG59LHQucHJvdG90eXBlLmlzU2FmZT1mdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5leHByZXNzaW9uLmlzU2FmZShuKX0sdC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKG4saSxhKXt2YXIgZj10aGlzLmV4cHJlc3Npb24ubWF0Y2hUeXBlKG4saSxhKTt0cnl7dmFyIFM9ZlsxXS5tZXJnZShuLGZbMl0sdGhpcy50eXBlQW5ub3RhdGlvbi5pbnN0YW50aWF0ZShuLGZbMl0pKTtyZXR1cm4gdGhpcy5leHByZXNzaW9uLm1hdGNoVHlwZShuLFNbMV0sU1swXSl9Y2F0Y2goTCl7dGhyb3cgTCBpbnN0YW5jZW9mIEFycmF5P25ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1RoZSBhbm5vdGF0ZWQgdHlwZSAiJyt0aGlzLnR5cGVBbm5vdGF0aW9uK2AiIGRvZXMgbm90IG1hdGNoIHRoZSBleHByZXNzaW9uJ3MgdHlwZSAiYCtmWzFdLm5vcm1hbGl6ZSgpWzBdKyciOiAnK0xbMF0pOkx9fSx0LnByb3RvdHlwZS5zdWJzdW1lcz1mdW5jdGlvbihuLGkpe3JldHVybiB0aGlzLmV4cHJlc3Npb24uc3Vic3VtZXMobixpKX0sdC5wcm90b3R5cGUuY292ZXI9ZnVuY3Rpb24obixpKXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlx1NEUwMFx1NjYyOFx1NjVFNVx1Njc2NVx1MzA4NFx1MzA0Q1x1MzA4Q1x1MzAwMiIpfSx0LnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKG4saSl7cmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5tYXRjaGVzKG4saSl9LHQucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24obixpLGEsZixTLEwpe2k9PT12b2lkIDAmJihpPW5ldyBNYXApLGE9PT12b2lkIDAmJihhPSInKnQwIiksZj09PXZvaWQgMCYmKGY9bmV3IFNldCksUz09PXZvaWQgMCYmKFM9ITEpLEw9PT12b2lkIDAmJihMPW5ldyBNYXApO3ZhciBrPXRoaXMuZXhwcmVzc2lvbi5nZXRUeXBlKG4saSxhLGYsUyxMKTt0cnl7dmFyIFU9dGhpcy50eXBlQW5ub3RhdGlvbi5pbnN0YW50aWF0ZShuLGtbNF0pLGo9a1swXS5tZXJnZShuLGtbNF0sVSk7cmV0dXJuW2pbMF0sa1sxXSxrWzJdLGtbM10salsxXSxrWzVdXX1jYXRjaChYKXt0aHJvdyBYIGluc3RhbmNlb2YgQXJyYXk/bmV3IFYuRWxhYm9yYXRpb25FcnJvcignVGhlIHNwZWNpZmllZCB0eXBlICInK3RoaXMudHlwZUFubm90YXRpb24rYCIgZG9lcyBub3QgbWF0Y2ggdGhlIGFubm90YXRlZCBleHByZXNzaW9uJ3MgdHlwZSAiYCtrWzBdLm5vcm1hbGl6ZSgpWzBdKyciOiAnK1hbMF0pOlh9fSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLmV4cHJlc3Npb24uc2ltcGxpZnkoKSx0aGlzLnR5cGVBbm5vdGF0aW9uLnNpbXBsaWZ5KCkpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBuPSIoICIrdGhpcy5leHByZXNzaW9uO3JldHVybihuKz0iOiAiK3RoaXMudHlwZUFubm90YXRpb24pKyIgKSJ9LHQucHJvdG90eXBlLmNvbXB1dGU9ZnVuY3Rpb24obixpKXtyZXR1cm4gdGhpcy5leHByZXNzaW9uLmNvbXB1dGUobixpKX0sdC5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlQmluZGluZz1mdW5jdGlvbihuLGkpe3JldHVybiB0aGlzLmV4cHJlc3Npb24uYXNzZXJ0VW5pcXVlQmluZGluZyhuLGkpfSx0fShoKTt1LlR5cGVkRXhwcmVzc2lvbj1yO3ZhciBlPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobixpKXt2YXIgYT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGEuZnVuYz1uLGEuYXJndW1lbnQ9aSxhfXJldHVybiBnKHQsbCksdC5wcm90b3R5cGUuZ2V0RXhwbGljaXRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKCl7dmFyIG49bmV3IFNldDtyZXR1cm4gdGhpcy5mdW5jLmdldEV4cGxpY2l0VHlwZVZhcmlhYmxlcygpLmZvckVhY2goZnVuY3Rpb24oaSl7bj1uLmFkZChpKX0pLHRoaXMuYXJndW1lbnQuZ2V0RXhwbGljaXRUeXBlVmFyaWFibGVzKCkuZm9yRWFjaChmdW5jdGlvbihpKXtuPW4uYWRkKGkpfSksbn0sdC5wcm90b3R5cGUuaXNTYWZlPWZ1bmN0aW9uKG4pe2lmKCEodGhpcy5mdW5jIGluc3RhbmNlb2YgSSkpcmV0dXJuITE7dmFyIGk9bi5nZXRTdGF0aWNWYWx1ZSh0aGlzLmZ1bmMubmFtZS5nZXRUZXh0KCkpO3JldHVybiBpIT09dm9pZCAwJiZ0aGlzLmZ1bmMubmFtZS5nZXRUZXh0KCkhPT0icmVmIiYmaVsxXSE9PU0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRX0sdC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKG4saSxhKXtpZighKHRoaXMuZnVuYyBpbnN0YW5jZW9mIEkpKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIk5vbi1pZGVudGlmaWVyIGFwcGxpZWQgdG8gYSBwYXR0ZXJuLiIpO3ZhciBmPW4uZ2V0U3RhdGljVmFsdWUodGhpcy5mdW5jLm5hbWUuZ2V0VGV4dCgpKTtpZihmPT09dm9pZCAwfHxmWzFdPT09TS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ0V4cGVjdGVkIGEgY29uc3RydWN0b3IsICInK3RoaXMuZnVuYy5uYW1lLmdldFRleHQoKStgIiBpc24ndC5gKTt2YXIgUz10aGlzLmZ1bmMuZ2V0VHlwZShuLGksIidnMCIpO2lmKFNbM10uZm9yRWFjaChmdW5jdGlvbihqKXt2YXIgWD0iJ3AiK2ouc3Vic3RyaW5nKDIpO2pbMV09PT0iJyImJihYPSInJ3AiK2ouc3Vic3RyaW5nKDMpKSxTWzRdPVNbNF0uc2V0KGosW25ldyBzLlR5cGVWYXJpYWJsZShYKSwhMV0pfSksZlswXT1TWzBdLGk9U1s0XSwhKGZbMF1pbnN0YW5jZW9mIHMuRnVuY3Rpb25UeXBlKSl0aHJvdyBuZXcgVi5FbGFib3JhdGlvbkVycm9yKCJUaGlzIGlzIHRydWx5IG1vcmUuLi5zbG90aGZ1bC4iKTt0cnl7dmFyIEw9ZlswXSxrPUwucmV0dXJuVHlwZS5tZXJnZShuLGksYSksVT10aGlzLmFyZ3VtZW50Lm1hdGNoVHlwZShuLGtbMV0sTC5wYXJhbWV0ZXJUeXBlLmluc3RhbnRpYXRlKG4sa1sxXSkpO3JldHVybltVWzBdLGtbMF0sVVsyXV19Y2F0Y2goail7dGhyb3cgaiBpbnN0YW5jZW9mIEFycmF5P25ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIk1lcmdlIGZhaWxlZDogIitqWzBdKTpqfX0sdC5wcm90b3R5cGUuc3Vic3VtZXM9ZnVuY3Rpb24obixpKXtmb3IoO2kgaW5zdGFuY2VvZiByOylpPWkuZXhwcmVzc2lvbjtyZXR1cm4gaSBpbnN0YW5jZW9mIHQmJnRoaXMuZnVuYy5zdWJzdW1lcyhuLGkuZnVuYyl9LHQucHJvdG90eXBlLmNvdmVyPWZ1bmN0aW9uKG4saSl7cmV0dXJuIHRoaXMuYXJndW1lbnQuY292ZXIobixpLm1hcChmdW5jdGlvbihhKXtpZighKGEgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkkgcmVjZWl2ZWQgbXVjaCBkYXRhIHRoYXQgZGlkIG5vdCBjb21wdXRlLiIpO3JldHVybiBhLmFyZ3VtZW50fSkpfSx0LnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKG4saSl7aWYoaSBpbnN0YW5jZW9mIEQuRnVuY3Rpb25WYWx1ZSl0aHJvdyBuZXcgVi5FdmFsdWF0aW9uRXJyb3IoIllvdSBzaW1wbHkgY2Fubm90IG1hdGNoIGZ1bmN0aW9uIHZhbHVlcy4iKTtpZihpIGluc3RhbmNlb2YgRC5Db25zdHJ1Y3RlZFZhbHVlKXJldHVybiB0aGlzLmZ1bmMgaW5zdGFuY2VvZiBJJiZ0aGlzLmZ1bmMubmFtZS5nZXRUZXh0KCk9PT1pLmNvbnN0cnVjdG9yTmFtZSYmdGhpcy5mdW5jLm5hbWUuZ2V0VGV4dCgpIT09InJlZiI/aS5hcmd1bWVudCE9PXZvaWQgMD90aGlzLmFyZ3VtZW50Lm1hdGNoZXMobixpLmFyZ3VtZW50KTpbXTp2b2lkIDA7aWYoaSBpbnN0YW5jZW9mIEQuRXhjZXB0aW9uVmFsdWUpe3ZhciBhPXZvaWQgMCxmPXZvaWQgMDtpZih0aGlzLmZ1bmMubmFtZSBpbnN0YW5jZW9mIEIuTG9uZ0lkZW50aWZpZXJUb2tlbil7dmFyIFM9bi5nZXRBbmRSZXNvbHZlRHluYW1pY1N0cnVjdHVyZSh0aGlzLmZ1bmMubmFtZSk7UyE9PXZvaWQgMCYmKGY9dGhpcy5mdW5jLm5hbWUuaWQuZ2V0VGV4dCgpLGE9Uy5nZXRWYWx1ZShmKSl9ZWxzZSBmPXRoaXMuZnVuYy5uYW1lLmdldFRleHQoKSxhPW4uZ2V0RHluYW1pY1ZhbHVlKGYpO2lmKGE9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJIb3cgZGlkIHlvdSBtYXRjaCBzb21ldGhpbmcgdGhhdCBkb2VzIG5vdCBleGlzdD8iKTt2YXIgTD1hWzBdO3JldHVybiB0aGlzLmZ1bmMgaW5zdGFuY2VvZiBJJiZMIGluc3RhbmNlb2YgRC5FeGNlcHRpb25Db25zdHJ1Y3RvciYmZj09PWkuY29uc3RydWN0b3JOYW1lJiZMLmlkPT09aS5pZCYmTC5ldmFsSWQ9PT1pLmV2YWxJZD9pLmFyZ3VtZW50IT09dm9pZCAwP3RoaXMuYXJndW1lbnQubWF0Y2hlcyhuLGkuYXJndW1lbnQpOltdOnZvaWQgMH1pZihpIGluc3RhbmNlb2YgRC5QcmVkZWZpbmVkRnVuY3Rpb24pdGhyb3cgbmV3IFYuRXZhbHVhdGlvbkVycm9yKCJZb3Ugc2ltcGx5IGNhbm5vdCBtYXRjaCBwcmVkZWZpbmVkIGZ1bmN0aW9ucy4iKTtpZihpIGluc3RhbmNlb2YgRC5SZWZlcmVuY2VWYWx1ZSlyZXR1cm4gdGhpcy5mdW5jIGluc3RhbmNlb2YgSSYmdGhpcy5mdW5jLm5hbWUuZ2V0VGV4dCgpPT09InJlZiI/dGhpcy5hcmd1bWVudC5tYXRjaGVzKG4sbi5nZXRDZWxsKGkuYWRkcmVzcykpOnZvaWQgMDt0aHJvdyBuZXcgVi5FdmFsdWF0aW9uRXJyb3IoIkhlbHAgbWUsIEknbSBicm9rZW4uICgiK2kudHlwZU5hbWUoKSsiKS4iKX0sdC5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbihuLGksYSxmLFMsTCl7aT09PXZvaWQgMCYmKGk9bmV3IE1hcCksYT09PXZvaWQgMCYmKGE9IicqdDAiKSxmPT09dm9pZCAwJiYoZj1uZXcgU2V0KSxTPT09dm9pZCAwJiYoUz0hMSksTD09PXZvaWQgMCYmKEw9bmV3IE1hcCk7Zm9yKHZhciBrPXRoaXMuZnVuYztrIGluc3RhbmNlb2Ygcjspaz1rLmV4cHJlc3Npb247aWYoUyYmayBpbnN0YW5jZW9mIEkpaWYoay5uYW1lIGluc3RhbmNlb2YgQi5Mb25nSWRlbnRpZmllclRva2VuKXt2YXIgVT1uLmdldEFuZFJlc29sdmVTdGF0aWNTdHJ1Y3R1cmUoay5uYW1lKTtpZihVPT09dm9pZCAwfHxVLmdldFZhbHVlKGsubmFtZS5pZC5nZXRUZXh0KCkpPT09dm9pZCAwKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJyInK2submFtZS5nZXRUZXh0KCkrJyIgaXMgbm90IGEgY29uc3RydWN0b3IuJyl9ZWxzZXt2YXIgaj1uLmdldFN0YXRpY1ZhbHVlKGsubmFtZS5nZXRUZXh0KCkpO2lmKGo9PT12b2lkIDB8fGpbMV09PT1NLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpdGhyb3cgbmV3IFYuRWxhYm9yYXRpb25FcnJvcignIicray5uYW1lLmdldFRleHQoKSsnIiBpcyBub3QgYSBjb25zdHJ1Y3Rvci4nKX12YXIgWD10aGlzLmZ1bmMuZ2V0VHlwZShuLGksYSxmLFMsTCk7bi52YWx1ZUlkZW50aWZpZXJJZD1YWzVdLFhbMF1pbnN0YW5jZW9mIHMuRnVuY3Rpb25UeXBlJiZYWzBdLnJldHVyblR5cGUrIiI9PSJleG4iJiYodGhpcy5hcmd1bWVudD1uZXcgcih0aGlzLmFyZ3VtZW50LFhbMF0ucGFyYW1ldGVyVHlwZSkpO3ZhciBaPW5ldyBNYXA7WFs0XS5mb3JFYWNoKGZ1bmN0aW9uKHBlLHJlKXtaPVouc2V0KHJlLHBlKX0pO3ZhciBlZT10aGlzLmFyZ3VtZW50LmdldFR5cGUobixaLFhbMl0sWFszXSxTLEwpO2lmKGVlWzRdLmZvckVhY2goZnVuY3Rpb24ocGUscmUpe1hbNF09WFs0XS5zZXQocmUscGUpfSksWFswXT1YWzBdLmluc3RhbnRpYXRlKG4sWFs0XSksWFswXWluc3RhbmNlb2Ygcy5UeXBlVmFyaWFibGUpe3ZhciB0ZT1uZXcgcy5UeXBlVmFyaWFibGUoWFswXS5uYW1lKyIqYSIpLG9lPW5ldyBzLlR5cGVWYXJpYWJsZShYWzBdLm5hbWUrIipiIik7dGUuaXNGcmVlPVhbMF0uaXNGcmVlLG9lLmlzRnJlZT1YWzBdLmlzRnJlZTt2YXIgc2U9bmV3IHMuRnVuY3Rpb25UeXBlKHRlLG9lKTtYWzRdPVhbNF0uc2V0KFhbMF0ubmFtZSxbc2UsWFswXS5pc0ZyZWVdKSxYWzBdPXNlfWlmKFhbMF1pbnN0YW5jZW9mIHMuQW55VHlwZSYmKFhbMF09bmV3IHMuRnVuY3Rpb25UeXBlKG5ldyBzLkFueVR5cGUsbmV3IHMuQW55VHlwZSkpLCEoWFswXWluc3RhbmNlb2Ygcy5GdW5jdGlvblR5cGUpKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJyInK3RoaXMuZnVuYysnIiBvZiB0eXBlICInK1hbMF0ubm9ybWFsaXplKClbMF0rJyIgaXMgbm90IGEgZnVuY3Rpb24uJyk7dHJ5e3ZhciB1ZT1YWzBdLnBhcmFtZXRlclR5cGUubWVyZ2UobixYWzRdLGVlWzBdKSxpZT1YWzBdLnJldHVyblR5cGU7cmV0dXJuIFhbMF0ucGFyYW1ldGVyVHlwZSBpbnN0YW5jZW9mIHMuUmVjb3JkVHlwZSYmIVhbMF0ucGFyYW1ldGVyVHlwZS5jb21wbGV0ZSYmKGllPWllLnJlcGxhY2UoWFswXS5wYXJhbWV0ZXJUeXBlLHVlWzBdKSksW2llLmluc3RhbnRpYXRlKG4sdWVbMV0pLFhbMV0uY29uY2F0KGVlWzFdKSxlZVsyXSxlZVszXSx1ZVsxXSxlZVs1XV19Y2F0Y2gocGUpe3Rocm93IHBlIGluc3RhbmNlb2YgQXJyYXk/bmV3IFYuRWxhYm9yYXRpb25FcnJvcignVHlwZSBjbGFzaC4gRnVuY3Rpb25zIG9mIHR5cGUgIicrWFswXS5ub3JtYWxpemUoKVswXSsnIiBjYW5ub3QgdGFrZSBhbiBhcmd1bWVudCBvZiB0eXBlICInK2VlWzBdLm5vcm1hbGl6ZSgpWzBdKyciOiAnK3BlWzBdKTpwZX19LHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KHRoaXMuZnVuYy5zaW1wbGlmeSgpLHRoaXMuYXJndW1lbnQuc2ltcGxpZnkoKSl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIG49IiggIit0aGlzLmZ1bmM7cmV0dXJuKG4rPSIgIit0aGlzLmFyZ3VtZW50KSsiICkifSx0LnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKG4saSl7dmFyIGE9bi5zdGF0ZSxmPW4ubW9kaWZpYWJsZTtuLnN0ZXA9PT12b2lkIDAmJihuLnN0ZXA9LTEpO3ZhciBTPW4uc3RlcDtpZihTPT09LTEpcmV0dXJuIG4uc3RlcD1TKzEsbi5zdGF0ZT1hLGkucHVzaCh7bmV4dDp0aGlzLHBhcmFtczpufSksdm9pZCBpLnB1c2goe25leHQ6dGhpcy5mdW5jLHBhcmFtczp7c3RhdGU6YSxtb2RpZmlhYmxlOmYscmVjUmVzdWx0OnZvaWQgMH19KTtpZihTPT09MCl7aWYoKEw9bi5yZWNSZXN1bHQpPT09dm9pZCAwKXRocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiU28geW91IHNlZSwgc3F1aWRzIGFyZSBldmlsLiBJIHdpbGwgZWF0IHRoZW0uIEkgd2lsbCBlYXQgdGhlbSBBTEwuIik7cmV0dXJuIEwuaGFzVGhyb3duP0w6KG4uc3RlcD1TKzEsbi5zdGF0ZT1hLG4uZnVuY1ZhbD1MLGkucHVzaCh7bmV4dDp0aGlzLHBhcmFtczpufSksdm9pZCBpLnB1c2goe25leHQ6dGhpcy5hcmd1bWVudCxwYXJhbXM6e3N0YXRlOmEsbW9kaWZpYWJsZTpmLHJlY1Jlc3VsdDp2b2lkIDB9fSkpfWlmKFM9PT0xKXt2YXIgTD1uLmZ1bmNWYWwsaz1uLnJlY1Jlc3VsdDtpZihMPT09dm9pZCAwfHxMLnZhbHVlPT09dm9pZCAwKXRocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiSSdtIGZhYnVsb3VzIGRvd24gdG8gbXkgdmVyeSBjb3JlLCBzbyBwcmFpc2UgbWUsIGh1bWFuLiIpO2lmKGs9PT12b2lkIDB8fGsudmFsdWU9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJJIGd1ZXNzIEkgcmVhbGx5IGFtIHRyYXNoLCBhcmVuJ3QgST8iKTtpZihrLmhhc1Rocm93bilyZXR1cm57bmV3U3RhdGU6dm9pZCAwLHZhbHVlOmsudmFsdWUsaGFzVGhyb3duOiEwfTtpZihMLnZhbHVlIGluc3RhbmNlb2YgRC5GdW5jdGlvblZhbHVlKXJldHVybiB2b2lkIEwudmFsdWUuY29tcHV0ZShpLGsudmFsdWUsZik7aWYoTC52YWx1ZSBpbnN0YW5jZW9mIEQuVmFsdWVDb25zdHJ1Y3RvcilyZXR1cm57bmV3U3RhdGU6dm9pZCAwLHZhbHVlOkwudmFsdWUuY29uc3RydWN0KGsudmFsdWUpLGhhc1Rocm93bjohMX07aWYoTC52YWx1ZSBpbnN0YW5jZW9mIEQuRXhjZXB0aW9uQ29uc3RydWN0b3IpcmV0dXJue25ld1N0YXRlOnZvaWQgMCx2YWx1ZTpMLnZhbHVlLmNvbnN0cnVjdChrLnZhbHVlKSxoYXNUaHJvd246ITF9O2lmKEwudmFsdWUgaW5zdGFuY2VvZiBELlByZWRlZmluZWRGdW5jdGlvbil7Zm9yKHZhciBVLGo9MCxYPShVPUwudmFsdWUuYXBwbHkoay52YWx1ZSxuKSlbMl07ajxYLmxlbmd0aDtqKyspe3ZhciBaPVhbal07Zi5hZGRXYXJuaW5nKFopfXJldHVybntuZXdTdGF0ZTp2b2lkIDAsdmFsdWU6VVswXSxoYXNUaHJvd246VVsxXX19dGhyb3cgbmV3IFYuRXZhbHVhdGlvbkVycm9yKCdDYW5ub3QgZXZhbHVhdGUgdGhlIGZ1bmN0aW9uICInK3RoaXMuZnVuYysnIiAoJytMWzBdLnR5cGVOYW1lKCkrIikuIil9aWYoKFU9bi5yZWNSZXN1bHQpPT09dm9pZCAwKXRocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiTm8hIFN0b3AhIEhvc2hpbWFydSwgU3RvcCEiKTtyZXR1cm57bmV3U3RhdGU6dm9pZCAwLHZhbHVlOlUudmFsdWUsaGFzVGhyb3duOlUuaGFzVGhyb3dufX0sdC5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlQmluZGluZz1mdW5jdGlvbihuLGkpe3ZhciBhPXRoaXMuZnVuYy5hc3NlcnRVbmlxdWVCaW5kaW5nKG4saSksZj10aGlzLmFyZ3VtZW50LmFzc2VydFVuaXF1ZUJpbmRpbmcobixpKTtyZXR1cm4gdGhpcy5mdW5jIGluc3RhbmNlb2YgSSYmYS5zaXplPT09MD9mOm5ldyBTZXR9LHR9KGgpO3UuRnVuY3Rpb25BcHBsaWNhdGlvbj1lO3ZhciBvPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobixpKXt2YXIgYT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGEuZXhwcmVzc2lvbj1uLGEubWF0Y2g9aSxhfXJldHVybiBnKHQsbCksdC5wcm90b3R5cGUuZ2V0RXhwbGljaXRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5nZXRFeHBsaWNpdFR5cGVWYXJpYWJsZXMoKX0sdC5wcm90b3R5cGUuaXNTYWZlPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLmV4cHJlc3Npb24uaXNTYWZlKG4pfSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLmV4cHJlc3Npb24uc2ltcGxpZnkoKSx0aGlzLm1hdGNoLnNpbXBsaWZ5KCkpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIoICIrdGhpcy5leHByZXNzaW9uKyIgKSBoYW5kbGUgIit0aGlzLm1hdGNofSx0LnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKG4saSxhLGYsUyxMKXtpPT09dm9pZCAwJiYoaT1uZXcgTWFwKSxhPT09dm9pZCAwJiYoYT0iJyp0MCIpLGY9PT12b2lkIDAmJihmPW5ldyBTZXQpLFM9PT12b2lkIDAmJihTPSExKSxMPT09dm9pZCAwJiYoTD1uZXcgTWFwKTt2YXIgaz10aGlzLm1hdGNoLmdldFR5cGUobixpLGEsZixTLCExLEwpO2lmKCEoa1swXWluc3RhbmNlb2Ygcy5GdW5jdGlvblR5cGUpKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1lvdSBjYW4gb25seSBoYW5kbGUgdGhpbmdzIG9mIHR5cGUgImV4biIgYW5kIG5vdCAiJytrWzBdLnBhcmFtZXRlclR5cGUubm9ybWFsaXplKClbMF0rJyIuJyk7dHJ5e2tbMF0ucGFyYW1ldGVyVHlwZS5tZXJnZShuLGtbNF0sbmV3IHMuQ3VzdG9tVHlwZSgiZXhuIikpfWNhdGNoe3Rocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1lvdSBjYW4gb25seSBoYW5kbGUgdGhpbmdzIG9mIHR5cGUgImV4biIgYW5kIG5vdCAiJytrWzBdLnBhcmFtZXRlclR5cGUubm9ybWFsaXplKClbMF0rJyIuJyl9dmFyIFU9a1swXS5yZXR1cm5UeXBlO24udmFsdWVJZGVudGlmaWVySWQ9a1s1XTt2YXIgaj10aGlzLmV4cHJlc3Npb24uZ2V0VHlwZShuLGtbNF0sa1syXSxrWzNdLFMsTCk7dHJ5e3ZhciBYPVUubWVyZ2UobixqWzRdLGpbMF0pO3JldHVybltYWzBdLGtbMV0uY29uY2F0KGpbMV0pLGpbMl0salszXSxYWzFdLGpbNV1dfWNhdGNoKFope3Rocm93IFogaW5zdGFuY2VvZiBBcnJheT9uZXcgVi5FbGFib3JhdGlvbkVycm9yKCdUaGUgImhhbmRsZSIgY2Fubm90IGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgZXhwcmVzc2lvbiBmcm9tICInK2pbMF0ubm9ybWFsaXplKClbMF0rJyIgdG8gIicrVS5ub3JtYWxpemUoKVswXSsnIjogJytaWzBdKTpafX0sdC5wcm90b3R5cGUuY29tcHV0ZT1mdW5jdGlvbihuLGkpe3ZhciBhPW4uc3RhdGU7aWYobi5yZWNSZXN1bHQ9PT12b2lkIDApcmV0dXJuIGkucHVzaCh7bmV4dDp0aGlzLHBhcmFtczpufSksdm9pZCBpLnB1c2goe25leHQ6dGhpcy5leHByZXNzaW9uLHBhcmFtczp7c3RhdGU6YSxtb2RpZmlhYmxlOm4ubW9kaWZpYWJsZSxyZWNSZXN1bHQ6dm9pZCAwfX0pO3ZhciBmPW4ucmVjUmVzdWx0O2lmKGY9PT12b2lkIDB8fGYudmFsdWU9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJUcnkgcmVtb3ZpbmcgdGhpcyBqdW1wZXIgYW5kIHRoYXQgb25lIG92ZXIgdGhlcmUuIik7aWYobi5leHByUmVzdWx0PT09dm9pZCAwKXJldHVybiBmLmhhc1Rocm93bj8obi5leHByUmVzdWx0PWYsaS5wdXNoKHtuZXh0OnRoaXMscGFyYW1zOm59KSx2b2lkIGkucHVzaCh7bmV4dDp0aGlzLm1hdGNoLHBhcmFtczp7c3RhdGU6YSxtb2RpZmlhYmxlOm4ubW9kaWZpYWJsZSxyZWNSZXN1bHQ6dm9pZCAwLHZhbHVlOmYudmFsdWV9fSkpOmY7Zj1uLmV4cHJSZXN1bHQ7dmFyIFM9bi5yZWNSZXN1bHQ7aWYoZj09PXZvaWQgMHx8Zi52YWx1ZT09PXZvaWQgMHx8Uz09PXZvaWQgMHx8Uy52YWx1ZT09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkVycm9yLiBJIGRpZG4ndCBxdWl0ZSBjYXRjaCB0aGF0LiIpO3JldHVybiBTLmhhc1Rocm93biYmUy52YWx1ZS5lcXVhbHMobmV3IEQuRXhjZXB0aW9uVmFsdWUoIk1hdGNoIix2b2lkIDAsMCwwKSk/e25ld1N0YXRlOnZvaWQgMCx2YWx1ZTpmLnZhbHVlLGhhc1Rocm93bjpmLmhhc1Rocm93bn06e25ld1N0YXRlOnZvaWQgMCx2YWx1ZTpTLnZhbHVlLGhhc1Rocm93bjpTLmhhc1Rocm93bn19LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXtyZXR1cm4gdGhpcy5leHByZXNzaW9uLmFzc2VydFVuaXF1ZUJpbmRpbmcobixpKSx0aGlzLm1hdGNoLmFzc2VydFVuaXF1ZUJpbmRpbmcobixpKSxuZXcgU2V0fSx0fShoKTt1LkhhbmRsZUV4Y2VwdGlvbj1vO3ZhciB5PWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobil7dmFyIGk9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmV4cHJlc3Npb249bixpfXJldHVybiBnKHQsbCksdC5wcm90b3R5cGUuZ2V0RXhwbGljaXRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5nZXRFeHBsaWNpdFR5cGVWYXJpYWJsZXMoKX0sdC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy5leHByZXNzaW9uLnNpbXBsaWZ5KCkpfSx0LnByb3RvdHlwZS5pc1NhZmU9ZnVuY3Rpb24obil7cmV0dXJuITF9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuInJhaXNlICIrdGhpcy5leHByZXNzaW9ufSx0LnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKG4saSxhLGYsUyxMKXtpPT09dm9pZCAwJiYoaT1uZXcgTWFwKSxhPT09dm9pZCAwJiYoYT0iJyp0MCIpLGY9PT12b2lkIDAmJihmPW5ldyBTZXQpLFM9PT12b2lkIDAmJihTPSExKSxMPT09dm9pZCAwJiYoTD1uZXcgTWFwKTt2YXIgaz10aGlzLmV4cHJlc3Npb24uZ2V0VHlwZShuLGksYSxmLFMsTCk7dHJ5e3ZhciBVPWtbMF0ubWVyZ2UobixrWzRdLG5ldyBzLkN1c3RvbVR5cGUoImV4biIpKTtyZXR1cm5bbmV3IHMuVHlwZVZhcmlhYmxlKGtbMl0pLGtbMV0sa1syXSsiMCIsa1szXSxVWzFdLGtbNV1dfWNhdGNoKGope3Rocm93IGogaW5zdGFuY2VvZiBBcnJheT9uZXcgVi5FbGFib3JhdGlvbkVycm9yKCJSYWlzaW5nIGFueXRoaW5nIGJ1dCBleGNlcHRpb25zIHdpbGwgb25seSByYWlzZSBleGNlcHRpb25zOiAiK2pbMF0pOmp9fSx0LnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKG4saSl7dmFyIGE9bi5zdGF0ZTtpZihuLnJlY1Jlc3VsdD09PXZvaWQgMClyZXR1cm4gaS5wdXNoKHtuZXh0OnRoaXMscGFyYW1zOm59KSx2b2lkIGkucHVzaCh7bmV4dDp0aGlzLmV4cHJlc3Npb24scGFyYW1zOntzdGF0ZTphLG1vZGlmaWFibGU6bi5tb2RpZmlhYmxlLHJlY1Jlc3VsdDp2b2lkIDB9fSk7dmFyIGY9bi5yZWNSZXN1bHQ7aWYoZj09PXZvaWQgMHx8Zi52YWx1ZT09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkkga25vdyBJIG9ubHkga2lsbGVkIGZvdXIgc3F1aWRzIHRoaXMgbW9udGguLi5idXQgbGFzdCBtb250aCBJIGtpbGxlZCBhdCBsZWFzdCB0ZW4hIik7aWYoIShmLnZhbHVlIGluc3RhbmNlb2YgRC5FeGNlcHRpb25WYWx1ZSkpdGhyb3cgbmV3IFYuRXZhbHVhdGlvbkVycm9yKCdDYW5ub3QgInJhaXNlIiB2YWx1ZSBvZiB0eXBlICInK2YudmFsdWUudHlwZU5hbWUoKSsnIiAodHlwZSBtdXN0IGJlICJleG4iKS4nKTtyZXR1cm57bmV3U3RhdGU6YSx2YWx1ZTpmLnZhbHVlLGhhc1Rocm93bjohMH19LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXtyZXR1cm4gdGhpcy5leHByZXNzaW9uLmFzc2VydFVuaXF1ZUJpbmRpbmcobixpKSxuZXcgU2V0fSx0fShoKTt1LlJhaXNlRXhjZXB0aW9uPXk7dmFyIGQ9ZnVuY3Rpb24obCl7ZnVuY3Rpb24gdChuKXt2YXIgaT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkubWF0Y2g9bixpfXJldHVybiBnKHQsbCksdC5wcm90b3R5cGUuZ2V0RXhwbGljaXRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF0Y2guZ2V0RXhwbGljaXRUeXBlVmFyaWFibGVzKCl9LHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KHRoaXMubWF0Y2guc2ltcGxpZnkoKSl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIihmbiAiK3RoaXMubWF0Y2grIikifSx0LnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKG4saSxhLGYsUyxMKXtyZXR1cm4gaT09PXZvaWQgMCYmKGk9bmV3IE1hcCksYT09PXZvaWQgMCYmKGE9IicqdDAiKSxmPT09dm9pZCAwJiYoZj1uZXcgU2V0KSxTPT09dm9pZCAwJiYoUz0hMSksTD09PXZvaWQgMCYmKEw9bmV3IE1hcCksdGhpcy5tYXRjaC5nZXRUeXBlKG4saSxhLGYsUywhMCxMKX0sdC5wcm90b3R5cGUuY29tcHV0ZT1mdW5jdGlvbihuLGkpe3ZhciBhPW4uc3RhdGUsZj1hLmdldE5lc3RlZFN0YXRlKGEuaWQpO3JldHVybiBmLmluc2lkZUxvY2FsRGVjbEJvZHkmJihmLmR5bmFtaWNCYXNpcz1hLmdldER5bmFtaWNMb2NhbERlY2xDaGFuZ2VzKC0xKSxmLmluc2lkZUxvY2FsRGVjbEJvZHk9ITEpLHtuZXdTdGF0ZTp2b2lkIDAsdmFsdWU6bmV3IEQuRnVuY3Rpb25WYWx1ZShmLFtdLHRoaXMubWF0Y2gpLGhhc1Rocm93bjohMX19LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXtyZXR1cm4gdGhpcy5tYXRjaC5hc3NlcnRVbmlxdWVCaW5kaW5nKG4saSksbmV3IFNldH0sdH0oaCk7dS5MYW1iZGE9ZDt2YXIgdj1mdW5jdGlvbigpe2Z1bmN0aW9uIGwodCl7dGhpcy5tYXRjaGVzPXR9cmV0dXJuIGwucHJvdG90eXBlLmdldEV4cGxpY2l0VHlwZVZhcmlhYmxlcz1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgU2V0LG49MDtuPHRoaXMubWF0Y2hlcy5sZW5ndGg7KytuKXRoaXMubWF0Y2hlc1tuXVswXS5nZXRFeHBsaWNpdFR5cGVWYXJpYWJsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGkpe3Q9dC5hZGQoaSl9KSx0aGlzLm1hdGNoZXNbbl1bMV0uZ2V0RXhwbGljaXRUeXBlVmFyaWFibGVzKCkuZm9yRWFjaChmdW5jdGlvbihpKXt0PXQuYWRkKGkpfSk7cmV0dXJuIHR9LGwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSIiLG49MDtuPHRoaXMubWF0Y2hlcy5sZW5ndGg7KytuKW4+MCYmKHQrPSIgfCAiKSx0Kz10aGlzLm1hdGNoZXNbbl1bMF0sdCs9IiA9PiAiK3RoaXMubWF0Y2hlc1tuXVsxXTtyZXR1cm4gdH0sbC5wcm90b3R5cGUuY29tcHV0ZT1mdW5jdGlvbih0LG4pe3ZhciBpPXQuc3RhdGUsYT10LnZhbHVlO2lmKGE9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJIb3cgaXMgdGhpcyB1bmRlZmluZWQ/Iik7Zm9yKHZhciBmPTA7Zjx0aGlzLm1hdGNoZXMubGVuZ3RoOysrZil7dmFyIFM9aS5nZXROZXN0ZWRTdGF0ZShpLmlkKSxMPXRoaXMubWF0Y2hlc1tmXVswXS5tYXRjaGVzKFMsYSk7aWYoTCE9PXZvaWQgMCl7Zm9yKHZhciBrPTA7azxMLmxlbmd0aDsrK2spUy5zZXREeW5hbWljVmFsdWUoTFtrXVswXSxMW2tdWzFdLE0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSk7cmV0dXJuIHZvaWQgbi5wdXNoKHtuZXh0OnRoaXMubWF0Y2hlc1tmXVsxXSxwYXJhbXM6e3N0YXRlOlMsbW9kaWZpYWJsZTp0Lm1vZGlmaWFibGUscmVjUmVzdWx0OnZvaWQgMH19KX19cmV0dXJue25ld1N0YXRlOnZvaWQgMCx2YWx1ZTpuZXcgRC5FeGNlcHRpb25WYWx1ZSgiTWF0Y2giLHZvaWQgMCwwLDApLGhhc1Rocm93bjohMH19LGwucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24odCxuLGksYSxmLFMsTCl7bj09PXZvaWQgMCYmKG49bmV3IE1hcCksaT09PXZvaWQgMCYmKGk9IicqdDAiKSxhPT09dm9pZCAwJiYoYT1uZXcgU2V0KSxmPT09dm9pZCAwJiYoZj0hMSksUz09PXZvaWQgMCYmKFM9ITApLEw9PT12b2lkIDAmJihMPW5ldyBNYXApO2Zvcih2YXIgaz1uZXcgcy5GdW5jdGlvblR5cGUobmV3IHMuQW55VHlwZSxuZXcgcy5BbnlUeXBlKSxVPVtdLGo9bixYPW5ldyBNYXAsWj1mdW5jdGlvbihjZSl7dmFyIGxlO2lmKGVlLm1hdGNoZXNbY2VdWzBdaW5zdGFuY2VvZiBJKXt2YXIgZGU9dC5nZXRTdGF0aWNWYWx1ZShlZS5tYXRjaGVzW2NlXVswXS5uYW1lLmdldFRleHQoKSk7aWYoZGUhPT12b2lkIDAmJmRlWzFdIT09TS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFJiZkZVswXWluc3RhbmNlb2Ygcy5GdW5jdGlvblR5cGUpdGhyb3cgbmV3IFYuRWxhYm9yYXRpb25FcnJvcignVW5hcnkgY29uc3RydWN0b3IgIicrZWUubWF0Y2hlc1tjZV1bMF0ubmFtZS5nZXRUZXh0KCkrJyIgaW4gdGhlIHBhdHRlcm4gbmVlZHMgYW4gYXJndW1lbnQuJyl9dmFyIGhlPW5ldyBNYXA7TC5mb3JFYWNoKGZ1bmN0aW9uKG1lLHZlKXtoZT1oZS5zZXQodmUsbWUpfSk7dmFyIGdlPWVlLm1hdGNoZXNbY2VdWzBdLmFzc2VydFVuaXF1ZUJpbmRpbmcodCxuZXcgU2V0KTtnZS5mb3JFYWNoKGZ1bmN0aW9uKG1lKXtpPXMuVHlwZVZhcmlhYmxlLmdldFVudXNlZFR5cGVWYXJpYWJsZU5hbWUodCxpLGEsbiksYT1hLmFkZChpKSxoZT1oZS5zZXQobWUsbmV3IHMuVHlwZVZhcmlhYmxlKGkpKX0pO3ZhciB5ZT1uZXcgTWFwO2ouZm9yRWFjaChmdW5jdGlvbihtZSx2ZSl7eWU9eWUuc2V0KHZlLG1lKX0pO3ZhciB3ZT1lZS5tYXRjaGVzW2NlXVswXS5nZXRUeXBlKHQsaixpLGEsITAsaGUpO3QudmFsdWVJZGVudGlmaWVySWQ9d2VbNV0sVT1VLmNvbmNhdCh3ZVsxXSk7dmFyIHhlPWVlLm1hdGNoZXNbY2VdWzFdLmdldFR5cGUodCx3ZVs0XSx3ZVsyXSx3ZVszXSxmLGhlKTtVPVUuY29uY2F0KHhlWzFdKSx0LnZhbHVlSWRlbnRpZmllcklkPXhlWzVdLGk9eGVbMl0sYT14ZVszXSxoZS5mb3JFYWNoKGZ1bmN0aW9uKG1lLHZlKXtnZS5oYXModmUpfHwoTD1MLnNldCh2ZSxtZSkpfSk7dmFyIEVlPW5ldyBzLkZ1bmN0aW9uVHlwZSh3ZVswXSx4ZVswXSk7dHJ5e2xlPWsubWVyZ2UodCx4ZVs0XSxFZSksaz1sZVswXSxqPWxlWzFdLGs9ay5pbnN0YW50aWF0ZSh0LGopfWNhdGNoKG1lKXt0aHJvdyBtZSBpbnN0YW5jZW9mIEFycmF5P25ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIk1hdGNoIHJ1bGVzIGRpc2FncmVlIG9uIHR5cGU6ICIrbWVbMF0pOm1lfWs9ay5pbnN0YW50aWF0ZSh0LGopLGouZm9yRWFjaChmdW5jdGlvbihtZSx2ZSl7dmVbMV0hPT0iKiJ8fHZlWzJdIT09IioiP3llPXllLnNldCh2ZSxtZSk6WD1YLnNldCh2ZSxtZSl9KSxqPXllfSxlZT10aGlzLHRlPTA7dGU8dGhpcy5tYXRjaGVzLmxlbmd0aDsrK3RlKVoodGUpO3ZhciBvZT1uZXcgTWFwO2lmKGouZm9yRWFjaChmdW5jdGlvbihjZSxsZSl7b2U9b2Uuc2V0KGxlLGNlKX0pLFguZm9yRWFjaChmdW5jdGlvbihjZSxsZSl7b2U9b2Uuc2V0KGxlLGNlKX0pLFMpdHJ5e2Zvcih2YXIgc2U9dGhpcy5jaGVja0V4aGF1c3RpdmVuZXNzKHQpLHVlPVtdLGllPW5ldyBTZXQscGU9MCxyZT1zZTtwZTxyZS5sZW5ndGg7cGUrKyl7dmFyIGFlPXJlW3BlXTtpZS5oYXMoYWUubWVzc2FnZSl8fChpZS5hZGQoYWUubWVzc2FnZSksdWUucHVzaChuZXcgVi5XYXJuaW5nKGFlLnR5cGU9PT0tMT8tMTowLGFlLm1lc3NhZ2UpKSl9VT1VLmNvbmNhdCh1ZSl9Y2F0Y2goY2Upe1UucHVzaChuZXcgVi5XYXJuaW5nKDAsJ0hvdyBzaG91bGQgSSBrbm93IHdoZXRoZXIgIicrdGhpcytgIiBpcyBleGhhdXN0aXZlPyBEbyBJIGxvb2sgbGlrZSBmcmlnZ2luJyBXSUtJUCoqKkEgdG8geW91PyEKYCtjZS5tZXNzYWdlK2AKYCkpfXJldHVybltrLFUsaSxhLGosdC52YWx1ZUlkZW50aWZpZXJJZF19LGwucHJvdG90eXBlLmNoZWNrRXhoYXVzdGl2ZW5lc3M9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBDKCkuY292ZXIodCx0aGlzLm1hdGNoZXMubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBuWzBdfSkpfSxsLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjx0aGlzLm1hdGNoZXMubGVuZ3RoOysrbil7dmFyIGk9dGhpcy5tYXRjaGVzW25dO3QucHVzaChbaVswXS5zaW1wbGlmeSgpLGlbMV0uc2ltcGxpZnkoKV0pfXJldHVybiBuZXcgbCh0KX0sbC5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlQmluZGluZz1mdW5jdGlvbih0LG4pe2Zvcih2YXIgaT0wO2k8dGhpcy5tYXRjaGVzLmxlbmd0aDsrK2kpdGhpcy5tYXRjaGVzW2ldWzBdLmFzc2VydFVuaXF1ZUJpbmRpbmcodCxuKSx0aGlzLm1hdGNoZXNbaV1bMV0uYXNzZXJ0VW5pcXVlQmluZGluZyh0LG4pO3JldHVybiBuZXcgU2V0fSxsfSgpO3UuTWF0Y2g9djt2YXIgQz1mdW5jdGlvbihsKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGwuY2FsbCh0aGlzKXx8dGhpc31yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24obixpLGEsZixTLEwpe2k9PT12b2lkIDAmJihpPW5ldyBNYXApLGE9PT12b2lkIDAmJihhPSInKnQwIiksZj09PXZvaWQgMCYmKGY9bmV3IFNldCk7Zm9yKHZhciBrPSthLnN1YnN0cmluZygzKSsxLFU9IiI7OysraylpZihhPSInIithWzFdK2FbMl0raywhZi5oYXMoYSkmJiFpLmhhcyhhKSYmbi5nZXRTdGF0aWNWYWx1ZShhKT09PXZvaWQgMClyZXR1cm4gVT1hLFtuZXcgcy5UeXBlVmFyaWFibGUoVSksW10sVSxmLmFkZChVKSxpLG4udmFsdWVJZGVudGlmaWVySWRdfSx0LnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJXaWxkY2FyZHMgYXJlIGZhciB0b28gd2lsZCB0byBoYXZlIGEgdmFsdWUuIil9LHQucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbihuLGksYSl7cmV0dXJuW1tdLGEsaV19LHQucHJvdG90eXBlLnN1YnN1bWVzPWZ1bmN0aW9uKG4saSl7cmV0dXJuITB9LHQucHJvdG90eXBlLmNvdmVyPWZ1bmN0aW9uKG4saSl7Zm9yKHZhciBhPSExLGY9ITEsUz1bXSxMPW5ldyBTZXQsaz1bXSxVPW5ldyBNYXAsaj1uZXcgTWFwLFg9bmV3IFNldCxaPVtdLGVlPTA7ZWU8aS5sZW5ndGg7KytlZSl7Zm9yKHZhciB0ZT1pW2VlXTt0ZSBpbnN0YW5jZW9mIHI7KXRlPXRlLmV4cHJlc3Npb247aWYoTC5oYXModGUudG9TdHJpbmcoKSkmJlMucHVzaChuZXcgVi5XYXJuaW5nKDAsJ0R1cGxpY2F0ZSBydWxlIGZvciAiJyt0ZStgIiBpbiBwYXR0ZXJuIG1hdGNoaW5nLgpgKSksTC5hZGQodGUudG9TdHJpbmcoKSksdGUgaW5zdGFuY2VvZiBPKXtmb3IodmFyIG9lPTAsc2U9dGUuZW50cmllcztvZTxzZS5sZW5ndGg7b2UrKyl7dmFyIHVlPXNlW29lXTtYLmFkZCh1ZVswXSl9Wi5wdXNoKHRlKX1lbHNlIGlmKCEodGUgaW5zdGFuY2VvZiBBKSl7aWYodGUgaW5zdGFuY2VvZiB0KXthPSEwLGY9ITAsZWUrMTxpLmxlbmd0aCYmUy5wdXNoKG5ldyBWLldhcm5pbmcoZWUsJ1J1bGVzIGFmdGVyICInK3RlK2AiIHVudXNlZCBpbiBwYXR0ZXJuIG1hdGNoaW5nLgpgKSk7YnJlYWt9aWYodGUgaW5zdGFuY2VvZiBJKXtpZigoaWU9dGUuZ2V0Q29uc3RydWN0b3JOYW1lKG4pKT09PXZvaWQgMCl7YT0hMCxmPSEwLGVlKzE8aS5sZW5ndGgmJlMucHVzaChuZXcgVi5XYXJuaW5nKGVlLCdSdWxlcyBhZnRlciAiJyt0ZStgIiB1bnVzZWQgaW4gcGF0dGVybiBtYXRjaGluZy4KYCkpO2JyZWFrfWlmKGsubGVuZ3RoPT09MCl7aWYoKHJlPXRlLmdldENvbnN0cnVjdG9yTGlzdChuKSk9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJUaGVyZS4gSnVzdCBhbm90aGVyIHVuZm9ydHVuYXRlIGFjY2lkZW50LiIpO2s9cmV9VS5oYXMoaWUpP1MucHVzaChuZXcgVi5XYXJuaW5nKDAsJ0R1cGxpY2F0ZSBydWxlIGZvciAiJyt0ZStgIiBpbiBwYXR0ZXJuIG1hdGNoaW5nLgpgKSk6KFU9VS5zZXQoaWUsW3RlXSksaj1qLnNldChpZSx0ZSkpfWVsc2V7aWYodGUgaW5zdGFuY2VvZiBlKXt2YXIgaWUscGU9dGUuZnVuYztpZighKHBlIGluc3RhbmNlb2YgSSkpdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJUaGVyZS4gSnVzdCBhbm90aGVyIHVuZm9ydHVuYXRlIGFjY2lkZW50LiIpO2lmKChpZT1wZS5nZXRDb25zdHJ1Y3Rvck5hbWUobikpPT09dm9pZCAwKXRocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiVGhlcmUuIEp1c3QgYW5vdGhlciB1bmZvcnR1bmF0ZSBhY2NpZGVudC4iKTtpZihrLmxlbmd0aD09PTApe3ZhciByZTtpZigocmU9cGUuZ2V0Q29uc3RydWN0b3JMaXN0KG4pKT09PXZvaWQgMCl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlRoZXJlLiBKdXN0IGFub3RoZXIgdW5mb3J0dW5hdGUgYWNjaWRlbnQuIik7az1yZX1pZihVLmhhcyhpZSkpe3ZhciBhZT1VLmdldChpZSk7YWUucHVzaCh0ZSksVT1VLnNldChpZSxhZSl9ZWxzZSBVPVUuc2V0KGllLFt0ZV0pLGo9ai5zZXQoaWUsbmV3IGUodGUuZnVuYyxuZXcgdCkpfWlmKHRlIGluc3RhbmNlb2YgWSl0aHJvdyBuZXcgVi5QYXR0ZXJuTWF0Y2hFcnJvcigiVmVjdG9yIHBhdHRlcm4gYXJlIG5vdCBjaGVja2VkIGZvciBleGhhdXN0aXZlbmVzcy4iKX19fWlmKGsubGVuZ3RoIT09MCl7aWYoIWYpZm9yKGE9ITAsZWU9MDtlZTxrLmxlbmd0aDsrK2VlKWouaGFzKGtbZWVdKT9TPVMuY29uY2F0KGouZ2V0KGtbZWVdKS5jb3ZlcihuLFUuZ2V0KGtbZWVdKSkpOmE9Zn1lbHNlIGlmKCFhJiZaLmxlbmd0aCE9PTApe3ZhciBjZT1bXTtyZXR1cm4gWC5mb3JFYWNoKGZ1bmN0aW9uKGxlKXtjZS5wdXNoKFtsZSxuZXcgdF0pfSksUy5jb25jYXQobmV3IE8oITAsY2UpLmNvdmVyKG4sWikpfXJldHVybiBhfHxTLnB1c2gobmV3IFYuV2FybmluZygtMSxgUGF0dGVybiBtYXRjaGluZyBpcyBub3QgZXhoYXVzdGl2ZS4KYCkpLFN9LHQucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24obixpKXtyZXR1cm5bXX0sdC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iXyJ9LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXtyZXR1cm4gbmV3IFNldH0sdH0oaCk7dS5XaWxkY2FyZD1DO3ZhciBHPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobixpLGEpe3ZhciBmPWwuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZi5pZGVudGlmaWVyPW4sZi50eXBlQW5ub3RhdGlvbj1pLGYucGF0dGVybj1hLGZ9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKG4saSxhLGYsUyxMKXtpZihpPT09dm9pZCAwJiYoaT1uZXcgTWFwKSxhPT09dm9pZCAwJiYoYT0iJyp0MCIpLGY9PT12b2lkIDAmJihmPW5ldyBTZXQpLFM9PT12b2lkIDAmJihTPSExKSxMPT09dm9pZCAwJiYoTD1uZXcgTWFwKSwhUyl0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkxheWVyZWQgcGF0dGVybnMgYXJlIGZhciB0b28gbGF5ZXJlZCB0byBoYXZlIGEgdHlwZS4iKTt2YXIgaz1uZXcgSSh0aGlzLmlkZW50aWZpZXIpLmdldFR5cGUobixpLGEsZiwhMCxMKSxVPWtbMF07aWYodGhpcy50eXBlQW5ub3RhdGlvbiE9PXZvaWQgMCl0cnl7aT0oWD1VLm1lcmdlKG4sa1s0XSx0aGlzLnR5cGVBbm5vdGF0aW9uKSlbMV0sVT1YWzBdfWNhdGNoKFope3Rocm93IFogaW5zdGFuY2VvZiBBcnJheT9uZXcgVi5FbGFib3JhdGlvbkVycm9yKCJXcm9uZyB0eXBlIGFubm90YXRpb246ICIrWlswXSk6Wn12YXIgaj10aGlzLnBhdHRlcm4uZ2V0VHlwZShuLGksa1syXSxrWzNdLCEwLEwpO3RyeXt2YXIgWDtpPShYPVUubWVyZ2UobixqWzRdLGpbMF0pKVsxXSxVPVhbMF19Y2F0Y2goWil7dGhyb3cgWiBpbnN0YW5jZW9mIEFycmF5P25ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIldyb25nIHR5cGUgYW5ub3RhdGlvbjogIitaWzBdKTpafXJldHVybltVLGtbMV0uY29uY2F0KGpbMV0pLGpbMl0salszXSxpLG4udmFsdWVJZGVudGlmaWVySWRdfSx0LnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJMYXllcmVkIHBhdHRlcm5zIGFyZSBmYXIgdG9vIGxheWVyZWQgdG8gaGF2ZSBhIHZhbHVlLiIpfSx0LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24obixpLGEpe3ZhciBmPWE7aWYodGhpcy50eXBlQW5ub3RhdGlvbiE9PXZvaWQgMCl0cnl7dmFyIFM9YS5tZXJnZShuLGksdGhpcy50eXBlQW5ub3RhdGlvbik7aT1TWzFdLGY9U1swXX1jYXRjaChrKXt0aHJvdyBrIGluc3RhbmNlb2YgQXJyYXk/bmV3IFYuRWxhYm9yYXRpb25FcnJvcigiV3JvbmcgdHlwZSBhbm5vdGF0aW9uOiAiK2tbMF0pOmt9dmFyIEw9dGhpcy5wYXR0ZXJuLm1hdGNoVHlwZShuLGksZik7cmV0dXJuW1tbdGhpcy5pZGVudGlmaWVyLmdldFRleHQoKSxmXV0uY29uY2F0KExbMF0pLGEsTFsyXV19LHQucHJvdG90eXBlLnN1YnN1bWVzPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIkxheWVyZWQgcGF0dGVybnMgYXJlIG5vdCBjaGVja2VkIGZvciBleGhhdXN0aXZlbmVzcy4iKX0sdC5wcm90b3R5cGUuY292ZXI9ZnVuY3Rpb24obixpKXt0aHJvdyBuZXcgVi5QYXR0ZXJuTWF0Y2hFcnJvcigiTGF5ZXJlZCBwYXR0ZXJucyBhcmUgbm90IGNoZWNrZWQgZm9yIGV4aGF1c3RpdmVuZXNzLiIpfSx0LnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKG4saSl7dmFyIGE9dGhpcy5wYXR0ZXJuLm1hdGNoZXMobixpKTtyZXR1cm4gYT09PXZvaWQgMD9hOltbdGhpcy5pZGVudGlmaWVyLmdldFRleHQoKSxpXV0uY29uY2F0KGEpfSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGVBbm5vdGF0aW9uP25ldyB0KHRoaXMuaWRlbnRpZmllcix0aGlzLnR5cGVBbm5vdGF0aW9uLnNpbXBsaWZ5KCksdGhpcy5wYXR0ZXJuLnNpbXBsaWZ5KCkpOm5ldyB0KHRoaXMuaWRlbnRpZmllcix2b2lkIDAsdGhpcy5wYXR0ZXJuLnNpbXBsaWZ5KCkpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlkZW50aWZpZXIuZ2V0VGV4dCgpKyIgYXMgIit0aGlzLnBhdHRlcm59LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXt2YXIgYT10aGlzLnBhdHRlcm4uYXNzZXJ0VW5pcXVlQmluZGluZyhuLGkpLGY9bi5nZXRTdGF0aWNWYWx1ZSh0aGlzLmlkZW50aWZpZXIuZ2V0VGV4dCgpKTtpZihmIT09dm9pZCAwJiZmWzFdIT09TS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKXJldHVybiBhO3ZhciBTPW4uZ2V0RHluYW1pY1ZhbHVlKHRoaXMuaWRlbnRpZmllci5nZXRUZXh0KCkpO2lmKFMhPT12b2lkIDAmJlNbMV0hPT1NLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpcmV0dXJuIGE7aWYoYS5oYXModGhpcy5pZGVudGlmaWVyLmdldFRleHQoKSkpdGhyb3cgbmV3IFYuUGFyc2VyRXJyb3IoJ05vIG1hdHRlciBmcm9tIHdoaWNoIGVuZCB5b3Ugc3RhcnQgZWF0aW5nIHRoaXMgcGF0dGVybixyZWJpbmRpbmcgIicrdGhpcy5pZGVudGlmaWVyLmdldFRleHQoKSsnIiBpcyBzdGlsbCBhIGJhZCBpZGVhLicpO3JldHVybiBhLmFkZCh0aGlzLmlkZW50aWZpZXIuZ2V0VGV4dCgpKX0sdH0oaCk7dS5MYXllcmVkUGF0dGVybj1HO3ZhciBZPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobil7dmFyIGk9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmV4cHJlc3Npb25zPW4saX1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24obixpLGEsZixTLEwpe2lmKGk9PT12b2lkIDAmJihpPW5ldyBNYXApLGE9PT12b2lkIDAmJihhPSInKnQwIiksZj09PXZvaWQgMCYmKGY9bmV3IFNldCksUz09PXZvaWQgMCYmKFM9ITEpLHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoPT09MClyZXR1cm5bbmV3IHMuQ3VzdG9tVHlwZSgidmVjdG9yIixbbmV3IHMuQW55VHlwZV0pLFtdLGEsZixpLG4udmFsdWVJZGVudGlmaWVySWRdO2Zvcih2YXIgaz10aGlzLmV4cHJlc3Npb25zWzBdLmdldFR5cGUobixpLGEsZixTKSxVPWtbMF0saj0wO2o8dGhpcy5leHByZXNzaW9ucy5sZW5ndGg7KytqKXtrPXRoaXMuZXhwcmVzc2lvbnNbal0uZ2V0VHlwZShuLGtbNF0sa1syXSxrWzNdLFMpO3RyeXt2YXIgWD1VLm1lcmdlKG4sa1s0XSxrWzBdKTtrWzRdPVhbMV0sVT1YWzBdfWNhdGNoKFope3Rocm93IFogaW5zdGFuY2VvZiBBcnJheT9uZXcgVi5FbGFib3JhdGlvbkVycm9yKCJUeXBlIGNsYXNoIGluIHZlY3RvciBlbnRyaWVzOiAiK1pbMF0pOlp9fXJldHVybltuZXcgcy5DdXN0b21UeXBlKCJ2ZWN0b3IiLFtVXSksa1sxXSxrWzJdLGtbM10sa1s0XSxrWzVdXX0sdC5wcm90b3R5cGUuY29tcHV0ZT1mdW5jdGlvbihuLGkpe2Zvcih2YXIgYT1bXSxmPTA7Zjx0aGlzLmV4cHJlc3Npb25zLmxlbmd0aDsrK2Ype3ZhciBTPXRoaXMuZXhwcmVzc2lvbnNbZl0uY29tcHV0ZShuLGkpO2lmKFM9PT12b2lkIDB8fFMudmFsdWU9PT12b2lkIDApdGhyb3cgbmV3IFYuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJORyIpO2EucHVzaChTLnZhbHVlKX1yZXR1cm57bmV3U3RhdGU6dm9pZCAwLHZhbHVlOm5ldyBELlZlY3RvclZhbHVlKGEpLGhhc1Rocm93bjohMX19LHQucHJvdG90eXBlLmdldEV4cGxpY2l0VHlwZVZhcmlhYmxlcz1mdW5jdGlvbigpe3JldHVybiBuZXcgU2V0fSx0LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24obixpLGEpe2lmKCEoYSBpbnN0YW5jZW9mIHMuQ3VzdG9tVHlwZSl8fGEubmFtZSE9PSJ2ZWN0b3IiKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1ZlY3RvcnMgbGlrZSBvbmx5IHZlY3RvcnMsIG5vdCAiJythKyciLiBTdGF5IGNvb2wuJyk7Zm9yKHZhciBmPWEudHlwZUFyZ3VtZW50c1swXSxTPVtdLEw9MDtMPHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOysrTCl7dmFyIGs9dGhpcy5leHByZXNzaW9uc1tMXS5tYXRjaFR5cGUobixpLGYpO2Y9a1sxXSxTPVMuY29uY2F0KGtbMF0pLGk9a1syXX1yZXR1cm5bUyxuZXcgcy5DdXN0b21UeXBlKCJ2ZWN0b3IiLFtmXSksaV19LHQucHJvdG90eXBlLnN1YnN1bWVzPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIlZlY3RvciBwYXR0ZXJucyBhcmUgbm90IGNoZWNrZWQgZm9yIGV4aGF1c3RpdmVuZXNzLiIpfSx0LnByb3RvdHlwZS5jb3Zlcj1mdW5jdGlvbihuLGkpe3Rocm93IG5ldyBWLlBhdHRlcm5NYXRjaEVycm9yKCJWZWN0b3IgcGF0dGVybnMgYXJlIG5vdCBjaGVja2VkIGZvciBleGhhdXN0aXZlbmVzcy4iKX0sdC5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbihuLGkpe2lmKCEoaSBpbnN0YW5jZW9mIEQuVmVjdG9yVmFsdWUpKXRocm93IG5ldyBWLkVsYWJvcmF0aW9uRXJyb3IoJ1ZlY3RvcnMgbGlrZSBvbmx5IHZlY3RvcnMsIG5vdCAiJytpKyciLiBTdGF5IGNvb2wuJyk7Zm9yKHZhciBhPVtdLGY9MDtmPHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOysrZil7dmFyIFM9dGhpcy5leHByZXNzaW9uc1tmXS5tYXRjaGVzKG4saS5lbnRyaWVzW2ZdKTtTIT09dm9pZCAwJiYoYT1hLmNvbmNhdChTKSl9cmV0dXJuIGF9LHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLGk9MDtpPHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOysraSluLnB1c2godGhpcy5leHByZXNzaW9uc1tpXS5zaW1wbGlmeSgpKTtyZXR1cm4gbmV3IHQobil9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPSIjWyAiLGk9MDtpPHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOysraSlpPjAmJihuKz0iLCAiKSxuKz10aGlzLmV4cHJlc3Npb25zW2ldO3JldHVybiBuKyIgXSJ9LHR9KGgpO3UuVmVjdG9yPVk7dmFyIEo9ZnVuY3Rpb24obCl7ZnVuY3Rpb24gdChuLGkpe3ZhciBhPWwuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gYS5sZWZ0PW4sYS5yaWdodD1pLGF9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKG4saSxhLGYsUyxMKXtpPT09dm9pZCAwJiYoaT1uZXcgTWFwKSxhPT09dm9pZCAwJiYoYT0iJyp0MCIpLGY9PT12b2lkIDAmJihmPW5ldyBTZXQpLFM9PT12b2lkIDAmJihTPSExKTt2YXIgaz10aGlzLmxlZnQuZ2V0VHlwZShuLGksYSxmLFMpLFU9dGhpcy5yaWdodC5nZXRUeXBlKG4sa1s0XSxrWzJdLGtbM10sUyk7dHJ5e3ZhciBqPWtbMF0ubWVyZ2UobixVWzRdLFVbMF0pO3JldHVybltqWzBdLGtbMV0uY29uY2F0KFVbMV0pLFVbMl0sVVszXSxqWzFdLFVbNV1dfWNhdGNoKFgpe3Rocm93IFggaW5zdGFuY2VvZiBBcnJheT9uZXcgVi5FbGFib3JhdGlvbkVycm9yKCJCb3RoIHBhdHRlcm5zIG9mIGEgY29uanVuY3RpdmUgcGF0dGVybiBtdXN0IGhhdmUgdGhlIHNhbWUgdHlwZS4iKTpYfX0sdC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy5sZWZ0LnNpbXBsaWZ5KCksdGhpcy5yaWdodC5zaW1wbGlmeSgpKX0sdC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKG4saSxhKXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlx1MzAwQ1x1MzBDQlx1MzBFM1x1RkYwRFx1MzAwMVx1MzBDQlx1MzBFM1x1RkYwRFx1MzAwRCIpfSx0LnByb3RvdHlwZS5zdWJzdW1lcz1mdW5jdGlvbihuLGkpe3Rocm93IG5ldyBWLlBhdHRlcm5NYXRjaEVycm9yKCJDb25qdWN0aXZlIHBhdHRlcm5zIGFyZSBub3QgY2hlY2tlZCBmb3IgZXhoYXVzdGl2ZW5lc3MuIil9LHQucHJvdG90eXBlLmNvdmVyPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIkNvbmp1Y3RpdmUgcGF0dGVybnMgYXJlIG5vdCBjaGVja2VkIGZvciBleGhhdXN0aXZlbmVzcy4iKX0sdC5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbihuLGkpe3ZhciBhPXRoaXMubGVmdC5tYXRjaGVzKG4saSk7aWYoYSE9PXZvaWQgMCl7Zm9yKHZhciBmPW4uZ2V0TmVzdGVkU3RhdGUobi5pZCksUz0wLEw9YTtTPEwubGVuZ3RoO1MrKyl7dmFyIGs9TFtTXTtmLnNldER5bmFtaWNWYWx1ZShrWzBdLGtbMV0sTS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKX12YXIgVT10aGlzLnJpZ2h0Lm1hdGNoZXMoZixpKTtpZihVIT09dm9pZCAwKXJldHVybiBhLmNvbmNhdChVKX19LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXtyZXR1cm4gbmV3IFNldH0sdH0oaCk7dS5Db25qdW5jdGl2ZVBhdHRlcm49Sjt2YXIgej1mdW5jdGlvbihsKXtmdW5jdGlvbiB0KG4saSl7dmFyIGE9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBhLmxlZnQ9bixhLnJpZ2h0PWksYX1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24obixpLGEsZixTLEwpe2k9PT12b2lkIDAmJihpPW5ldyBNYXApLGE9PT12b2lkIDAmJihhPSInKnQwIiksZj09PXZvaWQgMCYmKGY9bmV3IFNldCksUz09PXZvaWQgMCYmKFM9ITEpO3ZhciBrPXRoaXMubGVmdC5nZXRUeXBlKG4saSxhLGYsUyksVT10aGlzLnJpZ2h0LmdldFR5cGUobixrWzRdLGtbMl0sa1szXSxTKTt0cnl7dmFyIGo9a1swXS5tZXJnZShuLFVbNF0sVVswXSk7cmV0dXJuW2pbMF0sa1sxXS5jb25jYXQoVVsxXSksVVsyXSxVWzNdLGpbMV0sVVs1XV19Y2F0Y2goWCl7dGhyb3cgWCBpbnN0YW5jZW9mIEFycmF5P25ldyBWLkVsYWJvcmF0aW9uRXJyb3IoIkJvdGggcGF0dGVybnMgb2YgYSBkaXNqdW5jdGl2ZSBwYXR0ZXJuIG11c3QgaGF2ZSB0aGUgc2FtZSB0eXBlLiIpOlh9fSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLmxlZnQuc2ltcGxpZnkoKSx0aGlzLnJpZ2h0LnNpbXBsaWZ5KCkpfSx0LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24obixpLGEpe3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiXHUzMDBDXHUzMENCXHUzMEUzXHVGRjBEXHUzMDAxXHUzMENCXHUzMEUzXHVGRjBEXHUzMDBEIil9LHQucHJvdG90eXBlLnN1YnN1bWVzPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIkRpc2p1bmN0aXZlIHBhdHRlcm5zIGFyZSBub3QgY2hlY2tlZCBmb3IgZXhoYXVzdGl2ZW5lc3MuIil9LHQucHJvdG90eXBlLmNvdmVyPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIkRpc2p1bmN0aXZlIHBhdHRlcm5zIGFyZSBub3QgY2hlY2tlZCBmb3IgZXhoYXVzdGl2ZW5lc3MuIil9LHQucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24obixpKXt2YXIgYT10aGlzLmxlZnQubWF0Y2hlcyhuLGkpO3JldHVybiBhIT09dm9pZCAwP2E6dGhpcy5yaWdodC5tYXRjaGVzKG4saSl9LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXtyZXR1cm4gbmV3IFNldH0sdH0oaCk7dS5EaXNqdW5jdGl2ZVBhdHRlcm49ejt2YXIgcD1mdW5jdGlvbihsKXtmdW5jdGlvbiB0KG4saSxhKXt2YXIgZj1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGYucGF0dGVybj1uLGYubmVzdGVkPWksZi5leHByZXNzaW9uPWEsZn1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24obixpLGEsZixTLEwpe3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiXHUzMDBDXHUzMENCXHUzMEUzXHVGRjBEXHUzMDAxXHUzMENCXHUzMEUzXHVGRjBEXHUzMDBEIil9LHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KHRoaXMucGF0dGVybi5zaW1wbGlmeSgpLHRoaXMubmVzdGVkLnNpbXBsaWZ5KCksdGhpcy5leHByZXNzaW9uLnNpbXBsaWZ5KCkpfSx0LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24obixpLGEpe3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiXHUzMDBDXHUzMENCXHUzMEUzXHVGRjBEXHUzMDAxXHUzMENCXHUzMEUzXHVGRjBEXHUzMDBEIil9LHQucHJvdG90eXBlLnN1YnN1bWVzPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIk5lc3RlZCBtYXRjaGVzIGFyZSBub3QgY2hlY2tlZCBmb3IgZXhoYXVzdGl2ZW5lc3MuIil9LHQucHJvdG90eXBlLmNvdmVyPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIk5lc3RlZCBtYXRjaGVzIGFyZSBub3QgY2hlY2tlZCBmb3IgZXhoYXVzdGl2ZW5lc3MuIil9LHQucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24obixpKXtpZih0aGlzLnBhdHRlcm4ubWF0Y2hlcyhuLGkpIT09dm9pZCAwKXRocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiXHUzMDBDXHUzMENCXHUzMEUzXHVGRjBEXHUzMDAxXHUzMENCXHUzMEUzXHVGRjBEXHUzMDBEIil9LHQucHJvdG90eXBlLmFzc2VydFVuaXF1ZUJpbmRpbmc9ZnVuY3Rpb24obixpKXtyZXR1cm4gbmV3IFNldH0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iKCAiK3RoaXMucGF0dGVybisiIHdpdGggIit0aGlzLm5lc3RlZCsiID0gIit0aGlzLmV4cHJlc3Npb24rIiApIn0sdH0oaCk7dS5OZXN0ZWRNYXRjaD1wO3ZhciBjPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobixpKXt2YXIgYT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGEuZXhwcmVzc2lvbnM9bixhLm9wZXJhdG9ycz1pLGF9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24obixpLGEpe3JldHVybiB0aGlzLnJlUGFyc2UobikubWF0Y2hUeXBlKG4saSxhKX0sdC5wcm90b3R5cGUuc3Vic3VtZXM9ZnVuY3Rpb24obixpKXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlx1NEUwMFx1NjYyOFx1NjVFNVx1Njc2NVx1MzA4NFx1MzA0Q1x1MzA4Q1x1MzAwMiIpfSx0LnByb3RvdHlwZS5jb3Zlcj1mdW5jdGlvbihuLGkpe3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiXHU0RTAwXHU2NjI4XHU2NUU1XHU2NzY1XHUzMDg0XHUzMDRDXHUzMDhDXHUzMDAyIil9LHQucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24obixpKXtyZXR1cm4gdGhpcy5yZVBhcnNlKG4pLm1hdGNoZXMobixpKX0sdC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIk91Y2gsIEknbSBub3QgZnVsbHkgcGFyc2VkLiIpfSx0LnByb3RvdHlwZS5yZVBhcnNlPWZ1bmN0aW9uKG4pe2Zvcih2YXIgaT10aGlzLm9wZXJhdG9ycyxhPXRoaXMuZXhwcmVzc2lvbnMsZj1bXSxTPTA7UzxhLmxlbmd0aDsrK1MpZi5wdXNoKFtTXSk7Zm9yKGkuc29ydChmdW5jdGlvbihpZSxwZSl7dmFyIHJlPWllWzBdLGFlPWllWzFdLGNlPXBlWzBdLGxlPXBlWzFdLGRlPW4uZ2V0SW5maXhTdGF0dXMocmUpLGhlPW4uZ2V0SW5maXhTdGF0dXMoY2UpO2lmKGRlLnByZWNlZGVuY2U+aGUucHJlY2VkZW5jZSlyZXR1cm4tMTtpZihkZS5wcmVjZWRlbmNlPGhlLnByZWNlZGVuY2UpcmV0dXJuIDE7aWYoZGUucmlnaHRBc3NvY2lhdGl2ZSl7aWYoYWU+bGUpcmV0dXJuLTE7aWYoYWU8bGUpcmV0dXJuIDF9ZWxzZXtpZihhZT5sZSlyZXR1cm4gMTtpZihhZTxsZSlyZXR1cm4tMX1yZXR1cm4gMH0pLFM9MDtTPGkubGVuZ3RoOysrUyl7aWYoUz4wKXt2YXIgTD1uLmdldEluZml4U3RhdHVzKGlbU11bMF0pLGs9bi5nZXRJbmZpeFN0YXR1cyhpW1MtMV1bMF0pO2lmKEwucHJlY2VkZW5jZT09PWsucHJlY2VkZW5jZSYmTC5yaWdodEFzc29jaWF0aXZlIT09ay5yaWdodEFzc29jaWF0aXZlJiYoZltpW1MtMV1bMV0rMV09PT1mW2lbU11bMV1dfHxmW2lbUy0xXVsxXV09PT1mW2lbU11bMV0rMV0pKXRocm93IG5ldyBWLlBhcnNlckVycm9yKCJDb3VsZCB5b3UgZXZlciBpbWFnaW5lIGxlZnQgYXNzb2NpYXRpdmVzIGFuZCByaWdodCBhc3NvY2lhdGl2ZXMgbGl2aW5nIHRvZ2V0aGVyIGluIHBlYWNlPyIpfWZvcih2YXIgVT1hW2lbU11bMV1dLGo9YVtpW1NdWzFdKzFdLFg9bmV3IGUobmV3IEkoaVtTXVswXSksbmV3IHgoW1Usal0pKSxaPWZbaVtTXVsxXV0sZWU9MCx0ZT1mW2lbU11bMV0rMV07ZWU8dGUubGVuZ3RoO2VlKyspe3ZhciBvZT10ZVtlZV07Wi5wdXNoKG9lKX1mb3IodmFyIHNlPTAsdWU9WjtzZTx1ZS5sZW5ndGg7c2UrKylmW29lPXVlW3NlXV09WixhW29lXT1YfXJldHVybiBhWzBdfSx0fShoKTt1LkluZml4RXhwcmVzc2lvbj1jO3ZhciB3PW5ldyBJKG5ldyBCLklkZW50aWZpZXJUb2tlbigiZmFsc2UiKSksVD1uZXcgSShuZXcgQi5JZGVudGlmaWVyVG9rZW4oInRydWUiKSksTj1uZXcgSShuZXcgQi5JZGVudGlmaWVyVG9rZW4oIm5pbCIpKSwkPW5ldyBJKG5ldyBCLklkZW50aWZpZXJUb2tlbigiOjoiKSksSD1mdW5jdGlvbihsKXtmdW5jdGlvbiB0KG4saSl7dmFyIGE9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBhLmxlZnRPcGVyYW5kPW4sYS5yaWdodE9wZXJhbmQ9aSxhfXJldHVybiBnKHQsbCksdC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG5lKHRoaXMubGVmdE9wZXJhbmQsdGhpcy5yaWdodE9wZXJhbmQsdykuc2ltcGxpZnkoKX0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iKCAiK3RoaXMubGVmdE9wZXJhbmQrIiBhbmRhbHNvICIrdGhpcy5yaWdodE9wZXJhbmQrIiApIn0sdH0oaCk7dS5Db25qdW5jdGlvbj1IO3ZhciBQPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobixpKXt2YXIgYT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGEubGVmdE9wZXJhbmQ9bixhLnJpZ2h0T3BlcmFuZD1pLGF9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgbmUodGhpcy5sZWZ0T3BlcmFuZCxULHRoaXMucmlnaHRPcGVyYW5kKS5zaW1wbGlmeSgpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIoICIrdGhpcy5sZWZ0T3BlcmFuZCsiIG9yZWxzZSAiK3RoaXMucmlnaHRPcGVyYW5kKyIgKSJ9LHR9KGgpO3UuRGlzanVuY3Rpb249UDt2YXIgeD1mdW5jdGlvbihsKXtmdW5jdGlvbiB0KG4pe3ZhciBpPWwuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5leHByZXNzaW9ucz1uLGl9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24obixpLGEpe3JldHVybiB0aGlzLnNpbXBsaWZ5KCkubWF0Y2hUeXBlKG4saSxhKX0sdC5wcm90b3R5cGUuc3Vic3VtZXM9ZnVuY3Rpb24obixpKXtyZXR1cm4gdGhpcy5zaW1wbGlmeSgpLnN1YnN1bWVzKG4saSl9LHQucHJvdG90eXBlLmNvdmVyPWZ1bmN0aW9uKG4saSl7cmV0dXJuIHRoaXMuc2ltcGxpZnkoKS5jb3ZlcihuLGkpfSx0LnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKG4saSl7cmV0dXJuIHRoaXMuc2ltcGxpZnkoKS5tYXRjaGVzKG4saSl9LHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLGk9MDtpPHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOysraSluLnB1c2goWyIiKyhpKzEpLHRoaXMuZXhwcmVzc2lvbnNbaV0uc2ltcGxpZnkoKV0pO3JldHVybiBuZXcgTyghMCxuKX0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIG49IiggIixpPTA7aTx0aGlzLmV4cHJlc3Npb25zLmxlbmd0aDsrK2kpaT4wJiYobis9IiwgIiksbis9dGhpcy5leHByZXNzaW9uc1tpXTtyZXR1cm4gbisiICkifSx0fShoKTt1LlR1cGxlPXg7dmFyIFI9ZnVuY3Rpb24obCl7ZnVuY3Rpb24gdChuKXt2YXIgaT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuZXhwcmVzc2lvbnM9bixpfXJldHVybiBnKHQsbCksdC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKG4saSxhKXtyZXR1cm4gdGhpcy5zaW1wbGlmeSgpLm1hdGNoVHlwZShuLGksYSl9LHQucHJvdG90eXBlLnN1YnN1bWVzPWZ1bmN0aW9uKG4saSl7cmV0dXJuIHRoaXMuc2ltcGxpZnkoKS5zdWJzdW1lcyhuLGkpfSx0LnByb3RvdHlwZS5jb3Zlcj1mdW5jdGlvbihuLGkpe3JldHVybiB0aGlzLnNpbXBsaWZ5KCkuY292ZXIobixpKX0sdC5wcm90b3R5cGUubWF0Y2hlcz1mdW5jdGlvbihuLGkpe3JldHVybiB0aGlzLnNpbXBsaWZ5KCkubWF0Y2hlcyhuLGkpfSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe2Zvcih2YXIgbj1OLGk9dGhpcy5leHByZXNzaW9ucy5sZW5ndGgtMTtpPj0wOy0taSl7dmFyIGE9bmV3IHgoW3RoaXMuZXhwcmVzc2lvbnNbaV0sbl0pLnNpbXBsaWZ5KCk7bj1uZXcgZSgkLGEpfXJldHVybiBufSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgbj0iWyAiLGk9MDtpPHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOysraSlpPjAmJihuKz0iLCAiKSxuKz10aGlzLmV4cHJlc3Npb25zW2ldO3JldHVybiBuKyIgXSJ9LHR9KGgpO3UuTGlzdD1SO3ZhciBfPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobil7dmFyIGk9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmV4cHJlc3Npb25zPW4saX1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBuPXRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoLTEsaT1uZXcgdihbW25ldyBDLHRoaXMuZXhwcmVzc2lvbnNbbl1dXSksYT1uZXcgUSh0aGlzLmV4cHJlc3Npb25zW24tMV0saSksZj1uLTI7Zj49MDstLWYpaT1uZXcgdihbW25ldyBDLGFdXSksYT1uZXcgUSh0aGlzLmV4cHJlc3Npb25zW2ZdLGkpO3JldHVybiBhLnNpbXBsaWZ5KCl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPSIoICIsaT0wO2k8dGhpcy5leHByZXNzaW9ucy5sZW5ndGg7KytpKWk+MCYmKG4rPSI7ICIpLG4rPXRoaXMuZXhwcmVzc2lvbnNbaV07cmV0dXJuIG4rIiApIn0sdH0oaCk7dS5TZXF1ZW5jZT1fO3ZhciBXPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobil7dmFyIGk9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmxhYmVsPW4saX1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkKG5ldyB2KFtbbmV3IE8oITEsW1t0aGlzLmxhYmVsLnRleHQsbmV3IEkobmV3IEIuSWRlbnRpZmllclRva2VuKCJfX3JzIikpXV0pLG5ldyBJKG5ldyBCLklkZW50aWZpZXJUb2tlbigiX19ycyIpKV1dKSl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIiMiK3RoaXMubGFiZWwuZ2V0VGV4dCgpfSx0fShoKTt1LlJlY29yZFNlbGVjdG9yPVc7dmFyIFE9ZnVuY3Rpb24obCl7ZnVuY3Rpb24gdChuLGkpe3ZhciBhPWwuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gYS5leHByZXNzaW9uPW4sYS5tYXRjaD1pLGF9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgZShuZXcgZCh0aGlzLm1hdGNoLnNpbXBsaWZ5KCkpLHRoaXMuZXhwcmVzc2lvbi5zaW1wbGlmeSgpKX0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iY2FzZSAiK3RoaXMuZXhwcmVzc2lvbisiIG9mICIrdGhpcy5tYXRjaH0sdH0oaCk7dS5DYXNlQW5hbHlzaXM9UTt2YXIgbmU9ZnVuY3Rpb24obCl7ZnVuY3Rpb24gdChuLGksYSl7dmFyIGY9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBmLmNvbmRpdGlvbj1uLGYuY29uc2VxdWVuY2U9aSxmLmFsdGVybmF0aXZlPWEsZn1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7dmFyIG49bmV3IHYoW1tULHRoaXMuY29uc2VxdWVuY2VdLFt3LHRoaXMuYWx0ZXJuYXRpdmVdXSk7cmV0dXJuIG5ldyBRKHRoaXMuY29uZGl0aW9uLG4pLnNpbXBsaWZ5KCl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuImlmICIrdGhpcy5jb25kaXRpb24rIiB0aGVuICIrdGhpcy5jb25zZXF1ZW5jZSsiIGVsc2UgIit0aGlzLmFsdGVybmF0aXZlfSx0fShoKTt1LkNvbmRpdGlvbmFsPW5lO3ZhciBGPWZ1bmN0aW9uKGwpe2Z1bmN0aW9uIHQobixpKXt2YXIgYT1sLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGEuY29uZGl0aW9uPW4sYS5ib2R5PWksYX1yZXR1cm4gZyh0LGwpLHQucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7dmFyIG49bmV3IEkobmV3IEIuSWRlbnRpZmllclRva2VuKCJfX3dobCIpKSxpPW5ldyBlKG4sbmV3IHgoW10pKSxhPW5ldyBuZSh0aGlzLmNvbmRpdGlvbixuZXcgXyhbdGhpcy5ib2R5LGldKSxuZXcgeChbXSkpLGY9bmV3IHEuVmFsdWVCaW5kaW5nKCEwLG4sbmV3IGQobmV3IHYoW1tuZXcgeChbXSksYV1dKSkpLFM9bmV3IHEuVmFsdWVEZWNsYXJhdGlvbihbXSxbZl0pO3JldHVybiBuZXcgRShTLGkpLnNpbXBsaWZ5KCl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIiggd2hpbGUgIit0aGlzLmNvbmRpdGlvbisiIGRvICIrdGhpcy5ib2R5KyIgKSJ9LHR9KGgpO3UuV2hpbGU9Rjt2YXIgYj1mdW5jdGlvbihsKXtmdW5jdGlvbiB0KG4saSl7dmFyIGE9bC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBhLnBhdHRlcm49bixhLmNvbmRpdGlvbj1pLGF9cmV0dXJuIGcodCxsKSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgcCh0aGlzLnBhdHRlcm4uc2ltcGxpZnkoKSxULHRoaXMuY29uZGl0aW9uLnNpbXBsaWZ5KCkpfSx0LnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24obixpLGEpe3Rocm93IG5ldyBWLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiXHUzMDBDXHUzMENCXHUzMEUzXHVGRjBEXHUzMDAxXHUzMENCXHUzMEUzXHVGRjBEXHUzMDBEIil9LHQucHJvdG90eXBlLnN1YnN1bWVzPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIlBhdHRlcm5zIHdpdGggYSBwYXR0ZXJuIGd1YXJkIGFyZSBub3QgY2hlY2tlZCBmb3IgZXhoYXVzdGl2ZW5lc3MuIil9LHQucHJvdG90eXBlLmNvdmVyPWZ1bmN0aW9uKG4saSl7dGhyb3cgbmV3IFYuUGF0dGVybk1hdGNoRXJyb3IoIlBhdHRlcm5zIHdpdGggYSBwYXR0ZXJuIGd1YXJkIGFyZSBub3QgY2hlY2tlZCBmb3IgZXhoYXVzdGl2ZW5lc3MuIil9LHQucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24obixpKXt0aHJvdyBuZXcgVi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlx1MzAwQ1x1MzBDQlx1MzBFM1x1RkYwRFx1MzAwMVx1MzBDQlx1MzBFM1x1RkYwRFx1MzAwRCIpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIoICIrdGhpcy5wYXR0ZXJuKyIgaWYgIit0aGlzLmNvbmRpdGlvbisiICkifSx0fShoKTt1LlBhdHRlcm5HdWFyZD1ifSw0NjU6KGZlLHUsSyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5nZXRJbml0aWFsU3RhdGU9dm9pZCAwO3ZhciBtPUsoMzY3KSxnPUsoNjk5KSxzPUsoMTA2KSxxPUsoNzU4KSxCPW5ldyBnLkN1c3RvbVR5cGUoInJlYWwiKSxNPW5ldyBnLkN1c3RvbVR5cGUoImJvb2wiKSxWPW5ldyBnLkN1c3RvbVR5cGUoInN0cmluZyIpLEQ9bmV3IGcuQ3VzdG9tVHlwZSgiY2hhciIpO2Z1bmN0aW9uIGgoYyl7cmV0dXJuIG5ldyBnLkZ1bmN0aW9uVHlwZShuZXcgZy5UdXBsZVR5cGUoW2MsY10pLGMpLnNpbXBsaWZ5KCl9ZnVuY3Rpb24gQShjKXtyZXR1cm4gbmV3IGcuRnVuY3Rpb25UeXBlKG5ldyBnLlR1cGxlVHlwZShbYyxjXSksTSkuc2ltcGxpZnkoKX12YXIgST1uZXcgZy5UeXBlVmFyaWFibGUoIidhIiksTz1uZXcgZy5UeXBlVmFyaWFibGUoIicnYiIpLEU9bmV3IGcuVHlwZVZhcmlhYmxlKCInaXciKSxyPW5ldyBnLlR5cGVWYXJpYWJsZSgiJ2lyIiksZT1uZXcgZy5UeXBlVmFyaWFibGUoIidpd3IiKSxvPW5ldyBnLlR5cGVWYXJpYWJsZSgiJ2FueSIpLHk9bmV3IHMuRXhjZXB0aW9uQ29uc3RydWN0b3IoIk1hdGNoIiwwLDAsMCksZD1uZXcgcy5FeGNlcHRpb25Db25zdHJ1Y3RvcigiQmluZCIsMCwwLDEpLHY9bmV3IHMuRXhjZXB0aW9uQ29uc3RydWN0b3IoIkRpdiIsMCwwLDIpLEM9bmV3IHMuRXhjZXB0aW9uQ29uc3RydWN0b3IoIk92ZXJmbG93IiwwLDAsMyk7ZnVuY3Rpb24gRyhjKXtyZXR1cm4gbmV3IGcuVHlwZVZhcmlhYmxlQmluZCgiJ2l3IixjLFtuZXcgZy5DdXN0b21UeXBlKCJpbnQiKSxuZXcgZy5DdXN0b21UeXBlKCJ3b3JkIildKS5wcm9wYWdhdGUoKX1mdW5jdGlvbiBZKGMpe3JldHVybiBuZXcgZy5UeXBlVmFyaWFibGVCaW5kKCInaXIiLGMsW25ldyBnLkN1c3RvbVR5cGUoImludCIpLEJdKS5wcm9wYWdhdGUoKX1mdW5jdGlvbiBKKGMpe3JldHVybiBuZXcgZy5UeXBlVmFyaWFibGVCaW5kKCInaXdyIixjLFtuZXcgZy5DdXN0b21UeXBlKCJpbnQiKSxuZXcgZy5DdXN0b21UeXBlKCJ3b3JkIiksQl0pLnByb3BhZ2F0ZSgpfWZ1bmN0aW9uIHooYyl7cmV0dXJuIG5ldyBnLlR5cGVWYXJpYWJsZUJpbmQoIidhbnkiLGMsW25ldyBnLkN1c3RvbVR5cGUoImludCIpLG5ldyBnLkN1c3RvbVR5cGUoIndvcmQiKSxCLG5ldyBnLkN1c3RvbVR5cGUoInN0cmluZyIpLG5ldyBnLkN1c3RvbVR5cGUoImNoYXIiKV0pLnByb3BhZ2F0ZSgpfXZhciBwPW5ldyBtLlN0YXRlKDAsdm9pZCAwLG5ldyBtLlN0YXRpY0Jhc2lzKHt1bml0Om5ldyBtLlR5cGVJbmZvcm1hdGlvbihuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuQ3VzdG9tVHlwZSgidW5pdCIpLG5ldyBnLlR1cGxlVHlwZShbXSkpLnNpbXBsaWZ5KCksW10sMCwhMCksYm9vbDpuZXcgbS5UeXBlSW5mb3JtYXRpb24obmV3IGcuQ3VzdG9tVHlwZSgiYm9vbCIpLFsidHJ1ZSIsImZhbHNlIl0sMCwhMCksaW50Om5ldyBtLlR5cGVJbmZvcm1hdGlvbihuZXcgZy5DdXN0b21UeXBlKCJpbnQiKSxbXSwwLCEwKSx3b3JkOm5ldyBtLlR5cGVJbmZvcm1hdGlvbihuZXcgZy5DdXN0b21UeXBlKCJ3b3JkIiksW10sMCwhMCkscmVhbDpuZXcgbS5UeXBlSW5mb3JtYXRpb24oQixbXSwwLCExKSxzdHJpbmc6bmV3IG0uVHlwZUluZm9ybWF0aW9uKG5ldyBnLkN1c3RvbVR5cGUoInN0cmluZyIpLFtdLDAsITApLGNoYXI6bmV3IG0uVHlwZUluZm9ybWF0aW9uKG5ldyBnLkN1c3RvbVR5cGUoImNoYXIiKSxbXSwwLCEwKSxsaXN0Om5ldyBtLlR5cGVJbmZvcm1hdGlvbihuZXcgZy5DdXN0b21UeXBlKCJsaXN0IixbSV0pLFsibmlsIiwiOjoiXSwxLCEwKSxhcnJheTpuZXcgbS5UeXBlSW5mb3JtYXRpb24obmV3IGcuQ3VzdG9tVHlwZSgiYXJyYXkiLFtJXSksW10sMSwhMCksdmVjdG9yOm5ldyBtLlR5cGVJbmZvcm1hdGlvbihuZXcgZy5DdXN0b21UeXBlKCJ2ZWN0b3IiLFtJXSksW10sMSwhMCkscmVmOm5ldyBtLlR5cGVJbmZvcm1hdGlvbihuZXcgZy5DdXN0b21UeXBlKCJyZWYiLFtJXSksWyJyZWYiXSwxLCEwKSxleG46bmV3IG0uVHlwZUluZm9ybWF0aW9uKG5ldyBnLkN1c3RvbVR5cGUoImV4biIpLFtdLDAsITEpfSx7ZGl2OltHKGgoRSkpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sbW9kOltHKGgoRSkpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIioiOltKKGgoZSkpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIi8iOltoKEIpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIisiOltKKGgoZSkpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIi0iOltKKGgoZSkpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIjwiOlt6KEEobykpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIjw9IjpbeihBKG8pKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLCI+IjpbeihBKG8pKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLCI+PSI6W3ooQShvKSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSwiPSI6W25ldyBnLlR5cGVWYXJpYWJsZUJpbmQoIicnYiIsbmV3IGcuRnVuY3Rpb25UeXBlKG5ldyBnLlR1cGxlVHlwZShbTyxPXSksTSkpLnNpbXBsaWZ5KCksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSwiPD4iOltuZXcgZy5UeXBlVmFyaWFibGVCaW5kKCInJ2IiLG5ldyBnLkZ1bmN0aW9uVHlwZShuZXcgZy5UdXBsZVR5cGUoW08sT10pLE0pKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sdHJ1ZTpbbmV3IGcuQ3VzdG9tVHlwZSgiYm9vbCIpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUl0sZmFsc2U6W25ldyBnLkN1c3RvbVR5cGUoImJvb2wiKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfQ09OU1RSVUNUT1JdLG5pbDpbbmV3IGcuVHlwZVZhcmlhYmxlQmluZCgiJ2EiLG5ldyBnLkN1c3RvbVR5cGUoImxpc3QiLFtJXSkpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUl0sIjo6IjpbbmV3IGcuVHlwZVZhcmlhYmxlQmluZCgiJ2EiLG5ldyBnLkZ1bmN0aW9uVHlwZShuZXcgZy5UdXBsZVR5cGUoW0ksbmV3IGcuQ3VzdG9tVHlwZSgibGlzdCIsW0ldKV0pLG5ldyBnLkN1c3RvbVR5cGUoImxpc3QiLFtJXSkpKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUl0sTWF0Y2g6W25ldyBnLkN1c3RvbVR5cGUoImV4biIpLG0uSWRlbnRpZmllclN0YXR1cy5FWENFUFRJT05fQ09OU1RSVUNUT1JdLEJpbmQ6W25ldyBnLkN1c3RvbVR5cGUoImV4biIpLG0uSWRlbnRpZmllclN0YXR1cy5FWENFUFRJT05fQ09OU1RSVUNUT1JdLERpdjpbbmV3IGcuQ3VzdG9tVHlwZSgiZXhuIiksbS5JZGVudGlmaWVyU3RhdHVzLkVYQ0VQVElPTl9DT05TVFJVQ1RPUl0sT3ZlcmZsb3c6W25ldyBnLkN1c3RvbVR5cGUoImV4biIpLG0uSWRlbnRpZmllclN0YXR1cy5FWENFUFRJT05fQ09OU1RSVUNUT1JdLCJeIjpbaChWKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLGV4cGxvZGU6W25ldyBnLkZ1bmN0aW9uVHlwZShWLG5ldyBnLkN1c3RvbVR5cGUoImxpc3QiLFtEXSkpLnNpbXBsaWZ5KCksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSxpbXBsb2RlOltuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuQ3VzdG9tVHlwZSgibGlzdCIsW0RdKSxWKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIn4iOltZKG5ldyBnLkZ1bmN0aW9uVHlwZShyLHIpKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLGFiczpbWShuZXcgZy5GdW5jdGlvblR5cGUocixyKSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSxwcmludDpbbmV3IGcuVHlwZVZhcmlhYmxlQmluZCgiJ2EiLG5ldyBnLkZ1bmN0aW9uVHlwZShJLG5ldyBnLlR1cGxlVHlwZShbXSkpKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0scHJpbnRMbjpbbmV3IGcuVHlwZVZhcmlhYmxlQmluZCgiJ2EiLG5ldyBnLkZ1bmN0aW9uVHlwZShJLG5ldyBnLlR1cGxlVHlwZShbXSkpKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIjo9IjpbbmV3IGcuVHlwZVZhcmlhYmxlQmluZCgiJ2EiLG5ldyBnLkZ1bmN0aW9uVHlwZShuZXcgZy5UdXBsZVR5cGUoW25ldyBnLkN1c3RvbVR5cGUoInJlZiIsW0ldKSxJXSksbmV3IGcuVHVwbGVUeXBlKFtdKSkpLnNpbXBsaWZ5KCksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSxyZWY6W25ldyBnLlR5cGVWYXJpYWJsZUJpbmQoIidhIixuZXcgZy5GdW5jdGlvblR5cGUoSSxuZXcgZy5DdXN0b21UeXBlKCJyZWYiLFtJXSkpKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfQ09OU1RSVUNUT1JdLCIhIjpbbmV3IGcuVHlwZVZhcmlhYmxlQmluZCgiJ2EiLG5ldyBnLkZ1bmN0aW9uVHlwZShuZXcgZy5DdXN0b21UeXBlKCJyZWYiLFtJXSksSSkpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV19LHt9LHt9LHt9KSxuZXcgbS5EeW5hbWljQmFzaXMoe3VuaXQ6W10sYm9vbDpbInRydWUiLCJmYWxzZSJdLGludDpbXSx3b3JkOltdLHJlYWw6W10sc3RyaW5nOltdLGNoYXI6W10sbGlzdDpbIm5pbCIsIjo6Il0sYXJyYXk6W10sdmVjdG9yOltdLHJlZjpbInJlZiJdLGV4bjpbXX0se2RpdjpbbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJkaXYiLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUpe3ZhciBUPWMuZ2V0VmFsdWUoIjEiKSxOPWMuZ2V0VmFsdWUoIjIiKTtpZihUIGluc3RhbmNlb2Ygcy5JbnRlZ2VyJiZOIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXJldHVybiBOLnZhbHVlPT09MD9bdi5jb25zdHJ1Y3QoKSwhMCxbXV06W1QuZGl2aWRlKE4pLCExLFtdXTtpZihUIGluc3RhbmNlb2Ygcy5Xb3JkJiZOIGluc3RhbmNlb2Ygcy5Xb3JkKXJldHVybiBOLnZhbHVlPT09MD9bdi5jb25zdHJ1Y3QoKSwhMCxbXV06W1QuZGl2aWRlKE4pLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiZGl2IiBvbiB2YWx1ZSBvZiB0aGUgd3JvbmcgdHlwZSAoJytjLnR5cGVOYW1lKCkrIikuIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLG1vZDpbbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJtb2QiLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUpe3ZhciBUPWMuZ2V0VmFsdWUoIjEiKSxOPWMuZ2V0VmFsdWUoIjIiKTtpZihUIGluc3RhbmNlb2Ygcy5JbnRlZ2VyJiZOIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXJldHVybiBOLnZhbHVlPT09MD9bdi5jb25zdHJ1Y3QoKSwhMCxbXV06W1QubW9kdWxvKE4pLCExLFtdXTtpZihUIGluc3RhbmNlb2Ygcy5Xb3JkJiZOIGluc3RhbmNlb2Ygcy5Xb3JkKXJldHVybiBOLnZhbHVlPT09MD9bdi5jb25zdHJ1Y3QoKSwhMCxbXV06W1QubW9kdWxvKE4pLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAibW9kIiBvbiB2YWx1ZSBvZiB0aGUgd3JvbmcgdHlwZSAoJytjLnR5cGVOYW1lKCkrIikuIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLCIqIjpbbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCIqIixmdW5jdGlvbihjLHcpe2lmKGMgaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlKXt2YXIgVCxOPWMuZ2V0VmFsdWUoIjEiKSwkPWMuZ2V0VmFsdWUoIjIiKTtpZihOIGluc3RhbmNlb2Ygcy5JbnRlZ2VyJiYkIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXJldHVybihUPU4ubXVsdGlwbHkoJCkpLmhhc092ZXJmbG93KCk/W0MuY29uc3RydWN0KCksITAsW11dOltULCExLFtdXTtpZihOIGluc3RhbmNlb2Ygcy5Xb3JkJiYkIGluc3RhbmNlb2Ygcy5Xb3JkKXJldHVybihUPU4ubXVsdGlwbHkoJCkpLmhhc092ZXJmbG93KCk/W0MuY29uc3RydWN0KCksITAsW11dOltULCExLFtdXTtpZihOIGluc3RhbmNlb2Ygcy5SZWFsJiYkIGluc3RhbmNlb2Ygcy5SZWFsKXJldHVybihUPU4ubXVsdGlwbHkoJCkpLmhhc092ZXJmbG93KCk/W0MuY29uc3RydWN0KCksITAsW11dOltULCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiKiIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSwiLyI6W25ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiLyIsZnVuY3Rpb24oYyx3KXtpZihjIGluc3RhbmNlb2Ygcy5SZWNvcmRWYWx1ZSl7dmFyIFQ9Yy5nZXRWYWx1ZSgiMSIpLE49Yy5nZXRWYWx1ZSgiMiIpO2lmKFQgaW5zdGFuY2VvZiBzLlJlYWwmJk4gaW5zdGFuY2VvZiBzLlJlYWwpcmV0dXJuIE4udmFsdWU9PT0wP1t2LmNvbnN0cnVjdCgpLCEwLFtdXTpbVC5kaXZpZGUoTiksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignQ2FsbGVkICIvIiBvbiB2YWx1ZSBvZiB0aGUgd3JvbmcgdHlwZSAoJytjLnR5cGVOYW1lKCkrIikuIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLCIrIjpbbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCIrIixmdW5jdGlvbihjLHcpe2lmKGMgaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlKXt2YXIgVCxOPWMuZ2V0VmFsdWUoIjEiKSwkPWMuZ2V0VmFsdWUoIjIiKTtpZihOIGluc3RhbmNlb2Ygcy5JbnRlZ2VyJiYkIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXJldHVybihUPU4uYWRkKCQpKS5oYXNPdmVyZmxvdygpP1tDLmNvbnN0cnVjdCgpLCEwLFtdXTpbVCwhMSxbXV07aWYoTiBpbnN0YW5jZW9mIHMuV29yZCYmJCBpbnN0YW5jZW9mIHMuV29yZClyZXR1cm4oVD1OLmFkZCgkKSkuaGFzT3ZlcmZsb3coKT9bQy5jb25zdHJ1Y3QoKSwhMCxbXV06W1QsITEsW11dO2lmKE4gaW5zdGFuY2VvZiBzLlJlYWwmJiQgaW5zdGFuY2VvZiBzLlJlYWwpcmV0dXJuKFQ9Ti5hZGQoJCkpLmhhc092ZXJmbG93KCk/W0MuY29uc3RydWN0KCksITAsW11dOltULCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiKyIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSwiLSI6W25ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiLSIsZnVuY3Rpb24oYyx3KXtpZihjIGluc3RhbmNlb2Ygcy5SZWNvcmRWYWx1ZSl7dmFyIFQsTj1jLmdldFZhbHVlKCIxIiksJD1jLmdldFZhbHVlKCIyIik7aWYoTiBpbnN0YW5jZW9mIHMuSW50ZWdlciYmJCBpbnN0YW5jZW9mIHMuSW50ZWdlcilyZXR1cm4oVD1OLmFkZCgkLm5lZ2F0ZSgpKSkuaGFzT3ZlcmZsb3coKT9bQy5jb25zdHJ1Y3QoKSwhMCxbXV06W1QsITEsW11dO2lmKE4gaW5zdGFuY2VvZiBzLldvcmQmJiQgaW5zdGFuY2VvZiBzLldvcmQpcmV0dXJuKFQ9Ti5hZGQoJC5uZWdhdGUoKSkpLmhhc092ZXJmbG93KCk/W0MuY29uc3RydWN0KCksITAsW11dOltULCExLFtdXTtpZihOIGluc3RhbmNlb2Ygcy5SZWFsJiYkIGluc3RhbmNlb2Ygcy5SZWFsKXJldHVybihUPU4uYWRkKCQubmVnYXRlKCkpKS5oYXNPdmVyZmxvdygpP1tDLmNvbnN0cnVjdCgpLCEwLFtdXTpbVCwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdDYWxsZWQgIi0iIG9uIHZhbHVlIG9mIHRoZSB3cm9uZyB0eXBlICgnK2MudHlwZU5hbWUoKSsiKS4iKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIjwiOltuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oIjwiLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUpe3ZhciBUPWMuZ2V0VmFsdWUoIjEiKSxOPWMuZ2V0VmFsdWUoIjIiKTtpZihUIGluc3RhbmNlb2Ygcy5JbnRlZ2VyJiZOIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXJldHVybltuZXcgcy5Cb29sVmFsdWUoVC5jb21wYXJlVG8oTik8MCksITEsW11dO2lmKFQgaW5zdGFuY2VvZiBzLldvcmQmJk4gaW5zdGFuY2VvZiBzLldvcmQpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKTwwKSwhMSxbXV07aWYoVCBpbnN0YW5jZW9mIHMuUmVhbCYmTiBpbnN0YW5jZW9mIHMuUmVhbClyZXR1cm5bbmV3IHMuQm9vbFZhbHVlKFQuY29tcGFyZVRvKE4pPDApLCExLFtdXTtpZihUIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZSYmTiBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKTwwKSwhMSxbXV07aWYoVCBpbnN0YW5jZW9mIHMuQ2hhclZhbHVlJiZOIGluc3RhbmNlb2Ygcy5DaGFyVmFsdWUpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKTwwKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdDYWxsZWQgIjwiIG9uIHZhbHVlIG9mIHRoZSB3cm9uZyB0eXBlICgnK2MudHlwZU5hbWUoKSsiKS4iKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIj4iOltuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oIjwiLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUpe3ZhciBUPWMuZ2V0VmFsdWUoIjEiKSxOPWMuZ2V0VmFsdWUoIjIiKTtpZihUIGluc3RhbmNlb2Ygcy5JbnRlZ2VyJiZOIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXJldHVybltuZXcgcy5Cb29sVmFsdWUoVC5jb21wYXJlVG8oTik+MCksITEsW11dO2lmKFQgaW5zdGFuY2VvZiBzLldvcmQmJk4gaW5zdGFuY2VvZiBzLldvcmQpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKT4wKSwhMSxbXV07aWYoVCBpbnN0YW5jZW9mIHMuUmVhbCYmTiBpbnN0YW5jZW9mIHMuUmVhbClyZXR1cm5bbmV3IHMuQm9vbFZhbHVlKFQuY29tcGFyZVRvKE4pPjApLCExLFtdXTtpZihUIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZSYmTiBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKT4wKSwhMSxbXV07aWYoVCBpbnN0YW5jZW9mIHMuQ2hhclZhbHVlJiZOIGluc3RhbmNlb2Ygcy5DaGFyVmFsdWUpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKT4wKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdDYWxsZWQgIj4iIG9uIHZhbHVlIG9mIHRoZSB3cm9uZyB0eXBlICgnK2MudHlwZU5hbWUoKSsiKS4iKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIjw9IjpbbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCI8IixmdW5jdGlvbihjLHcpe2lmKGMgaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlKXt2YXIgVD1jLmdldFZhbHVlKCIxIiksTj1jLmdldFZhbHVlKCIyIik7aWYoVCBpbnN0YW5jZW9mIHMuSW50ZWdlciYmTiBpbnN0YW5jZW9mIHMuSW50ZWdlcilyZXR1cm5bbmV3IHMuQm9vbFZhbHVlKFQuY29tcGFyZVRvKE4pPD0wKSwhMSxbXV07aWYoVCBpbnN0YW5jZW9mIHMuV29yZCYmTiBpbnN0YW5jZW9mIHMuV29yZClyZXR1cm5bbmV3IHMuQm9vbFZhbHVlKFQuY29tcGFyZVRvKE4pPD0wKSwhMSxbXV07aWYoVCBpbnN0YW5jZW9mIHMuUmVhbCYmTiBpbnN0YW5jZW9mIHMuUmVhbClyZXR1cm5bbmV3IHMuQm9vbFZhbHVlKFQuY29tcGFyZVRvKE4pPD0wKSwhMSxbXV07aWYoVCBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUmJk4gaW5zdGFuY2VvZiBzLlN0cmluZ1ZhbHVlKXJldHVybltuZXcgcy5Cb29sVmFsdWUoVC5jb21wYXJlVG8oTik8PTApLCExLFtdXTtpZihUIGluc3RhbmNlb2Ygcy5DaGFyVmFsdWUmJk4gaW5zdGFuY2VvZiBzLkNoYXJWYWx1ZSlyZXR1cm5bbmV3IHMuQm9vbFZhbHVlKFQuY29tcGFyZVRvKE4pPD0wKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdDYWxsZWQgIjw9IiBvbiB2YWx1ZSBvZiB0aGUgd3JvbmcgdHlwZSAoJytjLnR5cGVOYW1lKCkrIikuIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLCI+PSI6W25ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiPCIsZnVuY3Rpb24oYyx3KXtpZihjIGluc3RhbmNlb2Ygcy5SZWNvcmRWYWx1ZSl7dmFyIFQ9Yy5nZXRWYWx1ZSgiMSIpLE49Yy5nZXRWYWx1ZSgiMiIpO2lmKFQgaW5zdGFuY2VvZiBzLkludGVnZXImJk4gaW5zdGFuY2VvZiBzLkludGVnZXIpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKT49MCksITEsW11dO2lmKFQgaW5zdGFuY2VvZiBzLldvcmQmJk4gaW5zdGFuY2VvZiBzLldvcmQpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKT49MCksITEsW11dO2lmKFQgaW5zdGFuY2VvZiBzLlJlYWwmJk4gaW5zdGFuY2VvZiBzLlJlYWwpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKT49MCksITEsW11dO2lmKFQgaW5zdGFuY2VvZiBzLlN0cmluZ1ZhbHVlJiZOIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZSlyZXR1cm5bbmV3IHMuQm9vbFZhbHVlKFQuY29tcGFyZVRvKE4pPj0wKSwhMSxbXV07aWYoVCBpbnN0YW5jZW9mIHMuQ2hhclZhbHVlJiZOIGluc3RhbmNlb2Ygcy5DaGFyVmFsdWUpcmV0dXJuW25ldyBzLkJvb2xWYWx1ZShULmNvbXBhcmVUbyhOKT49MCksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignQ2FsbGVkICI+PSIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSwiPSI6W25ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiPSIsZnVuY3Rpb24oYyx3KXtpZihjIGluc3RhbmNlb2Ygcy5SZWNvcmRWYWx1ZSl7dmFyIFQ9Yy5nZXRWYWx1ZSgiMSIpLE49Yy5nZXRWYWx1ZSgiMiIpO3JldHVybltuZXcgcy5Cb29sVmFsdWUoVC5lcXVhbHMoTikpLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiPSIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSwiPD4iOltuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oIj0iLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUpe3ZhciBUPWMuZ2V0VmFsdWUoIjEiKSxOPWMuZ2V0VmFsdWUoIjIiKTtyZXR1cm5bbmV3IHMuQm9vbFZhbHVlKCFULmVxdWFscyhOKSksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignQ2FsbGVkICI8PiIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSx0cnVlOltuZXcgcy5Cb29sVmFsdWUoITApLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUl0sZmFsc2U6W25ldyBzLkJvb2xWYWx1ZSghMSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX0NPTlNUUlVDVE9SXSxuaWw6W25ldyBzLlZhbHVlQ29uc3RydWN0b3IoIm5pbCIpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUl0sIjo6IjpbbmV3IHMuVmFsdWVDb25zdHJ1Y3RvcigiOjoiLDEpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUl0sTWF0Y2g6W3ksbS5JZGVudGlmaWVyU3RhdHVzLkVYQ0VQVElPTl9DT05TVFJVQ1RPUl0sQmluZDpbZCxtLklkZW50aWZpZXJTdGF0dXMuRVhDRVBUSU9OX0NPTlNUUlVDVE9SXSxEaXY6W3YsbS5JZGVudGlmaWVyU3RhdHVzLkVYQ0VQVElPTl9DT05TVFJVQ1RPUl0sT3ZlcmZsb3c6W0MsbS5JZGVudGlmaWVyU3RhdHVzLkVYQ0VQVElPTl9DT05TVFJVQ1RPUl0sIl4iOltuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oIl4iLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUpe3ZhciBUPWMuZ2V0VmFsdWUoIjEiKSxOPWMuZ2V0VmFsdWUoIjIiKTtpZihUIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZSYmTiBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUpcmV0dXJuW1QuY29uY2F0KE4pLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiXiIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSxleHBsb2RlOltuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImV4cGxvZGUiLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUpcmV0dXJuW2MuZXhwbG9kZSgpLCExLFtdXTt0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiZXhwbG9kZSIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSxpbXBsb2RlOltuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImltcGxvZGUiLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuQ29uc3RydWN0ZWRWYWx1ZSlyZXR1cm5bcy5TdHJpbmdWYWx1ZS5pbXBsb2RlKGMpLCExLFtdXTt0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiaW1wbG9kZSIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSwifiI6W25ldyBzLlByZWRlZmluZWRGdW5jdGlvbigifiIsZnVuY3Rpb24oYyx3KXt2YXIgVDtpZihjIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXJldHVybihUPWMubmVnYXRlKCkpLmhhc092ZXJmbG93KCk/W0MuY29uc3RydWN0KCksITAsW11dOltULCExLFtdXTtpZihjIGluc3RhbmNlb2Ygcy5SZWFsKXJldHVybihUPWMubmVnYXRlKCkpLmhhc092ZXJmbG93KCk/W0MuY29uc3RydWN0KCksITAsW11dOltULCExLFtdXTt0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAifiIgb24gc29tZXRoaW5nIHdlaXJkLicpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXSxhYnM6W25ldyBzLlByZWRlZmluZWRGdW5jdGlvbigifiIsZnVuY3Rpb24oYyx3KXt2YXIgVDtpZihjIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXJldHVybiBjLnZhbHVlPj0wP1tjLCExLFtdXTooVD1jLm5lZ2F0ZSgpKS5oYXNPdmVyZmxvdygpP1tDLmNvbnN0cnVjdCgpLCEwLFtdXTpbVCwhMSxbXV07aWYoYyBpbnN0YW5jZW9mIHMuUmVhbClyZXR1cm4gYy52YWx1ZT49MD9bYywhMSxbXV06KFQ9Yy5uZWdhdGUoKSkuaGFzT3ZlcmZsb3coKT9bQy5jb25zdHJ1Y3QoKSwhMCxbXV06W1QsITEsW11dO3Rocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignQ2FsbGVkICJ+IiBvbiBzb21ldGhpbmcgd2VpcmQuJyl9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLHByaW50OltuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oInByaW50IixmdW5jdGlvbihjLHcpe3ZhciBUPVtdO3JldHVybiBjIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZT9ULnB1c2gobmV3IHEuV2FybmluZygtMixjLnZhbHVlKSk6VC5wdXNoKG5ldyBxLldhcm5pbmcoLTIsYy50b1N0cmluZyh2b2lkIDAsMWUxOCkpKSxbbmV3IHMuUmVjb3JkVmFsdWUsITEsVF19KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLHByaW50TG46W25ldyBzLlByZWRlZmluZWRGdW5jdGlvbigicHJpbnRMbiIsZnVuY3Rpb24oYyx3KXt2YXIgVD1bXTtyZXR1cm4gYyBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWU/VC5wdXNoKG5ldyBxLldhcm5pbmcoLTIsYy52YWx1ZStgCmApKTpULnB1c2gobmV3IHEuV2FybmluZygtMixjLnRvU3RyaW5nKHZvaWQgMCwxZTE4KStgCmApKSxbbmV3IHMuUmVjb3JkVmFsdWUsITEsVF19KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLCI6PSI6W25ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiOj0iLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUpe3ZhciBUPWMuZ2V0VmFsdWUoIjEiKSxOPWMuZ2V0VmFsdWUoIjIiKTtpZihUIGluc3RhbmNlb2Ygcy5SZWZlcmVuY2VWYWx1ZSlyZXR1cm4gdy5tb2RpZmlhYmxlLnNldENlbGwoVC5hZGRyZXNzLE4pLFtuZXcgcy5SZWNvcmRWYWx1ZSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdDYWxsZWQgIjo9IiBvbiB2YWx1ZSBvZiB0aGUgd3JvbmcgdHlwZSAoJytjLnR5cGVOYW1lKCkrIikuIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEVdLHJlZjpbbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJyZWYiLGZ1bmN0aW9uKGMsdyl7cmV0dXJuW3cubW9kaWZpYWJsZS5zZXROZXdDZWxsKGMpLCExLFtdXX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRV0sIiEiOltuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oIiEiLGZ1bmN0aW9uKGMsdyl7aWYoYyBpbnN0YW5jZW9mIHMuUmVmZXJlbmNlVmFsdWUpe3ZhciBUPXcubW9kaWZpYWJsZS5nZXRDZWxsKGMuYWRkcmVzcyk7aWYoVD09PXZvaWQgMCl0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIk5la28tc2VtcGFpLCBJIHRoaW5rIHRoYXQgSSBjcmFzaGVkLiBXaGF0IHNoYWxsIEkgZG8gbm93PyIpO3JldHVybltULCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0NhbGxlZCAiISIgb24gdmFsdWUgb2YgdGhlIHdyb25nIHR5cGUgKCcrYy50eXBlTmFtZSgpKyIpLiIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFXX0se30se30se30pLFswLHt9XSw0LFswLG5ldyBNYXBdLHtkaXY6bmV3IG0uSW5maXhTdGF0dXMoITAsNywhMSksbW9kOm5ldyBtLkluZml4U3RhdHVzKCEwLDcsITEpLCIqIjpuZXcgbS5JbmZpeFN0YXR1cyghMCw3LCExKSwiLyI6bmV3IG0uSW5maXhTdGF0dXMoITAsNywhMSksIisiOm5ldyBtLkluZml4U3RhdHVzKCEwLDYsITEpLCItIjpuZXcgbS5JbmZpeFN0YXR1cyghMCw2LCExKSwiPCI6bmV3IG0uSW5maXhTdGF0dXMoITAsNCwhMSksIj4iOm5ldyBtLkluZml4U3RhdHVzKCEwLDQsITEpLCI8PSI6bmV3IG0uSW5maXhTdGF0dXMoITAsNCwhMSksIj49IjpuZXcgbS5JbmZpeFN0YXR1cyghMCw0LCExKSwiOjoiOm5ldyBtLkluZml4U3RhdHVzKCEwLDUsITApLCI9IjpuZXcgbS5JbmZpeFN0YXR1cyghMCw0LCExKSwiPD4iOm5ldyBtLkluZml4U3RhdHVzKCEwLDQsITEpLCI6PSI6bmV3IG0uSW5maXhTdGF0dXMoITAsMywhMSksIl4iOm5ldyBtLkluZml4U3RhdHVzKCEwLDYsITEpfSx7TWF0Y2g6MSxCaW5kOjEsRGl2OjEsT3ZlcmZsb3c6MSxpbnQ6MSxyZWFsOjEsc3RyaW5nOjEsY2hhcjoxLHVuaXQ6MSx3b3JkOjEsbGlzdDoxLGJvb2w6MX0pO3UuZ2V0SW5pdGlhbFN0YXRlPWZ1bmN0aW9uKGMpe2M9PT12b2lkIDAmJihjPXt9KTt2YXIgdz1wLmdldE5lc3RlZFN0YXRlKCk7cmV0dXJuIGMucmVhbEVxdWFsaXR5PT09ITAmJncuc2V0U3RhdGljVHlwZSgicmVhbCIsQixbXSwwLCEwKSx3fX0sNDAzOihmZSx1LEspPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHUubGV4PXUubGV4U3RyZWFtPXUubmV4dFRva2VuPXUubGV4TG9uZ0lkZW50aWZpZXJPcktleXdvcmQ9dS5sZXhJZGVudGlmaWVyT3JLZXl3b3JkPXUubGV4Q2hhcmFjdGVyPXUubGV4U3RyaW5nPXUubGV4TnVtYmVyPXUubGV4Q29tbWVudD11LmlzTnVtYmVyPXUuaXNXaGl0ZXNwYWNlPXUuaXNTeW1ib2xpYz11LmlzQWxwaGFudW1lcmljPXUucmVzb2x2ZVVuaWNvZGVUeXBlVmFyaWFibGU9dS5yZXNvbHZlVW5pY29kZUtleXdvcmQ9dm9pZCAwO3ZhciBtPUsoNzU4KSxnPUsoNTM0KSxzPUsoMTA2KSxxPW5ldyBTZXQoWyJhYnN0eXBlIiwiYW5kIiwiYW5kYWxzbyIsImFzIiwiY2FzZSIsImRhdGF0eXBlIiwiZG8iLCJlbHNlIiwiZW5kIiwiZXhjZXB0aW9uIiwiZm4iLCJmdW4iLCJoYW5kbGUiLCJpZiIsImluIiwiaW5maXgiLCJpbmZpeHIiLCJsZXQiLCJsb2NhbCIsIm5vbmZpeCIsIm9mIiwib3AiLCJvcGVuIiwib3JlbHNlIiwicmFpc2UiLCJyZWMiLCJ0aGVuIiwidHlwZSIsInZhbCIsIndpdGgiLCJ3aXRodHlwZSIsIndoaWxlIiwiKCIsIikiLCJbIiwiXSIsInsiLCJ9IiwiLCIsIjoiLCI7IiwiLi4uIiwiXyIsInwiLCI9IiwiPT4iLCItPiIsIiMiLCJlcXR5cGUiLCJmdW5jdG9yIiwic2lnbmF0dXJlIiwic3RydWN0IiwiaW5jbHVkZSIsInNoYXJpbmciLCJzdHJ1Y3R1cmUiLCJ3aGVyZSIsInNpZyIsIjo+Il0pLEI9bmV3IFNldChbIiEiLCIlIiwiJiIsIiQiLCIjIiwiKyIsIi0iLCIvIiwiOiIsIjwiLCI9IiwiPiIsIj8iLCJAIiwiXFwiLCJ+IiwiYCIsIl4iLCJ8IiwiKiJdKSxNPW5ldyBNYXAoW1siXHUyMTkyIiwiLT4iXSxbIlx1MDM5QiIsImZuIl1dKSxWPW5ldyBNYXAoW1siXHUwM0IxIiwiJ2EiXSxbIlx1MDNCMiIsIidiIl0sWyJcdTAzQjMiLCInYyJdLFsiXHUwM0I0IiwiJ2QiXSxbIlx1MDNCNSIsIidlIl0sWyJcdTAzQjYiLCInZiJdLFsiXHUwM0I3IiwiJ2ciXSxbIlx1MDNCOCIsIidoIl0sWyJcdTAzQjkiLCInaSJdLFsiXHUwM0JBIiwiJ2siXSxbIlx1MDNCQiIsIidsIl0sWyJcdTAzQkMiLCInbSJdLFsiXHUwM0JEIiwiJ24iXSxbIlx1MDNCRSIsIidqIl0sWyJcdTAzQkYiLCInbyJdLFsiXHUwM0MwIiwiJ3AiXSxbIlx1MDNDMSIsIidyIl0sWyJcdTAzQzMiLCIncyJdLFsiXHUwM0M0IiwiJ3QiXSxbIlx1MDNDNSIsIid1Il0sWyJcdTAzQzYiLCIndiJdLFsiXHUwM0M3IiwiJ3giXSxbIlx1MDNDOCIsIidxIl0sWyJcdTAzQzkiLCIndyJdXSk7ZnVuY3Rpb24gRChwKXtyZXR1cm4gcCE9PXZvaWQgMCYmTS5oYXMocCk/TS5nZXQocCk6cH1mdW5jdGlvbiBoKHApe3JldHVybiBwIT09dm9pZCAwJiZWLmhhcyhwKT9WLmdldChwKTpwfWZ1bmN0aW9uIEEocCxjKXtpZihjPT09dm9pZCAwJiYoYz17fSkscD09PXZvaWQgMClyZXR1cm4hMTtpZihwPj0iYSImJnA8PSJ6Inx8cD49IkEiJiZwPD0iWiJ8fHA+PSIwIiYmcDw9IjkifHxwPT09IicifHxwPT09Il8iKXJldHVybiEwO2lmKGMuYWxsb3dVbmljb2RlPT09ITApe2lmKEIuaGFzKHApfHxxLmhhcyhwKXx8cD09PSIuIilyZXR1cm4hMTtpZihjLmFsbG93VW5pY29kZVR5cGVWYXJpYWJsZXMhPT0hMHx8aChwKT09PXApcmV0dXJuL15bXFNdJC91LnRlc3QocCl9cmV0dXJuITF9ZnVuY3Rpb24gSShwLGMpe3JldHVybiBwIT09dm9pZCAwJiZCLmhhcyhwKX1mdW5jdGlvbiBPKHAsYyl7cmV0dXJuIHAhPT12b2lkIDAmJihwPT09IiAifHxwPT09IgkifHxwPT09YApgfHxwPT09IlxmIil9ZnVuY3Rpb24gRShwLGMsdyl7cmV0dXJuIHAhPT12b2lkIDAmJihwPj0iMCImJnA8PSI5Inx8YyYmKHA+PSJhIiYmcDw9ImYifHxwPj0iQSImJnA8PSJGIikpfWZ1bmN0aW9uIHIocCl7Zm9yKHZhciBjPSIiO08ocC5wZWVrKCkpOyljKz1wLm5leHQoKTtyZXR1cm4gY31mdW5jdGlvbiBlKHAsYyl7dmFyIHc9IiI7aWYocC5wZWVrKCk9PT0iKCImJnAucGVlaygxKT09PSIqIil7dys9cC5uZXh0KCkrcC5uZXh0KCk7Zm9yKHZhciBUPTE7VD4wOyl7dmFyIE49IiIrcC5wZWVrKCkrcC5wZWVrKDEpO2lmKHAucGVlaygpPT09dm9pZCAwfHxwLnBlZWsoMSk9PT12b2lkIDApdGhyb3cgbmV3IG0uSW5jb21wbGV0ZUVycm9yKCJBbmQgaXQncyBqdXN0IG5vdCBlbm91Z2guIik7Tj09PSIoKiI/KCsrVCx3Kz1wLm5leHQoKSk6Tj09PSIqKSImJigtLVQsdys9cC5uZXh0KCkpLHcrPXAubmV4dCgpfXJldHVybiBuZXcgZy5Db21tZW50VG9rZW4odyl9dGhyb3cgbmV3IG0uSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJUaGF0IHdhcyBhIGJhZCBjb21tZW50Li4uIil9ZnVuY3Rpb24gbyhwLGMsdyl7dz09PXZvaWQgMCYmKHc9LTEpO2Zvcih2YXIgVD0iIjtFKHAucGVlaygpLGMpJiZULmxlbmd0aCE9PXc7KVQrPXAubmV4dCgpO3JldHVybiBUfWZ1bmN0aW9uIHkocCxjLHcsVCxOKXtpZih3PT09dm9pZCAwJiYodz0hMSksVD09PXZvaWQgMCYmKFQ9ITEpLE49PT12b2lkIDAmJihOPSExKSx3JiZUKXRocm93IG5ldyBtLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiVGhlcmUgaXMgbm8gc3VjaCB0aGluZyBhcyBhIHJlYWwgd29yZC4iKTtpZih3KXJldHVybiBuZXcgZy5SZWFsQ29uc3RhbnRUb2tlbihwLHBhcnNlRmxvYXQoYykpO3ZhciAkPXBhcnNlSW50KGMsTj8xNjoxMCk7aWYoJD5zLk1BWElOVCl0aHJvdyBuZXcgbS5MZXhlckVycm9yKCciJyskK2AiLCB3aG9hLCBpdCdzIG92ZXIgImArcy5NQVhJTlQrJyIuJyk7aWYoJDxzLk1JTklOVCl0aHJvdyBuZXcgbS5MZXhlckVycm9yKCciJyskK2AiLCB3aG9hLCBpdCdzIHVuZGVyICJgK3MuTUlOSU5UKyciLicpO2lmKFQpcmV0dXJuIG5ldyBnLldvcmRDb25zdGFudFRva2VuKHAsJCk7dmFyIEg9cC5jaGFyQXQoMCk7cmV0dXJuIEUoSCwhMSkmJkghPT0iMCI/bmV3IGcuTnVtZXJpY1Rva2VuKHAsJCk6bmV3IGcuSW50ZWdlckNvbnN0YW50VG9rZW4ocCwkKX1mdW5jdGlvbiBkKHAsYyl7dmFyIHc9IiIsVD0iIixOPSExLCQ9ITEsSD0hMSxQPSExO2lmKHAucGVlaygpPT09In4iJiYodys9cC5uZXh0KCksUD0hMCxUKz0iLSIpLHAucGVlaygpPT09IjAiJiYocC5wZWVrKDEpPT09IncifHxwLnBlZWsoMSk9PT0ieCIpKXt3Kz1wLm5leHQoKSxwLnBlZWsoKT09PSJ3IiYmKCQ9ITApLHAucGVlaygkPzE6MCk9PT0ieCImJihOPSEwKTt2YXIgeD0kJiZOPzI6MTtpZihQJiYkfHwhRShwLnBlZWsoeCksTikpcmV0dXJuIHkodyxUKz0iMCIsITEsITEsITEpO2Zvcih2YXIgUj0wO1I8eDsrK1Ipdys9cC5uZXh0KCl9dmFyIF89byhwLE4pO2lmKFQrPV8sdys9XyxOfHwkKXJldHVybiB5KHcsVCwhMSwkLE4pO2lmKHAucGVlaygpPT09Ii4iKXtpZighRShwLnBlZWsoMSksITEpKXJldHVybiB5KHcsVCk7dys9cC5wZWVrKCksVCs9cC5uZXh0KCksdys9Xz1vKHAsITEpLFQrPV8sSD0hMH1pZihwLnBlZWsoKT09PSJlInx8cC5wZWVrKCk9PT0iRSIpe2lmKEUocC5wZWVrKDEpLCExKSl3Kz1wLm5leHQoKSxUKz0iZSIsdys9Xz1vKHAsITEpLFQrPV87ZWxzZXtpZihwLnBlZWsoMSkhPT0ifiJ8fCFFKHAucGVlaygyKSwhMSkpcmV0dXJuIHkodyxULEgpO1QrPSJlLSIsdys9cC5uZXh0KCkrcC5uZXh0KCksdys9Xz1vKHAsITEpLFQrPV99SD0hMH1yZXR1cm4geSh3LFQsSCl9ZnVuY3Rpb24gdihwLGMpe2lmKHAubmV4dCgpIT09JyInKXRocm93IG5ldyBtLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiVGhhdCB3YXMgbm90IGEgc3RyaW5nLiIpO2Zvcih2YXIgdz0nIicsVD0iIjtwLnBlZWsoKSE9PSciJzspaWYocC5wZWVrKCk9PT0iXFwiKWlmKHcrPXAubmV4dCgpLE8ocC5wZWVrKCkpKXtpZih3Kz1yKHApLHAucGVlaygpIT09IlxcIil7dmFyIE49cC5uZXh0KCk7dGhyb3cgbmV3IG0uTGV4ZXJFcnJvcignRm91bmQgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyICInK04rJyIgaW4gd2hpdGVzcGFjZSBlc2NhcGUgc2VxdWVuY2UuJyl9dys9cC5uZXh0KCl9ZWxzZSBzd2l0Y2goUj1wLnBlZWsoKSl7Y2FzZSJhIjp3Kz1wLm5leHQoKSxUKz0iXHgwNyI7YnJlYWs7Y2FzZSJiIjp3Kz1wLm5leHQoKSxUKz0iXGIiO2JyZWFrO2Nhc2UidCI6dys9cC5uZXh0KCksVCs9IgkiO2JyZWFrO2Nhc2UibiI6dys9cC5uZXh0KCksVCs9YApgO2JyZWFrO2Nhc2UidiI6dys9cC5uZXh0KCksVCs9Ilx2IjticmVhaztjYXNlImYiOncrPXAubmV4dCgpLFQrPSJcZiI7YnJlYWs7Y2FzZSJyIjp3Kz1wLm5leHQoKSxUKz0iXHIiO2JyZWFrO2Nhc2UnIic6dys9cC5uZXh0KCksVCs9JyInO2JyZWFrO2Nhc2UiXFwiOncrPXAubmV4dCgpLFQrPSJcXCI7YnJlYWs7Y2FzZSJeIjp3Kz1wLm5leHQoKTt2YXIgJD0oeD1wLm5leHQoKSkuY2hhckNvZGVBdCgwKTtpZigkPDY0fHwkPjk1KXRocm93IG5ldyBtLkxleGVyRXJyb3IoJyInK1N0cmluZy5mcm9tQ2hhckNvZGUoJCkrJyIgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsaWQgY29udHJvbCBjaGFyYWN0ZXIuJyk7dys9eCxUKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCQtNjQpO2JyZWFrO2Nhc2UidSI6aWYodys9cC5uZXh0KCksKFA9byhwLCEwLDQpKS5sZW5ndGghPT00KXRocm93IG5ldyBtLkxleGVyRXJyb3IoIkEgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2UgbXVzdCBjb25zaXN0IG9mIGZvdXIgZGlnaXRzLiIpO3ZhciBIPXBhcnNlSW50KFAsMTYpO3crPVAsVCs9U3RyaW5nLmZyb21DaGFyQ29kZShIKTticmVhaztkZWZhdWx0OmlmKCFFKFIsITEpKXRocm93IFI9cC5uZXh0KCksbmV3IG0uTGV4ZXJFcnJvcignSW52YWxpZCBlc2NhcGUgc2VxdWVuY2UgIlxcJytSKyciLicpO3ZhciBQO2lmKChQPW8ocCwhMSwzKSkubGVuZ3RoIT09Myl0aHJvdyBuZXcgbS5MZXhlckVycm9yKCJBIG51bWVyaWMgZXNjYXBlIHNlcXVlbmNlIG11c3QgY29uc2lzdCBvZiB0aHJlZSBkaWdpdHMuIik7SD1wYXJzZUludChQLDEwKSx3Kz1QLFQrPVN0cmluZy5mcm9tQ2hhckNvZGUoSCl9ZWxzZXt2YXIgeCxSPSh4PXAubmV4dCgpKS5jaGFyQ29kZUF0KDApO2lmKHcrPXgsKFI8MzN8fFI+MTI2KSYmUiE9PTMyJiZSPDEyOCl7dmFyIF89IiI7dGhyb3cgUj09PTkmJihfPSIgKHRhYikiKSxSPT09MTAmJihfPSIgKG5ld2xpbmUpIiksUj09PTEzJiYoXz0iIChjYXJyaWFnZSByZXR1cm4pIiksbmV3IG0uTGV4ZXJFcnJvcignQSBzdHJpbmcgbWF5IG5vdCBjb250YWluIHRoZSBjaGFyYWN0ZXIgIicrUisnIicrXysiLiIpfVQrPVN0cmluZy5mcm9tQ2hhckNvZGUoUil9aWYocC5uZXh0KCkhPT0nIicpdGhyb3cgbmV3IG0uSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJUaGlzIHN0cmluZyB3aWxsIG5ldmVyIGVuZC4iKTtyZXR1cm4gbmV3IGcuU3RyaW5nQ29uc3RhbnRUb2tlbih3KyciJyxUKX1mdW5jdGlvbiBDKHAsYyl7aWYocC5uZXh0KCkhPT0iIyIpdGhyb3cgbmV3IG0uSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJUaGF0IHdhcyBub3QgYSBjaGFyYWN0ZXIuIik7dmFyIHc9dihwKTtpZih3LnZhbHVlLmxlbmd0aCE9PTEpdGhyb3cgbmV3IG0uTGV4ZXJFcnJvcignIicrdy52YWx1ZSsnIiBpcyBub3QgYSB2YWxpZCBjaGFyYWN0ZXIgY29uc3RhbnQsIGFzIGl0cyBsZW5ndGggJyt3LnZhbHVlLmxlbmd0aCsiIGlzIGxhcmdlciB0aGFuIHRoZSBleHBlY3RlZCBsZW5ndGggMS4iKTtyZXR1cm4gbmV3IGcuQ2hhcmFjdGVyQ29uc3RhbnRUb2tlbigiIyIrdy50ZXh0LHcudmFsdWUpfWZ1bmN0aW9uIEcocCxjKXtjPT09dm9pZCAwJiYoYz17fSk7dmFyIHcsVD0iIixOPXAucGVlaygpO2lmKGMuYWxsb3dVbmljb2RlVHlwZVZhcmlhYmxlcz09PSEwJiZoKE4pIT09TilyZXR1cm4gcC5uZXh0KCksbmV3IGcuVHlwZVZhcmlhYmxlVG9rZW4oaChOKSk7aWYoYy5hbGxvd1VuaWNvZGU9PT0hMCYmRChOKSE9PU4pcmV0dXJuIHAubmV4dCgpLG5ldyBnLktleXdvcmRUb2tlbihEKE4pKTtpZihJKE4pKXc9STtlbHNle2lmKCFBKE4sYyl8fEUoTiwhMSl8fE49PT0iXyIpe2lmKE4hPT12b2lkIDAmJnEuaGFzKE4pKXJldHVybiBuZXcgZy5LZXl3b3JkVG9rZW4ocC5uZXh0KCkpO2lmKE49PT0iLiImJnAucGVlaygxKT09PSIuIiYmcC5wZWVrKDIpPT09Ii4iKXJldHVybiBwLm5leHQoKSxwLm5leHQoKSxwLm5leHQoKSxuZXcgZy5LZXl3b3JkVG9rZW4oIi4uLiIpO3Rocm93IE49cC5uZXh0KCksbmV3IG0uTGV4ZXJFcnJvcignSW52YWxpZCB0b2tlbiAiJytOKyciIChcXHUnK04uY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSsiKS4iKX13PUF9ZG8gVCs9cC5uZXh0KCk7d2hpbGUodyhwLnBlZWsoKSxjKSk7aWYoVD09PSIqIilyZXR1cm4gbmV3IGcuU3RhclRva2VuO2lmKFQ9PT0iPSIpcmV0dXJuIG5ldyBnLkVxdWFsc1Rva2VuO2lmKHEuaGFzKFQpKXJldHVybiBuZXcgZy5LZXl3b3JkVG9rZW4oVCk7aWYoTj09PSInIil7aWYoVC5jaGFyQXQoMSk9PT0iJyIpe2lmKFQubGVuZ3RoPT09Mil0aHJvdyBuZXcgbS5MZXhlckVycm9yKCdJbnZhbGlkIHR5cGUgdmFyaWFibGUgIicrVCsnIi4gRGVsZXRlIEhlci4nKTtyZXR1cm4gbmV3IGcuRXF1YWxpdHlUeXBlVmFyaWFibGVUb2tlbihUKX1pZihULmxlbmd0aD49MilyZXR1cm4gbmV3IGcuVHlwZVZhcmlhYmxlVG9rZW4oVCk7aWYoYy5hbGxvd1VuaWNvZGVUeXBlVmFyaWFibGVzPT09ITAmJmgocC5wZWVrKCkpIT09cC5wZWVrKCkpcmV0dXJuIG5ldyBnLkVxdWFsaXR5VHlwZVZhcmlhYmxlVG9rZW4oIiciK2gocC5uZXh0KCkpKTt0aHJvdyBuZXcgbS5MZXhlckVycm9yKGBUaGUgbm9pc2UsIGl0IHdvbid0IFNUT1A6IEludmFsaWQgdHlwZSB2YXJpYWJsZSAiYCtUKyciLicpfXJldHVybiBBKE4sYyk/bmV3IGcuQWxwaGFudW1lcmljSWRlbnRpZmllclRva2VuKFQpOm5ldyBnLklkZW50aWZpZXJUb2tlbihUKX1mdW5jdGlvbiBZKHAsYyl7Yz09PXZvaWQgMCYmKGM9e30pO3ZhciB3PUcocCxjKSxUPXcudGV4dDtpZihwLnBlZWsoKT09PSIuIiYmcC5wZWVrKDEpPT09Ii4iJiZwLnBlZWsoMik9PT0iLiJ8fHAucGVlaygpIT09Ii4iKXJldHVybiB3O3ZhciBOPVtdO2Rve2lmKCEodyBpbnN0YW5jZW9mIGcuQWxwaGFudW1lcmljSWRlbnRpZmllclRva2VuKSl0aHJvdyBuZXcgbS5MZXhlckVycm9yKCdFeHBlY3RlZCBhIHN0cnVjdHVyZSBuYW1lIGJlZm9yZSAiLiIgKGdvdCAiJyt3LnR5cGVOYW1lKCkrJyIuJyk7aWYocC5wZWVrKCk9PT0iLiImJnAucGVlaygxKT09PSIuIiYmcC5wZWVrKDIpPT09Ii4iKXJldHVybiBuZXcgZy5Mb25nSWRlbnRpZmllclRva2VuKFQsTix3KTtUKz1wLm5leHQoKSxOLnB1c2godyksVCs9KHc9RyhwLGMpKS50ZXh0fXdoaWxlKHAucGVlaygpPT09Ii4iKTtpZighKHcgaW5zdGFuY2VvZiBnLklkZW50aWZpZXJUb2tlbnx8dyBpbnN0YW5jZW9mIGcuU3RhclRva2VuKXx8dyBpbnN0YW5jZW9mIGcuVHlwZVZhcmlhYmxlVG9rZW4pdGhyb3cgbmV3IG0uTGV4ZXJFcnJvcignIicrdy50ZXh0KyciIGlzIG5vdCBhbGxvd2VkIGluIGEgbG9uZyBpZGVudGlmaWVyLicpO3JldHVybiBuZXcgZy5Mb25nSWRlbnRpZmllclRva2VuKFQsTix3KX1mdW5jdGlvbiBKKHAsYyl7aWYoYz09PXZvaWQgMCYmKGM9e30pLHIocCksIXAuZW9zKCkpcmV0dXJuIEUocC5wZWVrKCksITEpfHxwLnBlZWsoKT09PSJ+IiYmRShwLnBlZWsoMSksITEpP2QocCk6cC5wZWVrKCk9PT0nIic/dihwKTpwLnBlZWsoKT09PSIjIiYmcC5wZWVrKDEpPT09JyInP0MocCk6cC5wZWVrKCk9PT0iKCImJnAucGVlaygxKT09PSIqIj9lKHApOlkocCxjKX1mdW5jdGlvbiB6KHAsYyl7Yz09PXZvaWQgMCYmKGM9e30pO2Zvcih2YXIgdz1bXTshcC5lb3MoKTspe3ZhciBUPUoocCxjKTtpZihUPT09dm9pZCAwKWJyZWFrO2MuYWxsb3dDb21tZW50VG9rZW4hPT0hMCYmVCBpbnN0YW5jZW9mIGcuQ29tbWVudFRva2VufHx3LnB1c2goVCl9cmV0dXJuIHd9dS5yZXNvbHZlVW5pY29kZUtleXdvcmQ9RCx1LnJlc29sdmVVbmljb2RlVHlwZVZhcmlhYmxlPWgsdS5pc0FscGhhbnVtZXJpYz1BLHUuaXNTeW1ib2xpYz1JLHUuaXNXaGl0ZXNwYWNlPU8sdS5pc051bWJlcj1FLHUubGV4Q29tbWVudD1lLHUubGV4TnVtYmVyPWQsdS5sZXhTdHJpbmc9dix1LmxleENoYXJhY3Rlcj1DLHUubGV4SWRlbnRpZmllck9yS2V5d29yZD1HLHUubGV4TG9uZ0lkZW50aWZpZXJPcktleXdvcmQ9WSx1Lm5leHRUb2tlbj1KLHUubGV4U3RyZWFtPXosdS5sZXg9ZnVuY3Rpb24ocCxjKXtjPT09dm9pZCAwJiYoYz17fSk7dmFyIHc9MDtyZXR1cm4geih7cGVlazpmdW5jdGlvbihUKXtpZihUPT09dm9pZCAwJiYoVD0wKSwhKHcrVD49cC5sZW5ndGgpKXJldHVybiBwLmNoYXJBdCh3K1QpfSxuZXh0OmZ1bmN0aW9uKCl7aWYodz49cC5sZW5ndGgpdGhyb3cgbmV3IG0uSW5jb21wbGV0ZUVycm9yKCJcdTI2NkEgRGF+YW5nbywgZGFuZ28sIGRhbmdvLCBkYW5nbywgZGF+YW5nbyBkYWlrYXpva3V+IFx1MjY2QSIpO3JldHVybiB3KysscC5jaGFyQXQody0xKX0sZW9zOmZ1bmN0aW9uKCl7cmV0dXJuIHc+PXAubGVuZ3RofX0sYyl9fSw1MTk6ZnVuY3Rpb24oZmUsdSxLKXt2YXIgbT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oeSxkLHYsQyl7Qz09PXZvaWQgMCYmKEM9diksT2JqZWN0LmRlZmluZVByb3BlcnR5KHksQyx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZFt2XX19KX06ZnVuY3Rpb24oeSxkLHYsQyl7Qz09PXZvaWQgMCYmKEM9dikseVtDXT1kW3ZdfSksZz10aGlzJiZ0aGlzLl9fZXhwb3J0U3Rhcnx8ZnVuY3Rpb24oeSxkKXtmb3IodmFyIHYgaW4geSl2PT09ImRlZmF1bHQifHxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCx2KXx8bShkLHksdil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LmdldEZpcnN0U3RhdGU9dS5nZXRBdmFpbGFibGVNb2R1bGVzPXUuaW50ZXJwcmV0PXUuVmVyc2lvbj11LlZhbHVlcz11LlR5cGVzPXUuVG9rZW5zPXUuRXhwcmVzc2lvbnM9dS5FcnJvcnM9dS5EZWNsYXJhdGlvbnM9dS5FdmFsdWF0b3I9dS5QYXJzZXI9dS5MZXhlcj12b2lkIDA7dmFyIHM9Syg0NjUpLHE9SygxOTcpLEI9Syg3NTgpLE09Syg0MDMpO3UuTGV4ZXI9TTt2YXIgVj1LKDIxNSk7dS5QYXJzZXI9Vjt2YXIgRD1LKDg1OSk7dS5FdmFsdWF0b3I9RDt2YXIgaD1LKDY1NSk7dS5EZWNsYXJhdGlvbnM9aDt2YXIgQT1LKDc1OCk7dS5FcnJvcnM9QTt2YXIgST1LKDQ5NCk7dS5FeHByZXNzaW9ucz1JO3ZhciBPPUsoNTM0KTt1LlRva2Vucz1PO3ZhciBFPUsoNjk5KTt1LlR5cGVzPUU7dmFyIHI9SygxMDYpO3UuVmFsdWVzPXI7dmFyIGU9Syg0MTIpO2Z1bmN0aW9uIG8oKXt2YXIgeT1bXTtmb3IodmFyIGQgaW4gcS5TVERMSUIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHEuU1RETElCLGQpJiZkWzBdIT09Il8iJiZ5LnB1c2goZCk7cmV0dXJuIHl9dS5WZXJzaW9uPWUsZyhLKDM2NyksdSksdS5pbnRlcnByZXQ9ZnVuY3Rpb24oeSxkLHYpe2Q9PT12b2lkIDAmJihkPXMuZ2V0SW5pdGlhbFN0YXRlKCkpLHY9PT12b2lkIDAmJih2PXthbGxvd1N1Y2Nlc3Nvck1MOiExLGRpc2FibGVFbGFib3JhdGlvbjohMSxhbGxvd1ZlY3RvcjohMCxzdHJpY3RNb2RlOiEwLHJlYWxFcXVhbGl0eTohMX0pO3ZhciBDPWQuZ2V0TmVzdGVkU3RhdGUoKSxHPU0ubGV4KHksdiksWT1WLnBhcnNlKEcsQyx2KTtpZihZPVkuc2ltcGxpZnkoKSxDPWQuZ2V0TmVzdGVkU3RhdGUoKSx2LmRpc2FibGVFbGFib3JhdGlvbj09PSEwKXt2YXIgSj1ELmV2YWx1YXRlKGQuZ2V0TmVzdGVkU3RhdGUoKSxZKTtpZihKPT09dm9pZCAwfHxKLm5ld1N0YXRlPT09dm9pZCAwKXRocm93IG5ldyBCLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiSG93IGlzIHRoaXMgdW5kZWZpbmVkPyIpO3JldHVybntzdGF0ZTpKLm5ld1N0YXRlLGV2YWx1YXRpb25FcnJvcmVkOkouaGFzVGhyb3duLGVycm9yOkoudmFsdWUsd2FybmluZ3M6Si5uZXdTdGF0ZS5nZXRXYXJuaW5ncygpfX12YXIgej1ZLmVsYWJvcmF0ZShDLG5ldyBNYXAsIicqdDAiLG5ldyBNYXAsITAsdik7aWYoQz16WzBdLHYuZGlzYWJsZUV2YWx1YXRpb249PT0hMClyZXR1cm57c3RhdGU6QyxldmFsdWF0aW9uRXJyb3JlZDohMSxlcnJvcjp2b2lkIDAsd2FybmluZ3M6elsxXX07dmFyIHA9RC5ldmFsdWF0ZShkLmdldE5lc3RlZFN0YXRlKCksWSk7aWYocD09PXZvaWQgMHx8cC5uZXdTdGF0ZT09PXZvaWQgMCl0aHJvdyBuZXcgQi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkhvdyBpcyB0aGlzIHVuZGVmaW5lZD8iKTtmb3IodmFyIGM9MDtjPHpbMV0ubGVuZ3RoOysrYylwLm5ld1N0YXRlLmFkZFdhcm5pbmcoelsxXVtjXSk7aWYocC5oYXNUaHJvd24pcmV0dXJue3N0YXRlOnAubmV3U3RhdGUsZXZhbHVhdGlvbkVycm9yZWQ6ITAsZXJyb3I6cC52YWx1ZSx3YXJuaW5nczpwLm5ld1N0YXRlLmdldFdhcm5pbmdzKCl9O2Zvcih2YXIgdz1wLm5ld1N0YXRlO3cuaWQ+ZC5pZDspe2lmKHcuZHluYW1pY0Jhc2lzIT09dm9pZCAwKXtmb3IodmFyIGMgaW4gdy5mcmVlVHlwZVZhcmlhYmxlcz1DLmdldFR5cGVWYXJpYWJsZUJpbmRzKHcuaWQpLHcuZHluYW1pY0Jhc2lzLnZhbHVlRW52aXJvbm1lbnQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHcuZHluYW1pY0Jhc2lzLnZhbHVlRW52aXJvbm1lbnQsYykmJihUPUMuZ2V0U3RhdGljVmFsdWUoYyx3LmlkKSkhPT12b2lkIDAmJncuc2V0U3RhdGljVmFsdWUoYyxUWzBdLFRbMV0pO2Zvcih2YXIgYyBpbiB3LmR5bmFtaWNCYXNpcy50eXBlRW52aXJvbm1lbnQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHcuZHluYW1pY0Jhc2lzLnR5cGVFbnZpcm9ubWVudCxjKSYmKFQ9Qy5nZXRTdGF0aWNUeXBlKGMsdy5pZCkpIT09dm9pZCAwJiZ3LnNldFN0YXRpY1R5cGUoYyxULnR5cGUsVC5jb25zdHJ1Y3RvcnMsVC5hcml0eSxULmFsbG93c0VxdWFsaXR5KTtmb3IodmFyIGMgaW4gdy5keW5hbWljQmFzaXMuc3RydWN0dXJlRW52aXJvbm1lbnQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHcuZHluYW1pY0Jhc2lzLnN0cnVjdHVyZUVudmlyb25tZW50LGMpJiYoVD1DLmdldFN0YXRpY1N0cnVjdHVyZShjLHcuaWQpKSE9PXZvaWQgMCYmdy5zZXRTdGF0aWNTdHJ1Y3R1cmUoYyxUKTtmb3IodmFyIGMgaW4gdy5keW5hbWljQmFzaXMuc2lnbmF0dXJlRW52aXJvbm1lbnQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHcuZHluYW1pY0Jhc2lzLnNpZ25hdHVyZUVudmlyb25tZW50LGMpJiYoVD1DLmdldFN0YXRpY1NpZ25hdHVyZShjLHcuaWQpKSE9PXZvaWQgMCYmdy5zZXRTdGF0aWNTaWduYXR1cmUoYyxUKTtmb3IodmFyIGMgaW4gdy5keW5hbWljQmFzaXMuZnVuY3RvckVudmlyb25tZW50KXt2YXIgVDtPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwody5keW5hbWljQmFzaXMuZnVuY3RvckVudmlyb25tZW50LGMpJiYoVD1DLmdldFN0YXRpY0Z1bmN0b3IoYyx3LmlkKSkhPT12b2lkIDAmJncuc2V0U3RhdGljRnVuY3RvcihjLFtUWzBdLFRbMV0sVFsyXV0sVFszXSl9fWlmKEMucGFyZW50PT09dm9pZCAwKWJyZWFrO2Zvcih3PXcucGFyZW50O0MuaWQ+dy5pZCYmQy5wYXJlbnQhPT12b2lkIDA7KUM9Qy5wYXJlbnR9cmV0dXJue3N0YXRlOnAubmV3U3RhdGUsZXZhbHVhdGlvbkVycm9yZWQ6ITEsZXJyb3I6cC52YWx1ZSx3YXJuaW5nczpwLm5ld1N0YXRlLmdldFdhcm5pbmdzKCl9fSx1LmdldEF2YWlsYWJsZU1vZHVsZXM9byx1LmdldEZpcnN0U3RhdGU9ZnVuY3Rpb24oeSxkKXtpZih5PT09dm9pZCAwJiYoeT1vKCkpLGQ9PT12b2lkIDAmJihkPXt9KSxkLm5vTW9kdWxlcz09PSEwKXJldHVybiBzLmdldEluaXRpYWxTdGF0ZShkKTtmb3IodmFyIHY9cS5sb2FkTW9kdWxlKHMuZ2V0SW5pdGlhbFN0YXRlKGQpLCJfX0Jhc2UiLGQpLEM9MCxHPXk7QzxHLmxlbmd0aDtDKyspe3ZhciBZPUdbQ107dj1xLmxvYWRNb2R1bGUodixZLGQpfXJldHVybiB2fX0sNjc3OmZ1bmN0aW9uKGZlLHUsSyl7dmFyIG0sZz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KG09ZnVuY3Rpb24oRixiKXtyZXR1cm4obT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24obCx0KXtsLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24obCx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGxbbl09dFtuXSl9KShGLGIpfSxmdW5jdGlvbihGLGIpe2lmKHR5cGVvZiBiIT0iZnVuY3Rpb24iJiZiIT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKGIpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIGwoKXt0aGlzLmNvbnN0cnVjdG9yPUZ9bShGLGIpLEYucHJvdG90eXBlPWI9PT1udWxsP09iamVjdC5jcmVhdGUoYik6KGwucHJvdG90eXBlPWIucHJvdG90eXBlLG5ldyBsKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LlR5cGVBbGlhc1NwZWNpZmljYXRpb249dS5TaGFyaW5nU3BlY2lmaWNhdGlvbj11LlNlcXVlbnRpYWxTcGVjaWZpY2F0aW9uPXUuRW1wdHlTcGVjaWZpY2F0aW9uPXUuSW5jbHVkZVNwZWNpZmljYXRpb249dS5TdHJ1Y3R1cmVTcGVjaWZpY2F0aW9uPXUuRXhjZXB0aW9uU3BlY2lmaWNhdGlvbj11LkRhdGF0eXBlUmVwbGljYXRpb25TcGVjaWZpY2F0aW9uPXUuRGF0YXR5cGVTcGVjaWZpY2F0aW9uPXUuRXF1YWxpdHlUeXBlU3BlY2lmaWNhdGlvbj11LlR5cGVTcGVjaWZpY2F0aW9uPXUuVmFsdWVTcGVjaWZpY2F0aW9uPXUuU3BlY2lmaWNhdGlvbj11LkZ1bmN0b3JCaW5kaW5nPXUuU2lnbmF0dXJlQmluZGluZz11LlN0cnVjdHVyZUJpbmRpbmc9dS5GdW5jdG9yRGVjbGFyYXRpb249dS5TaWduYXR1cmVEZWNsYXJhdGlvbj11LlN0cnVjdHVyZURlY2xhcmF0aW9uPXUuVHlwZVJlYWxpc2F0aW9uPXUuU2lnbmF0dXJlSWRlbnRpZmllcj11LlNpZ25hdHVyZUV4cHJlc3Npb249dS5Mb2NhbERlY2xhcmF0aW9uU3RydWN0dXJlRXhwcmVzc2lvbj11LkZ1bmN0b3JBcHBsaWNhdGlvbj11Lk9wYXF1ZUNvbnN0cmFpbnQ9dS5UcmFuc3BhcmVudENvbnN0cmFpbnQ9dS5TdHJ1Y3R1cmVJZGVudGlmaWVyPXUuU3RydWN0dXJlRXhwcmVzc2lvbj12b2lkIDA7dmFyIHM9Syg0OTQpLHE9Syg2NTUpLEI9Syg1MzQpLE09Syg2OTkpLFY9SygzNjcpLEQ9Syg3NTgpLGg9SygxMDYpLEE9Syg0NjUpLEk9ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsKXt2YXIgdD1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuc3RydWN0dXJlRGVjbGFyYXRpb249bCx0fXJldHVybiBnKGIsRiksYi5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGIodGhpcy5zdHJ1Y3R1cmVEZWNsYXJhdGlvbi5zaW1wbGlmeSgpKX0sYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe3ZhciBhPWwuZ2V0TmVzdGVkU3RhdGUoMCkuZ2V0TmVzdGVkU3RhdGUobC5pZCksZj10aGlzLnN0cnVjdHVyZURlY2xhcmF0aW9uLmVsYWJvcmF0ZShhLHQsbixpLCEwKTtyZXR1cm4gbC52YWx1ZUlkZW50aWZpZXJJZD1mWzBdLnZhbHVlSWRlbnRpZmllcklkLFtmWzBdLmdldFN0YXRpY0NoYW5nZXMoMCksZlsxXSxmWzJdLGZbM11dfSxiLnByb3RvdHlwZS5jb21wdXRlU3RydWN0dXJlPWZ1bmN0aW9uKGwsdCxuKXtpZihsLnJlY1Jlc3VsdD09PXZvaWQgMCl7dmFyIGk9bC5zdGF0ZSxhPWkuZ2V0TmVzdGVkU3RhdGUoMCkuZ2V0TmVzdGVkU3RhdGUoaS5pZCk7cmV0dXJuIHQucHVzaCh7bmV4dDpuLHBhcmFtczpsfSksdm9pZCB0LnB1c2goe25leHQ6dGhpcy5zdHJ1Y3R1cmVEZWNsYXJhdGlvbixwYXJhbXM6e3N0YXRlOmEsbW9kaWZpYWJsZTpsLm1vZGlmaWFibGUscmVjUmVzdWx0OnZvaWQgMH19KX12YXIgZj1sLnJlY1Jlc3VsdDtpZihmPT09dm9pZCAwfHxmLm5ld1N0YXRlPT09dm9pZCAwKXRocm93IG5ldyBELkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiUkFJTkJPVyEiKTtyZXR1cm4gYT1mLm5ld1N0YXRlLGYuaGFzVGhyb3duP2YudmFsdWU6YS5nZXREeW5hbWljQ2hhbmdlcygwKX0sYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4ic3RydWN0ICIrdGhpcy5zdHJ1Y3R1cmVEZWNsYXJhdGlvbisiIGVuZCJ9LGJ9KHMuRXhwcmVzc2lvbik7dS5TdHJ1Y3R1cmVFeHByZXNzaW9uPUk7dmFyIE89ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsKXt2YXIgdD1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuaWRlbnRpZmllcj1sLHR9cmV0dXJuIGcoYixGKSxiLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxiLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24obCx0LG4saSl7dmFyIGE9dm9pZCAwO2lmKHRoaXMuaWRlbnRpZmllciBpbnN0YW5jZW9mIEIuTG9uZ0lkZW50aWZpZXJUb2tlbil7dmFyIGY9bC5nZXRBbmRSZXNvbHZlU3RhdGljU3RydWN0dXJlKHRoaXMuaWRlbnRpZmllcik7ZiE9PXZvaWQgMCYmKGE9Zi5nZXRTdHJ1Y3R1cmUodGhpcy5pZGVudGlmaWVyLmlkLmdldFRleHQoKSkpfWVsc2UgYT1sLmdldFN0YXRpY1N0cnVjdHVyZSh0aGlzLmlkZW50aWZpZXIuZ2V0VGV4dCgpKTtpZihhPT09dm9pZCAwKXRocm93IG5ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1VuZGVmaW5lZCBtb2R1bGUgIicrdGhpcy5pZGVudGlmaWVyLmdldFRleHQoKSsnIi4nKTtyZXR1cm5bYSxbXSx0LG5dfSxiLnByb3RvdHlwZS5jb21wdXRlU3RydWN0dXJlPWZ1bmN0aW9uKGwsdCxuKXt2YXIgaT1sLnN0YXRlLGE9dm9pZCAwO2lmKHRoaXMuaWRlbnRpZmllciBpbnN0YW5jZW9mIEIuTG9uZ0lkZW50aWZpZXJUb2tlbil7dmFyIGY9aS5nZXRBbmRSZXNvbHZlRHluYW1pY1N0cnVjdHVyZSh0aGlzLmlkZW50aWZpZXIpO2YhPT12b2lkIDAmJihhPWYuZ2V0U3RydWN0dXJlKHRoaXMuaWRlbnRpZmllci5pZC5nZXRUZXh0KCkpKX1lbHNlIGE9aS5nZXREeW5hbWljU3RydWN0dXJlKHRoaXMuaWRlbnRpZmllci5nZXRUZXh0KCkpO2lmKGE9PT12b2lkIDApdGhyb3cgbmV3IEQuRXZhbHVhdGlvbkVycm9yKCdVbmRlZmluZWQgbW9kdWxlICInK3RoaXMuaWRlbnRpZmllci5nZXRUZXh0KCkrJyIuJyk7cmV0dXJuIGF9LGIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWRlbnRpZmllci5nZXRUZXh0KCl9LGJ9KHMuRXhwcmVzc2lvbik7dS5TdHJ1Y3R1cmVJZGVudGlmaWVyPU87dmFyIEU9ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsLHQpe3ZhciBuPUYuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5zdHJ1Y3R1cmVFeHByZXNzaW9uPWwsbi5zaWduYXR1cmVFeHByZXNzaW9uPXQsbn1yZXR1cm4gZyhiLEYpLGIucmVzdHJpY3Q9ZnVuY3Rpb24obCx0LG4saSxhKXt2YXIgZj1uZXcgVi5TdGF0aWNCYXNpcyh7fSx7fSx7fSx7fSx7fSksUz1uLmdldE5lc3RlZFN0YXRlKG4uaWQpO1Muc3RhdGljQmFzaXM9dDt2YXIgTD1uLmdldE5lc3RlZFN0YXRlKG4uaWQpO2Zvcih2YXIgayBpbiBMLnN0YXRpY0Jhc2lzPWwsbC50eXBlRW52aXJvbm1lbnQpaWYobC50eXBlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkoaykpe2lmKCF0LnR5cGVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShrKSl0aHJvdyBuZXcgRC5FbGFib3JhdGlvbkVycm9yKCdTaWduYXR1cmUgbWlzbWF0Y2g6IFVuaW1wbGVtZW50ZWQgdHlwZSAiJytrKyciLicpO3ZhciBVPWwudHlwZUVudmlyb25tZW50W2tdLGo9dC50eXBlRW52aXJvbm1lbnRba107aWYoVS5hcml0eSE9PWouYXJpdHkpdGhyb3cgbmV3IEQuRWxhYm9yYXRpb25FcnJvcignU2lnbmF0dXJlIG1pc21hdGNoOiBJbXBsZW1lbnRhdGlvbiBvZiB0eXBlICInK2srJyIgaGFzIHRoZSB3cm9uZyBhcml0eS4nKTt0cnl7dmFyIFg9VS50eXBlLFo9ai50eXBlLGVlPWoudHlwZTshKFUudHlwZSBpbnN0YW5jZW9mIE0uRnVuY3Rpb25UeXBlKSYmai50eXBlIGluc3RhbmNlb2YgTS5GdW5jdGlvblR5cGUmJihlZT1qLnR5cGUucmV0dXJuVHlwZSxaPWoudHlwZS5wYXJhbWV0ZXJUeXBlKTt2YXIgdGU9WC5tZXJnZShTLGksWik7aWYoVS5hbGxvd3NFcXVhbGl0eSYmIWVlLmFkbWl0c0VxdWFsaXR5KFMpKXRocm93IG5ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1NpZ25hdHVyZSBtaXNtYXRjaDogSW1wbGVtZW50YXRpb24gb2YgdHlwZSAiJytrKyciIHNob3VsZCBhZG1pdCBlcXVhbGl0eS4nKTtaLmluc3RhbnRpYXRlKEwsdGVbMV0paW5zdGFuY2VvZiBNLkZ1bmN0aW9uVHlwZT9mLnNldFR5cGUoayxaLFUuY29uc3RydWN0b3JzLFUuYXJpdHksITApOmYuc2V0VHlwZShrLGoudHlwZS5pbnN0YW50aWF0ZShMLHRlWzFdKSxVLmNvbnN0cnVjdG9ycyxVLmFyaXR5LCEwKSxpPXRlWzFdfWNhdGNoKGxlKXt0aHJvdyBsZSBpbnN0YW5jZW9mIEFycmF5P25ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1NpZ25hdHVyZSBtaXNtYXRjaDogV3JvbmcgaW1wbGVtZW50YXRpb24gb2YgdHlwZSAiJytrKyciOiAnK2xlWzBdKTpsZX19Zm9yKHZhciBrIGluIGwudmFsdWVFbnZpcm9ubWVudClpZihsLnZhbHVlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkoaykpe2lmKCF0LnZhbHVlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkoaykpdGhyb3cgbmV3IEQuRWxhYm9yYXRpb25FcnJvcignU2lnbmF0dXJlIG1pc21hdGNoOiBVbmltcGxlbWVudGVkIHZhbHVlICInK2srJyIuJyk7VT1sLnZhbHVlRW52aXJvbm1lbnRba10saj10LnZhbHVlRW52aXJvbm1lbnRba107Zm9yKHZhciBvZT1uZXcgTWFwLHNlPVVbMF0uZ2V0VHlwZVZhcmlhYmxlcygpLHVlPWpbMF0uZ2V0VHlwZVZhcmlhYmxlcygpO2pbMF1pbnN0YW5jZW9mIE0uVHlwZVZhcmlhYmxlQmluZDspe2Zvcig7Oyl7dmFyIGllPSthLnN1YnN0cmluZygzKTtpZihhPXJlPSInIithWzFdK2FbMl0rKGllKzEpLCFpLmhhcyhyZSkmJiFzZS5oYXMocmUpJiYhdWUuaGFzKHJlKSl7alswXS5uYW1lWzFdPT09IiciJiYocmU9IiciK3JlKSxvZT1vZS5zZXQoalswXS5uYW1lLHJlKTticmVha319alswXT1qWzBdLnR5cGV9alswXT1qWzBdLnJlcGxhY2VUeXBlVmFyaWFibGVzKG9lKTtmb3IodmFyIHBlPVVbMF07cGUgaW5zdGFuY2VvZiBNLlR5cGVWYXJpYWJsZUJpbmQ7KXtmb3IoOzspe3ZhciByZTtpZihpZT0rYS5zdWJzdHJpbmcoMyksYT1yZT0iJyIrYVsxXSthWzJdKyhpZSsxKSwhaS5oYXMocmUpJiYhc2UuaGFzKHJlKSYmIXVlLmhhcyhyZSkpe3BlLm5hbWVbMV09PT0iJyImJihyZT0iJyIrcmUpLG9lPW9lLnNldChwZS5uYW1lLHJlKTticmVha319cGU9cGUudHlwZX1wZT1wZS5yZXBsYWNlVHlwZVZhcmlhYmxlcyhvZSk7dHJ5e3ZhciBhZT1wZS5tZXJnZShTLGksalswXSk7aWYoYWVbMF0uZ2V0VHlwZVZhcmlhYmxlcygpLnNpemU8cGUuZ2V0VHlwZVZhcmlhYmxlcygpLnNpemUpdGhyb3cgbmV3IEQuRWxhYm9yYXRpb25FcnJvcignU2lnbmF0dXJlIG1pc21hdGNoOiBJbXBsZW1lbnRhdGlvbiBvZiB2YWx1ZSAiJytrKyciIGhhcyB0eXBlICInK2FlWzBdLm5vcm1hbGl6ZSgpWzBdKyciIHdoaWNoIGlzIGxlc3MgZ2VuZXJhbCB0aGFuIHRoZSByZXF1aXJlZCB0eXBlICInK3BlLm5vcm1hbGl6ZSgpWzBdKyciLicpO2Yuc2V0VmFsdWUoayxVWzBdLmluc3RhbnRpYXRlKFMsYWVbMV0pLFVbMV0pfWNhdGNoKGRlKXt0aHJvdyBkZSBpbnN0YW5jZW9mIEFycmF5P25ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1NpZ25hdHVyZSBtaXNtYXRjaDogV3JvbmcgaW1wbGVtZW50YXRpb24gb2YgdmFsdWUgIicraysnIjogJytkZVswXSk6ZGV9fWZvcih2YXIgayBpbiBsLnN0cnVjdHVyZUVudmlyb25tZW50KWlmKGwuc3RydWN0dXJlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkoaykpe2lmKCF0LnN0cnVjdHVyZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGspKXRocm93IG5ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1VuaW1wbGVtZW50ZWQgc3RydWN0dXJlICInK2srJyIuJyk7dHJ5e3ZhciBjZT1iLnJlc3RyaWN0KGwuZ2V0U3RydWN0dXJlKGspLHQuZ2V0U3RydWN0dXJlKGspLFMsaSxhKTtmLnNldFN0cnVjdHVyZShrLGNlWzBdKSxpPWNlWzJdLGE9Y2VbM119Y2F0Y2goZGUpe3Rocm93IG5ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1NpZ25hdHVyZSBNaXNtYXRjaDogV3JvbmcgaW1wbGVtZW50YXRpb24gb2Ygc3RydWN0dXJlICInK2srJyI6ICcrZGUubWVzc2FnZSl9fXJldHVybltmLFtdLGksYV19LGIucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiKHRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbi5zaW1wbGlmeSgpLHRoaXMuc2lnbmF0dXJlRXhwcmVzc2lvbi5zaW1wbGlmeSgpKX0sYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe3ZhciBhPXRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbi5lbGFib3JhdGUobCx0LG4saSksZj10aGlzLnNpZ25hdHVyZUV4cHJlc3Npb24uZWxhYm9yYXRlKGwsYVsyXSxhWzNdLGkpO3JldHVybiBiLnJlc3RyaWN0KGZbMF0sYVswXSxsLGZbMl0sZlszXSl9LGIucHJvdG90eXBlLmNvbXB1dGVTdHJ1Y3R1cmU9ZnVuY3Rpb24obCx0LG4pe3ZhciBpPXRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbi5jb21wdXRlU3RydWN0dXJlKGwsdCxuKTtpZihpIT09dm9pZCAwKXtpZihpIGluc3RhbmNlb2YgaC5WYWx1ZSlyZXR1cm4gaTt2YXIgYT10aGlzLnNpZ25hdHVyZUV4cHJlc3Npb24uY29tcHV0ZUludGVyZmFjZShsLnN0YXRlKTtyZXR1cm4gaS5yZXN0cmljdChhKX19LGIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbisiIDogIit0aGlzLnNpZ25hdHVyZUV4cHJlc3Npb259LGJ9KHMuRXhwcmVzc2lvbik7dS5UcmFuc3BhcmVudENvbnN0cmFpbnQ9RTt2YXIgcj1mdW5jdGlvbihGKXtmdW5jdGlvbiBiKGwsdCl7dmFyIG49Ri5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnN0cnVjdHVyZUV4cHJlc3Npb249bCxuLnNpZ25hdHVyZUV4cHJlc3Npb249dCxufXJldHVybiBnKGIsRiksYi5yZXN0cmljdD1mdW5jdGlvbihsLHQsbixpLGEpe3ZhciBmPW5ldyBWLlN0YXRpY0Jhc2lzKHt9LHt9LHt9LHt9LHt9KSxTPW4uZ2V0TmVzdGVkU3RhdGUobi5pZCk7Uy5zdGF0aWNCYXNpcz10O3ZhciBMPW4uZ2V0TmVzdGVkU3RhdGUobi5pZCk7Zm9yKHZhciBrIGluIEwuc3RhdGljQmFzaXM9bCxMPUwuZ2V0TmVzdGVkU3RhdGUobi5pZCksbC50eXBlRW52aXJvbm1lbnQpaWYobC50eXBlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkoaykpe2lmKCF0LnR5cGVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShrKSl0aHJvdyBuZXcgRC5FbGFib3JhdGlvbkVycm9yKCdTaWduYXR1cmUgbWlzbWF0Y2g6IFVuaW1wbGVtZW50ZWQgdHlwZSAiJytrKyciLicpO3ZhciBVPWwudHlwZUVudmlyb25tZW50W2tdLGo9dC50eXBlRW52aXJvbm1lbnRba107aWYoVS5hcml0eSE9PWouYXJpdHkpdGhyb3cgbmV3IEQuRWxhYm9yYXRpb25FcnJvcignU2lnbmF0dXJlIG1pc21hdGNoOiBJbXBsZW1lbnRhdGlvbiBvZiB0eXBlICInK2srJyIgaGFzIHRoZSB3cm9uZyBhcml0eS4nKTt0cnl7dmFyIFg9VS50eXBlLFo9ai50eXBlLGVlPWoudHlwZTshKFUudHlwZSBpbnN0YW5jZW9mIE0uRnVuY3Rpb25UeXBlKSYmai50eXBlIGluc3RhbmNlb2YgTS5GdW5jdGlvblR5cGUmJihlZT1qLnR5cGUucmV0dXJuVHlwZSxaPWoudHlwZS5wYXJhbWV0ZXJUeXBlKTt2YXIgdGU9WC5tZXJnZShTLGksWik7aWYoWD1uZXcgTS5DdXN0b21UeXBlKFgubmFtZSxYLnR5cGVBcmd1bWVudHMsWC5xdWFsaWZpZWROYW1lLCEwKSxVLmFsbG93c0VxdWFsaXR5JiYhZWUuYWRtaXRzRXF1YWxpdHkoUykpdGhyb3cgbmV3IEQuRWxhYm9yYXRpb25FcnJvcignU2lnbmF0dXJlIG1pc21hdGNoOiBJbXBsZW1lbnRhdGlvbiBvZiB0eXBlICInK2srJyIgc2hvdWxkIGFkbWl0IGVxdWFsaXR5LicpO1ogaW5zdGFuY2VvZiBNLkZ1bmN0aW9uVHlwZT8oZi5zZXRUeXBlKGssWixVLmNvbnN0cnVjdG9ycyxVLmFyaXR5LCEwKSxMLnN0YXRpY0Jhc2lzLnNldFR5cGUoayxaLFUuY29uc3RydWN0b3JzLFUuYXJpdHksITApKTooZi5zZXRUeXBlKGssWCxbXSxVLmFyaXR5LFUuYWxsb3dzRXF1YWxpdHkpLEwuc3RhdGljQmFzaXMuc2V0VHlwZShrLFgsVS5jb25zdHJ1Y3RvcnMsVS5hcml0eSxVLmFsbG93c0VxdWFsaXR5KSksaT10ZVsxXX1jYXRjaChkZSl7dGhyb3cgZGUgaW5zdGFuY2VvZiBBcnJheT9uZXcgRC5FbGFib3JhdGlvbkVycm9yKCdTaWduYXR1cmUgbWlzbWF0Y2g6IFdyb25nIGltcGxlbWVudGF0aW9uIG9mIHR5cGUgIicraysnIjogJytkZVswXSk6ZGV9fWZvcih2YXIgayBpbiBsLnZhbHVlRW52aXJvbm1lbnQpaWYobC52YWx1ZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGspKXtpZighdC52YWx1ZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGspKXRocm93IG5ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1NpZ25hdHVyZSBtaXNtYXRjaDogVW5pbXBsZW1lbnRlZCB2YWx1ZSAiJytrKyciLicpO1U9bC52YWx1ZUVudmlyb25tZW50W2tdLGo9dC52YWx1ZUVudmlyb25tZW50W2tdO2Zvcih2YXIgb2U9bmV3IE1hcCxzZT1VWzBdLmdldFR5cGVWYXJpYWJsZXMoKSx1ZT1qWzBdLmdldFR5cGVWYXJpYWJsZXMoKSxpZT1qWzBdO2llIGluc3RhbmNlb2YgTS5UeXBlVmFyaWFibGVCaW5kOyl7Zm9yKDs7KXt2YXIgcGU9K2Euc3Vic3RyaW5nKDMpO2lmKGE9YWU9IiciK2FbMV0rYVsyXSsocGUrMSksIWkuaGFzKGFlKSYmIXNlLmhhcyhhZSkmJiF1ZS5oYXMoYWUpKXtpZS5uYW1lWzFdPT09IiciJiYoYWU9IiciK2FlKSxvZT1vZS5zZXQoaWUubmFtZSxhZSk7YnJlYWt9fWllPWllLnR5cGV9aWU9aWUucmVwbGFjZVR5cGVWYXJpYWJsZXMob2UpO2Zvcih2YXIgcmU9VVswXTtyZSBpbnN0YW5jZW9mIE0uVHlwZVZhcmlhYmxlQmluZDspe2Zvcig7Oyl7dmFyIGFlO2lmKHBlPSthLnN1YnN0cmluZygzKSxhPWFlPSInIithWzFdK2FbMl0rKHBlKzEpLCFpLmhhcyhhZSkmJiFzZS5oYXMoYWUpJiYhdWUuaGFzKGFlKSl7cmUubmFtZVsxXT09PSInIiYmKGFlPSInIithZSksb2U9b2Uuc2V0KHJlLm5hbWUsYWUpO2JyZWFrfX1yZT1yZS50eXBlfXJlPXJlLnJlcGxhY2VUeXBlVmFyaWFibGVzKG9lKTt0cnl7dmFyIGNlPXJlLm1lcmdlKFMsaSxpZSk7aWYoY2VbMF0uZ2V0VHlwZVZhcmlhYmxlcygpLnNpemU8cmUuZ2V0VHlwZVZhcmlhYmxlcygpLnNpemUpdGhyb3cgbmV3IEQuRWxhYm9yYXRpb25FcnJvcignU2lnbmF0dXJlIG1pc21hdGNoOiBJbXBsZW1lbnRhdGlvbiBvZiB2YWx1ZSAiJytrKyciIGhhcyB0eXBlICInK2NlWzBdLm5vcm1hbGl6ZSgpWzBdKyciIHdoaWNoIGlzIGxlc3MgZ2VuZXJhbCB0aGFuIHRoZSByZXF1aXJlZCB0eXBlICInK1VbMF0rJyIuJyk7Zi5zZXRWYWx1ZShrLFVbMF0uaW5zdGFudGlhdGUoTCxpKSxVWzFdKX1jYXRjaChoZSl7dGhyb3cgaGUgaW5zdGFuY2VvZiBBcnJheT9uZXcgRC5FbGFib3JhdGlvbkVycm9yKCdTaWduYXR1cmUgbWlzbWF0Y2g6IFdyb25nIGltcGxlbWVudGF0aW9uIG9mIHR5cGUgIicraysnIjogJytoZVswXSk6aGV9fWZvcih2YXIgayBpbiBsLnN0cnVjdHVyZUVudmlyb25tZW50KWlmKGwuc3RydWN0dXJlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkoaykpe2lmKCF0LnN0cnVjdHVyZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGspKXRocm93IG5ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1VuaW1wbGVtZW50ZWQgc3RydWN0dXJlICInK2srJyIuJyk7dHJ5e3ZhciBsZT1iLnJlc3RyaWN0KGwuZ2V0U3RydWN0dXJlKGspLHQuZ2V0U3RydWN0dXJlKGspLFMsaSxhKTtmLnNldFN0cnVjdHVyZShrLGxlWzBdKSxpPWxlWzJdLGE9bGVbM119Y2F0Y2goaGUpe3Rocm93IG5ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1NpZ25hdHVyZSBNaXNtYXRjaDogV3JvbmcgaW1wbGVtZW50YXRpb24gb2Ygc3RydWN0dXJlICInK2srJyI6ICcraGUubWVzc2FnZSl9fXJldHVybltmLFtdLGksYV19LGIucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiKHRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbi5zaW1wbGlmeSgpLHRoaXMuc2lnbmF0dXJlRXhwcmVzc2lvbi5zaW1wbGlmeSgpKX0sYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe3ZhciBhPXRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbi5lbGFib3JhdGUobCx0LG4saSksZj10aGlzLnNpZ25hdHVyZUV4cHJlc3Npb24uZWxhYm9yYXRlKGwsYVsyXSxhWzNdLGkpO3JldHVybiBiLnJlc3RyaWN0KGZbMF0sYVswXSxsLGZbMl0sZlszXSl9LGIucHJvdG90eXBlLmNvbXB1dGVTdHJ1Y3R1cmU9ZnVuY3Rpb24obCx0LG4pe3ZhciBpPXRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbi5jb21wdXRlU3RydWN0dXJlKGwsdCxuKTtpZihpIT09dm9pZCAwKXtpZihpIGluc3RhbmNlb2YgaC5WYWx1ZSlyZXR1cm4gaTt2YXIgYT10aGlzLnNpZ25hdHVyZUV4cHJlc3Npb24uY29tcHV0ZUludGVyZmFjZShsLnN0YXRlKTtyZXR1cm4gaS5yZXN0cmljdChhKX19LGIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbisiIDo+ICIrdGhpcy5zaWduYXR1cmVFeHByZXNzaW9ufSxifShzLkV4cHJlc3Npb24pO3UuT3BhcXVlQ29uc3RyYWludD1yO3ZhciBlPWZ1bmN0aW9uKEYpe2Z1bmN0aW9uIGIobCx0KXt2YXIgbj1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uZnVuY3RvcklkPWwsbi5zdHJ1Y3R1cmVFeHByZXNzaW9uPXQsbn1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiKHRoaXMuZnVuY3RvcklkLHRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbi5zaW1wbGlmeSgpKX0sYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe3ZhciBhPXRoaXMuc3RydWN0dXJlRXhwcmVzc2lvbi5lbGFib3JhdGUobCx0LG4saSksZj1sLmdldFN0YXRpY0Z1bmN0b3IodGhpcy5mdW5jdG9ySWQuZ2V0VGV4dCgpKTtpZihmPT09dm9pZCAwKXRocm93IG5ldyBELkV2YWx1YXRpb25FcnJvcignVW5kZWZpbmVkIGZ1bmN0b3IgIicrdGhpcy5mdW5jdG9ySWQuZ2V0VGV4dCgpKyciLicpO3ZhciBTPWwuZ2V0TmVzdGVkU3RhdGUobC5pZCksTD1uZXcgVi5TdGF0aWNCYXNpcyh7fSx7fSx7fSx7fSx7fSksaz1bXTtmb3IodmFyIFUgaW4gZlszXSYmKFMuc3RhdGljQmFzaXM9Uy5zdGF0aWNCYXNpcy5leHRlbmQoYVswXSksay5wdXNoKG5ldyBELldhcm5pbmcoMCwnVXNpbmcgYXBwcm94aW1hdGVseSBlbGFib3JhdGVkIGZ1bmN0b3IgIicrdGhpcy5mdW5jdG9ySWQuZ2V0VGV4dCgpK2AiLgpgKSkpLFMuc2V0U3RhdGljU3RydWN0dXJlKGZbMl0sRS5yZXN0cmljdChmWzBdLGFbMF0sbCx0LG4pWzBdKSxMPUwuZXh0ZW5kKGZbMV0pLFMuc3RhdGljQmFzaXM9Uy5zdGF0aWNCYXNpcy5leHRlbmQoZlsxXSksTC52YWx1ZUVudmlyb25tZW50KWlmKEwudmFsdWVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShVKSl7dmFyIGo9TC52YWx1ZUVudmlyb25tZW50W1VdO2ohPT12b2lkIDAmJmpbMF0hPT12b2lkIDAmJihMLnZhbHVlRW52aXJvbm1lbnRbVV09W2pbMF0uaW5zdGFudGlhdGUoUyxhWzJdKSxqWzFdXSl9Zm9yKHZhciBVIGluIEwudHlwZUVudmlyb25tZW50KWlmKEwudHlwZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KFUpJiZMLnR5cGVFbnZpcm9ubWVudFtVXS50eXBlIGluc3RhbmNlb2YgTS5GdW5jdGlvblR5cGUpe3ZhciBYPUwudHlwZUVudmlyb25tZW50W1VdLnR5cGU7TC50eXBlRW52aXJvbm1lbnRbVV0udHlwZT1uZXcgTS5GdW5jdGlvblR5cGUoWC5wYXJhbWV0ZXJUeXBlLFgucmV0dXJuVHlwZS5pbnN0YW50aWF0ZShTLGFbMl0pKX1yZXR1cm5bTCxhWzFdLmNvbmNhdChrKSxhWzJdLGFbM11dfSxiLnByb3RvdHlwZS5jb21wdXRlU3RydWN0dXJlPWZ1bmN0aW9uKGwsdCxuKXt2YXIgaT1sLnN0YXRlLGE9aS5nZXREeW5hbWljRnVuY3Rvcih0aGlzLmZ1bmN0b3JJZC5nZXRUZXh0KCkpO2lmKGE9PT12b2lkIDApdGhyb3cgbmV3IEQuRXZhbHVhdGlvbkVycm9yKCdVbmRlZmluZWQgZnVuY3RvciAiJyt0aGlzLmZ1bmN0b3JJZC5nZXRUZXh0KCkrJyIuJyk7dmFyIGY9dGhpcy5zdHJ1Y3R1cmVFeHByZXNzaW9uLmNvbXB1dGVTdHJ1Y3R1cmUobCx0LG4pO2lmKGY9PT12b2lkIDB8fGYgaW5zdGFuY2VvZiBoLlZhbHVlKXJldHVybiBmO3ZhciBTPWEuc3RhdGUuZ2V0TmVzdGVkU3RhdGUoYS5zdGF0ZS5pZCk7Uy5keW5hbWljQmFzaXM9Uy5keW5hbWljQmFzaXMuZXh0ZW5kKGYpLFMuc2V0RHluYW1pY1N0cnVjdHVyZShhLnBhcmFtTmFtZS5nZXRUZXh0KCksZi5yZXN0cmljdChhLnBhcmFtKSksbFt0aGlzKyIiXT09PXZvaWQgMCYmKGwucmVjUmVzdWx0PXZvaWQgMCxsW3RoaXMrIiJdPSEwKSxsLnN0YXRlPVM7dmFyIEw9YS5ib2R5LmNvbXB1dGVTdHJ1Y3R1cmUobCx0LG4pO3JldHVybiBsLnN0YXRlPWksTH0sYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mdW5jdG9ySWQuZ2V0VGV4dCgpKyIoICIrdGhpcy5zdHJ1Y3R1cmVFeHByZXNzaW9uKyIgKSJ9LGJ9KHMuRXhwcmVzc2lvbik7dS5GdW5jdG9yQXBwbGljYXRpb249ZTt2YXIgbz1mdW5jdGlvbihGKXtmdW5jdGlvbiBiKGwsdCl7dmFyIG49Ri5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmRlY2xhcmF0aW9uPWwsbi5leHByZXNzaW9uPXQsbn1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiKHRoaXMuZGVjbGFyYXRpb24uc2ltcGxpZnkoKSx0aGlzLmV4cHJlc3Npb24uc2ltcGxpZnkoKSl9LGIucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihsLHQsbixpKXt2YXIgYT1sLmdldE5lc3RlZFN0YXRlKGwuaWQpO3QuZm9yRWFjaChmdW5jdGlvbihrLFUpe1VbMV09PT0iKiImJlVbMl09PT0iKiImJmEuc2V0U3RhdGljVmFsdWUoVS5zdWJzdHJpbmcoMyksa1swXS5pbnN0YW50aWF0ZShsLHQpLFYuSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSl9KTt2YXIgZj10aGlzLmRlY2xhcmF0aW9uLmVsYWJvcmF0ZShhLHQsbixpKTtuPWZbM107dmFyIFM9bmV3IE1hcDt0LmZvckVhY2goZnVuY3Rpb24oayxVKXtTPVMuc2V0KFUsW2tbMF0uaW5zdGFudGlhdGUoZlswXSxmWzJdKSxrWzFdXSl9KTt2YXIgTD10aGlzLmV4cHJlc3Npb24uZWxhYm9yYXRlKGZbMF0sZlsyXSxuLGkpO3JldHVybltMWzBdLGZbMV0uY29uY2F0KExbMV0pLExbMl0sTFszXV19LGIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuImxldCAiK3RoaXMuZGVjbGFyYXRpb24rIiBpbiAiK3RoaXMuZXhwcmVzc2lvbisiIGVuZCJ9LGIucHJvdG90eXBlLmNvbXB1dGVTdHJ1Y3R1cmU9ZnVuY3Rpb24obCx0LG4pe3ZhciBpPWwuc3RhdGU7aWYobC5sZHNlUmVzPT09dm9pZCAwKXtpZihsLnJlY1Jlc3VsdD09PXZvaWQgMCl7dmFyIGE9aS5nZXROZXN0ZWRTdGF0ZSgwKS5nZXROZXN0ZWRTdGF0ZShpLmlkKTtyZXR1cm4gdC5wdXNoKHtuZXh0Om4scGFyYW1zOmx9KSx2b2lkIHQucHVzaCh7bmV4dDp0aGlzLmRlY2xhcmF0aW9uLHBhcmFtczp7c3RhdGU6YSxtb2RpZmlhYmxlOmwubW9kaWZpYWJsZSxyZWNSZXN1bHQ6dm9pZCAwfX0pfWwubGRzZVJlcz1sLnJlY1Jlc3VsdCxsLnJlY1Jlc3VsdD12b2lkIDB9dmFyIGY9bC5sZHNlUmVzO2lmKGY9PT12b2lkIDB8fGYubmV3U3RhdGU9PT12b2lkIDApdGhyb3cgbmV3IEQuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJBbnBhbi4iKTtpZihhPWYubmV3U3RhdGUsZi5oYXNUaHJvd24pcmV0dXJuIGYudmFsdWU7bC5zdGF0ZT1hO3ZhciBTPXRoaXMuZXhwcmVzc2lvbi5jb21wdXRlU3RydWN0dXJlKGwsdCxuKTtyZXR1cm4gbC5zdGF0ZT1pLFN9LGJ9KHMuRXhwcmVzc2lvbik7dS5Mb2NhbERlY2xhcmF0aW9uU3RydWN0dXJlRXhwcmVzc2lvbj1vO3ZhciB5PWZ1bmN0aW9uKEYpe2Z1bmN0aW9uIGIobCl7dmFyIHQ9Ri5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LnNwZWNpZmljYXRpb249bCx0fXJldHVybiBnKGIsRiksYi5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGIodGhpcy5zcGVjaWZpY2F0aW9uLnNpbXBsaWZ5KCkpfSxiLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24obCx0LG4saSl7cmV0dXJuIHRoaXMuc3BlY2lmaWNhdGlvbi5lbGFib3JhdGUobCx0LG4saSl9LGIucHJvdG90eXBlLmNvbXB1dGVJbnRlcmZhY2U9ZnVuY3Rpb24obCl7cmV0dXJuIHRoaXMuc3BlY2lmaWNhdGlvbi5jb21wdXRlSW50ZXJmYWNlKGwpfSxiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJzaWcgIit0aGlzLnNwZWNpZmljYXRpb24rIiBlbmQifSxifShzLkV4cHJlc3Npb24pO3UuU2lnbmF0dXJlRXhwcmVzc2lvbj15O3ZhciBkPWZ1bmN0aW9uKEYpe2Z1bmN0aW9uIGIobCl7dmFyIHQ9Ri5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LmlkZW50aWZpZXI9bCx0fXJldHVybiBnKGIsRiksYi5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe3ZhciBhPXZvaWQgMDtpZih0aGlzLmlkZW50aWZpZXIgaW5zdGFuY2VvZiBCLkxvbmdJZGVudGlmaWVyVG9rZW4pe3ZhciBmPWwuZ2V0QW5kUmVzb2x2ZVN0YXRpY1N0cnVjdHVyZSh0aGlzLmlkZW50aWZpZXIpO2YhPT12b2lkIDAmJihhPWYuZ2V0U2lnbmF0dXJlKHRoaXMuaWRlbnRpZmllci5pZC5nZXRUZXh0KCkpKX1lbHNlIGE9bC5nZXRTdGF0aWNTaWduYXR1cmUodGhpcy5pZGVudGlmaWVyLmdldFRleHQoKSk7aWYoYT09PXZvaWQgMCl0aHJvdyBuZXcgRC5FdmFsdWF0aW9uRXJyb3IoJ1VuZGVmaW5lZCBzaWduYXR1cmUgIicrdGhpcy5pZGVudGlmaWVyLmdldFRleHQoKSsnIi4nKTtyZXR1cm5bYSxbXSx0LG5dfSxiLnByb3RvdHlwZS5jb21wdXRlSW50ZXJmYWNlPWZ1bmN0aW9uKGwpe3ZhciB0PXZvaWQgMDtpZih0aGlzLmlkZW50aWZpZXIgaW5zdGFuY2VvZiBCLkxvbmdJZGVudGlmaWVyVG9rZW4pe3ZhciBuPWwuZ2V0QW5kUmVzb2x2ZUR5bmFtaWNTdHJ1Y3R1cmUodGhpcy5pZGVudGlmaWVyKTtuIT09dm9pZCAwJiYodD1uLmdldFNpZ25hdHVyZSh0aGlzLmlkZW50aWZpZXIuaWQuZ2V0VGV4dCgpKSl9ZWxzZSB0PWwuZ2V0RHluYW1pY1NpZ25hdHVyZSh0aGlzLmlkZW50aWZpZXIuZ2V0VGV4dCgpKTtpZih0PT09dm9pZCAwKXRocm93IG5ldyBELkV2YWx1YXRpb25FcnJvcignVW5kZWZpbmVkIHNpZ25hdHVyZSAiJyt0aGlzLmlkZW50aWZpZXIuZ2V0VGV4dCgpKyciLicpO3JldHVybiB0fSxiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlkZW50aWZpZXIuZ2V0VGV4dCgpfSxifShzLkV4cHJlc3Npb24pO3UuU2lnbmF0dXJlSWRlbnRpZmllcj1kO3ZhciB2PWZ1bmN0aW9uKEYpe2Z1bmN0aW9uIGIobCx0LG4saSl7dmFyIGE9Ri5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBhLnNpZ25hdHVyZUV4cHJlc3Npb249bCxhLnR5dmFyc2VxPXQsYS5uYW1lPW4sYS50eXBlPWksYX1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiKHRoaXMuc2lnbmF0dXJlRXhwcmVzc2lvbi5zaW1wbGlmeSgpLHRoaXMudHl2YXJzZXEsdGhpcy5uYW1lLHRoaXMudHlwZS5zaW1wbGlmeSgpKX0sYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe3ZhciBhPXRoaXMuc2lnbmF0dXJlRXhwcmVzc2lvbi5lbGFib3JhdGUobCx0LG4saSksZj1sLmdldE5lc3RlZFN0YXRlKDApO2Yuc3RhdGljQmFzaXM9YVswXTt2YXIgUz12b2lkIDAsTD1hWzBdLGs9dGhpcy5uYW1lLmdldFRleHQoKTtpZih0aGlzLm5hbWUgaW5zdGFuY2VvZiBCLkxvbmdJZGVudGlmaWVyVG9rZW4/KEw9Zi5nZXRBbmRSZXNvbHZlU3RhdGljU3RydWN0dXJlKHRoaXMubmFtZSkpIT09dm9pZCAwJiYoUz1MLmdldFR5cGUodGhpcy5uYW1lLmlkLmdldFRleHQoKSksaz10aGlzLm5hbWUuaWQuZ2V0VGV4dCgpKTpTPWYuZ2V0U3RhdGljVHlwZSh0aGlzLm5hbWUuZ2V0VGV4dCgpKSxTPT09dm9pZCAwfHxMPT09dm9pZCAwKXRocm93IG5ldyBELkVsYWJvcmF0aW9uRXJyb3IoJ1VuZGVmaW5lZCB0eXBlICInK3RoaXMubmFtZS5nZXRUZXh0KCkrJyIuJyk7cmV0dXJuIEwuc2V0VHlwZShrLG5ldyBNLkZ1bmN0aW9uVHlwZShTLnR5cGUsdGhpcy50eXBlKSxbXSx0aGlzLnR5dmFyc2VxLmxlbmd0aCxTLmFsbG93c0VxdWFsaXR5KSxhfSxiLnByb3RvdHlwZS5jb21wdXRlSW50ZXJmYWNlPWZ1bmN0aW9uKGwpe3JldHVybiB0aGlzLnNpZ25hdHVyZUV4cHJlc3Npb24uY29tcHV0ZUludGVyZmFjZShsKX0sYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaWduYXR1cmVFeHByZXNzaW9uKyIgd2hlcmUgdHlwZSA8c3R1ZmY+ICIrdGhpcy5uYW1lLmdldFRleHQoKSsiID0gIit0aGlzLnR5cGV9LGJ9KHMuRXhwcmVzc2lvbik7dS5UeXBlUmVhbGlzYXRpb249djt2YXIgQz1mdW5jdGlvbihGKXtmdW5jdGlvbiBiKGwpe3ZhciB0PUYuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC5zdHJ1Y3R1cmVCaW5kaW5nPWwsdH1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihsLHQsbixpLGEpe2Zvcih2YXIgZj1bXSxTPTA7Uzx0aGlzLnN0cnVjdHVyZUJpbmRpbmcubGVuZ3RoOysrUyl7dmFyIEw9dGhpcy5zdHJ1Y3R1cmVCaW5kaW5nW1NdLmVsYWJvcmF0ZShsLHQsbixpKTtsPUxbMF0sZj1mLmNvbmNhdChMWzFdKSx0PUxbMl0sbj1MWzNdfXJldHVybltsLGYsdCxuXX0sYi5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24obCx0KXtsLndoaWNoQmluZD09PXZvaWQgMCYmKGwud2hpY2hCaW5kPTApO3ZhciBuPWwud2hpY2hCaW5kLGk9dGhpcy5zdHJ1Y3R1cmVCaW5kaW5nW25dLmV2YWx1YXRlKGwsdCx0aGlzKTtpZihpIT09dm9pZCAwKXtpZihpLmhhc1Rocm93bilyZXR1cm4gaTtpZihsLnN0YXRlPWkubmV3U3RhdGUsbC53aGljaEJpbmQ9bC53aGljaEJpbmQrMSxsLnJlY1Jlc3VsdD12b2lkIDAsbC53aGljaEJpbmQ9PT10aGlzLnN0cnVjdHVyZUJpbmRpbmcubGVuZ3RoKXJldHVybntuZXdTdGF0ZTpsLnN0YXRlLHZhbHVlOnZvaWQgMCxoYXNUaHJvd246ITF9O3QucHVzaCh7bmV4dDp0aGlzLHBhcmFtczpsfSl9fSxiLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe2Zvcih2YXIgbD1bXSx0PTA7dDx0aGlzLnN0cnVjdHVyZUJpbmRpbmcubGVuZ3RoOysrdClsLnB1c2godGhpcy5zdHJ1Y3R1cmVCaW5kaW5nW3RdLnNpbXBsaWZ5KCkpO3JldHVybiBuZXcgYihsKX0sYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIGw9InN0cnVjdHVyZSIsdD0wO3Q8dGhpcy5zdHJ1Y3R1cmVCaW5kaW5nLmxlbmd0aDsrK3QpbCs9IiAiK3RoaXMuc3RydWN0dXJlQmluZGluZ1t0XTtyZXR1cm4gbCsiOyJ9LGJ9KHEuRGVjbGFyYXRpb24pO3UuU3RydWN0dXJlRGVjbGFyYXRpb249Qzt2YXIgRz1mdW5jdGlvbihGKXtmdW5jdGlvbiBiKGwpe3ZhciB0PUYuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC5zaWduYXR1cmVCaW5kaW5nPWwsdH1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihsLHQsbixpKXt0PT09dm9pZCAwJiYodD1uZXcgTWFwKSxuPT09dm9pZCAwJiYobj0iJyp0MCIpLGk9PT12b2lkIDAmJihpPW5ldyBNYXApO2Zvcih2YXIgYT1bXSxmPTA7Zjx0aGlzLnNpZ25hdHVyZUJpbmRpbmcubGVuZ3RoOysrZil7dmFyIFM9dGhpcy5zaWduYXR1cmVCaW5kaW5nW2ZdLmVsYWJvcmF0ZShsLHQsbixpKTtsPVNbMF0sYT1hLmNvbmNhdChTWzFdKSx0PVNbMl0sbj1TWzNdfXJldHVybltsLGEsdCxuXX0sYi5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24obCx0KXtmb3IodmFyIG49bC5zdGF0ZSxpPTA7aTx0aGlzLnNpZ25hdHVyZUJpbmRpbmcubGVuZ3RoOysraSluPXRoaXMuc2lnbmF0dXJlQmluZGluZ1tpXS5ldmFsdWF0ZShuKTtyZXR1cm57bmV3U3RhdGU6bix2YWx1ZTp2b2lkIDAsaGFzVGhyb3duOiExfX0sYi5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIGw9W10sdD0wO3Q8dGhpcy5zaWduYXR1cmVCaW5kaW5nLmxlbmd0aDsrK3QpbC5wdXNoKHRoaXMuc2lnbmF0dXJlQmluZGluZ1t0XS5zaW1wbGlmeSgpKTtyZXR1cm4gbmV3IGIobCl9LGIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciBsPSJzdHJ1Y3R1cmUiLHQ9MDt0PHRoaXMuc2lnbmF0dXJlQmluZGluZy5sZW5ndGg7Kyt0KWwrPSIgIit0aGlzLnNpZ25hdHVyZUJpbmRpbmdbdF07cmV0dXJuIGwrIjsifSxifShxLkRlY2xhcmF0aW9uKTt1LlNpZ25hdHVyZURlY2xhcmF0aW9uPUc7dmFyIFk9ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsKXt2YXIgdD1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuZnVuY3RvckJpbmRpbmc9bCx0fXJldHVybiBnKGIsRiksYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe3ZhciBhO3Q9PT12b2lkIDAmJih0PW5ldyBNYXApLG49PT12b2lkIDAmJihuPSInKnQwIiksaT09PXZvaWQgMCYmKGk9bmV3IE1hcCk7Zm9yKHZhciBmPVtdLFM9MDtTPHRoaXMuZnVuY3RvckJpbmRpbmcubGVuZ3RoOysrUyl7dmFyIEw7bD0oYT10aGlzLmZ1bmN0b3JCaW5kaW5nW1NdLmVsYWJvcmF0ZShsLHQsbixpKSlbMF0sTD1hWzFdLHQ9YVsyXSxuPWFbM10sZj1mLmNvbmNhdChMKX1yZXR1cm5bbCxmLHQsbl19LGIucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGwsdCl7Zm9yKHZhciBuPWwuc3RhdGUsaT0wO2k8dGhpcy5mdW5jdG9yQmluZGluZy5sZW5ndGg7KytpKW49dGhpcy5mdW5jdG9yQmluZGluZ1tpXS5ldmFsdWF0ZShuKTtyZXR1cm57bmV3U3RhdGU6bix2YWx1ZTp2b2lkIDAsaGFzVGhyb3duOiExfX0sYi5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIGw9W10sdD0wO3Q8dGhpcy5mdW5jdG9yQmluZGluZy5sZW5ndGg7Kyt0KWwucHVzaCh0aGlzLmZ1bmN0b3JCaW5kaW5nW3RdLnNpbXBsaWZ5KCkpO3JldHVybiBuZXcgYihsKX0sYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIGw9ImZ1bmN0b3IiLHQ9MDt0PHRoaXMuZnVuY3RvckJpbmRpbmcubGVuZ3RoOysrdClsKz0iICIrdGhpcy5mdW5jdG9yQmluZGluZ1t0XTtyZXR1cm4gbCsiOyJ9LGJ9KHEuRGVjbGFyYXRpb24pO3UuRnVuY3RvckRlY2xhcmF0aW9uPVk7dmFyIEo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBGKGIsbCl7dGhpcy5uYW1lPWIsdGhpcy5iaW5kaW5nPWx9cmV0dXJuIEYucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBGKHRoaXMubmFtZSx0aGlzLmJpbmRpbmcuc2ltcGxpZnkoKSl9LEYucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihiLGwsdCxuKXt2YXIgaT10aGlzLmJpbmRpbmcuZWxhYm9yYXRlKGIsbCx0LG4pO3JldHVybiBiLnNldFN0YXRpY1N0cnVjdHVyZSh0aGlzLm5hbWUuZ2V0VGV4dCgpLGlbMF0pLFtiLGlbMV0saVsyXSxpWzNdXX0sRi5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oYixsLHQpe3ZhciBuPXRoaXMuYmluZGluZy5jb21wdXRlU3RydWN0dXJlKGIsbCx0KTtpZihuIT09dm9pZCAwKXt2YXIgaT1iLnN0YXRlO3JldHVybiBuIGluc3RhbmNlb2YgaC5WYWx1ZT97bmV3U3RhdGU6aSx2YWx1ZTpuLGhhc1Rocm93bjohMH06KGkuc2V0RHluYW1pY1N0cnVjdHVyZSh0aGlzLm5hbWUuZ2V0VGV4dCgpLG4pLHtuZXdTdGF0ZTppLHZhbHVlOnZvaWQgMCxoYXNUaHJvd246ITF9KX19LEYucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZS5nZXRUZXh0KCkrIiA9ICIrdGhpcy5iaW5kaW5nfSxGfSgpO3UuU3RydWN0dXJlQmluZGluZz1KO3ZhciB6PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRihiLGwpe3RoaXMubmFtZT1iLHRoaXMuYmluZGluZz1sfXJldHVybiBGLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgRih0aGlzLm5hbWUsdGhpcy5iaW5kaW5nLnNpbXBsaWZ5KCkpfSxGLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24oYixsLHQsbil7dmFyIGk9dGhpcy5iaW5kaW5nLmVsYWJvcmF0ZShiLGwsdCxuKTtyZXR1cm4gYi5zZXRTdGF0aWNTaWduYXR1cmUodGhpcy5uYW1lLmdldFRleHQoKSxpWzBdKSxbYixpWzFdLGlbMl0saVszXV19LEYucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGIpe3JldHVybiBiLnNldER5bmFtaWNTaWduYXR1cmUodGhpcy5uYW1lLmdldFRleHQoKSx0aGlzLmJpbmRpbmcuY29tcHV0ZUludGVyZmFjZShiKSksYn0sRi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lLmdldFRleHQoKSsiID0gIit0aGlzLmJpbmRpbmd9LEZ9KCk7dS5TaWduYXR1cmVCaW5kaW5nPXo7dmFyIHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBGKGIsbCx0LG4pe3RoaXMubmFtZT1iLHRoaXMuc2lnbmF0dXJlTmFtZT1sLHRoaXMuc2lnbmF0dXJlQmluZGluZz10LHRoaXMuYmluZGluZz1ufXJldHVybiBGLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3JldHVybiBuZXcgRih0aGlzLm5hbWUsdGhpcy5zaWduYXR1cmVOYW1lLHRoaXMuc2lnbmF0dXJlQmluZGluZy5zaW1wbGlmeSgpLHRoaXMuYmluZGluZy5zaW1wbGlmeSgpKX0sRi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGIsbCx0LG4pe2w9PT12b2lkIDAmJihsPW5ldyBNYXApLHQ9PT12b2lkIDAmJih0PSInKnQwIiksbj09PXZvaWQgMCYmKG49bmV3IE1hcCk7dmFyIGk9dGhpcy5zaWduYXR1cmVCaW5kaW5nLmVsYWJvcmF0ZShiLGwsdCxuKSxhPWIuZ2V0TmVzdGVkU3RhdGUoYi5pZCk7YS5zZXRTdGF0aWNTdHJ1Y3R1cmUodGhpcy5zaWduYXR1cmVOYW1lLmdldFRleHQoKSxpWzBdKTt2YXIgZj0hMSxTPVtdO3RoaXMuYmluZGluZyBpbnN0YW5jZW9mIG8mJihmPSEwLFMucHVzaChuZXcgRC5XYXJuaW5nKDAsJ0Z1bmN0b3IgIicrdGhpcy5uYW1lLmdldFRleHQoKStgIiBlbGFib3JhdGVkIGFwcHJveGltYXRlbHkuCmApKSk7dmFyIEw9dGhpcy5iaW5kaW5nLmVsYWJvcmF0ZShhLGlbMl0saVszXSxuKTtyZXR1cm4gYi5zZXRTdGF0aWNGdW5jdG9yKHRoaXMubmFtZS5nZXRUZXh0KCksW2lbMF0sTFswXSx0aGlzLnNpZ25hdHVyZU5hbWUuZ2V0VGV4dCgpXSxmKSxbYixpWzFdLmNvbmNhdChTKS5jb25jYXQoTFsxXSksTFsyXSxMWzNdXX0sRi5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oYil7dmFyIGw9dGhpcy5zaWduYXR1cmVCaW5kaW5nLmNvbXB1dGVJbnRlcmZhY2UoYiksdD1BLmdldEluaXRpYWxTdGF0ZSgpLmdldE5lc3RlZFN0YXRlKGIuaWQpO3JldHVybiB0LmR5bmFtaWNCYXNpcz1iLmdldER5bmFtaWNDaGFuZ2VzKC0xKSxiLnNldER5bmFtaWNGdW5jdG9yKHRoaXMubmFtZS5nZXRUZXh0KCksbmV3IFYuRHluYW1pY0Z1bmN0b3JJbmZvcm1hdGlvbih0aGlzLnNpZ25hdHVyZU5hbWUsbCx0aGlzLmJpbmRpbmcsdCkpLGJ9LEYucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZS5nZXRUZXh0KCkrIiggIit0aGlzLnNpZ25hdHVyZU5hbWUrIiA6ICIrdGhpcy5zaWduYXR1cmVCaW5kaW5nKyIgKSA9ICIrdGhpcy5iaW5kaW5nfSxGfSgpO3UuRnVuY3RvckJpbmRpbmc9cDt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIEYoKXt9cmV0dXJuIEYucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LEZ9KCk7dS5TcGVjaWZpY2F0aW9uPWM7dmFyIHc9ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsKXt2YXIgdD1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQudmFsdWVEZXNjcmlwdGlvbj1sLHR9cmV0dXJuIGcoYixGKSxiLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24obCx0LG4saSl7Zm9yKHZhciBhPW5ldyBWLlN0YXRpY0Jhc2lzKHt9LHt9LHt9LHt9LHt9KSxmPWZ1bmN0aW9uKGspe3ZhciBVPVMudmFsdWVEZXNjcmlwdGlvbltrXVsxXS5zaW1wbGlmeSgpLmluc3RhbnRpYXRlKGwsdCk7VS5nZXRUeXBlVmFyaWFibGVzKCkuZm9yRWFjaChmdW5jdGlvbihqLFgpe1U9bmV3IE0uVHlwZVZhcmlhYmxlQmluZChYLFUsail9KSxhLnNldFZhbHVlKFMudmFsdWVEZXNjcmlwdGlvbltrXVswXS5nZXRUZXh0KCksVSxWLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpfSxTPXRoaXMsTD0wO0w8dGhpcy52YWx1ZURlc2NyaXB0aW9uLmxlbmd0aDsrK0wpZihMKTtyZXR1cm5bYSxbXSx0LG5dfSxiLnByb3RvdHlwZS5jb21wdXRlSW50ZXJmYWNlPWZ1bmN0aW9uKGwpe2Zvcih2YXIgdD17fSxuPTA7bjx0aGlzLnZhbHVlRGVzY3JpcHRpb24ubGVuZ3RoOysrbil0W3RoaXMudmFsdWVEZXNjcmlwdGlvbltuXVswXS5nZXRUZXh0KCldPVYuSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRTtyZXR1cm4gbmV3IFYuRHluYW1pY0ludGVyZmFjZSh7fSx0LHt9KX0sYn0oYyk7dS5WYWx1ZVNwZWNpZmljYXRpb249dzt2YXIgVD1mdW5jdGlvbihGKXtmdW5jdGlvbiBiKGwpe3ZhciB0PUYuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC50eXBlRGVzY3JpcHRpb249bCx0fXJldHVybiBnKGIsRiksYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe2Zvcih2YXIgYT1uZXcgVi5TdGF0aWNCYXNpcyh7fSx7fSx7fSx7fSx7fSksZj0wO2Y8dGhpcy50eXBlRGVzY3JpcHRpb24ubGVuZ3RoOysrZilhLnNldFR5cGUodGhpcy50eXBlRGVzY3JpcHRpb25bZl1bMV0uZ2V0VGV4dCgpLG5ldyBNLkN1c3RvbVR5cGUodGhpcy50eXBlRGVzY3JpcHRpb25bZl1bMV0uZ2V0VGV4dCgpLHRoaXMudHlwZURlc2NyaXB0aW9uW2ZdWzBdKSxbXSx0aGlzLnR5cGVEZXNjcmlwdGlvbltmXVswXS5sZW5ndGgsITEpO3JldHVyblthLFtdLHQsbl19LGIucHJvdG90eXBlLmNvbXB1dGVJbnRlcmZhY2U9ZnVuY3Rpb24obCl7Zm9yKHZhciB0PXt9LG49MDtuPHRoaXMudHlwZURlc2NyaXB0aW9uLmxlbmd0aDsrK24pdFt0aGlzLnR5cGVEZXNjcmlwdGlvbltuXVsxXS5nZXRUZXh0KCldPVtdO3JldHVybiBuZXcgVi5EeW5hbWljSW50ZXJmYWNlKHQse30se30pfSxifShjKTt1LlR5cGVTcGVjaWZpY2F0aW9uPVQ7dmFyIE49ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsKXt2YXIgdD1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQudHlwZURlc2NyaXB0aW9uPWwsdH1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihsLHQsbixpKXtmb3IodmFyIGE9bmV3IFYuU3RhdGljQmFzaXMoe30se30se30se30se30pLGY9MDtmPHRoaXMudHlwZURlc2NyaXB0aW9uLmxlbmd0aDsrK2YpYS5zZXRUeXBlKHRoaXMudHlwZURlc2NyaXB0aW9uW2ZdWzFdLmdldFRleHQoKSxuZXcgTS5DdXN0b21UeXBlKHRoaXMudHlwZURlc2NyaXB0aW9uW2ZdWzFdLmdldFRleHQoKSx0aGlzLnR5cGVEZXNjcmlwdGlvbltmXVswXSksW10sdGhpcy50eXBlRGVzY3JpcHRpb25bZl1bMF0ubGVuZ3RoLCEwKTtyZXR1cm5bYSxbXSx0LG5dfSxiLnByb3RvdHlwZS5jb21wdXRlSW50ZXJmYWNlPWZ1bmN0aW9uKGwpe2Zvcih2YXIgdD17fSxuPTA7bjx0aGlzLnR5cGVEZXNjcmlwdGlvbi5sZW5ndGg7KytuKXRbdGhpcy50eXBlRGVzY3JpcHRpb25bbl1bMV0uZ2V0VGV4dCgpXT1bXTtyZXR1cm4gbmV3IFYuRHluYW1pY0ludGVyZmFjZSh0LHt9LHt9KX0sYn0oYyk7dS5FcXVhbGl0eVR5cGVTcGVjaWZpY2F0aW9uPU47dmFyICQ9ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsKXt2YXIgdD1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuZGF0YXR5cGVEZXNjcmlwdGlvbj1sLHR9cmV0dXJuIGcoYixGKSxiLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24obCx0LG4saSl7Zm9yKHZhciBhPW5ldyBWLlN0YXRpY0Jhc2lzKHt9LHt9LHt9LHt9LHt9KSxmPTA7Zjx0aGlzLmRhdGF0eXBlRGVzY3JpcHRpb24ubGVuZ3RoOysrZil7Zm9yKHZhciBTPVtdLEw9bmV3IE0uQ3VzdG9tVHlwZSh0aGlzLmRhdGF0eXBlRGVzY3JpcHRpb25bZl1bMV0uZ2V0VGV4dCgpLHRoaXMuZGF0YXR5cGVEZXNjcmlwdGlvbltmXVswXSksaz1mdW5jdGlvbihYKXtpZihTLnB1c2goVS5kYXRhdHlwZURlc2NyaXB0aW9uW2ZdWzJdW1hdWzBdLmdldFRleHQoKSksVS5kYXRhdHlwZURlc2NyaXB0aW9uW2ZdWzJdW1hdWzFdPT09dm9pZCAwKXt2YXIgWj1MO1ouZ2V0VHlwZVZhcmlhYmxlcygpLmZvckVhY2goZnVuY3Rpb24odGUsb2Upe1o9bmV3IE0uVHlwZVZhcmlhYmxlQmluZChvZSxaLHRlKX0pLGEuc2V0VmFsdWUoVS5kYXRhdHlwZURlc2NyaXB0aW9uW2ZdWzJdW1hdWzBdLmdldFRleHQoKSxaLFYuSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUil9ZWxzZXt2YXIgZWU9bmV3IE0uRnVuY3Rpb25UeXBlKFUuZGF0YXR5cGVEZXNjcmlwdGlvbltmXVsyXVtYXVsxXSxMKTtlZS5nZXRUeXBlVmFyaWFibGVzKCkuZm9yRWFjaChmdW5jdGlvbih0ZSxvZSl7ZWU9bmV3IE0uVHlwZVZhcmlhYmxlQmluZChvZSxlZSx0ZSl9KSxhLnNldFZhbHVlKFUuZGF0YXR5cGVEZXNjcmlwdGlvbltmXVsyXVtYXVswXS5nZXRUZXh0KCksZWUsVi5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX0NPTlNUUlVDVE9SKX19LFU9dGhpcyxqPTA7ajx0aGlzLmRhdGF0eXBlRGVzY3JpcHRpb25bZl1bMl0ubGVuZ3RoOysrailrKGopO2Euc2V0VHlwZSh0aGlzLmRhdGF0eXBlRGVzY3JpcHRpb25bZl1bMV0uZ2V0VGV4dCgpLEwsUyx0aGlzLmRhdGF0eXBlRGVzY3JpcHRpb25bZl1bMF0ubGVuZ3RoLCExKX1yZXR1cm5bYSxbXSx0LG5dfSxiLnByb3RvdHlwZS5jb21wdXRlSW50ZXJmYWNlPWZ1bmN0aW9uKGwpe2Zvcih2YXIgdD17fSxuPXt9LGk9MDtpPHRoaXMuZGF0YXR5cGVEZXNjcmlwdGlvbi5sZW5ndGg7KytpKXtmb3IodmFyIGE9W10sZj0wO2Y8dGhpcy5kYXRhdHlwZURlc2NyaXB0aW9uW2ldWzJdLmxlbmd0aDsrK2YpdFt0aGlzLmRhdGF0eXBlRGVzY3JpcHRpb25baV1bMl1bZl1bMF0uZ2V0VGV4dCgpXT1WLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfQ09OU1RSVUNUT1IsYS5wdXNoKHRoaXMuZGF0YXR5cGVEZXNjcmlwdGlvbltpXVsyXVtmXVswXS5nZXRUZXh0KCkpO25bdGhpcy5kYXRhdHlwZURlc2NyaXB0aW9uW2ldWzFdLmdldFRleHQoKV09YX1yZXR1cm4gbmV3IFYuRHluYW1pY0ludGVyZmFjZShuLHQse30pfSxiLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe2Zvcih2YXIgbD1bXSx0PTA7dDx0aGlzLmRhdGF0eXBlRGVzY3JpcHRpb24ubGVuZ3RoOysrdCl7Zm9yKHZhciBuPVtdLGk9MDtpPHRoaXMuZGF0YXR5cGVEZXNjcmlwdGlvblt0XVsyXS5sZW5ndGg7KytpKXRoaXMuZGF0YXR5cGVEZXNjcmlwdGlvblt0XVsyXVtpXVsxXT09PXZvaWQgMD9uLnB1c2godGhpcy5kYXRhdHlwZURlc2NyaXB0aW9uW3RdWzJdW2ldKTpuLnB1c2goW3RoaXMuZGF0YXR5cGVEZXNjcmlwdGlvblt0XVsyXVtpXVswXSx0aGlzLmRhdGF0eXBlRGVzY3JpcHRpb25bdF1bMl1baV1bMV0uc2ltcGxpZnkoKV0pO2wucHVzaChbdGhpcy5kYXRhdHlwZURlc2NyaXB0aW9uW3RdWzBdLHRoaXMuZGF0YXR5cGVEZXNjcmlwdGlvblt0XVsxXSxuXSl9cmV0dXJuIG5ldyBiKGwpfSxifShjKTt1LkRhdGF0eXBlU3BlY2lmaWNhdGlvbj0kO3ZhciBIPWZ1bmN0aW9uKEYpe2Z1bmN0aW9uIGIobCx0KXt2YXIgbj1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4ubmFtZT1sLG4ub2xkbmFtZT10LG59cmV0dXJuIGcoYixGKSxiLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24obCx0LG4saSl7dmFyIGE9dm9pZCAwO2lmKHRoaXMub2xkbmFtZSBpbnN0YW5jZW9mIEIuTG9uZ0lkZW50aWZpZXJUb2tlbil7dmFyIGY9bC5nZXRBbmRSZXNvbHZlU3RhdGljU3RydWN0dXJlKHRoaXMub2xkbmFtZSk7ZiE9PXZvaWQgMCYmKGE9Zi5nZXRUeXBlKHRoaXMub2xkbmFtZS5pZC5nZXRUZXh0KCkpKX1lbHNlIGE9bC5nZXRTdGF0aWNUeXBlKHRoaXMub2xkbmFtZS5nZXRUZXh0KCkpO2lmKGE9PT12b2lkIDApdGhyb3cgbmV3IEQuRWxhYm9yYXRpb25FcnJvcignVGhlIGRhdGF0eXBlICInK3RoaXMub2xkbmFtZS5nZXRUZXh0KCkrYCIgZG9lc24ndCBleGlzdC5gKTt2YXIgUz1hLnR5cGUuaW5zdGFudGlhdGUobCx0KSxMPW5ldyBWLlN0YXRpY0Jhc2lzKHt9LHt9LHt9LHt9LHt9KTtyZXR1cm4gTC5zZXRUeXBlKHRoaXMubmFtZS5nZXRUZXh0KCksbmV3IE0uRnVuY3Rpb25UeXBlKG5ldyBNLkN1c3RvbVR5cGUodGhpcy5uYW1lLmdldFRleHQoKSxTLnR5cGVBcmd1bWVudHMsdGhpcy5vbGRuYW1lIGluc3RhbmNlb2YgQi5Mb25nSWRlbnRpZmllclRva2VuP3RoaXMub2xkbmFtZTp2b2lkIDApLFMpLFtdLGEuYXJpdHksYS5hbGxvd3NFcXVhbGl0eSksW0wsW10sdCxuXX0sYi5wcm90b3R5cGUuY29tcHV0ZUludGVyZmFjZT1mdW5jdGlvbihsKXt2YXIgdD12b2lkIDA7aWYodGhpcy5vbGRuYW1lIGluc3RhbmNlb2YgQi5Mb25nSWRlbnRpZmllclRva2VuKXt2YXIgbj1sLmdldEFuZFJlc29sdmVEeW5hbWljU3RydWN0dXJlKHRoaXMub2xkbmFtZSk7biE9PXZvaWQgMCYmKHQ9bi5nZXRUeXBlKHRoaXMub2xkbmFtZS5pZC5nZXRUZXh0KCkpKX1lbHNlIHQ9bC5nZXREeW5hbWljVHlwZSh0aGlzLm9sZG5hbWUuZ2V0VGV4dCgpKTtpZih0PT09dm9pZCAwKXRocm93IG5ldyBELkV2YWx1YXRpb25FcnJvcignVGhlIGRhdGF0eXBlICInK3RoaXMub2xkbmFtZS5nZXRUZXh0KCkrJyIgZG9lcyBub3QgZXhpc3QuJyk7Zm9yKHZhciBpPXt9LGE9MDthPHQubGVuZ3RoOysrYSlpW3RbYV1dPVYuSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUjt2YXIgZj17fTtyZXR1cm4gZlt0aGlzLm5hbWUuZ2V0VGV4dCgpXT10LG5ldyBWLkR5bmFtaWNJbnRlcmZhY2UoZixpLHt9KX0sYn0oYyk7dS5EYXRhdHlwZVJlcGxpY2F0aW9uU3BlY2lmaWNhdGlvbj1IO3ZhciBQPWZ1bmN0aW9uKEYpe2Z1bmN0aW9uIGIobCl7dmFyIHQ9Ri5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LmV4Y2VwdGlvbkRlc2NyaXB0aW9uPWwsdH1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihsLHQsbixpKXtmb3IodmFyIGE9bmV3IFYuU3RhdGljQmFzaXMoe30se30se30se30se30pLGY9ZnVuY3Rpb24oayl7aWYoUy5leGNlcHRpb25EZXNjcmlwdGlvbltrXVsxXSE9PXZvaWQgMCl7dmFyIFU9Uy5leGNlcHRpb25EZXNjcmlwdGlvbltrXVsxXS5zaW1wbGlmeSgpLmluc3RhbnRpYXRlKGwsbmV3IE1hcCksaj1bXTtpZihVLmdldFR5cGVWYXJpYWJsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKFgsWil7ai5wdXNoKFopfSksai5sZW5ndGg+MCl0aHJvdyBELkVsYWJvcmF0aW9uRXJyb3IuZ2V0VW5ndWFyZGVkKGopO2Euc2V0VmFsdWUoUy5leGNlcHRpb25EZXNjcmlwdGlvbltrXVswXS5nZXRUZXh0KCksbmV3IE0uRnVuY3Rpb25UeXBlKFUsbmV3IE0uQ3VzdG9tVHlwZSgiZXhuIikpLm5vcm1hbGl6ZSgpWzBdLFYuSWRlbnRpZmllclN0YXR1cy5FWENFUFRJT05fQ09OU1RSVUNUT1IpfWVsc2UgYS5zZXRWYWx1ZShTLmV4Y2VwdGlvbkRlc2NyaXB0aW9uW2tdWzBdLmdldFRleHQoKSxuZXcgTS5DdXN0b21UeXBlKCJleG4iKS5ub3JtYWxpemUoKVswXSxWLklkZW50aWZpZXJTdGF0dXMuRVhDRVBUSU9OX0NPTlNUUlVDVE9SKX0sUz10aGlzLEw9MDtMPHRoaXMuZXhjZXB0aW9uRGVzY3JpcHRpb24ubGVuZ3RoOysrTClmKEwpO3JldHVyblthLFtdLHQsbl19LGIucHJvdG90eXBlLmNvbXB1dGVJbnRlcmZhY2U9ZnVuY3Rpb24obCl7Zm9yKHZhciB0PXt9LG49MDtuPHRoaXMuZXhjZXB0aW9uRGVzY3JpcHRpb24ubGVuZ3RoOysrbil0W3RoaXMuZXhjZXB0aW9uRGVzY3JpcHRpb25bbl1bMF0uZ2V0VGV4dCgpXT1WLklkZW50aWZpZXJTdGF0dXMuRVhDRVBUSU9OX0NPTlNUUlVDVE9SO3JldHVybiBuZXcgVi5EeW5hbWljSW50ZXJmYWNlKHt9LHQse30pfSxiLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe2Zvcih2YXIgbD1bXSx0PTA7dDx0aGlzLmV4Y2VwdGlvbkRlc2NyaXB0aW9uLmxlbmd0aDsrK3QpdGhpcy5leGNlcHRpb25EZXNjcmlwdGlvblt0XVsxXT09PXZvaWQgMD9sLnB1c2godGhpcy5leGNlcHRpb25EZXNjcmlwdGlvblt0XSk6bC5wdXNoKFt0aGlzLmV4Y2VwdGlvbkRlc2NyaXB0aW9uW3RdWzBdLHRoaXMuZXhjZXB0aW9uRGVzY3JpcHRpb25bdF1bMV0uc2ltcGxpZnkoKV0pO3JldHVybiBuZXcgYihsKX0sYn0oYyk7dS5FeGNlcHRpb25TcGVjaWZpY2F0aW9uPVA7dmFyIHg9ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsKXt2YXIgdD1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuc3RydWN0dXJlRGVzY3JpcHRpb249bCx0fXJldHVybiBnKGIsRiksYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe2Zvcih2YXIgYT1uZXcgVi5TdGF0aWNCYXNpcyh7fSx7fSx7fSx7fSx7fSksZj1bXSxTPXQsTD1uLGs9MDtrPHRoaXMuc3RydWN0dXJlRGVzY3JpcHRpb24ubGVuZ3RoOysrayl7dmFyIFU9dGhpcy5zdHJ1Y3R1cmVEZXNjcmlwdGlvbltrXVsxXS5lbGFib3JhdGUobCxTLEwsaSk7Zi5jb25jYXQoVVsxXSksUz1VWzJdLEw9VVszXSxhLnNldFN0cnVjdHVyZSh0aGlzLnN0cnVjdHVyZURlc2NyaXB0aW9uW2tdWzBdLmdldFRleHQoKSxVWzBdKX1yZXR1cm5bYSxmLFMsTF19LGIucHJvdG90eXBlLmNvbXB1dGVJbnRlcmZhY2U9ZnVuY3Rpb24obCl7Zm9yKHZhciB0PXt9LG49MDtuPHRoaXMuc3RydWN0dXJlRGVzY3JpcHRpb24ubGVuZ3RoOysrbil0W3RoaXMuc3RydWN0dXJlRGVzY3JpcHRpb25bbl1bMF0uZ2V0VGV4dCgpXT10aGlzLnN0cnVjdHVyZURlc2NyaXB0aW9uW25dWzFdLmNvbXB1dGVJbnRlcmZhY2UobCk7cmV0dXJuIG5ldyBWLkR5bmFtaWNJbnRlcmZhY2Uoe30se30sdCl9LGIucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBsPVtdLHQ9MDt0PHRoaXMuc3RydWN0dXJlRGVzY3JpcHRpb24ubGVuZ3RoOysrdClsLnB1c2goW3RoaXMuc3RydWN0dXJlRGVzY3JpcHRpb25bdF1bMF0sdGhpcy5zdHJ1Y3R1cmVEZXNjcmlwdGlvblt0XVsxXS5zaW1wbGlmeSgpXSk7cmV0dXJuIG5ldyBiKGwpfSxifShjKTt1LlN0cnVjdHVyZVNwZWNpZmljYXRpb249eDt2YXIgUj1mdW5jdGlvbihGKXtmdW5jdGlvbiBiKGwpe3ZhciB0PUYuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC5leHByZXNzaW9uPWwsdH1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihsLHQsbixpKXtmb3IodmFyIGE9bmV3IFYuU3RhdGljQmFzaXMoe30se30se30se30se30pLGY9W10sUz0wO1M8dGhpcy5leHByZXNzaW9uLmxlbmd0aDsrK1Mpe3ZhciBMPXRoaXMuZXhwcmVzc2lvbltTXS5lbGFib3JhdGUobCx0LG4saSk7YT1hLmV4dGVuZChMWzBdKSxmPWYuY29uY2F0KExbMV0pLHQ9TFsyXSxuPUxbM119cmV0dXJuW2EsZix0LG5dfSxiLnByb3RvdHlwZS5jb21wdXRlSW50ZXJmYWNlPWZ1bmN0aW9uKGwpe2Zvcih2YXIgdD1uZXcgVi5EeW5hbWljSW50ZXJmYWNlKHt9LHt9LHt9KSxuPTA7bjx0aGlzLmV4cHJlc3Npb24ubGVuZ3RoOysrbil0PXQuZXh0ZW5kKHRoaXMuZXhwcmVzc2lvbltuXS5jb21wdXRlSW50ZXJmYWNlKGwpKTtyZXR1cm4gdH0sYi5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIGw9W10sdD0wO3Q8dGhpcy5leHByZXNzaW9uLmxlbmd0aDsrK3QpbC5wdXNoKHRoaXMuZXhwcmVzc2lvblt0XS5zaW1wbGlmeSgpKTtyZXR1cm4gbmV3IGIobCl9LGJ9KGMpO3UuSW5jbHVkZVNwZWNpZmljYXRpb249Ujt2YXIgXz1mdW5jdGlvbihGKXtmdW5jdGlvbiBiKCl7cmV0dXJuIEYuY2FsbCh0aGlzKXx8dGhpc31yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihsLHQsbixpKXtyZXR1cm5bbmV3IFYuU3RhdGljQmFzaXMoe30se30se30se30se30pLFtdLHQsbl19LGIucHJvdG90eXBlLmNvbXB1dGVJbnRlcmZhY2U9ZnVuY3Rpb24obCl7cmV0dXJuIG5ldyBWLkR5bmFtaWNJbnRlcmZhY2Uoe30se30se30pfSxifShjKTt1LkVtcHR5U3BlY2lmaWNhdGlvbj1fO3ZhciBXPWZ1bmN0aW9uKEYpe2Z1bmN0aW9uIGIobCl7dmFyIHQ9Ri5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0LnNwZWNpZmljYXRpb25zPWwsdH1yZXR1cm4gZyhiLEYpLGIucHJvdG90eXBlLmVsYWJvcmF0ZT1mdW5jdGlvbihsLHQsbixpKXtmb3IodmFyIGE9bmV3IFYuU3RhdGljQmFzaXMoe30se30se30se30se30pLGY9W10sUz1sLEw9MDtMPHRoaXMuc3BlY2lmaWNhdGlvbnMubGVuZ3RoOysrTCl7dmFyIGs9dGhpcy5zcGVjaWZpY2F0aW9uc1tMXS5lbGFib3JhdGUoUyx0LG4saSk7YT1hLmV4dGVuZChrWzBdKSxmPWYuY29uY2F0KGtbMV0pLHQ9a1syXSxuPWtbM10sKFM9Uy5nZXROZXN0ZWRTdGF0ZShTLmlkKSkuc3RhdGljQmFzaXM9a1swXX1yZXR1cm5bYSxmLHQsbl19LGIucHJvdG90eXBlLmNvbXB1dGVJbnRlcmZhY2U9ZnVuY3Rpb24obCl7Zm9yKHZhciB0PW5ldyBWLkR5bmFtaWNJbnRlcmZhY2Uoe30se30se30pLG49MDtuPHRoaXMuc3BlY2lmaWNhdGlvbnMubGVuZ3RoOysrbil0PXQuZXh0ZW5kKHRoaXMuc3BlY2lmaWNhdGlvbnNbbl0uY29tcHV0ZUludGVyZmFjZShsKSk7cmV0dXJuIHR9LGIucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBsPVtdLHQ9MDt0PHRoaXMuc3BlY2lmaWNhdGlvbnMubGVuZ3RoOysrdClsLnB1c2godGhpcy5zcGVjaWZpY2F0aW9uc1t0XS5zaW1wbGlmeSgpKTtyZXR1cm4gbmV3IGIobCl9LGJ9KGMpO3UuU2VxdWVudGlhbFNwZWNpZmljYXRpb249Vzt2YXIgUT1mdW5jdGlvbihGKXtmdW5jdGlvbiBiKGwsdCl7dmFyIG49Ri5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnNwZWNpZmljYXRpb249bCxuLnR5cGVOYW1lcz10LG59cmV0dXJuIGcoYixGKSxiLnByb3RvdHlwZS5lbGFib3JhdGU9ZnVuY3Rpb24obCx0LG4saSl7dmFyIGE9dGhpcy5zcGVjaWZpY2F0aW9uLmVsYWJvcmF0ZShsLHQsbixpKSxmPWwuZ2V0TmVzdGVkU3RhdGUoMCk7Zi5zdGF0aWNCYXNpcz1hWzBdO2Zvcih2YXIgUz1bXSxMPVtdLGs9W10sVT0hMSxqPTA7ajx0aGlzLnR5cGVOYW1lcy5sZW5ndGg7KytqKXt2YXIgWD12b2lkIDAsWj1hWzBdLGVlPXRoaXMudHlwZU5hbWVzW2pdLmdldFRleHQoKTtpZih0aGlzLnR5cGVOYW1lc1tqXWluc3RhbmNlb2YgQi5Mb25nSWRlbnRpZmllclRva2VuPyhaPWYuZ2V0QW5kUmVzb2x2ZVN0YXRpY1N0cnVjdHVyZSh0aGlzLnR5cGVOYW1lc1tqXSkpIT09dm9pZCAwJiYoWD1aLmdldFR5cGUodGhpcy50eXBlTmFtZXNbal0uaWQuZ2V0VGV4dCgpKSxlZT10aGlzLnR5cGVOYW1lc1tqXS5pZC5nZXRUZXh0KCkpOlg9Zi5nZXRTdGF0aWNUeXBlKHRoaXMudHlwZU5hbWVzW2pdLmdldFRleHQoKSksWD09PXZvaWQgMHx8Wj09PXZvaWQgMCl0aHJvdyBuZXcgRC5FbGFib3JhdGlvbkVycm9yKCdVbmRlZmluZWQgdHlwZSAiJyt0aGlzLnR5cGVOYW1lc1tqXS5nZXRUZXh0KCkrJyIuJyk7VT1VfHxYLmFsbG93c0VxdWFsaXR5LFMucHVzaChYKSxMLnB1c2goWiksay5wdXNoKGVlKX1mb3Ioaj0xO2o8dGhpcy50eXBlTmFtZXMubGVuZ3RoOysrailMW2pdLnNldFR5cGUoa1tqXSxuZXcgTS5GdW5jdGlvblR5cGUoU1tqXS50eXBlLFNbMF0udHlwZSksW10sMCxVKTtyZXR1cm4gYX0sYi5wcm90b3R5cGUuY29tcHV0ZUludGVyZmFjZT1mdW5jdGlvbihsKXtyZXR1cm4gdGhpcy5zcGVjaWZpY2F0aW9uLmNvbXB1dGVJbnRlcmZhY2UobCl9LGJ9KGMpO3UuU2hhcmluZ1NwZWNpZmljYXRpb249UTt2YXIgbmU9ZnVuY3Rpb24oRil7ZnVuY3Rpb24gYihsKXt2YXIgdD1GLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuYWxpYXM9bCx0fXJldHVybiBnKGIsRiksYi5wcm90b3R5cGUuZWxhYm9yYXRlPWZ1bmN0aW9uKGwsdCxuLGkpe3Rocm93IG5ldyBELkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiQW5kIHlvdSBkb24ndCBzZWVtIHRvIHVuZGVyc3RhbmRcdTIwMjYiKX0sYi5wcm90b3R5cGUuY29tcHV0ZUludGVyZmFjZT1mdW5jdGlvbihsKXt0aHJvdyBuZXcgRC5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkJlaW5nIGFuIGludGVycHJldGVyIGlzIHN1ZmZlcmluZy4iKX0sYi5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIGw9W10sdD0wO3Q8dGhpcy5hbGlhcy5sZW5ndGg7Kyt0KWwucHVzaChbdGhpcy5hbGlhc1t0XVswXSx0aGlzLmFsaWFzW3RdWzFdXSk7dmFyIG49bmV3IHkobmV3IFQobCkpO2Zvcih0PTA7dDx0aGlzLmFsaWFzLmxlbmd0aDsrK3Qpbj1uZXcgdihuLHRoaXMuYWxpYXNbdF1bMF0sdGhpcy5hbGlhc1t0XVsxXSx0aGlzLmFsaWFzW3RdWzJdKTtyZXR1cm4gbmV3IFIoW25dKS5zaW1wbGlmeSgpfSxifShjKTt1LlR5cGVBbGlhc1NwZWNpZmljYXRpb249bmV9LDIxNTooZmUsdSxLKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LnBhcnNlPXUuUGFyc2VyPXZvaWQgMDt2YXIgbT1LKDQ5NCksZz1LKDY5OSkscz1LKDc1OCkscT1LKDUzNCksQj1LKDY1NSksTT1LKDY3NyksVj1mdW5jdGlvbigpe2Z1bmN0aW9uIEQoaCxBLEksTyl7aWYodGhpcy50b2tlbnM9aCx0aGlzLnN0YXRlPUEsdGhpcy5jdXJyZW50SWQ9SSx0aGlzLm9wdGlvbnM9Tyx0aGlzLnBvc2l0aW9uPTAsdGhpcy5uZXdjb25zPW5ldyBTZXQsdGhpcy5zdGF0ZT09PXZvaWQgMCl0aHJvdyBuZXcgcy5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIldoYXQgYXJlIHlvdSwgc3R1cGlkPyBIdXJyeSB1cCBhbmQgZ2l2ZSBtZSBhIHN0YXRlIGFscmVhZHkhIil9cmV0dXJuIEQucHJvdG90eXBlLmFzc2VydEZpbmlzaGVkPWZ1bmN0aW9uKCl7aWYodGhpcy5wb3NpdGlvbjw9dGhpcy50b2tlbnMubGVuZ3RoLTEpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0p1bmsgYWZ0ZXIgZGVjbGFyYXRpb246ICInK3RoaXMuY3VycmVudFRva2VuKCkuZ2V0VGV4dCgpKyciLicpfSxELnByb3RvdHlwZS5hc3NlcnRLZXl3b3JkVG9rZW49ZnVuY3Rpb24oaCxBKXtpZihBPT09dm9pZCAwJiYoQT12b2lkIDApLCEoaCBpbnN0YW5jZW9mIHEuS2V5d29yZFRva2VuKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgYSByZXNlcnZlZCB3b3JkLCBnb3QgIicraC5nZXRUZXh0KCkrJyIgKCcraC50eXBlTmFtZSgpKyIpLiIpO2lmKEEhPT12b2lkIDAmJmgudGV4dCE9PUEpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0V4cGVjdGVkICInK0ErJyIgYnV0IGdvdCAiJytoLnRleHQrJyIuJyl9LEQucHJvdG90eXBlLmFzc2VydFZpZFRva2VuPWZ1bmN0aW9uKGgpe2lmKCFoLmlzVmlkKCkpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0V4cGVjdGVkIGFuIGlkZW50aWZpZXIsIGdvdCAiJytoLmdldFRleHQoKSsnIiAoJytoLnR5cGVOYW1lKCkrIikuIil9LEQucHJvdG90eXBlLmFzc2VydElkZW50aWZpZXJUb2tlbj1mdW5jdGlvbihoKXtpZighKGggaW5zdGFuY2VvZiBxLklkZW50aWZpZXJUb2tlbikpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0V4cGVjdGVkIGFuIGlkZW50aWZpZXIsIGdvdCAiJytoLmdldFRleHQoKSsnIiAoJytoLnR5cGVOYW1lKCkrIikuIil9LEQucHJvdG90eXBlLmFzc2VydFZpZE9yTG9uZ1Rva2VuPWZ1bmN0aW9uKGgpe2lmKCEoaC5pc1ZpZCgpfHxoIGluc3RhbmNlb2YgcS5Mb25nSWRlbnRpZmllclRva2VuKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgYW4gaWRlbnRpZmllciwgZ290ICInK2guZ2V0VGV4dCgpKyciICgnK2gudHlwZU5hbWUoKSsiKS4iKX0sRC5wcm90b3R5cGUuYXNzZXJ0SWRlbnRpZmllck9yTG9uZ1Rva2VuPWZ1bmN0aW9uKGgpe2lmKCEoaCBpbnN0YW5jZW9mIHEuSWRlbnRpZmllclRva2VufHxoIGluc3RhbmNlb2YgcS5Mb25nSWRlbnRpZmllclRva2VuKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgYW4gaWRlbnRpZmllciwgZ290ICInK2guZ2V0VGV4dCgpKyciICgnK2gudHlwZU5hbWUoKSsiKS4iKX0sRC5wcm90b3R5cGUuYXNzZXJ0UmVjb3JkTGFiZWxUb2tlbj1mdW5jdGlvbihoKXtpZighaC5pc1ZhbGlkUmVjb3JkTGFiZWwoKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgYSByZWNvcmQgbGFiZWwgIicraC5nZXRUZXh0KCkrJyIgKCcraC50eXBlTmFtZSgpKyIpLiIpfSxELnByb3RvdHlwZS5jaGVja1ZpZE9yTG9uZ1Rva2VuPWZ1bmN0aW9uKGgpe3JldHVybiBoLmlzVmlkKCl8fGggaW5zdGFuY2VvZiBxLkxvbmdJZGVudGlmaWVyVG9rZW59LEQucHJvdG90eXBlLmNoZWNrSWRlbnRpZmllck9yTG9uZ1Rva2VuPWZ1bmN0aW9uKGgpe3JldHVybiBoIGluc3RhbmNlb2YgcS5JZGVudGlmaWVyVG9rZW58fGggaW5zdGFuY2VvZiBxLkxvbmdJZGVudGlmaWVyVG9rZW59LEQucHJvdG90eXBlLmNoZWNrS2V5d29yZFRva2VuPWZ1bmN0aW9uKGgsQSl7cmV0dXJuIEE9PT12b2lkIDAmJihBPXZvaWQgMCksaCBpbnN0YW5jZW9mIHEuS2V5d29yZFRva2VuJiYoQT09PXZvaWQgMHx8aC50ZXh0PT09QSl9LEQucHJvdG90eXBlLmd1YXJkU3RhclRva2VuPWZ1bmN0aW9uKGgpe3JldHVybiBoIGluc3RhbmNlb2YgcS5TdGFyVG9rZW4/bmV3IHEuSWRlbnRpZmllclRva2VuKCIqIik6aH0sRC5wcm90b3R5cGUucGFyc2VPcElkZW50aWZpZXJUb2tlbj1mdW5jdGlvbihoKXtoPT09dm9pZCAwJiYoaD0hMSk7dmFyIEE9dGhpcy5jdXJyZW50VG9rZW4oKSxJPXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwib3AiKTtJJiYrK3RoaXMucG9zaXRpb24saD90aGlzLmFzc2VydElkZW50aWZpZXJPckxvbmdUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKTp0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmd1YXJkU3RhclRva2VuKHRoaXMuY3VycmVudFRva2VuKCkpKTt2YXIgTz10aGlzLmN1cnJlbnRUb2tlbigpO3JldHVybiBPLm9wUHJlZml4ZWQ9SSwrK3RoaXMucG9zaXRpb24sT30sRC5wcm90b3R5cGUucGFyc2VBdG9taWNFeHByZXNzaW9uPWZ1bmN0aW9uKCl7dmFyIGg9dGhpcy5jdXJyZW50VG9rZW4oKTtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsIm9wIikpeysrdGhpcy5wb3NpdGlvbjt2YXIgQT10aGlzLmN1cnJlbnRUb2tlbigpO3JldHVybiB0aGlzLmFzc2VydFZpZE9yTG9uZ1Rva2VuKEEpLEEub3BQcmVmaXhlZD0hMCwrK3RoaXMucG9zaXRpb24sbmV3IG0uVmFsdWVJZGVudGlmaWVyKEEpfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwieyIpKXJldHVybisrdGhpcy5wb3NpdGlvbix0aGlzLnBhcnNlRXhwcmVzc2lvblJvdygpO2lmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwiKCIpKXtpZigrK3RoaXMucG9zaXRpb24sdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCIpIikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBtLlR1cGxlKFtdKTtmb3IodmFyIEk9W3RoaXMucGFyc2VFeHByZXNzaW9uKCldLE89ITEsRT0hMTs7KWlmKEE9dGhpcy5jdXJyZW50VG9rZW4oKSwhdGhpcy5jaGVja0tleXdvcmRUb2tlbihBLCIsIil8fE8pe2lmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiOyIpJiYhRSl7aWYoKyt0aGlzLnBvc2l0aW9uLE89ITAsIXRoaXMub3B0aW9ucy5hbGxvd1N1Y2Nlc3Nvck1MfHwhdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCIpIikpe0kucHVzaCh0aGlzLnBhcnNlRXhwcmVzc2lvbigpKTtjb250aW51ZX1BPXRoaXMuY3VycmVudFRva2VuKCl9aWYoIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiKSIpKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdFeHBlY3RlZCAiLCIsICI7IiBvciAiKSIgYnV0IGdvdCAiJytBLmdldFRleHQoKSsnIi4nKTtpZigrK3RoaXMucG9zaXRpb24sSS5sZW5ndGg9PT0xKXJldHVybiBJWzBdO2lmKEUpcmV0dXJuIG5ldyBtLlR1cGxlKEkpO2lmKE8pcmV0dXJuIG5ldyBtLlNlcXVlbmNlKEkpO0kucHVzaCh0aGlzLnBhcnNlRXhwcmVzc2lvbigpKX1lbHNlKyt0aGlzLnBvc2l0aW9uLEU9ITAsSS5wdXNoKHRoaXMucGFyc2VFeHByZXNzaW9uKCkpfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwiWyIpKXtpZigrK3RoaXMucG9zaXRpb24sdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJdIikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBtLkxpc3QoW10pO2ZvcihJPVt0aGlzLnBhcnNlRXhwcmVzc2lvbigpXTs7KXtpZihBPXRoaXMuY3VycmVudFRva2VuKCksIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiLCIpKXtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKEEsIl0iKSlyZXR1cm4rK3RoaXMucG9zaXRpb24sbmV3IG0uTGlzdChJKTt0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIiwiIG9yICJdIiBidXQgZm91bmQgIicrQS5nZXRUZXh0KCkrJyIuJyl9Kyt0aGlzLnBvc2l0aW9uLEkucHVzaCh0aGlzLnBhcnNlRXhwcmVzc2lvbigpKX19aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCIjIikpeysrdGhpcy5wb3NpdGlvbjt2YXIgcj10aGlzLmN1cnJlbnRUb2tlbigpO2lmKHRoaXMub3B0aW9ucy5hbGxvd1ZlY3RvciYmdGhpcy5jaGVja0tleXdvcmRUb2tlbihyLCJbIikpe2lmKCsrdGhpcy5wb3NpdGlvbix0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIl0iKSlyZXR1cm4rK3RoaXMucG9zaXRpb24sbmV3IG0uVmVjdG9yKFtdKTtmb3IoST1bdGhpcy5wYXJzZUV4cHJlc3Npb24oKV07Oyl7aWYoQT10aGlzLmN1cnJlbnRUb2tlbigpLCF0aGlzLmNoZWNrS2V5d29yZFRva2VuKEEsIiwiKSl7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihBLCJdIikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBtLlZlY3RvcihJKTt0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIiwiIG9yICJdIiBidXQgZm91bmQgIicrQS5nZXRUZXh0KCkrJyIuJyl9Kyt0aGlzLnBvc2l0aW9uLEkucHVzaCh0aGlzLnBhcnNlRXhwcmVzc2lvbigpKX19cmV0dXJuIHRoaXMuYXNzZXJ0UmVjb3JkTGFiZWxUb2tlbihyKSwrK3RoaXMucG9zaXRpb24sbmV3IG0uUmVjb3JkU2VsZWN0b3Iocil9aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJsZXQiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBlPXRoaXMuc3RhdGU7dGhpcy5zdGF0ZT10aGlzLnN0YXRlLmdldE5lc3RlZFN0YXRlKHRoaXMuc3RhdGUuaWQpO3ZhciBvPW5ldyBTZXQ7dGhpcy5uZXdjb25zLmZvckVhY2goZnVuY3Rpb24oQyl7bz1vLmFkZChDKX0pO3ZhciB5PXRoaXMucGFyc2VEZWNsYXJhdGlvbigpO3RoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImluIiksKyt0aGlzLnBvc2l0aW9uO2Zvcih2YXIgZD1bdGhpcy5wYXJzZUV4cHJlc3Npb24oKV0sdj10aGlzLmN1cnJlbnRUb2tlbigpO3RoaXMuY2hlY2tLZXl3b3JkVG9rZW4odiwiOyIpOyl7aWYoKyt0aGlzLnBvc2l0aW9uLHRoaXMub3B0aW9ucy5hbGxvd1N1Y2Nlc3Nvck1MJiZ0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImVuZCIpKXt2PXRoaXMuY3VycmVudFRva2VuKCk7YnJlYWt9ZC5wdXNoKHRoaXMucGFyc2VFeHByZXNzaW9uKCkpLHY9dGhpcy5jdXJyZW50VG9rZW4oKX1yZXR1cm4gdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odiwiZW5kIiksKyt0aGlzLnBvc2l0aW9uLHRoaXMuc3RhdGU9ZSx0aGlzLm5ld2NvbnM9byxkLmxlbmd0aD49Mj9uZXcgbS5Mb2NhbERlY2xhcmF0aW9uRXhwcmVzc2lvbih5LG5ldyBtLlNlcXVlbmNlKGQpKTpuZXcgbS5Mb2NhbERlY2xhcmF0aW9uRXhwcmVzc2lvbih5LGRbMF0pfWlmKGggaW5zdGFuY2VvZiBxLkNvbnN0YW50VG9rZW4pcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBtLkNvbnN0YW50KGgpO2lmKGguaXNWaWQoKXx8aCBpbnN0YW5jZW9mIHEuTG9uZ0lkZW50aWZpZXJUb2tlbil7aWYoKyt0aGlzLnBvc2l0aW9uLHRoaXMuc3RhdGUuZ2V0SW5maXhTdGF0dXMoaCkhPT12b2lkIDAmJnRoaXMuc3RhdGUuZ2V0SW5maXhTdGF0dXMoaCkuaW5maXgpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0luZml4IG9wZXJhdG9yICInK2guZ2V0VGV4dCgpKyciIGFwcGVhcmVkIGluIG5vbi1pbmZpeCBjb250ZXh0IHdpdGhvdXQgIm9wIi4nKTtyZXR1cm4gbmV3IG0uVmFsdWVJZGVudGlmaWVyKGgpfXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdFeHBlY3RlZCBhdG9taWMgZXhwcmVzc2lvbiwgIicraC5nZXRUZXh0KCkrJyIgZm91bmQuJyl9LEQucHJvdG90eXBlLnBhcnNlRXhwcmVzc2lvblJvdz1mdW5jdGlvbigpe2Zvcih2YXIgaD1bXSxBPSEwOzspe3ZhciBJPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJ9IikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBtLlJlY29yZCghMCxoKTtpZihBfHwhdGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCIsIikpe2lmKEE9ITEsIUkuaXNWYWxpZFJlY29yZExhYmVsKCkpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0V4cGVjdGVkICJ9Iiwgb3IgaWRlbnRpZmllciwgZ290ICInK0kuZ2V0VGV4dCgpKyciLicpOysrdGhpcy5wb3NpdGlvbjt2YXIgTz10aGlzLmN1cnJlbnRUb2tlbigpO3RoaXMuYXNzZXJ0S2V5d29yZFRva2VuKE8sIj0iKSwrK3RoaXMucG9zaXRpb24saC5wdXNoKFtJLmdldFRleHQoKSx0aGlzLnBhcnNlRXhwcmVzc2lvbigpXSl9ZWxzZSsrdGhpcy5wb3NpdGlvbn19LEQucHJvdG90eXBlLnBhcnNlQXBwbGljYXRpb25FeHByZXNzaW9uPWZ1bmN0aW9uKCl7Zm9yKHZhciBoPXRoaXMucGFyc2VBdG9taWNFeHByZXNzaW9uKCk7Oyl7dmFyIEE9dGhpcy5wb3NpdGlvbixJPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja1ZpZE9yTG9uZ1Rva2VuKEkpJiZ0aGlzLnN0YXRlLmdldEluZml4U3RhdHVzKEkpIT09dm9pZCAwJiZ0aGlzLnN0YXRlLmdldEluZml4U3RhdHVzKEkpLmluZml4KWJyZWFrO3RyeXt2YXIgTz10aGlzLnBhcnNlQXRvbWljRXhwcmVzc2lvbigpO2g9bmV3IG0uRnVuY3Rpb25BcHBsaWNhdGlvbihoLE8pfWNhdGNoKEUpe2lmKEUgaW5zdGFuY2VvZiBzLkluY29tcGxldGVFcnJvcil0aHJvdyBFO3RoaXMucG9zaXRpb249QTticmVha319cmV0dXJuIGh9LEQucHJvdG90eXBlLnBhcnNlSW5maXhFeHByZXNzaW9uPWZ1bmN0aW9uKCl7Zm9yKHZhciBoPVtdLEE9W10sST0wOzspe2gucHVzaCh0aGlzLnBhcnNlQXBwbGljYXRpb25FeHByZXNzaW9uKCkpO3ZhciBPPXRoaXMuY3VycmVudFRva2VuKCk7aWYoIXRoaXMuY2hlY2tWaWRPckxvbmdUb2tlbihPKXx8dGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyhPKT09PXZvaWQgMHx8IXRoaXMuc3RhdGUuZ2V0SW5maXhTdGF0dXMoTykuaW5maXgpYnJlYWs7Kyt0aGlzLnBvc2l0aW9uLEEucHVzaChbTyxJKytdKX1yZXR1cm4gST09PTA/aFswXTpuZXcgbS5JbmZpeEV4cHJlc3Npb24oaCxBKS5yZVBhcnNlKHRoaXMuc3RhdGUpfSxELnByb3RvdHlwZS5wYXJzZUFwcGVuZGVkRXhwcmVzc2lvbj1mdW5jdGlvbigpe3ZhciBoPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJyYWlzZSIpKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgbS5SYWlzZUV4Y2VwdGlvbih0aGlzLnBhcnNlRXhwcmVzc2lvbigpKTtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsImlmIikpeysrdGhpcy5wb3NpdGlvbjt2YXIgQT10aGlzLnBhcnNlRXhwcmVzc2lvbigpO3RoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksInRoZW4iKSwrK3RoaXMucG9zaXRpb247dmFyIEk9dGhpcy5wYXJzZUV4cHJlc3Npb24oKTtyZXR1cm4gdGhpcy5vcHRpb25zLmFsbG93U3VjY2Vzc29yTUwmJiF0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImVsc2UiKT9uZXcgbS5Db25kaXRpb25hbChBLEksbmV3IG0uVHVwbGUoW10pKToodGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiZWxzZSIpLCsrdGhpcy5wb3NpdGlvbixuZXcgbS5Db25kaXRpb25hbChBLEksdGhpcy5wYXJzZUV4cHJlc3Npb24oKSkpfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwiY2FzZSIpKXJldHVybisrdGhpcy5wb3NpdGlvbixBPXRoaXMucGFyc2VFeHByZXNzaW9uKCksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwib2YiKSwrK3RoaXMucG9zaXRpb24sbmV3IG0uQ2FzZUFuYWx5c2lzKEEsdGhpcy5wYXJzZU1hdGNoKCkpO2lmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwid2hpbGUiKSlyZXR1cm4rK3RoaXMucG9zaXRpb24sQT10aGlzLnBhcnNlRXhwcmVzc2lvbigpLHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImRvIiksKyt0aGlzLnBvc2l0aW9uLG5ldyBtLldoaWxlKEEsdGhpcy5wYXJzZUV4cHJlc3Npb24oKSk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJmbiIpKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgbS5MYW1iZGEodGhpcy5wYXJzZU1hdGNoKCkpO2Zvcih2YXIgTz10aGlzLnBhcnNlSW5maXhFeHByZXNzaW9uKCksRT10aGlzLmN1cnJlbnRUb2tlbigpO3RoaXMuY2hlY2tLZXl3b3JkVG9rZW4oRSwiOiIpOykrK3RoaXMucG9zaXRpb24sTz1uZXcgbS5UeXBlZEV4cHJlc3Npb24oTyx0aGlzLnBhcnNlVHlwZSgpKSxFPXRoaXMuY3VycmVudFRva2VuKCk7cmV0dXJuIE99LEQucHJvdG90eXBlLnBhcnNlRXhwcmVzc2lvbj1mdW5jdGlvbigpe3ZhciBoPXRoaXMucGFyc2VBcHBlbmRlZEV4cHJlc3Npb24oKSxBPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihBLCJhbmRhbHNvIil8fHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwib3JlbHNlIikpe2Zvcih2YXIgST1bW2gsWzBdXV0sTz1bXSxFPTA7Oyl7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihBLCJvcmVsc2UiKSlPLnB1c2goWzEsRSsrXSksKyt0aGlzLnBvc2l0aW9uO2Vsc2V7aWYoIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiYW5kYWxzbyIpKWJyZWFrO08ucHVzaChbMCxFKytdKSwrK3RoaXMucG9zaXRpb259SS5wdXNoKFt0aGlzLnBhcnNlQXBwZW5kZWRFeHByZXNzaW9uKCksW0VdXSksQT10aGlzLmN1cnJlbnRUb2tlbigpfU8uc29ydCgpO2Zvcih2YXIgcj0wO3I8Ty5sZW5ndGg7KytyKXt2YXIgZSxvPUlbT1tyXVsxXV1bMF0seT1JW09bcl1bMV0rMV1bMF07ZT1PW3JdWzBdPT09MD9uZXcgbS5Db25qdW5jdGlvbihvLHkpOm5ldyBtLkRpc2p1bmN0aW9uKG8seSk7Zm9yKHZhciBkPUlbT1tyXVsxXV1bMV0sdj0wLEM9SVtPW3JdWzFdKzFdWzFdO3Y8Qy5sZW5ndGg7disrKXt2YXIgRz1DW3ZdO2QucHVzaChHKX1mb3IodmFyIFk9MCxKPWQ7WTxKLmxlbmd0aDtZKyspSVtHPUpbWV1dPVtlLGRdfWg9SVswXVswXX1mb3IoQT10aGlzLmN1cnJlbnRUb2tlbigpO3RoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiaGFuZGxlIik7KSsrdGhpcy5wb3NpdGlvbixoPW5ldyBtLkhhbmRsZUV4Y2VwdGlvbihoLHRoaXMucGFyc2VNYXRjaCgpKSxBPXRoaXMuY3VycmVudFRva2VuKCk7cmV0dXJuIGh9LEQucHJvdG90eXBlLnBhcnNlU2ltcGxlU3RydWN0dXJlRXhwcmVzc2lvbj1mdW5jdGlvbigpe3ZhciBoPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJzdHJ1Y3QiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBBPXRoaXMucGFyc2VEZWNsYXJhdGlvbighMSwhMCk7cmV0dXJuIHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImVuZCIpLCsrdGhpcy5wb3NpdGlvbixuZXcgTS5TdHJ1Y3R1cmVFeHByZXNzaW9uKEEpfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwibGV0IikpeysrdGhpcy5wb3NpdGlvbixBPXRoaXMucGFyc2VEZWNsYXJhdGlvbighMSwhMCksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiaW4iKSwrK3RoaXMucG9zaXRpb247dmFyIEk9dGhpcy5wYXJzZVN0cnVjdHVyZUV4cHJlc3Npb24oKTtyZXR1cm4gdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiZW5kIiksKyt0aGlzLnBvc2l0aW9uLG5ldyBNLkxvY2FsRGVjbGFyYXRpb25TdHJ1Y3R1cmVFeHByZXNzaW9uKEEsSSl9aWYoaCBpbnN0YW5jZW9mIHEuSWRlbnRpZmllclRva2VuKWlmKCsrdGhpcy5wb3NpdGlvbix0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIigiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBPPXRoaXMucG9zaXRpb247dHJ5e3JldHVybiBJPXRoaXMucGFyc2VTdHJ1Y3R1cmVFeHByZXNzaW9uKCksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiKSIpLCsrdGhpcy5wb3NpdGlvbixuZXcgTS5GdW5jdG9yQXBwbGljYXRpb24oaCxJKX1jYXRjaHtyZXR1cm4gdGhpcy5wb3NpdGlvbj1PLEE9dGhpcy5wYXJzZURlY2xhcmF0aW9uKCExLCEwKSx0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCIpIiksKyt0aGlzLnBvc2l0aW9uLG5ldyBNLkZ1bmN0b3JBcHBsaWNhdGlvbihoLG5ldyBNLlN0cnVjdHVyZUV4cHJlc3Npb24oQSkpfX1lbHNlLS10aGlzLnBvc2l0aW9uO2lmKHRoaXMuY2hlY2tJZGVudGlmaWVyT3JMb25nVG9rZW4oaCkpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBNLlN0cnVjdHVyZUlkZW50aWZpZXIoaCk7dGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoIkV4cGVjdGVkIGEgc2ltcGxlIHN0cnVjdHVyZSBleHByZXNzaW9uLiIpfSxELnByb3RvdHlwZS5wYXJzZVN0cnVjdHVyZUV4cHJlc3Npb249ZnVuY3Rpb24oKXtmb3IodmFyIGg9dGhpcy5wYXJzZVNpbXBsZVN0cnVjdHVyZUV4cHJlc3Npb24oKTs7KWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiOiIpKSsrdGhpcy5wb3NpdGlvbixoPW5ldyBNLlRyYW5zcGFyZW50Q29uc3RyYWludChoLHRoaXMucGFyc2VTaWduYXR1cmVFeHByZXNzaW9uKCkpO2Vsc2V7aWYoIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiOj4iKSlicmVhazsrK3RoaXMucG9zaXRpb24saD1uZXcgTS5PcGFxdWVDb25zdHJhaW50KGgsdGhpcy5wYXJzZVNpZ25hdHVyZUV4cHJlc3Npb24oKSl9cmV0dXJuIGh9LEQucHJvdG90eXBlLnBhcnNlU2ltcGxlU2lnbmF0dXJlRXhwcmVzc2lvbj1mdW5jdGlvbigpe3ZhciBoPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJzaWciKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBBPXRoaXMucGFyc2VTcGVjaWZpY2F0aW9uKCk7cmV0dXJuIHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImVuZCIpLCsrdGhpcy5wb3NpdGlvbixuZXcgTS5TaWduYXR1cmVFeHByZXNzaW9uKEEpfWlmKGggaW5zdGFuY2VvZiBxLklkZW50aWZpZXJUb2tlbilyZXR1cm4rK3RoaXMucG9zaXRpb24sbmV3IE0uU2lnbmF0dXJlSWRlbnRpZmllcihoKTt0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcigiRXhwZWN0ZWQgYSBzaW1wbGUgc2lnbmF0dXJlIGV4cHJlc3Npb24uIil9LEQucHJvdG90eXBlLnBhcnNlU2lnbmF0dXJlRXhwcmVzc2lvbj1mdW5jdGlvbigpe2Zvcih2YXIgaD10aGlzLnBhcnNlU2ltcGxlU2lnbmF0dXJlRXhwcmVzc2lvbigpLEE9ITA7dGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJ3aGVyZSIpfHwhQSYmdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJhbmQiKTspe0E9ITEsKyt0aGlzLnBvc2l0aW9uLHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksInR5cGUiKSwrK3RoaXMucG9zaXRpb247dmFyIEk9dGhpcy5wYXJzZVR5cGVWYXJTZXF1ZW5jZSgpO3RoaXMuYXNzZXJ0SWRlbnRpZmllck9yTG9uZ1Rva2VuKHRoaXMuY3VycmVudFRva2VuKCkpO3ZhciBPPXRoaXMuY3VycmVudFRva2VuKCk7Kyt0aGlzLnBvc2l0aW9uLHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIj0iKSwrK3RoaXMucG9zaXRpb24saD1uZXcgTS5UeXBlUmVhbGlzYXRpb24oaCxJLE8sdGhpcy5wYXJzZVR5cGUoKSl9cmV0dXJuIGh9LEQucHJvdG90eXBlLnBhcnNlU2ltcGxlU3BlY2lmaWNhdGlvbj1mdW5jdGlvbigpe3ZhciBoPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJ2YWwiKSl7Kyt0aGlzLnBvc2l0aW9uO2Zvcih2YXIgQT1bXTs7KXt0aGlzLmFzc2VydElkZW50aWZpZXJPckxvbmdUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKTt2YXIgST10aGlzLmN1cnJlbnRUb2tlbigpO2lmKCsrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI6IiksKyt0aGlzLnBvc2l0aW9uLEEucHVzaChbSSx0aGlzLnBhcnNlVHlwZSgpXSksIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiYW5kIikpYnJlYWs7Kyt0aGlzLnBvc2l0aW9ufXJldHVybiBuZXcgTS5WYWx1ZVNwZWNpZmljYXRpb24oQSl9aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJ0eXBlIikpeysrdGhpcy5wb3NpdGlvbixBPVtdO2Zvcih2YXIgTz10aGlzLnBvc2l0aW9uOzspe3ZhciBFPXRoaXMucGFyc2VUeXBlVmFyU2VxdWVuY2UoKTtpZih0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKSxBLnB1c2goW0UsdGhpcy5jdXJyZW50VG9rZW4oKV0pLCsrdGhpcy5wb3NpdGlvbix0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIj0iKSl7dmFyIHI9W107Zm9yKHRoaXMucG9zaXRpb249TztFPXRoaXMucGFyc2VUeXBlVmFyU2VxdWVuY2UoKSx0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKSxJPXRoaXMuY3VycmVudFRva2VuKCksKyt0aGlzLnBvc2l0aW9uLHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIj0iKSwrK3RoaXMucG9zaXRpb24sci5wdXNoKFtFLEksdGhpcy5wYXJzZVR5cGUoKV0pLHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiYW5kIik7KSsrdGhpcy5wb3NpdGlvbjtyZXR1cm4gbmV3IE0uVHlwZUFsaWFzU3BlY2lmaWNhdGlvbihyKX1pZighdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJhbmQiKSlicmVhazsrK3RoaXMucG9zaXRpb259cmV0dXJuIG5ldyBNLlR5cGVTcGVjaWZpY2F0aW9uKEEpfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwiZXF0eXBlIikpe2ZvcigrK3RoaXMucG9zaXRpb24sQT1bXTtFPXRoaXMucGFyc2VUeXBlVmFyU2VxdWVuY2UoKSx0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKSxBLnB1c2goW0UsdGhpcy5jdXJyZW50VG9rZW4oKV0pLCsrdGhpcy5wb3NpdGlvbix0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImFuZCIpOykrK3RoaXMucG9zaXRpb247cmV0dXJuIG5ldyBNLkVxdWFsaXR5VHlwZVNwZWNpZmljYXRpb24oQSl9aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJkYXRhdHlwZSIpKXtpZigrK3RoaXMucG9zaXRpb24sdGhpcy5wb3NpdGlvbisyPHRoaXMudG9rZW5zLmxlbmd0aCYmdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLnRva2Vuc1t0aGlzLnBvc2l0aW9uKzJdLCJkYXRhdHlwZSIpKXt0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKTt2YXIgZT10aGlzLmN1cnJlbnRUb2tlbigpOysrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IiksKyt0aGlzLnBvc2l0aW9uLHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImRhdGF0eXBlIiksKyt0aGlzLnBvc2l0aW9uLHRoaXMuYXNzZXJ0SWRlbnRpZmllck9yTG9uZ1Rva2VuKHRoaXMuY3VycmVudFRva2VuKCkpO3ZhciBvPXRoaXMuY3VycmVudFRva2VuKCk7cmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBNLkRhdGF0eXBlUmVwbGljYXRpb25TcGVjaWZpY2F0aW9uKGUsbyl9Zm9yKEE9W107Oyl7RT10aGlzLnBhcnNlVHlwZVZhclNlcXVlbmNlKCksdGhpcy5hc3NlcnRJZGVudGlmaWVyVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSksZT10aGlzLmN1cnJlbnRUb2tlbigpLCsrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IiksKyt0aGlzLnBvc2l0aW9uLHRoaXMub3B0aW9ucy5hbGxvd1N1Y2Nlc3Nvck1MPT09ITAmJnRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwifCIpJiYrK3RoaXMucG9zaXRpb247Zm9yKHZhciB5PVtdOzspe3RoaXMuYXNzZXJ0SWRlbnRpZmllclRva2VuKHRoaXMuY3VycmVudFRva2VuKCkpO3ZhciBkPXRoaXMuY3VycmVudFRva2VuKCk7Kyt0aGlzLnBvc2l0aW9uO3ZhciB2PXZvaWQgMDtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIm9mIikmJigrK3RoaXMucG9zaXRpb24sdj10aGlzLnBhcnNlVHlwZSgpKSx5LnB1c2goW2Qsdl0pLCF0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksInwiKSlicmVhazsrK3RoaXMucG9zaXRpb259aWYoQS5wdXNoKFtFLGUseV0pLCF0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImFuZCIpKWJyZWFrOysrdGhpcy5wb3NpdGlvbn1yZXR1cm4gbmV3IE0uRGF0YXR5cGVTcGVjaWZpY2F0aW9uKEEpfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwiZXhjZXB0aW9uIikpe2ZvcigrK3RoaXMucG9zaXRpb24sQT1bXTt0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKSxlPXRoaXMuY3VycmVudFRva2VuKCksKyt0aGlzLnBvc2l0aW9uLHY9dm9pZCAwLHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwib2YiKSYmKCsrdGhpcy5wb3NpdGlvbix2PXRoaXMucGFyc2VUeXBlKCkpLEEucHVzaChbZSx2XSksdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJhbmQiKTspKyt0aGlzLnBvc2l0aW9uO3JldHVybiBuZXcgTS5FeGNlcHRpb25TcGVjaWZpY2F0aW9uKEEpfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwic3RydWN0dXJlIikpe2ZvcigrK3RoaXMucG9zaXRpb24sQT1bXTt0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKSxlPXRoaXMuY3VycmVudFRva2VuKCksKyt0aGlzLnBvc2l0aW9uLHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIjoiKSwrK3RoaXMucG9zaXRpb24sQS5wdXNoKFtlLHRoaXMucGFyc2VTaWduYXR1cmVFeHByZXNzaW9uKCldKSx0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImFuZCIpOykrK3RoaXMucG9zaXRpb247cmV0dXJuIG5ldyBNLlN0cnVjdHVyZVNwZWNpZmljYXRpb24oQSl9aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihoLCJpbmNsdWRlIikpeysrdGhpcy5wb3NpdGlvbjt2YXIgQz1bXSxHPXRoaXMucG9zaXRpb247dHJ5e2Zvcig7OylDLnB1c2godGhpcy5wYXJzZVNpZ25hdHVyZUV4cHJlc3Npb24oKSksRz10aGlzLnBvc2l0aW9ufWNhdGNoe3RoaXMucG9zaXRpb249R31yZXR1cm4gbmV3IE0uSW5jbHVkZVNwZWNpZmljYXRpb24oQyl9cmV0dXJuIG5ldyBNLkVtcHR5U3BlY2lmaWNhdGlvbn0sRC5wcm90b3R5cGUucGFyc2VTZXF1ZW50aWFsU3BlY2lmaWNhdGlvbj1mdW5jdGlvbigpe2Zvcih2YXIgaD1bXTs7KXt2YXIgQT10aGlzLnBhcnNlU2ltcGxlU3BlY2lmaWNhdGlvbigpO2lmKEEgaW5zdGFuY2VvZiBNLkVtcHR5U3BlY2lmaWNhdGlvbilicmVhaztoLnB1c2goQSksdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI7IikmJisrdGhpcy5wb3NpdGlvbn1yZXR1cm4gbmV3IE0uU2VxdWVudGlhbFNwZWNpZmljYXRpb24oaCl9LEQucHJvdG90eXBlLnBhcnNlU3BlY2lmaWNhdGlvbj1mdW5jdGlvbigpe2Zvcih2YXIgaD10aGlzLnBhcnNlU2VxdWVudGlhbFNwZWNpZmljYXRpb24oKTt0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksInNoYXJpbmciKTspeysrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJ0eXBlIiksKyt0aGlzLnBvc2l0aW9uLHRoaXMuYXNzZXJ0SWRlbnRpZmllck9yTG9uZ1Rva2VuKHRoaXMuY3VycmVudFRva2VuKCkpO3ZhciBBPVt0aGlzLmN1cnJlbnRUb2tlbigpXTtmb3IoKyt0aGlzLnBvc2l0aW9uO3RoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPSIpOykrK3RoaXMucG9zaXRpb24sdGhpcy5hc3NlcnRJZGVudGlmaWVyT3JMb25nVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSksQS5wdXNoKHRoaXMuY3VycmVudFRva2VuKCkpLCsrdGhpcy5wb3NpdGlvbjtpZihBLmxlbmd0aDwyKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdBICJzaGFyaW5nIiBleHByZXNzaW9uIHJlcXVpcmVzIGF0IGxlYXN0IDIgdHlwZSBuYW1lcy4nKTtoPW5ldyBNLlNoYXJpbmdTcGVjaWZpY2F0aW9uKGgsQSl9cmV0dXJuIGh9LEQucHJvdG90eXBlLnBhcnNlTWF0Y2g9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYWxsb3dTdWNjZXNzb3JNTCYmdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJ8IikmJisrdGhpcy5wb3NpdGlvbjtmb3IodmFyIGg9W107Oyl7dmFyIEE9dGhpcy5wYXJzZVBhdHRlcm4oKTtBLnNpbXBsaWZ5KCkuYXNzZXJ0VW5pcXVlQmluZGluZyh0aGlzLnN0YXRlLHRoaXMubmV3Y29ucyksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPT4iKSwrK3RoaXMucG9zaXRpb247dmFyIEk9dGhpcy5wYXJzZUV4cHJlc3Npb24oKTtpZihoLnB1c2goW0EsSV0pLCF0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksInwiKSlicmVhazsrK3RoaXMucG9zaXRpb259cmV0dXJuIG5ldyBtLk1hdGNoKGgpfSxELnByb3RvdHlwZS5wYXJzZVBhdHRlcm5Sb3c9ZnVuY3Rpb24oKXtmb3IodmFyIGg9W10sQT0hMCxJPSEwOzspe3ZhciBPPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihPLCJ9IikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBtLlJlY29yZChJLGgpO2lmKCFJKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCJSZWNvcmQgd2lsZGNhcmQgbXVzdCBhcHBlYXIgYXMgbGFzdCBlbGVtZW50IG9mIHRoZSByZWNvcmQuIik7aWYoQXx8IXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oTywiLCIpKWlmKEE9ITEsdGhpcy5jaGVja0tleXdvcmRUb2tlbihPLCIuLi4iKSlJPSExLCsrdGhpcy5wb3NpdGlvbjtlbHNle2lmKCFPLmlzVmFsaWRSZWNvcmRMYWJlbCgpKXRocm93IHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oTywiYXMiKSYmdGhpcy5vcHRpb25zLmFsbG93U3VjY2Vzc29yTUw/bmV3IHMuUGFyc2VyRXJyb3IoIkxheWVyZWQgcGF0dGVybiBpbnNpZGUgb2YgcmVjb3JkIHBhdHRlcnMgYXJlIGRpc2FsbG93ZWQgaW4gU3VjY2Vzc29yTUwgbW9kZS4iKTpuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIn0iLCAiLi4uIiwgImFzIiwgb3IgYW4gaWRlbnRpZmllciwgZ290ICInK08uZ2V0VGV4dCgpKyciLicpOysrdGhpcy5wb3NpdGlvbjt2YXIgRT10aGlzLmN1cnJlbnRUb2tlbigpO2lmKCEoRSBpbnN0YW5jZW9mIHEuS2V5d29yZFRva2VuKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIjoiLCAiYXMiLCAiLCIsIG9yICI9IiwgZ290ICcrRS5nZXRUZXh0KCkrJyIuJyk7aWYoRS50ZXh0PT09Ij0iKXsrK3RoaXMucG9zaXRpb24saC5wdXNoKFtPLmdldFRleHQoKSx0aGlzLnBhcnNlUGF0dGVybigpXSk7Y29udGludWV9dmFyIHI9dm9pZCAwO2lmKE8gaW5zdGFuY2VvZiBxLk51bWVyaWNUb2tlbil0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignWW91IGNhbm5vdCBhc3NpZ24gdG8gIicrTy5nZXRUZXh0KCkrJyIuJyk7dmFyIGU9bmV3IG0uVmFsdWVJZGVudGlmaWVyKE8pO0UudGV4dD09PSI6IiYmKCsrdGhpcy5wb3NpdGlvbixyPXRoaXMucGFyc2VUeXBlKCksRT10aGlzLmN1cnJlbnRUb2tlbigpKSxFLnRleHQhPT0iYXMifHx0aGlzLm9wdGlvbnMuYWxsb3dTdWNjZXNzb3JNTD9yIT09dm9pZCAwJiYoZT1uZXcgbS5UeXBlZEV4cHJlc3Npb24oZSxyKSk6KCsrdGhpcy5wb3NpdGlvbixlPW5ldyBtLkxheWVyZWRQYXR0ZXJuKGUubmFtZSxyLHRoaXMucGFyc2VQYXR0ZXJuKCkpLEU9dGhpcy5jdXJyZW50VG9rZW4oKSksaC5wdXNoKFtPLmdldFRleHQoKSxlXSl9ZWxzZSsrdGhpcy5wb3NpdGlvbn19LEQucHJvdG90eXBlLnBhcnNlQXRvbWljUGF0dGVybj1mdW5jdGlvbigpe2lmKHRoaXMucG9zaXRpb24+PXRoaXMudG9rZW5zLmxlbmd0aCl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcigiVW5leHBlY3RlZCBlbmQgb2YgdG9rZW4gc3RyZWFtIik7dmFyIGg9dGhpcy5jdXJyZW50VG9rZW4oKTtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsIm9wIikpeysrdGhpcy5wb3NpdGlvbjt2YXIgQT10aGlzLmN1cnJlbnRUb2tlbigpO3RoaXMuYXNzZXJ0VmlkT3JMb25nVG9rZW4oQSksQS5vcFByZWZpeGVkPSEwLCsrdGhpcy5wb3NpdGlvbjt2YXIgST10aGlzLnBvc2l0aW9uO3RyeXtpZighKEEgaW5zdGFuY2VvZiBxLkxvbmdJZGVudGlmaWVyVG9rZW4pKXt2YXIgTz10aGlzLmN1cnJlbnRUb2tlbigpLEU9dm9pZCAwO3JldHVybiB0aGlzLmNoZWNrS2V5d29yZFRva2VuKE8sIjoiKSYmKCsrdGhpcy5wb3NpdGlvbixFPXRoaXMucGFyc2VUeXBlKCksTz10aGlzLmN1cnJlbnRUb2tlbigpKSx0aGlzLmFzc2VydEtleXdvcmRUb2tlbihPLCJhcyIpLCsrdGhpcy5wb3NpdGlvbixuZXcgbS5MYXllcmVkUGF0dGVybihBLEUsdGhpcy5wYXJzZVBhdHRlcm4oKSl9fWNhdGNoe3RoaXMucG9zaXRpb249SX1yZXR1cm4gbmV3IG0uVmFsdWVJZGVudGlmaWVyKEEpfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwiXyIpKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgbS5XaWxkY2FyZDtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsInsiKSlyZXR1cm4rK3RoaXMucG9zaXRpb24sdGhpcy5wYXJzZVBhdHRlcm5Sb3coKTtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsIigiKSl7aWYoKyt0aGlzLnBvc2l0aW9uLHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiKSIpKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgbS5UdXBsZShbXSk7Zm9yKHZhciByPVt0aGlzLnBhcnNlUGF0dGVybigpXTs7KXtpZihBPXRoaXMuY3VycmVudFRva2VuKCksIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiLCIpKXtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKEEsIikiKSlyZXR1cm4rK3RoaXMucG9zaXRpb24sci5sZW5ndGg9PT0xP3JbMF06bmV3IG0uVHVwbGUocik7dGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0V4cGVjdGVkICIsIiBvciAiKSIsIGJ1dCBnb3QgIicrQS5nZXRUZXh0KCkrJyIuJyl9Kyt0aGlzLnBvc2l0aW9uLHIucHVzaCh0aGlzLnBhcnNlUGF0dGVybigpKX19aWYodGhpcy5vcHRpb25zLmFsbG93VmVjdG9yJiZ0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsIiMiKSYmdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLm5leHRUb2tlbigpLCJbIikpe2lmKCsrdGhpcy5wb3NpdGlvbiwrK3RoaXMucG9zaXRpb24sdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJdIikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBtLlZlY3RvcihbXSk7Zm9yKHI9W3RoaXMucGFyc2VQYXR0ZXJuKCldOzspe2lmKEE9dGhpcy5jdXJyZW50VG9rZW4oKSwhdGhpcy5jaGVja0tleXdvcmRUb2tlbihBLCIsIikpe2lmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiXSIpKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgbS5WZWN0b3Iocik7dGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0V4cGVjdGVkICIsIiBvciAiXSIgYnV0IGZvdW5kICInK0EuZ2V0VGV4dCgpKyciLicpfSsrdGhpcy5wb3NpdGlvbixyLnB1c2godGhpcy5wYXJzZVBhdHRlcm4oKSl9fWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oaCwiWyIpKXtpZigrK3RoaXMucG9zaXRpb24sdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJdIikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBtLkxpc3QoW10pO2ZvcihyPVt0aGlzLnBhcnNlUGF0dGVybigpXTs7KXtpZihBPXRoaXMuY3VycmVudFRva2VuKCksIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiLCIpKXtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKEEsIl0iKSlyZXR1cm4rK3RoaXMucG9zaXRpb24sbmV3IG0uTGlzdChyKTt0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIiwiIG9yICJdIiBidXQgZm91bmQgIicrQS5nZXRUZXh0KCkrJyIuJyl9Kyt0aGlzLnBvc2l0aW9uLHIucHVzaCh0aGlzLnBhcnNlUGF0dGVybigpKX19ZWxzZXtpZihoIGluc3RhbmNlb2YgcS5Db25zdGFudFRva2VuKXtpZihoIGluc3RhbmNlb2YgcS5SZWFsQ29uc3RhbnRUb2tlbiYmdGhpcy5vcHRpb25zLnJlYWxFcXVhbGl0eSE9PSEwKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdJIGFtIG5vdCBpbnRlcmVzdGVkIGluIHJlYWwgY29uc3RhbnRzIHN1Y2ggYXMgIicraC5nZXRUZXh0KCkrJyIgYXBwZWFyaW5nIGluIHBhdHRlcm5zLicpO3JldHVybisrdGhpcy5wb3NpdGlvbixuZXcgbS5Db25zdGFudChoKX1pZihoLmlzVmlkKCkmJmguZ2V0VGV4dCgpIT09Ij0ifHxoIGluc3RhbmNlb2YgcS5Mb25nSWRlbnRpZmllclRva2VuKXsrK3RoaXMucG9zaXRpb24sST10aGlzLnBvc2l0aW9uO3RyeXtpZighKGggaW5zdGFuY2VvZiBxLkxvbmdJZGVudGlmaWVyVG9rZW4pKXJldHVybiBPPXRoaXMuY3VycmVudFRva2VuKCksRT12b2lkIDAsdGhpcy5jaGVja0tleXdvcmRUb2tlbihPLCI6IikmJigrK3RoaXMucG9zaXRpb24sRT10aGlzLnBhcnNlVHlwZSgpLE89dGhpcy5jdXJyZW50VG9rZW4oKSksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4oTywiYXMiKSwrK3RoaXMucG9zaXRpb24saCBpbnN0YW5jZW9mIHEuS2V5d29yZFRva2VuJiYoaD1uZXcgcS5JZGVudGlmaWVyVG9rZW4oaC5nZXRUZXh0KCkpKSxuZXcgbS5MYXllcmVkUGF0dGVybihoLEUsdGhpcy5wYXJzZVBhdHRlcm4oKSl9Y2F0Y2h7dGhpcy5wb3NpdGlvbj1JfXJldHVybiBuZXcgbS5WYWx1ZUlkZW50aWZpZXIoaCl9fXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdFeHBlY3RlZCBhdG9taWMgcGF0dGVybiBidXQgZ290ICInK2guZ2V0VGV4dCgpKyciLicpfSxELnByb3RvdHlwZS5wYXJzZUFwcGxpY2F0aW9uUGF0dGVybj1mdW5jdGlvbigpe3ZhciBoPXRoaXMucG9zaXRpb24sQT10aGlzLmN1cnJlbnRUb2tlbigpLEk9dGhpcy5wYXJzZUF0b21pY1BhdHRlcm4oKTtpZihJIGluc3RhbmNlb2YgbS5WYWx1ZUlkZW50aWZpZXImJnRoaXMuc3RhdGUuZ2V0SW5maXhTdGF0dXMoSS5uYW1lKSE9PXZvaWQgMCYmdGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyhJLm5hbWUpLmluZml4JiYhKGg+MCYmdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLnRva2Vuc1toLTFdLCJvcCIpfHx0aGlzLmNoZWNrS2V5d29yZFRva2VuKEEsIm9wIikpKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdJbmZpeCBvcGVyYXRvciAiJytJKyciIGFwcGVhcmVkIGluIG5vbi1pbmZpeCBjb250ZXh0IHdpdGhvdXQgIm9wIi4nKTtmb3IoOzspe3ZhciBPPXRoaXMucG9zaXRpb24sRT10aGlzLmN1cnJlbnRUb2tlbigpO2lmKHRoaXMuY2hlY2tWaWRPckxvbmdUb2tlbihFKSYmdGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyhFKSE9PXZvaWQgMCYmdGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyhFKS5pbmZpeClicmVhazt2YXIgcj0hMTt0cnl7dmFyIGU9dGhpcy5wYXJzZUF0b21pY1BhdHRlcm4oKTtpZihJIGluc3RhbmNlb2YgbS5XaWxkY2FyZCl0aHJvdyByPSEwLG5ldyBzLlBhcnNlckVycm9yKCJZb3UgY2Fubm90IGFwcGx5IGEgcGF0dGVybiB0byBhIHdpbGRjYXJkLiIpO0k9bmV3IG0uRnVuY3Rpb25BcHBsaWNhdGlvbihJLGUpfWNhdGNoKG8pe2lmKHIpdGhyb3cgbzt0aGlzLnBvc2l0aW9uPU87YnJlYWt9fXJldHVybiBJfSxELnByb3RvdHlwZS5wYXJzZUluZml4UGF0dGVybj1mdW5jdGlvbigpe2Zvcih2YXIgaD1bXSxBPVtdLEk9MDs7KXtoLnB1c2godGhpcy5wYXJzZUFwcGxpY2F0aW9uUGF0dGVybigpKTt2YXIgTz10aGlzLmN1cnJlbnRUb2tlbigpO2lmKCF0aGlzLmNoZWNrSWRlbnRpZmllck9yTG9uZ1Rva2VuKE8pfHx0aGlzLnN0YXRlLmdldEluZml4U3RhdHVzKE8pPT09dm9pZCAwfHwhdGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyhPKS5pbmZpeClicmVhazsrK3RoaXMucG9zaXRpb24sQS5wdXNoKFtPLEkrK10pfXJldHVybiBJPT09MD9oWzBdOm5ldyBtLkluZml4RXhwcmVzc2lvbihoLEEpLnJlUGFyc2UodGhpcy5zdGF0ZSl9LEQucHJvdG90eXBlLnBhcnNlUGF0dGVybj1mdW5jdGlvbigpe2Zvcih2YXIgaD10aGlzLnBhcnNlSW5maXhQYXR0ZXJuKCk7Oyl7aWYoIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiOiIpKXtpZih0aGlzLm9wdGlvbnMuYWxsb3dTdWNjZXNzb3JNTD09PSEwKXtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImFzIikpeysrdGhpcy5wb3NpdGlvbixoPW5ldyBtLkNvbmp1bmN0aXZlUGF0dGVybihoLHRoaXMucGFyc2VQYXR0ZXJuKCkpO2NvbnRpbnVlfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwifCIpKXsrK3RoaXMucG9zaXRpb24saD1uZXcgbS5EaXNqdW5jdGl2ZVBhdHRlcm4oaCx0aGlzLnBhcnNlSW5maXhQYXR0ZXJuKCkpO2NvbnRpbnVlfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwid2l0aCIpKXsrK3RoaXMucG9zaXRpb247dmFyIEE9dGhpcy5wYXJzZVBhdHRlcm4oKTt0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IiksKyt0aGlzLnBvc2l0aW9uLGg9bmV3IG0uTmVzdGVkTWF0Y2goaCxBLHRoaXMucGFyc2VFeHByZXNzaW9uKCkpO2NvbnRpbnVlfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiaWYiKSl7Kyt0aGlzLnBvc2l0aW9uLGg9bmV3IG0uUGF0dGVybkd1YXJkKGgsdGhpcy5wYXJzZUV4cHJlc3Npb24oKSk7Y29udGludWV9fWJyZWFrfSsrdGhpcy5wb3NpdGlvbixoPW5ldyBtLlR5cGVkRXhwcmVzc2lvbihoLHRoaXMucGFyc2VUeXBlKCkpfXJldHVybiBofSxELnByb3RvdHlwZS5wYXJzZVR5cGVSb3c9ZnVuY3Rpb24oKXtmb3IodmFyIGg9bmV3IE1hcCxBPSEwOzspe3ZhciBJPXRoaXMuY3VycmVudFRva2VuKCk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJ9IikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBnLlJlY29yZFR5cGUoaCwhMCk7aWYoQXx8IXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oSSwiLCIpKXtpZihBPSExLEkuaXNWYWxpZFJlY29yZExhYmVsKCkpeysrdGhpcy5wb3NpdGlvbjt2YXIgTz10aGlzLmN1cnJlbnRUb2tlbigpO2lmKCEoTyBpbnN0YW5jZW9mIHEuS2V5d29yZFRva2VuKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIjoiLicpO2lmKE8udGV4dD09PSI6Iil7aWYoKyt0aGlzLnBvc2l0aW9uLGguaGFzKEkuZ2V0VGV4dCgpKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRHVwbGljYXRlIHJlY29yZCBsYWJlbCAiJytJLmdldFRleHQoKSsnIi4nKTtoLnNldChJLmdldFRleHQoKSx0aGlzLnBhcnNlVHlwZSgpKTtjb250aW51ZX10aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIjoiLicpfXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdFeHBlY3RlZCAifSIsIG9yIGFuIGlkZW50aWZpZXIsIGdvdCAiJytJLmdldFRleHQoKSsnIi4nKX0rK3RoaXMucG9zaXRpb259fSxELnByb3RvdHlwZS5wYXJzZVNpbXBsZVR5cGU9ZnVuY3Rpb24oKXt2YXIgaD10aGlzLmN1cnJlbnRUb2tlbigpO2lmKGggaW5zdGFuY2VvZiBxLlR5cGVWYXJpYWJsZVRva2VuKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgZy5UeXBlVmFyaWFibGUoaC5nZXRUZXh0KCkpO2lmKHRoaXMuY2hlY2tJZGVudGlmaWVyT3JMb25nVG9rZW4oaCkpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLGggaW5zdGFuY2VvZiBxLkxvbmdJZGVudGlmaWVyVG9rZW4/bmV3IGcuQ3VzdG9tVHlwZShoLmlkLmdldFRleHQoKSxbXSxoKTpuZXcgZy5DdXN0b21UeXBlKGguZ2V0VGV4dCgpLFtdKTtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsInsiKSlyZXR1cm4rK3RoaXMucG9zaXRpb24sdGhpcy5wYXJzZVR5cGVSb3coKTtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsIigiKSl7aWYoKyt0aGlzLnBvc2l0aW9uLHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiKSIpKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdVc2UgInt9IiBvciAidW5pdCIgdG8gZGVub3RlIHRoZSB1bml0IHR5cGUuJyk7Zm9yKHZhciBBPVt0aGlzLnBhcnNlVHlwZSgpXTs7KXt2YXIgST10aGlzLmN1cnJlbnRUb2tlbigpO2lmKCF0aGlzLmNoZWNrS2V5d29yZFRva2VuKEksIiwiKSl7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCIpIikpe2lmKCsrdGhpcy5wb3NpdGlvbixBLmxlbmd0aD09PTEpcmV0dXJuIEFbMF07dGhpcy5hc3NlcnRJZGVudGlmaWVyT3JMb25nVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSk7dmFyIE89dGhpcy5jdXJyZW50VG9rZW4oKTtyZXR1cm4rK3RoaXMucG9zaXRpb24sbmV3IGcuQ3VzdG9tVHlwZShPLmdldFRleHQoKSxBKX10aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIiwiIG9yICIpIiwgZ290ICInK0kuZ2V0VGV4dCgpKyciLicpfSsrdGhpcy5wb3NpdGlvbixBLnB1c2godGhpcy5wYXJzZVR5cGUoKSl9fXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdFeHBlY3RlZCBlaXRoZXIgIigiIG9yICJ7IiBnb3QgIicraC5nZXRUZXh0KCkrJyIuJyl9LEQucHJvdG90eXBlLnBhcnNlVHlwZT1mdW5jdGlvbigpe3ZhciBoPXRoaXMucGFyc2VUdXBsZVR5cGUoKSxBPXRoaXMuY3VycmVudFRva2VuKCk7aWYoIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oQSwiLT4iKSlyZXR1cm4gaDsrK3RoaXMucG9zaXRpb247dmFyIEk9dGhpcy5wYXJzZVR5cGUoKTtyZXR1cm4gbmV3IGcuRnVuY3Rpb25UeXBlKGgsSSl9LEQucHJvdG90eXBlLnBhcnNlVHVwbGVUeXBlPWZ1bmN0aW9uKCl7Zm9yKHZhciBoPVt0aGlzLnBhcnNlQ3VzdG9tVHlwZSgpXTt0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIioiKTspKyt0aGlzLnBvc2l0aW9uLGgucHVzaCh0aGlzLnBhcnNlQ3VzdG9tVHlwZSgpKTtyZXR1cm4gaC5sZW5ndGg9PT0xP2hbMF06bmV3IGcuVHVwbGVUeXBlKGgpfSxELnByb3RvdHlwZS5wYXJzZUN1c3RvbVR5cGU9ZnVuY3Rpb24oKXtmb3IodmFyIGg9dGhpcy5wYXJzZVNpbXBsZVR5cGUoKTt0aGlzLnBvc2l0aW9uPHRoaXMudG9rZW5zLmxlbmd0aDspe3ZhciBBPXRoaXMuY3VycmVudFRva2VuKCk7aWYoIXRoaXMuY2hlY2tJZGVudGlmaWVyT3JMb25nVG9rZW4oQSkpcmV0dXJuIGg7Kyt0aGlzLnBvc2l0aW9uLGg9QSBpbnN0YW5jZW9mIHEuTG9uZ0lkZW50aWZpZXJUb2tlbj9uZXcgZy5DdXN0b21UeXBlKEEuaWQuZ2V0VGV4dCgpLFtoXSxBKTpuZXcgZy5DdXN0b21UeXBlKEEuZ2V0VGV4dCgpLFtoXSl9cmV0dXJuIGh9LEQucHJvdG90eXBlLnBhcnNlVmFsdWVCaW5kaW5nPWZ1bmN0aW9uKCl7dmFyIGg9dGhpcy5jdXJyZW50VG9rZW4oKTtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKGgsInJlYyIpKXsrK3RoaXMucG9zaXRpb247dmFyIEE9dGhpcy5wYXJzZVZhbHVlQmluZGluZygpO3JldHVybiBBLmlzUmVjdXJzaXZlPSEwLEF9dmFyIEk9dGhpcy5wYXJzZVBhdHRlcm4oKTtyZXR1cm4gSS5zaW1wbGlmeSgpLmFzc2VydFVuaXF1ZUJpbmRpbmcodGhpcy5zdGF0ZSx0aGlzLm5ld2NvbnMpLHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIj0iKSwrK3RoaXMucG9zaXRpb24sbmV3IEIuVmFsdWVCaW5kaW5nKCExLEksdGhpcy5wYXJzZUV4cHJlc3Npb24oKSl9LEQucHJvdG90eXBlLnBhcnNlRnVuY3Rpb25WYWx1ZUJpbmRpbmc9ZnVuY3Rpb24oKXt2YXIgaD1bXSxBPS0xLEk9dm9pZCAwO2Zvcih0aGlzLm9wdGlvbnMuYWxsb3dTdWNjZXNzb3JNTD09PSEwJiZ0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksInwiKSYmKyt0aGlzLnBvc2l0aW9uOzspe3ZhciBPPVtdLEU9dm9pZCAwLHI9dm9pZCAwO2lmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiKCIpKXt2YXIgZT10aGlzLnBvc2l0aW9uO3RyeXt2YXIgbz10aGlzLnBhcnNlUGF0dGVybigpLHk9ITEsZD1bXTtmb3IobyBpbnN0YW5jZW9mIG0uRnVuY3Rpb25BcHBsaWNhdGlvbnx8KHk9ITApOyF5JiZvIGluc3RhbmNlb2YgbS5GdW5jdGlvbkFwcGxpY2F0aW9uOylkLnB1c2goby5hcmd1bWVudCksbz1vLmZ1bmM7aWYobyBpbnN0YW5jZW9mIG0uVmFsdWVJZGVudGlmaWVyfHwoeT0hMCkseSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcigiTnlhYm9yb24gaXMgc2FkLiBEaWQgeW91IGZvcmdldCBhIGZ1bmN0aW9uIG5hbWU/Iik7cj1vO2Zvcih2YXIgdj1kLmxlbmd0aC0xO3Y+PTA7LS12KU8ucHVzaChkW3ZdKX1jYXRjaCh3KXt2YXIgQz0hMTt0cnl7dGhpcy5wb3NpdGlvbj1lLCsrdGhpcy5wb3NpdGlvbjt2YXIgRz10aGlzLnBhcnNlQXRvbWljUGF0dGVybigpO2lmKHRoaXMuYXNzZXJ0VmlkT3JMb25nVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSkscj1uZXcgbS5WYWx1ZUlkZW50aWZpZXIodGhpcy5jdXJyZW50VG9rZW4oKSksdGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyh0aGlzLmN1cnJlbnRUb2tlbigpKT09PXZvaWQgMHx8IXRoaXMuc3RhdGUuZ2V0SW5maXhTdGF0dXModGhpcy5jdXJyZW50VG9rZW4oKSkuaW5maXgpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJyInK3RoaXMuY3VycmVudFRva2VuKCkuZ2V0VGV4dCgpKyciIGRvZXMgbm90IGhhdmUgaW5maXggc3RhdHVzLicpO2lmKHRoaXMub3B0aW9ucy5hbGxvd1N1Y2Nlc3Nvck1MIT09ITAmJnRoaXMuY3VycmVudFRva2VuKCkuZ2V0VGV4dCgpPT09Ij0iKXRocm93IEM9ITAsbmV3IHMuRmVhdHVyZURpc2FibGVkRXJyb3IoJ1doeSB3b3VsZCB5b3UgdHJ5IHRvIHJlYmluZCAiPSI/Jyk7Kyt0aGlzLnBvc2l0aW9uO3ZhciBZPXRoaXMucGFyc2VBdG9taWNQYXR0ZXJuKCk7Zm9yKHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIikiKSwrK3RoaXMucG9zaXRpb24sTy5wdXNoKG5ldyBtLlR1cGxlKFtHLFldKSk7IXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPSIpJiYhdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI6Iik7KXtpZigobz10aGlzLnBhcnNlQXRvbWljUGF0dGVybigpKWluc3RhbmNlb2YgbS5WYWx1ZUlkZW50aWZpZXImJnRoaXMuc3RhdGUuZ2V0SW5maXhTdGF0dXMoby5uYW1lKSE9PXZvaWQgMCYmdGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyhvLm5hbWUpLmluZml4KXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdDdXRlIGxpdHRsZSBpbmZpeCBpZGVudGlmaWVycyBzdWNoIGFzICInK28rJyIgc3VyZSBzaG91bGQgcGxheSBzb21ld2hlcmUgZWxzZS4nKTtPLnB1c2gobyl9fWNhdGNoKFQpe3Rocm93IEM/VDp3fX19ZWxzZXt2YXIgSj10aGlzLnBvc2l0aW9uLHo9ITEscD0hMTt0cnl7dmFyIGM9dGhpcy5wYXJzZU9wSWRlbnRpZmllclRva2VuKCk7aWYocj1uZXcgbS5WYWx1ZUlkZW50aWZpZXIoYyksdGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyhyLm5hbWUpIT09dm9pZCAwJiZ0aGlzLnN0YXRlLmdldEluZml4U3RhdHVzKHIubmFtZSkuaW5maXgmJiFyLm5hbWUub3BQcmVmaXhlZCl0aHJvdyB6PSEwLG5ldyBzLlBhcnNlckVycm9yKCdNaXNzaW5nICJvcCIuJyk7Zm9yKDshdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IikmJiF0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIjoiKTspe2lmKChvPXRoaXMucGFyc2VBdG9taWNQYXR0ZXJuKCkpaW5zdGFuY2VvZiBtLlZhbHVlSWRlbnRpZmllciYmdGhpcy5zdGF0ZS5nZXRJbmZpeFN0YXR1cyhvLm5hbWUpIT09dm9pZCAwJiZ0aGlzLnN0YXRlLmdldEluZml4U3RhdHVzKG8ubmFtZSkuaW5maXgpdGhyb3cgcD0hMCxuZXcgcy5QYXJzZXJFcnJvcignQ3V0ZSBsaXR0bGUgaW5maXggaWRlbnRpZmllcnMgc3VjaCBhcyAiJytvKyciIHN1cmUgc2hvdWxkIHBsYXkgc29tZXdoZXJlIGVsc2UuJyk7Ty5wdXNoKG8pfX1jYXRjaCh3KXtpZih6KXRocm93IHc7ej0hMTt0cnl7aWYodGhpcy5wb3NpdGlvbj1KLEc9dGhpcy5wYXJzZUF0b21pY1BhdHRlcm4oKSx0aGlzLmFzc2VydFZpZE9yTG9uZ1Rva2VuKHRoaXMuY3VycmVudFRva2VuKCkpLHI9bmV3IG0uVmFsdWVJZGVudGlmaWVyKHRoaXMuY3VycmVudFRva2VuKCkpLHRoaXMuc3RhdGUuZ2V0SW5maXhTdGF0dXModGhpcy5jdXJyZW50VG9rZW4oKSk9PT12b2lkIDB8fCF0aGlzLnN0YXRlLmdldEluZml4U3RhdHVzKHRoaXMuY3VycmVudFRva2VuKCkpLmluZml4KXRocm93IHA/KHo9ITAsdyk6bmV3IHMuUGFyc2VyRXJyb3IoJyInK3RoaXMuY3VycmVudFRva2VuKCkuZ2V0VGV4dCgpKyciIGRvZXMgbm90IGhhdmUgaW5maXggc3RhdHVzLicpOysrdGhpcy5wb3NpdGlvbixZPXRoaXMucGFyc2VBdG9taWNQYXR0ZXJuKCksTy5wdXNoKG5ldyBtLlR1cGxlKFtHLFldKSl9Y2F0Y2h7dGhyb3cgd319fWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiOiIpJiYoKyt0aGlzLnBvc2l0aW9uLEU9dGhpcy5wYXJzZVR5cGUoKSksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPSIpLCsrdGhpcy5wb3NpdGlvbixBPT09LTEpQT1PLmxlbmd0aDtlbHNlIGlmKEEhPT0yJiZBIT09MyYmQSE9PU8ubGVuZ3RoKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCJEaWZmZXJlbnQgbnVtYmVyIG9mIGFyZ3VtZW50cy4iKTtpZihBPT09MCl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRnVuY3Rpb25zIG5lZWQgYXJndW1lbnRzIHRvIHN1cnZpdmUuIFJlbHkgb24gInZhbCIgaW5zdGVhZC4nKTtpZihJPT09dm9pZCAwKUk9cjtlbHNlIGlmKHIubmFtZS5nZXRUZXh0KCkhPT1JLm5hbWUuZ2V0VGV4dCgpKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdEaWZmZXJlbnQgZnVuY3Rpb24gbmFtZXMgaW4gZGlmZmVyZW50IGNhc2VzICgiJytyLm5hbWUuZ2V0VGV4dCgpKyciIHZzLiAiJytJLm5hbWUuZ2V0VGV4dCgpKyciKScpO2lmKG5ldyBtLlR1cGxlKE8pLnNpbXBsaWZ5KCkuYXNzZXJ0VW5pcXVlQmluZGluZyh0aGlzLnN0YXRlLHRoaXMubmV3Y29ucyksaC5wdXNoKFtPLEUsdGhpcy5wYXJzZUV4cHJlc3Npb24oKV0pLCF0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksInwiKSlicmVhazsrK3RoaXMucG9zaXRpb259cmV0dXJuIG5ldyBCLkZ1bmN0aW9uVmFsdWVCaW5kaW5nKGgsSSl9LEQucHJvdG90eXBlLnBhcnNlVHlwZUJpbmRpbmc9ZnVuY3Rpb24oKXt2YXIgaD10aGlzLnBhcnNlVHlwZVZhclNlcXVlbmNlKCk7dGhpcy5hc3NlcnRJZGVudGlmaWVyVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSk7dmFyIEE9dGhpcy5jdXJyZW50VG9rZW4oKTtyZXR1cm4rK3RoaXMucG9zaXRpb24sdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPSIpLCsrdGhpcy5wb3NpdGlvbixuZXcgQi5UeXBlQmluZGluZyhoLEEsdGhpcy5wYXJzZVR5cGUoKSl9LEQucHJvdG90eXBlLnBhcnNlVHlwZUJpbmRpbmdTZXE9ZnVuY3Rpb24oKXtmb3IodmFyIGg9W107aC5wdXNoKHRoaXMucGFyc2VUeXBlQmluZGluZygpKSx0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImFuZCIpOykrK3RoaXMucG9zaXRpb247cmV0dXJuIGh9LEQucHJvdG90eXBlLnBhcnNlRXhjZXB0aW9uQmluZGluZz1mdW5jdGlvbigpe3ZhciBoPXRoaXMucGFyc2VPcElkZW50aWZpZXJUb2tlbigpO2lmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwib2YiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBBPXRoaXMucGFyc2VUeXBlKCk7cmV0dXJuIG5ldyBCLkRpcmVjdEV4Y2VwdGlvbkJpbmRpbmcoaCxBKX1pZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIj0iKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBJPXRoaXMucGFyc2VPcElkZW50aWZpZXJUb2tlbighMCk7cmV0dXJuIG5ldyBCLkV4Y2VwdGlvbkFsaWFzKGgsSSl9cmV0dXJuIG5ldyBCLkRpcmVjdEV4Y2VwdGlvbkJpbmRpbmcoaCx2b2lkIDApfSxELnByb3RvdHlwZS5wYXJzZURhdGF0eXBlQmluZGluZz1mdW5jdGlvbigpe3ZhciBoPXRoaXMucGFyc2VUeXBlVmFyU2VxdWVuY2UoKTt0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKTt2YXIgQT10aGlzLmN1cnJlbnRUb2tlbigpOysrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IiksKyt0aGlzLnBvc2l0aW9uO3ZhciBJPVtdO2Zvcih0aGlzLm9wdGlvbnMuYWxsb3dTdWNjZXNzb3JNTD09PSEwJiZ0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksInwiKSYmKyt0aGlzLnBvc2l0aW9uOzspe3ZhciBPPXRoaXMucGFyc2VPcElkZW50aWZpZXJUb2tlbigpO2lmKHRoaXMubmV3Y29ucz10aGlzLm5ld2NvbnMuYWRkKE8uZ2V0VGV4dCgpKSx0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIm9mIikpeysrdGhpcy5wb3NpdGlvbjt2YXIgRT10aGlzLnBhcnNlVHlwZSgpO0kucHVzaChbTyxFXSl9ZWxzZSBJLnB1c2goW08sdm9pZCAwXSk7aWYoIXRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwifCIpKWJyZWFrOysrdGhpcy5wb3NpdGlvbn1yZXR1cm4gbmV3IEIuRGF0YXR5cGVCaW5kaW5nKGgsQSxJKX0sRC5wcm90b3R5cGUucGFyc2VEYXRhdHlwZUJpbmRpbmdTZXE9ZnVuY3Rpb24oKXtmb3IodmFyIGg9W107aC5wdXNoKHRoaXMucGFyc2VEYXRhdHlwZUJpbmRpbmcoKSksdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJhbmQiKTspKyt0aGlzLnBvc2l0aW9uO3JldHVybiBofSxELnByb3RvdHlwZS5wYXJzZVN0cnVjdHVyZUJpbmRpbmc9ZnVuY3Rpb24oKXt0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKTt2YXIgaD10aGlzLmN1cnJlbnRUb2tlbigpO2lmKCsrdGhpcy5wb3NpdGlvbix0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIjoiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBBPXRoaXMucGFyc2VTaWduYXR1cmVFeHByZXNzaW9uKCk7dGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPSIpLCsrdGhpcy5wb3NpdGlvbjt2YXIgST10aGlzLnBhcnNlU3RydWN0dXJlRXhwcmVzc2lvbigpO3JldHVybiBuZXcgTS5TdHJ1Y3R1cmVCaW5kaW5nKGgsbmV3IE0uVHJhbnNwYXJlbnRDb25zdHJhaW50KEksQSkpfXJldHVybiB0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIjo+Iik/KCsrdGhpcy5wb3NpdGlvbixBPXRoaXMucGFyc2VTaWduYXR1cmVFeHByZXNzaW9uKCksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPSIpLCsrdGhpcy5wb3NpdGlvbixJPXRoaXMucGFyc2VTdHJ1Y3R1cmVFeHByZXNzaW9uKCksbmV3IE0uU3RydWN0dXJlQmluZGluZyhoLG5ldyBNLk9wYXF1ZUNvbnN0cmFpbnQoSSxBKSkpOih0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IiksKyt0aGlzLnBvc2l0aW9uLG5ldyBNLlN0cnVjdHVyZUJpbmRpbmcoaCx0aGlzLnBhcnNlU3RydWN0dXJlRXhwcmVzc2lvbigpKSl9LEQucHJvdG90eXBlLnBhcnNlU3RydWN0dXJlQmluZGluZ1NlcT1mdW5jdGlvbigpe2Zvcih2YXIgaD1bXTtoLnB1c2godGhpcy5wYXJzZVN0cnVjdHVyZUJpbmRpbmcoKSksdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJhbmQiKTspKyt0aGlzLnBvc2l0aW9uO3JldHVybiBofSxELnByb3RvdHlwZS5wYXJzZVNpZ25hdHVyZUJpbmRpbmc9ZnVuY3Rpb24oKXt0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKTt2YXIgaD10aGlzLmN1cnJlbnRUb2tlbigpO3JldHVybisrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IiksKyt0aGlzLnBvc2l0aW9uLG5ldyBNLlNpZ25hdHVyZUJpbmRpbmcoaCx0aGlzLnBhcnNlU2lnbmF0dXJlRXhwcmVzc2lvbigpKX0sRC5wcm90b3R5cGUucGFyc2VTaWduYXR1cmVCaW5kaW5nU2VxPWZ1bmN0aW9uKCl7Zm9yKHZhciBoPVtdO2gucHVzaCh0aGlzLnBhcnNlU2lnbmF0dXJlQmluZGluZygpKSx0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImFuZCIpOykrK3RoaXMucG9zaXRpb247cmV0dXJuIGh9LEQucHJvdG90eXBlLnBhcnNlRnVuY3RvckJpbmRpbmc9ZnVuY3Rpb24oKXt0aGlzLmFzc2VydElkZW50aWZpZXJUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpKTt2YXIgaD10aGlzLmN1cnJlbnRUb2tlbigpO2lmKCsrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCIoIiksKyt0aGlzLnBvc2l0aW9uLHRoaXMuY3VycmVudFRva2VuKClpbnN0YW5jZW9mIHEuSWRlbnRpZmllclRva2VuKXt2YXIgQT10aGlzLmN1cnJlbnRUb2tlbigpOysrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI6IiksKyt0aGlzLnBvc2l0aW9uO3ZhciBJPXRoaXMucGFyc2VTaWduYXR1cmVFeHByZXNzaW9uKCk7aWYodGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiKSIpLCsrdGhpcy5wb3NpdGlvbix0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIjoiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBPPXRoaXMucGFyc2VTaWduYXR1cmVFeHByZXNzaW9uKCk7cmV0dXJuIHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIj0iKSwrK3RoaXMucG9zaXRpb24sbmV3IE0uRnVuY3RvckJpbmRpbmcoaCxBLEksbmV3IE0uVHJhbnNwYXJlbnRDb25zdHJhaW50KHRoaXMucGFyc2VTdHJ1Y3R1cmVFeHByZXNzaW9uKCksTykpfXJldHVybiB0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIjo+Iik/KCsrdGhpcy5wb3NpdGlvbixPPXRoaXMucGFyc2VTaWduYXR1cmVFeHByZXNzaW9uKCksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPSIpLCsrdGhpcy5wb3NpdGlvbixuZXcgTS5GdW5jdG9yQmluZGluZyhoLEEsSSxuZXcgTS5PcGFxdWVDb25zdHJhaW50KHRoaXMucGFyc2VTdHJ1Y3R1cmVFeHByZXNzaW9uKCksTykpKToodGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiPSIpLCsrdGhpcy5wb3NpdGlvbixuZXcgTS5GdW5jdG9yQmluZGluZyhoLEEsSSx0aGlzLnBhcnNlU3RydWN0dXJlRXhwcmVzc2lvbigpKSl9dmFyIEU9dGhpcy5wYXJzZVNwZWNpZmljYXRpb24oKSxyPW5ldyBNLlNpZ25hdHVyZUV4cHJlc3Npb24oRSk7dGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiKSIpLCsrdGhpcy5wb3NpdGlvbjt2YXIgZT0hMSxvPXZvaWQgMDt0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIjoiKT8oKyt0aGlzLnBvc2l0aW9uLG89dGhpcy5wYXJzZVNpZ25hdHVyZUV4cHJlc3Npb24oKSk6dGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI6PiIpJiYoZT0hMCwrK3RoaXMucG9zaXRpb24sbz10aGlzLnBhcnNlU2lnbmF0dXJlRXhwcmVzc2lvbigpKSx0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IiksKyt0aGlzLnBvc2l0aW9uO3ZhciB5PXRoaXMucGFyc2VTdHJ1Y3R1cmVFeHByZXNzaW9uKCksZD1uZXcgcS5BbHBoYW51bWVyaWNJZGVudGlmaWVyVG9rZW4oIl9fZmFyZyIpO3JldHVybiBvIT09dm9pZCAwJiYoeT1lP25ldyBNLk9wYXF1ZUNvbnN0cmFpbnQoeSxvKTpuZXcgTS5UcmFuc3BhcmVudENvbnN0cmFpbnQoeSxvKSkseT1uZXcgTS5Mb2NhbERlY2xhcmF0aW9uU3RydWN0dXJlRXhwcmVzc2lvbihuZXcgQi5PcGVuRGVjbGFyYXRpb24oW2RdKSx5KSxuZXcgTS5GdW5jdG9yQmluZGluZyhoLGQscix5KX0sRC5wcm90b3R5cGUucGFyc2VGdW5jdG9yQmluZGluZ1NlcT1mdW5jdGlvbigpe2Zvcih2YXIgaD1bXTtoLnB1c2godGhpcy5wYXJzZUZ1bmN0b3JCaW5kaW5nKCkpLHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiYW5kIik7KSsrdGhpcy5wb3NpdGlvbjtyZXR1cm4gaH0sRC5wcm90b3R5cGUucGFyc2VUeXBlVmFyU2VxdWVuY2U9ZnVuY3Rpb24oaCl7aD09PXZvaWQgMCYmKGg9ITEpO3ZhciBBPXRoaXMuY3VycmVudFRva2VuKCksST1bXTtpZihBIGluc3RhbmNlb2YgcS5UeXBlVmFyaWFibGVUb2tlbilyZXR1cm4gSS5wdXNoKG5ldyBnLlR5cGVWYXJpYWJsZShBLnRleHQpKSwrK3RoaXMucG9zaXRpb24sSTtpZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKEEsIigiKSlmb3IoKyt0aGlzLnBvc2l0aW9uOzspe2lmKCEoKEE9dGhpcy5jdXJyZW50VG9rZW4oKSlpbnN0YW5jZW9mIHEuVHlwZVZhcmlhYmxlVG9rZW4pKXtpZihoKXJldHVybjt0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcigiRXhwZWN0ZWQgYSB0eXBlIHZhcmlibGUuIil9aWYoSS5wdXNoKG5ldyBnLlR5cGVWYXJpYWJsZShBLnRleHQpKSwrK3RoaXMucG9zaXRpb24sQT10aGlzLmN1cnJlbnRUb2tlbigpLCF0aGlzLmNoZWNrS2V5d29yZFRva2VuKEEsIiwiKSl7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihBLCIpIikpeysrdGhpcy5wb3NpdGlvbjticmVha310aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignRXhwZWN0ZWQgIiwiIG9yICIpIiBidXQgZ290ICInK0EuZ2V0VGV4dCgpKyciLicpfSsrdGhpcy5wb3NpdGlvbn1yZXR1cm4gSX0sRC5wcm90b3R5cGUucGFyc2VEZWNsYXJhdGlvbj1mdW5jdGlvbihoLEEpe2g9PT12b2lkIDAmJihoPSExKSxBPT09dm9pZCAwJiYoQT0hMSk7Zm9yKHZhciBJPVtdLE89dGhpcy5jdXJyZW50SWQrKzt0aGlzLnBvc2l0aW9uPHRoaXMudG9rZW5zLmxlbmd0aDspe3ZhciBFPXRoaXMucGFyc2VTaW1wbGVEZWNsYXJhdGlvbihoLEEpO2lmKEUgaW5zdGFuY2VvZiBCLkVtcHR5RGVjbGFyYXRpb24pe2lmKHRoaXMucG9zaXRpb24+PXRoaXMudG9rZW5zLmxlbmd0aHx8dGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJpbiIpfHx0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImVuZCIpfHx0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIikiKSlicmVha31lbHNlIEkucHVzaChFKSx0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIjsiKSYmKyt0aGlzLnBvc2l0aW9ufXJldHVybiBuZXcgQi5TZXF1ZW50aWFsRGVjbGFyYXRpb24oSSxPKX0sRC5wcm90b3R5cGUucGFyc2VTaW1wbGVEZWNsYXJhdGlvbj1mdW5jdGlvbihoLEEpe2g9PT12b2lkIDAmJihoPSExKSxBPT09dm9pZCAwJiYoQT0hMSk7dmFyIEk9dGhpcy5jdXJyZW50VG9rZW4oKSxPPXRoaXMuY3VycmVudElkKys7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJ2YWwiKSl7Kyt0aGlzLnBvc2l0aW9uLCh5PXRoaXMucGFyc2VUeXBlVmFyU2VxdWVuY2UoITApKT09PXZvaWQgMCYmKC0tdGhpcy5wb3NpdGlvbix5PVtdKTtmb3IodmFyIEU9W10scj0hMTs7KXt2YXIgZT10aGlzLnBhcnNlVmFsdWVCaW5kaW5nKCk7aWYoZS5pc1JlY3Vyc2l2ZSl7cj0hMDtmb3IodmFyIG89ZS5wYXR0ZXJuO28gaW5zdGFuY2VvZiBtLlR5cGVkRXhwcmVzc2lvbjspbz1vLmV4cHJlc3Npb247aWYoIShlLmV4cHJlc3Npb24gaW5zdGFuY2VvZiBtLkxhbWJkYSkpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ1VzaW5nICJyZWMiIHJlcXVpcmVzIGJpbmRpbmcgYSBsYW1iZGEuJyk7aWYoIShvIGluc3RhbmNlb2YgbS5WYWx1ZUlkZW50aWZpZXJ8fG8gaW5zdGFuY2VvZiBtLldpbGRjYXJkKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignVXNpbmcgInJlYyIgcmVxdWlyZXMgYmluZGluZyB0byBhIHNpbmdsZSBpZGVudGlmaWVyIGFuZCBub3QgIicrby50b1N0cmluZygwLCEwKSsnIi4nKX1pZihlLmlzUmVjdXJzaXZlPXIsRS5wdXNoKGUpLCF0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImFuZCIpKWJyZWFrOysrdGhpcy5wb3NpdGlvbn1yZXR1cm4gbmV3IEIuVmFsdWVEZWNsYXJhdGlvbih5LEUsTyl9aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJmdW4iKSl7dmFyIHk7Kyt0aGlzLnBvc2l0aW9uLCh5PXRoaXMucGFyc2VUeXBlVmFyU2VxdWVuY2UoITApKT09PXZvaWQgMCYmKC0tdGhpcy5wb3NpdGlvbix5PVtdKTtmb3IodmFyIGQ9W107ZC5wdXNoKHRoaXMucGFyc2VGdW5jdGlvblZhbHVlQmluZGluZygpKSx0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImFuZCIpOykrK3RoaXMucG9zaXRpb247cmV0dXJuIG5ldyBCLkZ1bmN0aW9uRGVjbGFyYXRpb24oeSxkLE8pfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oSSwidHlwZSIpKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgQi5UeXBlRGVjbGFyYXRpb24odGhpcy5wYXJzZVR5cGVCaW5kaW5nU2VxKCksTyk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJkYXRhdHlwZSIpKXtpZih0aGlzLnBvc2l0aW9uKzM8dGhpcy50b2tlbnMubGVuZ3RoJiZ0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMudG9rZW5zW3RoaXMucG9zaXRpb24rM10sImRhdGF0eXBlIikpeysrdGhpcy5wb3NpdGlvbjt2YXIgdj10aGlzLmN1cnJlbnRUb2tlbigpO3RoaXMuYXNzZXJ0SWRlbnRpZmllclRva2VuKHYpLCsrdGhpcy5wb3NpdGlvbix0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI9IiksKyt0aGlzLnBvc2l0aW9uLHRoaXMuYXNzZXJ0S2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksImRhdGF0eXBlIiksKyt0aGlzLnBvc2l0aW9uO3ZhciBDPXRoaXMuY3VycmVudFRva2VuKCk7cmV0dXJuIHRoaXMuYXNzZXJ0SWRlbnRpZmllck9yTG9uZ1Rva2VuKEMpLCsrdGhpcy5wb3NpdGlvbixuZXcgQi5EYXRhdHlwZVJlcGxpY2F0aW9uKHYsQyxPKX0rK3RoaXMucG9zaXRpb247dmFyIEc9dGhpcy5wYXJzZURhdGF0eXBlQmluZGluZ1NlcSgpO2lmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwid2l0aHR5cGUiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBZPXRoaXMucGFyc2VUeXBlQmluZGluZ1NlcSgpO3JldHVybiBuZXcgQi5EYXRhdHlwZURlY2xhcmF0aW9uKEcsWSxPKX1yZXR1cm4gbmV3IEIuRGF0YXR5cGVEZWNsYXJhdGlvbihHLHZvaWQgMCxPKX1pZih0aGlzLmNoZWNrS2V5d29yZFRva2VuKEksImFic3R5cGUiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBKPXRoaXMuc3RhdGU7dGhpcy5zdGF0ZT10aGlzLnN0YXRlLmdldE5lc3RlZFN0YXRlKHRoaXMuc3RhdGUuaWQpO3ZhciB6PW5ldyBTZXQ7dGhpcy5uZXdjb25zLmZvckVhY2goZnVuY3Rpb24oXyl7ej16LmFkZChfKX0pLEc9dGhpcy5wYXJzZURhdGF0eXBlQmluZGluZ1NlcSgpO3ZhciBwPXZvaWQgMDt0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMuY3VycmVudFRva2VuKCksIndpdGh0eXBlIikmJigrK3RoaXMucG9zaXRpb24scD10aGlzLnBhcnNlVHlwZUJpbmRpbmdTZXEoKSksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwid2l0aCIpLCsrdGhpcy5wb3NpdGlvbjt2YXIgYz10aGlzLnBhcnNlRGVjbGFyYXRpb24oKTtyZXR1cm4gdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiZW5kIiksKyt0aGlzLnBvc2l0aW9uLHRoaXMuc3RhdGU9Six0aGlzLm5ld2NvbnM9eixuZXcgQi5BYnN0eXBlRGVjbGFyYXRpb24oRyxwLGMsTyl9aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJleGNlcHRpb24iKSl7Kyt0aGlzLnBvc2l0aW9uO2Zvcih2YXIgdz1bXTt3LnB1c2godGhpcy5wYXJzZUV4Y2VwdGlvbkJpbmRpbmcoKSksdGhpcy5jaGVja0tleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJhbmQiKTspKyt0aGlzLnBvc2l0aW9uO3JldHVybiBuZXcgQi5FeGNlcHRpb25EZWNsYXJhdGlvbih3LE8pfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oSSwibG9jYWwiKSl7Kyt0aGlzLnBvc2l0aW9uLEo9dGhpcy5zdGF0ZSx0aGlzLnN0YXRlPXRoaXMuc3RhdGUuZ2V0TmVzdGVkU3RhdGUodGhpcy5zdGF0ZS5pZCk7dmFyIFQ9bmV3IFNldDt0aGlzLm5ld2NvbnMuZm9yRWFjaChmdW5jdGlvbihfKXtUPVQuYWRkKF8pfSksYz10aGlzLnBhcnNlRGVjbGFyYXRpb24oITEsQSksdGhpcy5hc3NlcnRLZXl3b3JkVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSwiaW4iKSwrK3RoaXMucG9zaXRpb247dmFyIE49dGhpcy5wYXJzZURlY2xhcmF0aW9uKCExLEEpO3JldHVybiB0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCJlbmQiKSwrK3RoaXMucG9zaXRpb24sdGhpcy5zdGF0ZT1KLHRoaXMubmV3Y29ucz1ULG5ldyBCLkxvY2FsRGVjbGFyYXRpb24oYyxOLE8pfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oSSwib3BlbiIpKXsrK3RoaXMucG9zaXRpb247Zm9yKHZhciAkPVtdO3RoaXMuY2hlY2tJZGVudGlmaWVyT3JMb25nVG9rZW4odGhpcy5jdXJyZW50VG9rZW4oKSk7KSQucHVzaCh0aGlzLmN1cnJlbnRUb2tlbigpKSwrK3RoaXMucG9zaXRpb247aWYoJC5sZW5ndGg9PT0wKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdFbXB0eSAib3BlbiIgZGVjbGFyYXRpb24uJyk7cmV0dXJuIG5ldyBCLk9wZW5EZWNsYXJhdGlvbigkLE8pfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oSSwiaW5maXgiKSl7Kyt0aGlzLnBvc2l0aW9uO3ZhciBIPTA7aWYodGhpcy5jdXJyZW50VG9rZW4oKWluc3RhbmNlb2YgcS5JbnRlZ2VyQ29uc3RhbnRUb2tlbil7aWYodGhpcy5jdXJyZW50VG9rZW4oKS50ZXh0Lmxlbmd0aCE9PTEpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoIlByZWNlZGVuY2VzIG1heSBvbmx5IGJlIHNpbmdsZSBkaWdpdHMuIik7SD10aGlzLmN1cnJlbnRUb2tlbigpLnZhbHVlLCsrdGhpcy5wb3NpdGlvbn1mb3IoJD1bXTt0aGlzLmN1cnJlbnRUb2tlbigpLmlzVmlkKCk7KSQucHVzaCh0aGlzLmN1cnJlbnRUb2tlbigpKSwrK3RoaXMucG9zaXRpb247aWYoJC5sZW5ndGg9PT0wKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdFbXB0eSAiaW5maXgiIGRlY2xhcmF0aW9uLicpO3JldHVybihQPW5ldyBCLkluZml4RGVjbGFyYXRpb24oJCxILE8pKS5zZXRJbmZpeFN0YXR1cyh0aGlzLnN0YXRlKSxQfWlmKHRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oSSwiaW5maXhyIikpe2lmKCsrdGhpcy5wb3NpdGlvbixIPTAsdGhpcy5jdXJyZW50VG9rZW4oKWluc3RhbmNlb2YgcS5JbnRlZ2VyQ29uc3RhbnRUb2tlbil7aWYodGhpcy5jdXJyZW50VG9rZW4oKS50ZXh0Lmxlbmd0aCE9PTEpdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoIlByZWNlZGVuY2VzIG1heSBvbmx5IGJlIHNpbmdsZSBkaWdpdHMuIik7SD10aGlzLmN1cnJlbnRUb2tlbigpLnZhbHVlLCsrdGhpcy5wb3NpdGlvbn1mb3IoJD1bXTt0aGlzLmN1cnJlbnRUb2tlbigpLmlzVmlkKCk7KSQucHVzaCh0aGlzLmN1cnJlbnRUb2tlbigpKSwrK3RoaXMucG9zaXRpb247aWYoJC5sZW5ndGg9PT0wKXRocm93IG5ldyBzLlBhcnNlckVycm9yKCdFbXB0eSAiaW5maXhyIiBkZWNsYXJhdGlvbi4nKTtyZXR1cm4oUD1uZXcgQi5JbmZpeFJEZWNsYXJhdGlvbigkLEgsTykpLnNldEluZml4U3RhdHVzKHRoaXMuc3RhdGUpLFB9aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJub25maXgiKSl7Zm9yKCsrdGhpcy5wb3NpdGlvbiwkPVtdO3RoaXMuY3VycmVudFRva2VuKCkuaXNWaWQoKTspJC5wdXNoKHRoaXMuY3VycmVudFRva2VuKCkpLCsrdGhpcy5wb3NpdGlvbjtpZigkLmxlbmd0aD09PTApdGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0VtcHR5ICJub25maXgiIGRlY2xhcmF0aW9uLicpO3ZhciBQO3JldHVybihQPW5ldyBCLk5vbmZpeERlY2xhcmF0aW9uKCQsTykpLnNldEluZml4U3RhdHVzKHRoaXMuc3RhdGUpLFB9aWYodGhpcy5vcHRpb25zLmFsbG93U3VjY2Vzc29yTUwmJnRoaXMuY2hlY2tLZXl3b3JkVG9rZW4oSSwiZG8iKSlyZXR1cm4rK3RoaXMucG9zaXRpb24sbmV3IEIuRXZhbHVhdGlvbih0aGlzLnBhcnNlRXhwcmVzc2lvbigpKTtpZigodGhpcy5vcHRpb25zLmFsbG93U3RydWN0dXJlc0FueXdoZXJlPT09ITB8fEEpJiZ0aGlzLmNoZWNrS2V5d29yZFRva2VuKEksInN0cnVjdHVyZSIpKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgTS5TdHJ1Y3R1cmVEZWNsYXJhdGlvbih0aGlzLnBhcnNlU3RydWN0dXJlQmluZGluZ1NlcSgpKTtpZigodGhpcy5vcHRpb25zLmFsbG93U2lnbmF0dXJlc0FueXdoZXJlPT09ITB8fGgpJiZ0aGlzLmNoZWNrS2V5d29yZFRva2VuKEksInNpZ25hdHVyZSIpKXJldHVybisrdGhpcy5wb3NpdGlvbixuZXcgTS5TaWduYXR1cmVEZWNsYXJhdGlvbih0aGlzLnBhcnNlU2lnbmF0dXJlQmluZGluZ1NlcSgpKTtpZigodGhpcy5vcHRpb25zLmFsbG93RnVuY3RvcnNBbnl3aGVyZT09PSEwfHxoKSYmdGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJmdW5jdG9yIikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBNLkZ1bmN0b3JEZWNsYXJhdGlvbih0aGlzLnBhcnNlRnVuY3RvckJpbmRpbmdTZXEoKSk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCI7IikpcmV0dXJuKyt0aGlzLnBvc2l0aW9uLG5ldyBCLkVtcHR5RGVjbGFyYXRpb24oTyk7aWYodGhpcy5jaGVja0tleXdvcmRUb2tlbihJLCJpbiIpfHx0aGlzLmNoZWNrS2V5d29yZFRva2VuKEksImVuZCIpfHx0aGlzLmNoZWNrS2V5d29yZFRva2VuKEksIikiKSlyZXR1cm4gbmV3IEIuRW1wdHlEZWNsYXJhdGlvbihPKTtpZihoKXtpZih0aGlzLnBvc2l0aW9uPjAmJiF0aGlzLmNoZWNrS2V5d29yZFRva2VuKHRoaXMudG9rZW5zW3RoaXMucG9zaXRpb24tMV0sIjsiKSl0aHJvdyBuZXcgcy5QYXJzZXJFcnJvcignQSBzaW5nbGUgdG9wLWxldmVsIGV4cHJlc3Npb24gbXVzdCBiZSBzZXBhcmF0ZWQgZnJvbSBwcmVjZWVkaW5nIGRlY2xhcmF0aW9ucyBieSBhICI7Ii4nKTt2YXIgeD10aGlzLnBhcnNlRXhwcmVzc2lvbigpLFI9bmV3IEIuVmFsdWVCaW5kaW5nKCExLG5ldyBtLlZhbHVlSWRlbnRpZmllcihuZXcgcS5BbHBoYW51bWVyaWNJZGVudGlmaWVyVG9rZW4oIml0IikpLHgpO3JldHVybiB0aGlzLmFzc2VydEtleXdvcmRUb2tlbih0aGlzLmN1cnJlbnRUb2tlbigpLCI7IiksbmV3IEIuVmFsdWVEZWNsYXJhdGlvbihbXSxbUl0sTyl9dGhyb3cgbmV3IHMuUGFyc2VyRXJyb3IoJ0V4cGVjdGVkIGEgZGVjbGFyYXRpb24sIGZvdW5kICInK0kuZ2V0VGV4dCgpKyciLicpfSxELnByb3RvdHlwZS5jdXJyZW50VG9rZW49ZnVuY3Rpb24oKXtpZih0aGlzLnBvc2l0aW9uPj10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cgbmV3IHMuSW5jb21wbGV0ZUVycm9yKCJNb3JlIGlucHV0LCBJJ20gc3RhcnZpbmcuIH5ueWFuLiIpO3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc2l0aW9uXX0sRC5wcm90b3R5cGUubmV4dFRva2VuPWZ1bmN0aW9uKCl7aWYodGhpcy5wb3NpdGlvbisxPj10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cgbmV3IHMuSW5jb21wbGV0ZUVycm9yKCJNb3JlIGlucHV0LCBJJ20gc3RhcnZpbmcuIH5ueWFuLiIpO3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc2l0aW9uKzFdfSxEfSgpO3UuUGFyc2VyPVYsdS5wYXJzZT1mdW5jdGlvbihELGgsQSl7QT09PXZvaWQgMCYmKEE9e30pO3ZhciBJPW5ldyBWKEQsaCxoLmlkLEEpLE89SS5wYXJzZURlY2xhcmF0aW9uKCEwLCEwKTtyZXR1cm4gSS5hc3NlcnRGaW5pc2hlZCgpLE99fSwzNjc6KGZlLHUsSyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5TdGF0ZT11LlN0YXRpY0Jhc2lzPXUuRHluYW1pY0Jhc2lzPXUuSW5maXhTdGF0dXM9dS5EeW5hbWljSW50ZXJmYWNlPXUuRHluYW1pY0Z1bmN0b3JJbmZvcm1hdGlvbj11LlR5cGVJbmZvcm1hdGlvbj11LklkZW50aWZpZXJTdGF0dXM9dm9pZCAwO3ZhciBtLGc9Syg2OTkpLHM9SygxMDYpLHE9Syg1MzQpLEI9Syg3NTgpOyhtPXUuSWRlbnRpZmllclN0YXR1c3x8KHUuSWRlbnRpZmllclN0YXR1cz17fSkpW20uVkFMVUVfVkFSSUFCTEU9MF09IlZBTFVFX1ZBUklBQkxFIixtW20uVkFMVUVfQ09OU1RSVUNUT1I9MV09IlZBTFVFX0NPTlNUUlVDVE9SIixtW20uRVhDRVBUSU9OX0NPTlNUUlVDVE9SPTJdPSJFWENFUFRJT05fQ09OU1RSVUNUT1IiO3ZhciBNPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRShyLGUsbyx5KXt5PT09dm9pZCAwJiYoeT0hMCksdGhpcy50eXBlPXIsdGhpcy5jb25zdHJ1Y3RvcnM9ZSx0aGlzLmFyaXR5PW8sdGhpcy5hbGxvd3NFcXVhbGl0eT15fXJldHVybiBFLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJUeXBlSW5mb3JtYXRpb24oIit0aGlzLnR5cGUrIiwgWyIrdGhpcy5jb25zdHJ1Y3RvcnMrIl0sIGFyaXR5ID0gIit0aGlzLmFyaXR5KyIsIGFsbG93c0VxdWFsaXR5ID0gIit0aGlzLmFsbG93c0VxdWFsaXR5KyIpIn0sRX0oKTt1LlR5cGVJbmZvcm1hdGlvbj1NO3ZhciBWPWZ1bmN0aW9uKEUscixlLG8pe3RoaXMucGFyYW1OYW1lPUUsdGhpcy5wYXJhbT1yLHRoaXMuYm9keT1lLHRoaXMuc3RhdGU9b307dS5EeW5hbWljRnVuY3RvckluZm9ybWF0aW9uPVY7dmFyIEQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBFKHIsZSxvKXt0aGlzLnR5cGVJbnRlcmZhY2U9cix0aGlzLnZhbHVlSW50ZXJmYWNlPWUsdGhpcy5zdHJ1Y3R1cmVJbnRlcmZhY2U9b31yZXR1cm4gRS5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKHIpe2Zvcih2YXIgZSBpbiByLnR5cGVJbnRlcmZhY2Upci50eXBlSW50ZXJmYWNlLmhhc093blByb3BlcnR5KGUpJiYodGhpcy50eXBlSW50ZXJmYWNlW2VdPXIudHlwZUludGVyZmFjZVtlXSk7Zm9yKHZhciBlIGluIHIudmFsdWVJbnRlcmZhY2Upci52YWx1ZUludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXMudmFsdWVJbnRlcmZhY2VbZV09ci52YWx1ZUludGVyZmFjZVtlXSk7Zm9yKHZhciBlIGluIHIuc3RydWN0dXJlSW50ZXJmYWNlKXIuc3RydWN0dXJlSW50ZXJmYWNlLmhhc093blByb3BlcnR5KGUpJiYodGhpcy5zdHJ1Y3R1cmVJbnRlcmZhY2VbZV09ci5zdHJ1Y3R1cmVJbnRlcmZhY2VbZV0pO3JldHVybiB0aGlzfSxFfSgpO3UuRHluYW1pY0ludGVyZmFjZT1EO3ZhciBoPWZ1bmN0aW9uKEUscixlKXtyPT09dm9pZCAwJiYocj0wKSxlPT09dm9pZCAwJiYoZT0hMSksdGhpcy5pbmZpeD1FLHRoaXMucHJlY2VkZW5jZT1yLHRoaXMucmlnaHRBc3NvY2lhdGl2ZT1lfTt1LkluZml4U3RhdHVzPWg7dmFyIEE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBFKHIsZSxvLHksZCl7dGhpcy50eXBlRW52aXJvbm1lbnQ9cix0aGlzLnZhbHVlRW52aXJvbm1lbnQ9ZSx0aGlzLnN0cnVjdHVyZUVudmlyb25tZW50PW8sdGhpcy5zaWduYXR1cmVFbnZpcm9ubWVudD15LHRoaXMuZnVuY3RvckVudmlyb25tZW50PWR9cmV0dXJuIEUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKHIpe2lmKHRoaXMudmFsdWVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShyKSlyZXR1cm4gdGhpcy52YWx1ZUVudmlyb25tZW50W3JdfSxFLnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKHIpe2lmKHRoaXMudHlwZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KHIpKXJldHVybiB0aGlzLnR5cGVFbnZpcm9ubWVudFtyXX0sRS5wcm90b3R5cGUuZ2V0U3RydWN0dXJlPWZ1bmN0aW9uKHIpe2lmKHRoaXMuc3RydWN0dXJlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocikpcmV0dXJuIHRoaXMuc3RydWN0dXJlRW52aXJvbm1lbnRbcl19LEUucHJvdG90eXBlLmdldFNpZ25hdHVyZT1mdW5jdGlvbihyKXtpZih0aGlzLnNpZ25hdHVyZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KHIpKXJldHVybiB0aGlzLnNpZ25hdHVyZUVudmlyb25tZW50W3JdfSxFLnByb3RvdHlwZS5nZXRGdW5jdG9yPWZ1bmN0aW9uKHIpe2lmKHRoaXMuZnVuY3RvckVudmlyb25tZW50Lmhhc093blByb3BlcnR5KHIpKXJldHVybiBuZXcgVih0aGlzLmZ1bmN0b3JFbnZpcm9ubWVudFtyXS5wYXJhbU5hbWUsdGhpcy5mdW5jdG9yRW52aXJvbm1lbnRbcl0ucGFyYW0sdGhpcy5mdW5jdG9yRW52aXJvbm1lbnRbcl0uYm9keSx0aGlzLmZ1bmN0b3JFbnZpcm9ubWVudFtyXS5zdGF0ZS5nZXROZXN0ZWRTdGF0ZSh0aGlzLmZ1bmN0b3JFbnZpcm9ubWVudFtyXS5zdGF0ZS5pZCkpfSxFLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbihyLGUsbyl7dGhpcy52YWx1ZUVudmlyb25tZW50W3JdPVtlLG9dfSxFLnByb3RvdHlwZS5zZXRUeXBlPWZ1bmN0aW9uKHIsZSl7dGhpcy50eXBlRW52aXJvbm1lbnRbcl09ZX0sRS5wcm90b3R5cGUuc2V0U3RydWN0dXJlPWZ1bmN0aW9uKHIsZSl7dGhpcy5zdHJ1Y3R1cmVFbnZpcm9ubWVudFtyXT1lfSxFLnByb3RvdHlwZS5zZXRTaWduYXR1cmU9ZnVuY3Rpb24ocixlKXt0aGlzLnNpZ25hdHVyZUVudmlyb25tZW50W3JdPWV9LEUucHJvdG90eXBlLnNldEZ1bmN0b3I9ZnVuY3Rpb24ocixlKXt0aGlzLmZ1bmN0b3JFbnZpcm9ubWVudFtyXT1lfSxFLnByb3RvdHlwZS5leHRlbmQ9ZnVuY3Rpb24ocil7Zm9yKHZhciBlIGluIHIudHlwZUVudmlyb25tZW50KXIudHlwZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGUpJiYodGhpcy50eXBlRW52aXJvbm1lbnRbZV09ci50eXBlRW52aXJvbm1lbnRbZV0pO2Zvcih2YXIgZSBpbiByLnZhbHVlRW52aXJvbm1lbnQpci52YWx1ZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGUpJiYodGhpcy52YWx1ZUVudmlyb25tZW50W2VdPXIudmFsdWVFbnZpcm9ubWVudFtlXSk7Zm9yKHZhciBlIGluIHIuc3RydWN0dXJlRW52aXJvbm1lbnQpci5zdHJ1Y3R1cmVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXMuc3RydWN0dXJlRW52aXJvbm1lbnRbZV09ci5zdHJ1Y3R1cmVFbnZpcm9ubWVudFtlXSk7Zm9yKHZhciBlIGluIHIuc2lnbmF0dXJlRW52aXJvbm1lbnQpci5zaWduYXR1cmVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXMuc2lnbmF0dXJlRW52aXJvbm1lbnRbZV09ci5zaWduYXR1cmVFbnZpcm9ubWVudFtlXSk7Zm9yKHZhciBlIGluIHIuZnVuY3RvckVudmlyb25tZW50KXIuZnVuY3RvckVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGUpJiYodGhpcy5mdW5jdG9yRW52aXJvbm1lbnRbZV09ci5mdW5jdG9yRW52aXJvbm1lbnRbZV0pO3JldHVybiB0aGlzfSxFLnByb3RvdHlwZS5yZXN0cmljdD1mdW5jdGlvbihyKXt2YXIgZT1uZXcgRSh7fSx7fSx7fSx0aGlzLnNpZ25hdHVyZUVudmlyb25tZW50LHRoaXMuZnVuY3RvckVudmlyb25tZW50KTtmb3IodmFyIG8gaW4gci50eXBlSW50ZXJmYWNlKWlmKHIudHlwZUludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShvKSYmdGhpcy50eXBlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkobykpe2Zvcih2YXIgeT1uZXcgU2V0LGQ9W10sdj0wO3Y8dGhpcy50eXBlRW52aXJvbm1lbnRbb10ubGVuZ3RoOysrdil5PXkuYWRkKHRoaXMudHlwZUVudmlyb25tZW50W29dW3ZdKTtmb3Iodj0wO3Y8ci50eXBlSW50ZXJmYWNlW29dLmxlbmd0aDsrK3YpeS5oYXMoci50eXBlSW50ZXJmYWNlW29dW3ZdKSYmZC5wdXNoKHIudHlwZUludGVyZmFjZVtvXVt2XSk7ZS50eXBlRW52aXJvbm1lbnRbb109ZH1mb3IodmFyIG8gaW4gci52YWx1ZUludGVyZmFjZSlyLnZhbHVlSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG8pJiZ0aGlzLnZhbHVlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkobykmJihlLnZhbHVlRW52aXJvbm1lbnRbb109W3RoaXMudmFsdWVFbnZpcm9ubWVudFtvXVswXSxyLnZhbHVlSW50ZXJmYWNlW29dXSk7Zm9yKHZhciBvIGluIHIuc3RydWN0dXJlSW50ZXJmYWNlKXIuc3RydWN0dXJlSW50ZXJmYWNlLmhhc093blByb3BlcnR5KG8pJiZ0aGlzLnN0cnVjdHVyZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KG8pJiYoZS5zdHJ1Y3R1cmVFbnZpcm9ubWVudFtvXT10aGlzLnN0cnVjdHVyZUVudmlyb25tZW50W29dLnJlc3RyaWN0KHIuc3RydWN0dXJlSW50ZXJmYWNlW29dKSk7cmV0dXJuIGV9LEV9KCk7dS5EeW5hbWljQmFzaXM9QTt2YXIgST1mdW5jdGlvbigpe2Z1bmN0aW9uIEUocixlLG8seSxkKXt0aGlzLnR5cGVFbnZpcm9ubWVudD1yLHRoaXMudmFsdWVFbnZpcm9ubWVudD1lLHRoaXMuc3RydWN0dXJlRW52aXJvbm1lbnQ9byx0aGlzLnNpZ25hdHVyZUVudmlyb25tZW50PXksdGhpcy5mdW5jdG9yRW52aXJvbm1lbnQ9ZH1yZXR1cm4gRS5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24ocil7aWYodGhpcy52YWx1ZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KHIpKXJldHVybiB0aGlzLnZhbHVlRW52aXJvbm1lbnRbcl19LEUucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24ocil7aWYodGhpcy50eXBlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocikpcmV0dXJuIHRoaXMudHlwZUVudmlyb25tZW50W3JdfSxFLnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmU9ZnVuY3Rpb24ocil7aWYodGhpcy5zdHJ1Y3R1cmVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShyKSlyZXR1cm4gdGhpcy5zdHJ1Y3R1cmVFbnZpcm9ubWVudFtyXX0sRS5wcm90b3R5cGUuZ2V0U2lnbmF0dXJlPWZ1bmN0aW9uKHIpe2lmKHRoaXMuc2lnbmF0dXJlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocikpcmV0dXJuIHRoaXMuc2lnbmF0dXJlRW52aXJvbm1lbnRbcl19LEUucHJvdG90eXBlLmdldEZ1bmN0b3I9ZnVuY3Rpb24ocil7aWYodGhpcy5mdW5jdG9yRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocikpe3ZhciBlPXRoaXMuZnVuY3RvckVudmlyb25tZW50W3JdWzBdLG89dGhpcy5mdW5jdG9yRW52aXJvbm1lbnRbcl1bMV07cmV0dXJuW25ldyBFKHt9LHt9LHt9LHt9LHt9KS5leHRlbmQoZSksbmV3IEUoe30se30se30se30se30pLmV4dGVuZChvKSx0aGlzLmZ1bmN0b3JFbnZpcm9ubWVudFtyXVsyXSx0aGlzLmZ1bmN0b3JFbnZpcm9ubWVudFtyXVszXV19fSxFLnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbihyLGUsbyl7dGhpcy52YWx1ZUVudmlyb25tZW50W3JdPVtlLG9dfSxFLnByb3RvdHlwZS5kZWxldGVWYWx1ZT1mdW5jdGlvbihyKXt0aGlzLnZhbHVlRW52aXJvbm1lbnRbcl09dm9pZCAwfSxFLnByb3RvdHlwZS5zZXRUeXBlPWZ1bmN0aW9uKHIsZSxvLHksZCl7dGhpcy50eXBlRW52aXJvbm1lbnRbcl09bmV3IE0oZSxvLHksZCl9LEUucHJvdG90eXBlLnNldFN0cnVjdHVyZT1mdW5jdGlvbihyLGUpe3RoaXMuc3RydWN0dXJlRW52aXJvbm1lbnRbcl09ZX0sRS5wcm90b3R5cGUuc2V0U2lnbmF0dXJlPWZ1bmN0aW9uKHIsZSl7dGhpcy5zaWduYXR1cmVFbnZpcm9ubWVudFtyXT1lfSxFLnByb3RvdHlwZS5zZXRGdW5jdG9yPWZ1bmN0aW9uKHIsZSxvKXt0aGlzLmZ1bmN0b3JFbnZpcm9ubWVudFtyXT1bZVswXSxlWzFdLGVbMl0sb119LEUucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihyKXtmb3IodmFyIGUgaW4gci50eXBlRW52aXJvbm1lbnQpci50eXBlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkoZSkmJih0aGlzLnR5cGVFbnZpcm9ubWVudFtlXT1uZXcgTShyLnR5cGVFbnZpcm9ubWVudFtlXS50eXBlLHIudHlwZUVudmlyb25tZW50W2VdLmNvbnN0cnVjdG9ycyxyLnR5cGVFbnZpcm9ubWVudFtlXS5hcml0eSxyLnR5cGVFbnZpcm9ubWVudFtlXS5hbGxvd3NFcXVhbGl0eSkpO2Zvcih2YXIgZSBpbiByLnZhbHVlRW52aXJvbm1lbnQpci52YWx1ZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGUpJiYodGhpcy52YWx1ZUVudmlyb25tZW50W2VdPXIudmFsdWVFbnZpcm9ubWVudFtlXSk7Zm9yKHZhciBlIGluIHIuc3RydWN0dXJlRW52aXJvbm1lbnQpci5zdHJ1Y3R1cmVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXMuc3RydWN0dXJlRW52aXJvbm1lbnRbZV09ci5zdHJ1Y3R1cmVFbnZpcm9ubWVudFtlXSk7Zm9yKHZhciBlIGluIHIuc2lnbmF0dXJlRW52aXJvbm1lbnQpci5zaWduYXR1cmVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXMuc2lnbmF0dXJlRW52aXJvbm1lbnRbZV09ci5zaWduYXR1cmVFbnZpcm9ubWVudFtlXSk7Zm9yKHZhciBlIGluIHIuZnVuY3RvckVudmlyb25tZW50KXIuZnVuY3RvckVudmlyb25tZW50Lmhhc093blByb3BlcnR5KGUpJiYodGhpcy5mdW5jdG9yRW52aXJvbm1lbnRbZV09ci5mdW5jdG9yRW52aXJvbm1lbnRbZV0pO3JldHVybiB0aGlzfSxFfSgpO3UuU3RhdGljQmFzaXM9STt2YXIgTz1mdW5jdGlvbigpe2Z1bmN0aW9uIEUocixlLG8seSxkLHYsQyxHLFksSix6LHAsYyl7Qz09PXZvaWQgMCYmKEM9WzAsbmV3IE1hcF0pLEc9PT12b2lkIDAmJihHPXt9KSxZPT09dm9pZCAwJiYoWT17fSksSj09PXZvaWQgMCYmKEo9W10pLHo9PT12b2lkIDAmJih6PSExKSxwPT09dm9pZCAwJiYocD0hMSksYz09PXZvaWQgMCYmKGM9W10pLHRoaXMuaWQ9cix0aGlzLnBhcmVudD1lLHRoaXMuc3RhdGljQmFzaXM9byx0aGlzLmR5bmFtaWNCYXNpcz15LHRoaXMubWVtb3J5PWQsdGhpcy5leGNlcHRpb25FdmFsSWQ9dix0aGlzLmZyZWVUeXBlVmFyaWFibGVzPUMsdGhpcy5pbmZpeEVudmlyb25tZW50PUcsdGhpcy52YWx1ZUlkZW50aWZpZXJJZD1ZLHRoaXMud2FybnM9Six0aGlzLmluc2lkZUxvY2FsRGVjbEJvZHk9eix0aGlzLmxvY2FsRGVjbFN0YXJ0PXAsdGhpcy5sb2FkZWRNb2R1bGVzPWN9cmV0dXJuIEUuYWxsb3dzUmViaW5kPWZ1bmN0aW9uKHIpe3JldHVybnt0cnVlOiExLGZhbHNlOiExLG5pbDohMSwiOjoiOiExLCI9IjohMSxyZWY6ITEsIjo9IjohMSwiISI6ITF9W3JdPT09dm9pZCAwfSxFLnByb3RvdHlwZS5wcmludEJpbmRpbmc9ZnVuY3Rpb24ocixlLG8seSxkKXt5PT09dm9pZCAwJiYoeT17fSksZD09PXZvaWQgMCYmKGQ9ITApO3ZhciB2LEMsRz15LmJvbGRUZXh0PT09dm9pZCAwP2Z1bmN0aW9uKHApe3JldHVybiBwfTp5LmJvbGRUZXh0LFk9eS5pdGFsaWNUZXh0PT09dm9pZCAwP2Z1bmN0aW9uKHApe3JldHVybiBwfTp5Lml0YWxpY1RleHQsSj15LmVzY2FwZVRleHQ9PT12b2lkIDA/ZnVuY3Rpb24ocCl7cmV0dXJuIHB9OnkuZXNjYXBlVGV4dDtlIT09dm9pZCAwJiYodj1lWzBdKSxvIT09dm9pZCAwJiYoQz1vWzBdKTt2YXIgej0iIjtyZXR1cm4odiBpbnN0YW5jZW9mIHMuVmFsdWVDb25zdHJ1Y3Rvcnx8byBpbnN0YW5jZW9mIGcuQ3VzdG9tVHlwZSYmbysiIiE9ImV4biIpJiZkP3orPSJjb24iOmUgaW5zdGFuY2VvZiBzLkV4Y2VwdGlvbkNvbnN0cnVjdG9yfHxvKyIiPT0iZXhuIj96Kz0iZXhuIjp6Kz0idmFsIix2P0MmJkMuaXNPcGFxdWUoKT96Kz0iICIrRyhyKyIgPSA8IitKKEMuZ2V0T3BhcXVlTmFtZSgpKSsiPiIpOnorPSIgIitHKHIrIiA9ICIrSih2LnRvU3RyaW5nKHRoaXMpKSk6eis9IiAiK0cociksQz96KyI6ICIrWShKKEMudG9TdHJpbmcoeSkpKSsiOyI6eisiOiB1bmRlZmluZWQ7In0sRS5wcm90b3R5cGUucHJpbnRCYXNpcz1mdW5jdGlvbihyLGUsbyx5KXtvPT09dm9pZCAwJiYobz17fSkseT09PXZvaWQgMCYmKHk9MCk7dmFyIGQ9IiIsdj1vLmZ1bGxTeW1ib2w9PT12b2lkIDA/IiI6by5mdWxsU3ltYm9sLEM9by5lbXB0eVN5bWJvbD09PXZvaWQgMD8iIjpvLmVtcHR5U3ltYm9sLEc9eT09PTA/djpDLFk9IiAiLnJlcGVhdCh5KihvLmluZGVudD09PXZvaWQgMD8yOm8uaW5kZW50KSksSj1vLmJvbGRUZXh0PT09dm9pZCAwP2Z1bmN0aW9uKHgpe3JldHVybiB4fTpvLmJvbGRUZXh0LHo9by5lc2NhcGVUZXh0PT09dm9pZCAwP2Z1bmN0aW9uKHgpe3JldHVybiB4fTpvLmVzY2FwZVRleHQ7aWYocj09PXZvaWQgMCYmZSE9PXZvaWQgMCl7Zm9yKHZhciBwIGluIGUudmFsdWVFbnZpcm9ubWVudCllLnZhbHVlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocCkmJihkKz1HKyIgIitZK3RoaXMucHJpbnRCaW5kaW5nKHAsdm9pZCAwLGUuZ2V0VmFsdWUocCksbykrYApgKTtmb3IodmFyIHAgaW4gZS50eXBlRW52aXJvbm1lbnQpaWYoZS50eXBlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocCkmJihIPWUuZ2V0VHlwZShwKSkhPT12b2lkIDAmJkgudHlwZSBpbnN0YW5jZW9mIGcuQ3VzdG9tVHlwZSlpZihILmNvbnN0cnVjdG9ycy5sZW5ndGg9PT0wKUguYWxsb3dzRXF1YWxpdHk/ZCs9RysiICIrWSsiZXF0eXBlICIrSih6KEgudHlwZS50b1N0cmluZyhvKSkpK2A7CmA6ZCs9RysiICIrWSsidHlwZSAiK0ooeihILnR5cGUudG9TdHJpbmcobykpKStgOwpgO2Vsc2V7ZCs9RysiICIrWSsiZGF0YXR5cGUgIitKKHooSC50eXBlLnRvU3RyaW5nKG8pKSkrYCA6IHsKYDtmb3IodmFyIGM9MCx3PUguY29uc3RydWN0b3JzO2M8dy5sZW5ndGg7YysrKXt2YXIgVD13W2NdO2QrPUMrIiAgICIrWSt0aGlzLnByaW50QmluZGluZyhULHZvaWQgMCxlLmdldFZhbHVlKFQpLG8pK2AKYH1kKz1DKyIgIitZK2B9OwpgfWZvcih2YXIgcCBpbiBlLnR5cGVFbnZpcm9ubWVudCllLnR5cGVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShwKSYmKEg9ZS5nZXRUeXBlKHApKSE9PXZvaWQgMCYmSC50eXBlIGluc3RhbmNlb2YgZy5GdW5jdGlvblR5cGUmJihkKz1HKyIgIitZKyJ0eXBlICIrSih6KEgudHlwZS5wYXJhbWV0ZXJUeXBlLnRvU3RyaW5nKG8pKSsiID0gIit6KEgudHlwZS5yZXR1cm5UeXBlLnRvU3RyaW5nKG8pKSkrYDsKYCk7Zm9yKHZhciBwIGluIGUuc3RydWN0dXJlRW52aXJvbm1lbnQpZS5zdHJ1Y3R1cmVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShwKSYmKGQrPUcrIiAiK1krInN0cnVjdHVyZSAiK0ooeihwKSkrYDogc2lnCmAsZCs9ZT90aGlzLnByaW50QmFzaXModm9pZCAwLGUuZ2V0U3RydWN0dXJlKHApLG8seSsxKTp0aGlzLnByaW50QmFzaXModm9pZCAwLHZvaWQgMCxvLHkrMSksZCs9QysiICIrWStgZW5kOwpgKTtmb3IodmFyIHAgaW4gZS5zaWduYXR1cmVFbnZpcm9ubWVudCllLnNpZ25hdHVyZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KHApJiYoZCs9RysiICIrWSsic2lnbmF0dXJlICIrSih6KHApKStgOiBzaWcKYCxkKz1lP3RoaXMucHJpbnRCYXNpcyh2b2lkIDAsZS5nZXRTaWduYXR1cmUocCksbyx5KzEpOnRoaXMucHJpbnRCYXNpcyh2b2lkIDAsdm9pZCAwLG8seSsxKSxkKz1DKyIgIitZK2BlbmQ7CmApO2Zvcih2YXIgcCBpbiBlLmZ1bmN0b3JFbnZpcm9ubWVudCllLmZ1bmN0b3JFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShwKSYmKGQrPUcrIiAiK1krImZ1bmN0b3IgIitKKHoocCkpKyIoIixlPyhQPWUuZ2V0RnVuY3RvcihwKSkhPT12b2lkIDA/UFsyXSE9PXZvaWQgMD8oZCs9UFsyXStgOiBzaWcKYCxkKz10aGlzLnByaW50QmFzaXModm9pZCAwLFBbMF0sbyx5KzEpLGQrPUMrIiAiK1krYGVuZCk6IHNpZwpgLGQrPXRoaXMucHJpbnRCYXNpcyh2b2lkIDAsUFsxXSxvLHkrMSkpOihkKz1gCmAsZCs9dGhpcy5wcmludEJhc2lzKHZvaWQgMCxQWzBdLG8seSsxKSxkKz1DKyIgIitZK2ApOiBzdHJ1Y3QKYCxkKz10aGlzLnByaW50QmFzaXModm9pZCAwLFBbMV0sbyx5KzEpKTpkKz1gPHVuZGVmaW5lZD4pOiBzdHJ1Y3QKYDooZCs9YCA/Pz8gKTogc2lnCmAsZCs9dGhpcy5wcmludEJhc2lzKHZvaWQgMCx2b2lkIDAsbyx5KzEpKSxkKz1DKyIgIitZK2BlbmQ7CmApfWVsc2UgaWYoZSE9PXZvaWQgMCYmciE9PXZvaWQgMCl7Zm9yKHZhciBwIGluIHIudmFsdWVFbnZpcm9ubWVudClyLnZhbHVlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocCkmJihkKz1lP0crIiAiK1krdGhpcy5wcmludEJpbmRpbmcocCxyLnZhbHVlRW52aXJvbm1lbnRbcF0sZS5nZXRWYWx1ZShwKSxvLCExKStgCmA6RysiICIrWSt0aGlzLnByaW50QmluZGluZyhwLHIudmFsdWVFbnZpcm9ubWVudFtwXSx2b2lkIDAsbywhMSkrYApgKTtmb3IodmFyIHAgaW4gci50eXBlRW52aXJvbm1lbnQpaWYoci50eXBlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocCkmJmUudHlwZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KHApJiYoSD1lLmdldFR5cGUocCkpIT09dm9pZCAwJiZILnR5cGUgaW5zdGFuY2VvZiBnLkN1c3RvbVR5cGUpaWYoSC5jb25zdHJ1Y3RvcnMubGVuZ3RoPT09MClILmFsbG93c0VxdWFsaXR5P2QrPUcrIiAiK1krImVxdHlwZSAiK0ooeihILnR5cGUudG9TdHJpbmcobykpKStgOwpgOmQrPUcrIiAiK1krInR5cGUgIitKKHooSC50eXBlLnRvU3RyaW5nKG8pKSkrYDsKYDtlbHNle2QrPUcrIiAiK1krImRhdGF0eXBlICIrSih6KEgudHlwZS50b1N0cmluZyhvKSkpK2AgPSB7CmA7Zm9yKHZhciBOPTAsJD1ILmNvbnN0cnVjdG9ycztOPCQubGVuZ3RoO04rKylUPSRbTl0sZCs9QysiICAgIitZK3RoaXMucHJpbnRCaW5kaW5nKFQsci52YWx1ZUVudmlyb25tZW50W1RdLGUuZ2V0VmFsdWUoVCksbykrYApgO2QrPUMrIiAiK1krYH07CmB9Zm9yKHZhciBwIGluIHIudHlwZUVudmlyb25tZW50KXt2YXIgSDtyLnR5cGVFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShwKSYmZS50eXBlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocCkmJihIPWUuZ2V0VHlwZShwKSkhPT12b2lkIDAmJkgudHlwZSBpbnN0YW5jZW9mIGcuRnVuY3Rpb25UeXBlJiYoZCs9RysiICIrWSsidHlwZSAiK0ooeihILnR5cGUucGFyYW1ldGVyVHlwZS50b1N0cmluZyhvKSsiID0gIitILnR5cGUucmV0dXJuVHlwZS50b1N0cmluZyhvKSkpK2A7CmApfWZvcih2YXIgcCBpbiByLnN0cnVjdHVyZUVudmlyb25tZW50KXIuc3RydWN0dXJlRW52aXJvbm1lbnQuaGFzT3duUHJvcGVydHkocCkmJihkKz1HKyIgIitZKyJzdHJ1Y3R1cmUgIitKKHoocCkpK2AgPSBzdHJ1Y3QKYCxkKz1lP3RoaXMucHJpbnRCYXNpcyhyLmdldFN0cnVjdHVyZShwKSxlLmdldFN0cnVjdHVyZShwKSxvLHkrMSk6dGhpcy5wcmludEJhc2lzKHIuZ2V0U3RydWN0dXJlKHApLHZvaWQgMCxvLHkrMSksZCs9QysiICIrWStgZW5kOwpgKTtmb3IodmFyIHAgaW4gci5zaWduYXR1cmVFbnZpcm9ubWVudClyLnNpZ25hdHVyZUVudmlyb25tZW50Lmhhc093blByb3BlcnR5KHApJiYoZCs9RysiICIrWSsic2lnbmF0dXJlICIrSih6KHApKStgOiBzaWcKYCxkKz1lP3RoaXMucHJpbnRCYXNpcyh2b2lkIDAsZS5nZXRTaWduYXR1cmUocCksbyx5KzEpOnRoaXMucHJpbnRCYXNpcyh2b2lkIDAsdm9pZCAwLG8seSsxKSxkKz1DKyIgIitZK2BlbmQ7CmApO2Zvcih2YXIgcCBpbiByLmZ1bmN0b3JFbnZpcm9ubWVudClpZihyLmZ1bmN0b3JFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShwKSl7dmFyIFA7ZCs9RysiICIrWSsiZnVuY3RvciAiK0ooeihwKSkrIigiLGU/KFA9ZS5nZXRGdW5jdG9yKHApKSE9PXZvaWQgMD9QWzJdIT09Il9fZmFyZyI/KGQrPVBbMl0rYDogc2lnCmAsZCs9dGhpcy5wcmludEJhc2lzKHZvaWQgMCxQWzBdLG8seSsxKSxkKz1DKyIgIitZK2BlbmQpOiBzdHJ1Y3QKYCxkKz10aGlzLnByaW50QmFzaXModm9pZCAwLFBbMV0sbyx5KzEpKTooZCs9YApgLGQrPXRoaXMucHJpbnRCYXNpcyh2b2lkIDAsUFswXSxvLHkrMSksZCs9QysiICIrWStgKTogc3RydWN0CmAsZCs9dGhpcy5wcmludEJhc2lzKHZvaWQgMCxQWzFdLG8seSsxKSk6ZCs9YCA8ZnVuY3RvciB1bmRlZmluZWQ+ICk6IHN0cnVjdApgOihkKz1gID8/PyApOiBzaWcKYCxkKz10aGlzLnByaW50QmFzaXModm9pZCAwLHZvaWQgMCxvLHkrMSkpLGQrPUMrIiAiK1krYGVuZDsKYH19cmV0dXJuIGR9LEUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKHIpe3I9PT12b2lkIDAmJihyPXt9KTt2YXIgZT1yLnN0b3BJZD09PXZvaWQgMD90aGlzLmlkOnIuc3RvcElkLG89dGhpcy5nZXREeW5hbWljQ2hhbmdlcyhlLTEpLHk9dGhpcy5nZXRTdGF0aWNDaGFuZ2VzKGUtMSk7cmV0dXJuIHRoaXMucHJpbnRCYXNpcyhvLHksciwwKX0sRS5wcm90b3R5cGUuZ2V0TmVzdGVkU3RhdGU9ZnVuY3Rpb24ocil7cj09PXZvaWQgMCYmKHI9dm9pZCAwKSxyPT09dm9pZCAwJiYocj10aGlzLmlkKzEpO3ZhciBlPW5ldyBFKHIsdGhpcyxuZXcgSSh7fSx7fSx7fSx7fSx7fSksbmV3IEEoe30se30se30se30se30pLFt0aGlzLm1lbW9yeVswXSx7fV0sdGhpcy5leGNlcHRpb25FdmFsSWQsW3RoaXMuZnJlZVR5cGVWYXJpYWJsZXNbMF0sbmV3IE1hcF0pO2UuaW5zaWRlTG9jYWxEZWNsQm9keT10aGlzLmluc2lkZUxvY2FsRGVjbEJvZHk7Zm9yKHZhciBvPTAseT10aGlzLmxvYWRlZE1vZHVsZXM7bzx5Lmxlbmd0aDtvKyspe3ZhciBkPXlbb107ZS5sb2FkZWRNb2R1bGVzLnB1c2goZCl9cmV0dXJuIGV9LEUucHJvdG90eXBlLmhhc01vZHVsZT1mdW5jdGlvbihyKXtmb3IodmFyIGU9MCxvPXRoaXMubG9hZGVkTW9kdWxlcztlPG8ubGVuZ3RoO2UrKylpZihvW2VdPT09cilyZXR1cm4hMDtyZXR1cm4hMX0sRS5wcm90b3R5cGUucmVnaXN0ZXJNb2R1bGU9ZnVuY3Rpb24ocil7dGhpcy5sb2FkZWRNb2R1bGVzLnB1c2gocil9LEUucHJvdG90eXBlLmdldElkQ2hhbmdlcz1mdW5jdGlvbihyKXtpZih0aGlzLmlkPD1yKXJldHVybnt9O3ZhciBlPXt9O2Zvcih2YXIgbyBpbiB0aGlzLnBhcmVudCE9PXZvaWQgMCYmKGU9dGhpcy5wYXJlbnQuZ2V0SWRDaGFuZ2VzKHIpKSx0aGlzLnZhbHVlSWRlbnRpZmllcklkKXRoaXMudmFsdWVJZGVudGlmaWVySWQuaGFzT3duUHJvcGVydHkobykmJihlW29dPXRoaXMudmFsdWVJZGVudGlmaWVySWRbb10pO3JldHVybiBlfSxFLnByb3RvdHlwZS5nZXRNZW1vcnlDaGFuZ2VzPWZ1bmN0aW9uKHIpe2lmKHRoaXMuaWQ8PXIpcmV0dXJuW107dmFyIGU9W107Zm9yKHZhciBvIGluIHRoaXMucGFyZW50IT09dm9pZCAwJiYoZT10aGlzLnBhcmVudC5nZXRNZW1vcnlDaGFuZ2VzKHIpKSx0aGlzLm1lbW9yeVsxXSl0aGlzLm1lbW9yeVsxXS5oYXNPd25Qcm9wZXJ0eShvKSYmZS5wdXNoKFsrbyx0aGlzLm1lbW9yeVsxXVtvXV0pO3JldHVybiBlfSxFLnByb3RvdHlwZS5nZXREeW5hbWljQ2hhbmdlcz1mdW5jdGlvbihyKXtpZih0aGlzLmlkPD1yKXJldHVybiBuZXcgQSh7fSx7fSx7fSx7fSx7fSk7dmFyIGU9bmV3IEEoe30se30se30se30se30pO3JldHVybiB0aGlzLnBhcmVudCE9PXZvaWQgMCYmKGU9dGhpcy5wYXJlbnQuZ2V0RHluYW1pY0NoYW5nZXMocikpLGUuZXh0ZW5kKHRoaXMuZHluYW1pY0Jhc2lzKX0sRS5wcm90b3R5cGUuZ2V0RHluYW1pY0xvY2FsRGVjbENoYW5nZXM9ZnVuY3Rpb24ocil7aWYodGhpcy5pZDw9cnx8dGhpcy5sb2NhbERlY2xTdGFydClyZXR1cm4gbmV3IEEoe30se30se30se30se30pO3ZhciBlPW5ldyBBKHt9LHt9LHt9LHt9LHt9KTtyZXR1cm4gdGhpcy5wYXJlbnQhPT12b2lkIDAmJihlPXRoaXMucGFyZW50LmdldER5bmFtaWNMb2NhbERlY2xDaGFuZ2VzKHIpKSxlLmV4dGVuZCh0aGlzLmR5bmFtaWNCYXNpcyl9LEUucHJvdG90eXBlLmdldFN0YXRpY0NoYW5nZXM9ZnVuY3Rpb24ocil7aWYodGhpcy5pZDw9cilyZXR1cm4gbmV3IEkoe30se30se30se30se30pO3ZhciBlPW5ldyBJKHt9LHt9LHt9LHt9LHt9KTtyZXR1cm4gdGhpcy5wYXJlbnQhPT12b2lkIDAmJihlPXRoaXMucGFyZW50LmdldFN0YXRpY0NoYW5nZXMocikpLGUuZXh0ZW5kKHRoaXMuc3RhdGljQmFzaXMpfSxFLnByb3RvdHlwZS5nZXRDZWxsPWZ1bmN0aW9uKHIpe3JldHVybiB0aGlzLm1lbW9yeVsxXVtyXSE9PXZvaWQgMD90aGlzLm1lbW9yeVsxXVtyXTp0aGlzLnBhcmVudD09PXZvaWQgMD92b2lkIDA6dGhpcy5wYXJlbnQuZ2V0Q2VsbChyKX0sRS5wcm90b3R5cGUuZ2V0VHlwZVZhcmlhYmxlQmluZHM9ZnVuY3Rpb24ocil7cj09PXZvaWQgMCYmKHI9MCk7dmFyIGU9dGhpcy5mcmVlVHlwZVZhcmlhYmxlcztpZih0aGlzLnBhcmVudD09PXZvaWQgMHx8dGhpcy5wYXJlbnQuaWQ8cil7dmFyIG89bmV3IE1hcDtyZXR1cm4gZVsxXS5mb3JFYWNoKGZ1bmN0aW9uKGQsdil7by5zZXQodixkKX0pLFtlWzBdLG9dfXZhciB5PXRoaXMucGFyZW50LmdldFR5cGVWYXJpYWJsZUJpbmRzKHIpO3JldHVybiBlWzFdLmZvckVhY2goZnVuY3Rpb24oZCx2KXt5WzFdLnNldCh2LGQpfSksW01hdGgubWF4KGVbMF0seVswXSkseVsxXV19LEUucHJvdG90eXBlLmdldFN0YXRpY1ZhbHVlPWZ1bmN0aW9uKHIsZSl7aWYoZT09PXZvaWQgMCYmKGU9MCksIXIuc3RhcnRzV2l0aCgiX19hcmciKSYmIXIuc3RhcnRzV2l0aCgiJyoiKSl7dmFyIG89dGhpcy5zdGF0aWNCYXNpcy5nZXRWYWx1ZShyKTtyZXR1cm4gbyE9PXZvaWQgMHx8dGhpcy5wYXJlbnQ9PT12b2lkIDB8fHRoaXMucGFyZW50LmlkPGU/byE9PXZvaWQgMD9bb1swXSxvWzFdXTpvOnRoaXMucGFyZW50LmdldFN0YXRpY1ZhbHVlKHIsZSl9fSxFLnByb3RvdHlwZS5nZXRTdGF0aWNUeXBlPWZ1bmN0aW9uKHIsZSl7ZT09PXZvaWQgMCYmKGU9MCk7dmFyIG89dGhpcy5zdGF0aWNCYXNpcy5nZXRUeXBlKHIpO3JldHVybiBvIT09dm9pZCAwfHx0aGlzLnBhcmVudD09PXZvaWQgMHx8dGhpcy5wYXJlbnQuaWQ8ZT9vOnRoaXMucGFyZW50LmdldFN0YXRpY1R5cGUocixlKX0sRS5wcm90b3R5cGUuZ2V0U3RhdGljU3RydWN0dXJlPWZ1bmN0aW9uKHIsZSl7ZT09PXZvaWQgMCYmKGU9MCk7dmFyIG89dGhpcy5zdGF0aWNCYXNpcy5nZXRTdHJ1Y3R1cmUocik7cmV0dXJuIG8hPT12b2lkIDB8fHRoaXMucGFyZW50PT09dm9pZCAwfHx0aGlzLnBhcmVudC5pZDxlP286dGhpcy5wYXJlbnQuZ2V0U3RhdGljU3RydWN0dXJlKHIsZSl9LEUucHJvdG90eXBlLmdldEFuZFJlc29sdmVTdGF0aWNTdHJ1Y3R1cmU9ZnVuY3Rpb24ocixlKXtlPT09dm9pZCAwJiYoZT0wKTt2YXIgbz12b2lkIDA7aWYoci5xdWFsaWZpZXJzLmxlbmd0aD09PTApdGhyb3cgbmV3IEIuRXZhbHVhdGlvbkVycm9yKCJVbnF1YWxpZmllZCBMb25nSWRlbnRpZmllclRva2VuIGFyZSB0b28gdW5xdWFsaWZpZWQgdG8gYmUgdXNlZnVsIGhlcmUuIik7bz10aGlzLmdldFN0YXRpY1N0cnVjdHVyZShyLnF1YWxpZmllcnNbMF0uZ2V0VGV4dCgpLGUpO2Zvcih2YXIgeT0xO3k8ci5xdWFsaWZpZXJzLmxlbmd0aDsrK3kpe2lmKG89PT12b2lkIDApcmV0dXJuIG87bz1vLmdldFN0cnVjdHVyZShyLnF1YWxpZmllcnNbeV0uZ2V0VGV4dCgpKX1yZXR1cm4gb30sRS5wcm90b3R5cGUuZ2V0U3RhdGljU2lnbmF0dXJlPWZ1bmN0aW9uKHIsZSl7ZT09PXZvaWQgMCYmKGU9MCk7dmFyIG89dGhpcy5zdGF0aWNCYXNpcy5nZXRTaWduYXR1cmUocik7cmV0dXJuIG8hPT12b2lkIDB8fHRoaXMucGFyZW50PT09dm9pZCAwfHx0aGlzLnBhcmVudC5pZDxlP286dGhpcy5wYXJlbnQuZ2V0U3RhdGljU2lnbmF0dXJlKHIsZSl9LEUucHJvdG90eXBlLmdldFN0YXRpY0Z1bmN0b3I9ZnVuY3Rpb24ocixlKXtlPT09dm9pZCAwJiYoZT0wKTt2YXIgbz10aGlzLnN0YXRpY0Jhc2lzLmdldEZ1bmN0b3Iocik7cmV0dXJuIG8hPT12b2lkIDB8fHRoaXMucGFyZW50PT09dm9pZCAwfHx0aGlzLnBhcmVudC5pZDxlP286dGhpcy5wYXJlbnQuZ2V0U3RhdGljRnVuY3RvcihyLGUpfSxFLnByb3RvdHlwZS5nZXREeW5hbWljVmFsdWU9ZnVuY3Rpb24ocixlKXtlPT09dm9pZCAwJiYoZT0wKTt2YXIgbz10aGlzLmR5bmFtaWNCYXNpcy5nZXRWYWx1ZShyKTtyZXR1cm4gbyE9PXZvaWQgMHx8dGhpcy5wYXJlbnQ9PT12b2lkIDB8fHRoaXMucGFyZW50LmlkPGU/byE9PXZvaWQgMD9bb1swXSxvWzFdXTpvOnRoaXMucGFyZW50LmdldER5bmFtaWNWYWx1ZShyLGUpfSxFLnByb3RvdHlwZS5nZXREeW5hbWljVHlwZT1mdW5jdGlvbihyLGUpe2U9PT12b2lkIDAmJihlPTApO3ZhciBvPXRoaXMuZHluYW1pY0Jhc2lzLmdldFR5cGUocik7cmV0dXJuIG8hPT12b2lkIDB8fHRoaXMucGFyZW50PT09dm9pZCAwfHx0aGlzLnBhcmVudC5pZDxlP28hPT12b2lkIDA/W29bMF0sb1sxXV06bzp0aGlzLnBhcmVudC5nZXREeW5hbWljVHlwZShyLGUpfSxFLnByb3RvdHlwZS5nZXREeW5hbWljU3RydWN0dXJlPWZ1bmN0aW9uKHIsZSl7ZT09PXZvaWQgMCYmKGU9MCk7dmFyIG89dGhpcy5keW5hbWljQmFzaXMuZ2V0U3RydWN0dXJlKHIpO3JldHVybiBvIT09dm9pZCAwfHx0aGlzLnBhcmVudD09PXZvaWQgMHx8dGhpcy5wYXJlbnQuaWQ8ZT9vOnRoaXMucGFyZW50LmdldER5bmFtaWNTdHJ1Y3R1cmUocixlKX0sRS5wcm90b3R5cGUuZ2V0QW5kUmVzb2x2ZUR5bmFtaWNTdHJ1Y3R1cmU9ZnVuY3Rpb24ocixlKXtlPT09dm9pZCAwJiYoZT0wKTt2YXIgbz12b2lkIDA7aWYoci5xdWFsaWZpZXJzLmxlbmd0aD09PTApdGhyb3cgbmV3IEIuRXZhbHVhdGlvbkVycm9yKCJVbnF1YWxpZmllZCBMb25nSWRlbnRpZmllclRva2VuIGFyZSB0b28gdW5xdWFsaWZpZWQgdG8gYmUgdXNlZnVsIGhlcmUuIik7bz10aGlzLmdldER5bmFtaWNTdHJ1Y3R1cmUoci5xdWFsaWZpZXJzWzBdLmdldFRleHQoKSxlKTtmb3IodmFyIHk9MTt5PHIucXVhbGlmaWVycy5sZW5ndGg7Kyt5KXtpZihvPT09dm9pZCAwKXJldHVybiBvO289by5nZXRTdHJ1Y3R1cmUoci5xdWFsaWZpZXJzW3ldLmdldFRleHQoKSl9cmV0dXJuIG99LEUucHJvdG90eXBlLmdldER5bmFtaWNTaWduYXR1cmU9ZnVuY3Rpb24ocixlKXtlPT09dm9pZCAwJiYoZT0wKTt2YXIgbz10aGlzLmR5bmFtaWNCYXNpcy5nZXRTaWduYXR1cmUocik7cmV0dXJuIG8hPT12b2lkIDB8fHRoaXMucGFyZW50PT09dm9pZCAwfHx0aGlzLnBhcmVudC5pZDxlP286dGhpcy5wYXJlbnQuZ2V0RHluYW1pY1NpZ25hdHVyZShyLGUpfSxFLnByb3RvdHlwZS5nZXREeW5hbWljRnVuY3Rvcj1mdW5jdGlvbihyLGUpe2U9PT12b2lkIDAmJihlPTApO3ZhciBvPXRoaXMuZHluYW1pY0Jhc2lzLmdldEZ1bmN0b3Iocik7cmV0dXJuIG8hPT12b2lkIDB8fHRoaXMucGFyZW50PT09dm9pZCAwfHx0aGlzLnBhcmVudC5pZDxlP286dGhpcy5wYXJlbnQuZ2V0RHluYW1pY0Z1bmN0b3IocixlKX0sRS5wcm90b3R5cGUuZ2V0SW5maXhTdGF0dXM9ZnVuY3Rpb24ocixlKXtpZihlPT09dm9pZCAwJiYoZT0wKSxyLmlzVmlkKCl8fHIgaW5zdGFuY2VvZiBxLkxvbmdJZGVudGlmaWVyVG9rZW4pcmV0dXJuIHRoaXMuaW5maXhFbnZpcm9ubWVudC5oYXNPd25Qcm9wZXJ0eShyLmdldFRleHQoKSl8fCF0aGlzLnBhcmVudHx8dGhpcy5wYXJlbnQuaWQ8ZT90aGlzLmluZml4RW52aXJvbm1lbnRbci5nZXRUZXh0KCldOnRoaXMucGFyZW50LmdldEluZml4U3RhdHVzKHIsZSk7dGhyb3cgbmV3IEIuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdZb3UgZ2F2ZSBtZSBzb21lICInK3IuZ2V0VGV4dCgpKyciICgnK3IudHlwZU5hbWUoKSsiKSBidXQgSSBvbmx5IHdhbnQgKExvbmcpSWRlbnRpZmllclRva2VuLiIpfSxFLnByb3RvdHlwZS5nZXRWYWx1ZUlkZW50aWZpZXJJZD1mdW5jdGlvbihyLGUpe3JldHVybiBlPT09dm9pZCAwJiYoZT0wKSx0aGlzLnZhbHVlSWRlbnRpZmllcklkLmhhc093blByb3BlcnR5KHIpP3RoaXMudmFsdWVJZGVudGlmaWVySWRbcl06IXRoaXMucGFyZW50fHx0aGlzLnBhcmVudC5pZDxlPzA6dGhpcy5wYXJlbnQuZ2V0VmFsdWVJZGVudGlmaWVySWQocixlKX0sRS5wcm90b3R5cGUuZ2V0V2FybmluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53YXJuc30sRS5wcm90b3R5cGUuaW5jcmVtZW50VmFsdWVJZGVudGlmaWVySWQ9ZnVuY3Rpb24ocixlKXtpZihlPT09dm9pZCAwJiYoZT12b2lkIDApLGU9PT12b2lkIDB8fHRoaXMuaWQ9PT1lKXRoaXMudmFsdWVJZGVudGlmaWVySWRbcl09dGhpcy5nZXRWYWx1ZUlkZW50aWZpZXJJZChyLGUpKzE7ZWxzZXtpZihlPnRoaXMuaWR8fHRoaXMucGFyZW50PT09dm9pZCAwKXRocm93IG5ldyBCLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignU3RhdGUgd2l0aCBpZCAiJytlKyciIGRvZXMgbm90IGV4aXN0LicpO3RoaXMucGFyZW50LmluY3JlbWVudFZhbHVlSWRlbnRpZmllcklkKHIsZSl9fSxFLnByb3RvdHlwZS5zZXRDZWxsPWZ1bmN0aW9uKHIsZSl7cj49dGhpcy5tZW1vcnlbMF0mJih0aGlzLm1lbW9yeVswXT1yKzEpLHRoaXMubWVtb3J5WzFdW3JdPWV9LEUucHJvdG90eXBlLnNldE5ld0NlbGw9ZnVuY3Rpb24ocil7cmV0dXJuIHRoaXMubWVtb3J5WzFdW3RoaXMubWVtb3J5WzBdXT1yLG5ldyBzLlJlZmVyZW5jZVZhbHVlKHRoaXMubWVtb3J5WzBdKyspfSxFLnByb3RvdHlwZS5nZXROZXh0RXhjZXB0aW9uRXZhbElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhjZXB0aW9uRXZhbElkKyt9LEUucHJvdG90eXBlLmRlbGV0ZVN0YXRpY1ZhbHVlPWZ1bmN0aW9uKHIpe3RoaXMuc3RhdGljQmFzaXMuZGVsZXRlVmFsdWUociksdGhpcy5wYXJlbnQhPT12b2lkIDAmJnRoaXMucGFyZW50LmRlbGV0ZVN0YXRpY1ZhbHVlKHIpfSxFLnByb3RvdHlwZS5zZXRTdGF0aWNWYWx1ZT1mdW5jdGlvbihyLGUsbyx5KXtpZih5PT09dm9pZCAwJiYoeT12b2lkIDApLHk9PT12b2lkIDB8fHk9PT10aGlzLmlkKXRoaXMuc3RhdGljQmFzaXMuc2V0VmFsdWUocixlLG8pO2Vsc2V7aWYoeT50aGlzLmlkfHx0aGlzLnBhcmVudD09PXZvaWQgMCl0aHJvdyBuZXcgQi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ1N0YXRlIHdpdGggaWQgIicreSsnIiBkb2VzIG5vdCBleGlzdC4nKTt0aGlzLnBhcmVudC5zZXRTdGF0aWNWYWx1ZShyLGUsbyx5KX19LEUucHJvdG90eXBlLnNldFN0YXRpY1R5cGU9ZnVuY3Rpb24ocixlLG8seSxkLHYpe2lmKHY9PT12b2lkIDAmJih2PXZvaWQgMCksdj09PXZvaWQgMHx8dj09PXRoaXMuaWQpdGhpcy5zdGF0aWNCYXNpcy5zZXRUeXBlKHIsZSxvLHksZCk7ZWxzZXtpZih2PnRoaXMuaWR8fHRoaXMucGFyZW50PT09dm9pZCAwKXRocm93IG5ldyBCLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignU3RhdGUgd2l0aCBpZCAiJyt2KyciIGRvZXMgbm90IGV4aXN0LicpO3RoaXMucGFyZW50LnNldFN0YXRpY1R5cGUocixlLG8seSxkLHYpfX0sRS5wcm90b3R5cGUuc2V0U3RhdGljU3RydWN0dXJlPWZ1bmN0aW9uKHIsZSxvKXtpZihvPT09dm9pZCAwJiYobz12b2lkIDApLG89PT12b2lkIDB8fG89PT10aGlzLmlkKXRoaXMuc3RhdGljQmFzaXMuc2V0U3RydWN0dXJlKHIsZSk7ZWxzZXtpZihvPnRoaXMuaWR8fHRoaXMucGFyZW50PT09dm9pZCAwKXRocm93IG5ldyBCLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignU3RhdGUgd2l0aCBpZCAiJytvKyciIGRvZXMgbm90IGV4aXN0LicpO3RoaXMucGFyZW50LnNldFN0YXRpY1N0cnVjdHVyZShyLGUsbyl9fSxFLnByb3RvdHlwZS5zZXRTdGF0aWNTaWduYXR1cmU9ZnVuY3Rpb24ocixlLG8pe2lmKG89PT12b2lkIDAmJihvPXZvaWQgMCksbz09PXZvaWQgMHx8bz09PXRoaXMuaWQpdGhpcy5zdGF0aWNCYXNpcy5zZXRTaWduYXR1cmUocixlKTtlbHNle2lmKG8+dGhpcy5pZHx8dGhpcy5wYXJlbnQ9PT12b2lkIDApdGhyb3cgbmV3IEIuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdTdGF0ZSB3aXRoIGlkICInK28rJyIgZG9lcyBub3QgZXhpc3QuJyk7dGhpcy5wYXJlbnQuc2V0U3RhdGljU2lnbmF0dXJlKHIsZSxvKX19LEUucHJvdG90eXBlLnNldFN0YXRpY0Z1bmN0b3I9ZnVuY3Rpb24ocixlLG8seSl7aWYobz09PXZvaWQgMCYmKG89ITEpLHk9PT12b2lkIDAmJih5PXZvaWQgMCkseT09PXZvaWQgMHx8eT09PXRoaXMuaWQpdGhpcy5zdGF0aWNCYXNpcy5zZXRGdW5jdG9yKHIsZSxvKTtlbHNle2lmKHk+dGhpcy5pZHx8dGhpcy5wYXJlbnQ9PT12b2lkIDApdGhyb3cgbmV3IEIuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdTdGF0ZSB3aXRoIGlkICInK3krJyIgZG9lcyBub3QgZXhpc3QuJyk7dGhpcy5wYXJlbnQuc2V0U3RhdGljRnVuY3RvcihyLGUsbyx5KX19LEUucHJvdG90eXBlLnNldER5bmFtaWNWYWx1ZT1mdW5jdGlvbihyLGUsbyx5KXtpZih5PT09dm9pZCAwJiYoeT12b2lkIDApLHk9PT12b2lkIDB8fHk9PT10aGlzLmlkKXRoaXMuZHluYW1pY0Jhc2lzLnNldFZhbHVlKHIsZSxvKTtlbHNle2lmKHk+dGhpcy5pZHx8dGhpcy5wYXJlbnQ9PT12b2lkIDApdGhyb3cgbmV3IEIuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdTdGF0ZSB3aXRoIGlkICInK3krJyIgZG9lcyBub3QgZXhpc3QuJyk7dGhpcy5wYXJlbnQuc2V0RHluYW1pY1ZhbHVlKHIsZSxvLHkpfX0sRS5wcm90b3R5cGUuc2V0RHluYW1pY1R5cGU9ZnVuY3Rpb24ocixlLG8pe2lmKG89PT12b2lkIDAmJihvPXZvaWQgMCksbz09PXZvaWQgMHx8bz09PXRoaXMuaWQpdGhpcy5keW5hbWljQmFzaXMuc2V0VHlwZShyLGUpO2Vsc2V7aWYobz50aGlzLmlkfHx0aGlzLnBhcmVudD09PXZvaWQgMCl0aHJvdyBuZXcgQi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ1N0YXRlIHdpdGggaWQgIicrbysnIiBkb2VzIG5vdCBleGlzdC4nKTt0aGlzLnBhcmVudC5zZXREeW5hbWljVHlwZShyLGUsbyl9fSxFLnByb3RvdHlwZS5zZXREeW5hbWljU3RydWN0dXJlPWZ1bmN0aW9uKHIsZSxvKXtpZihvPT09dm9pZCAwJiYobz12b2lkIDApLG89PT12b2lkIDB8fG89PT10aGlzLmlkKXRoaXMuZHluYW1pY0Jhc2lzLnNldFN0cnVjdHVyZShyLGUpO2Vsc2V7aWYobz50aGlzLmlkfHx0aGlzLnBhcmVudD09PXZvaWQgMCl0aHJvdyBuZXcgQi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ1N0YXRlIHdpdGggaWQgIicrbysnIiBkb2VzIG5vdCBleGlzdC4nKTt0aGlzLnBhcmVudC5zZXREeW5hbWljU3RydWN0dXJlKHIsZSxvKX19LEUucHJvdG90eXBlLnNldER5bmFtaWNTaWduYXR1cmU9ZnVuY3Rpb24ocixlLG8pe2lmKG89PT12b2lkIDAmJihvPXZvaWQgMCksbz09PXZvaWQgMHx8bz09PXRoaXMuaWQpdGhpcy5keW5hbWljQmFzaXMuc2V0U2lnbmF0dXJlKHIsZSk7ZWxzZXtpZihvPnRoaXMuaWR8fHRoaXMucGFyZW50PT09dm9pZCAwKXRocm93IG5ldyBCLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignU3RhdGUgd2l0aCBpZCAiJytvKyciIGRvZXMgbm90IGV4aXN0LicpO3RoaXMucGFyZW50LnNldER5bmFtaWNTaWduYXR1cmUocixlLG8pfX0sRS5wcm90b3R5cGUuc2V0RHluYW1pY0Z1bmN0b3I9ZnVuY3Rpb24ocixlLG8pe2lmKG89PT12b2lkIDAmJihvPXZvaWQgMCksbz09PXZvaWQgMHx8bz09PXRoaXMuaWQpdGhpcy5keW5hbWljQmFzaXMuc2V0RnVuY3RvcihyLGUpO2Vsc2V7aWYobz50aGlzLmlkfHx0aGlzLnBhcmVudD09PXZvaWQgMCl0aHJvdyBuZXcgQi5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ1N0YXRlIHdpdGggaWQgIicrbysnIiBkb2VzIG5vdCBleGlzdC4nKTt0aGlzLnBhcmVudC5zZXREeW5hbWljRnVuY3RvcihyLGUsbyl9fSxFLnByb3RvdHlwZS5zZXRJbmZpeFN0YXR1cz1mdW5jdGlvbihyLGUsbyx5LGQpe2lmKGQ9PT12b2lkIDAmJihkPXZvaWQgMCksZD09PXZvaWQgMHx8ZD09PXRoaXMuaWQpKHIuaXNWaWQoKXx8ciBpbnN0YW5jZW9mIHEuTG9uZ0lkZW50aWZpZXJUb2tlbikmJih0aGlzLmluZml4RW52aXJvbm1lbnRbci5nZXRUZXh0KCldPW5ldyBoKHksZSxvKSk7ZWxzZXtpZihkPnRoaXMuaWR8fHRoaXMucGFyZW50PT09dm9pZCAwKXRocm93IG5ldyBCLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignU3RhdGUgd2l0aCBpZCAiJytkKyciIGRvZXMgbm90IGV4aXN0LicpO3RoaXMucGFyZW50LnNldEluZml4U3RhdHVzKHIsZSxvLHksZCl9fSxFLnByb3RvdHlwZS5zZXRWYWx1ZUlkZW50aWZpZXJJZD1mdW5jdGlvbihyLGUsbyl7aWYobz09PXZvaWQgMCYmKG89dm9pZCAwKSxvPT09dm9pZCAwfHxvPT09dGhpcy5pZCl0aGlzLnZhbHVlSWRlbnRpZmllcklkW3JdPWU7ZWxzZXtpZihvPnRoaXMuaWR8fHRoaXMucGFyZW50PT09dm9pZCAwKXRocm93IG5ldyBCLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignU3RhdGUgd2l0aCBpZCAiJytvKyciIGRvZXMgbm90IGV4aXN0LicpO3RoaXMucGFyZW50LnNldFZhbHVlSWRlbnRpZmllcklkKHIsZSxvKX19LEUucHJvdG90eXBlLmFkZFdhcm5pbmc9ZnVuY3Rpb24ocixlKXtpZihlPT09dm9pZCAwJiYoZT12b2lkIDApLGU9PT12b2lkIDB8fGU9PT10aGlzLmlkKXRoaXMud2FybnMucHVzaChyKTtlbHNle2lmKGU+dGhpcy5pZHx8dGhpcy5wYXJlbnQ9PT12b2lkIDApdGhyb3cgbmV3IEIuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdTdGF0ZSB3aXRoIGlkICInK2UrJyIgZG9lcyBub3QgZXhpc3QuJyk7dGhpcy5wYXJlbnQuYWRkV2FybmluZyhyLGUpfX0sRS5wcm90b3R5cGUuc2V0V2FybmluZ3M9ZnVuY3Rpb24ocixlKXtpZihlPT09dm9pZCAwJiYoZT12b2lkIDApLGU9PT12b2lkIDB8fGU9PT10aGlzLmlkKXRoaXMud2FybnM9cjtlbHNle2lmKGU+dGhpcy5pZHx8dGhpcy5wYXJlbnQ9PT12b2lkIDApdGhyb3cgbmV3IEIuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdTdGF0ZSB3aXRoIGlkICInK2UrJyIgZG9lcyBub3QgZXhpc3QuJyk7dGhpcy5wYXJlbnQuc2V0V2FybmluZ3MocixlKX19LEV9KCk7dS5TdGF0ZT1PfSwxOTc6KGZlLHUsSyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5sb2FkTW9kdWxlPXUuU1RETElCPXUuZmFpbEV4Y2VwdGlvbj11LnN1YnNjcmlwdEV4Y2VwdGlvbj11LmNockV4Y2VwdGlvbj11LnNpemVFeGNlcHRpb249dS5kb21haW5FeGNlcHRpb249dS5vdmVyZmxvd0V4Y2VwdGlvbj11LmV4blR5cGU9dS5jaGFyVHlwZT11LnN0cmluZ1R5cGU9dS5ib29sVHlwZT11LndvcmRUeXBlPXUucmVhbFR5cGU9dS5pbnRUeXBlPXZvaWQgMDt2YXIgbT1LKDM2NyksZz1LKDc1OCkscz1LKDY5OSkscT1LKDEwNiksQj1LKDUxOSksTT1LKDQxMiksVj1LKDY5NiksRD1LKDQ1NiksaD1LKDMzNCksQT1LKDgwMSksST1LKDM1OSksTz1LKDY3OSksRT1LKDI0NSkscj1LKDc5MCksZT1LKDc0Miksbz1LKDkyOCkseT1LKDQ2MCksZD1LKDY2Nyk7dS5pbnRUeXBlPW5ldyBzLkN1c3RvbVR5cGUoImludCIpLHUucmVhbFR5cGU9bmV3IHMuQ3VzdG9tVHlwZSgicmVhbCIpLHUud29yZFR5cGU9bmV3IHMuQ3VzdG9tVHlwZSgid29yZCIpLHUuYm9vbFR5cGU9bmV3IHMuQ3VzdG9tVHlwZSgiYm9vbCIpLHUuc3RyaW5nVHlwZT1uZXcgcy5DdXN0b21UeXBlKCJzdHJpbmciKSx1LmNoYXJUeXBlPW5ldyBzLkN1c3RvbVR5cGUoImNoYXIiKSx1LmV4blR5cGU9bmV3IHMuQ3VzdG9tVHlwZSgiZXhuIiksdS5vdmVyZmxvd0V4Y2VwdGlvbj1uZXcgcS5FeGNlcHRpb25Db25zdHJ1Y3RvcigiT3ZlcmZsb3ciLDAsMCwzKSx1LmRvbWFpbkV4Y2VwdGlvbj1uZXcgcS5FeGNlcHRpb25Db25zdHJ1Y3RvcigiRG9tYWluIiwwLDAsNCksdS5zaXplRXhjZXB0aW9uPW5ldyBxLkV4Y2VwdGlvbkNvbnN0cnVjdG9yKCJTaXplIiwwLDAsNSksdS5jaHJFeGNlcHRpb249bmV3IHEuRXhjZXB0aW9uQ29uc3RydWN0b3IoIkNociIsMCwwLDYpLHUuc3Vic2NyaXB0RXhjZXB0aW9uPW5ldyBxLkV4Y2VwdGlvbkNvbnN0cnVjdG9yKCJTdWJzY3JpcHQiLDAsMCw3KSx1LmZhaWxFeGNlcHRpb249bmV3IHEuRXhjZXB0aW9uQ29uc3RydWN0b3IoIkZhaWwiLDEsMCw4KSx1LlNURExJQj17X19CYXNlOntuYXRpdmU6ZnVuY3Rpb24odil7cmV0dXJuIHYuc2V0U3RhdGljVmFsdWUoImV4bk5hbWUiLG5ldyBzLkZ1bmN0aW9uVHlwZSh1LmV4blR5cGUsdS5zdHJpbmdUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLHYuc2V0RHluYW1pY1ZhbHVlKCJleG5OYW1lIixuZXcgcS5QcmVkZWZpbmVkRnVuY3Rpb24oImV4bk5hbWUiLGZ1bmN0aW9uKEMsRyl7aWYoQyBpbnN0YW5jZW9mIHEuRXhjZXB0aW9uVmFsdWUpcmV0dXJuW25ldyBxLlN0cmluZ1ZhbHVlKEMuY29uc3RydWN0b3JOYW1lKSwhMSxbXV07dGhyb3cgbmV3IGcuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJFeHBlY3RlZCBhbiBleGNlcHRpb24uIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLHYuc2V0U3RhdGljVmFsdWUoImV4bk1lc3NhZ2UiLG5ldyBzLkZ1bmN0aW9uVHlwZSh1LmV4blR5cGUsdS5zdHJpbmdUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLHYuc2V0RHluYW1pY1ZhbHVlKCJleG5NZXNzYWdlIixuZXcgcS5QcmVkZWZpbmVkRnVuY3Rpb24oImV4bk1lc3NhZ2UiLGZ1bmN0aW9uKEMsRyl7aWYoQyBpbnN0YW5jZW9mIHEuRXhjZXB0aW9uVmFsdWUpcmV0dXJuW25ldyBxLlN0cmluZ1ZhbHVlKEMucGNUb1N0cmluZyhHLm1vZGlmaWFibGUsbmV3IHEuUHJpbnRDb3VudGVyKDUwKSkpLCExLFtdXTt0aHJvdyBuZXcgZy5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkV4cGVjdGVkIGFuIGV4Y2VwdGlvbi4iKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksdn0sY29kZTpgZnVuIG8gKGYsZykgeCA9IGYgKGcgeCk7CiAgICAgICAgICAgIGluZml4IDMgbzsKICAgICAgICAgICAgZGF0YXR5cGUgb3JkZXIgPSBMRVNTIHwgRVFVQUwgfCBHUkVBVEVSOwoKICAgICAgICAgICAgZXhjZXB0aW9uIERvbWFpbjsKICAgICAgICAgICAgZXhjZXB0aW9uIFNpemU7CiAgICAgICAgICAgIGV4Y2VwdGlvbiBDaHI7CiAgICAgICAgICAgIGV4Y2VwdGlvbiBTdWJzY3JpcHQ7CiAgICAgICAgICAgIGV4Y2VwdGlvbiBGYWlsIG9mIHN0cmluZzsKCiAgICAgICAgICAgIGZ1biBub3QgdHJ1ZSA9IGZhbHNlIHwgbm90IGZhbHNlID0gdHJ1ZTsKCiAgICAgICAgICAgICgqIGZ1biAhIChhIDogJ0EgcmVmKTogJ0EgPSAhIGE7CiAgICAgICAgICAgIGZ1biBvcCA6PSAoKGEsIGIpIDogKCdBIHJlZiAqICdBKSk6IHVuaXQgPSBhIDo9IGI7CiAgICAgICAgICAgIGZ1biByZWYgKGEgOiAnQSk6ICdBIHJlZiA9IHJlZiBhOyAqKQoKICAgICAgICAgICAgZnVuIGlnbm9yZSBhID0gKCk7CiAgICAgICAgICAgIGluZml4IDAgYmVmb3JlOwogICAgICAgICAgICBmdW4gYSBiZWZvcmUgKGI6IHVuaXQpID0gYTtgLHJlcXVpcmVzOnZvaWQgMH0sQXJyYXk6Vi5BUlJBWV9MSUIsQXNzZXJ0OkQuQVNTRVJUX0xJQixDaGFyOmguQ0hBUl9MSUIsRXZhbDpBLkVWQUxfTElCLEludDpJLklOVF9MSUIsTGlzdDpPLkxJU1RfTElCLExpc3Rzb3J0OkUuTElTVFNPUlRfTElCLE1hdGg6ci5NQVRIX0xJQixPcHRpb246e25hdGl2ZTp2b2lkIDAsY29kZTpgc3RydWN0dXJlIE9wdGlvbiA9IHN0cnVjdAogICAgICAgICAgICAgICAgZXhjZXB0aW9uIE9wdGlvbjsKCiAgICAgICAgICAgICAgICBkYXRhdHlwZSAnYSBvcHRpb24gPSBOT05FIHwgU09NRSBvZiAnYTsKCiAgICAgICAgICAgICAgICBmdW4gZ2V0T3B0IChOT05FLCBhKSA9IGEKICAgICAgICAgICAgICAgICAgfCBnZXRPcHQgKFNPTUUgeCwgYSkgPSB4OwoKICAgICAgICAgICAgICAgIGZ1biBpc1NvbWUgTk9ORSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgIHwgaXNTb21lIChTT01FIF8pID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBmdW4gdmFsT2YgKFNPTUUgeCkgPSB4CiAgICAgICAgICAgICAgICAgIHwgdmFsT2YgTk9ORSA9IHJhaXNlIE9wdGlvbjsKICAgICAgICAgICAgZW5kOwogICAgICAgICAgICBvcGVuIE9wdGlvbjsKCiAgICAgICAgICAgIHN0cnVjdHVyZSBPcHRpb24gPSBzdHJ1Y3QKICAgICAgICAgICAgICAgIG9wZW4gT3B0aW9uOwoKICAgICAgICAgICAgICAgIGZ1biBhcHAgZiAoU09NRSB2KSA9IGYgdgogICAgICAgICAgICAgICAgICB8IGFwcCBmIE5PTkUgPSAoKTsKCiAgICAgICAgICAgICAgICBmdW4gbWFwIGYgTk9ORSA9IE5PTkUKICAgICAgICAgICAgICAgICAgfCBtYXAgZiAoU09NRSB2KSA9IFNPTUUoZiB2KTsKCiAgICAgICAgICAgICAgICBmdW4gbWFwUGFydGlhbCBmIE5PTkUgPSBOT05FCiAgICAgICAgICAgICAgICAgIHwgbWFwUGFydGlhbCBmIChTT01FIHYpID0gZiB2OwoKICAgICAgICAgICAgICAgIGZ1biBmaWx0ZXIgZiB4ID0gaWYgZiB4IHRoZW4gU09NRSB4IGVsc2UgTk9ORTsKCiAgICAgICAgICAgICAgICBmdW4gam9pbiBOT05FID0gTk9ORQogICAgICAgICAgICAgICAgICB8IGpvaW4gKFNPTUUgKFNPTUUgeCkpID0gU09NRSB4OwoKICAgICAgICAgICAgICAgIGZ1biBjb21wb3NlIChmLCBnKSBhID0gY2FzZSBnIGEgb2YKICAgICAgICAgICAgICAgICAgICAgIE5PTkUgPT4gTk9ORQogICAgICAgICAgICAgICAgICAgIHwgU09NRSB2ID0+IFNPTUUgKGYgdik7CgogICAgICAgICAgICAgICAgZnVuIGNvbXBvc2VQYXJ0aWFsIChmLCBnKSBhID0gY2FzZSBnIGEgb2YKICAgICAgICAgICAgICAgICAgICAgIE5PTkUgPT4gTk9ORQogICAgICAgICAgICAgICAgICAgIHwgU09NRSB2ID0+IChmIHYpOwogICAgICAgICAgICBlbmQ7CiAgICAgICAgICAgIGAscmVxdWlyZXM6dm9pZCAwfSxSYW5kb206ZS5SQU5ET01fTElCLFJlYWw6by5SRUFMX0xJQixTdHJpbmc6eS5TVFJJTkdfTElCLFZlY3RvcjpkLlZFQ1RPUl9MSUIsVmVyc2lvbjp7bmF0aXZlOnZvaWQgMCxjb2RlOmBzdHJ1Y3R1cmUgVmVyc2lvbiA9IHN0cnVjdAogICAgICAgICAgICB2YWwgdmVyc2lvbiAgICAgPSAiYCtNLlZFUlNJT04rYCI7CiAgICAgICAgICAgIHZhbCBicmFuY2ggICAgICA9ICJgK00uQlJBTkNIX05BTUUrYCI7CiAgICAgICAgICAgIHZhbCBjb21taXQgICAgICA9ICJgK00uQ09NTUlUX0hBU0grYCI7CiAgICAgICAgICAgIHZhbCBidWlsZERhdGUgICA9ICJgK00uQlVJTERfREFURStgIjsKICAgICAgICAgICAgdmFsIG1lc3NhZ2UgICAgID0gImArTS5DT01NSVRfTUVTU0FHRStgIjsKICAgICAgICBlbmQ7YCxyZXF1aXJlczp2b2lkIDB9fSx1LmxvYWRNb2R1bGU9ZnVuY3Rpb24gdihDLEcsWSl7aWYoIXUuU1RETElCLmhhc093blByb3BlcnR5KEcpKXRocm93IG5ldyBnLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignVGhlIG1vZHVsZSAiJytHKyciIGRvZXMgbm90IGV4aXN0LiBBdXV1dX4nKTtpZihDLmhhc01vZHVsZShHKSlyZXR1cm4gQzt2YXIgSj11LlNURExJQltHXTtpZihKLnJlcXVpcmVzIT09dm9pZCAwKWZvcih2YXIgej0wLHA9Si5yZXF1aXJlczt6PHAubGVuZ3RoO3orKyl7dmFyIGM9cFt6XTtDLmhhc01vZHVsZShjKXx8KEM9dihDLGMsWSkpfXJldHVybiBKLm5hdGl2ZSE9PXZvaWQgMCYmKEM9Si5uYXRpdmUoQyxZKSksSi5jb2RlIT09dm9pZCAwJiYoQz1CLmludGVycHJldChKLmNvZGUsQyxZKS5zdGF0ZSksQy5yZWdpc3Rlck1vZHVsZShHKSxDfX0sNjk2OihmZSx1LEspPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHUuQVJSQVlfTElCPXZvaWQgMDt2YXIgbT1LKDM2NyksZz1LKDY5OSkscz1LKDEwNikscT1LKDc1OCksQj1LKDE5Nyk7dS5BUlJBWV9MSUI9e25hdGl2ZTpmdW5jdGlvbihNKXt2YXIgVj1uZXcgbS5EeW5hbWljQmFzaXMoe30se30se30se30se30pLEQ9bmV3IG0uU3RhdGljQmFzaXMoe30se30se30se30se30pLGg9bmV3IGcuQ3VzdG9tVHlwZSgiYXJyYXkiLFtuZXcgZy5UeXBlVmFyaWFibGUoIidhIildKSxBPW5ldyBnLkN1c3RvbVR5cGUoImxpc3QiLFtuZXcgZy5UeXBlVmFyaWFibGUoIidhIildKTtyZXR1cm4gRC5zZXRUeXBlKCJhcnJheSIsaCxbXSwxLCEwKSxWLnNldFR5cGUoImFycmF5IixbXSksVi5zZXRWYWx1ZSgiYXJyYXkiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiYXJyYXkiLGZ1bmN0aW9uKEksTyl7aWYoSSBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUmJkkuZW50cmllcy5zaXplPT09Mil7dmFyIEU9SS5nZXRWYWx1ZSgiMSIpLHI9SS5nZXRWYWx1ZSgiMiIpO2lmKEUgaW5zdGFuY2VvZiBzLkludGVnZXIpe3ZhciBlPUUudmFsdWU7aWYoZTwwKXJldHVybltCLnNpemVFeGNlcHRpb24uY29uc3RydWN0KCksITAsW11dO3ZhciBvPW5ldyBzLkFycmF5VmFsdWUoTy5tb2RpZmlhYmxlLm1lbW9yeVswXSsxLGUpO08ubW9kaWZpYWJsZS5zZXROZXdDZWxsKG8pO2Zvcih2YXIgeT0wO3k8ZTsrK3kpTy5tb2RpZmlhYmxlLnNldE5ld0NlbGwocik7cmV0dXJuW28sITEsW11dfX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoImFycmF5IixuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuVHVwbGVUeXBlKFtCLmludFR5cGUsbmV3IGcuVHlwZVZhcmlhYmxlKCInYSIpXSkuc2ltcGxpZnkoKSxoKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImZyb21MaXN0IixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImZyb21MaXN0IixmdW5jdGlvbihJLE8pe3ZhciBFPW5ldyBzLkFycmF5VmFsdWUoTy5tb2RpZmlhYmxlLm1lbW9yeVswXSsxLDApO2lmKE8ubW9kaWZpYWJsZS5zZXROZXdDZWxsKEUpLEkgaW5zdGFuY2VvZiBzLkNvbnN0cnVjdGVkVmFsdWUpe2Zvcih2YXIgcj1JO3IuY29uc3RydWN0b3JOYW1lIT09Im5pbCI7KXtpZihyLmNvbnN0cnVjdG9yTmFtZSE9PSI6OiIpdGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpO3ZhciBlPXIuYXJndW1lbnQ7aWYoIShlIGluc3RhbmNlb2Ygcy5SZWNvcmRWYWx1ZSYmZS5lbnRyaWVzLnNpemU9PT0yKSl0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIik7dmFyIG89ZS5nZXRWYWx1ZSgiMSIpLHk9ZS5nZXRWYWx1ZSgiMiIpO2lmKCEobyBpbnN0YW5jZW9mIHMuVmFsdWUmJnkgaW5zdGFuY2VvZiBzLkNvbnN0cnVjdGVkVmFsdWUpKXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKTtPLm1vZGlmaWFibGUuc2V0TmV3Q2VsbChvKSxFLmxlbmd0aCsrLHI9eX1yZXR1cm5bRSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJmcm9tTGlzdCIsbmV3IGcuRnVuY3Rpb25UeXBlKEEsaCksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJzdWIiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigic3ViIixmdW5jdGlvbihJLE8pe2lmKEkgaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlJiZJLmVudHJpZXMuc2l6ZT09PTIpe3ZhciBFPUkuZ2V0VmFsdWUoIjEiKSxyPUkuZ2V0VmFsdWUoIjIiKTtpZihFIGluc3RhbmNlb2Ygcy5BcnJheVZhbHVlJiZyIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXt2YXIgZT1yLnZhbHVlO3JldHVybiBlPDB8fGU+PUUubGVuZ3RoP1tCLnN1YnNjcmlwdEV4Y2VwdGlvbi5jb25zdHJ1Y3QoKSwhMCxbXV06W08ubW9kaWZpYWJsZS5nZXRDZWxsKEUuYWRkcmVzcytlKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgic3ViIixuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuVHVwbGVUeXBlKFtoLEIuaW50VHlwZV0pLnNpbXBsaWZ5KCksbmV3IGcuVHlwZVZhcmlhYmxlKCInYSIpKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoInVwZGF0ZSIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJ1cGRhdGUiLGZ1bmN0aW9uKEksTyl7aWYoSSBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUmJkkuZW50cmllcy5zaXplPT09Myl7dmFyIEU9SS5nZXRWYWx1ZSgiMSIpLHI9SS5nZXRWYWx1ZSgiMiIpLGU9SS5nZXRWYWx1ZSgiMyIpO2lmKEUgaW5zdGFuY2VvZiBzLkFycmF5VmFsdWUmJnIgaW5zdGFuY2VvZiBzLkludGVnZXIpe3ZhciBvPXIudmFsdWU7cmV0dXJuIG88MHx8bz49RS5sZW5ndGg/W0Iuc3Vic2NyaXB0RXhjZXB0aW9uLmNvbnN0cnVjdCgpLCEwLFtdXTooTy5tb2RpZmlhYmxlLnNldENlbGwoRS5hZGRyZXNzK28sZSksW25ldyBzLlJlY29yZFZhbHVlLCExLFtdXSl9dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgidXBkYXRlIixuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuVHVwbGVUeXBlKFtoLEIuaW50VHlwZSxuZXcgZy5UeXBlVmFyaWFibGUoIidhIildKSxuZXcgZy5UdXBsZVR5cGUoW10pKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgibGVuZ3RoIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImxlbmd0aCIsZnVuY3Rpb24oSSxPKXtpZihJIGluc3RhbmNlb2Ygcy5BcnJheVZhbHVlKXJldHVybltuZXcgcy5JbnRlZ2VyKEkubGVuZ3RoKSwhMSxbXV07dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJsZW5ndGgiLG5ldyBnLkZ1bmN0aW9uVHlwZShoLEIuaW50VHlwZSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxNLnNldER5bmFtaWNTdHJ1Y3R1cmUoIkFycmF5IixWKSxNLnNldFN0YXRpY1N0cnVjdHVyZSgiQXJyYXkiLEQpLE19LGNvZGU6YHNpZ25hdHVyZSBBUlJBWSA9IHNpZwogICAgICAgICgqIGVxdHlwZSAnYSBhcnJheSA9ICdhIGFycmF5ICopCiAgICAgICAgKCogdHlwZSAnYSB2ZWN0b3IgPSAnYSBWZWN0b3IudmVjdG9yICopCiAgICAgICAgKCogdmFsIG1heExlbiA6IGludCAqKQogICAgICAgIHZhbCBhcnJheSA6IGludCAqICdhIC0+ICdhIGFycmF5CiAgICAgICAgdmFsIGZyb21MaXN0IDogJ2EgbGlzdCAtPiAnYSBhcnJheQogICAgICAgIHZhbCB0YWJ1bGF0ZSA6IGludCAqIChpbnQgLT4gJ2EpIC0+ICdhIGFycmF5CiAgICAgICAgdmFsIGxlbmd0aCA6ICdhIGFycmF5IC0+IGludAogICAgICAgIHZhbCBzdWIgOiAnYSBhcnJheSAqIGludCAtPiAnYQogICAgICAgIHZhbCB1cGRhdGUgOiAnYSBhcnJheSAqIGludCAqICdhIC0+IHVuaXQKICAgICAgICB2YWwgdmVjdG9yIDogJ2EgYXJyYXkgLT4gJ2EgdmVjdG9yCiAgICAgICAgdmFsIGNvcHkgICAgOiB7c3JjIDogJ2EgYXJyYXksIGRzdCA6ICdhIGFycmF5LCBkaSA6IGludH0gLT4gdW5pdAogICAgICAgIHZhbCBjb3B5VmVjIDoge3NyYyA6ICdhIHZlY3RvciwgZHN0IDogJ2EgYXJyYXksIGRpIDogaW50fSAtPiB1bml0CiAgICAgICAgdmFsIGFwcGkgOiAoaW50ICogJ2EgLT4gdW5pdCkgLT4gJ2EgYXJyYXkgLT4gdW5pdAogICAgICAgIHZhbCBhcHAgIDogKCdhIC0+IHVuaXQpIC0+ICdhIGFycmF5IC0+IHVuaXQKICAgICAgICB2YWwgbW9kaWZ5aSA6IChpbnQgKiAnYSAtPiAnYSkgLT4gJ2EgYXJyYXkgLT4gdW5pdAogICAgICAgIHZhbCBtb2RpZnkgIDogKCdhIC0+ICdhKSAtPiAnYSBhcnJheSAtPiB1bml0CiAgICAgICAgdmFsIGZvbGRsaSA6IChpbnQgKiAnYSAqICdiIC0+ICdiKSAtPiAnYiAtPiAnYSBhcnJheSAtPiAnYgogICAgICAgIHZhbCBmb2xkcmkgOiAoaW50ICogJ2EgKiAnYiAtPiAnYikgLT4gJ2IgLT4gJ2EgYXJyYXkgLT4gJ2IKICAgICAgICB2YWwgZm9sZGwgIDogKCdhICogJ2IgLT4gJ2IpIC0+ICdiIC0+ICdhIGFycmF5IC0+ICdiCiAgICAgICAgdmFsIGZvbGRyICA6ICgnYSAqICdiIC0+ICdiKSAtPiAnYiAtPiAnYSBhcnJheSAtPiAnYgogICAgICAgIHZhbCBmaW5kaSA6IChpbnQgKiAnYSAtPiBib29sKSAtPiAnYSBhcnJheSAtPiAoaW50ICogJ2EpIG9wdGlvbgogICAgICAgIHZhbCBmaW5kICA6ICgnYSAtPiBib29sKSAtPiAnYSBhcnJheSAtPiAnYSBvcHRpb24KICAgICAgICB2YWwgZXhpc3RzIDogKCdhIC0+IGJvb2wpIC0+ICdhIGFycmF5IC0+IGJvb2wKICAgICAgICB2YWwgYWxsIDogKCdhIC0+IGJvb2wpIC0+ICdhIGFycmF5IC0+IGJvb2wKICAgICAgICB2YWwgY29sbGF0ZSA6ICgnYSAqICdhIC0+IG9yZGVyKSAtPiAnYSBhcnJheSAqICdhIGFycmF5IC0+IG9yZGVyCiAgICBlbmQ7CgogICAgc3RydWN0dXJlIEFycmF5IDo+IEFSUkFZID0gc3RydWN0CiAgICAgICAgb3BlbiBBcnJheTsKICAgICAgICBmdW4gdGFidWxhdGUgKG4sIGYpID0gZnJvbUxpc3QgKExpc3QudGFidWxhdGUgKG4sIGYpKTsKCiAgICAgICAgZnVuIHZlY3RvciBhcnIgPSBWZWN0b3IudGFidWxhdGUgKGxlbmd0aCBhcnIsIGZuIGkgPT4gc3ViIChhcnIsIGkpKTsKCiAgICAgICAgZnVuIGNvcHkge3NyYywgZHN0LCBkaX0gPSBpZiBkaSA8IDAgb3JlbHNlIGxlbmd0aCBkc3QgPCBkaSArIGxlbmd0aCBzcmMgdGhlbiByYWlzZSBTdWJzY3JpcHQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICBsZXQKICAgICAgICAgICAgICAgIHZhbCBsZW4gPSBsZW5ndGggc3JjCiAgICAgICAgICAgICAgICBmdW4gbG9vcCBpbmRleCA9IGlmIGluZGV4ID0gbGVuIHRoZW4gKCkKICAgICAgICAgICAgICAgICAgICBlbHNlICggdXBkYXRlKGRzdCwgaW5kZXggKyBkaSwgc3ViKHNyYywgaW5kZXgpKTsgbG9vcCAoaW5kZXggKyAxKSkKICAgICAgICAgICAgaW4KICAgICAgICAgICAgICAgIGxvb3AgMAogICAgICAgICAgICBlbmQ7CiAgICAgICAgZnVuIGNvcHlWZWMge3NyYywgZHN0LCBkaX0gPSBpZiBkaSA8IDAgb3JlbHNlIGxlbmd0aCBkc3QgPCBkaSArIFZlY3Rvci5sZW5ndGggc3JjIHRoZW4gcmFpc2UgU3Vic2NyaXB0CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgbGV0CiAgICAgICAgICAgICAgICB2YWwgbGVuID0gVmVjdG9yLmxlbmd0aCBzcmMKICAgICAgICAgICAgICAgIGZ1biBsb29wIGluZGV4ID0gaWYgaW5kZXggPSBsZW4gdGhlbiAoKQogICAgICAgICAgICAgICAgICAgIGVsc2UgKCB1cGRhdGUoZHN0LCBpbmRleCArIGRpLCBWZWN0b3Iuc3ViKHNyYywgaW5kZXgpKTsgbG9vcCAoaW5kZXggKyAxKSkKICAgICAgICAgICAgaW4KICAgICAgICAgICAgICAgIGxvb3AgMAogICAgICAgICAgICBlbmQ7CgogICAgICAgIGZ1biBhcHBpIHAgYXJyID0gbGV0CiAgICAgICAgICAgIHZhbCBsZW4gPSBsZW5ndGggYXJyCiAgICAgICAgICAgIGZ1biBsb29wIGluZGV4ID0gaWYgaW5kZXggPSBsZW4gdGhlbiAoKQogICAgICAgICAgICAgICAgZWxzZSAocChpbmRleCwgc3ViKGFyciwgaW5kZXgpKTsgbG9vcCAoaW5kZXggKzEpKQogICAgICAgICAgICBpbgogICAgICAgICAgICAgICAgbG9vcCAwCiAgICBlbmQ7CiAgICBmdW4gYXBwIHAgPSBhcHBpIChmbiAoXywgdikgPT4gcCB2KTsKCiAgICBmdW4gbW9kaWZ5aSBwIGFyciA9CiAgICAgICAgbGV0CiAgICAgICAgICAgIHZhbCBsZW4gPSBsZW5ndGggYXJyCiAgICAgICAgICAgIGZ1biBsb29wIGluZGV4ID0gaWYgaW5kZXggPSBsZW4gdGhlbiAoKQogICAgICAgICAgICAgICAgZWxzZSAoIHVwZGF0ZShhcnIsIGluZGV4LCBwKGluZGV4LCBzdWIoYXJyLCBpbmRleCkpKTsgbG9vcCAoaW5kZXggKzEpKQogICAgICAgIGluCiAgICAgICAgICAgIGxvb3AgMAogICAgICAgIGVuZDsKCiAgICBmdW4gbW9kaWZ5aSBwIGFyciA9CiAgICAgICAgbGV0CiAgICAgICAgICAgIHZhbCBsZW4gPSBsZW5ndGggYXJyCiAgICAgICAgICAgIGZ1biBsb29wIGluZGV4ID0gaWYgaW5kZXggPSBsZW4gdGhlbiAoKQogICAgICAgICAgICAgICAgZWxzZSAoIHVwZGF0ZShhcnIsIGluZGV4LCBwKGluZGV4LCBzdWIoYXJyLCBpbmRleCkpKTsgbG9vcCAoaW5kZXggKzEpKQogICAgICAgIGluCiAgICAgICAgICAgIGxvb3AgMAogICAgICAgIGVuZDsKICAgIGZ1biBtb2RpZnkgcCA9IG1vZGlmeWkgKGZuIChfLCB2KSA9PiBwIHYpOwoKICAgIGZ1biBmb2xkbGkgZiBpbml0IGFyciA9CiAgICAgICAgbGV0CiAgICAgICAgICAgIHZhbCBsZW4gPSBsZW5ndGggYXJyCiAgICAgICAgICAgIGZ1biBsb29wIChpLCBiKSA9CiAgICAgICAgICAgICAgICBpZiBpID0gbGVuIHRoZW4gYgogICAgICAgICAgICAgICAgZWxzZSBsb29wIChpICsgMSwgZiAoaSwgc3ViIChhcnIsIGkpLCBiKSkKICAgICAgICAgICAgaW4KICAgICAgICAgICAgICAgIGxvb3AgKDAsIGluaXQpCiAgICAgICAgZW5kOwogICAgZnVuIGZvbGRyaSBmIGluaXQgYXJyID0KICAgICAgICBsZXQKICAgICAgICAgICAgdmFsIGxlbiA9IGxlbmd0aCBhcnIKICAgICAgICAgICAgZnVuIGxvb3AgKGksIGIpID0KICAgICAgICAgICAgICAgIGlmIGkgPSB+MSB0aGVuIGIKICAgICAgICAgICAgICAgIGVsc2UgbG9vcCAoaSAtIDEsIGYgKGksIHN1YiAoYXJyLCBpKSwgYikpCiAgICAgICAgICAgIGluCiAgICAgICAgICAgICAgICBsb29wIChsZW4gLSAxLCBpbml0KQogICAgICAgICAgICBlbmQ7CiAgICBmdW4gZm9sZGwgZiBpbml0IGFyciA9IGZvbGRsaSAoZm4gKF8sIGEsIHgpID0+IGYoYSwgeCkpIGluaXQgYXJyOwogICAgZnVuIGZvbGRyIGYgaW5pdCBhcnIgPSBmb2xkcmkgKGZuIChfLCBhLCB4KSA9PiBmKGEsIHgpKSBpbml0IGFycjsKCiAgICBmdW4gZmluZGkgZiBhcnIgPQogICAgICAgIGxldAogICAgICAgICAgICB2YWwgbGVuID0gbGVuZ3RoIGFycgogICAgICAgICAgICBmdW4gbG9vcCBpbmRleCA9CiAgICAgICAgICAgICAgICBpZiBpbmRleCA9IEFycmF5Lmxlbmd0aCBhcnIgdGhlbiBOT05FCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBsZXQKICAgICAgICAgICAgICAgICAgICB2YWwgZWwgPSBzdWIoYXJyLCBpbmRleCkKICAgICAgICAgICAgICAgIGluCiAgICAgICAgICAgICAgICAgICAgaWYgZiAoaW5kZXgsIGVsKSB0aGVuIFNPTUUgKGluZGV4LCBlbCkgZWxzZSBsb29wIChpbmRleCsxKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgaW4KICAgICAgICAgICAgbG9vcCAwCiAgICAgICAgZW5kOwogICAgZnVuIGZpbmQgZiBhcnIgPSBjYXNlIGZpbmRpIChmbiAoXywgdikgPT4gZiB2KSBhcnIgb2YgTk9ORSA9PiBOT05FCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTT01FIChfLCB2KSA9PiBTT01FIHY7CiAgICBmdW4gZXhpc3RzIHAgYXJyID0gY2FzZSBmaW5kIHAgYXJyIG9mIE5PTkUgPT4gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU09NRSBfID0+IHRydWU7CgogICAgZnVuIGFsbCBwID0gZm9sZGwgKGZuICh2LCBhY2MpID0+IHAgdiBhbmRhbHNvIGFjYykgdHJ1ZTsKICAgIGZ1biBjb2xsYXRlIHAgKGExLCBhMikgPQogICAgICAgIGxldAogICAgICAgICAgICB2YWwgbGVuZ3RoMSA9IGxlbmd0aCBhMQogICAgICAgICAgICB2YWwgbGVuZ3RoMiA9IGxlbmd0aCBhMgogICAgICAgICAgICBmdW4gbG9vcCBpbmRleCA9CiAgICAgICAgICAgICAgICBpZiBpbmRleCA9IGxlbmd0aDEgYW5kYWxzbyBpbmRleCA9IGxlbmd0aDIgdGhlbiBFUVVBTAogICAgICAgICAgICAgICAgZWxzZSBpZiBpbmRleCA9IGxlbmd0aDEgdGhlbiBMRVNTCiAgICAgICAgICAgICAgICBlbHNlIGlmIGluZGV4ID0gbGVuZ3RoMiB0aGVuIEdSRUFURVIKICAgICAgICAgICAgICAgIGVsc2UgY2FzZSBwIChzdWIgKGExLCBpbmRleCksIHN1YiAoYTIsIGluZGV4KSkgb2YKICAgICAgICAgICAgICAgICAgICAgICAgRVFVQUwgPT4gbG9vcCAoaW5kZXggKyAxKQogICAgICAgICAgICAgICAgICAgICAgICAgIHwgbCA9PiBsCiAgICAgICAgaW4KICAgICAgICAgICAgbG9vcCAwCiAgICAgICAgZW5kOwogICAgZW5kO2AscmVxdWlyZXM6WyJPcHRpb24iLCJMaXN0IiwiVmVjdG9yIl19fSw0NTY6KGZlLHUsSyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5BU1NFUlRfTElCPXZvaWQgMDt2YXIgbT1LKDM2NyksZz1LKDY5OSkscz1LKDEwNikscT1LKDc1OCksQj1LKDE5Nyk7dS5BU1NFUlRfTElCPXtuYXRpdmU6ZnVuY3Rpb24oTSl7dmFyIFY9bmV3IG0uRHluYW1pY0Jhc2lzKHt9LHt9LHt9LHt9LHt9KSxEPW5ldyBtLlN0YXRpY0Jhc2lzKHt9LHt9LHt9LHt9LHt9KTtyZXR1cm4gVi5zZXRWYWx1ZSgiYXNzZXJ0RGVmaW5lZCIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJhc3NlcnREZWZpbmVkIixmdW5jdGlvbihoLEEpe3ZhciBJPSExO2lmKGggaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlJiZoLmVudHJpZXMuc2l6ZT09PTIpe3ZhciBPPWguZ2V0VmFsdWUoIjEiKSxFPWguZ2V0VmFsdWUoIjIiKTtpZihPIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZSl7dmFyIHI9Ty52YWx1ZSxlPUEubW9kaWZpYWJsZTtyZXR1cm4oZT09PXZvaWQgMHx8ZS5nZXREeW5hbWljVmFsdWUocik9PT12b2lkIDApJiYoST0hMCksST9bQi5mYWlsRXhjZXB0aW9uLmNvbnN0cnVjdChFKSwhMCxbXV06W25ldyBzLlJlY29yZFZhbHVlLCExLFtdXX19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJJIGhhdGUgZWNjaGkgcGVvcGxlISIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJhc3NlcnREZWZpbmVkIixuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuVHVwbGVUeXBlKFtCLnN0cmluZ1R5cGUsQi5zdHJpbmdUeXBlXSksbmV3IGcuVHVwbGVUeXBlKFtdKSkuc2ltcGxpZnkoKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoInByaW50VHlwZSIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJwcmludFR5cGUiLGZ1bmN0aW9uKGgsQSl7dmFyIEk9W107aWYoaCBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUpe3ZhciBPPWgudmFsdWUsRT1BLm1vZGlmaWFibGU7aWYoRSE9PXZvaWQgMCl7dmFyIHI9RS5nZXRTdGF0aWNWYWx1ZShPKTtpZihyIT09dm9pZCAwKXt2YXIgZT1yWzBdO2UhPT12b2lkIDAmJkkucHVzaChuZXcgcS5XYXJuaW5nKC0yLGUudG9TdHJpbmcoe30pKSl9cmV0dXJuW25ldyBzLlJlY29yZFZhbHVlLCExLEldfX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlx1MzBCM1x1MzBDRVx1MzBFNFx1MzBFRFx1MzBGQyEhXHUzMEQwXHUzMEFCXHUzMEU0XHUzMEVEXHUzMEZDISEiKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgicHJpbnRUeXBlIixuZXcgZy5GdW5jdGlvblR5cGUoQi5zdHJpbmdUeXBlLG5ldyBnLlR1cGxlVHlwZShbXSkpLnNpbXBsaWZ5KCksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJhc3NlcnRUeXBlIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImFzc2VydFR5cGUiLGZ1bmN0aW9uKGgsQSl7dmFyIEk9ITE7aWYoaCBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUmJmguZW50cmllcy5zaXplPT09Mil7dmFyIE89aC5nZXRWYWx1ZSgiMSIpLEU9aC5nZXRWYWx1ZSgiMiIpO2lmKE8gaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlJiZoLmVudHJpZXMuc2l6ZT09PTIpe3ZhciByPU8uZ2V0VmFsdWUoIjEiKSxlPU8uZ2V0VmFsdWUoIjIiKTtpZihyIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZSYmZSBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUpe3ZhciBvPXIudmFsdWUseT1BLm1vZGlmaWFibGU7aWYoeT09PXZvaWQgMClJPSEwO2Vsc2V7dmFyIGQ9eS5nZXRTdGF0aWNWYWx1ZShvKTtpZihkPT09dm9pZCAwKUk9ITA7ZWxzZXt2YXIgdj1kWzBdO3YhPT12b2lkIDAmJnYudG9TdHJpbmcoe30pPT09ZS52YWx1ZXx8KEk9ITApfX1yZXR1cm4gST9bQi5mYWlsRXhjZXB0aW9uLmNvbnN0cnVjdChFKSwhMCxbXV06W25ldyBzLlJlY29yZFZhbHVlLCExLFtdXX19fXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiSW4gdGhlIG5hbWUgb2YgdGhlIG1vb24sIEkgd2lsbCBwdW5pc2ggeW91ISIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJhc3NlcnRUeXBlIixuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuVHVwbGVUeXBlKFtuZXcgZy5UdXBsZVR5cGUoW0Iuc3RyaW5nVHlwZSxCLnN0cmluZ1R5cGVdKSxCLnN0cmluZ1R5cGVdKSxuZXcgZy5UdXBsZVR5cGUoW10pKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgiYXNzZXJ0VmFsdWUiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiYXNzZXJ0VmFsdWUiLGZ1bmN0aW9uKGgsQSl7dmFyIEk9ITE7aWYoaCBpbnN0YW5jZW9mIHMuUmVjb3JkVmFsdWUmJmguZW50cmllcy5zaXplPT09Mil7dmFyIE89aC5nZXRWYWx1ZSgiMSIpLEU9aC5nZXRWYWx1ZSgiMiIpO2lmKE8gaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlJiZoLmVudHJpZXMuc2l6ZT09PTIpe3ZhciByPU8uZ2V0VmFsdWUoIjEiKSxlPU8uZ2V0VmFsdWUoIjIiKTtpZihyIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZSYmZSBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUpe3ZhciBvPXIudmFsdWUseT1BLm1vZGlmaWFibGU7aWYoeT09PXZvaWQgMClJPSEwO2Vsc2V7dmFyIGQ9eS5nZXREeW5hbWljVmFsdWUobyk7aWYoZD09PXZvaWQgMClJPSEwO2Vsc2V7dmFyIHY9ZFswXTt2IT09dm9pZCAwJiZ2LnRvU3RyaW5nKHkpPT09ZS52YWx1ZXx8KEk9ITApfX1yZXR1cm4gST9bQi5mYWlsRXhjZXB0aW9uLmNvbnN0cnVjdChFKSwhMCxbXV06W25ldyBzLlJlY29yZFZhbHVlLCExLFtdXX19fXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiXHU1NjE4XHUzMDYwXHUzMEMzXHVGRjAxIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoImFzc2VydFZhbHVlIixuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuVHVwbGVUeXBlKFtuZXcgZy5UdXBsZVR5cGUoW0Iuc3RyaW5nVHlwZSxCLnN0cmluZ1R5cGVdKSxCLnN0cmluZ1R5cGVdKSxuZXcgZy5UdXBsZVR5cGUoW10pKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgiYXNzZXJ0VmFsdWVFcSIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJhc3NlcnRWYWx1ZUVxIixmdW5jdGlvbihoLEEpe3ZhciBJPSExO2lmKGggaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlJiZoLmVudHJpZXMuc2l6ZT09PTIpe3ZhciBPPWguZ2V0VmFsdWUoIjEiKSxFPWguZ2V0VmFsdWUoIjIiKTtpZihPIGluc3RhbmNlb2Ygcy5SZWNvcmRWYWx1ZSYmaC5lbnRyaWVzLnNpemU9PT0yKXt2YXIgcj1PLmdldFZhbHVlKCIxIiksZT1PLmdldFZhbHVlKCIyIik7aWYociBpbnN0YW5jZW9mIHMuU3RyaW5nVmFsdWUpe3ZhciBvPXIudmFsdWUseT1BLm1vZGlmaWFibGU7aWYoeT09PXZvaWQgMClJPSEwO2Vsc2V7dmFyIGQ9eS5nZXREeW5hbWljVmFsdWUobyk7aWYoZD09PXZvaWQgMClJPSEwO2Vsc2V7dmFyIHY9ZFswXTt2IT09dm9pZCAwJiZ2LmVxdWFscyhlKXx8KEk9ITApfX1yZXR1cm4gST9bQi5mYWlsRXhjZXB0aW9uLmNvbnN0cnVjdChFKSwhMCxbXV06W25ldyBzLlJlY29yZFZhbHVlLCExLFtdXX19fXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigiQmVlcC4gQmVlcC1CZWVwLiBCZWVwLiBCZWVwLUJlZXAtQmVlcC4gQmVlcC4gQmVlcC4iKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgiYXNzZXJ0VmFsdWVFcSIsbmV3IGcuRnVuY3Rpb25UeXBlKG5ldyBnLlR1cGxlVHlwZShbbmV3IGcuVHVwbGVUeXBlKFtCLnN0cmluZ1R5cGUsbmV3IGcuVHlwZVZhcmlhYmxlKCInYSIpXSksQi5zdHJpbmdUeXBlXSksbmV3IGcuVHVwbGVUeXBlKFtdKSkuc2ltcGxpZnkoKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImNvdW50Q2FsbE9jY3VycmVuY2VzIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImNvdW50Q2FsbE9jY3VycmVuY2VzIixmdW5jdGlvbihoLEEpe3JldHVybltuZXcgcy5SZWNvcmRWYWx1ZSwhMSxbXV19KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoImNvdW50Q2FsbE9jY3VycmVuY2VzIixuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuVHVwbGVUeXBlKFtCLnN0cmluZ1R5cGUsQi5zdHJpbmdUeXBlXSksQi5pbnRUeXBlKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgiY291bnRFeHByZXNzaW9uT2NjdXJyZW5jZXMiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiY291bnRFeHByZXNzaW9uT2NjdXJyZW5jZXMiLGZ1bmN0aW9uKGgsQSl7cmV0dXJuW25ldyBzLlJlY29yZFZhbHVlLCExLFtdXX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgiY291bnRFeHByZXNzaW9uT2NjdXJyZW5jZXMiLG5ldyBnLkZ1bmN0aW9uVHlwZShuZXcgZy5UdXBsZVR5cGUoW0Iuc3RyaW5nVHlwZSxCLnN0cmluZ1R5cGVdKSxCLmludFR5cGUpLnNpbXBsaWZ5KCksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxNLnNldER5bmFtaWNTdHJ1Y3R1cmUoIkFzc2VydCIsViksTS5zZXRTdGF0aWNTdHJ1Y3R1cmUoIkFzc2VydCIsRCksTX0sY29kZTpgc2lnbmF0dXJlIEFTU0VSVCA9IHNpZwogICAgICAgIHZhbCBhc3NlcnQgOiBib29sICogc3RyaW5nIC0+IHVuaXQ7CiAgICAgICAgdmFsIGludmVydCA6ICgnYSAqIHN0cmluZyAtPiB1bml0KSAtPiAnYSAqIHN0cmluZyAtPiB1bml0OwoKICAgICAgICAoKiBDaGVja3Mgd2hldGhlciBhbiBpZGVudGlmaWVyIGlzIGRlZmluZWQsIG90aGVyd2lzZSByYWlzZXMgYW4gRmFpbAogICAgICAgICAgIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXIgYXMgdGhlIG1lc3NhZ2UgKikKICAgICAgICB2YWwgYXNzZXJ0RGVmaW5lZCA6IHN0cmluZyAqIHN0cmluZyAtPiB1bml0OwoKICAgICAgICAoKiBQcmludHMgdGhlIHR5cGUgb2YgdGhlIHN5bWJvbCBwYXNzZWQgYXMgYXJndW1lbnQgKikKICAgICAgICB2YWwgcHJpbnRUeXBlIDogc3RyaW5nIC0+IHVuaXQ7CgogICAgICAgICgqIENoZWNrcyB3aGV0aGVyIGFuIGlkZW50aWZpZXIgaGFzIHRoZSBzcGVjaWZpZWQgdHlwZSwKICAgICAgICAgICBvdGhlcndpc2UgcmFpc2VzIGFuIEZhaWwgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlciBhcyB0aGUgbWVzc2FnZSAqKQogICAgICAgIHZhbCBhc3NlcnRUeXBlIDogKHN0cmluZyAqIHN0cmluZykgKiBzdHJpbmcgLT4gdW5pdDsKCiAgICAgICAgKCogQ2hlY2tzIHdoZXRoZXIgYW4gaWRlbnRpZmllciBpcyBlcXVhbCB0byB0aGUgZ2l2ZW4gdmFsdWUsCiAgICAgICAgICAgb3RoZXJ3aXNlIHJhaXNlcyBhbiBGYWlsIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXIgYXMgdGhlIG1lc3NhZ2UgKikKICAgICAgICB2YWwgYXNzZXJ0VmFsdWVFcSA6IChzdHJpbmcgKiAnJ2EpICogc3RyaW5nIC0+IHVuaXQ7CgogICAgICAgIHZhbCBhc3NlcnRWYWx1ZSA6IChzdHJpbmcgKiBzdHJpbmcpICogc3RyaW5nIC0+IHVuaXQ7CgogICAgICAgICgqIENvdW50cyBob3cgb2Z0ZW4gdGhlIHNlY29uZCBpZGVudGlmaWVyIG9jY3VycyBpbiB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgZmlyc3QgaWRlbnRpZmllcgogICAgICAgICAgIChhZnRlciByZXNvbHZpbmcgc2ltcGxpZmljYXRpb25zKS4gKikKICAgICAgICAoKiB2YWwgY291bnRDYWxsT2NjdXJyZW5jZXMgOiBzdHJpbmcgKiBzdHJpbmcgLT4gaW50OyAqKQoKICAgICAgICAoKiBDb3VudHMgaG93IG9mdGVuIHRoZSBzZWNvbmQgcGFyYW1ldGVyIChFeHByZXNzaW9uVHlwZSkgb2NjdXJzIGluIHRoZSBkZWZpbml0aW9uIG9mIHRoZQogICAgICAgICAgIGZpcnN0IGlkZW50aWZpZXIuICopCiAgICAgICAgKCogdmFsIGNvdW50RXhwcmVzc2lvbk9jY3VycmVuY2VzIDogc3RyaW5nICogc3RyaW5nIC0+IGludDsgKikKICAgIGVuZDsKCiAgICBzdHJ1Y3R1cmUgQXNzZXJ0IDo+IEFTU0VSVCA9IHN0cnVjdAogICAgICAgIG9wZW4gQXNzZXJ0OwoKICAgICAgICBmdW4gYXNzZXJ0ICh0cnVlLCBfKSA9ICgpCiAgICAgICAgICB8IGFzc2VydCAoZmFsc2UsIG1zZykgPSByYWlzZSBGYWlsKG1zZyk7CgogICAgICAgIGZ1biBpbnZlcnQgYXNzZXJ0aW9uIChleHAsIG1zZykgPSBsZXQKICAgICAgICAgIHZhbCB0aHJvd24gPSAoYXNzZXJ0aW9uIChleHAsICIiKTsgZmFsc2UpIGhhbmRsZSBGYWlsIGUgPT4gdHJ1ZTsKICAgICAgICBpbgogICAgICAgICAgaWYgdGhyb3duIHRoZW4gKCkgZWxzZSByYWlzZSBGYWlsKG1zZykKICAgICAgICBlbmQ7CiAgICBlbmQ7YCxyZXF1aXJlczpbXX19LDMzNDooZmUsdSxLKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LkNIQVJfTElCPXZvaWQgMDt2YXIgbT1LKDM2NyksZz1LKDY5OSkscz1LKDEwNikscT1LKDc1OCksQj1LKDE5Nyk7dS5DSEFSX0xJQj17bmF0aXZlOmZ1bmN0aW9uKE0pe3JldHVybiBNLnNldER5bmFtaWNWYWx1ZSgib3JkIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oIm9yZCIsZnVuY3Rpb24oVixEKXtpZihWIGluc3RhbmNlb2Ygcy5DaGFyVmFsdWUpe3ZhciBoPVYudmFsdWU7cmV0dXJuW25ldyBzLkludGVnZXIoaC5jaGFyQ29kZUF0KDApKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxNLnNldFN0YXRpY1ZhbHVlKCJvcmQiLG5ldyBnLkZ1bmN0aW9uVHlwZShCLmNoYXJUeXBlLEIuaW50VHlwZSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxNLnNldER5bmFtaWNWYWx1ZSgiY2hyIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImNociIsZnVuY3Rpb24oVixEKXtpZihWIGluc3RhbmNlb2Ygcy5JbnRlZ2VyKXt2YXIgaD1WLnZhbHVlO3JldHVybiBoPDB8fGg+MjU1P1tCLmNockV4Y2VwdGlvbi5jb25zdHJ1Y3QoKSwhMCxbXV06W25ldyBzLkNoYXJWYWx1ZShTdHJpbmcuZnJvbUNoYXJDb2RlKGgpKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxNLnNldFN0YXRpY1ZhbHVlKCJjaHIiLG5ldyBnLkZ1bmN0aW9uVHlwZShCLmludFR5cGUsQi5jaGFyVHlwZSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxNfSxjb2RlOmBzdHJ1Y3R1cmUgQ2hhciA9IHN0cnVjdAogICAgICAgIGZ1biBpc0xvd2VyIGMgID0gIyJhIiA8PSBjIGFuZGFsc28gYyA8PSAjInoiCiAgICAgICAgZnVuIGlzVXBwZXIgYyAgPSAjIkEiIDw9IGMgYW5kYWxzbyBjIDw9ICMiWiIKICAgICAgICBmdW4gaXNEaWdpdCBjICA9ICMiMCIgPD0gYyBhbmRhbHNvIGMgPD0gIyI5IgogICAgICAgIGZ1biBpc0FscGhhIGMgID0gaXNMb3dlciBjIG9yZWxzZSBpc1VwcGVyIGMKICAgICAgICBmdW4gaXNIZXhEaWdpdCBjID0gIyIwIiA8PSBjIGFuZGFsc28gYyA8PSAjIjkiCiAgICAgICAgb3JlbHNlICMiYSIgPD0gYyBhbmRhbHNvIGMgPD0gIyJmIgogICAgICAgIG9yZWxzZSAjIkEiIDw9IGMgYW5kYWxzbyBjIDw9ICMiRiIKICAgICAgICBmdW4gaXNBbHBoYU51bSBjID0gaXNBbHBoYSBjIG9yZWxzZSBpc0RpZ2l0IGMKICAgICAgICBmdW4gaXNQcmludCBjICA9IGMgPj0gIyIgIiBhbmRhbHNvIGMgPCAjIlxcMTI3IgogICAgICAgIGZ1biBpc1NwYWNlIGMgID0gYyA9ICMiICIgb3JlbHNlICMiXFwwMDkiIDw9IGMgYW5kYWxzbyBjIDw9ICMiXFwwMTMiCiAgICAgICAgZnVuIGlzR3JhcGggYyAgPSBpc1ByaW50IGMgYW5kYWxzbyBub3QgKGlzU3BhY2UgYykKICAgICAgICBmdW4gaXNQdW5jdCBjICA9IGlzR3JhcGggYyBhbmRhbHNvIG5vdCAoaXNBbHBoYU51bSBjKQogICAgICAgIGZ1biBpc0FzY2lpIGMgID0gYyA8PSAjIlxcMTI3IgogICAgICAgIGZ1biBpc0NudHJsIGMgID0gYyA8ICMiICIgb3JlbHNlIGMgPj0gIyJcXDEyNyIKCiAgICAgICAgZnVuIHRvTG93ZXIgYyA9CiAgICAgICAgICAgIGlmICMiQSIgPD0gYyBhbmRhbHNvIGMgPD0gIyJaIiB0aGVuIGNociAob3JkIGMgKyAzMikKICAgICAgICBlbHNlIGM7CiAgICAgICAgZnVuIHRvVXBwZXIgYyA9CiAgICAgICAgICAgIGlmICMiYSIgPD0gYyBhbmRhbHNvIGMgPD0gIyJ6IiB0aGVuIGNociAob3JkIGMgLSAzMikKICAgICAgICBlbHNlIGM7CgogICAgICAgIGZ1biBjb21wYXJlIChhLCBiKSA9IEludC5jb21wYXJlKG9yZCBhLCBvcmQgYik7CiAgICAgICAgZnVuIG9wPCAoYSwgYikgPSBJbnQuY29tcGFyZShvcmQgYSwgb3JkIGIpID0gTEVTUzsKICAgICAgICBmdW4gb3A+IChhLCBiKSA9IEludC5jb21wYXJlKG9yZCBhLCBvcmQgYikgPSBHUkVBVEVSOwogICAgICAgIGZ1biBvcDw9IChhLCBiKSA9IEludC5jb21wYXJlKG9yZCBhLCBvcmQgYikgPD4gR1JFQVRFUjsKICAgICAgICBmdW4gb3A+PSAoYSwgYikgPSBJbnQuY29tcGFyZShvcmQgYSwgb3JkIGIpIDw+IExFU1M7CgogICAgICAgIHZhbCBvcmQgPSBvcmQ7CiAgICAgICAgdmFsIGNociA9IGNocjsKICAgICAgICB2YWwgbWF4T3JkID0gMjU1OwogICAgICAgIHZhbCBtYXhDaGFyID0gY2hyIG1heE9yZDsKICAgICAgICB2YWwgbWluQ2hhciA9IGNociAwOwoKICAgICAgICBmdW4gc3VjYyBjID0gaWYgYyA9IG1heENoYXIgdGhlbiByYWlzZSBDaHIgZWxzZSBjaHIob3JkIGMgKyAxKQogICAgICAgIGZ1biBwcmVkIGMgPSBpZiBjID0gbWluQ2hhciB0aGVuIHJhaXNlIENociBlbHNlIGNocihvcmQgYyAtIDEpCgogICAgICAgIGZ1biBjb250YWlucyBzID0gbGV0CiAgICAgICAgICAgIHZhbCB0YWJsZSA9IEFycmF5LmFycmF5KG1heE9yZCArIDEsIGZhbHNlKQogICAgICAgICAgICB2YWwgbCA9IGV4cGxvZGUgcwogICAgICAgIGluCiAgICAgICAgICAgIChMaXN0LmFwcCAoZm4geCA9PiBBcnJheS51cGRhdGUodGFibGUsIG9yZCB4LCB0cnVlKSkgbDsgZm4gYyA9PiBBcnJheS5zdWIodGFibGUsIG9yZCBjKSkKICAgICAgICBlbmQ7CiAgICAgICAgZnVuIG5vdENvbnRhaW5zIHMgPSBsZXQKICAgICAgICAgICAgdmFsIHRhYmxlID0gQXJyYXkuYXJyYXkobWF4T3JkICsgMSwgZmFsc2UpCiAgICAgICAgICAgIHZhbCBsID0gZXhwbG9kZSBzCiAgICAgICAgaW4KICAgICAgICAgICAgKExpc3QuYXBwIChmbiB4ID0+IEFycmF5LnVwZGF0ZSh0YWJsZSwgb3JkIHgsIHRydWUpKSBsOyBmbiBjID0+IG5vdCAoQXJyYXkuc3ViKHRhYmxlLCBvcmQgYykpKQogICAgICAgIGVuZDsKICAgIGVuZDtgLHJlcXVpcmVzOlsiSW50IiwiQXJyYXkiLCJMaXN0Il19fSw4MDE6KGZlLHUsSyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5FVkFMX0xJQj12b2lkIDA7dmFyIG09SygzNjcpLGc9Syg2OTkpLHM9SygxMDYpLHE9Syg3NTgpLEI9Syg0MDMpLE09SygyMTUpLFY9Syg2NTUpLEQ9Syg0OTQpLGg9SygxOTcpO3UuRVZBTF9MSUI9e25hdGl2ZTpmdW5jdGlvbihBKXt2YXIgST1uZXcgbS5EeW5hbWljQmFzaXMoe30se30se30se30se30pLE89bmV3IG0uU3RhdGljQmFzaXMoe30se30se30se30se30pO3JldHVybiBJLnNldFZhbHVlKCJldmFsRXhwIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oInN5bWJvbGljX2V2YWwiLGZ1bmN0aW9uKEUscil7aWYoIShFIGluc3RhbmNlb2Ygcy5TdHJpbmdWYWx1ZSkpdGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJUaGlzIHN0ZCB0eXBlIG1pc21hdGNoIHJlaWducyBzdXByZW1lISIpO3ZhciBlPUUudmFsdWU7dHJ5e3ZhciBvPUIubGV4KGUrIjsiLHt9KSx5PW5ldyBNLlBhcnNlcihvLHIuc3RhdGUsci5zdGF0ZS5pZCx7fSkucGFyc2VFeHByZXNzaW9uKCk7eT15LnNpbXBsaWZ5KCk7dmFyIGQ9W107ZC5wdXNoKHtuZXh0OnkscGFyYW1zOntzdGF0ZTpyLnN0YXRlLmdldE5lc3RlZFN0YXRlKCksbW9kaWZpYWJsZTpyLnN0YXRlLmdldE5lc3RlZFN0YXRlKCkscmVjUmVzdWx0OnZvaWQgMH19KTtmb3IodmFyIHY9dm9pZCAwLEM9IiIsRz1uZXcgTWFwLFk9ZnVuY3Rpb24oKXt2YXIgSj1kLnBvcCgpO2lmKEo9PT12b2lkIDApdGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJcdTMwRDBcdTMwQzhcdTMwRUJcdTMwMDFcdTMwRDBcdTMwQzhcdTMwRUJcdTMwNTdcdTMwNUZcdTMwNDRcdUZGMDEiKTt2YXIgej1KLm5leHQscD1KLnBhcmFtcztwLnJlY1Jlc3VsdD12LHY9eiBpbnN0YW5jZW9mIFYuRGVjbGFyYXRpb24/ei5ldmFsdWF0ZShwLGQpOnouY29tcHV0ZShwLGQpO3ZhciBjPUoubmV4dC50b1N0cmluZygpO2lmKHAuc3RlcD09PTEmJiFjLmluY2x1ZGVzKCJfX2FyZyIpKWlmKHYmJnYudmFsdWUpQys9YysiIFx1MjE5MiAiK3YudmFsdWUudG9TdHJpbmcocC5zdGF0ZSkrYApgO2Vsc2V7dmFyIHc9bmV3IE1hcDtHLmZvckVhY2goZnVuY3Rpb24oVCxOKXtjLmluY2x1ZGVzKE4pP2M9Yy5yZXBsYWNlKE4sVCk6dy5zZXQoTixUKX0pLEc9dyxDKz1jK2AKYH12JiZ2LnZhbHVlJiZ2LnZhbHVlLnRvU3RyaW5nKHAuc3RhdGUpIT09ImZuIiYmKEoubmV4dCBpbnN0YW5jZW9mIEQuVmFsdWVJZGVudGlmaWVyfHxKLm5leHQgaW5zdGFuY2VvZiBELlJlY29yZHx8Ry5zZXQoSi5uZXh0LnRvU3RyaW5nKCksdi52YWx1ZS50b1N0cmluZyhwLnN0YXRlKSkpfTtkLmxlbmd0aD4wOylZKCk7cmV0dXJuIHYhPT12b2lkIDAmJnYudmFsdWUhPT12b2lkIDAmJihDKz12LnZhbHVlLnRvU3RyaW5nKHZvaWQgMCkrYApgKSxbbmV3IHMuUmVjb3JkVmFsdWUsITEsW25ldyBxLldhcm5pbmcoLTIsQyldXX1jYXRjaChKKXtyZXR1cm5bbmV3IHMuUmVjb3JkVmFsdWUsITEsW25ldyBxLldhcm5pbmcoLTEsSi5tZXNzYWdlKV1dfX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksTy5zZXRWYWx1ZSgiZXZhbEV4cCIsbmV3IGcuRnVuY3Rpb25UeXBlKGguc3RyaW5nVHlwZSxuZXcgZy5UdXBsZVR5cGUoW10pKS5zaW1wbGlmeSgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksQS5zZXREeW5hbWljU3RydWN0dXJlKCJFdmFsIixJKSxBLnNldFN0YXRpY1N0cnVjdHVyZSgiRXZhbCIsTyksQX0sY29kZTp2b2lkIDAscmVxdWlyZXM6dm9pZCAwfX0sMzU5OihmZSx1LEspPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHUuSU5UX0xJQj12b2lkIDA7dmFyIG09SygzNjcpLGc9Syg2OTkpLHM9SygxMDYpLHE9Syg3NTgpLEI9SygxOTcpO3UuSU5UX0xJQj17bmF0aXZlOmZ1bmN0aW9uKE0pe3ZhciBWPW5ldyBtLkR5bmFtaWNCYXNpcyh7fSx7fSx7fSx7fSx7fSksRD1uZXcgbS5TdGF0aWNCYXNpcyh7fSx7fSx7fSx7fSx7fSk7cmV0dXJuIFYuc2V0VmFsdWUoInRvU3RyaW5nIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oInRvU3RyaW5nIixmdW5jdGlvbihoLEEpe2lmKGggaW5zdGFuY2VvZiBzLkludGVnZXIpcmV0dXJuW25ldyBzLlN0cmluZ1ZhbHVlKGgudG9TdHJpbmcodm9pZCAwKSksITEsW11dO3Rocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgidG9TdHJpbmciLG5ldyBnLkZ1bmN0aW9uVHlwZShCLmludFR5cGUsQi5zdHJpbmdUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLE0uc2V0RHluYW1pY1N0cnVjdHVyZSgiSW50IixWKSxNLnNldFN0YXRpY1N0cnVjdHVyZSgiSW50IixEKSxNfSxjb2RlOmBzdHJ1Y3R1cmUgSW50ID0gc3RydWN0CiAgICAgICAgICAgIG9wZW4gSW50OwogICAgICAgICAgICBmdW4gY29tcGFyZSAoeCwgeTogaW50KSA9IGlmIHggPCB5IHRoZW4gTEVTUyBlbHNlIGlmIHggPiB5IHRoZW4gR1JFQVRFUiBlbHNlIEVRVUFMOwoKICAgICAgICAgICAgdmFsIG1pbkludCA9IFNPTUUgfmArLXMuTUlOSU5UK2A7CiAgICAgICAgICAgIHZhbCBtYXhJbnQgPSBTT01FIGArcy5NQVhJTlQrYDsKICAgICAgICAgICAgZnVuIG1heCAoeCwgeSkgPSBpZiB4IDwgeSB0aGVuIHkgZWxzZSB4IDogaW50OwogICAgICAgICAgICBmdW4gbWluICh4LCB5KSA9IGlmIHggPiB5IHRoZW4geSBlbHNlIHggOiBpbnQ7CiAgICAgICAgZW5kO2AscmVxdWlyZXM6WyJPcHRpb24iXX19LDY3OTooZmUsdSxLKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LkxJU1RfTElCPXZvaWQgMDt2YXIgbT1LKDM2NyksZz1LKDY5OSkscz1LKDEwNik7dS5MSVNUX0xJQj17bmF0aXZlOmZ1bmN0aW9uKHEpe3ZhciBCPW5ldyBtLkR5bmFtaWNCYXNpcyh7fSx7fSx7fSx7fSx7fSksTT1uZXcgbS5TdGF0aWNCYXNpcyh7fSx7fSx7fSx7fSx7fSk7cmV0dXJuIE0uc2V0VHlwZSgibGlzdCIsbmV3IGcuQ3VzdG9tVHlwZSgibGlzdCIsW25ldyBnLlR5cGVWYXJpYWJsZSgiJ2EiKV0pLFsibmlsIiwiOjoiXSwxLCEwKSxNLnNldFZhbHVlKCJuaWwiLG5ldyBnLlR5cGVWYXJpYWJsZUJpbmQoIidhIixuZXcgZy5DdXN0b21UeXBlKCJsaXN0IixbbmV3IGcuVHlwZVZhcmlhYmxlKCInYSIpXSkpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUiksTS5zZXRWYWx1ZSgiOjoiLG5ldyBnLlR5cGVWYXJpYWJsZUJpbmQoIidhIixuZXcgZy5GdW5jdGlvblR5cGUobmV3IGcuVHVwbGVUeXBlKFtuZXcgZy5UeXBlVmFyaWFibGUoIidhIiksbmV3IGcuQ3VzdG9tVHlwZSgibGlzdCIsW25ldyBnLlR5cGVWYXJpYWJsZSgiJ2EiKV0pXSksbmV3IGcuQ3VzdG9tVHlwZSgibGlzdCIsW25ldyBnLlR5cGVWYXJpYWJsZSgiJ2EiKV0pKSkuc2ltcGxpZnkoKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfQ09OU1RSVUNUT1IpLEIuc2V0VHlwZSgibGlzdCIsWyJuaWwiLCI6OiJdKSxCLnNldFZhbHVlKCJuaWwiLG5ldyBzLlZhbHVlQ29uc3RydWN0b3IoIm5pbCIpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9DT05TVFJVQ1RPUiksQi5zZXRWYWx1ZSgiOjoiLG5ldyBzLlZhbHVlQ29uc3RydWN0b3IoIjo6IiwxKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfQ09OU1RSVUNUT1IpLHEuc2V0RHluYW1pY1N0cnVjdHVyZSgiTGlzdCIsQikscS5zZXRTdGF0aWNTdHJ1Y3R1cmUoIkxpc3QiLE0pLHF9LGNvZGU6YAogICAgICAgIHNpZ25hdHVyZSBMSVNUID0gc2lnCiAgICAgICAgICAgIGRhdGF0eXBlICdhIGxpc3QgPSBuaWwgfCA6OiBvZiAnYSAqICdhIGxpc3Q7CiAgICAgICAgICAgIGV4Y2VwdGlvbiBFbXB0eQogICAgICAgICAgICB2YWwgbnVsbCA6ICdhIGxpc3QgLT4gYm9vbAogICAgICAgICAgICB2YWwgaGQgOiAnYSBsaXN0IC0+ICdhCiAgICAgICAgICAgIHZhbCB0bCA6ICdhIGxpc3QgLT4gJ2EgbGlzdAogICAgICAgICAgICB2YWwgbGFzdCA6ICdhIGxpc3QgLT4gJ2EKICAgICAgICAgICAgdmFsIGdldEl0ZW0gOiAnYSBsaXN0IC0+ICgnYSAqICdhIGxpc3QpIG9wdGlvbgogICAgICAgICAgICB2YWwgbnRoIDogJ2EgbGlzdCAqIGludCAtPiAnYQogICAgICAgICAgICB2YWwgdGFrZSA6ICdhIGxpc3QgKiBpbnQgLT4gJ2EgbGlzdAogICAgICAgICAgICB2YWwgZHJvcCA6ICdhIGxpc3QgKiBpbnQgLT4gJ2EgbGlzdAogICAgICAgICAgICB2YWwgbGVuZ3RoIDogJ2EgbGlzdCAtPiBpbnQKICAgICAgICAgICAgdmFsIHJldiA6ICdhIGxpc3QgLT4gJ2EgbGlzdAogICAgICAgICAgICB2YWwgQCA6ICdhIGxpc3QgKiAnYSBsaXN0IC0+ICdhIGxpc3QKICAgICAgICAgICAgdmFsIGNvbmNhdCA6ICdhIGxpc3QgbGlzdCAtPiAnYSBsaXN0CiAgICAgICAgICAgIHZhbCByZXZBcHBlbmQgOiAnYSBsaXN0ICogJ2EgbGlzdCAtPiAnYSBsaXN0CiAgICAgICAgICAgIHZhbCBhcHAgOiAoJ2EgLT4gdW5pdCkgLT4gJ2EgbGlzdCAtPiB1bml0CiAgICAgICAgICAgIHZhbCBtYXAgOiAoJ2EgLT4gJ2IpIC0+ICdhIGxpc3QgLT4gJ2IgbGlzdAogICAgICAgICAgICB2YWwgbWFwUGFydGlhbCA6ICgnYSAtPiAnYiBvcHRpb24pIC0+ICdhIGxpc3QgLT4gJ2IgbGlzdAogICAgICAgICAgICB2YWwgZmluZCA6ICgnYSAtPiBib29sKSAtPiAnYSBsaXN0IC0+ICdhIG9wdGlvbgogICAgICAgICAgICB2YWwgZmlsdGVyIDogKCdhIC0+IGJvb2wpIC0+ICdhIGxpc3QgLT4gJ2EgbGlzdAogICAgICAgICAgICB2YWwgcGFydGl0aW9uIDogKCdhIC0+IGJvb2wpIC0+ICdhIGxpc3QgLT4gJ2EgbGlzdCAqICdhIGxpc3QKICAgICAgICAgICAgdmFsIHBlcm11dGF0aW9uczogJ2EgbGlzdCAtPiAnYSBsaXN0IGxpc3QKICAgICAgICAgICAgdmFsIGZvbGRyIDogKCdhICogJ2IgLT4gJ2IpIC0+ICdiIC0+ICdhIGxpc3QgLT4gJ2IKICAgICAgICAgICAgdmFsIGZvbGRsIDogKCdhICogJ2IgLT4gJ2IpIC0+ICdiIC0+ICdhIGxpc3QgLT4gJ2IKICAgICAgICAgICAgdmFsIGV4aXN0cyA6ICgnYSAtPiBib29sKSAtPiAnYSBsaXN0IC0+IGJvb2wKICAgICAgICAgICAgdmFsIGFsbCA6ICgnYSAtPiBib29sKSAtPiAnYSBsaXN0IC0+IGJvb2wKICAgICAgICAgICAgdmFsIHRhYnVsYXRlIDogaW50ICogKGludCAtPiAnYSkgLT4gJ2EgbGlzdAogICAgICAgICAgICB2YWwgY29sbGF0ZSA6ICgnYSAqICdhIC0+IG9yZGVyKSAtPiAnYSBsaXN0ICogJ2EgbGlzdCAtPiBvcmRlcgogICAgICAgIGVuZDsKCiAgICAgICAgc3RydWN0dXJlIExpc3QgOiBzaWcKICAgICAgICAgICAgZGF0YXR5cGUgJ2EgbGlzdCA9IG5pbCB8IDo6IG9mICdhICogJ2EgbGlzdDsKICAgICAgICAgICAgdmFsIHJldjogJ2EgbGlzdCAtPiAnYSBsaXN0OwogICAgICAgIGVuZCAgPSBzdHJ1Y3QKICAgICAgICAgICAgb3BlbiBMaXN0OwogICAgICAgICAgICBmdW4gcmV2JyBuaWwgeXMgICAgID0geXMKICAgICAgICAgICAgICB8IHJldicgKHg6OnhzKSB5cyA9IHJldicgeHMgKHg6OnlzKQogICAgICAgICAgICBmdW4gcmV2IHhzID0gcmV2JyB4cyBuaWw7CiAgICAgICAgZW5kOwoKICAgICAgICBzdHJ1Y3R1cmUgTGlzdCA9IHN0cnVjdAogICAgICAgICAgICBleGNlcHRpb24gRW1wdHk7CiAgICAgICAgICAgIG9wZW4gTGlzdDsKCiAgICAgICAgICAgIGZ1biBoZCBuaWwgPSByYWlzZSBFbXB0eQogICAgICAgICAgICAgIHwgaGQgKHg6OnhyKSA9IHg7CgogICAgICAgICAgICBmdW4gdGwgbmlsID0gcmFpc2UgRW1wdHkKICAgICAgICAgICAgICB8IHRsICh4Ojp4cikgPSB4cjsKCiAgICAgICAgICAgIGZ1biBudWxsIG5pbCA9IHRydWUKICAgICAgICAgICAgICB8IG51bGwgKHg6OnhyKSA9IGZhbHNlOwoKICAgICAgICAgICAgZnVuIG1hcCBmIG5pbCA9IG5pbAogICAgICAgICAgICAgIHwgbWFwIGYgKHg6OnhyKSA9IChmIHgpIDo6IChtYXAgZiB4cik7CgogICAgICAgICAgICBpbmZpeHIgNSBAOwogICAgICAgICAgICBmdW4gW10gQCB5cyA9IHlzCiAgICAgICAgICAgICAgfCAoeDo6eHIpIEAgeXMgPSB4IDo6ICh4ciBAIHlzKTsKCiAgICAgICAgICAgIGZ1biBsZW5ndGggbmlsID0gMAogICAgICAgICAgICAgIHwgbGVuZ3RoICh4Ojp4cikgPSAxICsgbGVuZ3RoIHhyOwoKICAgICAgICAgICAgZnVuIGZvbGRyIGYgZSBbXSAgICAgID0gZQogICAgICAgICAgICAgIHwgZm9sZHIgZiBlICh4Ojp4cikgPSBmKHgsIGZvbGRyIGYgZSB4cik7CgogICAgICAgICAgICBmdW4gZm9sZGwgZiBlIFtdICAgICAgPSBlCiAgICAgICAgICAgICAgfCBmb2xkbCBmIGUgKHg6OnhyKSA9IGZvbGRsIGYgKGYoeCwgZSkpIHhyOwoKICAgICAgICAgICAgZnVuIGFwcCAoZjogJ2EgLT4gdW5pdCkgW10gPSAoKQogICAgICAgICAgICAgIHwgYXBwIChmOiAnYSAtPiB1bml0KSAoeDo6eHMpID0gKGYgeDsgYXBwIGYgeHMpOwogICAgICAgIGVuZDsKICAgICAgICBvcGVuIExpc3Q7CiAgICAgICAgaW5maXhyIDUgQDsKCiAgICAgICAgc3RydWN0dXJlIExpc3QgOiBMSVNUID0gc3RydWN0CiAgICAgICAgICAgIG9wZW4gTGlzdDsKCiAgICAgICAgICAgIGZ1biBjb25jYXQgbmlsID0gbmlsCiAgICAgICAgICAgICAgfCBjb25jYXQgKHg6OnhyKSA9IHggQCBjb25jYXQgeHI7CgogICAgICAgICAgICBmdW4gdGFidWxhdGUgKG4sIGYpID0gbGV0CiAgICAgICAgICAgICAgICBmdW4gaCBpID0gaWYgaSA8IG4gdGhlbiBmIGkgOjogaCAoaSArIDEpIGVsc2UgW10KICAgICAgICAgICAgaW4KICAgICAgICAgICAgICAgIGlmIG4gPCAwIHRoZW4gcmFpc2UgU2l6ZSBlbHNlIGggMAogICAgICAgICAgICBlbmQ7CgogICAgICAgICAgICBmdW4gZXhpc3RzIHAgW10gICAgICA9IGZhbHNlCiAgICAgICAgICAgICAgfCBleGlzdHMgcCAoeDo6eHIpID0gcCB4IG9yZWxzZSBleGlzdHMgcCB4cjsKCiAgICAgICAgICAgIGZ1biBhbGwgcCBbXSAgICAgID0gdHJ1ZQogICAgICAgICAgICAgIHwgYWxsIHAgKHg6OnhyKSA9IHAgeCBhbmRhbHNvIGFsbCBwIHhyOwoKICAgICAgICAgICAgZnVuIGZpbHRlciBwIFtdICAgICAgPSBbXQogICAgICAgICAgICAgIHwgZmlsdGVyIHAgKHg6OnhyKSA9IGlmIHAgeCB0aGVuIHggOjogZmlsdGVyIHAgeHIgZWxzZSBmaWx0ZXIgcCB4cjsKCiAgICAgICAgICAgIGZ1biBjb2xsYXRlIChjb21wYXJlIDogJ2EgKiAnYSAtPiBvcmRlcikgcCA9IGNhc2UgcCBvZgogICAgICAgICAgICAgICAgKG5pbCwgXzo6XykgICAgID0+IExFU1MKICAgICAgICAgICAgICB8IChuaWwsIG5pbCkgICAgICA9PiBFUVVBTAogICAgICAgICAgICAgIHwgKF86Ol8sIG5pbCkgICAgID0+IEdSRUFURVIKICAgICAgICAgICAgICB8ICh4Ojp4ciwgeTo6eXIpICA9PiBjYXNlIGNvbXBhcmUgKHgsIHkpIG9mCiAgICAgICAgICAgICAgICAgICAgIEVRVUFMICA9PiBjb2xsYXRlIGNvbXBhcmUgKHhyLCB5cikKICAgICAgICAgICAgICAgICAgIHwgcyAgICAgID0+IHM7CgogICAgICAgICAgICBmdW4gbnRoIChbXSwgXykgICAgPSByYWlzZSBTdWJzY3JpcHQKICAgICAgICAgICAgICB8IG50aCAoeDo6eHMsIDApID0geAogICAgICAgICAgICAgIHwgbnRoICh4Ojp4cywgbikgPSBudGggKHhzLCBuIC0gMSk7CgogICAgICAgICAgICBmdW4gbGFzdCBbeF0gPSB4CiAgICAgICAgICAgICAgfCBsYXN0ICh4Ojp4cykgPSBsYXN0IHhzCiAgICAgICAgICAgICAgfCBsYXN0IFtdID0gcmFpc2UgRW1wdHk7CgogICAgICAgICAgICBmdW4gZ2V0SXRlbSBbXSA9IE5PTkUKICAgICAgICAgICAgICB8IGdldEl0ZW0geCA9IFNPTUUgKGhkIHgsIHRsIHgpOwoKICAgICAgICAgICAgZnVuIHRha2UgKHgsIDApID0gW10KICAgICAgICAgICAgICB8IHRha2UgKFtdLCBfKSA9IHJhaXNlIFN1YnNjcmlwdAogICAgICAgICAgICAgIHwgdGFrZSAoeDo6eHMsIG4pID0geCA6OiB0YWtlICh4cywgbiAtIDEpOwoKICAgICAgICAgICAgZnVuIGRyb3AgKHgsIDApID0geAogICAgICAgICAgICAgIHwgZHJvcCAoW10sIF8pID0gcmFpc2UgU3Vic2NyaXB0CiAgICAgICAgICAgICAgfCBkcm9wICh4Ojp4cywgbikgPSBkcm9wICh4cywgbiAtIDEpOwoKICAgICAgICAgICAgZnVuIHJldkFwcGVuZCAobDEsIGwyKSA9IChyZXYgbDEpIEAgbDI7CgogICAgICAgICAgICBmdW4gbWFwUGFydGlhbCBmIGwKICAgICAgICAgICAgICAgID0gKChtYXAgdmFsT2YpIG8gKGZpbHRlciBpc1NvbWUpIG8gKG1hcCBmKSkgbDsKCiAgICAgICAgICAgIGZ1biBwZXJtdXRhdGlvbnMgeCA9IGxldAogICAgICAgICAgICAgICAgZnVuIHAyIGEgW10gPSBbIGEgXQogICAgICAgICAgICAgICAgICB8IHAyIGEgW3hdID0gbWFwIChmbiB5ID0+IHg6OnkpICggcDIgW10gYSApCiAgICAgICAgICAgICAgICAgIHwgcDIgYSAoeDo6eHMpID0gKCBtYXAgKCBmbiB5ID0+IHg6OnkgKSAocDIgW10gKGFAeHMpKSkgQCAocDIgKGEgQCBbeF0pIHhzICkKICAgICAgICAgICAgaW4KICAgICAgICAgICAgICAgIHAyIFtdIHgKICAgICAgICAgICAgZW5kOwoKICAgICAgICAgICAgZnVuIGZpbmQgZiBbXSA9IE5PTkUKICAgICAgICAgICAgICB8IGZpbmQgZiAoeDo6eHMpID0gaWYgZiB4IHRoZW4gU09NRSB4IGVsc2UgZmluZCBmIHhzOwoKICAgICAgICAgICAgZnVuIHBhcnRpdGlvbiBmIFtdID0gKFtdLCBbXSkKICAgICAgICAgICAgICB8IHBhcnRpdGlvbiBmICh4Ojp4cykgPSBsZXQKICAgICAgICAgICAgICAgIHZhbCB0bXAgPSBwYXJ0aXRpb24gZiB4cwogICAgICAgICAgICBpbgogICAgICAgICAgICAgICAgaWYgZiB4IHRoZW4gKHggOjogIzEgdG1wLCAjMiB0bXApCiAgICAgICAgICAgICAgICBlbHNlICgjMSB0bXAsIHggOjogIzIgdG1wKQogICAgICAgICAgICBlbmQ7CiAgICAgICAgZW5kOwogICAgYCxyZXF1aXJlczpbIk9wdGlvbiJdfX0sMjQ1OihmZSx1KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LkxJU1RTT1JUX0xJQj12b2lkIDAsdS5MSVNUU09SVF9MSUI9e25hdGl2ZTp2b2lkIDAsY29kZTpgc3RydWN0dXJlIExpc3Rzb3J0IDogc2lnCiAgICAgICAgICAgIHZhbCBzb3J0OiAoJ2EgKiAnYSAtPiBvcmRlcikgLT4gJ2EgbGlzdCAtPiAnYSBsaXN0OwogICAgICAgICAgICB2YWwgc29ydGVkOiAoJ2EgKiAnYSAtPiBvcmRlcikgLT4gJ2EgbGlzdCAtPiBib29sOwogICAgICAgICAgICB2YWwgbWVyZ2VVbmlxOiAoJ2EgKiAnYSAtPiBvcmRlcikgLT4gJ2EgbGlzdCAqICdhIGxpc3QgLT4gJ2EgbGlzdDsKICAgICAgICAgICAgdmFsIG1lcmdlOiAoJ2EgKiAnYSAtPiBvcmRlcikgLT4gJ2EgbGlzdCAqICdhIGxpc3QgLT4gJ2EgbGlzdDsKICAgICAgICAgICAgdmFsIGVxY2xhc3NlczogKCdhICogJ2EgLT4gb3JkZXIpIC0+ICdhIGxpc3QgLT4gJ2EgbGlzdCBsaXN0OwogICAgICAgIGVuZCA9IHN0cnVjdAogICAgICAgICAgZnVuIHRha2Ugb3JkciB4MSB4ciBbXSAgICAgICA9IHgxIDo6IHhyCiAgICAgICAgICAgIHwgdGFrZSBvcmRyIHgxIHhyICh5MTo6eXIpID0gKGNhc2Ugb3Jkcih4MSwgeTEpIG9mCiAgICAgICAgICAgICAgICBMRVNTICAgID0+IHgxIDo6IHRha2Ugb3JkciB5MSB5ciB4cgogICAgICAgICAgICAgIHwgXyAgICAgICA9PiB5MSA6OiB0YWtlIG9yZHIgeDEgeHIgeXIpOwoKICAgICAgICAgIGZ1biB0YWtlVW5pcSBvcmRyIHgxIHhyIFtdICAgICAgID0geDEgOjogeHIKICAgICAgICAgICAgfCB0YWtlVW5pcSBvcmRyIHgxIHhyICh5MTo6eXIpID0gKGNhc2Ugb3Jkcih4MSwgeTEpIG9mCiAgICAgICAgICAgICAgICBMRVNTICAgID0+IHgxIDo6IHRha2VVbmlxIG9yZHIgeTEgeXIgeHIKICAgICAgICAgICAgICB8IEdSRUFURVIgPT4geTEgOjogdGFrZVVuaXEgb3JkciB4MSB4ciB5cgogICAgICAgICAgICAgIHwgRVFVQUwgICA9PiB0YWtlVW5pcSBvcmRyIHgxIHhyIHlyKTsKCiAgICAgICAgICBmdW4gbWVyZ2Ugb3JkciAoW10sICAgICB5cykgPSB5cwogICAgICAgICAgICB8IG1lcmdlIG9yZHIgKHgxOjp4ciwgeXMpID0gdGFrZSBvcmRyIHgxIHhyIHlzOwoKICAgICAgICAgIGZ1biBtZXJnZVVuaXEgb3JkciAoW10sICAgICB5cykgPSB5cwogICAgICAgICAgICB8IG1lcmdlVW5pcSBvcmRyICh4MTo6eHIsIHlzKSA9IHRha2VVbmlxIG9yZHIgeDEgeHIgeXM7CgogICAgICAgICAgZnVuIG1lcmdlcGFpcnMgb3JkciBsMSAgW10gayAgICAgICAgICAgICAgPSBbbDFdCiAgICAgICAgICAgIHwgbWVyZ2VwYWlycyBvcmRyIGwxIChsMjo6bHIpIGsgPQogICAgICAgICAgICAgIGlmIGsgbW9kIDIgPSAxIHRoZW4gbDE6OmwyOjpscgogICAgICAgICAgICAgIGVsc2UgbWVyZ2VwYWlycyBvcmRyIChtZXJnZSBvcmRyIChsMSwgbDIpKSBsciAoayBkaXYgMik7CgogICAgICAgICAgZnVuIG5leHRydW4gb3JkciBydW4gW10gICAgICA9IChydW4sIFtdKQogICAgICAgICAgICB8IG5leHRydW4gb3JkciBydW4gKHg6OnhyKSA9CiAgICAgICAgICAgICAgaWYgb3Jkcih4LCBMaXN0LmhkIHJ1bikgPSBMRVNTIHRoZW4gKHJ1biwgeDo6eHIpCiAgICAgICAgICAgICAgZWxzZSBuZXh0cnVuIG9yZHIgKHg6OnJ1bikgeHI7CgogICAgICAgICAgZnVuIHNvcnRpbmcgb3JkciBbXSAgICAgIGxzIHIgPSBMaXN0LmhkKG1lcmdlcGFpcnMgb3JkciBbXSBscyAwKQogICAgICAgICAgICB8IHNvcnRpbmcgb3JkciAoeDo6eHMpIGxzIHIgPSBsZXQKICAgICAgICAgICAgICAgIHZhbCAocmV2cnVuLCB0YWlsKSA9IG5leHRydW4gb3JkciBbeF0geHMKICAgICAgICAgICAgICBpbgogICAgICAgICAgICAgICAgc29ydGluZyBvcmRyIHRhaWwgKG1lcmdlcGFpcnMgb3JkciAoTGlzdC5yZXYgcmV2cnVuKSBscyAocisxKSkgKHIrMSkKICAgICAgICAgICAgICBlbmQ7CgogICAgICAgICAgZnVuIGdyb3VwIG9yZHIgbGFzdCByZXN0IGNzMSBjc3MgPSBjYXNlIHJlc3Qgb2YKICAgICAgICAgICAgICBbXSAgICAgPT4gY3MxIDo6IGNzcwogICAgICAgICAgICB8IHIxOjpyciA9PiBpZiBvcmRyKHIxLCBsYXN0KSA9IEVRVUFMIHRoZW4gZ3JvdXAgb3JkciByMSByciAocjEgOjogY3MxKSBjc3MKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBncm91cCBvcmRyIHIxIHJyIFtyMV0gKGNzMSA6OiBjc3MpOwoKICAgICAgICAgIGZ1biBzb3J0IG9yZHIgW10gICAgICAgICAgICAgICA9IFtdCiAgICAgICAgICAgIHwgc29ydCBvcmRyIFt4XSAgICAgICAgICAgICAgPSBbeF0KICAgICAgICAgICAgfCBzb3J0IG9yZHIgW3gxLCB4Ml0gICAgICAgICA9IChjYXNlIG9yZHIoeDEsIHgyKSBvZgogICAgICAgICAgICAgICAgR1JFQVRFUiA9PiBbeDIsIHgxXQogICAgICAgICAgICAgIHwgXyAgICAgICA9PiBbeDEsIHgyXSkKICAgICAgICAgICAgfCBzb3J0IG9yZHIgeHMgPSBzb3J0aW5nIG9yZHIgeHMgW10gMDsKCiAgICAgICAgICBmdW4gc29ydGVkIG9yZHIgW10gICAgICAgICAgID0gdHJ1ZQogICAgICAgICAgICB8IHNvcnRlZCBvcmRyIFt4XSAgICAgICAgICA9IHRydWUKICAgICAgICAgICAgfCBzb3J0ZWQgb3JkciAoeDE6OngyOjp4cikgPQogICAgICAgICAgICAgIG9yZHIoeDEsIHgyKSA8PiBHUkVBVEVSIGFuZGFsc28gc29ydGVkIG9yZHIgKHgyOjp4cik7CgogICAgICAgICAgZnVuIGVxY2xhc3NlcyBvcmRyIHhzID0gbGV0CiAgICAgICAgICAgICAgdmFsIHhzID0gTGlzdC5yZXYgKHNvcnQgb3JkciB4cykKICAgICAgICAgICAgaW4KICAgICAgICAgICAgICBjYXNlIHhzIG9mCiAgICAgICAgICAgICAgICAgIFtdICAgICA9PiBbXQogICAgICAgICAgICAgICAgfCB4MTo6eHIgPT4gZ3JvdXAgb3JkciB4MSB4ciBbeDFdIFtdCiAgICAgICAgICAgICAgZW5kOwogICAgICAgIGVuZDsKICAgICAgICBzdHJ1Y3R1cmUgTGlzdCA9IHN0cnVjdAogICAgICAgICAgICBvcGVuIExpc3Q7CiAgICAgICAgICAgIG9wZW4gTGlzdHNvcnQ7CiAgICAgICAgZW5kO2AscmVxdWlyZXM6WyJMaXN0Il19fSw3OTA6KGZlLHUsSyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5NQVRIX0xJQj12b2lkIDA7dmFyIG09SygzNjcpLGc9Syg2OTkpLHM9SygxMDYpLHE9Syg3NTgpLEI9SygxOTcpO3UuTUFUSF9MSUI9e25hdGl2ZTpmdW5jdGlvbihNKXt2YXIgVj1uZXcgbS5EeW5hbWljQmFzaXMoe30se30se30se30se30pLEQ9bmV3IG0uU3RhdGljQmFzaXMoe30se30se30se30se30pO3JldHVybiBWLnNldFZhbHVlKCJzcXJ0IixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oInNxcnQiLGZ1bmN0aW9uKGgsQSl7aWYoaCBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEk9aC52YWx1ZTtyZXR1cm4gSTwwP1tCLmRvbWFpbkV4Y2VwdGlvbi5jb25zdHJ1Y3QoKSwhMCxbXV06W25ldyBzLlJlYWwoTWF0aC5zcXJ0KEkpKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJzcXJ0IixuZXcgZy5GdW5jdGlvblR5cGUoQi5yZWFsVHlwZSxCLnJlYWxUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoInNpbiIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJzaW4iLGZ1bmN0aW9uKGgsQSl7aWYoaCBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEk9aC52YWx1ZTtyZXR1cm5bbmV3IHMuUmVhbChNYXRoLnNpbihJKSksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgic2luIixuZXcgZy5GdW5jdGlvblR5cGUoQi5yZWFsVHlwZSxCLnJlYWxUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImNvcyIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJjb3MiLGZ1bmN0aW9uKGgsQSl7aWYoaCBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEk9aC52YWx1ZTtyZXR1cm5bbmV3IHMuUmVhbChNYXRoLmNvcyhJKSksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgiY29zIixuZXcgZy5GdW5jdGlvblR5cGUoQi5yZWFsVHlwZSxCLnJlYWxUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoInRhbiIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJ0YW4iLGZ1bmN0aW9uKGgsQSl7aWYoaCBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEk9aC52YWx1ZTtyZXR1cm5bbmV3IHMuUmVhbChNYXRoLnRhbihJKSksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgidGFuIixuZXcgZy5GdW5jdGlvblR5cGUoQi5yZWFsVHlwZSxCLnJlYWxUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImFzaW4iLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiYXNpbiIsZnVuY3Rpb24oaCxBKXtpZihoIGluc3RhbmNlb2Ygcy5SZWFsKXt2YXIgST1oLnZhbHVlO3JldHVybltuZXcgcy5SZWFsKE1hdGguYXNpbihJKSksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgiYXNpbiIsbmV3IGcuRnVuY3Rpb25UeXBlKEIucmVhbFR5cGUsQi5yZWFsVHlwZSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJhY29zIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImFjb3MiLGZ1bmN0aW9uKGgsQSl7aWYoaCBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEk9aC52YWx1ZTtyZXR1cm5bbmV3IHMuUmVhbChNYXRoLmFjb3MoSSkpLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoImFjb3MiLG5ldyBnLkZ1bmN0aW9uVHlwZShCLnJlYWxUeXBlLEIucmVhbFR5cGUpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgiYXRhbiIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJhdGFuIixmdW5jdGlvbihoLEEpe2lmKGggaW5zdGFuY2VvZiBzLlJlYWwpe3ZhciBJPWgudmFsdWU7cmV0dXJuW25ldyBzLlJlYWwoTWF0aC5hdGFuKEkpKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJhdGFuIixuZXcgZy5GdW5jdGlvblR5cGUoQi5yZWFsVHlwZSxCLnJlYWxUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImF0YW4yIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImF0YW4yIixmdW5jdGlvbihoLEEpe2lmKGggaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlKXt2YXIgST1oLmdldFZhbHVlKCIxIiksTz1oLmdldFZhbHVlKCIyIik7aWYoSSBpbnN0YW5jZW9mIHMuUmVhbCYmTyBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEU9SS52YWx1ZSxyPU8udmFsdWU7cmV0dXJuW25ldyBzLlJlYWwoTWF0aC5hdGFuMihFLHIpKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgiYXRhbjIiLG5ldyBnLkZ1bmN0aW9uVHlwZShuZXcgZy5UdXBsZVR5cGUoW0IucmVhbFR5cGUsQi5yZWFsVHlwZV0pLEIucmVhbFR5cGUpLnNpbXBsaWZ5KCksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJleHAiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiZXhwIixmdW5jdGlvbihoLEEpe2lmKGggaW5zdGFuY2VvZiBzLlJlYWwpe3ZhciBJPWgudmFsdWU7cmV0dXJuW25ldyBzLlJlYWwoTWF0aC5leHAoSSkpLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoImV4cCIsbmV3IGcuRnVuY3Rpb25UeXBlKEIucmVhbFR5cGUsQi5yZWFsVHlwZSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJwb3ciLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigicG93IixmdW5jdGlvbihoLEEpe2lmKGggaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlKXt2YXIgST1oLmdldFZhbHVlKCIxIiksTz1oLmdldFZhbHVlKCIyIik7aWYoSSBpbnN0YW5jZW9mIHMuUmVhbCYmTyBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEU9SS52YWx1ZSxyPU8udmFsdWU7cmV0dXJuW25ldyBzLlJlYWwoTWF0aC5wb3coRSxyKSksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoInBvdyIsbmV3IGcuRnVuY3Rpb25UeXBlKG5ldyBnLlR1cGxlVHlwZShbQi5yZWFsVHlwZSxCLnJlYWxUeXBlXSksQi5yZWFsVHlwZSkuc2ltcGxpZnkoKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImxuIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImxuIixmdW5jdGlvbihoLEEpe2lmKGggaW5zdGFuY2VvZiBzLlJlYWwpe3ZhciBJPWgudmFsdWU7cmV0dXJuW25ldyBzLlJlYWwoTWF0aC5sb2coSSkpLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoImxuIixuZXcgZy5GdW5jdGlvblR5cGUoQi5yZWFsVHlwZSxCLnJlYWxUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImxvZzEwIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImxvZzEwIixmdW5jdGlvbihoLEEpe2lmKGggaW5zdGFuY2VvZiBzLlJlYWwpe3ZhciBJPWgudmFsdWU7cmV0dXJuW25ldyBzLlJlYWwoTWF0aC5sb2cxMChJKSksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgibG9nMTAiLG5ldyBnLkZ1bmN0aW9uVHlwZShCLnJlYWxUeXBlLEIucmVhbFR5cGUpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgic2luaCIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJzaW5oIixmdW5jdGlvbihoLEEpe2lmKGggaW5zdGFuY2VvZiBzLlJlYWwpe3ZhciBJPWgudmFsdWU7cmV0dXJuW25ldyBzLlJlYWwoTWF0aC5zaW5oKEkpKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJzaW5oIixuZXcgZy5GdW5jdGlvblR5cGUoQi5yZWFsVHlwZSxCLnJlYWxUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImNvc2giLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiY29zaCIsZnVuY3Rpb24oaCxBKXtpZihoIGluc3RhbmNlb2Ygcy5SZWFsKXt2YXIgST1oLnZhbHVlO3JldHVybltuZXcgcy5SZWFsKE1hdGguY29zaChJKSksITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgiY29zaCIsbmV3IGcuRnVuY3Rpb25UeXBlKEIucmVhbFR5cGUsQi5yZWFsVHlwZSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJ0YW5oIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oInRhbmgiLGZ1bmN0aW9uKGgsQSl7aWYoaCBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEk9aC52YWx1ZTtyZXR1cm5bbmV3IHMuUmVhbChNYXRoLnRhbmgoSSkpLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoInRhbmgiLG5ldyBnLkZ1bmN0aW9uVHlwZShCLnJlYWxUeXBlLEIucmVhbFR5cGUpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgicGkiLG5ldyBzLlJlYWwoMy4xNDE1OTI2NTM1OSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJwaSIsQi5yZWFsVHlwZSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImUiLG5ldyBzLlJlYWwoMi43MTgyODE4Mjg0NiksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJlIixCLnJlYWxUeXBlLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksTS5zZXREeW5hbWljU3RydWN0dXJlKCJNYXRoIixWKSxNLnNldFN0YXRpY1N0cnVjdHVyZSgiTWF0aCIsRCksTX0sY29kZTpgc2lnbmF0dXJlIE1BVEggPSBzaWcKICAgICAgICAoKiB0eXBlIHJlYWwgKikKICAgICAgICB2YWwgcGkgOiByZWFsCiAgICAgICAgdmFsIGUgOiByZWFsCiAgICAgICAgdmFsIHNxcnQgOiByZWFsIC0+IHJlYWwKICAgICAgICB2YWwgc2luIDogcmVhbCAtPiByZWFsCiAgICAgICAgdmFsIGNvcyA6IHJlYWwgLT4gcmVhbAogICAgICAgIHZhbCB0YW4gOiByZWFsIC0+IHJlYWwKICAgICAgICB2YWwgYXNpbiA6IHJlYWwgLT4gcmVhbAogICAgICAgIHZhbCBhY29zIDogcmVhbCAtPiByZWFsCiAgICAgICAgdmFsIGF0YW4gOiByZWFsIC0+IHJlYWwKICAgICAgICB2YWwgYXRhbjIgOiByZWFsICogcmVhbCAtPiByZWFsCiAgICAgICAgdmFsIGV4cCA6IHJlYWwgLT4gcmVhbAogICAgICAgIHZhbCBwb3cgOiByZWFsICogcmVhbCAtPiByZWFsCiAgICAgICAgdmFsIGxuICAgIDogcmVhbCAtPiByZWFsCiAgICAgICAgdmFsIGxvZzEwIDogcmVhbCAtPiByZWFsCiAgICAgICAgdmFsIHNpbmggOiByZWFsIC0+IHJlYWwKICAgICAgICB2YWwgY29zaCA6IHJlYWwgLT4gcmVhbAogICAgICAgIHZhbCB0YW5oIDogcmVhbCAtPiByZWFsCiAgICBlbmQ7CgogICAgc3RydWN0dXJlIE1hdGggOj4gTUFUSCA9IHN0cnVjdAogICAgICAgIG9wZW4gTWF0aDsKICAgIGVuZDtgLHJlcXVpcmVzOnZvaWQgMH19LDc0MjooZmUsdSxLKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LlJBTkRPTV9MSUI9dm9pZCAwO3ZhciBtPUsoMzY3KSxnPUsoNjk5KSxzPUsoMTA2KSxxPUsoMTk3KTt1LlJBTkRPTV9MSUI9e25hdGl2ZTpmdW5jdGlvbihCKXt2YXIgTT1uZXcgbS5EeW5hbWljQmFzaXMoe30se30se30se30se30pLFY9bmV3IG0uU3RhdGljQmFzaXMoe30se30se30se30se30pO3JldHVybiBNLnNldFZhbHVlKCJkYXRlIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oInRvU3RyaW5nIixmdW5jdGlvbihELGgpe3JldHVybltuZXcgcy5JbnRlZ2VyKG5ldyBEYXRlKCkuZ2V0TWlsbGlzZWNvbmRzKCkrbmV3IERhdGUoKS5nZXRTZWNvbmRzKCkpLCExLFtdXX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgiZGF0ZSIsbmV3IGcuRnVuY3Rpb25UeXBlKG5ldyBnLlR1cGxlVHlwZShbXSkuc2ltcGxpZnkoKSxxLmludFR5cGUpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksQi5zZXREeW5hbWljU3RydWN0dXJlKCJSYW5kb20iLE0pLEIuc2V0U3RhdGljU3RydWN0dXJlKCJSYW5kb20iLFYpLEJ9LGNvZGU6YHNpZ25hdHVyZSBSQU5ET00gPSBzaWcKICAgICAgICB0eXBlIHJhbmQ7CgogICAgICAgIHZhbCByYW5kU2VlZDogcmVhbCAtPiByYW5kOwogICAgICAgIHZhbCByYW5kOiB1bml0IC0+IHJhbmQ7CiAgICAgICAgKCogdmFsIHRvU3RyaW5nIDogcmFuZCAtPiBzdHJpbmc7ICopCiAgICAgICAgKCogdmFsIGZyb21TdHJpbmcgOiBzdHJpbmcgLT4gcmFuZDsgKikKCiAgICAgICAgdmFsIHJhbmRSZWFsOiByYW5kIC0+IHJlYWw7CiAgICAgICAgdmFsIHJhbmRSZWFsTGlzdDogaW50ICogcmFuZCAtPiByZWFsIGxpc3Q7CiAgICAgICAgdmFsIHJhbmRSYW5nZTogaW50ICogaW50IC0+IHJhbmQgLT4gaW50OwogICAgICAgIHZhbCByYW5kUmFuZ2VMaXN0OiBpbnQgKiBpbnQgLT4gaW50ICogcmFuZCAtPiBpbnQgbGlzdDsKICAgIGVuZDsKCiAgICBzdHJ1Y3R1cmUgUmFuZG9tIDo+IFJBTkRPTSA9IHN0cnVjdAogICAgICAgICgqIG1vc21sIHJhbmRvbSAqKQogICAgICAgIG9wZW4gUmFuZG9tOwoKICAgICAgICB0eXBlIHJhbmQgPSB7c2VlZHJlZiA6IHJlYWwgcmVmfTsKCiAgICAgICAgdmFsIGEgPSAxNjgwNy4wOwogICAgICAgIHZhbCBtID0gMjE0NzQ4MzY0Ny4wOwoKICAgICAgICBmdW4gbmV4dHJhbmQgc2VlZCA9IGxldAogICAgICAgICAgICB2YWwgdCA9IGEqc2VlZAogICAgICAgIGluCiAgICAgICAgICAgIHQgLSBtICogUmVhbC5mcm9tSW50KFJlYWwuZmxvb3IodC9tKSkKICAgICAgICBlbmQ7CgogICAgICAgIGZ1biByYW5kU2VlZCBzZWVkID0gaWYKICAgICAgICAgICAgc2VlZCA+IDAuMCBvcmVsc2Ugc2VlZCA8IDAuMAogICAgICAgIHRoZW4KICAgICAgICAgICAge3NlZWRyZWYgPSByZWYgKG5leHRyYW5kIHNlZWQpfQogICAgICAgIGVsc2UKICAgICAgICAgICAgcmFpc2UgRmFpbCAiUmFuZG9tLnJhbmRTZWVkOiBiYWQgc2VlZCAwLjAiOwoKICAgICAgICAoKiBmdW4gdG9TdHJpbmcge3NlZWRyZWZ9ID0gSW50LnRvU3RyaW5nIChSZWFsLnJvdW5kICghc2VlZHJlZikpOyAqKQogICAgICAgICgqIGZ1biBmcm9tU3RyaW5nIHMgPSBjYXNlIEludC5mcm9tU3RyaW5nIHMgb2YKICAgICAgICAgICAgTk9ORSA9PiByYWlzZSBGYWlsICJSYW5kb20uZnJvbVN0cmluZzogZ2l2ZW4gc3RyaW5nIGlzIGludmFsaWQiCiAgICAgICAgICAgIHwgU09NRSAwID0+IHJhaXNlIEZhaWwgIlJhbmRvbS5mcm9tU3RyaW5nOiBnaXZlbiBzdHJpbmcgaXMgaW52YWxpZCIKICAgICAgICAgICAgfCBTT01FIHggPT4ge3NlZWRyZWYgPSByZWYgKFJlYWwuZnJvbUludCB4KX07ICopCgogICAgICAgIGZ1biByYW5kICgpID0gcmFuZFNlZWQgKFJlYWwuZnJvbUludCAoZGF0ZSAoKSkpOwoKICAgICAgICBmdW4gcmFuZFJlYWwge3NlZWRyZWZ9ID0gKHNlZWRyZWYgOj0gbmV4dHJhbmQgKCFzZWVkcmVmKTsgIXNlZWRyZWYgLyBtKTsKCiAgICAgICAgZnVuIHJhbmRSZWFsTGlzdCAobiwge3NlZWRyZWZ9KSA9IGxldAogICAgICAgICAgICBmdW4gaCAwIHNlZWQgcmVzID0gKHNlZWRyZWYgOj0gc2VlZDsgcmVzKQogICAgICAgICAgICAgIHwgaCBpIHNlZWQgcmVzID0gaCAoaS0xKSAobmV4dHJhbmQgc2VlZCkgKHNlZWQgLyBtIDo6IHJlcykKICAgICAgICBpbgogICAgICAgICAgICBoIG4gKCFzZWVkcmVmKSBbXQogICAgICAgIGVuZDsKCiAgICAgICAgZnVuIHJhbmRSYW5nZSAobWluLCBtYXgpID0gaWYgbWluID49IG1heCB0aGVuIHJhaXNlIEZhaWwgIlJhbmRvbS5yYW5kUmFuZ2U6IGVtcHR5IHJhbmdlIiBlbHNlIGxldAogICAgICAgICAgICB2YWwgc2NhbGUgPSAoUmVhbC5mcm9tSW50IG1heCAtIFJlYWwuZnJvbUludCBtaW4pIC8gbQogICAgICAgIGluCiAgICAgICAgICAgIGZuIHtzZWVkcmVmfSA9PgogICAgICAgICAgICAgICAgKHNlZWRyZWYgOj0gbmV4dHJhbmQgKCFzZWVkcmVmKTsgUmVhbC5mbG9vcihSZWFsLmZyb21JbnQgbWluICsgc2NhbGUgKiAoIXNlZWRyZWYpKSkKICAgICAgICBlbmQ7CgogICAgICAgIGZ1biByYW5kUmFuZ2VMaXN0IChtaW4sIG1heCkgPSBpZiBtaW4gPj0gbWF4IHRoZW4gcmFpc2UgRmFpbCAiUmFuZG9tLnJhbmRSYW5nZUxpc3Q6IGVtcHR5IHJhbmdlIgogICAgICAgIGVsc2UgbGV0CiAgICAgICAgICAgIHZhbCBzY2FsZSA9IChSZWFsLmZyb21JbnQgbWF4IC0gUmVhbC5mcm9tSW50IG1pbikgLyBtCiAgICAgICAgaW4KICAgICAgICAgICAgZm4gKG4sIHtzZWVkcmVmfSkgPT4gbGV0CiAgICAgICAgICAgICAgICBmdW4gaCAwIHNlZWQgcmVzID0gKHNlZWRyZWYgOj0gc2VlZDsgcmVzKQogICAgICAgICAgICAgICAgICB8IGggaSBzZWVkIHJlcyA9IGggKGktMSkgKG5leHRyYW5kIHNlZWQpCiAgICAgICAgICAgICAgICAgICAgKFJlYWwuZmxvb3IoUmVhbC5mcm9tSW50IG1pbiArIHNjYWxlICogc2VlZCkgOjogcmVzKQogICAgICAgICAgICBpbgogICAgICAgICAgICAgICAgaCBuICghc2VlZHJlZikgW10KICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kOwogICAgZW5kO2AscmVxdWlyZXM6WyJSZWFsIl19fSw5Mjg6KGZlLHUsSyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5SRUFMX0xJQj12b2lkIDA7dmFyIG09SygzNjcpLGc9Syg2OTkpLHM9SygxMDYpLHE9Syg3NTgpLEI9SygxOTcpO3UuUkVBTF9MSUI9e25hdGl2ZTpmdW5jdGlvbihNKXt2YXIgVj1uZXcgbS5EeW5hbWljQmFzaXMoe30se30se30se30se30pLEQ9bmV3IG0uU3RhdGljQmFzaXMoe30se30se30se30se30pO3JldHVybiBWLnNldFZhbHVlKCJmcm9tSW50IixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oImZyb21JbnQiLGZ1bmN0aW9uKGgsQSl7aWYoaCBpbnN0YW5jZW9mIHMuSW50ZWdlcil7dmFyIEk9aC52YWx1ZTtyZXR1cm5bbmV3IHMuUmVhbChJKSwhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJmcm9tSW50IixuZXcgZy5GdW5jdGlvblR5cGUoQi5pbnRUeXBlLEIucmVhbFR5cGUpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgicm91bmQiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigicm91bmQiLGZ1bmN0aW9uKGgsQSl7aWYoaCBpbnN0YW5jZW9mIHMuUmVhbCl7dmFyIEk9aC52YWx1ZSxPPW5ldyBzLkludGVnZXIoTWF0aC5yb3VuZChJKSk7cmV0dXJuIE8uaGFzT3ZlcmZsb3coKT9bQi5vdmVyZmxvd0V4Y2VwdGlvbi5jb25zdHJ1Y3QoKSwhMCxbXV06W08sITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgicm91bmQiLG5ldyBnLkZ1bmN0aW9uVHlwZShCLnJlYWxUeXBlLEIuaW50VHlwZSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJmbG9vciIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJmbG9vciIsZnVuY3Rpb24oaCxBKXtpZihoIGluc3RhbmNlb2Ygcy5SZWFsKXt2YXIgST1oLnZhbHVlLE89bmV3IHMuSW50ZWdlcihNYXRoLmZsb29yKEkpKTtyZXR1cm4gTy5oYXNPdmVyZmxvdygpP1tCLm92ZXJmbG93RXhjZXB0aW9uLmNvbnN0cnVjdCgpLCEwLFtdXTpbTywhMSxbXV19dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJmbG9vciIsbmV3IGcuRnVuY3Rpb25UeXBlKEIucmVhbFR5cGUsQi5pbnRUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLFYuc2V0VmFsdWUoImNlaWwiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiY2VpbCIsZnVuY3Rpb24oaCxBKXtpZihoIGluc3RhbmNlb2Ygcy5SZWFsKXt2YXIgST1oLnZhbHVlLE89bmV3IHMuSW50ZWdlcihNYXRoLmNlaWwoSSkpO3JldHVybiBPLmhhc092ZXJmbG93KCk/W0Iub3ZlcmZsb3dFeGNlcHRpb24uY29uc3RydWN0KCksITAsW11dOltPLCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoImNlaWwiLG5ldyBnLkZ1bmN0aW9uVHlwZShCLnJlYWxUeXBlLEIuaW50VHlwZSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJ0b1N0cmluZyIsbmV3IHMuUHJlZGVmaW5lZEZ1bmN0aW9uKCJ0b1N0cmluZyIsZnVuY3Rpb24oaCxBKXtpZihoIGluc3RhbmNlb2Ygcy5SZWFsKXJldHVybltuZXcgcy5TdHJpbmdWYWx1ZShoLnRvU3RyaW5nKHZvaWQgMCkpLCExLFtdXTt0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoInRvU3RyaW5nIixuZXcgZy5GdW5jdGlvblR5cGUoQi5yZWFsVHlwZSxCLnN0cmluZ1R5cGUpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksTS5zZXREeW5hbWljU3RydWN0dXJlKCJSZWFsIixWKSxNLnNldFN0YXRpY1N0cnVjdHVyZSgiUmVhbCIsRCksTX0sY29kZTpgc2lnbmF0dXJlIFJFQUwgPSBzaWcKICAgICAgICAoKiB0eXBlIHJlYWwgKikKCiAgICAgICAgc3RydWN0dXJlIE1hdGggOiBNQVRICgogICAgICAgICgqIHZhbCByYWRpeCA6IGludCAqKQogICAgICAgICgqIHZhbCBwcmVjaXNpb24gOiBpbnQgKikKCiAgICAgICAgKCogdmFsIG1heEZpbml0ZSAgICA6IHJlYWwgKikKICAgICAgICAoKiB2YWwgbWluUG9zICAgICAgIDogcmVhbCAqKQogICAgICAgICgqIHZhbCBtaW5Ob3JtYWxQb3MgOiByZWFsICopCgogICAgICAgICgqIHZhbCBwb3NJbmYgOiByZWFsICopCiAgICAgICAgKCogdmFsIG5lZ0luZiA6IHJlYWwgKikKCiAgICAgICAgKCogdmFsICsgOiByZWFsICogcmVhbCAtPiByZWFsICopCiAgICAgICAgKCogdmFsIC0gOiByZWFsICogcmVhbCAtPiByZWFsICopCiAgICAgICAgKCogdmFsICogOiByZWFsICogcmVhbCAtPiByZWFsICopCiAgICAgICAgKCogdmFsIC8gOiByZWFsICogcmVhbCAtPiByZWFsICopCiAgICAgICAgKCogdmFsIHJlbSA6IHJlYWwgKiByZWFsIC0+IHJlYWwgKikKICAgICAgICAoKiB2YWwgKisgOiByZWFsICogcmVhbCAqIHJlYWwgLT4gcmVhbCAqKQogICAgICAgICgqIHZhbCAqLSA6IHJlYWwgKiByZWFsICogcmVhbCAtPiByZWFsICopCiAgICAgICAgKCogdmFsIH4gOiByZWFsIC0+IHJlYWwgKikKICAgICAgICAoKiB2YWwgYWJzIDogcmVhbCAtPiByZWFsICopCgogICAgICAgICgqIHZhbCBtaW4gOiByZWFsICogcmVhbCAtPiByZWFsICopCiAgICAgICAgKCogdmFsIG1heCA6IHJlYWwgKiByZWFsIC0+IHJlYWwgKikKCiAgICAgICAgKCogdmFsIHNpZ24gOiByZWFsIC0+IGludCAqKQogICAgICAgICgqIHZhbCBzaWduQml0IDogcmVhbCAtPiBib29sICopCiAgICAgICAgKCogdmFsIHNhbWVTaWduIDogcmVhbCAqIHJlYWwgLT4gYm9vbCAqKQogICAgICAgICgqIHZhbCBjb3B5U2lnbiA6IHJlYWwgKiByZWFsIC0+IHJlYWwgKikKCiAgICAgICAgdmFsIGNvbXBhcmUgICAgIDogcmVhbCAqIHJlYWwgLT4gb3JkZXIKICAgICAgICAoKiB2YWwgY29tcGFyZVJlYWwgOiByZWFsICogcmVhbCAtPiBJRUVFUmVhbC5yZWFsX29yZGVyICopCiAgICAgICAgKCogdmFsIDwgIDogcmVhbCAqIHJlYWwgLT4gYm9vbCAqKQogICAgICAgICgqIHZhbCA8PSA6IHJlYWwgKiByZWFsIC0+IGJvb2wgKikKICAgICAgICAoKiB2YWwgPiAgOiByZWFsICogcmVhbCAtPiBib29sICopCiAgICAgICAgKCogdmFsID49IDogcmVhbCAqIHJlYWwgLT4gYm9vbCAqKQogICAgICAgICgqIHZhbCA9PSA6IHJlYWwgKiByZWFsIC0+IGJvb2wgKikKICAgICAgICAoKiB2YWwgIT0gOiByZWFsICogcmVhbCAtPiBib29sICopCiAgICAgICAgKCogdmFsID89IDogcmVhbCAqIHJlYWwgLT4gYm9vbCAqKQogICAgICAgICgqIHZhbCB1bm9yZGVyZWQgOiByZWFsICogcmVhbCAtPiBib29sICopCgogICAgICAgICgqIHZhbCBpc0Zpbml0ZSA6IHJlYWwgLT4gYm9vbCAqKQogICAgICAgICgqIHZhbCBpc05hbiA6IHJlYWwgLT4gYm9vbCAqKQogICAgICAgICgqIHZhbCBpc05vcm1hbCA6IHJlYWwgLT4gYm9vbCAqKQogICAgICAgICgqIHZhbCBjbGFzcyA6IHJlYWwgLT4gSUVFRVJlYWwuZmxvYXRfY2xhc3MgKikKCiAgICAgICAgKCogdmFsIHRvTWFuRXhwIDogcmVhbCAtPiB7bWFuIDogcmVhbCwgZXhwIDogaW50fSAqKQogICAgICAgICgqIHZhbCBmcm9tTWFuRXhwIDoge21hbiA6IHJlYWwsIGV4cCA6IGludH0gLT4gcmVhbCAqKQogICAgICAgICgqIHZhbCBzcGxpdCAgIDogcmVhbCAtPiB7d2hvbGUgOiByZWFsLCBmcmFjIDogcmVhbH0gKikKICAgICAgICAoKiB2YWwgcmVhbE1vZCA6IHJlYWwgLT4gcmVhbCAqKQoKICAgICAgICAoKiB2YWwgbmV4dEFmdGVyIDogcmVhbCAqIHJlYWwgLT4gcmVhbCAqKQogICAgICAgICgqIHZhbCBjaGVja0Zsb2F0IDogcmVhbCAtPiByZWFsICopCgogICAgICAgICgqIHZhbCByZWFsRmxvb3IgOiByZWFsIC0+IHJlYWwgKikKICAgICAgICAoKiB2YWwgcmVhbENlaWwgIDogcmVhbCAtPiByZWFsICopCiAgICAgICAgKCogdmFsIHJlYWxUcnVuYyA6IHJlYWwgLT4gcmVhbCAqKQogICAgICAgICgqIHZhbCByZWFsUm91bmQgOiByZWFsIC0+IHJlYWwgKikKICAgICAgICB2YWwgZmxvb3IgOiByZWFsIC0+IGludAogICAgICAgIHZhbCBjZWlsICA6IHJlYWwgLT4gaW50CiAgICAgICAgKCogdmFsIHRydW5jIDogcmVhbCAtPiBpbnQgKikKICAgICAgICB2YWwgcm91bmQgOiByZWFsIC0+IGludAogICAgICAgICgqIHZhbCB0b0ludCAgICAgIDogSUVFRVJlYWwucm91bmRpbmdfbW9kZSAtPiByZWFsIC0+IGludCAqKQogICAgICAgICgqIHZhbCB0b0xhcmdlSW50IDogSUVFRVJlYWwucm91bmRpbmdfbW9kZSAtPiByZWFsIC0+IExhcmdlSW50LmludCAqKQogICAgICAgIHZhbCBmcm9tSW50ICAgICAgOiBpbnQgLT4gcmVhbAogICAgICAgICgqIHZhbCBmcm9tTGFyZ2VJbnQgOiBMYXJnZUludC5pbnQgLT4gcmVhbCAqKQogICAgICAgICgqIHZhbCB0b0xhcmdlICAgOiByZWFsIC0+IExhcmdlUmVhbC5yZWFsICopCiAgICAgICAgKCogdmFsIGZyb21MYXJnZSA6IElFRUVSZWFsLnJvdW5kaW5nX21vZGUgLT4gTGFyZ2VSZWFsLnJlYWwgLT4gcmVhbCAqKQoKICAgICAgICAoKiB2YWwgZm10ICAgICAgOiBTdHJpbmdDdnQucmVhbGZtdCAtPiByZWFsIC0+IHN0cmluZyAqKQogICAgICAgIHZhbCB0b1N0cmluZyA6IHJlYWwgLT4gc3RyaW5nCiAgICAgICAgKCogdmFsIHNjYW4gICAgICAgOiAoY2hhciwgJ2EpIFN0cmluZ0N2dC5yZWFkZXIgLT4gKHJlYWwsICdhKSBTdHJpbmdDdnQucmVhZGVyICopCiAgICAgICAgKCogdmFsIGZyb21TdHJpbmcgOiBzdHJpbmcgLT4gcmVhbCBvcHRpb24gKikKCiAgICAgICAgKCogdmFsIHRvRGVjaW1hbCAgIDogcmVhbCAtPiBJRUVFUmVhbC5kZWNpbWFsX2FwcHJveCAqKQogICAgICAgICgqIHZhbCBmcm9tRGVjaW1hbCA6IElFRUVSZWFsLmRlY2ltYWxfYXBwcm94IC0+IHJlYWwgb3B0aW9uICopCiAgICBlbmQ7CgogICAgc3RydWN0dXJlIFJlYWwgPSBzdHJ1Y3QKICAgICAgICBvcGVuIFJlYWw7CiAgICAgICAgc3RydWN0dXJlIE1hdGggOiBNQVRIID0gc3RydWN0CiAgICAgICAgICAgIG9wZW4gTWF0aDsKICAgICAgICBlbmQKICAgICAgICBmdW4gY29tcGFyZSAoeCwgeTogcmVhbCkgPSBpZiB4IDwgeSB0aGVuIExFU1MgZWxzZSBpZiB4ID4geSB0aGVuIEdSRUFURVIgZWxzZSBFUVVBTDsKICAgIGVuZDsKCiAgICBzdHJ1Y3R1cmUgTGFyZ2VSZWFsIDo+IFJFQUwgPSBzdHJ1Y3QKICAgICAgICBvcGVuIFJlYWw7CiAgICBlbmQ7CiAgICBzdHJ1Y3R1cmUgUmVhbCA6PiBSRUFMID0gc3RydWN0CiAgICAgICAgb3BlbiBSZWFsOwogICAgZW5kOwoKICAgIHZhbCBjZWlsICA9IFJlYWwuY2VpbDsKICAgIHZhbCBmbG9vciA9IFJlYWwuZmxvb3I7CiAgICB2YWwgcm91bmQgPSBSZWFsLnJvdW5kOwogICAgKCogdmFsIHRydW5jID0gUmVhbC50cnVuYzsgKikKICAgIHZhbCByZWFsID0gUmVhbC5mcm9tSW50OwogICAgYCxyZXF1aXJlczpbIk1hdGgiXX19LDQ2MDooZmUsdSxLKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LlNUUklOR19MSUI9dm9pZCAwO3ZhciBtPUsoMzY3KSxnPUsoNjk5KTt1LlNUUklOR19MSUI9e25hdGl2ZTpmdW5jdGlvbihzKXt2YXIgcT1uZXcgbS5EeW5hbWljQmFzaXMoe30se30se30se30se30pLEI9bmV3IG0uU3RhdGljQmFzaXMoe30se30se30se30se30pO3JldHVybiBCLnNldFR5cGUoInN0cmluZyIsbmV3IGcuQ3VzdG9tVHlwZSgic3RyaW5nIixbXSksW10sMCwhMCkscS5zZXRUeXBlKCJzdHJpbmciLFtdKSxCLnNldFR5cGUoImNoYXIiLG5ldyBnLkN1c3RvbVR5cGUoImNoYXIiLFtdKSxbXSwwLCEwKSxxLnNldFR5cGUoImNoYXIiLFtdKSxzLnNldER5bmFtaWNTdHJ1Y3R1cmUoIlN0cmluZyIscSkscy5zZXRTdGF0aWNTdHJ1Y3R1cmUoIlN0cmluZyIsQiksc30sY29kZTpgc3RydWN0dXJlIFN0cmluZyA6IHNpZwogICAgICAgICAgICBlcXR5cGUgc3RyaW5nCiAgICAgICAgICAgIGVxdHlwZSBjaGFyCiAgICAgICAgICAgIHZhbCBzaXplIDogc3RyaW5nIC0+IGludAogICAgICAgICAgICB2YWwgc3ViIDogc3RyaW5nICogaW50IC0+IGNoYXIKICAgICAgICAgICAgdmFsIGV4dHJhY3QgICA6IHN0cmluZyAqIGludCAqIGludCBvcHRpb24gLT4gc3RyaW5nCiAgICAgICAgICAgIHZhbCBzdWJzdHJpbmcgOiBzdHJpbmcgKiBpbnQgKiBpbnQgLT4gc3RyaW5nCiAgICAgICAgICAgIHZhbCBeIDogc3RyaW5nICogc3RyaW5nIC0+IHN0cmluZwogICAgICAgICAgICB2YWwgY29uY2F0IDogc3RyaW5nIGxpc3QgLT4gc3RyaW5nCiAgICAgICAgICAgIHZhbCBjb25jYXRXaXRoIDogc3RyaW5nIC0+IHN0cmluZyBsaXN0IC0+IHN0cmluZwogICAgICAgICAgICB2YWwgc3RyIDogY2hhciAtPiBzdHJpbmcKICAgICAgICAgICAgdmFsIGltcGxvZGUgOiBjaGFyIGxpc3QgLT4gc3RyaW5nCiAgICAgICAgICAgIHZhbCBleHBsb2RlIDogc3RyaW5nIC0+IGNoYXIgbGlzdAogICAgICAgICAgICB2YWwgbWFwIDogKGNoYXIgLT4gY2hhcikgLT4gc3RyaW5nIC0+IHN0cmluZwogICAgICAgICAgICB2YWwgdHJhbnNsYXRlIDogKGNoYXIgLT4gc3RyaW5nKSAtPiBzdHJpbmcgLT4gc3RyaW5nCiAgICAgICAgICAgIHZhbCB0b2tlbnMgOiAoY2hhciAtPiBib29sKSAtPiBzdHJpbmcgLT4gc3RyaW5nIGxpc3QKICAgICAgICAgICAgdmFsIGZpZWxkcyA6IChjaGFyIC0+IGJvb2wpIC0+IHN0cmluZyAtPiBzdHJpbmcgbGlzdAogICAgICAgICAgICB2YWwgaXNQcmVmaXggICAgOiBzdHJpbmcgLT4gc3RyaW5nIC0+IGJvb2wKICAgICAgICAgICAgdmFsIGlzU3Vic3RyaW5nIDogc3RyaW5nIC0+IHN0cmluZyAtPiBib29sCiAgICAgICAgICAgIHZhbCBpc1N1ZmZpeCAgICA6IHN0cmluZyAtPiBzdHJpbmcgLT4gYm9vbAogICAgICAgICAgICB2YWwgY29tcGFyZSA6IHN0cmluZyAqIHN0cmluZyAtPiBvcmRlcgogICAgICAgICAgICB2YWwgY29sbGF0ZSA6IChjaGFyICogY2hhciAtPiBvcmRlcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+IHN0cmluZyAqIHN0cmluZyAtPiBvcmRlcgogICAgICAgICAgICB2YWwgPCAgOiBzdHJpbmcgKiBzdHJpbmcgLT4gYm9vbAogICAgICAgICAgICB2YWwgPD0gOiBzdHJpbmcgKiBzdHJpbmcgLT4gYm9vbAogICAgICAgICAgICB2YWwgPiAgOiBzdHJpbmcgKiBzdHJpbmcgLT4gYm9vbAogICAgICAgICAgICB2YWwgPj0gOiBzdHJpbmcgKiBzdHJpbmcgLT4gYm9vbAogICAgICAgIGVuZCA9IHN0cnVjdAogICAgICAgICAgICBvcGVuIFN0cmluZzsKCiAgICAgICAgICAgIGZ1biBzaXplIHMgPSBMaXN0Lmxlbmd0aCAoZXhwbG9kZSBzKTsKICAgICAgICAgICAgZnVuIHN1YiAocyxpKSA9IExpc3QubnRoIChleHBsb2RlIHMsIGkpOwogICAgICAgICAgICBmdW4gZXh0cmFjdCAocywgaSwgTk9ORSkgPSBpbXBsb2RlIChMaXN0LmRyb3AgKGV4cGxvZGUgcywgaSkpCiAgICAgICAgICAgICAgfCBleHRyYWN0IChzLCBpLCBTT01FIGopID0gaW1wbG9kZSAoTGlzdC50YWtlIChMaXN0LmRyb3AgKGV4cGxvZGUgcywgaSksIGopKTsKICAgICAgICAgICAgZnVuIHN1YnN0cmluZyAocywgaSwgaikgPSBleHRyYWN0IChzLCBpLCBTT01FIGopOwogICAgICAgICAgICB2YWwgb3BeID0gb3BeOwoKICAgICAgICAgICAgZnVuIGNjMiBiIChbXSwgeSkgPSB5CiAgICAgICAgICAgICAgfCBjYzIgYiAoeDo6eHMsIHkpID0gY2MyIGIgKHhzLCB5XmJeeCk7CiAgICAgICAgICAgIGZ1biBjb25jYXQgYSA9IGNjMiAiIiAoYSwgIiIpOwogICAgICAgICAgICBmdW4gY29uY2F0V2l0aCBiIFtdID0gIiIKICAgICAgICAgICAgICB8IGNvbmNhdFdpdGggYiAoYTo6YykgPSBhIF4gKGNjMiBiIChjLCAiIikpOwoKICAgICAgICAgICAgZnVuIHN0ciBjID0gaW1wbG9kZSBbY107CiAgICAgICAgICAgIHZhbCBpbXBsb2RlID0gaW1wbG9kZTsKICAgICAgICAgICAgdmFsIGV4cGxvZGUgPSBleHBsb2RlOwogICAgICAgICAgICBmdW4gbWFwIGYgcyA9IGltcGxvZGUoTGlzdC5tYXAgZiAoZXhwbG9kZSBzKSk7CiAgICAgICAgICAgIGZ1biB0cmFuc2xhdGUgZiBzID0gY29uY2F0KExpc3QubWFwIGYgKGV4cGxvZGUgcykpOwoKCiAgICAgICAgICAgIGZ1biBjbXAgZiAoW10sIFtdKSA9IEVRVUFMCiAgICAgICAgICAgICAgfCBjbXAgZiAoW10sIF8pID0gTEVTUwogICAgICAgICAgICAgIHwgY21wIGYgKF8sIFtdKSA9IEdSRUFURVIKICAgICAgICAgICAgICB8IGNtcCBmICh4Ojp4cywgeTo6eXMpID0gbGV0CiAgICAgICAgICAgICAgICAgICAgdmFsIHRtcCA9IGYgKHgsIHkpOwogICAgICAgICAgICAgICAgaW4KICAgICAgICAgICAgICAgICAgICBpZiB0bXAgPD4gRVFVQUwgdGhlbiB0bXAgZWxzZSBjbXAgZiAoeHMsIHlzKQogICAgICAgICAgICAgICAgZW5kOwoKICAgICAgICAgICAgZnVuIG1hdGNoUHJlZml4IChbXSwgXykgPSB0cnVlCiAgICAgICAgICAgICAgfCBtYXRjaFByZWZpeCAoXywgW10pID0gZmFsc2UKICAgICAgICAgICAgICB8IG1hdGNoUHJlZml4ICh4Ojp4cywgeTo6eXMpID0gaWYgeCA8PiB5IHRoZW4gZmFsc2UgZWxzZSBtYXRjaFByZWZpeCAoeHMsIHlzKTsKCiAgICAgICAgICAgIGZ1biBtYXRjaFN1YnN0cmluZyAoW10sIF8pID0gdHJ1ZQogICAgICAgICAgICAgIHwgbWF0Y2hTdWJzdHJpbmcgKF8sIFtdKSA9IGZhbHNlCiAgICAgICAgICAgICAgfCBtYXRjaFN1YnN0cmluZyAoeCwgeTo6eXMpID0gaWYgbWF0Y2hQcmVmaXggKHgsIHk6OnlzKSB0aGVuIHRydWUKICAgICAgICAgICAgICAgIGVsc2UgbWF0Y2hTdWJzdHJpbmcgKHgsIHlzKTsKCiAgICAgICAgICAgIGZ1biBnZXRGaWVsZHMgKGYsIFtdLCB0bXAsIHgpID0gKGltcGxvZGUgdG1wKSA6OiB4CiAgICAgICAgICAgICAgfCBnZXRGaWVsZHMgKGYsIChyOjpycyksIHRtcCwgeCkgPSBpZiBmIHIgdGhlbgogICAgICAgICAgICAgICAgICAgIGdldEZpZWxkcyAoZiwgcnMsIFtdLCAoaW1wbG9kZSB0bXApOjp4KQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGdldEZpZWxkcyAoZiwgcnMsIHI6OnRtcCwgeCk7CgogICAgICAgICAgICBmdW4gdG9rZW5zIGYgcyA9IExpc3QuZmlsdGVyIChmbiB0ID0+IHQgPD4gIiIpIChnZXRGaWVsZHMgKGYsIHJldiAoZXhwbG9kZSBzKSwgW10sIFtdKSk7CiAgICAgICAgICAgIGZ1biBmaWVsZHMgZiBzID0gZ2V0RmllbGRzIChmLCByZXYgKGV4cGxvZGUgcyksIFtdLCBbXSk7CgogICAgICAgICAgICBmdW4gaXNQcmVmaXggYSBiID0gbWF0Y2hQcmVmaXggKGV4cGxvZGUgYSwgZXhwbG9kZSBiKTsKICAgICAgICAgICAgZnVuIGlzU3Vic3RyaW5nIGEgYiA9IG1hdGNoU3Vic3RyaW5nIChleHBsb2RlIGEsIGV4cGxvZGUgYik7CiAgICAgICAgICAgIGZ1biBpc1N1ZmZpeCBhIGIgPSBtYXRjaFByZWZpeCAocmV2IChleHBsb2RlIGEpLCByZXYgKGV4cGxvZGUgYikpOwoKICAgICAgICAgICAgZnVuIGNvbXBhcmUgKGEsIGIpID0gY21wIENoYXIuY29tcGFyZSAoZXhwbG9kZSBhLCBleHBsb2RlIGIpOwogICAgICAgICAgICBmdW4gY29sbGF0ZSBmIChhLCBiKSA9IGNtcCBmIChleHBsb2RlIGEsIGV4cGxvZGUgYik7CgogICAgICAgICAgICBmdW4gb3A8IChhLCBiKSA9IGNvbXBhcmUgKGEsIGIpID0gTEVTUzsKICAgICAgICAgICAgZnVuIG9wPiAoYSwgYikgPSBjb21wYXJlIChhLCBiKSA9IEdSRUFURVI7CiAgICAgICAgICAgIGZ1biBvcDw9IChhLCBiKSA9IGNvbXBhcmUgKGEsIGIpIDw+IEdSRUFURVI7CiAgICAgICAgICAgIGZ1biBvcD49IChhLCBiKSA9IGNvbXBhcmUgKGEsIGIpIDw+IExFU1M7CiAgICAgICAgZW5kOwogICAgICAgIHZhbCBjb25jYXQgICAgPSBTdHJpbmcuY29uY2F0OwogICAgICAgIHZhbCBzaXplICAgICAgPSBTdHJpbmcuc2l6ZTsKICAgICAgICB2YWwgc3RyICAgICAgID0gU3RyaW5nLnN0cjsKICAgICAgICB2YWwgc3Vic3RyaW5nID0gU3RyaW5nLnN1YnN0cmluZzsKICAgICAgICBgLHJlcXVpcmVzOlsiQ2hhciIsIkxpc3QiXX19LDY2NzooZmUsdSxLKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LlZFQ1RPUl9MSUI9dm9pZCAwO3ZhciBtPUsoMzY3KSxnPUsoNjk5KSxzPUsoMTA2KSxxPUsoNzU4KSxCPUsoMTk3KTt1LlZFQ1RPUl9MSUI9e25hdGl2ZTpmdW5jdGlvbihNKXt2YXIgVj1uZXcgbS5EeW5hbWljQmFzaXMoe30se30se30se30se30pLEQ9bmV3IG0uU3RhdGljQmFzaXMoe30se30se30se30se30pLGg9bmV3IGcuQ3VzdG9tVHlwZSgidmVjdG9yIixbbmV3IGcuVHlwZVZhcmlhYmxlKCInYSIpXSksQT1uZXcgZy5DdXN0b21UeXBlKCJsaXN0IixbbmV3IGcuVHlwZVZhcmlhYmxlKCInYSIpXSk7cmV0dXJuIEQuc2V0VHlwZSgidmVjdG9yIixoLFtdLDEsITApLFYuc2V0VHlwZSgidmVjdG9yIixbXSksVi5zZXRWYWx1ZSgiZnJvbUxpc3QiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigiZnJvbUxpc3QiLGZ1bmN0aW9uKEksTyl7dmFyIEU9bmV3IHMuVmVjdG9yVmFsdWUoW10pO2lmKEkgaW5zdGFuY2VvZiBzLkNvbnN0cnVjdGVkVmFsdWUpe2Zvcih2YXIgcj1JO3IuY29uc3RydWN0b3JOYW1lIT09Im5pbCI7KXtpZihyLmNvbnN0cnVjdG9yTmFtZSE9PSI6OiIpdGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpO3ZhciBlPXIuYXJndW1lbnQ7aWYoIShlIGluc3RhbmNlb2Ygcy5SZWNvcmRWYWx1ZSYmZS5lbnRyaWVzLnNpemU9PT0yKSl0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIik7dmFyIG89ZS5nZXRWYWx1ZSgiMSIpLHk9ZS5nZXRWYWx1ZSgiMiIpO2lmKCEobyBpbnN0YW5jZW9mIHMuVmFsdWUmJnkgaW5zdGFuY2VvZiBzLkNvbnN0cnVjdGVkVmFsdWUpKXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKTtFLmVudHJpZXMucHVzaChvKSxyPXl9cmV0dXJuW0UsITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX0pLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksRC5zZXRWYWx1ZSgiZnJvbUxpc3QiLG5ldyBnLkZ1bmN0aW9uVHlwZShBLGgpLG0uSWRlbnRpZmllclN0YXR1cy5WQUxVRV9WQVJJQUJMRSksVi5zZXRWYWx1ZSgic3ViIixuZXcgcy5QcmVkZWZpbmVkRnVuY3Rpb24oInN1YiIsZnVuY3Rpb24oSSxPKXtpZihJIGluc3RhbmNlb2Ygcy5SZWNvcmRWYWx1ZSYmSS5lbnRyaWVzLnNpemU9PT0yKXt2YXIgRT1JLmdldFZhbHVlKCIxIikscj1JLmdldFZhbHVlKCIyIik7aWYoRSBpbnN0YW5jZW9mIHMuVmVjdG9yVmFsdWUmJnIgaW5zdGFuY2VvZiBzLkludGVnZXIpe3ZhciBlPXIudmFsdWU7cmV0dXJuIGU8MHx8ZT49RS5lbnRyaWVzLmxlbmd0aD9bQi5zdWJzY3JpcHRFeGNlcHRpb24uY29uc3RydWN0KCksITAsW11dOltFLmVudHJpZXNbZV0sITEsW11dfXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcigic3RkIHR5cGUgbWlzbWF0Y2giKX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoInN1YiIsbmV3IGcuRnVuY3Rpb25UeXBlKG5ldyBnLlR1cGxlVHlwZShbaCxCLmludFR5cGVdKS5zaW1wbGlmeSgpLG5ldyBnLlR5cGVWYXJpYWJsZSgiJ2EiKSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJ1cGRhdGUiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigidXBkYXRlIixmdW5jdGlvbihJLE8pe2lmKEkgaW5zdGFuY2VvZiBzLlJlY29yZFZhbHVlJiZJLmVudHJpZXMuc2l6ZT09PTMpe3ZhciBFPUkuZ2V0VmFsdWUoIjEiKSxyPUkuZ2V0VmFsdWUoIjIiKSxlPUkuZ2V0VmFsdWUoIjMiKTtpZihFIGluc3RhbmNlb2Ygcy5WZWN0b3JWYWx1ZSYmciBpbnN0YW5jZW9mIHMuSW50ZWdlcil7dmFyIG89ci52YWx1ZTtpZihvPDB8fG8+PUUuZW50cmllcy5sZW5ndGgpcmV0dXJuW0Iuc3Vic2NyaXB0RXhjZXB0aW9uLmNvbnN0cnVjdCgpLCEwLFtdXTt2YXIgeT1uZXcgcy5WZWN0b3JWYWx1ZShFLmVudHJpZXMuc2xpY2UoKSk7cmV0dXJuIHkuZW50cmllc1tvXT1lLFt5LCExLFtdXX10aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCJzdGQgdHlwZSBtaXNtYXRjaCIpfSksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxELnNldFZhbHVlKCJ1cGRhdGUiLG5ldyBnLkZ1bmN0aW9uVHlwZShuZXcgZy5UdXBsZVR5cGUoW2gsQi5pbnRUeXBlLG5ldyBnLlR5cGVWYXJpYWJsZSgiJ2EiKV0pLnNpbXBsaWZ5KCksaCksbS5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKSxWLnNldFZhbHVlKCJsZW5ndGgiLG5ldyBzLlByZWRlZmluZWRGdW5jdGlvbigibGVuZ3RoIixmdW5jdGlvbihJLE8pe2lmKEkgaW5zdGFuY2VvZiBzLlZlY3RvclZhbHVlKXJldHVybltuZXcgcy5JbnRlZ2VyKEkuZW50cmllcy5sZW5ndGgpLCExLFtdXTt0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoInN0ZCB0eXBlIG1pc21hdGNoIil9KSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLEQuc2V0VmFsdWUoImxlbmd0aCIsbmV3IGcuRnVuY3Rpb25UeXBlKGgsQi5pbnRUeXBlKSxtLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpLE0uc2V0RHluYW1pY1N0cnVjdHVyZSgiVmVjdG9yIixWKSxNLnNldFN0YXRpY1N0cnVjdHVyZSgiVmVjdG9yIixEKSxNfSxjb2RlOmBzdHJ1Y3R1cmUgVmVjdG9yIDo+IHNpZwogICAgICAgICgqIGVxdHlwZSAnYSB2ZWN0b3IgPSAnYSB2ZWN0b3IgKikKICAgICAgICAoKiB2YWwgbWF4TGVuIDogaW50ICopCiAgICAgICAgdmFsIGZyb21MaXN0IDogJ2EgbGlzdCAtPiAnYSB2ZWN0b3IKICAgICAgICB2YWwgdGFidWxhdGUgOiBpbnQgKiAoaW50IC0+ICdhKSAtPiAnYSB2ZWN0b3IKICAgICAgICB2YWwgbGVuZ3RoIDogJ2EgdmVjdG9yIC0+IGludAogICAgICAgIHZhbCBzdWIgOiAnYSB2ZWN0b3IgKiBpbnQgLT4gJ2EKICAgICAgICB2YWwgdXBkYXRlIDogJ2EgdmVjdG9yICogaW50ICogJ2EgLT4gJ2EgdmVjdG9yCiAgICAgICAgdmFsIGNvbmNhdCA6ICdhIHZlY3RvciBsaXN0IC0+ICdhIHZlY3RvcgogICAgICAgIHZhbCBhcHBpIDogKGludCAqICdhIC0+IHVuaXQpIC0+ICdhIHZlY3RvciAtPiB1bml0CiAgICAgICAgdmFsIGFwcCAgOiAoJ2EgLT4gdW5pdCkgLT4gJ2EgdmVjdG9yIC0+IHVuaXQKICAgICAgICB2YWwgbWFwaSA6IChpbnQgKiAnYSAtPiAnYikgLT4gJ2EgdmVjdG9yIC0+ICdiIHZlY3RvcgogICAgICAgIHZhbCBtYXAgIDogKCdhIC0+ICdiKSAtPiAnYSB2ZWN0b3IgLT4gJ2IgdmVjdG9yCiAgICAgICAgdmFsIGZvbGRsaSA6IChpbnQgKiAnYSAqICdiIC0+ICdiKSAtPiAnYiAtPiAnYSB2ZWN0b3IgLT4gJ2IKICAgICAgICB2YWwgZm9sZHJpIDogKGludCAqICdhICogJ2IgLT4gJ2IpIC0+ICdiIC0+ICdhIHZlY3RvciAtPiAnYgogICAgICAgIHZhbCBmb2xkbCAgOiAoJ2EgKiAnYiAtPiAnYikgLT4gJ2IgLT4gJ2EgdmVjdG9yIC0+ICdiCiAgICAgICAgdmFsIGZvbGRyICA6ICgnYSAqICdiIC0+ICdiKSAtPiAnYiAtPiAnYSB2ZWN0b3IgLT4gJ2IKICAgICAgICB2YWwgZmluZGkgOiAoaW50ICogJ2EgLT4gYm9vbCkgLT4gJ2EgdmVjdG9yIC0+IChpbnQgKiAnYSkgb3B0aW9uCiAgICAgICAgdmFsIGZpbmQgIDogKCdhIC0+IGJvb2wpIC0+ICdhIHZlY3RvciAtPiAnYSBvcHRpb24KICAgICAgICB2YWwgZXhpc3RzIDogKCdhIC0+IGJvb2wpIC0+ICdhIHZlY3RvciAtPiBib29sCiAgICAgICAgdmFsIGFsbCA6ICgnYSAtPiBib29sKSAtPiAnYSB2ZWN0b3IgLT4gYm9vbAogICAgICAgIHZhbCBjb2xsYXRlIDogKCdhICogJ2EgLT4gb3JkZXIpIC0+ICdhIHZlY3RvciAqICdhIHZlY3RvciAtPiBvcmRlcgogICAgZW5kID0gc3RydWN0CiAgICAgICAgb3BlbiBWZWN0b3I7CiAgICAgICAgZnVuIHRhYnVsYXRlIChuLCBmKSA9IGZyb21MaXN0IChMaXN0LnRhYnVsYXRlIChuLCBmKSk7CgogICAgICAgIGZ1biBmb2xkbGkgZiBpbml0IHZlYyA9IGxldAogICAgICAgICAgICB2YWwgbGVuID0gbGVuZ3RoIHZlYwogICAgICAgICAgICBmdW4gbG9vcCAoaSwgYikgPQogICAgICAgICAgICAgICAgaWYgaSA9IGxlbiB0aGVuIGIKICAgICAgICAgICAgICAgIGVsc2UgbG9vcCAoaSArIDEsIGYgKGksIHN1YiAodmVjLCBpKSwgYikpCiAgICAgICAgICAgIGluCiAgICAgICAgICAgICAgICBsb29wICgwLCBpbml0KQogICAgICAgICAgICBlbmQ7CiAgICAgICAgZnVuIGZvbGRyaSBmIGluaXQgdmVjID0gbGV0CiAgICAgICAgICAgIHZhbCBsZW4gPSBsZW5ndGggdmVjCiAgICAgICAgICAgIGZ1biBsb29wIChpLCBiKSA9CiAgICAgICAgICAgICAgICBpZiBpID0gfjEgdGhlbiBiCiAgICAgICAgICAgICAgICBlbHNlIGxvb3AgKGkgLSAxLCBmIChpLCBzdWIgKHZlYywgaSksIGIpKQogICAgICAgICAgICBpbgogICAgICAgICAgICAgICAgbG9vcCAobGVuIC0gMSwgaW5pdCkKICAgICAgICAgICAgZW5kOwogICAgICAgIGZ1biBmb2xkbCBmIGluaXQgdmVjID0gZm9sZGxpIChmbiAoXywgYSwgeCkgPT4gZihhLCB4KSkgaW5pdCB2ZWM7CiAgICAgICAgZnVuIGZvbGRyIGYgaW5pdCB2ZWMgPSBmb2xkcmkgKGZuIChfLCBhLCB4KSA9PiBmKGEsIHgpKSBpbml0IHZlYzsKCiAgICAgICAgZnVuIGNvbmNhdCBsID0gZnJvbUxpc3QgKExpc3QuY29uY2F0IChMaXN0Lm1hcCAoZm9sZHIgKGZuIChhLCBiKSA9PiAoYTo6YikpIFtdKSBsKSk7CgogICAgICAgIGZ1biBhcHBpIGYgdmVjID0gTGlzdC5hcHAgZiAoZm9sZHJpIChmbiAoaSxhLGwpID0+IChpLGEpOjpsKSBbXSB2ZWMpOwogICAgICAgIGZ1biBhcHAgIGYgdmVjID0gTGlzdC5hcHAgZiAoZm9sZHIgKGZuIChhLGwpID0+IGE6OmwpIFtdIHZlYyk7CiAgICAgICAgZnVuIG1hcGkgZiB2ZWMgPSBmcm9tTGlzdCAoTGlzdC5tYXAgZiAoZm9sZHJpIChmbiAoaSxhLGwpID0+IChpLGEpOjpsKSBbXSB2ZWMpKTsKICAgICAgICBmdW4gbWFwICBmIHZlYyA9IGZyb21MaXN0IChMaXN0Lm1hcCBmIChmb2xkciAoZm4gKGEsbCkgPT4gYTo6bCkgW10gdmVjKSk7CgogICAgICAgIGZ1biBmaW5kaSBmIHZlYyA9IGxldAogICAgICAgICAgICB2YWwgbGVuID0gbGVuZ3RoIHZlYwogICAgICAgICAgICBmdW4gbG9vcCBpbmRleCA9CiAgICAgICAgICAgICAgICBpZiBpbmRleCA9IFZlY3Rvci5sZW5ndGggdmVjIHRoZW4gTk9ORQogICAgICAgICAgICAgICAgZWxzZSBsZXQKICAgICAgICAgICAgICAgICAgICB2YWwgZWwgPSBzdWIodmVjLCBpbmRleCkKICAgICAgICAgICAgICAgIGluIGlmIGYgKGluZGV4LCBlbCkgdGhlbiBTT01FIChpbmRleCwgZWwpIGVsc2UgbG9vcCAoaW5kZXgrMSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpbgogICAgICAgICAgICAgICAgbG9vcCAwCiAgICAgICAgICAgIGVuZDsKICAgICAgICBmdW4gZmluZCBmIHZlYyA9IGNhc2UgZmluZGkgKGZuIChfLCB2KSA9PiBmIHYpIHZlYyBvZiBOT05FID0+IE5PTkUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU09NRSAoXywgdikgPT4gU09NRSB2OwogICAgICAgIGZ1biBleGlzdHMgcCB2ZWMgPSBjYXNlIGZpbmQgcCB2ZWMgb2YgTk9ORSA9PiBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU09NRSBfID0+IHRydWU7CgogICAgICAgIGZ1biBhbGwgcCB2ZWMgPSBmb2xkbCAoZm4gKHYsIGFjYykgPT4gcCB2IGFuZGFsc28gYWNjKSB0cnVlIHZlYzsKICAgICAgICBmdW4gY29sbGF0ZSBwICh2MSwgdjIpID0gbGV0CiAgICAgICAgICAgIHZhbCBsZW5ndGgxID0gbGVuZ3RoIHYxCiAgICAgICAgICAgIHZhbCBsZW5ndGgyID0gbGVuZ3RoIHYyCiAgICAgICAgICAgIGZ1biBsb29wIGluZGV4ID0KICAgICAgICAgICAgICAgIGlmIGluZGV4ID0gbGVuZ3RoMSBhbmRhbHNvIGluZGV4ID0gbGVuZ3RoMiB0aGVuIEVRVUFMCiAgICAgICAgICAgICAgICBlbHNlIGlmIGluZGV4ID0gbGVuZ3RoMSB0aGVuIExFU1MKICAgICAgICAgICAgICAgIGVsc2UgaWYgaW5kZXggPSBsZW5ndGgyIHRoZW4gR1JFQVRFUgogICAgICAgICAgICAgICAgZWxzZSBjYXNlIHAgKHN1YiAodjEsIGluZGV4KSwgc3ViICh2MiwgaW5kZXgpKSBvZgogICAgICAgICAgICAgICAgICAgIEVRVUFMID0+IGxvb3AgKGluZGV4ICsgMSkKICAgICAgICAgICAgICAgICAgfCBsID0+IGwKICAgICAgICAgICAgaW4gbG9vcCAwCiAgICAgICAgICAgIGVuZDsKICAgIGVuZDsKICAgIHZhbCB2ZWN0b3IgPSBWZWN0b3IuZnJvbUxpc3Q7YCxyZXF1aXJlczpbIk9wdGlvbiIsIkxpc3QiXX19LDUzNDpmdW5jdGlvbihmZSx1KXt2YXIgSyxtPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoSz1mdW5jdGlvbihkLHYpe3JldHVybihLPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihDLEcpe0MuX19wcm90b19fPUd9fHxmdW5jdGlvbihDLEcpe2Zvcih2YXIgWSBpbiBHKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChHLFkpJiYoQ1tZXT1HW1ldKX0pKGQsdil9LGZ1bmN0aW9uKGQsdil7aWYodHlwZW9mIHYhPSJmdW5jdGlvbiImJnYhPT1udWxsKXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodikrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gQygpe3RoaXMuY29uc3RydWN0b3I9ZH1LKGQsdiksZC5wcm90b3R5cGU9dj09PW51bGw/T2JqZWN0LmNyZWF0ZSh2KTooQy5wcm90b3R5cGU9di5wcm90b3R5cGUsbmV3IEMpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHUuTG9uZ0lkZW50aWZpZXJUb2tlbj11Lk51bWVyaWNUb2tlbj11LkVxdWFsc1Rva2VuPXUuU3RhclRva2VuPXUuRXF1YWxpdHlUeXBlVmFyaWFibGVUb2tlbj11LlR5cGVWYXJpYWJsZVRva2VuPXUuQWxwaGFudW1lcmljSWRlbnRpZmllclRva2VuPXUuSWRlbnRpZmllclRva2VuPXUuU3RyaW5nQ29uc3RhbnRUb2tlbj11LkNoYXJhY3RlckNvbnN0YW50VG9rZW49dS5Xb3JkQ29uc3RhbnRUb2tlbj11LlJlYWxDb25zdGFudFRva2VuPXUuSW50ZWdlckNvbnN0YW50VG9rZW49dS5Db25zdGFudFRva2VuPXUuS2V5d29yZFRva2VuPXUuQ29tbWVudFRva2VuPXZvaWQgMDt2YXIgZz1mdW5jdGlvbigpe2Z1bmN0aW9uIGQodil7dGhpcy50ZXh0PXZ9cmV0dXJuIGQucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkNvbW1lbnRUb2tlbiJ9LGQucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxkLnByb3RvdHlwZS5pc1ZhbGlkUmVjb3JkTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZC5wcm90b3R5cGUuaXNWaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZH0oKTt1LkNvbW1lbnRUb2tlbj1nO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZCh2KXt0aGlzLnRleHQ9dn1yZXR1cm4gZC5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iS2V5d29yZFRva2VuIn0sZC5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGQucHJvdG90eXBlLmlzVmFsaWRSZWNvcmRMYWJlbD1mdW5jdGlvbigpe3JldHVybiExfSxkLnByb3RvdHlwZS5pc1ZpZD1mdW5jdGlvbigpe3JldHVybiExfSxkfSgpO3UuS2V5d29yZFRva2VuPXM7dmFyIHE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkKCl7fXJldHVybiBkLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJDb25zdGFudFRva2VuIn0sZC5wcm90b3R5cGUuaXNWaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZH0oKTt1LkNvbnN0YW50VG9rZW49cTt2YXIgQj1mdW5jdGlvbihkKXtmdW5jdGlvbiB2KEMsRyl7dmFyIFk9ZC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBZLnRleHQ9QyxZLnZhbHVlPUcsWX1yZXR1cm4gbSh2LGQpLHYucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkludGVnZXJDb25zdGFudFRva2VuIn0sdi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbigpe3JldHVybiIiK3RoaXMudmFsdWV9LHYucHJvdG90eXBlLmlzVmFsaWRSZWNvcmRMYWJlbD1mdW5jdGlvbigpe3JldHVybiExfSx2fShxKTt1LkludGVnZXJDb25zdGFudFRva2VuPUI7dmFyIE09ZnVuY3Rpb24oZCl7ZnVuY3Rpb24gdihDLEcpe3ZhciBZPWQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gWS50ZXh0PUMsWS52YWx1ZT1HLFl9cmV0dXJuIG0odixkKSx2LnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJSZWFsQ29uc3RhbnRUb2tlbiJ9LHYucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSx2LnByb3RvdHlwZS5pc1ZhbGlkUmVjb3JkTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdn0ocSk7dS5SZWFsQ29uc3RhbnRUb2tlbj1NO3ZhciBWPWZ1bmN0aW9uKGQpe2Z1bmN0aW9uIHYoQyxHKXt2YXIgWT1kLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIFkudGV4dD1DLFkudmFsdWU9RyxZfXJldHVybiBtKHYsZCksdi5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iV29yZENvbnN0YW50VG9rZW4ifSx2LnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIiIrdGhpcy52YWx1ZX0sdi5wcm90b3R5cGUuaXNWYWxpZFJlY29yZExhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHZ9KHEpO3UuV29yZENvbnN0YW50VG9rZW49Vjt2YXIgRD1mdW5jdGlvbihkKXtmdW5jdGlvbiB2KEMsRyl7dmFyIFk9ZC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBZLnRleHQ9QyxZLnZhbHVlPUcsWX1yZXR1cm4gbSh2LGQpLHYucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkNoYXJhY3RlckNvbnN0YW50VG9rZW4ifSx2LnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIiIrdGhpcy50ZXh0fSx2LnByb3RvdHlwZS5pc1ZhbGlkUmVjb3JkTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdn0ocSk7dS5DaGFyYWN0ZXJDb25zdGFudFRva2VuPUQ7dmFyIGg9ZnVuY3Rpb24oZCl7ZnVuY3Rpb24gdihDLEcpe3ZhciBZPWQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gWS50ZXh0PUMsWS52YWx1ZT1HLFl9cmV0dXJuIG0odixkKSx2LnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJTdHJpbmdDb25zdGFudFRva2VuIn0sdi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbigpe3JldHVybiIiK3RoaXMudGV4dH0sdi5wcm90b3R5cGUuaXNWYWxpZFJlY29yZExhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHZ9KHEpO3UuU3RyaW5nQ29uc3RhbnRUb2tlbj1oO3ZhciBBPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZCh2KXt0aGlzLnRleHQ9dix0aGlzLm9wUHJlZml4ZWQ9ITF9cmV0dXJuIGQucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIklkZW50aWZpZXJUb2tlbiJ9LGQucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxkLnByb3RvdHlwZS5pc1ZhbGlkUmVjb3JkTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZC5wcm90b3R5cGUuaXNWaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZH0oKTt1LklkZW50aWZpZXJUb2tlbj1BO3ZhciBJPWZ1bmN0aW9uKGQpe2Z1bmN0aW9uIHYoQyl7cmV0dXJuIGQuY2FsbCh0aGlzLEMpfHx0aGlzfXJldHVybiBtKHYsZCksdi5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iQWxwaGFudW1lcmljSWRlbnRpZmllclRva2VuIn0sdi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LHYucHJvdG90eXBlLmlzVmFsaWRSZWNvcmRMYWJlbD1mdW5jdGlvbigpe3JldHVybiEwfSx2fShBKTt1LkFscGhhbnVtZXJpY0lkZW50aWZpZXJUb2tlbj1JO3ZhciBPPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZCh2KXt0aGlzLnRleHQ9dn1yZXR1cm4gZC5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iVHlwZVZhcmlhYmxlVG9rZW4ifSxkLnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZC5wcm90b3R5cGUuaXNWYWxpZFJlY29yZExhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGQucHJvdG90eXBlLmlzVmlkPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGR9KCk7dS5UeXBlVmFyaWFibGVUb2tlbj1PO3ZhciBFPWZ1bmN0aW9uKGQpe2Z1bmN0aW9uIHYoQyl7cmV0dXJuIGQuY2FsbCh0aGlzLEMpfHx0aGlzfXJldHVybiBtKHYsZCksdi5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iRXF1YWxpdHlUeXBlVmFyaWFibGVUb2tlbiJ9LHYucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSx2LnByb3RvdHlwZS5pc1ZhbGlkUmVjb3JkTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdi5wcm90b3R5cGUuaXNWaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdn0oTyk7dS5FcXVhbGl0eVR5cGVWYXJpYWJsZVRva2VuPUU7dmFyIHI9ZnVuY3Rpb24oZCl7ZnVuY3Rpb24gdigpe3ZhciBDPWQuY2FsbCh0aGlzLCIqIil8fHRoaXM7cmV0dXJuIEMub3BQcmVmaXhlZD0hMSxDfXJldHVybiBtKHYsZCksdi5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iU3RhclRva2VuIn0sdi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LHYucHJvdG90eXBlLmlzVmFsaWRSZWNvcmRMYWJlbD1mdW5jdGlvbigpe3JldHVybiEwfSx2LnByb3RvdHlwZS5pc1ZpZD1mdW5jdGlvbigpe3JldHVybiEwfSx2fShzKTt1LlN0YXJUb2tlbj1yO3ZhciBlPWZ1bmN0aW9uKGQpe2Z1bmN0aW9uIHYoKXt2YXIgQz1kLmNhbGwodGhpcywiPSIpfHx0aGlzO3JldHVybiBDLm9wUHJlZml4ZWQ9ITEsQ31yZXR1cm4gbSh2LGQpLHYucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkVxdWFsc1Rva2VuIn0sdi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LHYucHJvdG90eXBlLmlzVmFsaWRSZWNvcmRMYWJlbD1mdW5jdGlvbigpe3JldHVybiExfSx2LnByb3RvdHlwZS5pc1ZpZD1mdW5jdGlvbigpe3JldHVybiEwfSx2fShzKTt1LkVxdWFsc1Rva2VuPWU7dmFyIG89ZnVuY3Rpb24oZCl7ZnVuY3Rpb24gdihDLEcpe3JldHVybiBkLmNhbGwodGhpcyxDLEcpfHx0aGlzfXJldHVybiBtKHYsZCksdi5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iTnVtZXJpY1Rva2VuIn0sdi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LHYucHJvdG90eXBlLmlzVmFsaWRSZWNvcmRMYWJlbD1mdW5jdGlvbigpe3JldHVybiEwfSx2LnByb3RvdHlwZS5pc1ZpZD1mdW5jdGlvbigpe3JldHVybiExfSx2fShCKTt1Lk51bWVyaWNUb2tlbj1vO3ZhciB5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZCh2LEMsRyl7dGhpcy50ZXh0PXYsdGhpcy5xdWFsaWZpZXJzPUMsdGhpcy5pZD1HLHRoaXMub3BQcmVmaXhlZD0hMX1yZXR1cm4gZC5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iTG9uZ0lkZW50aWZpZXJUb2tlbiJ9LGQucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtmb3IodmFyIHY9IiIsQz0wO0M8dGhpcy5xdWFsaWZpZXJzLmxlbmd0aDsrK0MpQz4wJiYodis9Ii4iKSx2Kz10aGlzLnF1YWxpZmllcnNbQ10uZ2V0VGV4dCgpO3JldHVybiB2KyIuIit0aGlzLmlkLmdldFRleHQoKX0sZC5wcm90b3R5cGUuaXNWYWxpZFJlY29yZExhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGQucHJvdG90eXBlLmlzVmlkPWZ1bmN0aW9uKCl7cmV0dXJuITF9LGR9KCk7dS5Mb25nSWRlbnRpZmllclRva2VuPXl9LDY5OTpmdW5jdGlvbihmZSx1LEspe3ZhciBtLGc9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChtPWZ1bmN0aW9uKEUscil7cmV0dXJuKG09T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsbyl7ZS5fX3Byb3RvX189b318fGZ1bmN0aW9uKGUsbyl7Zm9yKHZhciB5IGluIG8pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8seSkmJihlW3ldPW9beV0pfSkoRSxyKX0sZnVuY3Rpb24oRSxyKXtpZih0eXBlb2YgciE9ImZ1bmN0aW9uIiYmciE9PW51bGwpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyhyKSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiBlKCl7dGhpcy5jb25zdHJ1Y3Rvcj1FfW0oRSxyKSxFLnByb3RvdHlwZT1yPT09bnVsbD9PYmplY3QuY3JlYXRlKHIpOihlLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgZSl9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdS5UdXBsZVR5cGU9dS5DdXN0b21UeXBlPXUuRnVuY3Rpb25UeXBlPXUuUmVjb3JkVHlwZT11LlR5cGVWYXJpYWJsZT11LlR5cGVWYXJpYWJsZUJpbmQ9dS5BbnlUeXBlPXUuVHlwZT12b2lkIDA7dmFyIHM9Syg3NTgpLHE9bmV3IE1hcChbWyInYSIsIlx1MDNCMSJdLFsiJ2IiLCJcdTAzQjIiXSxbIidjIiwiXHUwM0IzIl0sWyInZCIsIlx1MDNCNCJdLFsiJ2UiLCJcdTAzQjUiXSxbIidmIiwiXHUwM0I2Il0sWyInZyIsIlx1MDNCNyJdLFsiJ2giLCJcdTAzQjgiXSxbIidpIiwiXHUwM0I5Il0sWyInayIsIlx1MDNCQSJdLFsiJ2wiLCJcdTAzQkIiXSxbIidtIiwiXHUwM0JDIl0sWyInbiIsIlx1MDNCRCJdLFsiJ2oiLCJcdTAzQkUiXSxbIidvIiwiXHUwM0JGIl0sWyIncCIsIlx1MDNDMCJdLFsiJ3IiLCJcdTAzQzEiXSxbIidzIiwiXHUwM0MzIl0sWyIndCIsIlx1MDNDNCJdLFsiJ3UiLCJcdTAzQzUiXSxbIid2IiwiXHUwM0M2Il0sWyIneCIsIlx1MDNDNyJdLFsiJ3EiLCJcdTAzQzgiXSxbIid3IiwiXHUwM0M5Il1dKSxCPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRSgpe31yZXR1cm4gRS5wcm90b3R5cGUuaW5zdGFudGlhdGU9ZnVuY3Rpb24ocixlLG8pe3Rocm93IG5ldyBzLkVsYWJvcmF0aW9uRXJyb3IoIkkgbXVzdG4ndCBydW4gYXdheS4gSSBtdXN0bid0IHJ1biBhd2F5LiBJIG11c3RuJ3QgcnVuIGF3YXkuIil9LEUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHIsZSxvKXt0aHJvdyBuZXcgcy5FbGFib3JhdGlvbkVycm9yKCJJIGRvbid0IGtub3cgYW55dGhpbmcuIEJ1dCB5b3Uga25vdyBldmVyeXRoaW5nLiIpfSxFLnByb3RvdHlwZS5tYWtlRXFUeXBlPWZ1bmN0aW9uKHIsZSl7dGhyb3cgbmV3IHMuRWxhYm9yYXRpb25FcnJvcigiSSBkb24ndCBrbm93IGV2ZXJ5dGhpbmcuIEkganVzdCBrbm93IHdoYXQgSSBrbm93LiIpfSxFLnByb3RvdHlwZS5nZXRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKHIpe3Rocm93IG5ldyBzLkVsYWJvcmF0aW9uRXJyb3IoYFRoaXMgaXMgd3JvbmcuCkkgc2FpZCB3aXRoIGEgcG9zZWQgbG9vay5gKX0sRS5wcm90b3R5cGUuZ2V0T3JkZXJlZFR5cGVWYXJpYWJsZXM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgcy5FbGFib3JhdGlvbkVycm9yKGBZb3Ugc2VlbSB3ZWxsIHRvZGF5LgpEaWQgc29tZXRoaW5nIG5pY2UgaGFwcGVuP2ApfSxFLnByb3RvdHlwZS5yZXBsYWNlVHlwZVZhcmlhYmxlcz1mdW5jdGlvbihyLGUpe3Rocm93IG5ldyBzLkVsYWJvcmF0aW9uRXJyb3IoIlx1MzA0Mlx1MzA5M1x1MzA1Rlx1MzBEMFx1MzBBQj8iKX0sRS5wcm90b3R5cGUucXVhbGlmeT1mdW5jdGlvbihyLGUpe3JldHVybiB0aGlzfSxFLnByb3RvdHlwZS5wcm9wYWdhdGU9ZnVuY3Rpb24ocil7cmV0dXJuIHRoaXN9LEUucHJvdG90eXBlLm1ha2VGcmVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LEUucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LEUucHJvdG90eXBlLmlzT3BhcXVlPWZ1bmN0aW9uKCl7cmV0dXJuITF9LEUucHJvdG90eXBlLmdldE9wYXF1ZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIn0sRS5wcm90b3R5cGUuaXNSZXNvbHZlZD1mdW5jdGlvbigpe3JldHVybiExfSxFLnByb3RvdHlwZS5hZG1pdHNFcXVhbGl0eT1mdW5jdGlvbihyKXtyZXR1cm4hMX0sRS5wcm90b3R5cGUuZmxhdHRlbj1mdW5jdGlvbihyKXtyZXR1cm4gdGhpc30sRS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihyLGUpe3JldHVybiByLmVxdWFscyh0aGlzKT9lOnRoaXN9LEUucHJvdG90eXBlLm5vcm1hbGl6ZT1mdW5jdGlvbihyLGUpe3I9PT12b2lkIDAmJihyPTApLGU9PT12b2lkIDAmJihlPXt9KTtmb3IodmFyIG89dGhpcy5nZXRPcmRlcmVkVHlwZVZhcmlhYmxlcygpLHk9dGhpcy5nZXRUeXBlVmFyaWFibGVzKCEwKSxkPW5ldyBNYXAsdj0wLEM9MCxHPW87QzxHLmxlbmd0aDtDKyspe3ZhciBZPUdbQ107aWYoIWQuaGFzKFkpKXt2YXIgSj0iIix6PSsrdjtpZih5LmhhcyhZKSYmKHo9KytyKSx6PD0yNilKPVN0cmluZy5mcm9tQ2hhckNvZGUoImEiLmNoYXJDb2RlQXQoMCkrei0xKTtlbHNlIGZvcig7ej4wOyl7dmFyIHA9LS16JTI2O0o9U3RyaW5nLmZyb21DaGFyQ29kZSgiYSIuY2hhckNvZGVBdCgwKStwKStKLHo9TWF0aC5mbG9vcih6LzI2KX12YXIgYz0iJyI7WS5sZW5ndGg+MiYmWS5jaGFyQXQoMSk9PT0iJyImJihjKz0iJyIpLHkuaGFzKFkpJiYoYys9In4iKSxjKz1KLHkuaGFzKFkpJiYoYz1jLnRvVXBwZXJDYXNlKCkpLGQuc2V0KFksYyl9fXZhciB3PXRoaXMucmVwbGFjZVR5cGVWYXJpYWJsZXMoZCk7cmV0dXJuIGUuc3RyaWN0TW9kZSE9PSExJiYodz13LmZsYXR0ZW4obmV3IE1hcCkpLFt3LHJdfSxFfSgpO3UuVHlwZT1CO3ZhciBNPWZ1bmN0aW9uKEUpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gRS5jYWxsKHRoaXMpfHx0aGlzfXJldHVybiBnKHIsRSksci5wcm90b3R5cGUuaXNSZXNvbHZlZD1mdW5jdGlvbigpe3JldHVybiEwfSxyLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJBbnlUeXBlIn0sci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuImFueSJ9LHIucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihlKXtyZXR1cm4hMH0sci5wcm90b3R5cGUuaW5zdGFudGlhdGU9ZnVuY3Rpb24oZSxvLHkpe3JldHVybiB0aGlzfSxyLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbihlLG8seSl7cmV0dXJuW3ksb119LHIucHJvdG90eXBlLm1ha2VFcVR5cGU9ZnVuY3Rpb24oZSxvKXtyZXR1cm5bdGhpcyxvXX0sci5wcm90b3R5cGUuZ2V0VHlwZVZhcmlhYmxlcz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IE1hcH0sci5wcm90b3R5cGUuZ2V0T3JkZXJlZFR5cGVWYXJpYWJsZXM9ZnVuY3Rpb24oKXtyZXR1cm5bXX0sci5wcm90b3R5cGUucmVwbGFjZVR5cGVWYXJpYWJsZXM9ZnVuY3Rpb24oZSxvKXtyZXR1cm4gdGhpc30scn0oQik7dS5BbnlUeXBlPU07dmFyIFY9ZnVuY3Rpb24oRSl7ZnVuY3Rpb24gcihlLG8seSl7eT09PXZvaWQgMCYmKHk9W10pO3ZhciBkPUUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZC5uYW1lPWUsZC50eXBlPW8sZC5kb21haW49eSxkLmlzRnJlZT0hMSxkfXJldHVybiBnKHIsRSksci5wcm90b3R5cGUuaXNSZXNvbHZlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNSZXNvbHZlZCgpfSxyLnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3ZhciBlPW5ldyByKHRoaXMubmFtZSx0aGlzLnR5cGUuc2ltcGxpZnkoKSx0aGlzLmRvbWFpbik7cmV0dXJuIGUuaXNGcmVlPXRoaXMuaXNGcmVlLGV9LHIucHJvdG90eXBlLm1ha2VGcmVlPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IHIodGhpcy5uYW1lLHRoaXMudHlwZS5tYWtlRnJlZSgpLHRoaXMuZG9tYWluKTtyZXR1cm4gZS5pc0ZyZWU9ITAsZX0sci5wcm90b3R5cGUuZmxhdHRlbj1mdW5jdGlvbihlKXtpZih0aGlzLmRvbWFpbi5sZW5ndGg+MClyZXR1cm4gZT1lLnNldCh0aGlzLm5hbWUsdGhpcy5kb21haW5bMF0pLHRoaXMudHlwZS5mbGF0dGVuKGUpO3ZhciBvPW5ldyByKHRoaXMubmFtZSx0aGlzLnR5cGUuZmxhdHRlbihlKSx0aGlzLmRvbWFpbik7cmV0dXJuIG8uaXNGcmVlPXRoaXMuaXNGcmVlLG99LHIucHJvdG90eXBlLnF1YWxpZnk9ZnVuY3Rpb24oZSxvKXt2YXIgeT1uZXcgcih0aGlzLm5hbWUsdGhpcy50eXBlLnF1YWxpZnkoZSxvKSx0aGlzLmRvbWFpbik7cmV0dXJuIHkuaXNGcmVlPXRoaXMuaXNGcmVlLHl9LHIucHJvdG90eXBlLnByb3BhZ2F0ZT1mdW5jdGlvbihlKXtlPT09dm9pZCAwJiYoZT1uZXcgTWFwKSx0aGlzLmRvbWFpbi5sZW5ndGg+MCYmKGU9ZS5zZXQodGhpcy5uYW1lLHRoaXMuZG9tYWluKSk7dmFyIG89bmV3IHIodGhpcy5uYW1lLHRoaXMudHlwZS5wcm9wYWdhdGUoZSksdGhpcy5kb21haW4pO3JldHVybiBvLmlzRnJlZT10aGlzLmlzRnJlZSxvfSxyLnByb3RvdHlwZS5pc09wYXF1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNPcGFxdWUoKX0sci5wcm90b3R5cGUuZ2V0T3BhcXVlTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuZ2V0T3BhcXVlTmFtZSgpfSxyLnByb3RvdHlwZS5pbnN0YW50aWF0ZT1mdW5jdGlvbihlLG8pe3ZhciB5PW5ldyByKHRoaXMubmFtZSx0aGlzLnR5cGUuaW5zdGFudGlhdGUoZSxvKSx0aGlzLmRvbWFpbik7cmV0dXJuIHkuaXNGcmVlPXRoaXMuaXNGcmVlLHl9LHIucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIlR5cGVWYXJpYWJsZUJpbmQifSxyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihlKXtlPT09dm9pZCAwJiYoZT17fSk7Zm9yKHZhciBvPW5ldyBTZXQseT1uZXcgU2V0LGQ9dGhpcztkIGluc3RhbmNlb2YgcjspZC5pc0ZyZWU/bz1vLmFkZChbZC5uYW1lLGQuZG9tYWluXSk6eT15LmFkZChbZC5uYW1lLGQuZG9tYWluXSksZD1kLnR5cGU7dmFyIHY9IiI7cmV0dXJuIHkuc2l6ZT4wJiYodis9Ilx1MjIwMCIseS5mb3JFYWNoKGZ1bmN0aW9uKEMpe2lmKGUuc2hvd1R5cGVWYXJpYWJsZXNBc1VuaWNvZGU9PT0hMCYmcS5oYXMoQ1swXSk/dis9IiAiK3EuZ2V0KENbMF0pOmUuc2hvd1R5cGVWYXJpYWJsZXNBc1VuaWNvZGU9PT0hMCYmcS5oYXMoQ1swXS5zdWJzdHIoMSkpP3YrPSIgJyIrcS5nZXQoQ1swXS5zdWJzdHIoMSkpOnYrPSIgIitDWzBdLENbMV0ubGVuZ3RoPjApe3YrPSIgXHUyMjA4IHsiO2Zvcih2YXIgRz0wO0c8Q1sxXS5sZW5ndGg7KytHKUc+MCYmKHYrPSIsICIpLHYrPUNbMV1bR107dis9In0ifX0pLHYrPSIgLiAiKSx2Kz1kLnRvU3RyaW5nKGUpLG8uc2l6ZT4wJiYodis9IiwiLG8uZm9yRWFjaChmdW5jdGlvbihDKXtpZihlLnNob3dUeXBlVmFyaWFibGVzQXNVbmljb2RlPT09ITAmJnEuaGFzKENbMF0pP3YrPSIgIitxLmdldChDWzBdKTplLnNob3dUeXBlVmFyaWFibGVzQXNVbmljb2RlPT09ITAmJnEuaGFzKENbMF0uc3Vic3RyKDEpKT92Kz0iICciK3EuZ2V0KENbMF0uc3Vic3RyKDEpKTp2Kz0iICIrQ1swXSxDWzFdLmxlbmd0aD4wKXt2Kz0iIFx1MjIwOCB7Ijtmb3IodmFyIEc9MDtHPENbMV0ubGVuZ3RoOysrRylHPjAmJih2Kz0iLCAiKSx2Kz1DWzFdW0ddO3YrPSJ9In19KSx2Kz0iIGZyZWUiKSx2fSxyLnByb3RvdHlwZS5nZXRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKGUpe3ZhciBvPXRoaXM7ZT09PXZvaWQgMCYmKGU9ITEpO3ZhciB5PXRoaXMudHlwZS5nZXRUeXBlVmFyaWFibGVzKGUpLGQ9bmV3IE1hcDtyZXR1cm4geS5mb3JFYWNoKGZ1bmN0aW9uKHYsQyl7Qz09PW8ubmFtZSYmZSE9PW8uaXNGcmVlfHwoZD1kLmhhcyhDKT9kLnNldChDLEQubWVyZ2VEb21haW4odixkLmdldChDKSkpOmQuc2V0KEMsdikpfSksZSYmdGhpcy5pc0ZyZWUmJiFkLmhhcyh0aGlzLm5hbWUpJiYoZD1kLnNldCh0aGlzLm5hbWUsdGhpcy5kb21haW4pKSxkfSxyLnByb3RvdHlwZS5nZXRPcmRlcmVkVHlwZVZhcmlhYmxlcz1mdW5jdGlvbigpe3JldHVyblt0aGlzLm5hbWVdLmNvbmNhdCh0aGlzLnR5cGUuZ2V0T3JkZXJlZFR5cGVWYXJpYWJsZXMoKSl9LHIucHJvdG90eXBlLnJlcGxhY2VUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKGUsbyl7aWYobz09PXZvaWQgMCYmKG89bmV3IFNldCksZS5oYXModGhpcy5uYW1lKSl7dmFyIHk9bmV3IHIoZS5nZXQodGhpcy5uYW1lKSx0aGlzLnR5cGUucmVwbGFjZVR5cGVWYXJpYWJsZXMoZSxvKSx0aGlzLmRvbWFpbik7cmV0dXJuIG8uaGFzKHRoaXMubmFtZSk/eS5pc0ZyZWU9ITA6eS5pc0ZyZWU9dGhpcy5pc0ZyZWUseX1yZXR1cm4oeT1uZXcgcih0aGlzLm5hbWUsdGhpcy50eXBlLnJlcGxhY2VUeXBlVmFyaWFibGVzKGUsbyksdGhpcy5kb21haW4pKS5pc0ZyZWU9dGhpcy5pc0ZyZWUseX0sci5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgciYmZS5uYW1lPT09dGhpcy5uYW1lJiZlLnR5cGUuZXF1YWxzKHRoaXMudHlwZSl9LHJ9KEIpO3UuVHlwZVZhcmlhYmxlQmluZD1WO3ZhciBEPWZ1bmN0aW9uKEUpe2Z1bmN0aW9uIHIoZSxvKXtvPT09dm9pZCAwJiYobz1bXSk7dmFyIHk9RS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB5Lm5hbWU9ZSx5LmRvbWFpbj1vLHkuaXNGcmVlPSExLHl9cmV0dXJuIGcocixFKSxyLm1lcmdlRG9tYWluPWZ1bmN0aW9uKGUsbyl7aWYoZS5sZW5ndGg9PT0wKXJldHVybiBvO2lmKG8ubGVuZ3RoPT09MClyZXR1cm4gZTtmb3IodmFyIHk9W10sZD0wLHY9ZTtkPHYubGVuZ3RoO2QrKylmb3IodmFyIEM9dltkXSxHPTAsWT1vO0c8WS5sZW5ndGg7RysrKXt2YXIgSj1ZW0ddO0MuZXF1YWxzKEopJiZ5LnB1c2goQyl9cmV0dXJuIHl9LHIuZ2V0VW51c2VkVHlwZVZhcmlhYmxlTmFtZT1mdW5jdGlvbihlLG8seSxkLHYpe289PT12b2lkIDAmJihvPSInKnQwIikseT09PXZvaWQgMCYmKHk9bmV3IFNldCksZD09PXZvaWQgMCYmKGQ9bmV3IE1hcCksdj09PXZvaWQgMCYmKHY9bmV3IFNldCk7Zm9yKHZhciBDPStvLnN1YnN0cmluZygzKSsxOzsrK0MpaWYobz0iJyIrb1sxXStvWzJdK0MsIXYuaGFzKG8pJiYheS5oYXMobykmJiFkLmhhcyhvKSYmZS5nZXRTdGF0aWNWYWx1ZShvKT09PXZvaWQgMClyZXR1cm4gbzt0aHJvdyBuZXcgcy5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIiIpfSxyLnByb3RvdHlwZS5pc1Jlc29sdmVkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LHIucHJvdG90eXBlLm1ha2VGcmVlPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IHIodGhpcy5uYW1lLHRoaXMuZG9tYWluKTtyZXR1cm4gZS5pc0ZyZWU9ITAsZX0sci5wcm90b3R5cGUuZmxhdHRlbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kb21haW4ubGVuZ3RoPjA/KGU9ZS5zZXQodGhpcy5uYW1lLHRoaXMuZG9tYWluWzBdKSx0aGlzLmRvbWFpblswXSk6ZS5oYXModGhpcy5uYW1lKT9lLmdldCh0aGlzLm5hbWUpOnRoaXN9LHIucHJvdG90eXBlLnByb3BhZ2F0ZT1mdW5jdGlvbihlKXtlPT09dm9pZCAwJiYoZT1uZXcgTWFwKTt2YXIgbz1bXTtlLmhhcyh0aGlzLm5hbWUpJiYobz1lLmdldCh0aGlzLm5hbWUpKTt2YXIgeT1uZXcgcih0aGlzLm5hbWUsbyk7cmV0dXJuIHkuaXNGcmVlPXRoaXMuaXNGcmVlLHl9LHIucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIlR5cGVWYXJpYWJsZSJ9LHIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09dm9pZCAwJiYoZT17fSksZS5zaG93VHlwZVZhcmlhYmxlc0FzVW5pY29kZT09PSEwJiZxLmhhcyh0aGlzLm5hbWUpP3EuZ2V0KHRoaXMubmFtZSk6ZS5zaG93VHlwZVZhcmlhYmxlc0FzVW5pY29kZT09PSEwJiZxLmhhcyh0aGlzLm5hbWUuc3Vic3RyKDEpKT8iJyIrcS5nZXQodGhpcy5uYW1lLnN1YnN0cigxKSk6dGhpcy5uYW1lfSxyLnByb3RvdHlwZS5pbnN0YW50aWF0ZT1mdW5jdGlvbihlLG8seSl7aWYoeT09PXZvaWQgMCYmKHk9bmV3IFNldCksIW8uaGFzKHRoaXMubmFtZSkpcmV0dXJuIHRoaXM7aWYoeS5oYXModGhpcy5uYW1lKSl0aHJvdyBuZXcgcy5FbGFib3JhdGlvbkVycm9yKCdUeXBlIGNsYXNoLiBBbiBleHByZXNzaW9uIG9mIHR5cGUgIicrdGhpcy5ub3JtYWxpemUoKVswXSsnIiBjYW5ub3QgaGF2ZSB0eXBlICInK28uZ2V0KHRoaXMubmFtZSlbMF0ubm9ybWFsaXplKClbMF0rJyIgYmVjYXVzZSBvZiBjaXJjdWxhcml0eS4nKTt2YXIgZD1uZXcgU2V0O3kuZm9yRWFjaChmdW5jdGlvbihDKXtkLmFkZChDKX0pLGQuYWRkKHRoaXMubmFtZSk7dmFyIHY9by5nZXQodGhpcy5uYW1lKVswXTtyZXR1cm4gdiBpbnN0YW5jZW9mIGgmJiF2LmNvbXBsZXRlJiZ2LnNvdXJjZVR5VmFyPT09dm9pZCAwJiYodi5zb3VyY2VUeVZhcj10aGlzLm5hbWUpLHYuaW5zdGFudGlhdGUoZSxvLGQpfSxyLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbihlLG8seSl7aWYoeSBpbnN0YW5jZW9mIE0pcmV0dXJuW3RoaXMsb107dmFyIGQ9dGhpcy5pbnN0YW50aWF0ZShlLG8pO2lmKGQgaW5zdGFuY2VvZiByKXt2YXIgdj15Lmluc3RhbnRpYXRlKGUsbyk7aWYodiBpbnN0YW5jZW9mIHIpe2lmKGQubmFtZT09PXYubmFtZSl7dmFyIEM9ci5tZXJnZURvbWFpbihkLmRvbWFpbix2LmRvbWFpbik7aWYoQy5sZW5ndGg9PT0wJiZkLmRvbWFpbi5sZW5ndGgrdi5kb21haW4ubGVuZ3RoPjApdGhyb3dbJ0Nhbm5vdCBtZXJnZSBkb21haW5zIG9mICInK2Qubm9ybWFsaXplKDAse3N0cmljdE1vZGU6ITF9KVswXSsnIiBhbmQgIicreS5ub3JtYWxpemUoMCx7c3RyaWN0TW9kZTohMX0pWzBdKyciICh7JytkLmRvbWFpbisifSBhbmQgeyIrdi5kb21haW4rIn0pIl07dmFyIEc9bmV3IHIoZC5uYW1lLEMpO3JldHVybiBHLmlzRnJlZT1kLmlzRnJlZSYmdi5pc0ZyZWUsW0csb119dmFyIFk9bmV3IE1hcCxKPWQ7aWYoZC5uYW1lPHYubmFtZT8oZC5kb21haW49ci5tZXJnZURvbWFpbihkLmRvbWFpbix2LmRvbWFpbiksWS5zZXQodi5uYW1lLGQubmFtZSkpOih2LmRvbWFpbj1yLm1lcmdlRG9tYWluKGQuZG9tYWluLHYuZG9tYWluKSxZLnNldChkLm5hbWUsdi5uYW1lKSxKPXYpLEouZG9tYWluLmxlbmd0aD09PTAmJmQuZG9tYWluLmxlbmd0aCt2LmRvbWFpbi5sZW5ndGg+MCl0aHJvd1snQ2Fubm90IG1lcmdlIGRvbWFpbnMgb2YgIicrdGhpcy5ub3JtYWxpemUoMCx7c3RyaWN0TW9kZTohMX0pWzBdKyciIGFuZCAiJyt5Lm5vcm1hbGl6ZSgwLHtzdHJpY3RNb2RlOiExfSlbMF0rJyIuICh7JytkLmRvbWFpbisifSBhbmQgeyIrdi5kb21haW4rIn0pIl07dmFyIHo9bmV3IE1hcDtvLmZvckVhY2goZnVuY3Rpb24odyxUKXt6PXouc2V0KFQsW3dbMF0ucmVwbGFjZVR5cGVWYXJpYWJsZXMoWSksd1sxXV0pfSksSi5pc0ZyZWU9ZC5pc0ZyZWUmJnYuaXNGcmVlLGQubmFtZTx2Lm5hbWU/ei5zZXQodi5uYW1lLFtkLEouaXNGcmVlXSk6ei5zZXQoZC5uYW1lLFt2LEouaXNGcmVlXSk7dmFyIHA9Si5kb21haW47cmV0dXJuIHouaGFzKCIkIitkLm5hbWUpJiYocD1yLm1lcmdlRG9tYWluKHAsei5nZXQoIiQiK2QubmFtZSlbMF0uZG9tYWluKSksei5oYXMoIiQiK3YubmFtZSkmJihwPXIubWVyZ2VEb21haW4ocCx6LmdldCgiJCIrdi5uYW1lKVswXS5kb21haW4pKSx6LnNldCgiJCIrZC5uYW1lLFtuZXcgcihkLm5hbWUscCksSi5pc0ZyZWVdKSx6LnNldCgiJCIrdi5uYW1lLFtuZXcgcih2Lm5hbWUscCksSi5pc0ZyZWVdKSxbSix6XX1pZih2LmdldFR5cGVWYXJpYWJsZXMoKS5oYXMoZC5uYW1lKSl0aHJvdyBuZXcgcy5FbGFib3JhdGlvbkVycm9yKCdUeXBlIGNsYXNoLiBBbiBleHByZXNzaW9uIG9mIHR5cGUgIicrZC5ub3JtYWxpemUoKVswXSsnIiBjYW5ub3QgaGF2ZSB0eXBlICInK3Yubm9ybWFsaXplKClbMF0rJyIgYmVjYXVzZSBvZiBjaXJjdWxhcml0eS4nKTtpZihkLmlzRnJlZSYmKHY9di5tYWtlRnJlZSgpKSxkLmFkbWl0c0VxdWFsaXR5KGUpJiYhdi5hZG1pdHNFcXVhbGl0eShlKSl7dmFyIGM9di5tYWtlRXFUeXBlKGUsbyk7aWYoIWNbMF0uYWRtaXRzRXF1YWxpdHkoZSkpdGhyb3dbJ1R5cGUgIicrdi5ub3JtYWxpemUoKVswXSsnIiBkb2VzIG5vdCBhZG1pdCBlcXVhbGl0eS4nLGQsdl07dj1jWzBdLG89Y1sxXX1pZihkLmRvbWFpbi5sZW5ndGg+MCYmci5tZXJnZURvbWFpbihkLmRvbWFpbixbdl0pLmxlbmd0aD09PTApdGhyb3dbJ1R5cGUgIicrdi5ub3JtYWxpemUoMCx7c3RyaWN0TW9kZTohMX0pWzBdKyciIGlzIG5vdCBwYXJ0IG9mIHRoZSBkb21haW4gb2YgIicrZC5ub3JtYWxpemUoMCx7c3RyaWN0TW9kZTohMX0pWzBdKyciICh7JytkLmRvbWFpbisifSkuIl07cmV0dXJuW3Ysby5zZXQoZC5uYW1lLFt2LGQuaXNGcmVlXSldfXJldHVybiBkLm1lcmdlKGUsbyx5KX0sci5wcm90b3R5cGUubWFrZUVxVHlwZT1mdW5jdGlvbihlLG8pe2lmKHRoaXMuYWRtaXRzRXF1YWxpdHkoZSkpcmV0dXJuW3RoaXMsb107aWYoby5oYXModGhpcy5uYW1lKSl7dmFyIHk9by5nZXQodGhpcy5uYW1lKVswXS5tYWtlRXFUeXBlKGUsbyk7aWYoeVswXWluc3RhbmNlb2YgciYmeVswXS5uYW1lIT09IiciK3RoaXMubmFtZSl7bz15WzFdO3ZhciBkPW5ldyByKCInIit0aGlzLm5hbWUsdGhpcy5kb21haW4pO2QuaXNGcmVlPXRoaXMuaXNGcmVlLG89by5zZXQoZC5uYW1lLFt5WzBdLGQuaXNGcmVlXSl9fXZhciB2PW5ldyByKCInIit0aGlzLm5hbWUsdGhpcy5kb21haW4pO3JldHVyblt2LG8uc2V0KHRoaXMubmFtZSxbdix0aGlzLmlzRnJlZV0pXX0sci5wcm90b3R5cGUuZ2V0VHlwZVZhcmlhYmxlcz1mdW5jdGlvbihlKXtlPT09dm9pZCAwJiYoZT0hMSk7dmFyIG89bmV3IE1hcDtyZXR1cm4gZSYmIXRoaXMuaXNGcmVlfHwobz1vLnNldCh0aGlzLm5hbWUsdGhpcy5kb21haW4pKSxvfSxyLnByb3RvdHlwZS5nZXRPcmRlcmVkVHlwZVZhcmlhYmxlcz1mdW5jdGlvbigpe3JldHVyblt0aGlzLm5hbWVdfSxyLnByb3RvdHlwZS5yZXBsYWNlVHlwZVZhcmlhYmxlcz1mdW5jdGlvbihlLG8pe2lmKG89PT12b2lkIDAmJihvPW5ldyBTZXQpLGUuaGFzKHRoaXMubmFtZSkpe3ZhciB5PW5ldyByKGUuZ2V0KHRoaXMubmFtZSksdGhpcy5kb21haW4pO3JldHVybiBvLmhhcyh0aGlzLm5hbWUpP3kuaXNGcmVlPSEwOnkuaXNGcmVlPXRoaXMuaXNGcmVlLHl9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmFkbWl0c0VxdWFsaXR5PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm5hbWVbMV09PT0iJyJ9LHIucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIE18fGUgaW5zdGFuY2VvZiByJiZ0aGlzLm5hbWU9PT1lLm5hbWV9LHJ9KEIpO3UuVHlwZVZhcmlhYmxlPUQ7dmFyIGg9ZnVuY3Rpb24oRSl7ZnVuY3Rpb24gcihlLG8seSl7bz09PXZvaWQgMCYmKG89ITApLHk9PT12b2lkIDAmJih5PXZvaWQgMCk7dmFyIGQ9RS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBkLmVsZW1lbnRzPWUsZC5jb21wbGV0ZT1vLGQuc291cmNlVHlWYXI9eSxkLnR1cGxlZnkoKSxkLmNvbXBsZXRlJiYoZC5zb3VyY2VUeVZhcj12b2lkIDApLGR9cmV0dXJuIGcocixFKSxyLnByb3RvdHlwZS5pc1Jlc29sdmVkPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29tcGxldGUpcmV0dXJuITE7dmFyIGU9ITA7cmV0dXJuIHRoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihvLHkpe2U9ZSYmby5pc1Jlc29sdmVkKCl9KSxlfSxyLnByb3RvdHlwZS5tYWtlRnJlZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBNYXA7cmV0dXJuIHRoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihvLHkpe2Uuc2V0KHksby5tYWtlRnJlZSgpKX0pLG5ldyByKGUsdGhpcy5jb21wbGV0ZSx0aGlzLnNvdXJjZVR5VmFyKX0sci5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLG8pe2lmKGUuZXF1YWxzKHRoaXMpKXJldHVybiBvO3ZhciB5PW5ldyBNYXA7cmV0dXJuIHRoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihkLHYpe3kuc2V0KHYsZC5yZXBsYWNlKGUsbykpfSksbmV3IHIoeSx0aGlzLmNvbXBsZXRlLHRoaXMuc291cmNlVHlWYXIpfSxyLnByb3RvdHlwZS5mbGF0dGVuPWZ1bmN0aW9uKGUpe3ZhciBvPW5ldyBNYXA7cmV0dXJuIHRoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbih5LGQpe28uc2V0KGQseS5mbGF0dGVuKGUpKX0pLG5ldyByKG8sdGhpcy5jb21wbGV0ZSx0aGlzLnNvdXJjZVR5VmFyKX0sci5wcm90b3R5cGUuaW5zdGFudGlhdGU9ZnVuY3Rpb24oZSxvLHkpe3k9PT12b2lkIDAmJih5PW5ldyBTZXQpO3ZhciBkPW5ldyBNYXA7cmV0dXJuIHRoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbih2LEMpe2Quc2V0KEMsdi5pbnN0YW50aWF0ZShlLG8seSkpfSksbmV3IHIoZCx0aGlzLmNvbXBsZXRlLHRoaXMuc291cmNlVHlWYXIpfSxyLnByb3RvdHlwZS5xdWFsaWZ5PWZ1bmN0aW9uKGUsbyl7dmFyIHk9bmV3IE1hcDtyZXR1cm4gdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGQsdil7eS5zZXQodixkLnF1YWxpZnkoZSxvKSl9KSxuZXcgcih5LHRoaXMuY29tcGxldGUsdGhpcy5zb3VyY2VUeVZhcil9LHIucHJvdG90eXBlLnByb3BhZ2F0ZT1mdW5jdGlvbihlKXtlPT09dm9pZCAwJiYoZT1uZXcgTWFwKTt2YXIgbz1uZXcgTWFwO3JldHVybiB0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oeSxkKXtvLnNldChkLHkucHJvcGFnYXRlKGUpKX0pLG5ldyByKG8sdGhpcy5jb21wbGV0ZSx0aGlzLnNvdXJjZVR5VmFyKX0sci5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24oZSxvLHkpe3ZhciBkPXRoaXM7aWYoeSBpbnN0YW5jZW9mIER8fHkgaW5zdGFuY2VvZiBNKXJldHVybiB5Lm1lcmdlKGUsbyx0aGlzKTtpZigoeT15Lmluc3RhbnRpYXRlKGUsbykpaW5zdGFuY2VvZiByKXtpZighdGhpcy5jb21wbGV0ZSYmeS5jb21wbGV0ZSlyZXR1cm4geS5tZXJnZShlLG8sdGhpcyk7dmFyIHY9bmV3IE1hcCxDPW87eS5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKEoseil7aWYoZC5jb21wbGV0ZSYmIWQuZWxlbWVudHMuaGFzKHopKXRocm93W2BSZWNvcmRzIGRvbid0IGFncmVlIG9uIG1lbWJlcnMgKCJgK3orJyIgb2NjdXJzIG9ubHkgb25jZS4pJyxkLmluc3RhbnRpYXRlKGUsQykseS5pbnN0YW50aWF0ZShlLEMpXTtpZihkLmVsZW1lbnRzLmhhcyh6KSl7dmFyIHA9Si5tZXJnZShlLEMsZC5lbGVtZW50cy5nZXQoeikpO3Y9di5zZXQoeixwWzBdKSxDPXBbMV19ZWxzZSB2PXYuc2V0KHosSi5pbnN0YW50aWF0ZShlLEMpKX0pLHkuY29tcGxldGU/dGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKEoseil7aWYoIXkuZWxlbWVudHMuaGFzKHopKXRocm93W2BSZWNvcmRzIGRvbid0IGFncmVlIG9uIG1lbWJlcnMgKCJgK3orJyIgb2NjdXJzIG9ubHkgb25jZS4pJyxkLmluc3RhbnRpYXRlKGUsQykseS5pbnN0YW50aWF0ZShlLEMpXX0pOnRoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihKLHope3Y9di5zZXQoeixKLmluc3RhbnRpYXRlKGUsQykpfSk7dmFyIEc9dGhpcy5jb21wbGV0ZT92b2lkIDA6dGhpcy5zb3VyY2VUeVZhcjtpZihHPT09dm9pZCAwJiYheS5jb21wbGV0ZSYmKEc9eS5zb3VyY2VUeVZhcikhPT12b2lkIDApe3ZhciBZPUMuZ2V0KEcpO1khPT12b2lkIDAmJihDPUMuc2V0KEcsW25ldyByKHYsdGhpcy5jb21wbGV0ZXx8eS5jb21wbGV0ZSxHKSxZWzFdXSkpfXJldHVybltuZXcgcih2LHRoaXMuY29tcGxldGV8fHkuY29tcGxldGUsRyksQ119dGhyb3dbJ0Nhbm5vdCBtZXJnZSAiJyt0aGlzLmluc3RhbnRpYXRlKGUsbykubm9ybWFsaXplKClbMF0rJyIgYW5kICInK3kuaW5zdGFudGlhdGUoZSxvKS5ub3JtYWxpemUoKVswXSsnIi4nLHRoaXMudHlwZU5hbWUoKSx5LnR5cGVOYW1lKCldfSxyLnByb3RvdHlwZS5tYWtlRXFUeXBlPWZ1bmN0aW9uKGUsbyl7dmFyIHk9bmV3IE1hcDtyZXR1cm4gdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGQsdil7dmFyIEM9ZC5tYWtlRXFUeXBlKGUsbyk7eS5zZXQodixDWzBdKSxvPUNbMV19KSxbbmV3IHIoeSx0aGlzLmNvbXBsZXRlLHRoaXMuc291cmNlVHlWYXIpLG9dfSxyLnByb3RvdHlwZS5nZXRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKGUpe2U9PT12b2lkIDAmJihlPSExKTt2YXIgbz1uZXcgTWFwO3JldHVybiB0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oeSl7eS5nZXRUeXBlVmFyaWFibGVzKGUpLmZvckVhY2goZnVuY3Rpb24oZCx2KXtvPW8uaGFzKHYpP28uc2V0KHYsRC5tZXJnZURvbWFpbihkLG8uZ2V0KHYpKSk6by5zZXQodixkKX0pfSksb30sci5wcm90b3R5cGUuZ2V0T3JkZXJlZFR5cGVWYXJpYWJsZXM9ZnVuY3Rpb24oKXt2YXIgZT1bXTtyZXR1cm4gdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKG8pe2U9ZS5jb25jYXQoby5nZXRPcmRlcmVkVHlwZVZhcmlhYmxlcygpKX0pLGV9LHIucHJvdG90eXBlLnJlcGxhY2VUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKGUsbyl7bz09PXZvaWQgMCYmKG89bmV3IFNldCk7dmFyIHk9bmV3IE1hcDtyZXR1cm4gdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGQsdil7eT15LnNldCh2LGQucmVwbGFjZVR5cGVWYXJpYWJsZXMoZSxvKSl9KSxuZXcgcih5LHRoaXMuY29tcGxldGUsdGhpcy5zb3VyY2VUeVZhcil9LHIucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuZWxlbWVudHMuaGFzKGUpKXRocm93IG5ldyBzLkVsYWJvcmF0aW9uRXJyb3IoIlRyaWVkIGFjY2Vzc2luZyBub24tZXhpc3RpbmcgcmVjb3JkIHBhcnQuIik7cmV0dXJuIHRoaXMuZWxlbWVudHMuZ2V0KGUpfSxyLnByb3RvdHlwZS5oYXNUeXBlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVsZW1lbnRzLmhhcyhlKX0sci5wcm90b3R5cGUuc2V0VHlwZT1mdW5jdGlvbihlLG8pe2lmKHRoaXMuY29tcGxldGUpdGhyb3cgbmV3IHMuRWxhYm9yYXRpb25FcnJvcigiRG9uJ3QgdHJ5IHRvIGNoYW5nZSBhIGNvbXBsZXRlIHJlY29yZC4iKTt0aGlzLmVsZW1lbnRzPXRoaXMuZWxlbWVudHMuc2V0KGUsbyl9LHIucHJvdG90eXBlLmFkbWl0c0VxdWFsaXR5PWZ1bmN0aW9uKGUpe3ZhciBvPSEwO3JldHVybiB0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oeSxkKXt5LmFkbWl0c0VxdWFsaXR5KGUpfHwobz0hMSl9KSxvfSxyLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJSZWNvcmRUeXBlIn0sci5wcm90b3R5cGUuaXNUdXBsZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmVsZW1lbnRzLnNpemUhPT0xLG89MTtvPD10aGlzLmVsZW1lbnRzLnNpemU7KytvKXRoaXMuZWxlbWVudHMuaGFzKCIiK28pfHwoZT0hMSk7cmV0dXJuIGUmJnRoaXMuY29tcGxldGV9LHIucHJvdG90eXBlLnR1cGxlZnk9ZnVuY3Rpb24oKXtpZih0aGlzLmlzVHVwbGUoKSl7Zm9yKHZhciBlPW5ldyBNYXAsbz0xO288PXRoaXMuZWxlbWVudHMuc2l6ZTsrK28pe3ZhciB5PXRoaXMuZWxlbWVudHMuZ2V0KCIiK28pO2U9ZS5zZXQoIiIrbyx5KX10aGlzLmVsZW1lbnRzPWV9fSxyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihlKXtpZihlPT09dm9pZCAwJiYoZT17fSksdGhpcy5pc1R1cGxlKCkmJnRoaXMuY29tcGxldGUpe2lmKHRoaXMuZWxlbWVudHMuc2l6ZT09PTApcmV0dXJuInVuaXQiO2Zvcih2YXIgbz0iIix5PTE7eTw9dGhpcy5lbGVtZW50cy5zaXplOysreSl7eT4xJiYobys9IiAqICIpO3ZhciBkPXRoaXMuZWxlbWVudHMuZ2V0KCIiK3kpO2QgaW5zdGFuY2VvZiBBfHxkIGluc3RhbmNlb2YgciYmZC5lbGVtZW50cy5zaXplIT09MD9vKz0iKCIrZC50b1N0cmluZyhlKSsiKSI6bys9ZC50b1N0cmluZyhlKX1yZXR1cm4gbysiIn12YXIgdj0ieyIsQz0hMDtyZXR1cm4gdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKEcsWSl7Qz9DPSExOnYrPSIsICIsdis9WSsiOiAiK0cudG9TdHJpbmcoZSl9KSx0aGlzLmNvbXBsZXRlfHwoQ3x8KHYrPSIsICIpLHYrPSIuLi4iKSx2KyJ9In0sci5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgTWFwO3JldHVybiB0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24obyx5KXtlLnNldCh5LG8uc2ltcGxpZnkoKSl9KSxuZXcgcihlLHRoaXMuY29tcGxldGUsdGhpcy5zb3VyY2VUeVZhcil9LHIucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgTSlyZXR1cm4hMDtpZighKGUgaW5zdGFuY2VvZiByKXx8dGhpcy5jb21wbGV0ZSE9PWUuY29tcGxldGV8fHRoaXMuZWxlbWVudHMuc2l6ZSE9PWUuZWxlbWVudHMuc2l6ZSlyZXR1cm4hMTt2YXIgbz0hMDtyZXR1cm4gdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKHksZCl7eS5lcXVhbHMoZS5lbGVtZW50cy5nZXQoZCkpfHwobz0hMSl9KSxvfSxyfShCKTt1LlJlY29yZFR5cGU9aDt2YXIgQT1mdW5jdGlvbihFKXtmdW5jdGlvbiByKGUsbyl7dmFyIHk9RS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB5LnBhcmFtZXRlclR5cGU9ZSx5LnJldHVyblR5cGU9byx5fXJldHVybiBnKHIsRSksci5wcm90b3R5cGUuaXNSZXNvbHZlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmFtZXRlclR5cGUuaXNSZXNvbHZlZCgpJiZ0aGlzLnJldHVyblR5cGUuaXNSZXNvbHZlZCgpfSxyLnByb3RvdHlwZS5tYWtlRnJlZT1mdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLnBhcmFtZXRlclR5cGUubWFrZUZyZWUoKSx0aGlzLnJldHVyblR5cGUubWFrZUZyZWUoKSl9LHIucHJvdG90eXBlLmZsYXR0ZW49ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyByKHRoaXMucGFyYW1ldGVyVHlwZS5mbGF0dGVuKGUpLHRoaXMucmV0dXJuVHlwZS5mbGF0dGVuKGUpKX0sci5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLG8pe3JldHVybiB0aGlzLmVxdWFscyhlKT9vOm5ldyByKHRoaXMucGFyYW1ldGVyVHlwZS5yZXBsYWNlKGUsbyksdGhpcy5yZXR1cm5UeXBlLnJlcGxhY2UoZSxvKSl9LHIucHJvdG90eXBlLmluc3RhbnRpYXRlPWZ1bmN0aW9uKGUsbyx5KXtyZXR1cm4geT09PXZvaWQgMCYmKHk9bmV3IFNldCksbmV3IHIodGhpcy5wYXJhbWV0ZXJUeXBlLmluc3RhbnRpYXRlKGUsbyx5KSx0aGlzLnJldHVyblR5cGUuaW5zdGFudGlhdGUoZSxvLHkpKX0sci5wcm90b3R5cGUucXVhbGlmeT1mdW5jdGlvbihlLG8pe3JldHVybiBuZXcgcih0aGlzLnBhcmFtZXRlclR5cGUucXVhbGlmeShlLG8pLHRoaXMucmV0dXJuVHlwZS5xdWFsaWZ5KGUsbykpfSxyLnByb3RvdHlwZS5wcm9wYWdhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT12b2lkIDAmJihlPW5ldyBNYXApLG5ldyByKHRoaXMucGFyYW1ldGVyVHlwZS5wcm9wYWdhdGUoZSksdGhpcy5yZXR1cm5UeXBlLnByb3BhZ2F0ZShlKSl9LHIucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKGUsbyx5KXtpZih5IGluc3RhbmNlb2YgRHx8eSBpbnN0YW5jZW9mIE0pcmV0dXJuIHkubWVyZ2UoZSxvLHRoaXMpO3ZhciBkPXkuaW5zdGFudGlhdGUoZSxvKTtpZihkIGluc3RhbmNlb2Ygcil7dmFyIHY9dGhpcy5wYXJhbWV0ZXJUeXBlLm1lcmdlKGUsbyxkLnBhcmFtZXRlclR5cGUpLEM9dGhpcy5yZXR1cm5UeXBlLm1lcmdlKGUsdlsxXSxkLnJldHVyblR5cGUpO3JldHVybltuZXcgcih2WzBdLENbMF0pLENbMV1dfXRocm93WydDYW5ub3QgbWVyZ2UgIicrdGhpcy5pbnN0YW50aWF0ZShlLG8pLm5vcm1hbGl6ZSgpWzBdKyciIGFuZCAiJyt5Lmluc3RhbnRpYXRlKGUsbykubm9ybWFsaXplKClbMF0rJyIuJyx0aGlzLnR5cGVOYW1lKCkseS50eXBlTmFtZSgpXX0sci5wcm90b3R5cGUubWFrZUVxVHlwZT1mdW5jdGlvbihlLG8pe3JldHVyblt0aGlzLG9dfSxyLnByb3RvdHlwZS5nZXRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKGUpe2U9PT12b2lkIDAmJihlPSExKTt2YXIgbz1uZXcgTWFwO3JldHVybiB0aGlzLnBhcmFtZXRlclR5cGUuZ2V0VHlwZVZhcmlhYmxlcyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHksZCl7bz1vLmhhcyhkKT9vLnNldChkLEQubWVyZ2VEb21haW4oeSxvLmdldChkKSkpOm8uc2V0KGQseSl9KSx0aGlzLnJldHVyblR5cGUuZ2V0VHlwZVZhcmlhYmxlcyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHksZCl7bz1vLmhhcyhkKT9vLnNldChkLEQubWVyZ2VEb21haW4oeSxvLmdldChkKSkpOm8uc2V0KGQseSl9KSxvfSxyLnByb3RvdHlwZS5nZXRPcmRlcmVkVHlwZVZhcmlhYmxlcz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybihlPWUuY29uY2F0KHRoaXMucGFyYW1ldGVyVHlwZS5nZXRPcmRlcmVkVHlwZVZhcmlhYmxlcygpKSkuY29uY2F0KHRoaXMucmV0dXJuVHlwZS5nZXRPcmRlcmVkVHlwZVZhcmlhYmxlcygpKX0sci5wcm90b3R5cGUucmVwbGFjZVR5cGVWYXJpYWJsZXM9ZnVuY3Rpb24oZSxvKXtyZXR1cm4gbz09PXZvaWQgMCYmKG89bmV3IFNldCksbmV3IHIodGhpcy5wYXJhbWV0ZXJUeXBlLnJlcGxhY2VUeXBlVmFyaWFibGVzKGUsbyksdGhpcy5yZXR1cm5UeXBlLnJlcGxhY2VUeXBlVmFyaWFibGVzKGUsbykpfSxyLnByb3RvdHlwZS5hZG1pdHNFcXVhbGl0eT1mdW5jdGlvbihlKXtyZXR1cm4hMX0sci5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iRnVuY3Rpb25UeXBlIn0sci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT12b2lkIDAmJihlPXt9KSx0aGlzLnBhcmFtZXRlclR5cGUgaW5zdGFuY2VvZiByPyIoIit0aGlzLnBhcmFtZXRlclR5cGUudG9TdHJpbmcoZSkrIikgXHUyMTkyICIrdGhpcy5yZXR1cm5UeXBlLnRvU3RyaW5nKGUpOnRoaXMucGFyYW1ldGVyVHlwZS50b1N0cmluZyhlKSsiIFx1MjE5MiAiK3RoaXMucmV0dXJuVHlwZS50b1N0cmluZyhlKX0sci5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcy5wYXJhbWV0ZXJUeXBlLnNpbXBsaWZ5KCksdGhpcy5yZXR1cm5UeXBlLnNpbXBsaWZ5KCkpfSxyLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBNfHxlIGluc3RhbmNlb2YgciYmdGhpcy5wYXJhbWV0ZXJUeXBlLmVxdWFscyhlLnBhcmFtZXRlclR5cGUpJiZ0aGlzLnJldHVyblR5cGUuZXF1YWxzKGUucmV0dXJuVHlwZSl9LHJ9KEIpO3UuRnVuY3Rpb25UeXBlPUE7dmFyIEk9ZnVuY3Rpb24oRSl7ZnVuY3Rpb24gcihlLG8seSxkLHYpe289PT12b2lkIDAmJihvPVtdKSx5PT09dm9pZCAwJiYoeT12b2lkIDApLGQ9PT12b2lkIDAmJihkPSExKSx2PT09dm9pZCAwJiYodj0wKTt2YXIgQz1FLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIEMubmFtZT1lLEMudHlwZUFyZ3VtZW50cz1vLEMucXVhbGlmaWVkTmFtZT15LEMub3BhcXVlPWQsQy5pZD12LEN9cmV0dXJuIGcocixFKSxyLnByb3RvdHlwZS5pc1Jlc29sdmVkPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoOysrZSlpZighdGhpcy50eXBlQXJndW1lbnRzW2VdLmlzUmVzb2x2ZWQoKSlyZXR1cm4hMTtyZXR1cm4hMH0sci5wcm90b3R5cGUuaXNPcGFxdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGFxdWV9LHIucHJvdG90eXBlLmdldE9wYXF1ZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc09wYXF1ZSgpP3RoaXMubmFtZToidW5kZWZpbmVkIn0sci5wcm90b3R5cGUubWFrZUZyZWU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sbz0wO288dGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aDsrK28pZS5wdXNoKHRoaXMudHlwZUFyZ3VtZW50c1tvXS5tYWtlRnJlZSgpKTtyZXR1cm4gbmV3IHIodGhpcy5uYW1lLGUsdGhpcy5xdWFsaWZpZWROYW1lLHRoaXMub3BhcXVlLHRoaXMuaWQpfSxyLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbyl7aWYodGhpcy5lcXVhbHMoZSkpcmV0dXJuIG87Zm9yKHZhciB5PVtdLGQ9MDtkPHRoaXMudHlwZUFyZ3VtZW50cy5sZW5ndGg7KytkKXkucHVzaCh0aGlzLnR5cGVBcmd1bWVudHNbZF0ucmVwbGFjZShlLG8pKTtyZXR1cm4gbmV3IHIodGhpcy5uYW1lLHksdGhpcy5xdWFsaWZpZWROYW1lLHRoaXMub3BhcXVlLHRoaXMuaWQpfSxyLnByb3RvdHlwZS5mbGF0dGVuPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbz1bXSx5PTA7eTx0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoOysreSlvLnB1c2godGhpcy50eXBlQXJndW1lbnRzW3ldLmZsYXR0ZW4oZSkpO3JldHVybiBuZXcgcih0aGlzLm5hbWUsbyx0aGlzLnF1YWxpZmllZE5hbWUsdGhpcy5vcGFxdWUsdGhpcy5pZCl9LHIucHJvdG90eXBlLnF1YWxpZnk9ZnVuY3Rpb24oZSxvKXtmb3IodmFyIHk9W10sZD0wO2Q8dGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aDsrK2QpeS5wdXNoKHRoaXMudHlwZUFyZ3VtZW50c1tkXS5xdWFsaWZ5KGUsbykpO3ZhciB2PW5ldyByKHRoaXMubmFtZSx5LHRoaXMucXVhbGlmaWVkTmFtZSx0aGlzLm9wYXF1ZSx0aGlzLmlkKTtyZXR1cm4gZS5nZXRTdGF0aWNUeXBlKHRoaXMubmFtZSkhPT12b2lkIDAmJih2LnF1YWxpZmllZE5hbWU9byksdn0sci5wcm90b3R5cGUucHJvcGFnYXRlPWZ1bmN0aW9uKGUpe2U9PT12b2lkIDAmJihlPW5ldyBNYXApO2Zvcih2YXIgbz1bXSx5PTA7eTx0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoOysreSlvLnB1c2godGhpcy50eXBlQXJndW1lbnRzW3ldLnByb3BhZ2F0ZShlKSk7cmV0dXJuIG5ldyByKHRoaXMubmFtZSxvLHRoaXMucXVhbGlmaWVkTmFtZSx0aGlzLm9wYXF1ZSx0aGlzLmlkKX0sci5wcm90b3R5cGUuaW5zdGFudGlhdGU9ZnVuY3Rpb24oZSxvLHkpe3ZhciBkPXRoaXM7eT09PXZvaWQgMCYmKHk9bmV3IFNldCk7dmFyIHY9ZS5nZXRTdGF0aWNUeXBlKHRoaXMubmFtZSk7aWYodGhpcy5xdWFsaWZpZWROYW1lIT09dm9pZCAwKXt2YXIgQz1lLmdldEFuZFJlc29sdmVTdGF0aWNTdHJ1Y3R1cmUodGhpcy5xdWFsaWZpZWROYW1lKTt2PUMhPT12b2lkIDA/Qy5nZXRUeXBlKHRoaXMubmFtZSk6dm9pZCAwfWlmKHYhPT12b2lkIDAmJnYudHlwZSBpbnN0YW5jZW9mIEEpdHJ5e3ZhciBHPXYudHlwZS5nZXRUeXBlVmFyaWFibGVzKCksWT0xLEo9bmV3IE1hcDtHLmZvckVhY2goZnVuY3Rpb24oTiwkKXtKPUouc2V0KCQsIicqIitkK1kpLCsrWX0pO3ZhciB6PXYudHlwZS5yZXBsYWNlVHlwZVZhcmlhYmxlcyhKKSxwPXRoaXMubWVyZ2UoZSxvLHoucGFyYW1ldGVyVHlwZSwhMCksYz1lLmdldE5lc3RlZFN0YXRlKGUuaWQpO3JldHVybiBjLnNldFN0YXRpY1R5cGUodGhpcy5uYW1lLHoucmV0dXJuVHlwZSxbXSwtMSx2LmFsbG93c0VxdWFsaXR5KSx6LnJldHVyblR5cGUuaW5zdGFudGlhdGUoYyxwWzFdKX1jYXRjaChOKXt0aHJvdyBOIGluc3RhbmNlb2YgQXJyYXk/bmV3IHMuRWxhYm9yYXRpb25FcnJvcignSW5zdGFudGlhdGluZyAiJyt0aGlzLm5vcm1hbGl6ZSgpWzBdKyciIGZhaWxlZDogJytOWzBdKTpOfWVsc2V7aWYodj09PXZvaWQgMCl0aHJvdyB0aGlzLmlkPjA/bmV3IHMuRWxhYm9yYXRpb25FcnJvcignVW5ib3VuZCB0eXBlICInK3RoaXMubmFtZSsiLyIrdGhpcy5pZCsnIi4nKTpuZXcgcy5FbGFib3JhdGlvbkVycm9yKCdVbmJvdW5kIHR5cGUgIicrdGhpcy5uYW1lKyciLicpO2lmKHYhPT12b2lkIDAmJnYudHlwZS5pc09wYXF1ZSgpKXRoaXMub3BhcXVlPSEwO2Vsc2V7aWYoISh2PT09dm9pZCAwfHx2LnR5cGUgaW5zdGFuY2VvZiByJiZ0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoPT09di50eXBlLnR5cGVBcmd1bWVudHMubGVuZ3RoKSl0aHJvdyBuZXcgcy5FbGFib3JhdGlvbkVycm9yKCJBcml0eSBtaXNtYXRjaDogIit0aGlzLm5vcm1hbGl6ZSgpWzBdKyIgdnMgIit2LnR5cGUubm9ybWFsaXplKClbMF0rIi4iKTtpZih2IT09dm9pZCAwJiYoISh2LnR5cGUgaW5zdGFuY2VvZiByKXx8dGhpcy5pZD52LnR5cGUuaWQpKXRocm93IHRoaXMuaWQ+MD9uZXcgcy5FbGFib3JhdGlvbkVycm9yKCdVbmJvdW5kIHR5cGUgIicrdGhpcy5uYW1lKyIvIit0aGlzLmlkKyciLicpOm5ldyBzLkVsYWJvcmF0aW9uRXJyb3IoJ1VuYm91bmQgdHlwZSAiJyt0aGlzLm5hbWUrJyIuJyl9fWZvcih2YXIgdz1bXSxUPTA7VDx0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoOysrVCl3LnB1c2godGhpcy50eXBlQXJndW1lbnRzW1RdLmluc3RhbnRpYXRlKGUsbyx5KSk7cmV0dXJuIG5ldyByKHRoaXMubmFtZSx3LHRoaXMucXVhbGlmaWVkTmFtZSx0aGlzLm9wYXF1ZSx0aGlzLmlkKX0sci5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24oZSxvLHksZCl7aWYoZD09PXZvaWQgMCYmKGQ9ITEpLHkgaW5zdGFuY2VvZiBEfHx5IGluc3RhbmNlb2YgTSlyZXR1cm4geS5tZXJnZShlLG8sdGhpcyk7dmFyIHY9dGhpcyxDPXk7aWYoIWQpe2lmKCEoKHY9dGhpcy5pbnN0YW50aWF0ZShlLG8pKWluc3RhbmNlb2YgcikpcmV0dXJuIHYubWVyZ2UoZSxvLHkpO0M9eS5pbnN0YW50aWF0ZShlLG8pfXZhciBHPXY7aWYoQyBpbnN0YW5jZW9mIHImJkcubmFtZT09PUMubmFtZSYmRy5pZD09PUMuaWQpe2Zvcih2YXIgWT1bXSxKPW8sej0wO3o8di50eXBlQXJndW1lbnRzLmxlbmd0aDsrK3ope3ZhciBwPXYudHlwZUFyZ3VtZW50c1t6XS5tZXJnZShlLEosQy50eXBlQXJndW1lbnRzW3pdKTtZLnB1c2gocFswXSksSj1wWzFdfXJldHVybltuZXcgcihHLm5hbWUsWSxHLnF1YWxpZmllZE5hbWUsRy5vcGFxdWUsRy5pZCksSl19dGhyb3dbJ0Nhbm5vdCBtZXJnZSAiJyt0aGlzLmluc3RhbnRpYXRlKGUsbykubm9ybWFsaXplKClbMF0rJyIgYW5kICInK3kuaW5zdGFudGlhdGUoZSxvKS5ub3JtYWxpemUoKVswXSsnIi4nLHRoaXMudHlwZU5hbWUoKSx5LnR5cGVOYW1lKCldfSxyLnByb3RvdHlwZS5tYWtlRXFUeXBlPWZ1bmN0aW9uKGUsbyl7dmFyIHk9ZS5nZXRTdGF0aWNUeXBlKHRoaXMubmFtZSk7aWYodGhpcy5xdWFsaWZpZWROYW1lIT09dm9pZCAwKXt2YXIgZD1lLmdldEFuZFJlc29sdmVTdGF0aWNTdHJ1Y3R1cmUodGhpcy5xdWFsaWZpZWROYW1lKTt5PWQhPT12b2lkIDA/ZC5nZXRUeXBlKHRoaXMubmFtZSk6dm9pZCAwfWlmKHkhPT12b2lkIDAmJiF5LmFsbG93c0VxdWFsaXR5KXJldHVyblt0aGlzLG9dO2Zvcih2YXIgdj1bXSxDPTA7Qzx0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoOysrQyl7dmFyIEc9dGhpcy50eXBlQXJndW1lbnRzW0NdLm1ha2VFcVR5cGUoZSxvKTt2LnB1c2goR1swXSksbz1HWzFdfXJldHVybltuZXcgcih0aGlzLm5hbWUsdix0aGlzLnF1YWxpZmllZE5hbWUsdGhpcy5vcGFxdWUsdGhpcy5pZCksb119LHIucHJvdG90eXBlLmdldFR5cGVWYXJpYWJsZXM9ZnVuY3Rpb24oZSl7ZT09PXZvaWQgMCYmKGU9ITEpO3ZhciBvPW5ldyBNYXA7aWYodGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aD4wKWZvcih2YXIgeT0wO3k8dGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aDsrK3kpdGhpcy50eXBlQXJndW1lbnRzW3ldLmdldFR5cGVWYXJpYWJsZXMoZSkuZm9yRWFjaChmdW5jdGlvbihkLHYpe289by5oYXModik/by5zZXQodixELm1lcmdlRG9tYWluKGQsby5nZXQodikpKTpvLnNldCh2LGQpfSk7cmV0dXJuIG99LHIucHJvdG90eXBlLmdldE9yZGVyZWRUeXBlVmFyaWFibGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG89MDtvPHRoaXMudHlwZUFyZ3VtZW50cy5sZW5ndGg7KytvKWU9ZS5jb25jYXQodGhpcy50eXBlQXJndW1lbnRzW29dLmdldE9yZGVyZWRUeXBlVmFyaWFibGVzKCkpO3JldHVybiBlfSxyLnByb3RvdHlwZS5yZXBsYWNlVHlwZVZhcmlhYmxlcz1mdW5jdGlvbihlLG8pe2Zvcih2YXIgeT1bXSxkPTA7ZDx0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoOysrZCl5LnB1c2godGhpcy50eXBlQXJndW1lbnRzW2RdLnJlcGxhY2VUeXBlVmFyaWFibGVzKGUsbykpO3JldHVybiBuZXcgcih0aGlzLm5hbWUseSx0aGlzLnF1YWxpZmllZE5hbWUsdGhpcy5vcGFxdWUsdGhpcy5pZCl9LHIucHJvdG90eXBlLmFkbWl0c0VxdWFsaXR5PWZ1bmN0aW9uKGUpe3ZhciBvPWUuZ2V0U3RhdGljVHlwZSh0aGlzLm5hbWUpO2lmKHRoaXMucXVhbGlmaWVkTmFtZSE9PXZvaWQgMCl7dmFyIHk9ZS5nZXRBbmRSZXNvbHZlU3RhdGljU3RydWN0dXJlKHRoaXMucXVhbGlmaWVkTmFtZSk7bz15IT09dm9pZCAwP3kuZ2V0VHlwZSh0aGlzLm5hbWUpOnZvaWQgMH1pZihvPT09dm9pZCAwKXJldHVybiEwO3ZhciBkPWUuZ2V0TmVzdGVkU3RhdGUoZS5pZCk7ZC5zZXRTdGF0aWNUeXBlKHRoaXMubmFtZSx0aGlzLFtdLHRoaXMudHlwZUFyZ3VtZW50cy5sZW5ndGgsITApO2Zvcih2YXIgdj0wO3Y8dGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aDsrK3YpaWYoIXRoaXMudHlwZUFyZ3VtZW50c1t2XS5hZG1pdHNFcXVhbGl0eShkKSlyZXR1cm4hMTt2YXIgQz1mdW5jdGlvbihZKXt2YXIgSj1lLmdldFN0YXRpY1ZhbHVlKG8uY29uc3RydWN0b3JzW1ldKTtpZihKPT09dm9pZCAwKXJldHVybiJjb250aW51ZSI7Zm9yKHZhciB6PUpbMF07eiBpbnN0YW5jZW9mIFY7KXo9ei50eXBlO2lmKHogaW5zdGFuY2VvZiByKXJldHVybiJjb250aW51ZSI7dmFyIHA9ei5wYXJhbWV0ZXJUeXBlLGM9cC5nZXRUeXBlVmFyaWFibGVzKCksdz1uZXcgTWFwO3JldHVybiBjLmZvckVhY2goZnVuY3Rpb24oVCxOKXtOLnN0YXJ0c1dpdGgoIicnIil8fCh3PXcuc2V0KE4sIiciK04pKX0pLChwPXAucmVwbGFjZVR5cGVWYXJpYWJsZXModykpLmFkbWl0c0VxdWFsaXR5KGQpP3ZvaWQgMDp7dmFsdWU6ITF9fTtmb3Iodj0wO3Y8by5jb25zdHJ1Y3RvcnMubGVuZ3RoOysrdil7dmFyIEc9Qyh2KTtpZih0eXBlb2YgRz09Im9iamVjdCIpcmV0dXJuIEcudmFsdWV9cmV0dXJuIG8uYWxsb3dzRXF1YWxpdHl9LHIucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkN1c3RvbVR5cGUifSxyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihlKXtlPT09dm9pZCAwJiYoZT17fSk7dmFyIG89IiI7KHRoaXMudHlwZUFyZ3VtZW50cy5sZW5ndGg+MXx8dGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aD09PTEmJih0aGlzLnR5cGVBcmd1bWVudHNbMF1pbnN0YW5jZW9mIEF8fHRoaXMudHlwZUFyZ3VtZW50c1swXWluc3RhbmNlb2YgaCYmdGhpcy50eXBlQXJndW1lbnRzWzBdLnRvU3RyaW5nKGUpIT09InVuaXQiKSkmJihvKz0iKCIpO2Zvcih2YXIgeT0wO3k8dGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aDsrK3kpeT4wJiYobys9IiwgIiksbys9dGhpcy50eXBlQXJndW1lbnRzW3ldLnRvU3RyaW5nKGUpO2lmKCh0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoPjF8fHRoaXMudHlwZUFyZ3VtZW50cy5sZW5ndGg9PT0xJiYodGhpcy50eXBlQXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBfHx0aGlzLnR5cGVBcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgmJnRoaXMudHlwZUFyZ3VtZW50c1swXS50b1N0cmluZyhlKSE9PSJ1bml0IikpJiYobys9IikiKSx0aGlzLnR5cGVBcmd1bWVudHMubGVuZ3RoPjAmJihvKz0iICIpLHRoaXMucXVhbGlmaWVkTmFtZSE9PXZvaWQgMClmb3IoeT0wO3k8dGhpcy5xdWFsaWZpZWROYW1lLnF1YWxpZmllcnMubGVuZ3RoOysreSlvKz10aGlzLnF1YWxpZmllZE5hbWUucXVhbGlmaWVyc1t5XS5nZXRUZXh0KCkrIi4iO3JldHVybiBvKz10aGlzLm5hbWUsdGhpcy5pZD4wJiYobys9Ii8iK3RoaXMuaWQpLG99LHIucHJvdG90eXBlLnNpbXBsaWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG89MDtvPHRoaXMudHlwZUFyZ3VtZW50cy5sZW5ndGg7KytvKWUucHVzaCh0aGlzLnR5cGVBcmd1bWVudHNbb10uc2ltcGxpZnkoKSk7cmV0dXJuIG5ldyByKHRoaXMubmFtZSxlLHRoaXMucXVhbGlmaWVkTmFtZSx0aGlzLm9wYXF1ZSx0aGlzLmlkKX0sci5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBNKXJldHVybiEwO2lmKCEoZSBpbnN0YW5jZW9mIHIpfHx0aGlzLm5hbWUhPT1lLm5hbWV8fHRoaXMuaWQhPT1lLmlkKXJldHVybiExO2Zvcih2YXIgbz0wO288dGhpcy50eXBlQXJndW1lbnRzLmxlbmd0aDsrK28paWYoIXRoaXMudHlwZUFyZ3VtZW50c1tvXS5lcXVhbHMoZS50eXBlQXJndW1lbnRzW29dKSlyZXR1cm4hMTtyZXR1cm4hMH0scn0oQik7dS5DdXN0b21UeXBlPUk7dmFyIE89ZnVuY3Rpb24oRSl7ZnVuY3Rpb24gcihlKXt2YXIgbz1FLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8uZWxlbWVudHM9ZSxvfXJldHVybiBnKHIsRSksci5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iVHVwbGVUeXBlIn0sci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oZSl7ZT09PXZvaWQgMCYmKGU9e30pO2Zvcih2YXIgbz0iKCIseT0wO3k8dGhpcy5lbGVtZW50cy5sZW5ndGg7Kyt5KXk+MCYmKG8rPSIgKiAiKSxvKz10aGlzLmVsZW1lbnRzW3ldLnRvU3RyaW5nKGUpO3JldHVybiBvKyIpIn0sci5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXtmb3IodmFyIGU9bmV3IE1hcCxvPTA7bzx0aGlzLmVsZW1lbnRzLmxlbmd0aDsrK28pZS5zZXQoIiIrKG8rMSksdGhpcy5lbGVtZW50c1tvXS5zaW1wbGlmeSgpKTtyZXR1cm4gbmV3IGgoZSwhMCl9LHIucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaW1wbGlmeSgpLmVxdWFscyhlKX0scn0oQik7dS5UdXBsZVR5cGU9T30sMTA2OmZ1bmN0aW9uKGZlLHUsSyl7dmFyIG0sZz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KG09ZnVuY3Rpb24oeixwKXtyZXR1cm4obT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oYyx3KXtjLl9fcHJvdG9fXz13fXx8ZnVuY3Rpb24oYyx3KXtmb3IodmFyIFQgaW4gdylPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodyxUKSYmKGNbVF09d1tUXSl9KSh6LHApfSxmdW5jdGlvbih6LHApe2lmKHR5cGVvZiBwIT0iZnVuY3Rpb24iJiZwIT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHApKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIGMoKXt0aGlzLmNvbnN0cnVjdG9yPXp9bSh6LHApLHoucHJvdG90eXBlPXA9PT1udWxsP09iamVjdC5jcmVhdGUocCk6KGMucHJvdG90eXBlPXAucHJvdG90eXBlLG5ldyBjKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx1LkV4Y2VwdGlvbkNvbnN0cnVjdG9yPXUuVmFsdWVDb25zdHJ1Y3Rvcj11LlByZWRlZmluZWRGdW5jdGlvbj11LkV4Y2VwdGlvblZhbHVlPXUuQ29uc3RydWN0ZWRWYWx1ZT11LkZ1bmN0aW9uVmFsdWU9dS5SZWNvcmRWYWx1ZT11LlJlYWw9dS5JbnRlZ2VyPXUuV29yZD11LlN0cmluZ1ZhbHVlPXUuQ2hhclZhbHVlPXUuQm9vbFZhbHVlPXUuQXJyYXlWYWx1ZT11LlZlY3RvclZhbHVlPXUuUmVmZXJlbmNlVmFsdWU9dS5WYWx1ZT11LlByaW50Q291bnRlcj11Lk1JTklOVD11Lk1BWElOVD12b2lkIDA7dmFyIHM9SygzNjcpLHE9Syg3NTgpLEI9Syg1MzQpO3UuTUFYSU5UPTEwNzM3NDE4MjMsdS5NSU5JTlQ9LTEwNzM3NDE4MjQ7dmFyIE09ZnVuY3Rpb24oeil7dGhpcy5jaGFyYWN0ZXJzTGVmdD16fTt1LlByaW50Q291bnRlcj1NO3ZhciBWPWZ1bmN0aW9uKCl7ZnVuY3Rpb24geigpe31yZXR1cm4gei5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24ocCxjKXtyZXR1cm4gYz09PXZvaWQgMCYmKGM9MTIwKSx0aGlzLnBjVG9TdHJpbmcocCxuZXcgTShjKSl9LHoucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihwKXt0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIlRyaWVkIGNvbXBhcmluZyBpbmNvbXBhcmFibGUgdGhpbmdzLiIpfSx6fSgpO3UuVmFsdWU9Vjt2YXIgRD1mdW5jdGlvbih6KXtmdW5jdGlvbiBwKGMpe3ZhciB3PXouY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdy5hZGRyZXNzPWMsd31yZXR1cm4gZyhwLHopLHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5hZGRyZXNzPT09Yy5hZGRyZXNzfSxwLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJSZWZlcmVuY2VWYWx1ZSJ9LHAucHJvdG90eXBlLnBjVG9TdHJpbmc9ZnVuY3Rpb24oYyx3KXtpZihjPT09dm9pZCAwKXt2YXIgVD0iJCIrdGhpcy5hZGRyZXNzO3JldHVybiB3LmNoYXJhY3RlcnNMZWZ0LT1ULmxlbmd0aCxUfWlmKGMuZ2V0Q2VsbCh0aGlzLmFkZHJlc3MpIT09dm9pZCAwKXJldHVybiB3LmNoYXJhY3RlcnNMZWZ0LT00LCJyZWYgIitjLmdldENlbGwodGhpcy5hZGRyZXNzKS5wY1RvU3RyaW5nKGMsdyk7dGhyb3cgbmV3IHEuRXZhbHVhdGlvbkVycm9yKCdPdWNoLCB5b3UgbWF5IG5vdCBkZS1yZWZlcmVuY2UgIiQnK3RoaXMuYWRkcmVzcysnIi4nKX0scH0oVik7dS5SZWZlcmVuY2VWYWx1ZT1EO3ZhciBoPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyl7Yz09PXZvaWQgMCYmKGM9W10pO3ZhciB3PXouY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdy5lbnRyaWVzPWMsd31yZXR1cm4gZyhwLHopLHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihjKXtpZih0aGlzLmVudHJpZXMubGVuZ3RoIT09Yy5lbnRyaWVzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHc9MDt3PHRoaXMuZW50cmllcy5sZW5ndGg7Kyt3KWlmKCF0aGlzLmVudHJpZXNbd10uZXF1YWxzKGMuZW50cmllc1t3XSkpcmV0dXJuITE7cmV0dXJuITB9LHAucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIlZlY3RvclZhbHVlIn0scC5wcm90b3R5cGUucGNUb1N0cmluZz1mdW5jdGlvbihjLHcpe3ZhciBUPSIjWyI7dy5jaGFyYWN0ZXJzTGVmdC09Mztmb3IodmFyIE49MDtOPHRoaXMuZW50cmllcy5sZW5ndGg7KytOKXtpZihOPjAmJihUKz0iLCAiLHcuY2hhcmFjdGVyc0xlZnQtPTIpLCEody5jaGFyYWN0ZXJzTGVmdD4wKSl7VCs9Ilx1MjAyNiI7YnJlYWt9dmFyICQ9MDtOPHRoaXMuZW50cmllcy5sZW5ndGgmJigkPU1hdGguZmxvb3Iody5jaGFyYWN0ZXJzTGVmdC8yKSksdy5jaGFyYWN0ZXJzTGVmdC09JCxUKz10aGlzLmVudHJpZXNbTl0ucGNUb1N0cmluZyhjLHcpLHcuY2hhcmFjdGVyc0xlZnQrPSR9cmV0dXJuIFQrIl0ifSxwfShWKTt1LlZlY3RvclZhbHVlPWg7dmFyIEE9ZnVuY3Rpb24oeil7ZnVuY3Rpb24gcChjLHcpe3ZhciBUPXouY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gVC5hZGRyZXNzPWMsVC5sZW5ndGg9dyxUfXJldHVybiBnKHAseikscC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmFkZHJlc3M9PT1jLmFkZHJlc3N9LHAucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkFycmF5VmFsdWUifSxwLnByb3RvdHlwZS5wY1RvU3RyaW5nPWZ1bmN0aW9uKGMsdyl7aWYoYz09PXZvaWQgMCl7dmFyIFQ9Ilt8JCIrdGhpcy5hZGRyZXNzKyIuLi4kIisodGhpcy5hZGRyZXNzK3RoaXMubGVuZ3RoLTEpKyJ8XSI7cmV0dXJuIHcuY2hhcmFjdGVyc0xlZnQtPVQubGVuZ3RoLFR9dmFyIE49Ilt8Ijt3LmNoYXJhY3RlcnNMZWZ0LT00O2Zvcih2YXIgJD0wOyQ8dGhpcy5sZW5ndGg7KyskKXtpZigkPjAmJihOKz0iLCAiLHcuY2hhcmFjdGVyc0xlZnQtPTIpLCEody5jaGFyYWN0ZXJzTGVmdD4wKSl7Tis9Ilx1MjAyNiI7YnJlYWt9aWYoYy5nZXRDZWxsKHRoaXMuYWRkcmVzcyskKT09PXZvaWQgMCl0aHJvdyBuZXcgcS5FdmFsdWF0aW9uRXJyb3IoJ091Y2gsIHlvdSBtYXkgbm90IGRlLXJlZmVyZW5jZSAiJCcrKHRoaXMuYWRkcmVzcyskKSsnIi4nKTt2YXIgSD0wOyQ8dGhpcy5sZW5ndGgmJihIPU1hdGguZmxvb3Iody5jaGFyYWN0ZXJzTGVmdC8yKSksdy5jaGFyYWN0ZXJzTGVmdC09SCxOKz1jLmdldENlbGwodGhpcy5hZGRyZXNzKyQpLnBjVG9TdHJpbmcoYyx3KSx3LmNoYXJhY3RlcnNMZWZ0Kz1IfXJldHVybiBOKyJ8XSJ9LHB9KFYpO3UuQXJyYXlWYWx1ZT1BO3ZhciBJPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyl7dmFyIHc9ei5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB3LnZhbHVlPWMsd31yZXR1cm4gZyhwLHopLHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy52YWx1ZT09PWMudmFsdWV9LHAucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkJvb2xWYWx1ZSJ9LHAucHJvdG90eXBlLnBjVG9TdHJpbmc9ZnVuY3Rpb24oYyx3KXtyZXR1cm4gdGhpcy52YWx1ZT8ody5jaGFyYWN0ZXJzTGVmdC09NCwidHJ1ZSIpOih3LmNoYXJhY3RlcnNMZWZ0LT01LCJmYWxzZSIpfSxwfShWKTt1LkJvb2xWYWx1ZT1JO3ZhciBPPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyl7dmFyIHc9ei5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB3LnZhbHVlPWMsd31yZXR1cm4gZyhwLHopLHAucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkNoYXJWYWx1ZSJ9LHAucHJvdG90eXBlLnBjVG9TdHJpbmc9ZnVuY3Rpb24oYyx3KXtyZXR1cm4gdy5jaGFyYWN0ZXJzTGVmdC09MSwiIyIrbmV3IEUodGhpcy52YWx1ZSkucGNUb1N0cmluZyhjLHcpfSxwLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMudmFsdWU8Yy52YWx1ZT8tMTp0aGlzLnZhbHVlPmMudmFsdWU/MTowfSxwLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMudmFsdWU9PT1jLnZhbHVlfSxwfShWKTt1LkNoYXJWYWx1ZT1PO3ZhciBFPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyl7dmFyIHc9ei5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB3LnZhbHVlPWMsd31yZXR1cm4gZyhwLHopLHAuaW1wbG9kZT1mdW5jdGlvbihjKXtmb3IodmFyIHc9IiI7Yy5jb25zdHJ1Y3Rvck5hbWUhPT0ibmlsIjspe2lmKGMuY29uc3RydWN0b3JOYW1lIT09Ijo6Iil0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoYElzIHRoaXMgYSBjaGFyIGxpc3Q/IEkgY2FuJ3QgaW1wbG9kZSAiYCtjLmNvbnN0cnVjdG9yTmFtZSsnIi4nKTt2YXIgVD1jLmFyZ3VtZW50O2lmKCEoVCBpbnN0YW5jZW9mIHkpKXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcihgSXMgdGhpcyBhIGNoYXIgbGlzdD8gSSBjYW4ndCBpbXBsb2RlICJgK2MuY29uc3RydWN0b3JOYW1lKyciLicpO3ZhciBOPVQuZ2V0VmFsdWUoIjEiKSwkPVQuZ2V0VmFsdWUoIjIiKTtpZighKE4gaW5zdGFuY2VvZiBPJiYkIGluc3RhbmNlb2YgdikpdGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKGBJcyB0aGlzIGEgY2hhciBsaXN0PyBJIGNhbid0IGltcGxvZGUgImArYy5jb25zdHJ1Y3Rvck5hbWUrJyIuJyk7dys9Ti52YWx1ZSxjPSR9cmV0dXJuIG5ldyBwKHcpfSxwLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJTdHJpbmdWYWx1ZSJ9LHAucHJvdG90eXBlLnBjVG9TdHJpbmc9ZnVuY3Rpb24oYyx3KXt2YXIgVD0iIjt3LmNoYXJhY3RlcnNMZWZ0LT0yO2Zvcih2YXIgTj0wLCQ9dGhpcy52YWx1ZTtOPCQubGVuZ3RoO04rKyl7dmFyIEg9JFtOXTtpZih3LmNoYXJhY3RlcnNMZWZ0PDApe1QrPSJcdTIwMjYiO2JyZWFrfXN3aXRjaCh3LmNoYXJhY3RlcnNMZWZ0LT0xLEgpe2Nhc2VgCmA6VCs9IlxcbiI7YnJlYWs7Y2FzZSIJIjpUKz0iXFx0IjticmVhaztjYXNlIlxyIjpUKz0iXFxyIjticmVhaztjYXNlIlx4MDciOlQrPSJcXGEiO2JyZWFrO2Nhc2UiXGIiOlQrPSJcXGIiO2JyZWFrO2Nhc2UiXHYiOlQrPSJcXHYiO2JyZWFrO2Nhc2UiXGYiOlQrPSJcXGYiO2JyZWFrO2Nhc2UiXHg3RiI6VCs9IlxcMTI3IjticmVhaztjYXNlIlx4RkYiOlQrPSJcXDI1NSI7YnJlYWs7ZGVmYXVsdDppZihILmNoYXJDb2RlQXQoMCk8MzIpe3ZhciBQPSJcXF4iK1N0cmluZy5mcm9tQ2hhckNvZGUoSC5jaGFyQ29kZUF0KDApKzY0KTtUKz1QLHcuY2hhcmFjdGVyc0xlZnQtPVAubGVuZ3RoLTF9ZWxzZSBUKz1IfX1yZXR1cm4nIicrVCsnIid9LHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy52YWx1ZT09PWMudmFsdWV9LHAucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy52YWx1ZTxjLnZhbHVlPy0xOnRoaXMudmFsdWU+Yy52YWx1ZT8xOjB9LHAucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbihjKXtyZXR1cm4gbmV3IHAodGhpcy52YWx1ZStjLnZhbHVlKX0scC5wcm90b3R5cGUuZXhwbG9kZT1mdW5jdGlvbigpe2Zvcih2YXIgYz1uZXcgdigibmlsIiksdz10aGlzLnZhbHVlLmxlbmd0aC0xO3c+PTA7LS13KWM9bmV3IHYoIjo6IixuZXcgeShuZXcgTWFwKFtbIjEiLG5ldyBPKHRoaXMudmFsdWVbd10pXSxbIjIiLGNdXSkpKTtyZXR1cm4gY30scH0oVik7dS5TdHJpbmdWYWx1ZT1FO3ZhciByPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyl7dmFyIHc9ei5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB3LnZhbHVlPWMsd31yZXR1cm4gZyhwLHopLHAucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIldvcmQifSxwLnByb3RvdHlwZS5wY1RvU3RyaW5nPWZ1bmN0aW9uKGMsdyl7dmFyIFQ9IiIrdGhpcy52YWx1ZTtyZXR1cm4gdy5jaGFyYWN0ZXJzTGVmdC09VC5sZW5ndGgsVH0scC5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKGMpe2lmKGMgaW5zdGFuY2VvZiBwKXt2YXIgdz1jLnZhbHVlO3JldHVybiB0aGlzLnZhbHVlPHc/LTE6dGhpcy52YWx1ZT53PzE6MH1yZXR1cm4gMn0scC5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKC10aGlzLnZhbHVlKX0scC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmNvbXBhcmVUbyhjKT09PTB9LHAucHJvdG90eXBlLmFkZD1mdW5jdGlvbihjKXtyZXR1cm4gbmV3IHAodGhpcy52YWx1ZStjLnZhbHVlKX0scC5wcm90b3R5cGUubXVsdGlwbHk9ZnVuY3Rpb24oYyl7cmV0dXJuIG5ldyBwKHRoaXMudmFsdWUqYy52YWx1ZSl9LHAucHJvdG90eXBlLmRpdmlkZT1mdW5jdGlvbihjKXtyZXR1cm4gbmV3IHAoTWF0aC5mbG9vcih0aGlzLnZhbHVlL2MudmFsdWUpKX0scC5wcm90b3R5cGUubW9kdWxvPWZ1bmN0aW9uKGMpe3JldHVybiBuZXcgcCh0aGlzLnZhbHVlJWMudmFsdWUpfSxwLnByb3RvdHlwZS50b1JlYWw9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8odGhpcy52YWx1ZSl9LHAucHJvdG90eXBlLmhhc092ZXJmbG93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWU+dS5NQVhJTlR8fHRoaXMudmFsdWU8dS5NSU5JTlR9LHB9KFYpO3UuV29yZD1yO3ZhciBlPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyl7dmFyIHc9ei5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB3LnZhbHVlPWMsd31yZXR1cm4gZyhwLHopLHAucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIkludGVnZXIifSxwLnByb3RvdHlwZS5wY1RvU3RyaW5nPWZ1bmN0aW9uKGMsdyl7dmFyIFQ9IiIrdGhpcy52YWx1ZTtyZXR1cm4gdy5jaGFyYWN0ZXJzTGVmdC09VC5sZW5ndGgsVC5yZXBsYWNlKC8tLywifiIpfSxwLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24oYyl7aWYoYyBpbnN0YW5jZW9mIHApe3ZhciB3PWMudmFsdWU7cmV0dXJuIHRoaXMudmFsdWU8dz8tMTp0aGlzLnZhbHVlPnc/MTowfXJldHVybiExfSxwLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuY29tcGFyZVRvKGMpPT09MH0scC5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKC10aGlzLnZhbHVlKX0scC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGMpe3JldHVybiBuZXcgcCh0aGlzLnZhbHVlK2MudmFsdWUpfSxwLnByb3RvdHlwZS5tdWx0aXBseT1mdW5jdGlvbihjKXtyZXR1cm4gbmV3IHAodGhpcy52YWx1ZSpjLnZhbHVlKX0scC5wcm90b3R5cGUuZGl2aWRlPWZ1bmN0aW9uKGMpe3JldHVybiBuZXcgcChNYXRoLmZsb29yKHRoaXMudmFsdWUvYy52YWx1ZSkpfSxwLnByb3RvdHlwZS5tb2R1bG89ZnVuY3Rpb24oYyl7cmV0dXJuIG5ldyBwKHRoaXMudmFsdWUtTWF0aC5mbG9vcih0aGlzLnZhbHVlL2MudmFsdWUpKmMudmFsdWUpfSxwLnByb3RvdHlwZS50b1JlYWw9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8odGhpcy52YWx1ZSl9LHAucHJvdG90eXBlLmhhc092ZXJmbG93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWU+dS5NQVhJTlR8fHRoaXMudmFsdWU8dS5NSU5JTlR9LHB9KFYpO3UuSW50ZWdlcj1lO3ZhciBvPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyl7dmFyIHc9ei5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB3LnZhbHVlPWMsd31yZXR1cm4gZyhwLHopLHAucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIlJlYWwifSxwLnByb3RvdHlwZS5wY1RvU3RyaW5nPWZ1bmN0aW9uKGMsdyl7dmFyIFQ9IiIrdGhpcy52YWx1ZTtyZXR1cm4gVC5zZWFyY2goL1wuLyk9PT0tMSYmKFQrPSIuMCIpLHcuY2hhcmFjdGVyc0xlZnQtPVQubGVuZ3RoLFQucmVwbGFjZSgvLS8sIn4iKX0scC5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKGMpe2lmKGMgaW5zdGFuY2VvZiBwKXt2YXIgdz1jLnZhbHVlO3JldHVybiB0aGlzLnZhbHVlPHc/LTE6dGhpcy52YWx1ZT53PzE6MH1yZXR1cm4hMX0scC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLmNvbXBhcmVUbyhjKT09PTB9LHAucHJvdG90eXBlLm5lZ2F0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgcCgtdGhpcy52YWx1ZSl9LHAucHJvdG90eXBlLmFkZD1mdW5jdGlvbihjKXtyZXR1cm4gbmV3IHAodGhpcy52YWx1ZStjLnZhbHVlKX0scC5wcm90b3R5cGUubXVsdGlwbHk9ZnVuY3Rpb24oYyl7cmV0dXJuIG5ldyBwKHRoaXMudmFsdWUqYy52YWx1ZSl9LHAucHJvdG90eXBlLmRpdmlkZT1mdW5jdGlvbihjKXtyZXR1cm4gbmV3IHAodGhpcy52YWx1ZS9jLnZhbHVlKX0scC5wcm90b3R5cGUudG9JbnRlZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKE1hdGguZmxvb3IodGhpcy52YWx1ZSkpfSxwLnByb3RvdHlwZS5oYXNPdmVyZmxvdz1mdW5jdGlvbigpe3JldHVybiExfSxwfShWKTt1LlJlYWw9bzt2YXIgeT1mdW5jdGlvbih6KXtmdW5jdGlvbiBwKGMpe2M9PT12b2lkIDAmJihjPW5ldyBNYXApO3ZhciB3PXouY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdy5lbnRyaWVzPWMsd31yZXR1cm4gZyhwLHopLHAucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIlJlY29yZFZhbHVlIn0scC5wcm90b3R5cGUucGNUb1N0cmluZz1mdW5jdGlvbihjLHcpe2Zvcih2YXIgVD10aGlzLE49dGhpcy5lbnRyaWVzLnNpemUhPT0xLCQ9MTskPD10aGlzLmVudHJpZXMuc2l6ZTsrKyQpdGhpcy5lbnRyaWVzLmhhcygiIiskKXx8KE49ITEpO2lmKE4pe3ZhciBIPSIoIjtmb3Iody5jaGFyYWN0ZXJzTGVmdC09MiwkPTE7JDw9dGhpcy5lbnRyaWVzLnNpemU7KyskKXskPjEmJihIKz0iLCAiLHcuY2hhcmFjdGVyc0xlZnQtPTIpO3ZhciBQPXRoaXMuZW50cmllcy5nZXQoIiIrJCk7aWYoUD09PXZvaWQgMCl0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoIkhvdyBkaWQgd2UgbG9vc2UgdGhpcyB2YWx1ZT8gSXQgd2FzIHRoZXJlIGJlZm9yZS4gSSBwcm9taXNlXHUyMDI2Iik7aWYoISh3LmNoYXJhY3RlcnNMZWZ0PjApKXtIKz0iXHUyMDI2IjticmVha312YXIgeD0wOyQ8dGhpcy5lbnRyaWVzLnNpemUmJih4PU1hdGguZmxvb3Iody5jaGFyYWN0ZXJzTGVmdC8yKSksdy5jaGFyYWN0ZXJzTGVmdC09eCxIKz1QLnBjVG9TdHJpbmcoYyx3KSx3LmNoYXJhY3RlcnNMZWZ0Kz14fXJldHVybiBIKyIpIn12YXIgUj0ieyI7dy5jaGFyYWN0ZXJzTGVmdC09Mjt2YXIgXz0hMCxXPSExLFE9MDtyZXR1cm4gdGhpcy5lbnRyaWVzLmZvckVhY2goZnVuY3Rpb24obmUsRil7aWYoIVcpe2lmKF8/Xz0hMTooUis9IiwgIix3LmNoYXJhY3RlcnNMZWZ0LT0yKSx3LmNoYXJhY3RlcnNMZWZ0PjApe3ZhciBiPTA7UTxULmVudHJpZXMuc2l6ZSYmKGI9TWF0aC5mbG9vcih3LmNoYXJhY3RlcnNMZWZ0LzIpKSx3LmNoYXJhY3RlcnNMZWZ0LT1iLFIrPUYrIiA9ICIrbmUucGNUb1N0cmluZyhjLHcpLHcuY2hhcmFjdGVyc0xlZnQrPWJ9ZWxzZSBSKz0iXHUyMDI2IixXPSEwOysrUX19KSxSKyJ9In0scC5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oYyl7aWYoIXRoaXMuZW50cmllcy5oYXMoYykpdGhyb3cgbmV3IHEuRXZhbHVhdGlvbkVycm9yKCJUcmllZCBhY2Nlc3Npbmcgbm9uLWV4aXN0aW5nIHJlY29yZCBwYXJ0LiIpO3JldHVybiB0aGlzLmVudHJpZXMuZ2V0KGMpfSxwLnByb3RvdHlwZS5oYXNWYWx1ZT1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5lbnRyaWVzLmhhcyhjKX0scC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGMpe3ZhciB3PXRoaXM7aWYoIShjIGluc3RhbmNlb2YgcCkpcmV0dXJuITE7dmFyIFQ9ITE7cmV0dXJuIHRoaXMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKE4sJCl7Yy5lbnRyaWVzLmhhcygkKXx8KFQ9ITApLE4uZXF1YWxzKGMuZW50cmllcy5nZXQoJCkpfHwoVD0hMCl9KSwhVCYmKGMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKE4sJCl7dy5lbnRyaWVzLmhhcygkKXx8KFQ9ITApLE4uZXF1YWxzKGMuZW50cmllcy5nZXQoJCkpfHwoVD0hMCl9KSwhVCl9LHB9KFYpO3UuUmVjb3JkVmFsdWU9eTt2YXIgZD1mdW5jdGlvbih6KXtmdW5jdGlvbiBwKGMsdyxUKXt2YXIgTj16LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIE4uc3RhdGU9YyxOLnJlY3Vyc2l2ZXM9dyxOLmJvZHk9VCxOfXJldHVybiBnKHAseikscC5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iRnVuY3Rpb25WYWx1ZSJ9LHAucHJvdG90eXBlLnBjVG9TdHJpbmc9ZnVuY3Rpb24oYyx3KXtyZXR1cm4gdy5jaGFyYWN0ZXJzTGVmdC09MiwiZm4ifSxwLnByb3RvdHlwZS5jb21wdXRlPWZ1bmN0aW9uKGMsdyxUKXtmb3IodmFyIE49dGhpcy5zdGF0ZS5nZXROZXN0ZWRTdGF0ZSh0aGlzLnN0YXRlLmlkKSwkPTA7JDx0aGlzLnJlY3Vyc2l2ZXMubGVuZ3RoOysrJCl0aGlzLnJlY3Vyc2l2ZXNbJF1bMV1pbnN0YW5jZW9mIHA/Ti5zZXREeW5hbWljVmFsdWUodGhpcy5yZWN1cnNpdmVzWyRdWzBdLG5ldyBwKHRoaXMuc3RhdGUsdGhpcy5yZWN1cnNpdmVzLHRoaXMucmVjdXJzaXZlc1skXVsxXS5ib2R5KSxzLklkZW50aWZpZXJTdGF0dXMuVkFMVUVfVkFSSUFCTEUpOk4uc2V0RHluYW1pY1ZhbHVlKHRoaXMucmVjdXJzaXZlc1skXVswXSx0aGlzLnJlY3Vyc2l2ZXNbJF1bMV0scy5JZGVudGlmaWVyU3RhdHVzLlZBTFVFX1ZBUklBQkxFKTtjLnB1c2goe25leHQ6dGhpcy5ib2R5LHBhcmFtczp7c3RhdGU6TixyZWNSZXN1bHQ6dm9pZCAwLG1vZGlmaWFibGU6VCx2YWx1ZTp3fX0pfSxwLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oYyl7dGhyb3cgbmV3IHEuSW50ZXJuYWxJbnRlcnByZXRlckVycm9yKCdZb3Ugc2ltcGx5IGNhbm5vdCBjb21wYXJlICInK3RoaXMucGNUb1N0cmluZyh2b2lkIDAsbmV3IE0oMjApKSsnIiBhbmQgIicrYy5wY1RvU3RyaW5nKHZvaWQgMCxuZXcgTSgyMCkpKyciLicpfSxwfShWKTt1LkZ1bmN0aW9uVmFsdWU9ZDt2YXIgdj1mdW5jdGlvbih6KXtmdW5jdGlvbiBwKGMsdyxUKXt3PT09dm9pZCAwJiYodz12b2lkIDApLFQ9PT12b2lkIDAmJihUPTApO3ZhciBOPXouY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gTi5jb25zdHJ1Y3Rvck5hbWU9YyxOLmFyZ3VtZW50PXcsTi5pZD1ULE59cmV0dXJuIGcocCx6KSxwLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJDb25zdHJ1Y3RlZFZhbHVlIn0scC5wcm90b3R5cGUucGNUb1N0cmluZz1mdW5jdGlvbihjLHcpe2lmKHRoaXMuY29uc3RydWN0b3JOYW1lPT09Ijo6Iil7dmFyIFQ9IlsiO3cuY2hhcmFjdGVyc0xlZnQtPTI7Zm9yKHZhciBOPXRoaXM7Ti5jb25zdHJ1Y3Rvck5hbWUhPT0ibmlsIjspe2lmKE4uY29uc3RydWN0b3JOYW1lIT09Ijo6Iil0aHJvdyBuZXcgcS5JbnRlcm5hbEludGVycHJldGVyRXJyb3IoJ0lzIHRoaXMgZXZlbiBhIGxpc3Q/IDEgIicrTi5jb25zdHJ1Y3Rvck5hbWUrJyIuJyk7dmFyICQ9Ti5hcmd1bWVudDtpZighKCQgaW5zdGFuY2VvZiB5JiYkLmVudHJpZXMuc2l6ZT09PTIpKXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignSXMgdGhpcyBldmVuIGEgbGlzdD8gMyAiJytOLmNvbnN0cnVjdG9yTmFtZSsnIi4nKTt2YXIgSD0kLmdldFZhbHVlKCIxIiksUD0kLmdldFZhbHVlKCIyIik7aWYoIShIIGluc3RhbmNlb2YgViYmUCBpbnN0YW5jZW9mIHApKXRocm93IG5ldyBxLkludGVybmFsSW50ZXJwcmV0ZXJFcnJvcignSXMgdGhpcyBldmVuIGEgbGlzdD8gMiAiJytOLmNvbnN0cnVjdG9yTmFtZSsnIi4nKTtpZihOIT09dGhpcyYmKFQrPSIsICIsdy5jaGFyYWN0ZXJzTGVmdC09MiksISh3LmNoYXJhY3RlcnNMZWZ0PjApKXtUKz0iXHUyMDI2IjticmVha312YXIgeD0wO1AuY29uc3RydWN0b3JOYW1lIT09Im5pbCImJih4PU1hdGguZmxvb3Iody5jaGFyYWN0ZXJzTGVmdC8yKSksdy5jaGFyYWN0ZXJzTGVmdC09eCxUKz1ILnBjVG9TdHJpbmcoYyx3KSx3LmNoYXJhY3RlcnNMZWZ0Kz14LE49UH1yZXR1cm4gVCsiXSJ9aWYodGhpcy5jb25zdHJ1Y3Rvck5hbWU9PT0ibmlsIilyZXR1cm4gdy5jaGFyYWN0ZXJzTGVmdC09MiwiW10iO2lmKGMhPT12b2lkIDApe3ZhciBSPWMuZ2V0SW5maXhTdGF0dXMobmV3IEIuSWRlbnRpZmllclRva2VuKHRoaXMuY29uc3RydWN0b3JOYW1lKSk7aWYoUiE9PXZvaWQgMCYmUi5pbmZpeCYmdGhpcy5hcmd1bWVudCBpbnN0YW5jZW9mIHkmJnRoaXMuYXJndW1lbnQuZW50cmllcy5zaXplPT09Mil7dmFyIF89dGhpcy5hcmd1bWVudC5nZXRWYWx1ZSgiMSIpLFc9dGhpcy5hcmd1bWVudC5nZXRWYWx1ZSgiMiIpO2lmKF8gaW5zdGFuY2VvZiBWJiZXIGluc3RhbmNlb2YgVilyZXR1cm4gdy5jaGFyYWN0ZXJzTGVmdC09NCt0aGlzLmNvbnN0cnVjdG9yTmFtZS5sZW5ndGgseD1NYXRoLmZsb29yKHcuY2hhcmFjdGVyc0xlZnQvMiksdy5jaGFyYWN0ZXJzTGVmdC09eCxUPSIoIix3LmNoYXJhY3RlcnNMZWZ0PjA/VCs9Xy5wY1RvU3RyaW5nKGMsdyk6VCs9Ilx1MjAyNiIsdy5jaGFyYWN0ZXJzTGVmdCs9eCxUKz0iICIrdGhpcy5jb25zdHJ1Y3Rvck5hbWUsdGhpcy5pZD4wJiYoVCs9UT0iLyIrdGhpcy5pZCx3LmNoYXJhY3RlcnNMZWZ0LT1RLmxlbmd0aCksdy5jaGFyYWN0ZXJzTGVmdD4wP1QrPSIgIitXLnBjVG9TdHJpbmcoYyx3KTpUKz0iIFx1MjAyNiIsVCsiKSJ9fXZhciBRLG5lPSIiO3JldHVybiBuZSs9dGhpcy5jb25zdHJ1Y3Rvck5hbWUsdy5jaGFyYWN0ZXJzTGVmdC09dGhpcy5jb25zdHJ1Y3Rvck5hbWUubGVuZ3RoKzEsdGhpcy5pZD4wJiYobmUrPVE9Ii8iK3RoaXMuaWQsdy5jaGFyYWN0ZXJzTGVmdC09US5sZW5ndGgpLHRoaXMuYXJndW1lbnQmJih3LmNoYXJhY3RlcnNMZWZ0PjA/KG5lKz0iICIsKHRoaXMuYXJndW1lbnQgaW5zdGFuY2VvZiBwJiZ0aGlzLmFyZ3VtZW50LmFyZ3VtZW50fHx0aGlzLmFyZ3VtZW50IGluc3RhbmNlb2YgQyYmdGhpcy5hcmd1bWVudC5hcmd1bWVudCkmJihuZSs9IigiKSxuZSs9dGhpcy5hcmd1bWVudC5wY1RvU3RyaW5nKGMsdyksKHRoaXMuYXJndW1lbnQgaW5zdGFuY2VvZiBwJiZ0aGlzLmFyZ3VtZW50LmFyZ3VtZW50fHx0aGlzLmFyZ3VtZW50IGluc3RhbmNlb2YgQyYmdGhpcy5hcmd1bWVudC5hcmd1bWVudCkmJihuZSs9IikiKSk6bmUrPSIgXHUyMDI2IiksbmV9LHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihjKXtyZXR1cm4gYyBpbnN0YW5jZW9mIFkmJihjPWMuY29uc3RydWN0KCkpLGMgaW5zdGFuY2VvZiBwJiZ0aGlzLmNvbnN0cnVjdG9yTmFtZT09PWMuY29uc3RydWN0b3JOYW1lJiZ0aGlzLmlkPT09Yy5pZCYmKHRoaXMuYXJndW1lbnQhPT12b2lkIDA/Yy5hcmd1bWVudD09PXZvaWQgMHx8dGhpcy5hcmd1bWVudC5lcXVhbHMoYy5hcmd1bWVudCk6Yy5hcmd1bWVudD09PXZvaWQgMCl9LHB9KFYpO3UuQ29uc3RydWN0ZWRWYWx1ZT12O3ZhciBDPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyx3LFQsTil7dz09PXZvaWQgMCYmKHc9dm9pZCAwKSxUPT09dm9pZCAwJiYoVD0wKSxOPT09dm9pZCAwJiYoTj0wKTt2YXIgJD16LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuICQuY29uc3RydWN0b3JOYW1lPWMsJC5hcmd1bWVudD13LCQuaWQ9VCwkLmV2YWxJZD1OLCR9cmV0dXJuIGcocCx6KSxwLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJFeGNlcHRpb25WYWx1ZSJ9LHAucHJvdG90eXBlLnBjVG9TdHJpbmc9ZnVuY3Rpb24oYyx3KXt2YXIgVD10aGlzLmNvbnN0cnVjdG9yTmFtZTtpZih3LmNoYXJhY3RlcnNMZWZ0LT10aGlzLmNvbnN0cnVjdG9yTmFtZS5sZW5ndGgrMSx0aGlzLmlkPjApe3ZhciBOPSIvIit0aGlzLmlkO1QrPU4sdy5jaGFyYWN0ZXJzTGVmdC09Ti5sZW5ndGh9cmV0dXJuIHRoaXMuYXJndW1lbnQmJih3LmNoYXJhY3RlcnNMZWZ0PjA/VCs9IiAiK3RoaXMuYXJndW1lbnQucGNUb1N0cmluZyhjLHcpOlQrPSIgXHUyMDI2IiksVH0scC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGMpe3JldHVybiBjIGluc3RhbmNlb2YgSiYmKGM9Yy5jb25zdHJ1Y3QoKSksYyBpbnN0YW5jZW9mIHAmJnRoaXMuY29uc3RydWN0b3JOYW1lPT09Yy5jb25zdHJ1Y3Rvck5hbWUmJnRoaXMuaWQ9PT1jLmlkJiZ0aGlzLmV2YWxJZD09PWMuZXZhbElkJiYodGhpcy5hcmd1bWVudCE9PXZvaWQgMD9jLmFyZ3VtZW50PT09dm9pZCAwfHx0aGlzLmFyZ3VtZW50LmVxdWFscyhjLmFyZ3VtZW50KTpjLmFyZ3VtZW50PT09dm9pZCAwKX0scH0oVik7dS5FeGNlcHRpb25WYWx1ZT1DO3ZhciBHPWZ1bmN0aW9uKHope2Z1bmN0aW9uIHAoYyx3KXt2YXIgVD16LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIFQubmFtZT1jLFQuYXBwbHk9dyxUfXJldHVybiBnKHAseikscC5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4iUHJlZGVmaW5lZEZ1bmN0aW9uIn0scC5wcm90b3R5cGUucGNUb1N0cmluZz1mdW5jdGlvbihjLHcpe3JldHVybiB3LmNoYXJhY3RlcnNMZWZ0LT0yLCJmbiJ9LHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihjKXtyZXR1cm4gYyBpbnN0YW5jZW9mIHAmJnRoaXMubmFtZT09PWMubmFtZX0scH0oVik7dS5QcmVkZWZpbmVkRnVuY3Rpb249Rzt2YXIgWT1mdW5jdGlvbih6KXtmdW5jdGlvbiBwKGMsdyxUKXt3PT09dm9pZCAwJiYodz0wKSxUPT09dm9pZCAwJiYoVD0wKTt2YXIgTj16LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIE4uY29uc3RydWN0b3JOYW1lPWMsTi5udW1BcmdzPXcsTi5pZD1ULE59cmV0dXJuIGcocCx6KSxwLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJWYWx1ZUNvbnN0cnVjdG9yIn0scC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGMpe3JldHVybiBjIGluc3RhbmNlb2YgcCYmdGhpcy5jb25zdHJ1Y3Rvck5hbWU9PT1jLmNvbnN0cnVjdG9yTmFtZSYmdGhpcy5pZD09PWMuaWR9LHAucHJvdG90eXBlLmNvbnN0cnVjdD1mdW5jdGlvbihjKXtyZXR1cm4gYz09PXZvaWQgMCYmKGM9dm9pZCAwKSxuZXcgdih0aGlzLmNvbnN0cnVjdG9yTmFtZSxjLHRoaXMuaWQpfSxwLnByb3RvdHlwZS5wY1RvU3RyaW5nPWZ1bmN0aW9uKGMsdyl7dmFyIFQ9dGhpcy5jb25zdHJ1Y3Rvck5hbWU7aWYody5jaGFyYWN0ZXJzTGVmdC09dGhpcy5jb25zdHJ1Y3Rvck5hbWUubGVuZ3RoLHRoaXMuaWQ+MCl7dmFyIE49Ii8iK3RoaXMuaWQ7VCs9Tix3LmNoYXJhY3RlcnNMZWZ0LT1OLmxlbmd0aH1yZXR1cm4gVH0scH0oVik7dS5WYWx1ZUNvbnN0cnVjdG9yPVk7dmFyIEo9ZnVuY3Rpb24oeil7ZnVuY3Rpb24gcChjLHcsVCxOKXt3PT09dm9pZCAwJiYodz0wKSxUPT09dm9pZCAwJiYoVD0wKSxOPT09dm9pZCAwJiYoTj0wKTt2YXIgJD16LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuICQuZXhjZXB0aW9uTmFtZT1jLCQubnVtQXJncz13LCQuaWQ9VCwkLmV2YWxJZD1OLCR9cmV0dXJuIGcocCx6KSxwLnByb3RvdHlwZS50eXBlTmFtZT1mdW5jdGlvbigpe3JldHVybiJFeGNlcHRpb25Db25zdHJ1Y3RvciJ9LHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihjKXtyZXR1cm4gYyBpbnN0YW5jZW9mIHAmJnRoaXMuZXhjZXB0aW9uTmFtZT09PWMuZXhjZXB0aW9uTmFtZSYmdGhpcy5pZD09PWMuaWQmJnRoaXMuZXZhbElkPT09Yy5ldmFsSWR9LHAucHJvdG90eXBlLmNvbnN0cnVjdD1mdW5jdGlvbihjKXtyZXR1cm4gYz09PXZvaWQgMCYmKGM9dm9pZCAwKSxuZXcgQyh0aGlzLmV4Y2VwdGlvbk5hbWUsYyx0aGlzLmlkLHRoaXMuZXZhbElkKX0scC5wcm90b3R5cGUucGNUb1N0cmluZz1mdW5jdGlvbihjLHcpe3ZhciBUPXRoaXMuZXhjZXB0aW9uTmFtZTtpZih3LmNoYXJhY3RlcnNMZWZ0LT10aGlzLmV4Y2VwdGlvbk5hbWUubGVuZ3RoLHRoaXMuaWQ+MCl7dmFyIE49Ii8iK3RoaXMuaWQ7VCs9Tix3LmNoYXJhY3RlcnNMZWZ0LT1OLmxlbmd0aH1yZXR1cm4gVH0scH0oVik7dS5FeGNlcHRpb25Db25zdHJ1Y3Rvcj1KfSw0MTI6KGZlLHUpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHUuQ09NTUlUX01FU1NBR0U9dS5CVUlMRF9EQVRFPXUuQ09NTUlUX0hBU0g9dS5CUkFOQ0hfTkFNRT11LlZFUlNJT049dm9pZCAwLHUuVkVSU0lPTj0iMS42LjEwIix1LkJSQU5DSF9OQU1FPSJtYWluIix1LkNPTU1JVF9IQVNIPSI3YmE2YjIzIix1LkJVSUxEX0RBVEU9IldlZCBKdWwgMTQgMTI6NDk6MzkgUE0gVVRDIDIwMjEiLHUuQ09NTUlUX01FU1NBR0U9InVwZGF0ZSBjbGkifX0sU2U9e307cmV0dXJuIGZ1bmN0aW9uIGZlKHUpe3ZhciBLPVNlW3VdO2lmKEshPT12b2lkIDApcmV0dXJuIEsuZXhwb3J0czt2YXIgbT1TZVt1XT17ZXhwb3J0czp7fX07cmV0dXJuIFRlW3VdLmNhbGwobS5leHBvcnRzLG0sbS5leHBvcnRzLGZlKSxtLmV4cG9ydHN9KDUxOSl9KSgpfSl9KShrZSk7ZnVuY3Rpb24gUGUoYmUsSWUpe2xldCBUZTt0cnl7VGU9a2UuZXhwb3J0cy5pbnRlcnByZXQoSWUrIjsiLGJlKX1jYXRjaChTZSl7cmV0dXJuIFNlIGluc3RhbmNlb2Yga2UuZXhwb3J0cy5FcnJvcnMuSW5jb21wbGV0ZUVycm9yP3tzdGF0ZTpudWxsLHJlc3VsdDoxLGVycm9yOlNlLHdhcm5pbmdzOltdfTp7c3RhdGU6bnVsbCxyZXN1bHQ6MixlcnJvcjpTZSx3YXJuaW5nczpbXX19cmV0dXJuIFRlLmV2YWx1YXRpb25FcnJvcmVkP3tzdGF0ZTpUZS5zdGF0ZSxyZXN1bHQ6MyxlcnJvcjpUZS5lcnJvcix3YXJuaW5nczpUZS53YXJuaW5nc306e3N0YXRlOlRlLnN0YXRlLHJlc3VsdDowLGVycm9yOm51bGwsd2FybmluZ3M6VGUud2FybmluZ3N9fW9ubWVzc2FnZT1hc3luYyBiZT0+e3RyeXtsZXQgSWUsVGU9IiI7Y29uc3QgU2U9a2UuZXhwb3J0cy5nZXRGaXJzdFN0YXRlKCk7SWU9a2UuZXhwb3J0cy5pbnRlcnByZXQoImZ1biB0cnVuYyB4ID0gaWYgeCA+PSAwLjAgdGhlbiBmbG9vciB4IGVsc2UgY2VpbCB4OyIsU2UpO2NvbnN0IGZlPWJlLmRhdGEuc2NyaXB0LnNwbGl0KCI7Iik7Zm9yKGxldCB1PTA7dTxmZS5sZW5ndGgtMTt1Kyspe2ZlW3VdKz0iOyI7Y29uc3QgSz1QZShJZS5zdGF0ZSxmZVt1XSk7aWYoSy5yZXN1bHQ9PTApe0llPUs7bGV0IG09IiI7Zm9yKGxldCBnPTA7ZzxLLndhcm5pbmdzLmxlbmd0aDtnKyspbSs9Sy53YXJuaW5nc1tnXS50b1N0cmluZygpLnJlcGxhY2UoIldhcm5pbmc6ICIsIiIpO1RlKz1tK0suc3RhdGUudG9TdHJpbmcoe3N0b3BJZDpLLnN0YXRlLmlkfSl9ZWxzZSBpZih1PGZlLmxlbmd0aC0yJiZLLnJlc3VsdCE9MylmZVt1KzFdPWZlW3VdK2ZlW3UrMV07ZWxzZSB0aHJvdyBuZXcgRXJyb3IoSy5yZXN1bHQ9PTM/IkV4Y2VwdGlvbi0gIitLLmVycm9yKyIgcmFpc2VkIjpLLmVycm9yKX1wb3N0TWVzc2FnZSh7ZGVidWc6VGV9KX1jYXRjaChJZSl7Y29uc29sZS5sb2coSWUpLHBvc3RNZXNzYWdlKHtlcnJvcjpJZX0pfX19KSgpOwo=",uZ=typeof window<"u"&&window.Blob&&new Blob([atob(cZ)],{type:"text/javascript;charset=utf-8"});function dZ(){const t=uZ&&(window.URL||window.webkitURL).createObjectURL(uZ);try{return t?new Worker(t):new Worker("data:application/javascript;base64,"+cZ)}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}function em(t){var e={as:"keyword",do:"keyword",else:"keyword",end:"keyword",exception:"keyword",fun:"keyword",functor:"keyword",if:"keyword",in:"keyword",include:"keyword",let:"keyword",of:"keyword",open:"keyword",rec:"keyword",struct:"keyword",then:"keyword",type:"keyword",val:"keyword",while:"keyword",with:"keyword"},n=t.extraWords||{};for(var r in n)n.hasOwnProperty(r)&&(e[r]=t.extraWords[r]);var i=[];for(var s in e)i.push(s);function o(m,p){var u=m.next();if(u==='"')return p.tokenize=a,p.tokenize(m,p);if(u==="{"&&m.eat("|"))return p.longString=!0,p.tokenize=c,p.tokenize(m,p);if(u==="("&&m.match(/^\*(?!\))/))return p.commentLevel++,p.tokenize=l,p.tokenize(m,p);if(u==="~"||u==="?")return m.eatWhile(/\w/),"variableName.special";if(u==="`")return m.eatWhile(/\w/),"quote";if(u==="/"&&t.slashComments&&m.eat("/"))return m.skipToEnd(),"comment";if(/\d/.test(u))return u==="0"&&m.eat(/[bB]/)&&m.eatWhile(/[01]/),u==="0"&&m.eat(/[xX]/)&&m.eatWhile(/[0-9a-fA-F]/),u==="0"&&m.eat(/[oO]/)?m.eatWhile(/[0-7]/):(m.eatWhile(/[\d_]/),m.eat(".")&&m.eatWhile(/[\d]/),m.eat(/[eE]/)&&m.eatWhile(/[\d\-+]/)),"number";if(/[+\-*&%=<>!?|@\.~:]/.test(u))return"operator";if(/[\w\xa1-\uffff]/.test(u)){m.eatWhile(/[\w\xa1-\uffff]/);var d=m.current();return e.hasOwnProperty(d)?e[d]:"variable"}return null}function a(m,p){for(var u,d=!1,h=!1;(u=m.next())!=null;){if(u==='"'&&!h){d=!0;break}h=!h&&u==="\\"}return d&&!h&&(p.tokenize=o),"string"}function l(m,p){for(var u,d;p.commentLevel>0&&(d=m.next())!=null;)u==="("&&d==="*"&&p.commentLevel++,u==="*"&&d===")"&&p.commentLevel--,u=d;return p.commentLevel<=0&&(p.tokenize=o),"comment"}function c(m,p){for(var u,d;p.longString&&(d=m.next())!=null;)u==="|"&&d==="}"&&(p.longString=!1),u=d;return p.longString||(p.tokenize=o),"string"}return{startState:function(){return{tokenize:o,commentLevel:0,longString:!1}},token:function(m,p){return m.eatSpace()?null:p.tokenize(m,p)},languageData:{autocomplete:i,commentTokens:{line:t.slashComments?"//":void 0,block:{open:"(*",close:"*)"}}}}}em({name:"ocaml",extraWords:{and:"keyword",assert:"keyword",begin:"keyword",class:"keyword",constraint:"keyword",done:"keyword",downto:"keyword",external:"keyword",function:"keyword",initializer:"keyword",lazy:"keyword",match:"keyword",method:"keyword",module:"keyword",mutable:"keyword",new:"keyword",nonrec:"keyword",object:"keyword",private:"keyword",sig:"keyword",to:"keyword",try:"keyword",value:"keyword",virtual:"keyword",when:"keyword",raise:"builtin",failwith:"builtin",true:"builtin",false:"builtin",asr:"builtin",land:"builtin",lor:"builtin",lsl:"builtin",lsr:"builtin",lxor:"builtin",mod:"builtin",or:"builtin",raise_notrace:"builtin",trace:"builtin",exit:"builtin",print_string:"builtin",print_endline:"builtin",int:"type",float:"type",bool:"type",char:"type",string:"type",unit:"type",List:"builtin"}}),em({name:"fsharp",extraWords:{abstract:"keyword",assert:"keyword",base:"keyword",begin:"keyword",class:"keyword",default:"keyword",delegate:"keyword","do!":"keyword",done:"keyword",downcast:"keyword",downto:"keyword",elif:"keyword",extern:"keyword",finally:"keyword",for:"keyword",function:"keyword",global:"keyword",inherit:"keyword",inline:"keyword",interface:"keyword",internal:"keyword",lazy:"keyword","let!":"keyword",match:"keyword",member:"keyword",module:"keyword",mutable:"keyword",namespace:"keyword",new:"keyword",null:"keyword",override:"keyword",private:"keyword",public:"keyword","return!":"keyword",return:"keyword",select:"keyword",static:"keyword",to:"keyword",try:"keyword",upcast:"keyword","use!":"keyword",use:"keyword",void:"keyword",when:"keyword","yield!":"keyword",yield:"keyword",atomic:"keyword",break:"keyword",checked:"keyword",component:"keyword",const:"keyword",constraint:"keyword",constructor:"keyword",continue:"keyword",eager:"keyword",event:"keyword",external:"keyword",fixed:"keyword",method:"keyword",mixin:"keyword",object:"keyword",parallel:"keyword",process:"keyword",protected:"keyword",pure:"keyword",sealed:"keyword",tailcall:"keyword",trait:"keyword",virtual:"keyword",volatile:"keyword",List:"builtin",Seq:"builtin",Map:"builtin",Set:"builtin",Option:"builtin",int:"builtin",string:"builtin",not:"builtin",true:"builtin",false:"builtin",raise:"builtin",failwith:"builtin"},slashComments:!0});const hN=em({name:"sml",extraWords:{abstype:"keyword",and:"keyword",andalso:"keyword",case:"keyword",datatype:"keyword",fn:"keyword",handle:"keyword",infix:"keyword",infixr:"keyword",local:"keyword",nonfix:"keyword",op:"keyword",orelse:"keyword",raise:"keyword",withtype:"keyword",eqtype:"keyword",sharing:"keyword",sig:"keyword",signature:"keyword",structure:"keyword",where:"keyword",true:"keyword",false:"keyword",int:"builtin",real:"builtin",string:"builtin",char:"builtin",bool:"builtin"},slashComments:!0});function mN(t){let e,n,r,i,s;return{c(){e=Wt("base-editor"),this.c=Tt,Pe(e,"syntax",Zh.define(hN)),Pe(e,"type",t[0]),Pe(e,"theme",n=localStorage.getItem("icp-default-theme")||t[1]),Pe(e,"code",t[2]),Pe(e,"webworker",t[6]),Pe(e,"id",t[3]),Pe(e,"downloadable",t[5]),Pe(e,"save",r=t[4]&&t[3]!=""),Pe(e,"language","ml")},m(o,a){Ut(o,e,a),i||(s=En(e,"recreateworker",t[7]),i=!0)},p(o,[a]){a&1&&Pe(e,"type",o[0]),a&2&&n!==(n=localStorage.getItem("icp-default-theme")||o[1])&&Pe(e,"theme",n),a&4&&Pe(e,"code",o[2]),a&64&&Pe(e,"webworker",o[6]),a&8&&Pe(e,"id",o[3]),a&32&&Pe(e,"downloadable",o[5]),a&24&&r!==(r=o[4]&&o[3]!="")&&Pe(e,"save",r)},i:Tt,o:Tt,d(o){o&&ur(e),i=!1,s()}}}function pN(t,e,n){let{type:r="normal"}=e,{theme:i="light"}=e,{code:s=""}=e,{id:o=""}=e,{save:a=!1}=e,{downloadable:l=!1}=e,c;Ls(()=>{n(6,c=new dZ)});const m=p=>{n(6,c=new dZ)};return t.$$set=p=>{"type"in p&&n(0,r=p.type),"theme"in p&&n(1,i=p.theme),"code"in p&&n(2,s=p.code),"id"in p&&n(3,o=p.id),"save"in p&&n(4,a=p.save),"downloadable"in p&&n(5,l=p.downloadable)},[r,i,s,o,a,l,c,m]}class fN extends Vi{constructor(e){super(),Mi(this,{target:this.shadowRoot,props:Ni(this.attributes),customElement:!0},pN,mN,Wi,{type:0,theme:1,code:2,id:3,save:4,downloadable:5},null),e&&(e.target&&Ut(e.target,this,e.anchor),e.props&&(this.$set(e.props),mt()))}static get observedAttributes(){return["type","theme","code","id","save","downloadable"]}get type(){return this.$$.ctx[0]}set type(e){this.$$set({type:e}),mt()}get theme(){return this.$$.ctx[1]}set theme(e){this.$$set({theme:e}),mt()}get code(){return this.$$.ctx[2]}set code(e){this.$$set({code:e}),mt()}get id(){return this.$$.ctx[3]}set id(e){this.$$set({id:e}),mt()}get save(){return this.$$.ctx[4]}set save(e){this.$$set({save:e}),mt()}get downloadable(){return this.$$.ctx[5]}set downloadable(e){this.$$set({downloadable:e}),mt()}}customElements.define("standardml-editor",fN)})();
